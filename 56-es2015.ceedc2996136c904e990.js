(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"3E1i":function(e,t,i){"use strict";i.r(t);var n=i("tyNb"),o=i("5HBU"),r=i("STbY"),c=i("/1cH"),a=i("iadO"),l=i("bTqV"),s=i("7EHt"),p=i("kmnG"),b=i("NFeN"),m=i("Qu3c"),d=i("qFsG"),h=i("wZkO"),u=i("d3UM"),v=i("QibW"),f=i("0IaG"),g=i("/t3+"),y=i("bSwM"),x=i("M9IT"),w=i("xHqg"),k=i("A5z7"),X=i("bv9b"),W=i("XhcP"),S=i("FKr1"),_=i("1jcm"),C=i("+0xr"),D=i("Dh3D"),L=i("IOBc"),R=i("212X"),O=i("LPQX"),T=i("4CPF"),F=i("3Pt+"),P=i("XNiG"),M=i("1G5W"),A=i("PVWW"),I=i("fXoL"),j=i("0Zc1"),B=i("XiUz"),z=i("EwFO"),N=i("ihCf"),J=i("ofXK"),H=i("znSr");const V=["formDirective"],q=function(e){return{"text-strike red-fg":e}};function $(e,t){if(1&e&&(I.Xb(0,"li"),I.Xb(1,"span",27),I.Xb(2,"span",28),I.Lc(3),I.Wb(),I.Wb(),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.rc(2,q,!e.valid)),I.Db(2),I.Mc(e.value)}}function U(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Mc(e.code)}}function G(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Mc(e.short_name)}}function Y(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Mc(e.name)}}function E(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.name),I.Db(1),I.Mc(e.name)}}function Q(e,t){if(1&e&&(I.Xb(0,"mat-option",29),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e)("matTooltip",e.name),I.Db(1),I.Mc(e.code)}}function K(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Mc(e.code)}}let Z=(()=>{class e{constructor(e,t){this.formBuilder=e,this.commonService=t,this.filterCity=[],this.filterPlace=[],this.contList=[],this.filterContainer=new I.o,this.form=this.formBuilder.group({container:[null],type:[null],valid:[1],principal:[null],country:[null],city:[null],place:[null],move:[null]}),this.now=new Date}ngOnInit(){this.filterCity=this.city.slice(),this.filterPlace=this.place.slice(),this.filterPlace.sort(),this.form.valueChanges.subscribe(e=>{this.filterContainer.emit(e)}),this.form.controls.container.valueChanges.subscribe(e=>{this.contList=[],e&&e.trim().split(/\r?\n|\s+|[ ,]+/g).map(e=>{this.contList.push({value:e,valid:this.commonService.checkContNum(e)})})}),this.form.controls.country.valueChanges.subscribe(e=>{this.form.controls.place.setValue(null),this.form.controls.city.setValue(null),this.filterPlace=this.place.slice(),this.filterCity=this.city.slice(),e&&(this.filterPlace=this.place.filter(t=>t.country==e.id),this.filterCity=this.city.filter(t=>t.country_id==e.id))}),this.form.controls.city.valueChanges.subscribe(e=>{this.form.controls.place.setValue(null),e&&(this.filterPlace=this.place.filter(t=>"partner"==t.type&&t.city==e))})}resetForm(){this.form.patchValue({container:null,type:null,valid:1,principal:null,country:null,city:null,place:null,move:null}),this.filterPlace=this.place.slice(),this.filterCity=this.city.slice()}compareObj(e,t){if(e&&t)return e.name===t.name&&e.id===t.id}setFilter(e){switch(e[1]){case"principal":let t=this.principal.find(t=>t.id==e[0]);this.form.controls.principal.setValue(t);break;case"place":let i=this.place.find(t=>t.id==e[0]);this.form.controls.place.setValue(i);break;case"city":this.form.controls.city.setValue(e[0]);break;case"country":let n=this.country.find(t=>t.id==e[0]);this.form.controls.country.setValue(n);break;case"type":this.form.controls.type.setValue(e[0])}}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(F.d),I.Rb(j.a))},e.\u0275cmp=I.Lb({type:e,selectors:[["container-overview-sidebar"]],viewQuery:function(e,t){var i;1&e&&I.Sc(V,!0),2&e&&I.wc(i=I.gc())&&(t.searchNgForm=i.first)},inputs:{modul:"modul",height:"height",principal:"principal",moveType:"moveType",contType:"contType",country:"country",city:"city",place:"place"},outputs:{filterContainer:"filterContainer"},decls:64,vars:14,consts:[["name","form",3,"formGroup","keydown.enter"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["id","textcontainer","appearance","outline",1,"w-100-p","pr-sm-8"],["textareaCheck","","matInput","","formControlName","container","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","10"],[1,"mt-0","mb-8"],[4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["appearance","outline",1,"w-100-p","pr-sm-8"],["formControlName","type"],["value","'all'"],[3,"value",4,"ngFor","ngForOf"],["formControlName","valid"],[3,"value"],["formControlName","principal"],["formControlName","country",3,"compareWith"],["formControlName","city"],["formControlName","place",3,"compareWith"],[3,"value","matTooltip",4,"ngFor","ngForOf"],["formControlName","move"],[3,"ngClass"],[2,"color","blue"],[3,"value","matTooltip"]],template:function(e,t){1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.fc("click",(function(e){return t.resetForm()})),I.Lc(5," Reset "),I.Wb(),I.Wb(),I.Wb(),I.Xb(6,"div",5),I.Xb(7,"div",6),I.Xb(8,"div",7),I.Xb(9,"div",8),I.Xb(10,"div",9),I.Xb(11,"mat-form-field",10),I.Xb(12,"mat-label"),I.Lc(13,"Container"),I.Wb(),I.Sb(14,"textarea",11),I.Wb(),I.Xb(15,"ul",12),I.Jc(16,$,4,4,"li",13),I.Wb(),I.Wb(),I.Xb(17,"div",14),I.Xb(18,"mat-form-field",15),I.Xb(19,"mat-label"),I.Lc(20,"Type"),I.Wb(),I.Xb(21,"mat-select",16),I.Xb(22,"mat-option",17),I.Lc(23,"All"),I.Wb(),I.Jc(24,U,2,2,"mat-option",18),I.Wb(),I.Wb(),I.Wb(),I.Xb(25,"div",14),I.Xb(26,"mat-form-field",15),I.Xb(27,"mat-label"),I.Lc(28,"Valid"),I.Wb(),I.Xb(29,"mat-select",19),I.Xb(30,"mat-option",20),I.Lc(31,"Invalid"),I.Wb(),I.Xb(32,"mat-option",20),I.Lc(33,"Valid"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(34,"div",14),I.Xb(35,"mat-form-field",15),I.Xb(36,"mat-label"),I.Lc(37,"Principal"),I.Wb(),I.Xb(38,"mat-select",21),I.Jc(39,G,2,2,"mat-option",18),I.Wb(),I.Wb(),I.Wb(),I.Xb(40,"div",14),I.Xb(41,"mat-form-field",15),I.Xb(42,"mat-label"),I.Lc(43,"Country"),I.Wb(),I.Xb(44,"mat-select",22),I.Jc(45,Y,2,2,"mat-option",18),I.Wb(),I.Wb(),I.Wb(),I.Xb(46,"div",14),I.Xb(47,"mat-form-field",15),I.Xb(48,"mat-label"),I.Lc(49,"City"),I.Wb(),I.Xb(50,"mat-select",23),I.Jc(51,E,2,2,"mat-option",18),I.Wb(),I.Wb(),I.Wb(),I.Xb(52,"div",14),I.Xb(53,"mat-form-field",15),I.Xb(54,"mat-label"),I.Lc(55,"Place"),I.Wb(),I.Xb(56,"mat-select",24),I.Jc(57,Q,2,3,"mat-option",25),I.Wb(),I.Wb(),I.Wb(),I.Xb(58,"div",14),I.Xb(59,"mat-form-field",15),I.Xb(60,"mat-label"),I.Lc(61,"Move"),I.Wb(),I.Xb(62,"mat-select",26),I.Jc(63,K,2,2,"mat-option",18),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.pc("formGroup",t.form),I.Db(6),I.Ic("height",t.height,"px"),I.Db(10),I.pc("ngForOf",t.contList),I.Db(8),I.pc("ngForOf",t.contType),I.Db(6),I.pc("value",0),I.Db(2),I.pc("value",1),I.Db(7),I.pc("ngForOf",t.principal),I.Db(5),I.pc("compareWith",t.compareObj),I.Db(1),I.pc("ngForOf",t.country),I.Db(6),I.pc("ngForOf",t.filterCity),I.Db(5),I.pc("compareWith",t.compareObj),I.Db(1),I.pc("ngForOf",t.filterPlace),I.Db(6),I.pc("ngForOf",t.moveType))},directives:[F.A,F.q,F.h,B.d,B.c,l.b,B.b,z.a,p.c,p.f,d.b,F.b,N.b,F.p,F.g,J.s,u.a,S.n,J.q,H.a,m.a],styles:["container-overview-sidebar{border-right:1px solid #a3a3a3}container-overview-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-overview-sidebar .navbar-scroll-container{background:#fff!important}container-overview-sidebar .navbar-scroll-container .navbar-content{padding-top:0}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line #textcontainer .mat-form-field-wrapper{padding-bottom:0}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}container-overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();var ee=i("HX77"),te=i("2Vo4"),ie=i("jD4G"),ne=i("tk/3"),oe=i("qXBG");let re=(()=>{class e{constructor(e,t,i,n){this._httpClient=e,this.datePipe=t,this.commonService=i,this.authService=n,this.modul="pacific-logistics-network",this.containers=[],this.noMove=[],this.countryR=[],this.cityR=[],this.placeR=[],this.principalR=[],this.contTypeR=[],this.moveR=[],this.principalReport=[],this.total={totalType:{}},this.defaultSearch={valid:1,principal:null},this.onDataChanged=new te.a([]),this.onContainersListChanged=new te.a([]),this.onPlnContainerDetailsChanged=new te.a([]),this.onFilterChanged=new P.a,this.onFilterColumnChanged=new P.a,this.onSearchTextChanged=new P.a,this.onSetFilterChanged=new P.a}resolve(e){return this.authService.routerData=e,this.filterBy=JSON.parse(JSON.stringify(this.defaultSearch)),new Promise((e,t)=>{Promise.all([this.getContainerInfo(),this.getData()]).then(([t])=>{this.onFilterChanged.subscribe(e=>{this.filterBy=e,this.getFilterContainer()}),this.onSearchTextChanged.subscribe(e=>{this.searchText=e,this.getFilterContainer()}),this.onFilterColumnChanged.subscribe(e=>{this.filterColumn=e,this.getFilterContainer()}),e()},t)})}getContainerInfo(){let e={headers:new ne.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/report",e).subscribe(e=>{this.containers=e.container,this.noMove=e.noMove,this.countryR=e.country,this.cityR=e.city,this.placeR=e.place,this.principalR=e.principal,this.contTypeR=e.contType,this.moveR=e.move,this.getFilterContainer(),t(e)},i)})}getData(){let e={headers:new ne.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/data",e).subscribe(e=>{this.partner=e[0],this.seaport=e[1],this.packageType=e[2],this.moveType=e[3],this.currency=e[4],this.country=e[5],this.seaTerminal=e[6],this.onDataChanged.next(e),t(e)},i)})}getPlnContainerById(e){let t={headers:new ne.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/id/"+e,t).subscribe(e=>{this.onPlnContainerDetailsChanged.next(e),i(e)},n)})}deletePlnContainer(e){let t={headers:new ne.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.delete(this.authService.apiUrl+"/pln/container/id/"+e,t).subscribe(e=>{i(e)},n)})}getFilterContainer(){let e=JSON.parse(JSON.stringify(this.containers));if(this.filterBy.container){let t=[];this.filterBy.container.trim().split(/\r?\n|\s+|[ ,]+/g).map(e=>{this.commonService.checkContNum(e)&&t.push(e)}),e=this.commonService.filterArray(e,t,"cont_number")}this.filterBy.type&&"all"!=this.filterBy.type&&(e=this.commonService.filterById(e,this.filterBy.type,"cont_type")),e=this.commonService.filterSelect(e,this.filterBy.valid,"status"),this.filterBy.principal&&(e=this.commonService.filterById(e,this.filterBy.principal,"principal")),this.filterBy.country&&(e=e.filter(e=>e.off_port_country&&e.off_port_country==this.filterBy.country.id||!e.movement&&e.on_port_country==this.filterBy.country.id||e.movement&&e.movement.country==this.filterBy.country.id)),this.filterBy.city&&(e=this.commonService.filterObjectText(e,"movement",this.filterBy.city,"city")),this.filterBy.place&&(e=e.filter(e=>e.movement&&e.movement.place==this.filterBy.place.id||!e.movement&&e.on_port==this.filterBy.place.id||e.off_port&&e.off_port==this.filterBy.place.id)),this.filterBy.move&&(e=this.commonService.filterObjectText(e,"movement",this.filterBy.move,"move")),this.searchText&&""!==this.searchText&&(e=ie.a.filterArrayByString(e,this.searchText)),this.filterColumn&&[{name:"Container",column:"cont_number",type:"text"},{name:"Type",column:"cont_type_code",type:"text"},{name:"Code",column:"cont_code",type:"text"},{name:"Grade",column:"grade",type:"text"},{name:"Owner",column:"owner_short_name",type:"text"},{name:"Lease",column:"lease_code",type:"text"},{name:"Min",column:"minimum",type:"number"},{name:"On hire",column:"on_hire",type:"date"},{name:"On port",column:"on_port_name",type:"text"},{name:"Off hire",column:"off_hire",type:"date"},{name:"Off port",column:"off_port_name",type:"text"},{name:"Usage",column:"usage",type:"number"},{name:"Over",column:"over",type:"number"},{name:"Place",column:"place_short_name",type:"text-movement"},{name:"Move",column:"move_code",type:"text-movement"},{name:"Move date",column:"maxDate",type:"date-movement"},{name:"Idle",column:"day",type:"number-movement"},{name:"Document",column:"document",type:"text-movement"},{name:"Shipment",column:"shipment_code",type:"text-movement"},{name:"Info",column:"info",type:"text"}].map(t=>{this.filterColumn[t.name]&&"text"==t.type&&(e=e.filter(e=>e[t.column]&&e[t.column].toLowerCase().includes(this.filterColumn[t.name].toLowerCase()))),this.filterColumn[t.name]&&"number"==t.type&&(e=e.filter(e=>e[t.column]>=this.filterColumn[t.name])),this.filterColumn[t.name]&&"text-movement"==t.type&&(e=e.filter(e=>e.movement&&e.movement[t.column]&&e.movement[t.column].toLowerCase().includes(this.filterColumn[t.name].toLowerCase()))),this.filterColumn[t.name]&&"number-movement"==t.type&&(e=e.filter(e=>e.movement&&e.movement[t.column]&&e.movement[t.column]>=this.filterColumn[t.name]))}),this.filterContainer=e,this.principalReport=[],this.total.totalType={},this.principalR.map(t=>{let i={};i.principal=t,i.check=0,this.contTypeR.map(t=>{i[t.code]=e.filter(e=>e.cont_type==t.id&&e.principal==i.principal.id),i.check+=i[t.code].length,this.total.totalType[t.code]||(this.total.totalType[t.code]=0),this.total.totalType[t.code]+=i[t.code].length}),this.principalReport.push(i)});let t={port:{},depot:{},carrier:{},noscope:{},city:{}},i={port:{total:{}},depot:{total:{}},carrier:{total:{}},noscope:{total:{}},city:{total:{}},all:{total:{}}};function n(e){return e||0}function o(e){return e||{}}function r(e){return e||[]}function c(e,t,i,n,o){e[n][o][i.movement.move_code].push(i),e[n][o].total++,t[n][i.cont_type_code][i.movement.move_code]++,t[n].total[i.movement.move_code]++}function a(e,t,i,n){let o={id:e.id,name:e.name,code:e.code,country:e.country,country_name:e.country_name,country_code:e.country_code,pol:e.pol,pol_name:e.pol_name,pol_code:e.pol_code,pod:e.pod,pod_name:e.pod_name,pod_code:e.pod_code,city:"partner"==e.type?e.city:null,move_code:i,typePlace:e.type,total:0,type:t};return n.map(e=>{o[e.code]=[]}),o[t]={},o}let l=[];this.moveR.map(e=>{l.push(e.code)}),this.placeR.map(e=>{this.contTypeR.map(r=>{if("LOAD"==e.move_code){let c=e.id+"-"+r.code;t.carrier[c]||(t.carrier[c]=a(e,r.code,"LOAD",this.moveR)),i.carrier[r.code]=o(i.carrier[r.code]),i.carrier[r.code].LOAD=n(i.carrier[r.code].LOAD),i.carrier[r.code].total=n(i.carrier[r.code].total),i.carrier.total.LOAD=n(i.carrier.total.LOAD)}else{let l=e.id+"-"+r.code;for(var c in i)"carrier"!=c&&(i[c][r.code]=o(i[c][r.code]));this.moveR.map(e=>{for(var t in i)"carrier"!=t&&(i[t].total[e.code]=n(i[t].total[e.code]),i[t][r.code][e.code]=n(i[t][r.code][e.code]),i[t][r.code].total=n(i[t][r.code].total))}),"seaport"!=e.type&&(e.scope.includes("P")&&(t.port[l]=a(e,r.code,null,this.moveR)),e.scope.includes("D")&&!e.scope.includes("P")&&(t.depot[l]=a(e,r.code,null,this.moveR)),e.scope.includes("P")||e.scope.includes("D")||e.scope.includes("C")||(t.noscope[l]=a(e,r.code,null,this.moveR)))}})}),this.cityReport=[];let s=[];e.map(e=>{if(e.movement){if("LOAD"==e.movement.move_code){let n=e.movement.place+"-"+e.cont_type_code;this.placeR.find(t=>t.id==e.movement.place),t.carrier[n].LOAD=r(t.carrier[n].LOAD),c(t,i,e,"carrier",n)}else{let n=e.movement.place+"-"+e.cont_type_code,o=this.placeR.find(t=>t.id==e.movement.place&&t.scope.includes("P")),l=this.placeR.find(t=>t.id==e.movement.place&&t.scope.includes("D")&&!t.scope.includes("P"));switch(!0){case!!o:t.port[n]||(t.port[n]=a(o,e.cont_type_code,e.movement.move_code,this.moveR)),t.port[n][e.movement.move_code]=r(t.port[n][e.movement.move_code]),c(t,i,e,"port",n);break;case!!l:t.depot[n]||(t.depot[n]=a(l,e.cont_type_code,e.movement.move_code,this.moveR)),t.depot[n][e.movement.move_code]=r(t.depot[n][e.movement.move_code]),c(t,i,e,"depot",n);break;default:if(!t.noscope[n]){let i=this.placeR.find(t=>t.id==e.movement.place);t.noscope[n]=a(i,e.cont_type_code,e.movement.move_code,this.moveR)}t.noscope[n][e.movement.move_code]=r(t.noscope[n][e.movement.move_code]),c(t,i,e,"noscope",n)}i.all[e.cont_type_code][e.movement.move_code]++,i.all.total[e.movement.move_code]++}let o=e.movement.city+"-"+e.cont_type_code;try{JSON.parse(JSON.stringify(this.cityR.find(t=>t.name==e.movement.city)))}catch(n){console.error("city is Null"),console.error(e)}let l=this.cityR.find(t=>t.name==e.movement.city),p=JSON.parse(JSON.stringify(l));s.includes(o)||(s.push(o),p.type=e.cont_type_code,p.key=o,this.moveR.map(e=>{p[e.code]=[]}),this.cityReport.push(p)),this.cityReport.find(e=>e.key==o)[e.movement.move_code].push(e),i.city.total[e.movement.move_code]++,i.city[e.cont_type_code][e.movement.move_code]++,i.city[e.cont_type_code].total++}});for(let d in t){let e=t[d];for(let t in e){let i=e[t];i.total||(i.total=0),this.moveR.map(e=>{"LOAD"==i.move_code&&"LOAD"!=e.code&&(i[e.code]=[]),i.total+=i[e.code].length})}}this.contTypeR.map(e=>{this.moveR.map(t=>{i.port[e.code].total+=i.port[e.code][t.code],i.port.total.total=n(i.port.total.total),i.port.total.total+=i.port[e.code][t.code],i.depot[e.code].total+=i.depot[e.code][t.code],i.depot.total.total=n(i.depot.total.total),i.depot.total.total+=i.depot[e.code][t.code],"LOAD"==t.code&&(i.carrier[e.code]=o(i.carrier[e.code]),i.carrier[e.code].LOAD=n(i.carrier[e.code].LOAD),i.carrier[e.code].total+=i.carrier[e.code][t.code],i.carrier.total.total=n(i.carrier.total.total),i.carrier.total.total+=i.carrier[e.code][t.code]),i.noscope[e.code].total+=i.noscope[e.code][t.code],i.noscope.total.total=n(i.noscope.total.total),i.noscope.total.total+=i.noscope[e.code][t.code]})}),this.cityReport.sort((e,t)=>{var i=e.country_code,n=t.country_code,o=e.name,r=t.name,c=e.type,a=t.type;return i<n?1:i>n?-1:o>r?1:o<r?-1:c>a?1:c<a?-1:0});let p=[],b=[],m={country:[]};this.cityReport.map(e=>{let t=e.country_name+"-"+e.name,i=e.country_name+"-"+e.name+"-"+e.type;p.includes(e.country_name)||(p.push(e.country_name),m.country.push({name:e.country_name,row:0,city:[]}));let n=m.country.find(t=>t.name==e.country_name);b.includes(t)||(b.push(t),n.city.push({name:e.name,row:0,type:[],lat:e.lat,lng:e.lng}));let o=n.city.find(t=>t.name==e.name);o.type.push(e.type),n.row++,o.row++,m[i]=e}),m.country.map(e=>{e.city.map(t=>{t.type.map(i=>{let n=e.name+"-"+t.name+"-"+i;this.moveR.map(e=>{m[n][e.code].sort((e,t)=>e.movement.maxDate<t.movement.maxDate?1:t.movement.maxDate<e.movement.maxDate?-1:0)})})})}),this.moveReport={header:l,data:t,place:this.placeR,contType:this.contTypeR,total:i,city:m},this.onContainersListChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(I.bc(ne.a),I.bc(J.f),I.bc(j.a),I.bc(oe.a))},e.\u0275prov=I.Nb({token:e,factory:e.\u0275fac}),e})();var ce=i("B9zo"),ae=i("fE3o"),le=i("0JVi"),se=i("rPBI");function pe(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",12),I.fc("click",(function(t){I.Bc(e);const i=I.jc();return t.stopPropagation(),i.changeScreen(!0)})),I.Xb(1,"mat-icon"),I.Lc(2,"flip_to_front"),I.Wb(),I.Wb()}}function be(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",12),I.fc("click",(function(t){I.Bc(e);const i=I.jc();return t.stopPropagation(),i.changeScreen(!1)})),I.Xb(1,"mat-icon"),I.Lc(2,"flip_to_back"),I.Wb(),I.Wb()}}let me=(()=>{class e{constructor(e,t){this.authService=e,this._fuseConfigService=t,this.fullScreen=!1,this.toggleSidebar=new I.o,this.showHideBar=new I.o,this.refreshPage=new I.o,this.searchFilter=new I.o}ngOnInit(){}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(oe.a),I.Rb(le.b))},e.\u0275cmp=I.Lb({type:e,selectors:[["container-overview-header"]],inputs:{modul:"modul",searchText:"searchText",sidebarName:"sidebarName",type:"type"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:40,vars:6,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],[3,"searchText","inputValue"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(I.Xb(0,"mat-toolbar",0),I.Xb(1,"div",1),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),I.Xb(5,"mat-icon"),I.Lc(6,"menu"),I.Wb(),I.Wb(),I.Xb(7,"button",5),I.fc("click",(function(e){return t.showHideBar.emit()})),I.Xb(8,"mat-icon"),I.Lc(9,"menu"),I.Wb(),I.Wb(),I.Wb(),I.Xb(10,"button",6),I.Xb(11,"span",7),I.Lc(12,"List"),I.Wb(),I.Xb(13,"mat-icon",8),I.Lc(14,"view_carousel"),I.Wb(),I.Wb(),I.Xb(15,"button",6),I.Xb(16,"span",7),I.Lc(17,"Principal"),I.Wb(),I.Xb(18,"mat-icon",8),I.Lc(19,"equalizer"),I.Wb(),I.Wb(),I.Xb(20,"button",6),I.Xb(21,"span",7),I.Lc(22,"Place"),I.Wb(),I.Xb(23,"mat-icon",8),I.Lc(24,"equalizer"),I.Wb(),I.Wb(),I.Wb(),I.Xb(25,"div",9),I.Sb(26,"div",10),I.Xb(27,"filter-search-bar",11),I.fc("inputValue",(function(e){return t.searchFilter.emit(e)})),I.Wb(),I.Sb(28,"div",10),I.Xb(29,"button",12),I.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),I.Xb(30,"mat-icon",13),I.Lc(31,"refresh"),I.Wb(),I.Wb(),I.Sb(32,"div",10),I.Jc(33,pe,3,0,"button",14),I.Jc(34,be,3,0,"button",14),I.Sb(35,"div",10),I.Xb(36,"button",12),I.fc("click",(function(e){return t.toggleSidebar.emit("container-overview-setting")})),I.Xb(37,"mat-icon"),I.Lc(38,"settings"),I.Wb(),I.Wb(),I.Sb(39,"div",10),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(10),I.pc("routerLink","/apps/"+t.modul+"/container-overview/list"),I.Db(5),I.pc("routerLink","/apps/"+t.modul+"/container-overview/principal"),I.Db(5),I.pc("routerLink","/apps/"+t.modul+"/container-overview/place"),I.Db(7),I.pc("searchText",t.searchText),I.Db(6),I.pc("ngIf",!t.fullScreen),I.Db(1),I.pc("ngIf",t.fullScreen))},directives:[g.a,B.b,B.e,B.d,B.c,l.b,H.b,b.a,n.i,n.h,se.a,J.t],styles:["container-overview-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}container-overview-header.below{z-index:2}container-overview-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}container-overview-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}container-overview-header .logo .logo-icon{width:38px}container-overview-header .chat-panel-toggle-button,container-overview-header .language-button,container-overview-header .quick-panel-toggle-button,container-overview-header .user-button,container-overview-header fuse-search-bar{min-width:64px;height:64px;width:128px}@media screen and (max-width:599px){container-overview-header .chat-panel-toggle-button,container-overview-header .language-button,container-overview-header .quick-panel-toggle-button,container-overview-header .user-button,container-overview-header fuse-search-bar{height:56px;width:auto}}container-overview-header .navbar-toggle-button{min-width:56px;height:56px}container-overview-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){container-overview-header .toolbar-separator{height:56px}}"],encapsulation:2}),e})();function de(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",9),I.Xb(1,"container-overview-sidebar",10),I.fc("filterContainer",(function(t){return I.Bc(e),I.jc().filterContainer(t)})),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(1),I.pc("modul",e.modul)("height",e.height)("principal",e.principalR)("contType",e.packageType)("moveType",e.moveType)("country",e.countryR)("city",e.cityR)("place",e.placeR)}}function he(e,t){1&e&&I.Sb(0,"router-outlet")}let ue=(()=>{class e{constructor(e,t,i,n){this._fuseSidebarService=e,this.containerService=t,this.router=i,this.authService=n,this.modul="pacific-logistics-network",this.type="list",this.sidebarPanel=!0,this.height=560,this.searchInput=new F.e(""),this._unsubscribeAll=new P.a}ngOnInit(){this.searchText=this.containerService.searchText,this.modul=this.containerService.modul,this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12}),this.containerService.onContainersListChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.countryR=this.containerService.countryR,this.cityR=this.containerService.cityR,this.placeR=this.containerService.placeR,this.principalR=this.containerService.principalR}),this.containerService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.partner=e[0],this.seaport=e[1],this.packageType=e[2],this.moveType=e[3],this.currency=e[4],this.country=e[5],this.seaTerminal=e[6]}),this.containerService.onSetFilterChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.containerOverviewSidebarComponent.setFilter(e)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}deselectCurrentContainer(){}toggleSelectAll(){}selectContainers(e,t){}deselectContainers(){}toggleTagOnSelectedContainers(e){}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}filterContainer(e){this.containerService.onFilterChanged.next(e)}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.containerService)}searchFilter(e){this.containerService.onSearchTextChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(ee.a),I.Rb(re),I.Rb(n.g),I.Rb(oe.a))},e.\u0275cmp=I.Lb({type:e,selectors:[["container-overview"]],viewQuery:function(e,t){var i;1&e&&I.Sc(Z,!0),2&e&&I.wc(i=I.gc())&&(t.containerOverviewSidebarComponent=i.first)},decls:9,vars:6,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-overview-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-overview-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"modul","type","searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[4,"ngIf"],["name","container-overview-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"modul","height","principal","contType","moveType","country","city","place","filterContainer"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,de,2,8,"fuse-sidebar",1),I.Xb(2,"fuse-sidebar",2),I.Sb(3,"div",3),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"container-overview-header",5),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(6,"div",6),I.Xb(7,"div",7),I.Jc(8,he,1,0,"router-outlet",8),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(4),I.pc("modul",t.modul)("type",t.type)("searchText",t.searchText)("sidebarName","container-overview-sidebar"),I.Db(3),I.pc("ngIf",!0))},directives:[ce.a,J.t,ae.a,me,B.a,Z,n.l],styles:["container-overview{width:100%}container-overview .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-overview .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-overview .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-overview .center .content-card container-overview{border-right:0}container-overview .center .content-card container-overview,container-overview .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-overview .center .content-card shipment-details{display:none!important}container-overview .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-overview .center .content-card.current-shipment-selected .content container-overview,container-overview .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-overview .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:A.a}}),e})();var ve=i("vxfF"),fe=i("glL0"),ge=i("dNgK"),ye=i("cfqv"),xe=i("pasS");function we(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",18),I.fc("click",(function(t){I.Bc(e);const i=I.jc().$implicit;return I.jc().openNote([i.info,i.note])})),I.Lc(1,"error"),I.Wb()}}function ke(e,t){if(1&e&&(I.Xb(0,"mat-chip",21),I.Lc(1),I.Wb()),2&e){const e=I.jc(2).$implicit;I.Db(1),I.Mc(null==e.movement?null:e.movement.move_code)}}function Xe(e,t){if(1&e&&(I.Xb(0,"mat-chip",22),I.Lc(1),I.Wb()),2&e){const e=I.jc(2).$implicit;I.Db(1),I.Mc(null==e.movement?null:e.movement.move_code)}}function We(e,t){if(1&e&&(I.Xb(0,"mat-chip-list"),I.Jc(1,ke,2,1,"mat-chip",19),I.Jc(2,Xe,2,1,"mat-chip",20),I.Wb()),2&e){const e=I.jc().$implicit;I.Db(1),I.pc("ngIf",e.movement&&"EMPTY"==e.movement.move_code),I.Db(1),I.pc("ngIf",e.movement&&"EMPTY"!=e.movement.move_code)}}const Se=function(e,t){return{"red-fg":e,"accent-fg":t}};function _e(e,t){if(1&e&&(I.Xb(0,"tr"),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",10),I.Xb(4,"a",11),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",12),I.Lc(7),I.Wb(),I.Xb(8,"td"),I.Xb(9,"div",13),I.Xb(10,"span"),I.Lc(11),I.Wb(),I.Jc(12,we,2,0,"mat-icon",14),I.Wb(),I.Wb(),I.Xb(13,"td"),I.Lc(14),I.Wb(),I.Xb(15,"td"),I.Lc(16),I.Wb(),I.Xb(17,"td"),I.Jc(18,We,3,2,"mat-chip-list",15),I.Wb(),I.Xb(19,"td",16),I.Lc(20),I.kc(21,"number"),I.Wb(),I.Xb(22,"td"),I.Lc(23),I.kc(24,"date"),I.Wb(),I.Xb(25,"td"),I.Lc(26),I.Wb(),I.Sb(27,"td",17),I.Wb()),2&e){const e=t.$implicit,i=t.index,n=I.jc();I.Db(2),I.Mc(i+1),I.Db(2),I.pc("routerLink","/apps/"+n.modul+"/container-details/"+e.id),I.Db(1),I.Mc(e.cont_number),I.Db(2),I.Mc(e.cont_type_code),I.Db(4),I.Mc(e.grade),I.Db(1),I.pc("ngIf",e.info||e.note.length>0),I.Db(2),I.Mc(e.principal_short_name),I.Db(2),I.Mc(null==e.movement?null:e.movement.place_short_name),I.Db(2),I.pc("ngIf",e.movement),I.Db(1),I.pc("ngClass",I.sc(19,Se,e.movement&&e.movement.day>=15,e.movement&&e.movement.day<15)),I.Db(1),I.Mc(I.mc(21,13,null==e.movement?null:e.movement.day,"1.0-0")),I.Db(3),I.Mc(I.mc(24,16,null==e.movement?null:e.movement.maxDate,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(null==e.movement?null:e.movement.document)}}const Ce=function(){return{code:"A"}},De=function(){return{code:"B"}},Le=function(){return{code:"C"}},Re=function(){return{code:"D"}},Oe=function(){return{code:"U"}},Te=function(e,t,i,n,o){return[e,t,i,n,o]};let Fe=(()=>{class e{constructor(e,t,i,n,o){this._activatedRoute=e,this.authService=t,this.snackBar=i,this.datePipe=n,this.containerService=o,this.modul="pacific-logistics-network",this.containers=[],this.height=560,this.sort={active:null,direction:null},this.column={},this._unsubscribeAll=new P.a}ngOnInit(){this.sortData(this.sort),this.modul=this.containerService.modul,this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.containerService.onContainersListChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.containers=e,this.sortData(this.sort)}),this.containerService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.packageType=e[2],this.moveType=e[3]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}sortData(e){const t=this.containers.slice();function i(e,t,i){return(e<t?-1:1)*(i?1:-1)}e.active&&""!==e.direction?(this.sortedData=t,this.sortedData=t.sort((t,n)=>{const o="asc"===e.direction;switch(e.active){case"usage":return i(t.usage,n.usage,o);case"over":return i(t.over,n.over,o);case"idle":return function(e,t,i,n){return((e?e.day:-1)<(t?t.day:-1)?-1:1)*(n?1:-1)}(t.movement,n.movement,0,o);default:return 0}}),this.sort=e):this.sortedData=t}columnFilter(e){this.column[e[0]]=e[1],this.containerService.onFilterColumnChanged.next(this.column)}openNote(e){console.log(e);let t="";e[0]&&(t+="<span>Container status</span>",t+="<br>",t+="<p>"+e[0]+"</p>"),e[1].length>0&&(t+="<span>Note</span>",t+='<table class="note" style="width: 1020px!important">',t+="<thead>",t+="<tr>",t+="<th>Date</th>",t+="<th>Move</th>",t+="<th>Content</th>",t+="</tr>",t+="</thead>",t+="<tbody>",e[1].map((e,i)=>{t+="<tr>",t+="<td>"+this.datePipe.transform(e.date,"MM/dd/yyyy")+"</td>",t+="<td>"+e.move_code+"</td>",t+="<td>"+e.content+"</td>",t+="</tr>"}),t+="</tbody>",t+="</table>"),this.snackBar.openFromComponent(fe.a,{panelClass:"snackbar",data:{html:t},horizontalPosition:"center",verticalPosition:"top"})}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(n.a),I.Rb(oe.a),I.Rb(ge.b),I.Rb(J.f),I.Rb(re))},e.\u0275cmp=I.Lb({type:e,selectors:[["container-overview-list"]],viewQuery:function(e,t){var i;1&e&&I.Sc(ve.e,!0),2&e&&I.wc(i=I.gc())&&(t.viewPort=i.first)},decls:28,vars:56,consts:[["fxLayout","column"],["autosize","",1,"h-100-p"],["matSort","",1,"simple","container-table",3,"matSortChange"],[1,"sticky-col1",2,"z-index","25"],[3,"name","value","columnFilter"],[1,"sticky-col2",2,"z-index","25"],[3,"name","value","arr","code","columnFilter"],["mat-sort-header","idle"],[1,""],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"sticky-col1"],[1,"cursor-pointer",3,"routerLink"],[1,"sticky-col2"],["fxLayout","row","fxLayoutAlign","start center"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[1,"p-0"],["color","warn",1,"cursor-pointer",3,"click"],["class","font-size-10",4,"ngIf"],["class","font-size-10","color","warn","selected","",4,"ngIf"],[1,"font-size-10"],["color","warn","selected","",1,"font-size-10"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"cdk-virtual-scroll-viewport",1),I.Xb(2,"table",2),I.fc("matSortChange",(function(e){return t.sortData(e)})),I.Xb(3,"thead"),I.Xb(4,"tr"),I.Xb(5,"th"),I.Lc(6,"No"),I.Wb(),I.Xb(7,"th",3),I.Xb(8,"container-overview-filter",4),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Xb(9,"th",5),I.Xb(10,"container-overview-filter",6),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Xb(11,"th"),I.Xb(12,"container-overview-filter",6),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Xb(13,"th"),I.Xb(14,"container-overview-filter",4),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Xb(15,"th"),I.Xb(16,"container-overview-filter",4),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Xb(17,"th"),I.Xb(18,"container-overview-filter",6),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Xb(19,"th",7),I.Lc(20," Idle "),I.Wb(),I.Xb(21,"th"),I.Lc(22," Move date "),I.Wb(),I.Xb(23,"th"),I.Xb(24,"container-overview-filter",4),I.fc("columnFilter",(function(e){return t.columnFilter(e)})),I.Wb(),I.Wb(),I.Sb(25,"th",8),I.Wb(),I.Wb(),I.Xb(26,"tbody"),I.Jc(27,_e,28,22,"tr",9),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Ic("height",t.height,"px"),I.Db(5),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Container")("value",t.column.Container),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Type")("value",t.column.Type)("arr",t.packageType)("code","code"),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Grade")("value",t.column.Grade)("arr",I.vc(50,Te,I.qc(45,Ce),I.qc(46,De),I.qc(47,Le),I.qc(48,Re),I.qc(49,Oe)))("code","code"),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Principal")("value",t.column.Principal),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Place")("value",t.column.Place),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Move")("value",t.column.Move)("arr",t.moveType)("code","code"),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("name","Document")("value",t.column.Document),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.pc("cdkVirtualForOf",t.sortedData))},directives:[B.d,ve.e,ye.a,D.a,xe.a,D.b,ve.d,n.j,B.c,J.t,J.q,H.a,b.a,k.c,k.a],pipes:[J.g,J.f],styles:["container-overview-list .container-table{font-size:12px}container-overview-list .container-table td,container-overview-list .container-table th{padding:8px!important;white-space:nowrap}container-overview-list .container-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-overview-list .container-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}container-overview-list .container-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}container-overview-list .container-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}container-overview-list .container-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}container-overview-list .container-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2,data:{animation:A.a}}),e})();var Pe=i("1kfr"),Me=i("W91O");let Ae=(()=>{class e{constructor(e,t,i,n){this._activatedRoute=e,this.authService=t,this.containerService=i,this._matDialog=n,this.modul="pacific-logistics-network",this.height=560,this._unsubscribeAll=new P.a}ngOnInit(){this.modul=this.containerService.modul,this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.width<600?e.height-16-4:e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{let t=e?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16-4+t:this.authService.screenHeight-64-64-16-4+t}),this.containerService.onContainersListChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.moveReport=this.containerService.moveReport,this.portReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("P")),this.depotReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("D")&&!e.scope.includes("P")),this.carrierReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("C")),this.noscopeReport=this.moveReport.place.filter(e=>e.scope&&!e.scope.includes("C")&&!e.scope.includes("P")&&!e.scope.includes("D"))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(e){this.containerService.onSetFilterChanged.next(e)}openModal(e){this.dialogRef=this._matDialog.open(Pe.a,{panelClass:"container-list-city-modal-dialog",data:{label:"Container List",data:e}}),this.dialogRef.afterClosed().subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(n.a),I.Rb(oe.a),I.Rb(re),I.Rb(f.b))},e.\u0275cmp=I.Lb({type:e,selectors:[["container-overview-place"]],decls:4,vars:20,consts:[["fxLayout","column"],[3,"label","header","places","contType","data","total","openModal"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"container-list-place-table",1),I.fc("openModal",(function(e){return t.openModal(e)})),I.Wb(),I.Xb(2,"container-list-place-table",1),I.fc("openModal",(function(e){return t.openModal(e)})),I.Wb(),I.Xb(3,"container-list-place-table",1),I.fc("openModal",(function(e){return t.openModal(e)})),I.Wb(),I.Wb()),2&e&&(I.Ic("height",t.height,"px"),I.Db(1),I.pc("label","PORT")("header",t.moveReport.header)("places",t.portReport)("contType",t.moveReport.contType)("data",t.moveReport.data.port)("total",t.moveReport.total.port),I.Db(1),I.pc("label","DEPOT")("header",t.moveReport.header)("places",t.depotReport)("contType",t.moveReport.contType)("data",t.moveReport.data.depot)("total",t.moveReport.total.depot),I.Db(1),I.pc("label","CARRIER")("header",t.moveReport.header)("places",t.carrierReport)("contType",t.moveReport.contType)("data",t.moveReport.data.carrier)("total",t.moveReport.total.carrier))},directives:[B.d,Me.a],styles:[""],encapsulation:2,data:{animation:A.a}}),e})();function Ie(e,t){if(1&e&&(I.Vb(0),I.Xb(1,"th",6),I.Lc(2),I.Wb(),I.Ub()),2&e){const e=t.$implicit;I.Db(2),I.Mc(e.code)}}function je(e,t){if(1&e&&(I.Vb(0),I.Xb(1,"td",6),I.Lc(2),I.Wb(),I.Ub()),2&e){const e=t.$implicit,i=I.jc(2).$implicit;I.Db(2),I.Mc(i[e.code].length)}}function Be(e,t){if(1&e&&(I.Xb(0,"tr"),I.Xb(1,"td",5),I.Lc(2),I.Wb(),I.Jc(3,je,3,1,"ng-container",4),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc();I.Db(2),I.Mc(e.principal.short_name),I.Db(1),I.pc("ngForOf",t.contTypeR)}}function ze(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Be,4,2,"tr",7),I.Ub()),2&e){const e=t.$implicit;I.Db(1),I.pc("ngIf",e.check>0)}}function Ne(e,t){if(1&e&&(I.Vb(0),I.Xb(1,"td",6),I.Lc(2),I.Wb(),I.Ub()),2&e){const e=t.$implicit,i=I.jc();I.Db(2),I.Mc(i.total[e.code])}}let Je=(()=>{class e{constructor(e,t,i){this._activatedRoute=e,this.authService=t,this.containerService=i,this.modul="pacific-logistics-network",this.height=560,this._unsubscribeAll=new P.a}ngOnInit(){this.modul=this.containerService.modul,this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.width<600?e.height-16-4:e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{let t=e?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16-4+t:this.authService.screenHeight-64-64-16-4+t}),this.containerService.onContainersListChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(e=>{this.contTypeR=this.containerService.contTypeR,this.principalReport=this.containerService.principalReport,this.total=this.containerService.total.totalType,console.log(this.principalReport)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(e){this.containerService.onSetFilterChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(n.a),I.Rb(oe.a),I.Rb(re))},e.\u0275cmp=I.Lb({type:e,selectors:[["container-overview-principal"]],decls:18,vars:5,consts:[["fxLayout","column"],[1,"group","mb-12","mt-12"],[2,"overflow","auto"],[1,"simple","report-table"],[4,"ngFor","ngForOf"],[1,"text-bold"],[1,"text-center"],[4,"ngIf"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"div",1),I.Xb(2,"h2"),I.Lc(3,"Principal"),I.Wb(),I.Xb(4,"div",2),I.Xb(5,"table",3),I.Xb(6,"thead"),I.Xb(7,"tr"),I.Xb(8,"th"),I.Lc(9,"Name"),I.Wb(),I.Jc(10,Ie,3,1,"ng-container",4),I.Wb(),I.Wb(),I.Xb(11,"tbody"),I.Jc(12,ze,2,1,"ng-container",4),I.Wb(),I.Xb(13,"tfoot"),I.Xb(14,"tr"),I.Xb(15,"td",5),I.Lc(16,"Total"),I.Wb(),I.Jc(17,Ne,3,1,"ng-container",4),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Ic("height",t.height,"px"),I.Db(10),I.pc("ngForOf",t.contTypeR),I.Db(2),I.pc("ngForOf",t.principalReport),I.Db(5),I.pc("ngForOf",t.contTypeR))},directives:[B.d,J.s,J.t],styles:["container-overview-principal .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-overview-principal .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-overview-principal .group .report-table{width:100%;font-size:12px}container-overview-principal .group .report-table td,container-overview-principal .group .report-table th{padding:8px!important}container-overview-principal .group .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10;font-weight:700;white-space:normal!important}container-overview-principal .group .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}"],encapsulation:2,data:{animation:A.a}}),e})();var He=i("9DWm"),Ve=i("Z/B+"),qe=i("xVYC"),$e=i("Pbok"),Ue=i("0mUG"),Ge=i("vju0");i.d(t,"ContainerOverviewModule",(function(){return Ee}));const Ye=[{path:"",component:ue,resolve:{data:re},children:[{path:"list",component:Fe},{path:"principal",component:Je},{path:"place",component:Ae}]}];let Ee=(()=>{class e{}return e.\u0275mod=I.Pb({type:e}),e.\u0275inj=I.Ob({factory:function(t){return new(t||e)},providers:[re],imports:[[n.k.forChild(Ye),r.b,o.a,c.b,a.c,l.c,s.b,p.e,b.b,m.b,d.c,h.c,u.b,v.c,f.e,g.b,y.b,x.b,w.d,k.e,X.b,W.b,_.b,C.k,D.c,S.t,L.a,R.a,T.a,O.f,ve.g,ye.b,He.a,Ve.a,qe.a,$e.a,Ue.a,Ge.a]]}),e})()},"9DWm":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("tyNb"),o=i("STbY"),r=i("NFeN"),c=i("Qu3c"),a=i("5HBU"),l=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[n.k,o.b,r.b,c.b,a.a]]}),e})()},"Z/B+":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("5HBU"),o=i("bTqV"),r=i("kmnG"),c=i("NFeN"),a=i("qFsG"),l=i("wZkO"),s=i("/t3+"),p=i("bSwM"),b=i("+0xr"),m=i("FKr1"),d=i("MutI"),h=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},imports:[[n.a,o.c,r.e,c.b,a.c,l.c,s.b,p.b,m.t,d.c,b.k]]}),e})()},glL0:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("dNgK"),o=i("fXoL"),r=i("XiUz"),c=i("NFeN");let a=(()=>{class e{constructor(e,t){this.data=e,this.snackBar=t}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(n.a),o.Rb(n.b))},e.\u0275cmp=o.Lb({type:e,selectors:[["container-snack-bar"]],decls:4,vars:1,consts:[["fxLayout","row","fxLayoutAlign","end"],[1,"cursor-pointer","white-fg",3,"click"],[3,"innerHTML"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Xb(1,"mat-icon",1),o.fc("click",(function(e){return t.snackBar.dismiss()})),o.Lc(2,"close"),o.Wb(),o.Wb(),o.Sb(3,"div",2)),2&e&&(o.Db(3),o.pc("innerHTML",t.data.html,o.Cc))},directives:[r.d,r.c,c.a],styles:[".snackbar{max-width:100%!important;margin-left:auto!important;margin-right:auto!important}.snackbar .note td,.snackbar .note th{padding:8px;font-size:12px}"],encapsulation:2}),e})()},pasS:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("fXoL"),o=i("PVWW"),r=i("ofXK"),c=i("XiUz"),a=i("NFeN"),l=i("3Pt+");function s(e,t){if(1&e){const e=n.Yb();n.Xb(0,"mat-icon",5),n.fc("click",(function(t){return n.Bc(e),n.jc(2).columnChanged(null)})),n.Lc(1,"delete"),n.Wb()}}function p(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"span",3),n.fc("click",(function(t){return n.Bc(e),n.jc().type=1})),n.Lc(2),n.Wb(),n.Jc(3,s,2,0,"mat-icon",4),n.Wb()}if(2&e){const e=n.jc();n.Db(2),n.Mc(e.name),n.Db(1),n.pc("ngIf",e.value&&""!=e.value)}}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",10),n.fc("ngModelChange",(function(t){return n.Bc(e),n.jc(2).columnChanged(t)})),n.Wb()}if(2&e){const e=n.jc(2);n.pc("placeholder",e.name)("ngModel",e.value)}}function m(e,t){if(1&e&&(n.Xb(0,"option",14),n.Lc(1),n.Wb()),2&e){const e=t.$implicit,i=n.jc(3);n.pc("value",e[i.code]),n.Db(1),n.Mc(e[i.code])}}function d(e,t){if(1&e){const e=n.Yb();n.Xb(0,"select",11),n.fc("ngModelChange",(function(t){return n.Bc(e),n.jc(2).columnChanged(t)})),n.Sb(1,"option",12),n.Jc(2,m,2,2,"option",13),n.Wb()}if(2&e){const e=n.jc(2);n.pc("ngModel",e.value),n.Db(2),n.pc("ngForOf",e.arr)}}function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Jc(1,b,1,2,"input",7),n.Jc(2,d,3,2,"select",8),n.Xb(3,"mat-icon",9),n.fc("click",(function(t){return n.Bc(e),n.jc().type=0})),n.Lc(4,"close"),n.Wb(),n.Wb()}if(2&e){const e=n.jc();n.Db(1),n.pc("ngIf",!e.code),n.Db(1),n.pc("ngIf",e.code)}}let u=(()=>{class e{constructor(){this.columnFilter=new n.o,this.type=0}ngOnInit(){}columnChanged(e){this.column=e,this.columnFilter.emit([this.name,this.column])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["container-overview-filter"]],inputs:{name:"name",value:"value",arr:"arr",code:"code"},outputs:{columnFilter:"columnFilter"},decls:2,vars:2,consts:[["fxLayout","row","fxLayoutAlign","space-between center","class","w-100-p",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center","class","w-100-p","style","min-width: 50px",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100-p"],[1,"cursor-pointer","accent-400-fg","text-bold",3,"click"],["style","font-size: 16px; height: 16px; width: 16px; min-width: 16px; min-height: 16px","class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["color","warn",1,"cursor-pointer",2,"font-size","16px","height","16px","width","16px","min-width","16px","min-height","16px",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100-p",2,"min-width","50px"],["type","text","class","w-100-p p-0",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],["style","border: none",3,"ngModel","ngModelChange",4,"ngIf"],["color","accent",1,"cursor-pointer",2,"font-size","16px","height","16px","width","16px","min-width","16px","min-height","16px",3,"click"],["type","text",1,"w-100-p","p-0",3,"placeholder","ngModel","ngModelChange"],[2,"border","none",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.Jc(0,p,4,2,"div",0),n.Jc(1,h,5,2,"div",1)),2&e&&(n.pc("ngIf",!t.type),n.Db(1),n.pc("ngIf",t.type))},directives:[r.t,c.d,c.c,a.a,l.b,l.p,l.s,l.x,l.t,l.z,r.s],styles:[""],encapsulation:2,data:{animation:o.a}}),e})()}}]);