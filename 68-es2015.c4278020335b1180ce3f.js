(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{IOBc:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("5HBU"),o=i("bTqV"),r=i("kmnG"),a=i("NFeN"),c=i("qFsG"),s=i("wZkO"),l=i("/t3+"),b=i("bSwM"),m=i("+0xr"),d=i("FKr1"),u=i("MutI"),p=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=p.Pb({type:e}),e.\u0275inj=p.Ob({factory:function(t){return new(t||e)},imports:[[n.a,o.c,r.e,a.b,c.c,s.c,l.b,b.b,d.t,u.c,m.k]]}),e})()},Mx3C:function(e,t,i){"use strict";i.r(t);var n=i("tyNb"),o=i("5HBU"),r=i("STbY"),a=i("/1cH"),c=i("iadO"),s=i("bTqV"),l=i("7EHt"),b=i("kmnG"),m=i("NFeN"),d=i("Qu3c"),u=i("qFsG"),p=i("wZkO"),h=i("d3UM"),f=i("QibW"),g=i("0IaG"),v=i("/t3+"),x=i("bSwM"),y=i("M9IT"),S=i("xHqg"),C=i("A5z7"),W=i("bv9b"),X=i("XhcP"),w=i("FKr1"),k=i("1jcm"),_=i("+0xr"),D=i("Dh3D"),L=i("IOBc"),M=i("212X"),I=i("LPQX"),R=i("XNiG"),A=i("1G5W"),N=i("PVWW"),P=i("3Pt+"),q=i("JX91"),O=i("lJxs"),F=i("fXoL"),T=i("qXBG"),j=i("0Zc1"),z=i("2Vo4"),B=i("tk/3");let E=(()=>{class e{constructor(e,t){this._httpClient=e,this.authService=t,this.onDataChanged=new z.a([]),this.onDataItemChanged=new z.a([]),this.onContainerChanged=new z.a([])}resolve(e){this.authService.routerData=e;let t=e.params.id;return new Promise((e,i)=>{Promise.all([this.getContainerById(t),this.getData(),this.getItemData()]).then(([t])=>{e()},i)})}getData(){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel/container/data",e).subscribe(e=>{this.lease=e[0],this.leaseDetail=e[1],this.packageType=e[2],this.supplier=e[3],this.seaport=e[4],this.containerCode=e[5],this.moveType=e[6],this.place=e[8],this.country=e[9],this.supplierPort=e[10],this.supplierCarrier=e[11],this.seaTerminal=e[12],this.onDataChanged.next(e),t(e)},i)})}getItemData(){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel/container/item-data",e).subscribe(e=>{this.price=e[0],this.unit=e[1],this.currency=e[2],this.user=e[4],this.commodity=e[5],this.dataCustomer=e[7],this.dataSupplier=e[8],this.onDataItemChanged.next(e),t(e)},i)})}getContainerById(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/container/id/"+e,t).subscribe(e=>{this.container=e[0][0],this.movement=e[1],this.containerNote=e[2],this.containerSoa=e[3],this.movement.push({id:null,container:this.container.id,move_code:"ON HIRE",date:this.container.on_hire,place_short_name:this.container.on_port.name}),this.container.off_hire&&this.movement.unshift({id:null,container:this.container.id,move_code:"OFF HIRE",date:this.container.off_hire,place_short_name:this.container.off_port.name}),this.onContainerChanged.next(e),i(e)},n)})}updateContainer(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.put(this.authService.apiUrl+"/sel/container",e,t).subscribe(e=>{i(e)},n)})}createMovement(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/movement",e,t).subscribe(e=>{i(e)},n)})}createInsertMovement(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/movement/insert",e,t).subscribe(e=>{i(e)},n)})}updateMovement(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.put(this.authService.apiUrl+"/movement/insert",e,t).subscribe(e=>{i(e)},n)})}deleteMovement(e,t){let i={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,o)=>{this._httpClient.delete(this.authService.apiUrl+"/movement/id/"+e+"/"+t,i).subscribe(e=>{n(e)},o)})}deleteSelMove(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.delete(this.authService.apiUrl+"/sel-move/"+e,t).subscribe(e=>{i(e)},n)})}createContainerNote(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/container-note",e,t).subscribe(e=>{i(e)},n)})}deleteContainerNote(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.delete(this.authService.apiUrl+"/container-note/"+e,t).subscribe(e=>{i(e)},n)})}getVoyage(e,t,i,n){let o={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((r,a)=>{this._httpClient.get(this.authService.apiUrl+"/movement/voyage/"+e+"/"+t+"/"+i+"/"+n,o).subscribe(e=>{r(e)},a)})}getShipmentByDocument(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/container/shipment/"+e,t).subscribe(e=>{i(e)},n)})}getShipmentByDocument2(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/sel/container/shipment/",{str:e},t).subscribe(e=>{i(e)},n)})}createSelMove(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/sel/container/sel-move/",e,t).subscribe(e=>{i(e)},n)})}createSelRevenue(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/sel/revenue",e,t).subscribe(e=>{i(e)},n)})}updateSelRevenue(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.put(this.authService.apiUrl+"/sel/revenue",e,t).subscribe(e=>{i(e)},n)})}deleteSelRevenue(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/revenue/"+e,t).subscribe(e=>{i(e)},n)})}createSelCost(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/sel/cost",e,t).subscribe(e=>{i(e)},n)})}updateSelCost(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.put(this.authService.apiUrl+"/sel/cost",e,t).subscribe(e=>{i(e)},n)})}deleteSelCost(e){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/cost/"+e,t).subscribe(e=>{i(e)},n)})}}return e.\u0275fac=function(t){return new(t||e)(F.bc(B.a),F.bc(T.a))},e.\u0275prov=F.Nb({token:e,factory:e.\u0275fac}),e})();var J=i("ofXK"),V=i("XiUz"),$=i("EwFO");function H(e,t){1&e&&(F.Xb(0,"div",8),F.Xb(1,"div",9),F.Xb(2,"div",10),F.Sb(3,"div",11),F.Xb(4,"div",12),F.Sb(5,"div",13),F.Wb(),F.Xb(6,"div",14),F.Sb(7,"div",13),F.Wb(),F.Wb(),F.Wb(),F.Wb())}function U(e,t){if(1&e&&(F.Xb(0,"mat-option",41),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Nc(" ",e.code," ")}}function G(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Move Type is required "),F.Wb())}function Y(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Date is required "),F.Wb())}function Q(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Time is required "),F.Wb())}function K(e,t){if(1&e&&(F.Xb(0,"mat-option",41),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Nc(" ",e.full_name," ")}}function Z(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Place is required "),F.Wb())}function ee(e,t){if(1&e&&(F.Xb(0,"mat-form-field",42),F.Xb(1,"mat-label"),F.Lc(2,"Place"),F.Wb(),F.Sb(3,"input",43),F.Xb(4,"mat-autocomplete",44,45),F.Jc(6,K,2,2,"mat-option",22),F.kc(7,"async"),F.Wb(),F.Jc(8,Z,2,0,"mat-error",7),F.Wb()),2&e){const e=F.xc(5),t=F.jc(2);F.Db(3),F.pc("matAutocomplete",e),F.Db(1),F.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),F.Db(2),F.pc("ngForOf",F.lc(7,4,t.filteredPlace)),F.Db(2),F.pc("ngIf",t.formMovement.get("place").hasError("required"))}}function te(e,t){if(1&e){const e=F.Yb();F.Xb(0,"div"),F.Xb(1,"form",15),F.fc("keydown.enter",(function(t){return F.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){F.Bc(e);const i=F.jc();return i.onMovementFormSubmit(i.formMovement)})),F.Xb(2,"div",16),F.Sb(3,"input",17),F.Sb(4,"input",18),F.Wb(),F.Xb(5,"div",19),F.Xb(6,"mat-form-field",20),F.Xb(7,"mat-label"),F.Lc(8,"Move"),F.Wb(),F.Xb(9,"mat-select",21),F.Jc(10,U,2,2,"mat-option",22),F.Wb(),F.Jc(11,G,2,0,"mat-error",7),F.Wb(),F.Xb(12,"mat-form-field",20),F.Xb(13,"mat-label"),F.Lc(14,"Date"),F.Wb(),F.Xb(15,"input",23),F.fc("change",(function(t){return F.Bc(e),F.jc().commonService.setDateStr(t)})),F.Wb(),F.Sb(16,"mat-datepicker-toggle",24),F.Sb(17,"mat-datepicker",null,25),F.Jc(19,Y,2,0,"mat-error",7),F.Wb(),F.Xb(20,"mat-form-field",20),F.Xb(21,"mat-label"),F.Lc(22),F.Wb(),F.Sb(23,"input",26),F.Jc(24,Q,2,0,"mat-error",7),F.Wb(),F.Jc(25,ee,9,6,"mat-form-field",27),F.Xb(26,"mat-form-field",28),F.Xb(27,"mat-label"),F.Lc(28,"Document"),F.Wb(),F.Sb(29,"input",29),F.Wb(),F.Xb(30,"div",30),F.Xb(31,"mat-form-field",31),F.Xb(32,"mat-label"),F.Lc(33,"Vehicle type"),F.Wb(),F.Sb(34,"input",32),F.Wb(),F.Xb(35,"mat-form-field",31),F.Xb(36,"mat-label"),F.Lc(37,"Vehicle number"),F.Wb(),F.Sb(38,"input",33),F.Wb(),F.Wb(),F.Xb(39,"mat-form-field",28),F.Xb(40,"mat-label"),F.Lc(41,"Update by"),F.Wb(),F.Sb(42,"input",34),F.Sb(43,"input",35),F.Wb(),F.Wb(),F.Xb(44,"div",36),F.Xb(45,"div",37),F.Lc(46),F.Wb(),F.Wb(),F.Xb(47,"div",38),F.Xb(48,"button",39),F.Lc(49,"Submit"),F.Wb(),F.Xb(50,"button",40),F.fc("click",(function(t){return F.Bc(e),F.jc().matDialogRef.close()})),F.Lc(51,"Cancel"),F.Wb(),F.Wb(),F.Wb(),F.Wb()}if(2&e){const e=F.xc(18),t=F.jc();F.Db(1),F.pc("formGroup",t.formMovement),F.Db(9),F.pc("ngForOf",t.moveType),F.Db(1),F.pc("ngIf",t.formMovement.get("move").hasError("required")),F.Db(4),F.pc("matDatepicker",e)("min",t.minDate)("max",t.maxDate),F.Db(1),F.pc("for",e),F.Db(3),F.pc("ngIf",t.formMovement.get("date").hasError("required")),F.Db(3),F.Nc("Time ",t.formMovement.get("time").hasError("required"),""),F.Db(2),F.pc("ngIf",t.formMovement.get("time").hasError("required")),F.Db(1),F.pc("ngIf",!t.formMovement.controls.move.value||"OFHI"!=t.formMovement.controls.move.value.code),F.Db(17),F.pc("readonly",!0)("value",t.name),F.Db(4),F.Mc(t.errorMessage)}}function ie(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Type is required "),F.Wb())}function ne(e,t){if(1&e){const e=F.Yb();F.Xb(0,"div"),F.Xb(1,"form",15),F.fc("keydown.enter",(function(t){return F.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){F.Bc(e);const i=F.jc();return i.onContainerNoteFormSubmit(i.formContainerNote)})),F.Xb(2,"div",16),F.Sb(3,"input",46),F.Wb(),F.Xb(4,"div",19),F.Xb(5,"mat-form-field",47),F.Xb(6,"mat-label"),F.Lc(7,"Type"),F.Wb(),F.Xb(8,"mat-select",48),F.Xb(9,"mat-option",49),F.Lc(10,"repair"),F.Wb(),F.Xb(11,"mat-option",50),F.Lc(12,"clean"),F.Wb(),F.Wb(),F.Jc(13,ie,2,0,"mat-error",7),F.Wb(),F.Xb(14,"mat-form-field",51),F.Xb(15,"mat-label"),F.Lc(16,"Content"),F.Wb(),F.Sb(17,"input",52),F.Wb(),F.Xb(18,"mat-form-field",53),F.Xb(19,"mat-label"),F.Lc(20,"Photo"),F.Wb(),F.Sb(21,"input",54),F.Xb(22,"mat-icon",55),F.fc("click",(function(t){return F.Bc(e),F.jc().viewPhoto()})),F.Lc(23,"search"),F.Wb(),F.Wb(),F.Xb(24,"mat-form-field",53),F.Xb(25,"mat-label"),F.Lc(26,"Info"),F.Wb(),F.Sb(27,"input",56),F.Wb(),F.Xb(28,"mat-form-field",57),F.Xb(29,"mat-label"),F.Lc(30,"Update by"),F.Wb(),F.Sb(31,"input",34),F.Sb(32,"input",35),F.Wb(),F.Wb(),F.Xb(33,"div",36),F.Xb(34,"div",37),F.Lc(35),F.Wb(),F.Wb(),F.Xb(36,"div",38),F.Xb(37,"button",39),F.Lc(38,"Submit"),F.Wb(),F.Xb(39,"button",40),F.fc("click",(function(t){return F.Bc(e),F.jc().matDialogRef.close()})),F.Lc(40,"Cancel"),F.Wb(),F.Wb(),F.Wb(),F.Wb()}if(2&e){const e=F.jc();F.Db(1),F.pc("formGroup",e.formContainerNote),F.Db(12),F.pc("ngIf",e.formContainerNote.get("type").hasError("required")),F.Db(18),F.pc("readonly",!0)("value",e.name),F.Db(4),F.Mc(e.errorMessage)}}let oe=(()=>{class e{constructor(e,t,i,n,o,r,a){if(this.matDialogRef=e,this._data=t,this.authService=i,this._formBuilder=n,this.commonService=o,this.containerDetailsService=r,this.datePipe=a,this.requestProcessing=!1,this.formMovement=this._formBuilder.group({id:[null],container:[null,P.y.required],move:[null,P.y.required],document:[null],date:[null,P.y.required],time:["00:00",P.y.required],place:[null,P.y.required],info:this._formBuilder.group({country_of_loading:[null],pol:[null],load_terminal:[null],country_of_discharge:[null],pod:[null],discharge_terminal:[null],voyage:[null],vehicle_type:[null],vehicle_number:[null]}),update_by:[this.authService.user,P.y.required]}),this.formContainerNote=this._formBuilder.group({container_move:[""],type:["",P.y.required],content:["",P.y.required],info:[""],photo:[""],update_by:[this.authService.user,P.y.required]}),this.label=t.label,"Add movement"==this.label){let e=t.data;this.movement=t.movement;let i=this.movement.indexOf(e);this.maxDate=new Date(e.date),this.minDate=i==this.movement.length-1?new Date(t.container.on_hire):new Date(this.movement[i+1].date),this.id=t.id,this.moveType=[],t.moveType.map(e=>{"LOAD"!=e.code&&"ONHI"!=e.code&&"OFHI"!=e.code&&this.moveType.push(e)}),this.place=t.place,this.formMovement.controls.id.disable(),this.formMovement.controls.container.setValue(t.id)}if("Edit movement"==this.label){let e=JSON.parse(JSON.stringify(t.data));this.movement=t.movement,this.country=t.country;let i=this.movement.indexOf(t.data);this.maxDate=0==i?t.container.off_hire?new Date(t.container.off_hire):new Date:new Date(this.movement[i-1].date),this.minDate=i==this.movement.length-1?new Date(t.container.on_hire):new Date(this.movement[i+1].date),this.id=t.id,this.moveType=t.moveType.filter(t=>t.id==e.move),this.place=t.place,e.move=t.moveType.find(t=>t.id==e.move),e.place=this.place.find(t=>t.id==e.place),e.date=new Date(e.date),e.time=this.datePipe.transform(e.date,"HH:mm"),e.info||delete e.info,this.formMovement.patchValue(e),this.formMovement.controls.update_by.setValue(this.authService.user)}"Add note"==this.label&&this.formContainerNote.controls.container_move.setValue(t.id),this.permission=t.permission}ngOnInit(){this.name=this.authService.name,this.filteredPlace=this.formMovement.controls.place.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"full_name",this.place):[])),this.formMovement.valueChanges.subscribe(e=>{this.errorMessage=""}),this.formContainerNote.valueChanges.subscribe(e=>{this.errorMessage=""})}onMovementFormSubmit(e){if(console.log(e.value),e.valid){let t=JSON.parse(JSON.stringify(e.value)),i=this.datePipe.transform(new Date(t.date),"yyyy/MM/dd");i+=" "+t.time+":00.0";let n=new Date(i).getTime();if(n>this.maxDate.getTime()||n<this.minDate.getTime())return void(this.errorMessage="Error time");"Add movement"==this.label?(this.requestProcessing=!0,t.date=i,this.containerDetailsService.createInsertMovement(t).then(e=>{this.requestProcessing=!1,e.insertId>0?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error create")}).catch(e=>{this.requestProcessing=!1,console.error(e),this.errorMessage="Error create"})):(this.requestProcessing=!0,t.date=i,this.containerDetailsService.updateMovement(t).then(e=>{this.requestProcessing=!1,1==e.affectedRows?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error edit containerDetail")}).catch(e=>{this.requestProcessing=!1,console.error(e),this.errorMessage="Error edit containerDetail"}))}}onContainerNoteFormSubmit(e){e.valid&&(this.requestProcessing=!0,this.containerDetailsService.createContainerNote(e.value).then(e=>{this.requestProcessing=!1,this.matDialogRef.close(e)}).catch(e=>{this.requestProcessing=!1,console.error(e),this.errorMessage=e.sqlMessage}))}viewPhoto(){let e=this.formContainerNote.controls.photo.value;/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)&&window.open(e,"_blank")}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(g.f),F.Rb(g.a),F.Rb(T.a),F.Rb(P.d),F.Rb(j.a),F.Rb(E),F.Rb(J.f))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-modal-dialog"]],decls:12,vars:4,consts:[["class","spinner-wrapper",4,"ngIf"],[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","container-details-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"inner"],[1,"gap"],[1,"left"],[1,"half-circle"],[1,"right"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","container","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","15",1,"pr-8"],["formControlName","move","required",""],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","matInput","","name","date","formControlName","date","required","",3,"matDatepicker","min","max","change"],["matSuffix","",3,"for"],["moveDatePicker",""],["inputCheck","","matInput","","type","time","formControlName","time","required",""],["appearance","outline","class","pr-8","fxFlex","100","fxFlex.gt-xs","55",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","document"],["formGroupName","info","fxFlex","100","fxFlex.gt-xs","50","fxLayout","row wrap","fxLayoutAlign","start center",1,"pr-8"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","50",1,"pr-8"],["inputCheck","","matInput","","formControlName","vehicle_type"],["inputCheck","","matInput","","formControlName","vehicle_number"],["inputCheck","","matInput","",3,"readonly","value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[3,"value"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","55",1,"pr-8"],["inputCheck","","matInput","","formControlName","place","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnPlace","matAutocomplete"],["inputCheck","","formControlName","container_move"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["formControlName","type","required",""],["value","repair"],["value","clean"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","matInput","","formControlName","content"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","40",1,"pr-8"],["inputCheck","","matInput","","formControlName","photo"],["matSuffix","",1,"cursor-pointer",3,"click"],["inputCheck","","matInput","","formControlName","info"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20"]],template:function(e,t){1&e&&(F.Jc(0,H,8,0,"div",0),F.Xb(1,"div",1),F.Xb(2,"mat-toolbar",2),F.Xb(3,"mat-toolbar-row",3),F.Xb(4,"span",4),F.Lc(5),F.Wb(),F.Xb(6,"button",5),F.fc("click",(function(e){return t.matDialogRef.close()})),F.Xb(7,"mat-icon"),F.Lc(8,"close"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(9,"div",6),F.Jc(10,te,52,14,"div",7),F.Jc(11,ne,41,5,"div",7),F.Wb(),F.Wb()),2&e&&(F.pc("ngIf",t.requestProcessing),F.Db(5),F.Mc(t.label),F.Db(5),F.pc("ngIf","Add movement"==t.label||"Edit movement"==t.label),F.Db(1),F.pc("ngIf","Add note"==t.label||"Edit note"==t.label))},directives:[J.t,v.a,v.c,V.b,V.d,V.c,s.b,m.a,g.d,$.a,P.A,P.q,P.h,P.b,P.p,P.g,P.w,b.c,b.f,h.a,J.s,u.b,c.b,c.d,b.h,c.a,P.i,w.n,b.b,a.c,a.a],pipes:[J.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-modal-dialog{width:1080px}}.container-details-modal-dialog .mat-dialog-container{padding:0}.container-details-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();var re=i("znSr");function ae(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.name," ")}}function ce(e,t){if(1&e){const e=F.Yb();F.Xb(0,"mat-form-field",19),F.Xb(1,"mat-label"),F.Lc(2,"Country"),F.Wb(),F.Xb(3,"mat-select",54),F.fc("selectionChange",(function(t){return F.Bc(e),F.jc(2).getCountry(t)})),F.Xb(4,"mat-option",55),F.Lc(5,"All"),F.Wb(),F.Jc(6,ae,2,2,"mat-option",32),F.Wb(),F.Wb()}if(2&e){const e=F.jc(2);F.Db(4),F.pc("value",0),F.Db(2),F.pc("ngForOf",e.country)}}function se(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Nc(" ",e.full_name," ")}}function le(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Place is required "),F.Wb())}function be(e,t){if(1&e&&(F.Xb(0,"mat-form-field",56),F.Xb(1,"mat-label"),F.Lc(2,"Place"),F.Wb(),F.Xb(3,"mat-select",57),F.Jc(4,se,2,2,"mat-option",32),F.Wb(),F.Jc(5,le,2,0,"mat-error",6),F.Wb()),2&e){const e=F.jc(2);F.Db(4),F.pc("ngForOf",e.filterPlace),F.Db(1),F.pc("ngIf",e.formMovement.get("place").hasError("required"))}}function me(e,t){if(1&e&&(F.Xb(0,"mat-option",60),F.Lc(1),F.Wb()),2&e){const e=t.$implicit,i=F.jc(3);F.pc("value",e)("disabled",!i.filterStep.includes(e)),F.Db(1),F.Nc(" ",e.code," ")}}function de(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Move Type is required "),F.Wb())}function ue(e,t){if(1&e&&(F.Xb(0,"mat-form-field",14),F.Xb(1,"mat-label"),F.Lc(2,"Move Type"),F.Wb(),F.Xb(3,"mat-select",58),F.Jc(4,me,2,3,"mat-option",59),F.Wb(),F.Jc(5,de,2,0,"mat-error",6),F.Wb()),2&e){const e=F.jc(2);F.Db(4),F.pc("ngForOf",e.moveType),F.Db(1),F.pc("ngIf",e.formMovement.get("move").hasError("required"))}}function pe(e,t){if(1&e&&(F.Xb(0,"mat-form-field",14),F.Xb(1,"mat-label"),F.Lc(2,"Move Type"),F.Wb(),F.Sb(3,"input",15),F.Sb(4,"input",61),F.Wb()),2&e){const e=F.jc(2);F.Db(3),F.pc("readonly",!0)("value",e.movement.move_code)}}function he(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Nc(" ",e.name," ")}}function fe(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," seaport is required "),F.Wb())}function ge(e,t){if(1&e&&(F.Xb(0,"mat-form-field",14),F.Xb(1,"mat-label"),F.Lc(2,"Seaport"),F.Wb(),F.Xb(3,"mat-select",57),F.Jc(4,he,2,2,"mat-option",32),F.Wb(),F.Jc(5,fe,2,0,"mat-error",6),F.Wb()),2&e){const e=F.jc(2);F.Db(4),F.pc("ngForOf",e.filterSeaport),F.Db(1),F.pc("ngIf",e.formMovement.get("place").hasError("required"))}}function ve(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Nc(" ",e.full_name," ")}}function xe(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Carrier is required "),F.Wb())}function ye(e,t){if(1&e&&(F.Xb(0,"mat-form-field",62),F.Xb(1,"mat-label"),F.Lc(2,"Carrier"),F.Wb(),F.Xb(3,"mat-select",57),F.Jc(4,ve,2,2,"mat-option",32),F.Wb(),F.Jc(5,xe,2,0,"mat-error",6),F.Wb()),2&e){const e=F.jc(2);F.Db(4),F.pc("ngForOf",e.filterCarrier),F.Db(1),F.pc("ngIf",e.formMovement.get("place").hasError("required"))}}function Se(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Date is required "),F.Wb())}function Ce(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Time is required "),F.Wb())}function We(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.name),F.Db(1),F.Nc(" ",e.name," ")}}function Xe(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.name),F.Db(1),F.Nc(" ",e.name," ")}}function we(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.name," ")}}function ke(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.name),F.Db(1),F.Nc(" ",e.name," ")}}function _e(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.name),F.Db(1),F.Nc(" ",e.name," ")}}function De(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.name," ")}}function Le(e,t){if(1&e&&F.Sb(0,"input",15),2&e){const e=F.jc(2);F.pc("readonly",!0)("value",e.voyageName)}}function Me(e,t){if(1&e&&(F.Xb(0,"mat-option",55),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Oc(" ",e.vessel_name," ",e.name," ")}}const Ie=function(e){return{hide:e}};function Re(e,t){if(1&e){const e=F.Yb();F.Xb(0,"div"),F.Xb(1,"form",7),F.fc("keydown.enter",(function(t){return F.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){F.Bc(e);const i=F.jc();return i.onMovementFormSubmit(i.formMovement)})),F.Xb(2,"div",8),F.Sb(3,"input",9),F.Sb(4,"input",10),F.Wb(),F.Xb(5,"div",11),F.Jc(6,ce,7,2,"mat-form-field",12),F.Jc(7,be,6,2,"mat-form-field",13),F.Xb(8,"mat-form-field",14),F.Xb(9,"mat-label"),F.Lc(10,"Container"),F.Wb(),F.Sb(11,"input",15),F.Wb(),F.Jc(12,ue,6,2,"mat-form-field",16),F.Jc(13,pe,5,2,"mat-form-field",16),F.Jc(14,ge,6,2,"mat-form-field",17),F.Jc(15,ye,6,2,"mat-form-field",18),F.Xb(16,"mat-form-field",19),F.Xb(17,"mat-label"),F.Lc(18,"Document"),F.Wb(),F.Sb(19,"input",20),F.Wb(),F.Xb(20,"mat-form-field",14),F.Xb(21,"mat-label"),F.Lc(22,"Date"),F.Wb(),F.Xb(23,"input",21),F.fc("change",(function(t){return F.Bc(e),F.jc().setDateStr(t)})),F.Wb(),F.Sb(24,"mat-datepicker-toggle",22),F.Sb(25,"mat-datepicker",null,23),F.Jc(27,Se,2,0,"mat-error",6),F.Wb(),F.Xb(28,"mat-form-field",14),F.Xb(29,"mat-label"),F.Lc(30,"Time"),F.Wb(),F.Sb(31,"input",24),F.Jc(32,Ce,2,0,"mat-error",6),F.Wb(),F.Xb(33,"div",25),F.Xb(34,"mat-form-field",26),F.Xb(35,"mat-label"),F.Lc(36,"Vehicle type"),F.Wb(),F.Sb(37,"input",27),F.Wb(),F.Xb(38,"mat-form-field",26),F.Xb(39,"mat-label"),F.Lc(40,"Vehicle number"),F.Wb(),F.Sb(41,"input",28),F.Wb(),F.Xb(42,"mat-form-field",29),F.Xb(43,"mat-label"),F.Lc(44,"Country of Loading"),F.Wb(),F.Sb(45,"input",30),F.Xb(46,"mat-autocomplete",null,31),F.Jc(48,We,2,2,"mat-option",32),F.Wb(),F.Wb(),F.Xb(49,"mat-form-field",29),F.Xb(50,"mat-label"),F.Lc(51,"Port of Loading"),F.Wb(),F.Sb(52,"input",33),F.Xb(53,"mat-autocomplete",null,34),F.Jc(55,Xe,2,2,"mat-option",32),F.Wb(),F.Wb(),F.Xb(56,"mat-form-field",35),F.Xb(57,"mat-label"),F.Lc(58,"Load terminal"),F.Wb(),F.Xb(59,"mat-select",36),F.Jc(60,we,2,2,"mat-option",32),F.Wb(),F.Wb(),F.Xb(61,"mat-form-field",29),F.Xb(62,"mat-label"),F.Lc(63,"Country of Discharge"),F.Wb(),F.Sb(64,"input",37),F.Xb(65,"mat-autocomplete",null,38),F.Jc(67,ke,2,2,"mat-option",32),F.Wb(),F.Wb(),F.Xb(68,"mat-form-field",29),F.Xb(69,"mat-label"),F.Lc(70,"Port of Discharge"),F.Wb(),F.Sb(71,"input",39),F.Xb(72,"mat-autocomplete",null,40),F.Jc(74,_e,2,2,"mat-option",32),F.Wb(),F.Wb(),F.Xb(75,"mat-form-field",35),F.Xb(76,"mat-label"),F.Lc(77,"Discharge terminal"),F.Wb(),F.Xb(78,"mat-select",41),F.Jc(79,De,2,2,"mat-option",32),F.Wb(),F.Wb(),F.Xb(80,"mat-form-field",42),F.Xb(81,"mat-label"),F.Lc(82,"Voyage"),F.Wb(),F.Jc(83,Le,1,2,"input",43),F.Xb(84,"mat-select",44),F.Jc(85,Me,2,3,"mat-option",32),F.Wb(),F.Xb(86,"button",45),F.fc("click",(function(t){F.Bc(e);const i=F.jc();return i.getVoyage(i.formMovement.value)})),F.Xb(87,"mat-icon",46),F.Lc(88,"refresh"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(89,"mat-form-field",47),F.Xb(90,"mat-label"),F.Lc(91,"Update by"),F.Wb(),F.Sb(92,"input",15),F.Sb(93,"input",48),F.Wb(),F.Wb(),F.Xb(94,"div",49),F.Xb(95,"div",50),F.Lc(96),F.Wb(),F.Wb(),F.Xb(97,"div",51),F.Xb(98,"button",52),F.Lc(99,"Submit"),F.Wb(),F.Xb(100,"button",53),F.fc("click",(function(t){return F.Bc(e),F.jc().matDialogRef.close()})),F.Lc(101,"Cancel"),F.Wb(),F.Wb(),F.Wb(),F.Wb()}if(2&e){const e=F.xc(26),t=F.xc(47),i=F.xc(54),n=F.xc(66),o=F.xc(73),r=F.jc();F.Db(1),F.pc("formGroup",r.formMovement),F.Db(5),F.pc("ngIf","LOAD"!=r.stepCheck),F.Db(1),F.pc("ngIf","LOAD"!=r.stepCheck&&(!r.formMovement.controls.move.value||"OFHI"!=r.formMovement.controls.move.value.code)),F.Db(4),F.pc("readonly",!0)("value",r.containerNumber),F.Db(1),F.pc("ngIf","Add movement"==r.label),F.Db(1),F.pc("ngIf","Edit movement"==r.label),F.Db(1),F.pc("ngIf",!!r.formMovement.controls.move.value&&"OFHI"==r.formMovement.controls.move.value.code),F.Db(1),F.pc("ngIf","LOAD"==r.stepCheck),F.Db(8),F.pc("matDatepicker",e)("min",r.timeMin)("max",r.timeMax),F.Db(1),F.pc("for",e),F.Db(3),F.pc("ngIf",r.formMovement.get("date").hasError("required")),F.Db(5),F.pc("ngIf",r.formMovement.get("time").hasError("required")),F.Db(2),F.pc("ngClass",F.rc(42,Ie,"LOAD"==r.stepCheck)),F.Db(4),F.pc("ngClass",F.rc(44,Ie,"LOAD"==r.stepCheck)),F.Db(4),F.pc("ngClass",F.rc(46,Ie,"LOAD"!=r.stepCheck)),F.Db(3),F.pc("matAutocomplete",t),F.Db(3),F.pc("ngForOf",r.filteredCountry1),F.Db(1),F.pc("ngClass",F.rc(48,Ie,"LOAD"!=r.stepCheck)),F.Db(3),F.pc("matAutocomplete",i)("readonly",!r.formMovement.controls.info.value.country_of_loading),F.Db(3),F.pc("ngForOf",r.filteredPort1),F.Db(1),F.pc("ngClass",F.rc(50,Ie,"LOAD"!=r.stepCheck)),F.Db(4),F.pc("ngForOf",r.loadTerminal),F.Db(1),F.pc("ngClass",F.rc(52,Ie,"LOAD"!=r.stepCheck)),F.Db(3),F.pc("matAutocomplete",n),F.Db(3),F.pc("ngForOf",r.filteredCountry2),F.Db(1),F.pc("ngClass",F.rc(54,Ie,"LOAD"!=r.stepCheck)),F.Db(3),F.pc("matAutocomplete",o)("readonly",!r.formMovement.controls.info.value.country_of_discharge),F.Db(3),F.pc("ngForOf",r.filteredPort2),F.Db(1),F.pc("ngClass",F.rc(56,Ie,"LOAD"!=r.stepCheck)),F.Db(4),F.pc("ngForOf",r.dischargeTerminal),F.Db(1),F.pc("ngClass",F.rc(58,Ie,"LOAD"!=r.stepCheck)),F.Db(3),F.pc("ngIf",0==r.voyage.length),F.Db(1),F.pc("ngClass",F.rc(60,Ie,0==r.voyage.length)),F.Db(1),F.pc("ngForOf",r.voyage),F.Db(7),F.pc("readonly",!0)("value",r.name),F.Db(4),F.Mc(r.errorMessage)}}let Ae=(()=>{class e{constructor(e,t,i,n,o,r,a){if(this.matDialogRef=e,this._data=t,this.authService=i,this._formBuilder=n,this.commonService=o,this.containerDetailsService=r,this.datePipe=a,this.voyage=[],this.voyageName=null,this.timeMin=null,this.timeMax=new Date,this.filterStep=[],this.countryPlace=0,this.loadTerminal=[],this.dischargeTerminal=[],this.stepCheck="",this.formMovement=this._formBuilder.group({id:[null],container:[null,P.y.required],country:[null],move:[null,P.y.required],document:[null],date:[null,P.y.required],time:["00:00",P.y.required],place:[null,P.y.required],info:this._formBuilder.group({country_of_loading:[null],pol:[null],load_terminal:[null],country_of_discharge:[null],pod:[null],discharge_terminal:[null],voyage:[null],vehicle_type:[null],vehicle_number:[null]}),update_by:[this.authService.user,P.y.required]}),this.label=t.label,this.country=t.country,this.supplier=t.supplier,this.supplierCarrier=t.supplierCarrier,0==this.countryPlace?(this.filterPlace=this.supplier.slice(),this.filterCarrier=this.supplierCarrier.slice()):(this.filterPlace=this.supplier.filter(e=>e.country==this.countryPlace),this.filterCarrier=this.supplierCarrier.filter(e=>e.country==this.countryPlace)),this.seaport=t.seaport,this.filteredCountry1=this.country.slice(),this.filteredPort1=this.seaport.slice(),this.filteredCountry2=this.country.slice(),this.filteredPort2=this.seaport.slice(),this.filterSeaport=this.seaport.slice(),this.seaTerminal=t.seaTerminal,this.loadTerminal=this.seaTerminal.slice(),this.dischargeTerminal=this.seaTerminal.slice(),this.container=t.container,this.moveType=t.moveType,this.movements=t.movements,this.id=t.id,this.contId=t.contId,"Add movement"==this.label)if(this.containerNumber=this.container.cont_number,this.formMovement.controls.container.setValue(this.contId),this.container.off_hire)this.filterStep=[{code:""}];else{if(1==this.movements.length)this.stepId=this.moveType.filter(e=>2==e.step||7==e.step||10==e.step),this.timeMin=this.container.on_hire;else{let e=this.movements[0].move;this.timeMin=this.movements[0].date;let t=this.moveType.find(t=>t.id==e);if(t){let e=t.step;switch(e){case 1:this.stepId=this.moveType.filter(e=>2==e.step||7==e.step||10==e.step);break;case 2:case 3:case 4:case 5:this.stepId=this.moveType.filter(t=>t.step==e+1);break;case 6:case 7:this.stepId=this.moveType.filter(e=>1==e.step||8==e.step);break;case 10:this.stepId=this.moveType.filter(e=>1==e.step)}}}this.moveType.map(e=>{this.stepId.map(t=>{e.id==t.id&&this.filterStep.push(e)})})}if("Edit movement"==this.label){this.movement=this.movements.find(e=>e.id==this.id);let e=this.movements.indexOf(this.movement),t=this.movements.length;switch(!0){case 0==e&&1==t:this.timeMin=null,this.timeMax=new Date;break;case 0==e&&t>1:this.timeMin=new Date(this.movements[1].date),this.timeMax=new Date;break;case e>0&&e<t-1:this.timeMin=new Date(this.movements[e+1].date),this.timeMax=new Date(this.movements[e-1].date);break;case e>0&&e==t-1:this.timeMin=null,this.timeMax=new Date(this.movements[e-1].date)}this.containerNumber=this.container.cont_number,"LOAD"==this.movement.move_code?(this.stepCheck="LOAD",this.movement.place=this.filterCarrier.find(e=>e.id==this.movement.place)):this.movement.place=this.filterPlace.find(e=>e.id==this.movement.place);let i=this.datePipe.transform(new Date(this.movement.date),"yyyy/MM/dd");this.movement.time=this.datePipe.transform(new Date(this.movement.date),"HH:mm"),this.movement.date=new Date(i),this.movement.info?this.movement.info.voyage&&(this.voyageName=this.movement.info.voyage.vessel_name+" "+this.movement.info.voyage.name):this.movement.info={},this.movement.move=this.moveType.find(e=>e.id==this.movement.move),this.formMovement.patchValue(this.movement),this.filterStep=this.moveType.filter(e=>e.id==this.movement.move),this.formMovement.controls.update_by.setValue(this.authService.user)}this.permission=t.permission}ngOnInit(){this.name=this.authService.name,this.formMovement.valueChanges.subscribe(e=>{this.errorMessage=""}),this.formMovement.controls.move.valueChanges.subscribe(e=>{e&&(this.stepCheck=e.code,this.filterStep[0]=e)}),this.formMovement.get("info.country_of_loading").valueChanges.subscribe(e=>{if(e){let t=e.toLowerCase();this.filteredCountry1=this.country.filter(e=>0===e.name.toLowerCase().indexOf(t))}else this.filteredCountry1=this.country.slice();this.col=this.country.find(t=>t.name==e),this.col&&(this.filteredPort1=this.seaport.filter(e=>e.country_id==this.col.id))}),this.formMovement.get("info.pol").valueChanges.subscribe(e=>{if(this.col&&(this.filteredPort1=this.seaport.filter(e=>e.country_id==this.col.id)),e&&""!=e){let t=e.toLowerCase();this.filteredPort1=this.filteredPort1.filter(e=>0===e.name.toLowerCase().indexOf(t))}let t=this.seaport.find(t=>t.name==e);t&&("string"==typeof t.info&&""!=t.info&&(t.info=JSON.parse(t.info)),!this.pod||this.pod&&t.id!=this.pod.id?(this.pol=t,this.loadTerminal=this.seaTerminal.filter(e=>e.seaport_id==t.id)):(this.col=this.country.find(e=>e.id==t.country_id),this.loadTerminal=this.seaTerminal.filter(e=>e.seaport_id==t.id)))}),this.formMovement.get("info.country_of_discharge").valueChanges.subscribe(e=>{if(e){let t=e.toLowerCase();this.filteredCountry2=this.country.filter(e=>0===e.name.toLowerCase().indexOf(t))}else this.filteredCountry2=this.country.slice();this.cod=this.country.find(t=>t.name==e),this.cod&&(this.filteredPort2=this.seaport.filter(e=>e.country_id==this.cod.id))}),this.formMovement.get("info.pod").valueChanges.subscribe(e=>{if(this.cod&&(this.filteredPort2=this.seaport.filter(e=>e.country_id==this.cod.id)),e&&""!=e){let t=e.toLowerCase();this.filteredPort2=this.filteredPort2.filter(e=>0===e.name.toLowerCase().indexOf(t))}let t=this.seaport.find(t=>t.name==e);t&&("string"==typeof t.info&&""!=t.info&&(t.info=JSON.parse(t.info)),!this.pol||this.pol&&t.id!=this.pol.id?(this.pod=t,this.dischargeTerminal=this.seaTerminal.filter(e=>e.seaport_id==t.id)):(this.cod=this.country.find(e=>e.id==t.country_id),this.dischargeTerminal=this.seaTerminal.slice()))}),this.formMovement.get("info.voyage").valueChanges.subscribe(e=>{e&&(this.formMovement.get("info.pol").setValue(e.load_port_name),this.formMovement.get("info.country_of_loading").setValue(e.country_of_loading),this.formMovement.get("info.pod").setValue(e.discharge_port_name),this.formMovement.get("info.country_of_discharge").setValue(e.country_of_discharge))})}setDateStr(e){e.target.value=""==e.target.value?null:new Date(e.target.value)}displayFnCont(e){return e?e.cont_number:void 0}_filterCont(e){let t=e.toLowerCase();return this.container.filter(e=>e.cont_number.toLowerCase().includes(t))}getCountry(e){this.countryPlace=e.value,0==this.countryPlace?(this.filterPlace=this.supplier.slice(),this.filterCarrier=this.supplierCarrier.slice(),this.filterSeaport=this.seaport.slice()):(this.filterPlace=this.supplier.filter(e=>e.country==this.countryPlace),this.filterSeaport=this.seaport.filter(e=>e.country_id==this.countryPlace),this.filterCarrier=this.supplierCarrier.filter(e=>e.country==this.countryPlace)),this.formMovement.controls.place.setValue(null)}onMovementFormSubmit(e){if(this.filterStep.length>0&&"LOAD"==this.filterStep[0].code&&!e.value.info.voyage)this.errorMessage="Voyage is required";else if(e.valid){let t=JSON.parse(JSON.stringify(e.value)),i=this.datePipe.transform(new Date(t.date),"yyyy/MM/dd");i+=" "+t.time+":00.0",delete t.time,delete t.country,t.date=i,t.info=JSON.stringify(t.info),t.move=t.move.id,t.place=t.place.id,"Add movement"==this.label?(this.authService.onRequestChanged.next(!0),this.containerDetailsService.createMovement(t).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error create")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage="Error create"})):(this.authService.onRequestChanged.next(!0),t.date=i,this.containerDetailsService.updateMovement(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error edit containerDetail")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage="Error edit containerDetail"}))}}goBack(){this.authService.goBack()}getVoyage(e){if(this.errorMessage="",!e.place||""==e.place)return void(this.errorMessage="Place is required");if(!e.info.load_terminal||""==e.info.load_terminal)return void(this.errorMessage="Load terminal is required");if(!e.info.discharge_terminal||""==e.info.discharge_terminal)return void(this.errorMessage="Discharge terminal is required");if(!e.date)return void(this.errorMessage="Date is required");let t=this.datePipe.transform(e.date,"yyyy-MM-dd");this.authService.onRequestChanged.next(!0),this.containerDetailsService.getVoyage(e.place.id,e.info.load_terminal,e.info.discharge_terminal,t).then(e=>{this.authService.onRequestChanged.next(!1),0==e.length&&(this.errorMessage="Voyage get 0 result"),this.voyage=e})}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(g.f),F.Rb(g.a),F.Rb(T.a),F.Rb(P.d),F.Rb(j.a),F.Rb(E),F.Rb(J.f))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-movement-modal-dialog"]],decls:10,vars:2,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","container-details-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","container","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20","class","pr-8",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80","class","pr-8",4,"ngIf"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","",3,"readonly","value"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20","class","pr-8",4,"ngIf"],["appearance","outline","class","pr-8","fxFlex","50","fxFlex.gt-xs","20",4,"ngIf"],["appearance","outline","class","pr-8","fxFlex","100","fxFlex.gt-xs","60",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","","formControlName","document"],["inputCheck","","matInput","","name","date","formControlName","date","required","",3,"matDatepicker","min","max","change"],["matSuffix","",3,"for"],["moveDatePicker",""],["inputCheck","","matInput","","type","time","formControlName","time","required",""],["formGroupName","info","fxFlex","100","fxLayout","row wrap","fxLayoutAlign","start center",1,"pr-8"],["appearance","outline","fxFlex","50",1,"pr-8",3,"ngClass"],["inputCheck","","matInput","","formControlName","vehicle_type"],["inputCheck","","matInput","","formControlName","vehicle_number"],["appearance","outline","fxFlex","33",1,"pr-8",3,"ngClass"],["inputCheck","","type","text","aria-label","Country of Loading","matInput","","formControlName","country_of_loading",3,"matAutocomplete"],["autoCOL","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","aria-label","Port of Loading","matInput","","formControlName","pol",3,"matAutocomplete","readonly"],["autoPOL","matAutocomplete"],["appearance","outline","fxFlex","34",1,"pr-8",3,"ngClass"],["formControlName","load_terminal"],["inputCheck","","type","text","aria-label","Country of Discharge","matInput","","formControlName","country_of_discharge",3,"matAutocomplete"],["autoCOD","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of Discharge","matInput","","formControlName","pod",3,"matAutocomplete","readonly"],["autoPOD","matAutocomplete"],["formControlName","discharge_terminal"],["appearance","outline","fxFlex","100",1,"pr-8",3,"ngClass"],["inputCheck","","matInput","",3,"readonly","value",4,"ngIf"],["formControlName","voyage",3,"ngClass"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"click"],["color","accent"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],["formControlName","country",3,"selectionChange"],[3,"value"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["formControlName","place","required",""],["formControlName","move","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["inputCheck","","type","text","matInput","","formControlName","move",2,"display","none"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","60",1,"pr-8"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"mat-toolbar",1),F.Xb(2,"mat-toolbar-row",2),F.Xb(3,"span",3),F.Lc(4),F.Wb(),F.Xb(5,"button",4),F.fc("click",(function(e){return t.matDialogRef.close()})),F.Xb(6,"mat-icon"),F.Lc(7,"close"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(8,"div",5),F.Jc(9,Re,102,62,"div",6),F.Wb(),F.Wb()),2&e&&(F.Db(4),F.Mc(t.label),F.Db(5),F.pc("ngIf","Add movement"==t.label||"Edit movement"==t.label))},directives:[v.a,v.c,V.b,V.d,V.c,s.b,m.a,g.d,$.a,J.t,P.A,P.q,P.h,P.b,P.p,P.g,P.w,b.c,b.f,u.b,c.b,c.d,b.h,c.a,P.i,J.q,re.a,a.c,a.a,J.s,h.a,w.n,b.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-movement-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-movement-modal-dialog{width:1080px}}.container-details-movement-modal-dialog .mat-dialog-container{padding:0}.container-details-movement-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-movement-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-movement-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();var Ne=i("ihCf");const Pe=["formDirective"];function qe(e,t){if(1&e&&(F.Xb(0,"mat-option",26),F.Lc(1),F.kc(2,"date"),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.sel_move_id),F.Db(1),F.Oc("",e.move_code," ",F.mc(2,3,e.date,"MM/dd/yyyy"),"")}}function Oe(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Move is required "),F.Wb())}function Fe(e,t){if(1&e&&(F.Xb(0,"mat-option",53),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e),F.Db(1),F.Nc(" ",e.name," ")}}function Te(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Price is required "),F.Wb())}function je(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Volume is required "),F.Wb())}function ze(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Amount is required "),F.Wb())}function Be(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Tax is required "),F.Wb())}function Ee(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Tax Amount is required "),F.Wb())}function Je(e,t){if(1&e&&(F.Xb(0,"mat-option",26),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.code," ")}}function Ve(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Currency is required "),F.Wb())}function $e(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Ex_rate is required "),F.Wb())}function He(e,t){if(1&e&&(F.Xb(0,"mat-option",26),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.full_name," ")}}function Ue(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Party is required "),F.Wb())}function Ge(e,t){if(1&e&&(F.Xb(0,"mat-option",26),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.name," ")}}function Ye(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Payment center is required "),F.Wb())}let Qe=(()=>{class e{constructor(e,t,i,n,o,r,a){switch(this.router=e,this.matDialogRef=t,this._data=i,this.authService=n,this.commonService=o,this.datePipe=r,this._formBuilder=a,this.errorMessage="",this.type="",this.form=this._formBuilder.group({id:[null,P.y.required],move:[null,P.y.required],shipment:[null,P.y.required],price:[null,P.y.required],volume:[null,P.y.required],amount:[null,P.y.required],tax:[0,P.y.required],tax_amount:[null,P.y.required],currency:[4,P.y.required],ex_rate:[23500,P.y.required],payment_center:[6,P.y.required],partner:[null,P.y.required],debit:[null],inv_number:[null],issue_date:[null],info:[null],update_by:[this.authService.user,P.y.required],create_by:[this.authService.user,P.y.required]}),this.partnerColumn={Revenue:"pay_party",Cost:"issue_party"},this.updateItem=new F.o,this.label=i.label,this.price=i.price,this.currency=i.currency,this.partner=i.partner,this.country=i.country,this.user=i.users,this.move=i.move,this.permission=i.permission,!0){case this.label.includes("Revenue"):this.type="Revenue";break;case this.label.includes("Cost"):this.type="Cost"}if(i.data){let e=JSON.parse(JSON.stringify(i.data));e.price=this.price.find(t=>t.id==e.price),this.form.patchValue(e),this.createName=e.create_by_name,this.shipment=i.data.code}if(this.label.includes("Edit"))this.form.controls.update_by.setValue(this.authService.user);else if(this.form.controls.id.disable(),!i.data){let e=this.move.find(e=>e.sel_move_id==i.selMove.sel_move_id);if(this.form.controls.shipment.setValue(e.shipment_id),this.form.controls.move.setValue(e.sel_move_id),this.shipment=e.shipment_code,"HLA"==e.place_short_name){let e=this.partner.find(e=>"SIMBA SIN"==e.short_name);e&&(this.form.controls.partner.setValue(e.id),this.form.controls.payment_center.setValue(e.country),this.form.controls.currency.setValue(173),this.form.controls.ex_rate.setValue(17e3))}this.createName=this.authService.name}}ngOnInit(){this.name=this.authService.name,this.filteredPartner=this.form.controls.partner.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"partner_name",this.partner):[])),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.price_name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"price_name",this.price):this.price)),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"name",this.country):[])),this.form.controls.partner.valueChanges.subscribe(e=>{let t=this.partner.find(t=>t.id==e);t&&this.form.controls.payment_center.setValue(t.country)}),this.form.controls.amount.valueChanges.subscribe(e=>{e=e||0;let t=this.form.value.tax?this.form.value.tax:0;5.26==t&&(t=.05/.95*100);let i=Math.round(e*t/100);this.form.controls.tax_amount.setValue(i)}),this.form.controls.tax.valueChanges.subscribe(e=>{5.26==(e=e||0)&&(e=.05/.95*100);let t=Math.round((this.form.value.amount?this.form.value.amount:0)*e/100);this.form.controls.tax_amount.setValue(t)}),this.form.valueChanges.subscribe(e=>{this.errorMessage=""})}onFormSubmit(e){if(e.valid){let t=JSON.parse(JSON.stringify(e.value));if("string"==typeof t.price&&this.form.controls.price.setValue(null),"string"==typeof t.currency&&this.form.controls.currency.setValue(null),"string"==typeof t.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof t.partner&&this.form.controls.partner.setValue(null),"string"==typeof t.create_by&&this.form.controls.create_by.setValue(null),!this.form.valid)return;t.issue_date&&(t.issue_date=this.datePipe.transform(t.issue_date,"yyyy-MM-dd")),t.update_at=this.datePipe.transform(new Date,"yyyy-MM-dd HH:mm:ss"),t[this.partnerColumn[this.type]]=t.partner,delete t.partner,this.updateItem.emit(t)}}getExrate(e){let t=this.currency.find(t=>t.id==e.value);this.form.controls.ex_rate.setValue(t.exrate)}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(n.g),F.Rb(g.f),F.Rb(g.a),F.Rb(T.a),F.Rb(j.a),F.Rb(J.f),F.Rb(P.d))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-soa-modal-dialog"]],viewQuery:function(e,t){var i;1&e&&F.Sc(Pe,!0),2&e&&F.wc(i=F.gc())&&(t.shipmentNgForm=i.first)},decls:136,vars:45,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-detail-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","shipment","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","50",1,"pr-8"],["formControlName","move","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["inputCheck","","matInput","",3,"value","readonly"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","10",1,"pr-8"],["inputCheck","","matInput","","formControlName","volume","min","1","type","number","required",""],["inputCheck","","matInput","","type","number","formControlName","amount","required",""],["formControlName","tax","required",""],[3,"value"],["inputCheck","","matInput","","type","number","formControlName","tax_amount","required",""],["formControlName","currency","required","",3,"selectionChange"],["floatLabel","always","fxFlex","25","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","type","number","matInput","","formControlName","ex_rate"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","75",1,"pr-8"],["inputCheck","","aria-label","partner","matInput","","formControlName","partner",3,"matAutocomplete"],["autoCus","matAutocomplete"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","aria-label","payment_center","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["inputCheck","","matInput","","formControlName","debit"],["inputCheck","","matInput","","formControlName","inv_number"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["matSuffix","",3,"for"],["issueDate",""],["inputCheck","","matInput","","readonly","true",3,"value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","20"],["inputCheck","","matInput","","formControlName","create_by",2,"display","none"],["floatLabel","always","fxFlex","100",1,"pr-8"],["textareaCheck","","matInput","","formControlName","info","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[2,"font-size","12px","overflow","visible","display","block",3,"value"]],template:function(e,t){if(1&e&&(F.Xb(0,"div",0),F.Xb(1,"mat-toolbar",1),F.Xb(2,"mat-toolbar-row",2),F.Xb(3,"span",3),F.Lc(4),F.Wb(),F.Xb(5,"button",4),F.fc("click",(function(e){return t.matDialogRef.close()})),F.Xb(6,"mat-icon"),F.Lc(7,"close"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(8,"div",5),F.Xb(9,"div"),F.Xb(10,"form",6),F.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),F.Xb(11,"div",7),F.Sb(12,"input",8),F.Sb(13,"input",9),F.Wb(),F.Xb(14,"div",10),F.Xb(15,"mat-form-field",11),F.Xb(16,"mat-label"),F.Lc(17,"Move"),F.Wb(),F.Xb(18,"mat-select",12),F.Jc(19,qe,3,6,"mat-option",13),F.Wb(),F.Jc(20,Oe,2,0,"mat-error",14),F.Wb(),F.Xb(21,"mat-form-field",11),F.Xb(22,"mat-label"),F.Lc(23,"Shipment"),F.Wb(),F.Sb(24,"input",15),F.Wb(),F.Xb(25,"mat-form-field",16),F.Xb(26,"mat-label"),F.Lc(27,"Price"),F.Wb(),F.Sb(28,"input",17),F.Xb(29,"mat-autocomplete",18,19),F.Jc(31,Fe,2,2,"mat-option",20),F.kc(32,"async"),F.Wb(),F.Jc(33,Te,2,0,"mat-error",14),F.Wb(),F.Xb(34,"mat-form-field",21),F.Xb(35,"mat-label"),F.Lc(36,"Unit"),F.Wb(),F.Sb(37,"input",15),F.Wb(),F.Xb(38,"mat-form-field",22),F.Xb(39,"mat-label"),F.Lc(40,"Volume"),F.Wb(),F.Sb(41,"input",23),F.Jc(42,je,2,0,"mat-error",14),F.Wb(),F.Xb(43,"mat-form-field",21),F.Xb(44,"mat-label"),F.Lc(45,"Amount"),F.Wb(),F.Sb(46,"input",24),F.Jc(47,ze,2,0,"mat-error",14),F.Wb(),F.Xb(48,"mat-form-field",22),F.Xb(49,"mat-label"),F.Lc(50,"Tax(%)"),F.Wb(),F.Xb(51,"mat-select",25),F.Xb(52,"mat-option",26),F.Lc(53,"0"),F.Wb(),F.Xb(54,"mat-option",26),F.Lc(55,"5"),F.Wb(),F.Xb(56,"mat-option",26),F.Lc(57,"5.26"),F.Wb(),F.Xb(58,"mat-option",26),F.Lc(59,"7"),F.Wb(),F.Xb(60,"mat-option",26),F.Lc(61,"8"),F.Wb(),F.Xb(62,"mat-option",26),F.Lc(63,"10"),F.Wb(),F.Wb(),F.Jc(64,Be,2,0,"mat-error",14),F.Wb(),F.Xb(65,"mat-form-field",21),F.Xb(66,"mat-label"),F.Lc(67,"Tax Amount"),F.Wb(),F.Sb(68,"input",27),F.Jc(69,Ee,2,0,"mat-error",14),F.Wb(),F.Xb(70,"mat-form-field",21),F.Xb(71,"mat-label"),F.Lc(72,"Currency"),F.Wb(),F.Xb(73,"mat-select",28),F.fc("selectionChange",(function(e){return t.getExrate(e)})),F.Jc(74,Je,2,2,"mat-option",13),F.Wb(),F.Jc(75,Ve,2,0,"mat-error",14),F.Wb(),F.Xb(76,"mat-form-field",29),F.Xb(77,"mat-label"),F.Lc(78,"Ex-rate"),F.Wb(),F.Sb(79,"input",30),F.Jc(80,$e,2,0,"mat-error",14),F.Wb(),F.Xb(81,"mat-form-field",31),F.Xb(82,"mat-label"),F.Lc(83),F.Wb(),F.Sb(84,"input",32),F.Xb(85,"mat-autocomplete",18,33),F.Jc(87,He,2,2,"mat-option",13),F.kc(88,"async"),F.Wb(),F.Jc(89,Ue,2,0,"mat-error",14),F.Wb(),F.Xb(90,"mat-form-field",34),F.Xb(91,"mat-label"),F.Lc(92,"Payment center"),F.Wb(),F.Sb(93,"input",35),F.Xb(94,"mat-autocomplete",18,36),F.Jc(96,Ge,2,2,"mat-option",13),F.kc(97,"async"),F.Wb(),F.Jc(98,Ye,2,0,"mat-error",14),F.Wb(),F.Xb(99,"mat-form-field",21),F.Xb(100,"mat-label"),F.Lc(101,"Debit"),F.Wb(),F.Sb(102,"input",37),F.Wb(),F.Xb(103,"mat-form-field",21),F.Xb(104,"mat-label"),F.Lc(105,"Invoice number"),F.Wb(),F.Sb(106,"input",38),F.Wb(),F.Xb(107,"mat-form-field",21),F.Xb(108,"mat-label"),F.Lc(109,"Issue date"),F.Wb(),F.Xb(110,"input",39),F.fc("change",(function(e){return t.commonService.setDateStr(e)})),F.Wb(),F.Sb(111,"mat-datepicker-toggle",40),F.Sb(112,"mat-datepicker",null,41),F.Wb(),F.Xb(114,"mat-form-field",21),F.Xb(115,"mat-label"),F.Lc(116,"Update by"),F.Wb(),F.Sb(117,"input",42),F.Sb(118,"input",43),F.Wb(),F.Xb(119,"mat-form-field",44),F.Xb(120,"mat-label"),F.Lc(121,"Create by"),F.Wb(),F.Sb(122,"input",42),F.Sb(123,"input",45),F.Wb(),F.Xb(124,"mat-form-field",46),F.Xb(125,"mat-label"),F.Lc(126,"Info"),F.Wb(),F.Sb(127,"textarea",47),F.Wb(),F.Wb(),F.Xb(128,"div",48),F.Xb(129,"div",49),F.Lc(130),F.Wb(),F.Wb(),F.Xb(131,"div",50),F.Xb(132,"button",51),F.Lc(133,"Submit"),F.Wb(),F.Xb(134,"button",52),F.fc("click",(function(e){return t.matDialogRef.close()})),F.Lc(135,"Cancel"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e){const e=F.xc(30),i=F.xc(86),n=F.xc(95),o=F.xc(113);F.Db(4),F.Mc(t.label),F.Db(6),F.pc("formGroup",t.form),F.Db(9),F.pc("ngForOf",t.move),F.Db(1),F.pc("ngIf",t.form.get("move").hasError("required")),F.Db(4),F.pc("value",t.shipment)("readonly",!0),F.Db(4),F.pc("matAutocomplete",e),F.Db(1),F.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),F.Db(2),F.pc("ngForOf",F.lc(32,39,t.filteredPrice)),F.Db(2),F.pc("ngIf",t.form.get("price").hasError("required")),F.Db(4),F.pc("value",null==t.form.value.price?null:t.form.value.price.unit_code)("readonly",!0),F.Db(5),F.pc("ngIf",t.form.get("volume").hasError("required")),F.Db(5),F.pc("ngIf",t.form.get("amount").hasError("required")),F.Db(5),F.pc("value",0),F.Db(2),F.pc("value",5),F.Db(2),F.pc("value",5.26),F.Db(2),F.pc("value",7),F.Db(2),F.pc("value",8),F.Db(2),F.pc("value",10),F.Db(2),F.pc("ngIf",t.form.get("tax").hasError("required")),F.Db(5),F.pc("ngIf",t.form.get("tax_amount").hasError("required")),F.Db(5),F.pc("ngForOf",t.currency),F.Db(1),F.pc("ngIf",t.form.get("currency").hasError("required")),F.Db(5),F.pc("ngIf",t.form.get("ex_rate").hasError("required")),F.Db(3),F.Nc("",t.label.includes("Revenue")?"Pay":"Issue"," Party"),F.Db(1),F.pc("matAutocomplete",i),F.Db(1),F.pc("displayWith",t.commonService.displayFn.bind(t,"full_name",t.partner)),F.Db(2),F.pc("ngForOf",F.lc(88,41,t.filteredPartner)),F.Db(2),F.pc("ngIf",t.form.get("partner").hasError("required")),F.Db(4),F.pc("matAutocomplete",n),F.Db(1),F.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.country)),F.Db(2),F.pc("ngForOf",F.lc(97,43,t.filteredCountry)),F.Db(2),F.pc("ngIf",t.form.get("payment_center").hasError("required")),F.Db(12),F.pc("matDatepicker",o),F.Db(1),F.pc("for",o),F.Db(6),F.pc("value",t.name),F.Db(5),F.pc("value",t.createName),F.Db(8),F.Mc(t.errorMessage)}},directives:[v.a,v.c,V.b,V.d,V.c,s.b,m.a,g.d,$.a,P.A,P.q,P.h,P.b,P.p,P.g,P.w,b.c,b.f,h.a,J.s,J.t,u.b,a.c,a.a,P.u,w.n,c.b,c.d,b.h,c.a,Ne.b,b.b],pipes:[J.b,J.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-soa-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-soa-modal-dialog{width:1080px}}.container-details-soa-modal-dialog .mat-dialog-container{padding:0}.container-details-soa-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-soa-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-soa-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();var Ke=i("HX77"),Ze=i("B9zo"),et=i("fE3o");let tt=(()=>{class e{constructor(e,t){this.formBuilder=e,this.authService=t,this.height=560,this.changeSetting=new F.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new R.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-18}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-18:this.authService.screenHeight-64-64-18})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}initForm(){return this.formBuilder.group({column:this.formBuilder.array([])})}get columnAdd(){return this.form.get("column")}addColumn(e){let t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}checkAll(){this.displayedColumns.map((e,t)=>{this.form.controls.column.controls[t].controls[e].setValue(!0)})}toggleCardCover(){}toggleSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(P.d),F.Rb(T.a))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"div",1),F.Xb(2,"div",2),F.Xb(3,"div"),F.Lc(4,"Settings"),F.Wb(),F.Wb(),F.Wb(),F.Xb(5,"div",3),F.Xb(6,"form",4),F.Xb(7,"div",5),F.Xb(8,"h2"),F.Lc(9,"Column"),F.Wb(),F.Xb(10,"div",6),F.Xb(11,"button",7),F.fc("click",(function(e){return t.checkAll()})),F.Lc(12,"All column"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(5),F.Ic("height",t.height,"px"),F.Db(1),F.pc("formGroup",t.form))},directives:[V.d,V.c,$.a,P.A,P.q,P.h,s.b],styles:["container-details-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-setting .navbar-scroll-container{background:#fff!important}container-details-setting .navbar-scroll-container .navbar-content{padding-top:0}container-details-setting .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-details-setting .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-details-setting .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:N.a}}),e})();var it=i("0JVi");function nt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",8),F.fc("click",(function(t){F.Bc(e);const i=F.jc();return t.stopPropagation(),i.changeScreen(!0)})),F.Xb(1,"mat-icon"),F.Lc(2,"flip_to_front"),F.Wb(),F.Wb()}}function ot(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",8),F.fc("click",(function(t){F.Bc(e);const i=F.jc();return t.stopPropagation(),i.changeScreen(!1)})),F.Xb(1,"mat-icon"),F.Lc(2,"flip_to_back"),F.Wb(),F.Wb()}}let rt=(()=>{class e{constructor(e,t){this.authService=e,this._fuseConfigService=t,this.fullScreen=!1,this.toggleSidebar=new F.o,this.showHideBar=new F.o,this.refreshPage=new F.o,this._unsubscribeAll=new R.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(T.a),F.Rb(it.b))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(F.Xb(0,"mat-toolbar",0),F.Xb(1,"div",1),F.Xb(2,"div",2),F.Xb(3,"div",3),F.Xb(4,"button",4),F.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),F.Xb(5,"mat-icon"),F.Lc(6,"menu"),F.Wb(),F.Wb(),F.Xb(7,"button",5),F.fc("click",(function(e){return t.showHideBar.emit()})),F.Xb(8,"mat-icon"),F.Lc(9,"menu"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(10,"div",6),F.Sb(11,"div",7),F.Xb(12,"button",8),F.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),F.Xb(13,"mat-icon",9),F.Lc(14,"refresh"),F.Wb(),F.Wb(),F.Sb(15,"div",7),F.Jc(16,nt,3,0,"button",10),F.Jc(17,ot,3,0,"button",10),F.Sb(18,"div",7),F.Xb(19,"button",8),F.fc("click",(function(e){return t.toggleSidebar.emit("container-details-setting")})),F.Xb(20,"mat-icon"),F.Lc(21,"settings"),F.Wb(),F.Wb(),F.Sb(22,"div",7),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(16),F.pc("ngIf",!t.fullScreen),F.Db(1),F.pc("ngIf",t.fullScreen))},directives:[v.a,V.b,V.e,V.d,V.c,s.b,re.b,m.a,J.t],styles:["container-details-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}container-details-header.below{z-index:2}container-details-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}container-details-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}container-details-header .logo .logo-icon{width:38px}container-details-header .chat-panel-toggle-button,container-details-header .language-button,container-details-header .quick-panel-toggle-button,container-details-header .user-button,container-details-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){container-details-header .chat-panel-toggle-button,container-details-header .language-button,container-details-header .quick-panel-toggle-button,container-details-header .user-button,container-details-header fuse-search-bar{height:56px}}container-details-header .navbar-toggle-button{min-width:56px;height:56px}container-details-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){container-details-header .toolbar-separator{height:56px}}"],encapsulation:2}),e})();function at(e,t){if(1&e){const e=F.Yb();F.Xb(0,"mat-icon",7),F.fc("click",(function(t){return F.Bc(e),F.jc().openAddMoveModal.emit()})),F.Lc(1,"add"),F.Wb()}}function ct(e,t){if(1&e){const e=F.Yb();F.Xb(0,"td"),F.Xb(1,"a",15),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit,n=F.jc();return t.stopPropagation(),n.getShipment.emit(i)})),F.Lc(2),F.Wb(),F.Wb()}if(2&e){const e=F.jc().$implicit;F.Db(2),F.Mc(e.document)}}function st(e,t){if(1&e&&(F.Xb(0,"td"),F.Lc(1),F.Wb()),2&e){const e=F.jc().$implicit;F.Db(1),F.Mc(e.document)}}function lt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",16),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().openAddMoveModal.emit(i)})),F.Xb(1,"mat-icon"),F.Lc(2,"add"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Add Movement"),F.Wb(),F.Wb()}}function bt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",16),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().openEditMoveModal.emit(i)})),F.Xb(1,"mat-icon"),F.Lc(2,"edit"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Edit Movement"),F.Wb(),F.Wb()}}function mt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",14),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().deleteMovement.emit(i)})),F.Xb(1,"mat-icon"),F.Lc(2,"delete"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Remove Movement"),F.Wb(),F.Wb()}}function dt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",14),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().deleteSelMove.emit(i.sel_move_id)})),F.Xb(1,"mat-icon"),F.Lc(2,"delete"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Remove Shipment"),F.Wb(),F.Wb()}}function ut(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",14),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().saveSelMove.emit(i)})),F.Xb(1,"mat-icon"),F.Lc(2,"save"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Save Shipment"),F.Wb(),F.Wb()}}function pt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",14),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().addSelRevenue.emit(i)})),F.Xb(1,"mat-icon"),F.Lc(2,"add"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Revenue"),F.Wb(),F.Wb()}}function ht(e,t){if(1&e){const e=F.Yb();F.Xb(0,"button",14),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit;return F.jc().addSelCost.emit(i)})),F.Xb(1,"mat-icon"),F.Lc(2,"add"),F.Wb(),F.Xb(3,"span"),F.Lc(4,"Cost"),F.Wb(),F.Wb()}}function ft(e,t){if(1&e){const e=F.Yb();F.Xb(0,"tr"),F.Xb(1,"td"),F.Lc(2),F.Wb(),F.Xb(3,"td"),F.Lc(4),F.Wb(),F.Xb(5,"td"),F.Lc(6),F.kc(7,"date"),F.Wb(),F.Xb(8,"td"),F.Lc(9),F.Wb(),F.Jc(10,ct,3,1,"td",8),F.Jc(11,st,2,1,"td",8),F.Xb(12,"td"),F.Xb(13,"a",9),F.fc("click",(function(t){return F.Bc(e),t.stopPropagation()})),F.Lc(14),F.Wb(),F.Wb(),F.Xb(15,"td"),F.Lc(16),F.Wb(),F.Xb(17,"td"),F.Lc(18),F.kc(19,"date"),F.Wb(),F.Xb(20,"td",4),F.Xb(21,"mat-icon",10),F.fc("click",(function(t){return F.Bc(e),t.stopPropagation()})),F.Lc(22,"more_vert"),F.Wb(),F.Xb(23,"mat-menu",null,11),F.Jc(25,lt,5,0,"button",12),F.Jc(26,bt,5,0,"button",12),F.Jc(27,mt,5,0,"button",13),F.Jc(28,dt,5,0,"button",13),F.Jc(29,ut,5,0,"button",13),F.Xb(30,"button",14),F.fc("click",(function(i){F.Bc(e);const n=t.$implicit;return F.jc().openAddNoteModal.emit(n)})),F.Xb(31,"mat-icon"),F.Lc(32,"note"),F.Wb(),F.Xb(33,"span"),F.Lc(34,"Note"),F.Wb(),F.Wb(),F.Jc(35,pt,5,0,"button",13),F.Jc(36,ht,5,0,"button",13),F.Wb(),F.Wb(),F.Wb()}if(2&e){const e=t.$implicit,i=t.index,n=F.xc(24),o=F.jc();F.Db(2),F.Mc(i+1),F.Db(2),F.Mc(e.move_code),F.Db(2),F.Mc(F.mc(7,18,e.date,"MM/dd/yyyy HH:mm")),F.Db(3),F.Mc(e.place_short_name),F.Db(1),F.pc("ngIf",!e.shipment_code),F.Db(1),F.pc("ngIf",e.shipment_code),F.Db(2),F.pc("routerLink","/apps/import-haiphong/shipment/detail/"+e.shipment_id+"/overview"),F.Db(1),F.Mc(e.shipment_code),F.Db(2),F.Mc(e.update_by_name),F.Db(2),F.Mc(F.mc(19,21,e.update_at,"MM/dd/yyyy HH:mm")),F.Db(3),F.pc("matMenuTriggerFor",n),F.Db(4),F.pc("ngIf",o.permission.create),F.Db(1),F.pc("ngIf",o.permission.edit&&e.id),F.Db(1),F.pc("ngIf",o.permission.delete),F.Db(1),F.pc("ngIf",o.permission.delete&&e.sel_move_id),F.Db(1),F.pc("ngIf",o.permission.create&&!e.sel_move_id&&e.document),F.Db(6),F.pc("ngIf",o.permission.create&&e.sel_move_id&&83==o.userId),F.Db(1),F.pc("ngIf",o.permission.create&&e.sel_move_id&&83==o.userId)}}let gt=(()=>{class e{constructor(){this.deleteMovement=new F.o,this.deleteSelMove=new F.o,this.openAddMoveModal=new F.o,this.openEditMoveModal=new F.o,this.openAddNoteModal=new F.o,this.getShipment=new F.o,this.saveSelMove=new F.o,this.addSelRevenue=new F.o,this.addSelCost=new F.o,this._unsubscribeAll=new R.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-content-movement"]],inputs:{container:"container",movement:"movement",permission:"permission",userId:"userId"},outputs:{deleteMovement:"deleteMovement",deleteSelMove:"deleteSelMove",openAddMoveModal:"openAddMoveModal",openEditMoveModal:"openEditMoveModal",openAddNoteModal:"openAddNoteModal",getShipment:"getShipment",saveSelMove:"saveSelMove",addSelRevenue:"addSelRevenue",addSelCost:"addSelCost"},decls:28,vars:2,consts:[[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto","height","350px"],[1,"simple","table-movement"],[1,"w-40","sticky-right-col"],["class","cursor-pointer mr-8","color","accent",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["color","accent",1,"cursor-pointer","mr-8",3,"click"],[4,"ngIf"],[1,"cursor-pointer",3,"routerLink","click"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","edit",3,"click",4,"ngIf"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],["mat-menu-item","","aria-label","remove",3,"click"],[1,"cursor-pointer",3,"click"],["mat-menu-item","","aria-label","edit",3,"click"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"h2",1),F.Xb(2,"span"),F.Lc(3,"Container movement"),F.Wb(),F.Wb(),F.Xb(4,"div",2),F.Xb(5,"table",3),F.Xb(6,"thead"),F.Xb(7,"tr"),F.Xb(8,"th"),F.Lc(9,"No"),F.Wb(),F.Xb(10,"th"),F.Lc(11,"Type"),F.Wb(),F.Xb(12,"th"),F.Lc(13,"Date"),F.Wb(),F.Xb(14,"th"),F.Lc(15,"Place"),F.Wb(),F.Xb(16,"th"),F.Lc(17,"Document"),F.Wb(),F.Xb(18,"th"),F.Lc(19,"Shipment"),F.Wb(),F.Xb(20,"th"),F.Lc(21,"Update by"),F.Wb(),F.Xb(22,"th"),F.Lc(23,"Update at"),F.Wb(),F.Xb(24,"th",4),F.Jc(25,at,2,0,"mat-icon",5),F.Wb(),F.Wb(),F.Wb(),F.Xb(26,"tbody"),F.Jc(27,ft,37,24,"tr",6),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(25),F.pc("ngIf",t.permission.create),F.Db(2),F.pc("ngForOf",t.movement))},directives:[V.d,V.c,J.t,J.s,m.a,n.j,r.c,r.d,r.a],pipes:[J.f],styles:["container-details-content-movement .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-movement .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-movement .group .table-movement{font-size:12px}container-details-content-movement .group .table-movement td,container-details-content-movement .group .table-movement th{padding:8px;font-size:12px;white-space:nowrap}container-details-content-movement .group .table-movement thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}container-details-content-movement .group .table-movement tfoot td{font-weight:600}container-details-content-movement .group .table-movement .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-movement .group .table-movement .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-movement .group .table-movement .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}container-details-content-movement .group .table-movement tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-movement .group .table-movement tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:N.a}}),e})();const vt=["formDirective"];function xt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"mat-icon",42),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit,n=F.jc();return t.stopPropagation(),n.createSoaItem.emit(i)})),F.Lc(1,"file_copy"),F.Wb()}}function yt(e,t){if(1&e){const e=F.Yb();F.Xb(0,"mat-icon",42),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit,n=F.jc();return t.stopPropagation(),n.editSoaItem.emit(i)})),F.Lc(1,"edit"),F.Wb()}}function St(e,t){if(1&e){const e=F.Yb();F.Xb(0,"mat-icon",43),F.fc("click",(function(t){F.Bc(e);const i=F.jc().$implicit,n=F.jc();return t.stopPropagation(),n.deleteSoaItem.emit(i)})),F.Lc(1,"delete"),F.Wb()}}const Ct=function(e){return{"red-200-bg":e}},Wt=function(){return[1,15]};function Xt(e,t){if(1&e&&(F.Xb(0,"tr"),F.Xb(1,"td"),F.Lc(2),F.Wb(),F.Xb(3,"td",33),F.Lc(4),F.Wb(),F.Xb(5,"td",33),F.Lc(6),F.kc(7,"date"),F.Wb(),F.Xb(8,"td"),F.Xb(9,"a",34),F.Lc(10),F.Wb(),F.Wb(),F.Xb(11,"td",35),F.Lc(12),F.Wb(),F.Xb(13,"td",35),F.Lc(14),F.Wb(),F.Xb(15,"td"),F.Lc(16),F.Wb(),F.Xb(17,"td"),F.Lc(18),F.Wb(),F.Xb(19,"td",36),F.Lc(20),F.kc(21,"number"),F.Wb(),F.Xb(22,"td"),F.Lc(23),F.Wb(),F.Xb(24,"td",36),F.Lc(25),F.Wb(),F.Xb(26,"td",36),F.Lc(27),F.kc(28,"number"),F.Wb(),F.Xb(29,"td",36),F.Lc(30),F.kc(31,"number"),F.Wb(),F.Xb(32,"td",37),F.Lc(33),F.kc(34,"number"),F.Wb(),F.Xb(35,"td",38),F.Lc(36),F.kc(37,"number"),F.Wb(),F.Xb(38,"td"),F.Lc(39),F.Wb(),F.Xb(40,"td",36),F.Lc(41),F.kc(42,"number"),F.Wb(),F.Xb(43,"td"),F.Lc(44),F.Wb(),F.Xb(45,"td"),F.Lc(46),F.Wb(),F.Xb(47,"td",33),F.Lc(48),F.Wb(),F.Xb(49,"td"),F.Lc(50),F.kc(51,"date"),F.Wb(),F.Xb(52,"td"),F.Lc(53),F.kc(54,"date"),F.Wb(),F.Xb(55,"td"),F.Lc(56),F.Wb(),F.Xb(57,"td"),F.Lc(58),F.Wb(),F.Xb(59,"td",39),F.Jc(60,xt,2,0,"mat-icon",40),F.Jc(61,yt,2,0,"mat-icon",40),F.Jc(62,St,2,0,"mat-icon",41),F.Wb(),F.Wb()),2&e){const e=t.$implicit,i=t.index,n=F.jc();F.Db(2),F.Mc(i+1),F.Db(1),F.pc("ngClass",F.rc(60,Ct,!e.move_code)),F.Db(1),F.Mc(e.move_code),F.Db(1),F.pc("ngClass",F.rc(62,Ct,!e.move_code)),F.Db(1),F.Mc(F.mc(7,33,e.move_date,"MM/dd/yyyy")),F.Db(3),F.pc("routerLink","/apps/import-haiphong/shipment/detail/"+e.shipment+"/soa"),F.Db(1),F.Mc(e.code),F.Db(1),F.pc("matTooltip",e.partner_name),F.Db(1),F.Mc(e.partner_short_name),F.Db(1),F.pc("matTooltip",e.price_name),F.Db(1),F.Mc(e.price_code),F.Db(2),F.Mc(e.unit_code),F.Db(2),F.Mc(e.volume),F.Db(2),F.Mc(F.mc(21,36,e.amount,"1.2-2")),F.Db(3),F.Mc(e.tax),F.Db(2),F.Mc(e.tax_amount),F.Db(2),F.Mc(F.mc(28,39,e.total_amount,"1.2-2")),F.Db(3),F.Mc(F.mc(31,42,e.total_tax,"1.2-2")),F.Db(3),F.Mc("Revenue"==e.type_name?F.mc(34,45,e.total_amount+e.total_tax,"1.2-2"):""),F.Db(3),F.Mc("Cost"==e.type_name?F.mc(37,48,e.total_amount+e.total_tax,"1.2-2"):""),F.Db(3),F.Mc(e.currency_code),F.Db(2),F.Mc(F.mc(42,51,e.ex_rate,"1.2-2")),F.Db(3),F.Mc(e.country_name),F.Db(2),F.Mc(e.debit),F.Db(1),F.pc("ngClass",F.rc(64,Ct,!e.inv_number)),F.Db(1),F.Mc(e.inv_number),F.Db(2),F.Mc(F.mc(51,54,e.issue_date,"MM/dd/yyyy")),F.Db(3),F.Mc(F.mc(54,57,e.pay_date,"MM/dd/yyyy")),F.Db(3),F.Mc(e.info),F.Db(2),F.Mc(e.update_by_name),F.Db(2),F.pc("ngIf",n.permission.create&&n.act.copy),F.Db(1),F.pc("ngIf",!e.bank&&n.permission.edit&&(15==n.user||15==e.update_by&&F.qc(66,Wt).includes(n.user)||15!=e.update_by)),F.Db(1),F.pc("ngIf",!e.bank&&n.permission.delete&&(15==n.user||15==e.update_by&&F.qc(67,Wt).includes(n.user)||15!=e.update_by))}}function wt(e,t){if(1&e&&(F.Xb(0,"tr"),F.Sb(1,"td"),F.Sb(2,"td"),F.Sb(3,"td"),F.Sb(4,"td"),F.Sb(5,"td"),F.Sb(6,"td"),F.Sb(7,"td"),F.Sb(8,"td"),F.Sb(9,"td"),F.Sb(10,"td"),F.Xb(11,"td",31),F.Lc(12,"Total"),F.Wb(),F.Xb(13,"td",32),F.Lc(14),F.kc(15,"number"),F.Wb(),F.Xb(16,"td",32),F.Lc(17),F.kc(18,"number"),F.Wb(),F.Xb(19,"td",31),F.Lc(20),F.Wb(),F.Wb()),2&e){const e=t.$implicit;F.Db(14),F.Mc(F.mc(15,3,e.amount,"1.2-2")),F.Db(3),F.Mc(F.mc(18,6,e.tax,"1.2-2")),F.Db(3),F.Mc(e.code)}}let kt=(()=>{class e{constructor(e){this.formBuilder=e,this.createSoaItem=new F.o,this.editSoaItem=new F.o,this.deleteSoaItem=new F.o,this.filterChange=new F.o,this.form=this.formBuilder.group({shipment:[null],party:[null],price:[null],unit:[null],debit:[null],currency:[null],payment_center:[null],invoice_number:[null],pay_date:["All"],info:[null],type_name:["All"]})}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.filterChange.emit(e)})}resetForm(){this.searchNgForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(P.d))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-content-soa"]],viewQuery:function(e,t){var i;1&e&&F.Sc(vt,!0),2&e&&F.wc(i=F.gc())&&(t.searchNgForm=i.first)},inputs:{data:"data",totalCurrency:"totalCurrency",total:"total",permission:"permission",act:"act",user:"user"},outputs:{createSoaItem:"createSoaItem",editSoaItem:"editSoaItem",deleteSoaItem:"deleteSoaItem",filterChange:"filterChange"},decls:148,vars:21,consts:[[1,"group","mb-12","mt-12"],["name","form",2,"overflow","auto","max-height","410px",3,"formGroup","keydown.enter"],["formDirective","ngForm"],[1,"simple","table-soa"],[1,"sticky-header-1"],[1,"sticky-header-1","text-right"],[1,"sticky-header-1","text-right","rev-color"],[1,"sticky-header-1","text-right","cost-color"],[1,"sticky-header-1","sticky-right-col",2,"z-index","30"],[1,"sticky-header-2"],[1,"my-form-field","w-160"],["matInput","","inputCheck","","type","text","formControlName","shipment",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","party",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","price",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","unit",2,"font-size","12px"],[1,"sticky-header-2","text-right"],[1,"sticky-header-2","text-right","rev-color"],[1,"sticky-header-2","text-right","cost-color"],["matInput","","inputCheck","","type","text","formControlName","currency",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","payment_center",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","debit",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","invoice_number",2,"font-size","12px"],[1,"my-form-field","w-100"],["formControlName","pay_date",2,"font-size","12px"],[2,"font-size","12px",3,"value"],["matInput","","inputCheck","","type","text","formControlName","info",2,"font-size","12px"],["fxLayout","row",1,"sticky-header-2","w-100","sticky-right-col"],[1,"my-form-field","w-60"],["formControlName","type_name",2,"font-size","12px"],["color","warn",1,"cursor-pointer","ml-8",3,"click"],[4,"ngFor","ngForOf"],[1,"text-bold"],[1,"text-right","text-bold"],[3,"ngClass"],[1,"cursor-pointer",3,"routerLink"],[3,"matTooltip"],[1,"text-right"],[1,"text-right","rev-color"],[1,"text-right","cost-color"],[1,"sticky-right-col"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"h2"),F.Lc(2,"SOA"),F.Wb(),F.Xb(3,"form",1,2),F.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),F.Xb(5,"table",3),F.Xb(6,"thead"),F.Xb(7,"tr"),F.Xb(8,"th",4),F.Lc(9,"No"),F.Wb(),F.Xb(10,"th",4),F.Lc(11,"Move"),F.Wb(),F.Xb(12,"th",4),F.Lc(13,"Date"),F.Wb(),F.Xb(14,"th",4),F.Lc(15,"Shipment"),F.Wb(),F.Xb(16,"th",4),F.Lc(17,"Party"),F.Wb(),F.Xb(18,"th",4),F.Lc(19,"Price"),F.Wb(),F.Xb(20,"th",4),F.Lc(21,"Unit"),F.Wb(),F.Xb(22,"th",4),F.Lc(23,"Volume"),F.Wb(),F.Xb(24,"th",5),F.Lc(25,"Amount"),F.Wb(),F.Xb(26,"th",4),F.Lc(27,"Tax"),F.Wb(),F.Xb(28,"th",5),F.Lc(29,"Tax Amount"),F.Wb(),F.Xb(30,"th",5),F.Lc(31,"Total Amount"),F.Wb(),F.Xb(32,"th",5),F.Lc(33,"Total Tax"),F.Wb(),F.Xb(34,"th",6),F.Lc(35,"Revenue"),F.Wb(),F.Xb(36,"th",7),F.Lc(37,"Cost"),F.Wb(),F.Xb(38,"th",4),F.Lc(39,"Currency"),F.Wb(),F.Xb(40,"th",5),F.Lc(41,"Exrate"),F.Wb(),F.Xb(42,"th",4),F.Lc(43,"Payment center"),F.Wb(),F.Xb(44,"th",4),F.Lc(45,"Debit"),F.Wb(),F.Xb(46,"th",4),F.Lc(47,"Invoice number"),F.Wb(),F.Xb(48,"th",4),F.Lc(49,"Issue date"),F.Wb(),F.Xb(50,"th",4),F.Lc(51,"Pay date"),F.Wb(),F.Xb(52,"th",4),F.Lc(53,"Info"),F.Wb(),F.Xb(54,"th",4),F.Lc(55,"Update by"),F.Wb(),F.Xb(56,"th",8),F.Lc(57,"Type "),F.Wb(),F.Wb(),F.Xb(58,"tr"),F.Sb(59,"th",9),F.Sb(60,"th",9),F.Sb(61,"th",9),F.Xb(62,"th",9),F.Xb(63,"mat-form-field",10),F.Sb(64,"input",11),F.Wb(),F.Wb(),F.Xb(65,"th",9),F.Xb(66,"mat-form-field",10),F.Sb(67,"input",12),F.Wb(),F.Wb(),F.Xb(68,"th",9),F.Xb(69,"mat-form-field",10),F.Sb(70,"input",13),F.Wb(),F.Wb(),F.Xb(71,"th",9),F.Xb(72,"mat-form-field",10),F.Sb(73,"input",14),F.Wb(),F.Wb(),F.Sb(74,"th",9),F.Sb(75,"th",15),F.Sb(76,"th",9),F.Sb(77,"th",15),F.Sb(78,"th",15),F.Sb(79,"th",15),F.Sb(80,"th",16),F.Sb(81,"th",17),F.Xb(82,"th",9),F.Xb(83,"mat-form-field",10),F.Sb(84,"input",18),F.Wb(),F.Wb(),F.Sb(85,"th",15),F.Xb(86,"th",9),F.Xb(87,"mat-form-field",10),F.Sb(88,"input",19),F.Wb(),F.Wb(),F.Xb(89,"th",9),F.Xb(90,"mat-form-field",10),F.Sb(91,"input",20),F.Wb(),F.Wb(),F.Xb(92,"th",9),F.Xb(93,"mat-form-field",10),F.Sb(94,"input",21),F.Wb(),F.Wb(),F.Sb(95,"th",9),F.Xb(96,"th",9),F.Xb(97,"mat-form-field",22),F.Xb(98,"mat-select",23),F.Xb(99,"mat-option",24),F.Lc(100,"All"),F.Wb(),F.Xb(101,"mat-option",24),F.Lc(102,"Yes"),F.Wb(),F.Xb(103,"mat-option",24),F.Lc(104,"No"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(105,"th",9),F.Xb(106,"mat-form-field",10),F.Sb(107,"input",25),F.Wb(),F.Wb(),F.Sb(108,"th",9),F.Xb(109,"th",26),F.Xb(110,"mat-form-field",27),F.Xb(111,"mat-select",28),F.Xb(112,"mat-option",24),F.Lc(113,"All"),F.Wb(),F.Xb(114,"mat-option",24),F.Lc(115,"Revenue"),F.Wb(),F.Xb(116,"mat-option",24),F.Lc(117,"Cost"),F.Wb(),F.Wb(),F.Wb(),F.Xb(118,"mat-icon",29),F.fc("click",(function(e){return e.stopPropagation(),t.resetForm()})),F.Lc(119,"delete"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Xb(120,"tbody"),F.Jc(121,Xt,63,68,"tr",30),F.Wb(),F.Xb(122,"tfoot"),F.Jc(123,wt,21,9,"tr",30),F.Xb(124,"tr"),F.Sb(125,"td"),F.Sb(126,"td"),F.Sb(127,"td"),F.Sb(128,"td"),F.Sb(129,"td"),F.Sb(130,"td"),F.Sb(131,"td"),F.Sb(132,"td"),F.Sb(133,"td"),F.Sb(134,"td"),F.Xb(135,"td",31),F.Lc(136,"Exchange"),F.Wb(),F.Xb(137,"td",32),F.Lc(138),F.kc(139,"number"),F.Wb(),F.Xb(140,"td",32),F.Lc(141),F.kc(142,"number"),F.Wb(),F.Xb(143,"td",31),F.Lc(144,"VND"),F.Wb(),F.Xb(145,"td",32),F.Lc(146),F.kc(147,"number"),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(3),F.pc("formGroup",t.form),F.Db(96),F.pc("value","All"),F.Db(2),F.pc("value",1),F.Db(2),F.pc("value",0),F.Db(9),F.pc("value","All"),F.Db(2),F.pc("value","Revenue"),F.Db(2),F.pc("value","Cost"),F.Db(5),F.pc("ngForOf",t.data),F.Db(2),F.pc("ngForOf",t.totalCurrency),F.Db(15),F.Mc(F.mc(139,12,t.total.amount,"1.0-0")),F.Db(3),F.Mc(F.mc(142,15,t.total.tax,"1.0-0")),F.Db(5),F.Mc(F.mc(147,18,t.total.amount+t.total.tax,"1.0-0")))},directives:[P.A,P.q,P.h,b.c,u.b,P.b,P.p,P.g,h.a,w.n,V.d,m.a,J.s,J.q,re.a,n.j,d.a,J.t],pipes:[J.g,J.f],styles:["container-details-content-soa .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-soa .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-soa .group .table-soa{font-size:12px}container-details-content-soa .group .table-soa td,container-details-content-soa .group .table-soa th{padding:8px!important;white-space:nowrap}container-details-content-soa .group .table-soa thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-details-content-soa .group .table-soa thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}container-details-content-soa .group .table-soa tfoot td{font-weight:600}container-details-content-soa .group .table-soa .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-soa .group .table-soa .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-soa .group .table-soa .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#b3e5fc}container-details-content-soa .group .table-soa tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-soa .group .table-soa tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}container-details-content-soa .group .table-soa .rev-color{background-color:#b3e5fc}container-details-content-soa .group .table-soa .cost-color{background-color:#ffcf9c}container-details-content-soa .group .table-soa .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}container-details-content-soa .group .table-soa .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2,data:{animation:N.a}}),e})();function _t(e,t){if(1&e){const e=F.Yb();F.Xb(0,"tr"),F.Xb(1,"td",3),F.Lc(2),F.Wb(),F.Xb(3,"td"),F.Lc(4),F.Wb(),F.Xb(5,"td"),F.Lc(6),F.Wb(),F.Xb(7,"td"),F.Lc(8),F.Wb(),F.Xb(9,"td",4),F.Lc(10),F.Wb(),F.Xb(11,"td",5),F.Xb(12,"a",7),F.fc("click",(function(i){F.Bc(e);const n=t.$implicit;return F.jc().viewLink(n.photo)})),F.Lc(13),F.Wb(),F.Wb(),F.Xb(14,"td"),F.Lc(15),F.Wb(),F.Xb(16,"td",8),F.Xb(17,"mat-icon",9),F.fc("click",(function(i){F.Bc(e);const n=t.$implicit,o=F.jc();return i.stopPropagation(),o.deleteNote.emit(n)})),F.Lc(18,"delete"),F.Wb(),F.Wb(),F.Wb()}if(2&e){const e=t.$implicit,i=t.index;F.Db(2),F.Mc(i+1),F.Db(2),F.Mc(e.shipment_code),F.Db(2),F.Mc(e.move_code),F.Db(2),F.Mc(e.type),F.Db(2),F.Mc(e.content),F.Db(3),F.Mc(e.photo),F.Db(2),F.Mc(e.info)}}let Dt=(()=>{class e{constructor(){this.deleteNote=new F.o,this._unsubscribeAll=new R.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}viewLink(e){/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)&&window.open(e,"_blank")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-content-note"]],inputs:{container:"container",containerNote:"containerNote",permission:"permission"},outputs:{deleteNote:"deleteNote"},decls:24,vars:2,consts:[[1,"group","mb-12","mt-12"],[2,"overflow","auto"],[1,"simple","table-note"],[1,"text-center"],[1,"w-200"],[1,"w-160"],[4,"ngFor","ngForOf"],[3,"click"],[1,"w-60"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"h2"),F.Lc(2),F.Wb(),F.Xb(3,"div",1),F.Xb(4,"table",2),F.Xb(5,"thead"),F.Xb(6,"tr"),F.Xb(7,"th",3),F.Lc(8,"No"),F.Wb(),F.Xb(9,"th"),F.Lc(10,"Shipment"),F.Wb(),F.Xb(11,"th"),F.Lc(12,"Move"),F.Wb(),F.Xb(13,"th"),F.Lc(14,"Type"),F.Wb(),F.Xb(15,"th",4),F.Lc(16,"Content"),F.Wb(),F.Xb(17,"th",5),F.Lc(18,"Photo"),F.Wb(),F.Xb(19,"th"),F.Lc(20,"Info"),F.Wb(),F.Sb(21,"th"),F.Wb(),F.Wb(),F.Xb(22,"tbody"),F.Jc(23,_t,19,7,"tr",6),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(2),F.Nc("Note(",t.containerNote.length,")"),F.Db(21),F.pc("ngForOf",t.containerNote))},directives:[J.s,m.a],styles:["container-details-content-note .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-note .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-note .group .table-note{font-size:12px}container-details-content-note .group .table-note td,container-details-content-note .group .table-note th{padding:8px;font-size:12px;word-break:break-all}container-details-content-note .group .table-note thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}container-details-content-note .group .table-note tfoot td{font-weight:600}container-details-content-note .group .table-note .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-note .group .table-note .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-note .group .table-note .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#b3e5fc}container-details-content-note .group .table-note tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-note .group .table-note tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:N.a}}),e})(),Lt=(()=>{class e{constructor(e,t){this._activatedRoute=e,this.authService=t,this.createMovement=new F.o,this.deleteMovement=new F.o,this.deleteSelMove=new F.o,this.createNote=new F.o,this.deleteNote=new F.o,this.openAddMoveModal=new F.o,this.openEditMoveModal=new F.o,this.openAddNoteModal=new F.o,this.getShipment=new F.o,this.saveSelMove=new F.o,this.addSelRevenue=new F.o,this.addSelCost=new F.o,this.createSoaItem=new F.o,this.editSoaItem=new F.o,this.deleteSoaItem=new F.o,this.filterChange=new F.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(n.a),F.Rb(T.a))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-content"]],inputs:{height:"height",container:"container",containerSoa:"containerSoa",movement:"movement",moveType:"moveType",place:"place",containerNote:"containerNote",permission:"permission",act:"act",user:"user",userId:"userId",totalCurrency:"totalCurrency",total:"total"},outputs:{createMovement:"createMovement",deleteMovement:"deleteMovement",deleteSelMove:"deleteSelMove",createNote:"createNote",deleteNote:"deleteNote",openAddMoveModal:"openAddMoveModal",openEditMoveModal:"openEditMoveModal",openAddNoteModal:"openAddNoteModal",getShipment:"getShipment",saveSelMove:"saveSelMove",addSelRevenue:"addSelRevenue",addSelCost:"addSelCost",createSoaItem:"createSoaItem",editSoaItem:"editSoaItem",deleteSoaItem:"deleteSoaItem",filterChange:"filterChange"},decls:4,vars:15,consts:[["fxLayout","column"],[3,"container","movement","permission","userId","deleteMovement","deleteSelMove","openAddMoveModal","openEditMoveModal","openAddNoteModal","getShipment","saveSelMove","addSelRevenue","addSelCost"],[3,"data","totalCurrency","total","act","user","permission","createSoaItem","editSoaItem","deleteSoaItem","filterChange"],[3,"container","containerNote","permission","deleteNote"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"container-details-content-movement",1),F.fc("deleteMovement",(function(e){return t.deleteMovement.emit(e)}))("deleteSelMove",(function(e){return t.deleteSelMove.emit(e)}))("openAddMoveModal",(function(e){return t.openAddMoveModal.emit(e)}))("openEditMoveModal",(function(e){return t.openEditMoveModal.emit(e)}))("openAddNoteModal",(function(e){return t.openAddNoteModal.emit(e)}))("getShipment",(function(e){return t.getShipment.emit(e)}))("saveSelMove",(function(e){return t.saveSelMove.emit(e)}))("addSelRevenue",(function(e){return t.addSelRevenue.emit(e)}))("addSelCost",(function(e){return t.addSelCost.emit(e)})),F.Wb(),F.Xb(2,"container-details-content-soa",2),F.fc("createSoaItem",(function(e){return t.createSoaItem.emit(e)}))("editSoaItem",(function(e){return t.editSoaItem.emit(e)}))("deleteSoaItem",(function(e){return t.deleteSoaItem.emit(e)}))("filterChange",(function(e){return t.filterChange.emit(e)})),F.Wb(),F.Xb(3,"container-details-content-note",3),F.fc("deleteNote",(function(e){return t.deleteNote.emit(e)})),F.Wb(),F.Wb()),2&e&&(F.Ic("height",t.height,"px"),F.Db(1),F.pc("container",t.container)("movement",t.movement)("permission",t.permission)("userId",t.userId),F.Db(1),F.pc("data",t.containerSoa)("totalCurrency",t.totalCurrency)("total",t.total)("act",t.act)("user",t.user)("permission",t.permission),F.Db(1),F.pc("container",t.container)("containerNote",t.containerNote)("permission",t.permission))},directives:[V.d,gt,kt,Dt],styles:[""],encapsulation:2,data:{animation:N.a}}),e})();const Mt=["formDirective"],It=["sidebarPerfectScroll"],Rt=function(e){return{"mt-32":e}};function At(e,t){if(1&e&&(F.Xb(0,"div",10),F.Xb(1,"h2"),F.Lc(2),F.Wb(),F.Xb(3,"div",11),F.Lc(4),F.Wb(),F.Wb()),2&e){const e=F.jc(),t=e.$implicit;F.pc("ngClass",F.rc(3,Rt,0==e.index)),F.Db(2),F.Mc(t.name),F.Db(2),F.Mc(t.value)}}function Nt(e,t){if(1&e&&(F.Xb(0,"div"),F.Jc(1,At,5,5,"div",9),F.Wb()),2&e){const e=t.$implicit;F.Db(1),F.pc("ngIf",e.value)}}let Pt=(()=>{class e{constructor(e,t,i,n,o){this.formBuilder=e,this.authService=t,this._fuseSidebarService=i,this.commonService=n,this.datePipe=o,this.sidebarPage=new F.o,this.form=[{name:"Container number",value:null},{name:"Type",value:null},{name:"Code",value:null},{name:"Grade",value:null},{name:"Lease",value:null},{name:"On hire",value:null},{name:"On port",value:null},{name:"Off hire",value:null},{name:"Off port",value:null},{name:"Status",value:null},{name:"Info",value:null}]}ngOnInit(){this.form=[{name:"Container number",value:this.container.cont_number},{name:"Type",value:this.container.cont_type_code},{name:"Code",value:this.container.cont_code},{name:"Grade",value:this.container.grade},{name:"Lease",value:this.container.lease_code},{name:"On hire",value:this.datePipe.transform(this.container.on_hire,"MM/dd/yyyy")},{name:"On port",value:this.container.on_port_name},{name:"Off hire",value:this.container.off_hire?this.datePipe.transform(this.container.off_hire,"MM/dd/yyyy"):null},{name:"Off port",value:this.container.off_port_name},{name:"Status",value:this.container.status?"Valid":"Invalid"},{name:"Info",value:this.container.info}]}ngAfterViewInit(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(P.d),F.Rb(T.a),F.Rb(Ke.a),F.Rb(j.a),F.Rb(J.f))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-sidebar-view"]],viewQuery:function(e,t){var i;1&e&&(F.Sc(Mt,!0),F.Sc(It,!0)),2&e&&(F.wc(i=F.gc())&&(t.searchNgForm=i.first),F.wc(i=F.gc())&&(t.sidebarPerfectScroll=i.first))},inputs:{height:"height",container:"container"},outputs:{sidebarPage:"sidebarPage"},decls:10,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","45",1,"ml-8","mr-8"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],["sidebarPerfectScroll",""],[1,"navbar-content"],[4,"ngFor","ngForOf"],["class","group",3,"ngClass",4,"ngIf"],[1,"group",3,"ngClass"],[1,"item"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Xb(1,"div",1),F.Xb(2,"div",2),F.Sb(3,"div",3),F.Xb(4,"button",4),F.fc("click",(function(e){return t.sidebarPage.emit("form")})),F.Lc(5," Edit "),F.Wb(),F.Wb(),F.Wb(),F.Xb(6,"div",5,6),F.Xb(8,"div",7),F.Jc(9,Nt,2,1,"div",8),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(6),F.Ic("height",t.height,"px"),F.Db(3),F.pc("ngForOf",t.form))},directives:[V.d,V.c,V.b,s.b,$.a,J.s,J.t,J.q,re.a],styles:["container-details-sidebar-view{-webkit-user-drag:auto}container-details-sidebar-view .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-sidebar-view .navbar-scroll-container{background:#fff!important}container-details-sidebar-view .navbar-scroll-container .navbar-content{padding-top:0}container-details-sidebar-view .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12)}container-details-sidebar-view .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-details-sidebar-view .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();var qt=i("Ivtv");const Ot=["formDirective"],Ft=["sidebarPerfectScroll"];function Tt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Cont number is required "),F.Wb())}function jt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Invalid container number "),F.Wb())}function zt(e,t){if(1&e&&(F.Xb(0,"mat-option",22),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Mc(e.code)}}function Bt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Cont type is required "),F.Wb())}function Et(e,t){if(1&e&&(F.Xb(0,"mat-option",22),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Mc(e.code)}}function Jt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Code is required "),F.Wb())}function Vt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Grade is required "),F.Wb())}function $t(e,t){if(1&e&&(F.Xb(0,"mat-option",22),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Mc(e.code)}}function Ht(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Lease is required "),F.Wb())}function Ut(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," On Hire is required "),F.Wb())}function Gt(e,t){if(1&e&&(F.Xb(0,"mat-option",22),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.name," ")}}function Yt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," On port is required "),F.Wb())}function Qt(e,t){if(1&e&&(F.Xb(0,"mat-option",22),F.Lc(1),F.Wb()),2&e){const e=t.$implicit;F.pc("value",e.id),F.Db(1),F.Nc(" ",e.name," ")}}function Kt(e,t){1&e&&(F.Xb(0,"mat-error"),F.Lc(1," Status is required "),F.Wb())}let Zt=(()=>{class e{constructor(e,t,i,n){this.formBuilder=e,this.authService=t,this._fuseSidebarService=i,this.commonService=n,this.sidebarPage=new F.o,this.editContainer=new F.o,this.filteredContType=[],this.form=this.formBuilder.group({id:[""],cont_number:["",[P.y.required,qt.a]],cont_type:["",P.y.required],lease_id:["",P.y.required],on_hire:["",P.y.required],on_port:["",P.y.required],off_hire:[null],off_port:[null],status:[0,P.y.required],code:[1,P.y.required],grade:["U",P.y.required],info:[""]}),this.now=new Date}ngOnInit(){this.container.on_hire=new Date(this.container.on_hire),this.container.off_hire&&(this.container.off_hire=new Date(this.container.off_hire)),this.form.patchValue(this.container),this.getContType({value:this.container.lease_id}),this.form.controls.cont_type.setValue(this.container.cont_type),this.filteredSeaport1=this.form.controls.on_port.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"name",this.seaport):[])),this.filteredSeaport2=this.form.controls.off_port.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"name",this.seaport):[]))}setCheck(e){e.check=!e.check}resetForm(){this.searchNgForm.resetForm()}onFormSubmit(e){if(console.log(e),e.valid){if("string"==typeof e.value.on_port)return void this.form.controls.on_port.setValue(null);"string"==typeof e.value.off_port&&this.form.controls.off_port.setValue(null),this.editContainer.emit(e.value)}}getContType(e){this.form.controls.cont_type.setValue(null);let t=this.leaseDetail.filter(t=>t.lease==e.value);this.filteredContType=[],t.map(e=>{this.filteredContType.push({id:e.cont_type,code:e.cont_type_code})})}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(P.d),F.Rb(T.a),F.Rb(Ke.a),F.Rb(j.a))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-sidebar-form"]],viewQuery:function(e,t){var i;1&e&&(F.Sc(Ot,!0),F.Sc(Ft,!0)),2&e&&(F.wc(i=F.gc())&&(t.searchNgForm=i.first),F.wc(i=F.gc())&&(t.sidebarPerfectScroll=i.first))},inputs:{height:"height",container:"container",lease:"lease",leaseDetail:"leaseDetail",packageType:"packageType",seaport:"seaport",containerCode:"containerCode",containerDetailValue:"containerDetailValue"},outputs:{sidebarPage:"sidebarPage",editContainer:"editContainer"},decls:110,vars:36,consts:[["name","form",2,"border-right","1px solid #E6E6E6",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],["sidebarPerfectScroll",""],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],[2,"display","none"],["inputCheck","","type","number","formControlName","id"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","maxlength","11","formControlName","cont_number","required",""],[4,"ngIf"],["fxFlex","100",1,"info-line"],["formControlName","cont_type","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","code","required",""],["formControlName","grade","required",""],[3,"value"],["formControlName","lease_id","required","",3,"selectionChange"],["inputCheck","","matInput","","name","on_hire","formControlName","on_hire","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["on_hire",""],["inputCheck","","type","text","matInput","","formControlName","on_port","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnport","matAutocomplete"],["inputCheck","","matInput","","name","off_hire","formControlName","off_hire",3,"matDatepicker","change"],["off_hire",""],["inputCheck","","type","text","matInput","","formControlName","off_port",3,"matAutocomplete"],["autoOffport","matAutocomplete"],["formControlName","status","required",""],["inputCheck","","matInput","","formControlName","info"]],template:function(e,t){if(1&e&&(F.Xb(0,"form",0,1),F.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),F.Xb(2,"div",2),F.Xb(3,"div",3),F.Xb(4,"button",4),F.Lc(5," Submit "),F.Wb(),F.Xb(6,"button",5),F.fc("click",(function(e){return t.sidebarPage.emit("view")})),F.Lc(7," Cancel "),F.Wb(),F.Wb(),F.Wb(),F.Xb(8,"div",6,7),F.Xb(10,"div",8),F.Xb(11,"div",9),F.Xb(12,"div",10),F.Xb(13,"div",11),F.Sb(14,"input",12),F.Wb(),F.Xb(15,"div",13),F.Xb(16,"mat-form-field",14),F.Xb(17,"mat-label"),F.Lc(18,"Cont number"),F.Wb(),F.Sb(19,"input",15),F.Jc(20,Tt,2,0,"mat-error",16),F.Jc(21,jt,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(22,"div",17),F.Xb(23,"mat-form-field",14),F.Xb(24,"mat-label"),F.Lc(25,"Cont type"),F.Wb(),F.Xb(26,"mat-select",18),F.Jc(27,zt,2,2,"mat-option",19),F.Wb(),F.Jc(28,Bt,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(29,"div",17),F.Xb(30,"mat-form-field",14),F.Xb(31,"mat-label"),F.Lc(32,"Code"),F.Wb(),F.Xb(33,"mat-select",20),F.Jc(34,Et,2,2,"mat-option",19),F.Wb(),F.Jc(35,Jt,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(36,"div",17),F.Xb(37,"mat-form-field",14),F.Xb(38,"mat-label"),F.Lc(39,"Grade"),F.Wb(),F.Xb(40,"mat-select",21),F.Xb(41,"mat-option",22),F.Lc(42,"A"),F.Wb(),F.Xb(43,"mat-option",22),F.Lc(44,"B"),F.Wb(),F.Xb(45,"mat-option",22),F.Lc(46,"C"),F.Wb(),F.Xb(47,"mat-option",22),F.Lc(48,"D"),F.Wb(),F.Xb(49,"mat-option",22),F.Lc(50,"U"),F.Wb(),F.Wb(),F.Jc(51,Vt,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(52,"div",17),F.Xb(53,"mat-form-field",14),F.Xb(54,"mat-label"),F.Lc(55,"Lease"),F.Wb(),F.Xb(56,"mat-select",23),F.fc("selectionChange",(function(e){return t.getContType(e)})),F.Jc(57,$t,2,2,"mat-option",19),F.Wb(),F.Jc(58,Ht,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(59,"div",17),F.Xb(60,"mat-form-field",14),F.Xb(61,"mat-label"),F.Lc(62,"On hire"),F.Wb(),F.Xb(63,"input",24),F.fc("change",(function(e){return t.commonService.setDateStr(e)})),F.Wb(),F.Sb(64,"mat-datepicker-toggle",25),F.Sb(65,"mat-datepicker",null,26),F.Jc(67,Ut,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(68,"div",17),F.Xb(69,"mat-form-field",14),F.Xb(70,"mat-label"),F.Lc(71,"On Port"),F.Wb(),F.Sb(72,"input",27),F.Xb(73,"mat-autocomplete",28,29),F.Jc(75,Gt,2,2,"mat-option",19),F.kc(76,"async"),F.Wb(),F.Jc(77,Yt,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(78,"div",17),F.Xb(79,"mat-form-field",14),F.Xb(80,"mat-label"),F.Lc(81,"Off hire"),F.Wb(),F.Xb(82,"input",30),F.fc("change",(function(e){return t.commonService.setDateStr(e)})),F.Wb(),F.Sb(83,"mat-datepicker-toggle",25),F.Sb(84,"mat-datepicker",null,31),F.Wb(),F.Wb(),F.Xb(86,"div",17),F.Xb(87,"mat-form-field",14),F.Xb(88,"mat-label"),F.Lc(89,"Off Port"),F.Wb(),F.Sb(90,"input",32),F.Xb(91,"mat-autocomplete",28,33),F.Jc(93,Qt,2,2,"mat-option",19),F.kc(94,"async"),F.Wb(),F.Wb(),F.Wb(),F.Xb(95,"div",17),F.Xb(96,"mat-form-field",14),F.Xb(97,"mat-label"),F.Lc(98,"Status"),F.Wb(),F.Xb(99,"mat-select",34),F.Xb(100,"mat-option",22),F.Lc(101,"Invalid"),F.Wb(),F.Xb(102,"mat-option",22),F.Lc(103,"Valid"),F.Wb(),F.Wb(),F.Jc(104,Kt,2,0,"mat-error",16),F.Wb(),F.Wb(),F.Xb(105,"div",17),F.Xb(106,"mat-form-field",14),F.Xb(107,"mat-label"),F.Lc(108,"Info"),F.Wb(),F.Sb(109,"input",35),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e){const e=F.xc(66),i=F.xc(74),n=F.xc(85),o=F.xc(92);F.pc("formGroup",t.form),F.Db(8),F.Ic("height",t.height,"px"),F.Db(12),F.pc("ngIf",t.form.get("cont_number").hasError("required")),F.Db(1),F.pc("ngIf",t.form.get("cont_number").errors&&t.form.get("cont_number").dirty&&t.form.get("cont_number").errors.validConNum),F.Db(6),F.pc("ngForOf",t.filteredContType),F.Db(1),F.pc("ngIf",t.form.get("cont_type").hasError("required")),F.Db(6),F.pc("ngForOf",t.containerCode),F.Db(1),F.pc("ngIf",t.form.get("code").hasError("required")),F.Db(6),F.pc("value","A"),F.Db(2),F.pc("value","B"),F.Db(2),F.pc("value","C"),F.Db(2),F.pc("value","D"),F.Db(2),F.pc("value","U"),F.Db(2),F.pc("ngIf",t.form.get("grade").hasError("required")),F.Db(6),F.pc("ngForOf",t.lease),F.Db(1),F.pc("ngIf",t.form.get("lease_id").hasError("required")),F.Db(5),F.pc("matDatepicker",e),F.Db(1),F.pc("for",e),F.Db(3),F.pc("ngIf",t.form.get("on_hire").hasError("required")),F.Db(5),F.pc("matAutocomplete",i),F.Db(1),F.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),F.Db(2),F.pc("ngForOf",F.lc(76,32,t.filteredSeaport1)),F.Db(2),F.pc("ngIf",t.form.get("on_port").hasError("required")),F.Db(5),F.pc("matDatepicker",n),F.Db(1),F.pc("for",n),F.Db(7),F.pc("matAutocomplete",o),F.Db(1),F.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),F.Db(2),F.pc("ngForOf",F.lc(94,34,t.filteredSeaport2)),F.Db(7),F.pc("value",0),F.Db(2),F.pc("value",1),F.Db(2),F.pc("ngIf",t.form.get("status").hasError("required"))}},directives:[P.A,P.q,P.h,V.d,V.c,s.b,V.b,$.a,P.u,P.b,P.p,P.g,b.c,b.f,u.b,P.k,P.w,J.t,h.a,J.s,w.n,c.b,c.d,b.h,c.a,a.c,a.a,b.b],pipes:[J.b],styles:["container-details-sidebar-form{-webkit-user-drag:auto}container-details-sidebar-form .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-sidebar-form .navbar-scroll-container{background:#fff!important}container-details-sidebar-form .navbar-scroll-container .navbar-content{padding-top:0}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function ei(e,t){if(1&e){const e=F.Yb();F.Xb(0,"container-details-sidebar-view",3),F.fc("sidebarPage",(function(t){return F.Bc(e),F.jc().sidebarPage.emit(t)})),F.Wb()}if(2&e){const e=F.jc();F.pc("height",e.height)("container",e.container)}}function ti(e,t){if(1&e){const e=F.Yb();F.Xb(0,"container-details-sidebar-form",4),F.fc("sidebarPage",(function(t){return F.Bc(e),F.jc().sidebarPage.emit(t)}))("editContainer",(function(t){return F.Bc(e),F.jc().editContainer.emit(t)})),F.Wb()}if(2&e){const e=F.jc();F.pc("height",e.height)("container",e.container)("lease",e.lease)("leaseDetail",e.leaseDetail)("packageType",e.packageType)("seaport",e.seaport)("containerCode",e.containerCode)}}let ii=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.authService=t,this.commonService=i,this.sidebarPage=new F.o,this.editContainer=new F.o,this._unsubscribeAll=new R.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(P.d),F.Rb(T.a),F.Rb(j.a))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details-sidebar"]],inputs:{height:"height",type:"type",container:"container",lease:"lease",leaseDetail:"leaseDetail",packageType:"packageType",seaport:"seaport",containerCode:"containerCode",containerDetailValue:"containerDetailValue"},outputs:{sidebarPage:"sidebarPage",editContainer:"editContainer"},decls:3,vars:3,consts:[[1,"sidebar-content",3,"ngSwitch"],[3,"height","container","sidebarPage",4,"ngSwitchCase"],[3,"height","container","lease","leaseDetail","packageType","seaport","containerCode","sidebarPage","editContainer",4,"ngSwitchCase"],[3,"height","container","sidebarPage"],[3,"height","container","lease","leaseDetail","packageType","seaport","containerCode","sidebarPage","editContainer"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Jc(1,ei,1,2,"container-details-sidebar-view",1),F.Jc(2,ti,1,7,"container-details-sidebar-form",2),F.Wb()),2&e&&(F.pc("ngSwitch",!0),F.Db(1),F.pc("ngSwitchCase","view"==t.type),F.Db(1),F.pc("ngSwitchCase","form"==t.type))},directives:[J.x,J.y,Pt,Zt],styles:[""],encapsulation:2}),e})();function ni(e,t){if(1&e){const e=F.Yb();F.Xb(0,"fuse-sidebar",10),F.Xb(1,"container-details-sidebar",11),F.fc("sidebarPage",(function(t){return F.Bc(e),F.jc().getTypeSidebar(t)}))("editContainer",(function(t){return F.Bc(e),F.jc().editContainer(t)})),F.Wb(),F.Wb()}if(2&e){const e=F.jc();F.Db(1),F.pc("height",e.height)("type",e.type)("container",e.container)("lease",e.lease)("leaseDetail",e.leaseDetail)("packageType",e.packageType)("seaport",e.seaport)("containerCode",e.containerCode)}}let oi=(()=>{class e{constructor(e,t,i,n,o,r,a){this._fuseSidebarService=e,this.containerDetailsService=t,this._matDialog=i,this.router=n,this.route=o,this.authService=r,this.datePipe=a,this.sidebarPanel=!0,this.type="view",this.total={tax:0,amount:0},this.totalCurrency=[],this.height=560,this._unsubscribeAll=new R.a}ngOnInit(){this.id=this.route.snapshot.params.id,this.userId=this.authService.user,this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-18}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-18:this.authService.screenHeight-64-64-18}),this.containerDetailsService.onContainerChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.container=this.containerDetailsService.container,this.movement=this.containerDetailsService.movement,this.containerSoa=this.containerDetailsService.containerSoa,this.filterChange(),this.containerNote=this.containerDetailsService.containerNote}),this.containerDetailsService.onDataChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.lease=e[0],this.leaseDetail=e[1],this.packageType=e[2],this.supplier=e[3],this.seaport=e[4],this.containerCode=e[5],this.moveType=e[6],this.place=e[8],this.country=this.containerDetailsService.country,this.supplierPort=this.containerDetailsService.supplierPort,this.supplierCarrier=this.containerDetailsService.supplierCarrier,this.seaTerminal=this.containerDetailsService.seaTerminal}),this.containerDetailsService.onDataItemChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.price=this.containerDetailsService.price.filter(e=>["VS20","VS40","SC20","SC40","LF20","LF40","LON20","LON40","LC20","LC40","LB20","LB40"].includes(e.code)),this.unit=this.containerDetailsService.unit,this.currency=this.containerDetailsService.currency,this.user=this.containerDetailsService.user,this.dataCustomer=this.containerDetailsService.dataCustomer,this.dataSupplier=this.containerDetailsService.dataSupplier}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this.act=this.authService.act}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.containerDetailsService)}newContainer(e){this.router.navigate(["/apps/container/container-details/form/0"])}getTypeSidebar(e){this.type=e}getContainer(){this.authService.onRequestChanged.next(!0),this.containerDetailsService.getContainerById(this.id).then(e=>{this.authService.onRequestChanged.next(!1),this.type="view"}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}editContainer(e){this.authService.onRequestChanged.next(!0),e.on_hire&&(e.on_hire=this.datePipe.transform(e.on_hire,"yyyy-MM-dd")),e.off_hire&&(e.off_hire=this.datePipe.transform(e.off_hire,"yyyy-MM-dd")),e.update_by=this.authService.user,this.containerDetailsService.updateContainer(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows&&this.getContainer()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error edit")})}createMovement(e){this.containerDetailsService.createMovement(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(this.getContainer(),alert("create success")):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("create error")})}deleteMovement(e){confirm("Do you want to delete this movement?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteMovement(e.container,e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getContainer(),alert("delete success")):(console.error(e),alert("delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")}))}deleteSelMove(e){confirm("Do you want to delete this shipment move?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteSelMove(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.selMove.affectedRows?(this.getContainer(),alert("Delete success")):(console.error(e),alert("Delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete error")}))}createNote(e){this.authService.onRequestChanged.next(!0),this.containerDetailsService.createContainerNote(e).then(e=>{this.authService.onRequestChanged.next(!1),this.getContainer()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("error")})}deleteNote(e){confirm("Do you want to delete this container note?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteContainerNote(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(alert("Delete success"),this.getContainer()):(console.error(e),alert("Error: No container exist."))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete error")}))}openAddMoveModal(e){if(e){let t=[];this.moveType.map(e=>{"LOAD"==e.move_code&&"ONHI"==e.move_code&&"OFHI"==e.move_code||t.push(e)}),this.dialogRef=this._matDialog.open(oe,{panelClass:"container-details-modal-dialog",data:{label:"Add movement",id:this.id,data:e,movement:this.movement,moveType:t,seaport:this.seaport,place:this.supplierPort,container:this.container}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})}else this.dialogRef=this._matDialog.open(Ae,{panelClass:"container-details-movement-modal-dialog",data:{label:"Add movement",movements:this.movement,contId:this.id,moveType:this.moveType,seaport:this.seaport,place:this.place,container:this.container,country:this.country,supplier:this.supplierPort,supplierCarrier:this.supplierCarrier,seaTerminal:this.seaTerminal}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})}openEditMoveModal(e){this.dialogRef=this._matDialog.open(Ae,{panelClass:"container-details-movement-modal-dialog",data:{label:"Edit movement",movements:this.movement,contId:this.id,id:e.id,moveType:this.moveType,seaport:this.seaport,place:this.place,container:this.container,country:this.country,supplier:this.supplierPort,supplierCarrier:this.supplierCarrier,seaTerminal:this.seaTerminal,voyage:this.voyage}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})}openAddNoteModal(e){this.dialogRef=this._matDialog.open(oe,{panelClass:"container-details-modal-dialog",data:{label:"Add note",id:e.id}}),this.dialogRef.afterClosed().subscribe(e=>{e&&(e.insertId>0?this.getContainer():(console.error(e),alert("error")))})}getShipment(e){let t=e.document.trim();/\s/.test(t)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument2(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.length?this.router.navigate(["/apps/import-haiphong/shipment/detail/"+e[0].id+"/overview"]):alert("shipment document not exact")}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}saveSelMove(e){let t=e.document.trim();/\s/.test(t)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument2(t).then(t=>{if(this.authService.onRequestChanged.next(!1),1==t.length){let i=t[0].id;this.containerDetailsService.createSelMove({shipment:t[0],move:e,user:this.authService.user}).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?(this.getContainer(),this.authService.addAction(i,this.authService.actionCode[e.move_code])):(console.error(t),alert(t.error?t.error:"ERROR"))}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)})}else alert("shipment document not exact")}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}addSelRevenue(e){let t=this.movement.filter(t=>t.shipment_id==e.shipment_id);this.openModal("Revenue","create",e,t)}addSelCost(e){let t=this.movement.filter(t=>t.shipment_id==e.shipment_id);this.openModal("Cost","create",e,t)}editSoaItem(e){let t=this.movement.filter(t=>t.shipment_id==e.shipment);this.openModal(e.type_name,"update",e,t)}createSoaItem(e){let t=this.movement.filter(t=>t.shipment_id==e.shipment);this.openModal(e.type_name,"create",e,t)}openModal(e,t,i,n){"Revenue"==e&&(this.partner=this.dataCustomer),"Cost"==e&&(this.partner=this.dataSupplier),this.dialogRef=this._matDialog.open(Qe,{panelClass:"container-details-soa-modal-dialog",data:{label:("create"==t?"Add ":"Edit ")+e,price:this.price,currency:this.currency,partner:this.partner,country:this.country,move:n,selMove:i||null,data:i||null}}),this.dialogRef.componentInstance.updateItem.subscribe(i=>{switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":"create"==t?this.containerDetailsService.createSelRevenue(i).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error update "+e)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}):this.containerDetailsService.updateSelRevenue(i).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error update "+e)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Update "+e+" error")});break;case"Cost":"create"==t?this.containerDetailsService.createSelCost(i).then(t=>{this.authService.onRequestChanged.next(!1),t.affectedRows>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error update "+e)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}):this.containerDetailsService.updateSelCost(i).then(t=>{this.authService.onRequestChanged.next(!1),t.affectedRows>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error update "+e)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Update "+e+" error")})}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})}deleteSoaItem(e){if(confirm("Do you want to delete this item?"))switch(this.authService.onRequestChanged.next(!0),e.type_name){case"Revenue":this.containerDetailsService.deleteSelRevenue(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?this.getContainer():(console.error(e),alert("Error delete item"),this.getContainer())}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete item error")});break;case"Cost":this.containerDetailsService.deleteSelCost(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?this.getContainer():(console.error(e),alert("Error delete item"),this.getContainer())}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete item error")})}}getTotal(e){this.total={tax:0,amount:0},this.totalCurrency=[],e.map(e=>{let t="Revenue"==e.type_name?1:-1,i=this.totalCurrency.find(t=>t.code==e.currency_code);i?(i.amount+=e.volume*e.amount*t,i.tax+=e.volume*e.tax_amount*t):this.totalCurrency.push({code:e.currency_code,amount:e.volume*e.amount*t,tax:e.volume*e.tax_amount*t}),this.total.tax+=e.volume*e.tax_amount*e.ex_rate*t,this.total.amount+=e.volume*e.amount*e.ex_rate*t})}filterChange(e){if(e&&(this.filterContent=e),this.containerSoa.length>0){let e=this.containerSoa.slice();e.map(e=>{e.issue_date&&(e.issue_date=new Date(e.issue_date).setDate(new Date(e.issue_date).getDate())),e.pay_date&&(e.pay_date=new Date(e.pay_date).setDate(new Date(e.pay_date).getDate()))}),this.filterContent&&(this.filterContent.shipment&&(e=e.filter(e=>e.shipment_code.toLowerCase().includes(this.filterContent.shipment.toLowerCase()))),this.filterContent.party&&(e=e.filter(e=>e.partner_short_name.toLowerCase().includes(this.filterContent.party.toLowerCase()))),this.filterContent.price&&(e=e.filter(e=>e.price_code.toLowerCase().includes(this.filterContent.price.toLowerCase()))),this.filterContent.unit&&(e=e.filter(e=>e.unit_code.toLowerCase().includes(this.filterContent.unit.toLowerCase()))),this.filterContent.debit&&(e=e.filter(e=>e.debit&&e.debit.toLowerCase().includes(this.filterContent.debit.toLowerCase()))),this.filterContent.invoice_number&&(e=e.filter(e=>e.inv_number&&e.inv_number.toLowerCase().includes(this.filterContent.invoice_number.toLowerCase()))),"All"!=this.filterContent.pay_date&&(1==this.filterContent.pay_date?e=e.filter(e=>e.pay_date):0==this.filterContent.pay_date&&(e=e.filter(e=>!e.pay_date))),this.filterContent.currency&&(e=e.filter(e=>e.currency_code.toLowerCase().includes(this.filterContent.currency.toLowerCase()))),this.filterContent.payment_center&&(e=e.filter(e=>e.country_name.toLowerCase().includes(this.filterContent.payment_center.toLowerCase()))),this.filterContent.info&&(e=e.filter(e=>e.info.toLowerCase().includes(this.filterContent.info.toLowerCase()))),"All"!=this.filterContent.type_name&&(e=e.filter(e=>e.type_name==this.filterContent.type_name))),this.filterData=e,this.getTotal(this.filterData)}}}return e.\u0275fac=function(t){return new(t||e)(F.Rb(Ke.a),F.Rb(E),F.Rb(g.b),F.Rb(n.g),F.Rb(n.a),F.Rb(T.a),F.Rb(J.f))},e.\u0275cmp=F.Lb({type:e,selectors:[["container-details"]],decls:10,vars:15,consts:[[1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-details-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-details-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar","newContainer"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[3,"height","container","movement","moveType","place","containerSoa","containerNote","total","totalCurrency","act","user","permission","createMovement","deleteMovement","deleteSelMove","createNote","deleteNote","openAddMoveModal","openEditMoveModal","openAddNoteModal","getShipment","saveSelMove","addSelRevenue","addSelCost","createSoaItem","editSoaItem","deleteSoaItem","filterChange"],["name","container-details-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"height","type","container","lease","leaseDetail","packageType","seaport","containerCode","sidebarPage","editContainer"]],template:function(e,t){1&e&&(F.Xb(0,"div",0),F.Jc(1,ni,2,8,"fuse-sidebar",1),F.Xb(2,"fuse-sidebar",2),F.Xb(3,"div",3),F.Sb(4,"container-details-setting",4),F.Wb(),F.Wb(),F.Xb(5,"div",5),F.Xb(6,"container-details-header",6),F.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newContainer",(function(e){return t.newContainer(e)})),F.Wb(),F.Xb(7,"div",7),F.Xb(8,"div",8),F.Xb(9,"container-details-content",9),F.fc("createMovement",(function(e){return t.createMovement(e)}))("deleteMovement",(function(e){return t.deleteMovement(e)}))("deleteSelMove",(function(e){return t.deleteSelMove(e)}))("createNote",(function(e){return t.createNote(e)}))("deleteNote",(function(e){return t.deleteNote(e)}))("openAddMoveModal",(function(e){return t.openAddMoveModal(e)}))("openEditMoveModal",(function(e){return t.openEditMoveModal(e)}))("openAddNoteModal",(function(e){return t.openAddNoteModal(e)}))("getShipment",(function(e){return t.getShipment(e)}))("saveSelMove",(function(e){return t.saveSelMove(e)}))("addSelRevenue",(function(e){return t.addSelRevenue(e)}))("addSelCost",(function(e){return t.addSelCost(e)}))("createSoaItem",(function(e){return t.createSoaItem(e)}))("editSoaItem",(function(e){return t.editSoaItem(e)}))("deleteSoaItem",(function(e){return t.deleteSoaItem(e)}))("filterChange",(function(e){return t.filterChange(e)})),F.Wb(),F.Wb(),F.Wb(),F.Wb(),F.Wb()),2&e&&(F.Db(1),F.pc("ngIf",t.sidebarPanel),F.Db(3),F.pc("displayObject",t.displayObject),F.Db(2),F.pc("sidebarName","container-details-sidebar"),F.Db(3),F.pc("height",t.height)("container",t.container)("movement",t.movement)("moveType",t.moveType)("place",t.place)("containerSoa",t.filterData)("containerNote",t.containerNote)("total",t.total)("totalCurrency",t.totalCurrency)("act",t.act)("user",t.userId)("permission",t.permission))},directives:[Ze.a,J.t,et.a,tt,rt,V.a,Lt,ii],styles:["container-details{width:100%}container-details .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-details .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-details .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-details .center .content-card container-details{border-right:0}container-details .center .content-card container-details,container-details .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-details .center .content-card shipment-details{display:none!important}container-details .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-details .center .content-card.current-shipment-selected .content container-details,container-details .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-details .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:N.a}}),e})();var ri=i("vxfF"),ai=i("cfqv");i.d(t,"ContainerDetailsModule",(function(){return si}));const ci=[{path:":id",component:oi,resolve:{data:E}}];let si=(()=>{class e{}return e.\u0275mod=F.Pb({type:e}),e.\u0275inj=F.Ob({factory:function(t){return new(t||e)},providers:[E],imports:[[n.k.forChild(ci),r.b,o.a,a.b,c.c,s.c,l.b,b.e,m.b,d.b,u.c,p.c,h.b,f.c,g.e,v.b,x.b,y.b,S.d,C.e,W.b,X.b,k.b,_.k,D.c,w.t,L.a,M.a,I.f,ri.g,ai.b]]}),e})()},cfqv:function(e,t,i){"use strict";i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return m}));var n=i("8LU1"),o=i("vxfF"),r=i("fXoL"),a=i("HDdC");class c{constructor(e=50){this._totalWeight=0,this._defaultItemSize=e,this._averageItemSize=e}getAverageItemSize(){return this._averageItemSize}addSample(e,t){const i=this._totalWeight+e.end-e.start;if(i){const e=(t+this._averageItemSize*this._totalWeight)/i;e&&(this._averageItemSize=e,this._totalWeight=i)}}reset(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}class s{constructor(e,t,i=new c){this.scrolledIndexChange=new a.a(()=>{throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")}),this._viewport=null,this._removalFailures=0,this._minBufferPx=e,this._maxBufferPx=t,this._averager=i}attach(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}detach(){this._viewport=null}onContentScrolled(){this._viewport&&this._updateRenderedContentAfterScroll()}onDataLengthChanged(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}onContentRendered(){this._viewport&&this._checkRenderedContentSize()}onRenderedOffsetChanged(){this._viewport&&this._checkRenderedContentOffset()}scrollToIndex(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}updateBufferSize(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}_updateRenderedContentAfterScroll(){const e=this._viewport,t=e.measureScrollOffset();let i=t-this._lastScrollOffset,n=Math.abs(i);const o=e.getRenderedRange();let r=0;if(i<0){const e=o.start*this._averager.getAverageItemSize();r=Math.round((e-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,n/(t+n)))),i-=r,n=Math.abs(i)}const a=this._lastScrollOffset-this._lastRenderedContentOffset,c=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),s=n+this._minBufferPx-(i<0?a:c);if(s>0)if(n>=e.getViewportSize())this._renderContentForCurrentOffset();else{const t=Math.max(0,Math.ceil((s-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),l=(i<0?c:a)-this._minBufferPx+n,b=Math.floor(l/this._averager.getAverageItemSize()/(this._removalFailures+1)),m=Math.min(o.end-o.start,Math.max(0,b)),d=this._expandRange(o,i<0?t:0,i>0?t:0);let u,p;if(i<0?d.end=Math.max(d.start+1,d.end-m):d.start=Math.min(d.end-1,d.start+m),i<0){let t=e.measureRangeSize({start:d.end,end:o.end});t<=l?(u=this._lastRenderedContentOffset+this._lastRenderedContentSize-t,this._removalFailures=0):(d.end=o.end,u=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),p="to-end"}else{const t=e.measureRangeSize({start:o.start,end:d.start});t<=l?(u=this._lastRenderedContentOffset+t,this._removalFailures=0):(d.start=o.start,u=this._lastRenderedContentOffset,this._removalFailures++),p="to-start"}e.setRenderedRange(d),e.setRenderedContentOffset(u+r,p)}else r&&e.setRenderedContentOffset(this._lastRenderedContentOffset+r);this._lastScrollOffset=t}_checkRenderedContentSize(){const e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}_checkRenderedContentOffset(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}_renderContentForCurrentOffset(){const e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;const i=this._averager.getAverageItemSize(),n=Math.min(e.getDataLength()-1,Math.floor(t/i)),o=Math.ceil(this._maxBufferPx/i),r=this._expandRange(this._getVisibleRangeForIndex(n),o,o);e.setRenderedRange(r),e.setRenderedContentOffset(i*r.start)}_getVisibleRangeForIndex(e){const t=this._viewport,i={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},n=i.end-t.getDataLength();return n>0&&(i.start=Math.max(0,i.start-n)),i}_expandRange(e,t,i){const n=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(n.getDataLength(),e.end+i)}}_updateTotalContentSize(e){const t=this._viewport,i=t.getRenderedRange(),n=e+(t.getDataLength()-(i.end-i.start))*this._averager.getAverageItemSize();t.setTotalContentSize(n)}}function l(e){return e._scrollStrategy}let b=(()=>{class e{constructor(){this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new s(this.minBufferPx,this.maxBufferPx)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Object(n.f)(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Object(n.f)(e)}ngOnChanges(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.Cb([{provide:o.h,useFactory:l,deps:[Object(r.V)(()=>e)]}]),r.Bb()]}),e})(),m=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)}}),e})()}}]);