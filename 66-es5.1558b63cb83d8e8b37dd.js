function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{jD4G:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"filterArrayByString",value:function(e,t){var n=this;return""===t?e:(t=t.toLowerCase(),e.filter((function(e){return n.searchInObj(e,t)})))}},{key:"searchInObj",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if("string"==typeof r){if(this.searchInString(r,t))return!0}else if(Array.isArray(r)&&this.searchInArray(r,t))return!0;if("object"==typeof r&&this.searchInObj(r,t))return!0}}},{key:"searchInArray",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;if("string"==typeof c&&this.searchInString(c,t))return!0;if("object"==typeof c&&this.searchInObj(c,t))return!0}}catch(s){r=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"searchInString",value:function(e,t){return e.toLowerCase().includes(t)}},{key:"generateGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}},{key:"toggleInArray",value:function(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}},{key:"handleize",value:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}]),e}()},rPBI:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("fXoL"),a=n("XNiG"),i=n("1G5W"),o=n("3Pt+"),c=n("Kj3r"),s=n("/uUt"),l=n("0JVi"),b=n("ofXK"),u=n("znSr"),p=n("XiUz"),m=n("bTqV"),d=n("NFeN");function f(e,t){if(1&e){var n=r.Yb();r.Xb(0,"button",7),r.fc("click",(function(e){return r.Bc(n),r.jc().expand()})),r.Xb(1,"mat-icon",8),r.Lc(2,"search"),r.Wb(),r.Wb()}if(2&e){var a=r.jc();r.Db(1),r.pc("color",a.searchText&&""!==a.searchText?"accent":"")}}var h=function(e){return{expanded:e}},g=function(){var e=function(){function e(t){_classCallCheck(this,e),this._fuseConfigService=t,this.inputValue=new r.o,this.collapsed=!0,this.searchInput=new o.e(""),this._unsubscribeAll=new a.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._fuseConfigService.config.pipe(Object(i.a)(this._unsubscribeAll)).subscribe((function(t){e.fuseConfig=t})),this.searchInput.valueChanges.pipe(Object(i.a)(this._unsubscribeAll),Object(c.a)(300),Object(s.a)()).subscribe((function(t){e.searchText=t,e.inputValue.emit(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.searchText&&(e.searchText.currentValue||null==e.searchText.currentValue)&&(this.searchText=e.searchText.currentValue,this.searchInput.setValue(this.searchText))}},{key:"collapse",value:function(){this.collapsed=!0}},{key:"expand",value:function(){this.collapsed=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Rb(l.b))},e.\u0275cmp=r.Lb({type:e,selectors:[["filter-search-bar"]],inputs:{searchText:"searchText"},outputs:{inputValue:"inputValue"},features:[r.Bb()],decls:8,vars:5,consts:[[1,"filter-search-bar",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",1,"filter-search-bar-content"],["for","filter-search-bar-input"],["mat-icon-button","","class","filter-search-bar-expander","aria-label","Expand Search Bar",3,"click",4,"ngIf"],["id","filter-search-bar-input","type","text","placeholder","Search","fxFlex","",1,"ml-24",3,"formControl"],["mat-icon-button","","aria-label","Collapse Search Bar",1,"filter-search-bar-collapser",3,"click"],[1,"s-24","secondary-text"],["mat-icon-button","","aria-label","Expand Search Bar",1,"filter-search-bar-expander",3,"click"],[1,"s-24","secondary-text",3,"color"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"label",2),r.Jc(3,f,3,1,"button",3),r.Wb(),r.Sb(4,"input",4),r.Xb(5,"button",5),r.fc("click",(function(e){return t.collapse()})),r.Xb(6,"mat-icon",6),r.Lc(7,"close"),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.pc("ngClass",r.rc(3,h,!t.collapsed)),r.Db(3),r.pc("ngIf",t.collapsed),r.Db(1),r.pc("formControl",t.searchInput))},directives:[b.q,u.a,p.d,p.c,b.t,o.b,p.b,o.p,o.f,m.b,d.a],styles:["[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{height:56px}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:block}"]}),e}()},rTeU:function(e,t,n){"use strict";n.r(t);var r=n("tyNb"),a=n("STbY"),i=n("/1cH"),o=n("iadO"),c=n("bTqV"),s=n("7EHt"),l=n("kmnG"),b=n("NFeN"),u=n("Qu3c"),p=n("qFsG"),m=n("wZkO"),d=n("d3UM"),f=n("QibW"),h=n("0IaG"),g=n("/t3+"),v=n("bSwM"),y=n("M9IT"),x=n("xHqg"),S=n("A5z7"),D=n("bv9b"),_=n("XhcP"),k=n("FKr1"),X=n("1jcm"),W=n("+0xr"),w=n("Dh3D"),C=n("IOBc"),L=n("212X"),N=n("5HBU"),O=n("LPQX"),I=n("fXoL"),T=n("ofXK");function A(e,t){1&e&&I.Sb(0,"router-outlet")}var M,j=((M=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||M)},M.\u0275cmp=I.Lb({type:M,selectors:[["soa-agent"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&I.Jc(0,A,1,0,"router-outlet",0),2&e&&I.pc("ngIf",!0)},directives:[T.t,r.l],styles:[""]}),M),V=n("XNiG"),P=n("1G5W"),F=n("3Pt+"),R=n("JX91"),E=n("lJxs"),J=n("qXBG"),B=n("0Zc1"),$=n("XiUz"),q=n("EwFO");function z(e,t){if(1&e&&(I.Xb(0,"mat-option",31),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n),I.Db(1),I.Nc(" ",n.name," ")}}function U(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Price is required "),I.Wb())}function Y(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Amount is required "),I.Wb())}function H(e,t){if(1&e&&(I.Xb(0,"mat-option",32),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n),I.Db(1),I.Nc(" ",n.code," ")}}function G(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Currency is required "),I.Wb())}function Q(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",33),I.fc("click",(function(e){I.Bc(n);var t=I.jc().index;return I.jc().removePrice(t)})),I.Xb(1,"mat-icon"),I.Lc(2,"delete"),I.Wb(),I.Wb()}}function K(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",34),I.fc("click",(function(e){return I.Bc(n),I.jc(2).addPrice()})),I.Xb(1,"mat-icon"),I.Lc(2,"add"),I.Wb(),I.Wb()}}function Z(e,t){if(1&e&&(I.Xb(0,"div",16),I.Xb(1,"mat-form-field",17),I.Xb(2,"mat-label"),I.Lc(3,"Price"),I.Wb(),I.Sb(4,"input",18),I.Xb(5,"mat-autocomplete",19,20),I.Jc(7,z,2,2,"mat-option",21),I.kc(8,"async"),I.Wb(),I.Jc(9,U,2,0,"mat-error",22),I.Wb(),I.Xb(10,"mat-form-field",23),I.Xb(11,"mat-label"),I.Lc(12,"Unit"),I.Wb(),I.Sb(13,"input",24),I.Wb(),I.Xb(14,"mat-form-field",23),I.Xb(15,"mat-label"),I.Lc(16,"Amount"),I.Wb(),I.Sb(17,"input",25),I.Jc(18,Y,2,0,"mat-error",22),I.Wb(),I.Xb(19,"mat-form-field",23),I.Xb(20,"mat-label"),I.Lc(21,"Currency"),I.Wb(),I.Xb(22,"mat-select",26),I.Jc(23,H,2,2,"mat-option",27),I.Wb(),I.Jc(24,G,2,0,"mat-error",22),I.Wb(),I.Xb(25,"div",28),I.Jc(26,Q,3,0,"button",29),I.Jc(27,K,3,0,"button",30),I.Wb(),I.Wb()),2&e){var n=t.index,r=I.xc(6),a=I.jc();I.pc("formGroupName",n),I.Db(4),I.pc("matAutocomplete",r),I.Db(1),I.pc("displayWith",a.commonService.displayObjFn.bind(a,"code")),I.Db(2),I.pc("ngForOf",I.lc(8,12,a.filteredPrice[n])),I.Db(2),I.pc("ngIf",a.form.controls.price.controls[n].get("price").hasError("required")),I.Db(4),I.pc("value",null==a.form.value.price[n].price?null:a.form.value.price[n].price.unit_code)("readonly",!0),I.Db(5),I.pc("ngIf",a.form.controls.price.controls[n].get("amount").hasError("required")),I.Db(5),I.pc("ngForOf",a.currency),I.Db(1),I.pc("ngIf",a.form.controls.price.controls[n].get("currency").hasError("required")),I.Db(2),I.pc("ngIf",n>0),I.Db(1),I.pc("ngIf",a.form.controls.price.value.length==n+1)}}var ee,te,ne,re,ae=((ee=function(){function e(t,n,r,a,i,o,c){var s=this;_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=r,this.authService=a,this._formBuilder=i,this.datePipe=o,this.commonService=c,this.filteredPrice=[],this.form=this._formBuilder.group({place:[null],price:this._formBuilder.array([this._formBuilder.group({price:[null,F.y.required],amount:[null,F.y.required],currency:[null,F.y.required]})])}),this.label=r.label,this.price=r.price,this.currency=r.currency,this.priceControl(0),r.data&&r.data.price.length>0&&(this.data=JSON.parse(JSON.stringify(r.data.price)),this.data.map((function(e,t){t>0&&s.addPrice(),e.price=s.price.find((function(t){return t.id==e.price.id})),e.currency=s.currency.find((function(t){return t.id==e.currency.id}))})),this.form.patchValue({price:this.data})),this.form.controls.place.setValue(r.name)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.valueChanges.subscribe((function(t){e.errorMessage=""}))}},{key:"onFormSubmit",value:function(e){e.valid&&this.matDialogRef.close(e.value)}},{key:"addPrice",value:function(){this.priceAdd.push(this._formBuilder.group({price:[null,F.y.required],amount:[null,F.y.required],currency:[null,F.y.required]})),this.priceControl(this.priceAdd.length-1)}},{key:"removePrice",value:function(e){this.priceAdd.removeAt(e)}},{key:"priceControl",value:function(e){var t=this;this.filteredPrice[e]=this.priceAdd.at(e).get("price").valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.price_name:null})),Object(E.a)((function(e){return e?t.commonService.filterData(e,"price_name",t.price):[]})))}},{key:"priceAdd",get:function(){return this.form.get("price")}}]),e}()).\u0275fac=function(e){return new(e||ee)(I.Rb(r.g),I.Rb(h.f),I.Rb(h.a),I.Rb(J.a),I.Rb(F.d),I.Rb(T.f),I.Rb(B.a))},ee.\u0275cmp=I.Lb({type:ee,selectors:[["soa-agent-storage-modal-dialog"]],decls:23,vars:4,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","soa-agent-storage-modal-modal","fxLayout","column",1,"p-16","pb-0","m-0"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","place"],["formArrayName","price","fxLayout","column"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","30",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","",3,"value","readonly"],["inputCheck","","matInput","","formControlName","amount","type","number"],["formControlName","currency","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","10",1,"pr-8"],["mat-mini-fab","","color","warn","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent","type","button",3,"click",4,"ngIf"],[2,"font-size","12px","overflow","visible","display","block",3,"value"],[3,"value"],["mat-mini-fab","","color","warn","type","button",3,"click"],["mat-mini-fab","","color","accent","type","button",3,"click"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"mat-toolbar",1),I.Xb(2,"mat-toolbar-row",2),I.Xb(3,"span",3),I.Lc(4),I.Wb(),I.Xb(5,"button",4),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Xb(6,"mat-icon"),I.Lc(7,"close"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",5),I.Xb(9,"div"),I.Xb(10,"form",6),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),I.Xb(11,"div",7),I.Sb(12,"input",8),I.Wb(),I.Xb(13,"div",9),I.Jc(14,Z,28,14,"div",10),I.Wb(),I.Xb(15,"div",11),I.Xb(16,"div",12),I.Lc(17),I.Wb(),I.Wb(),I.Xb(18,"div",13),I.Xb(19,"button",14),I.Lc(20,"Submit"),I.Wb(),I.Xb(21,"button",15),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Lc(22,"Cancel"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(4),I.Mc(t.label),I.Db(6),I.pc("formGroup",t.form),I.Db(4),I.pc("ngForOf",t.priceAdd.controls),I.Db(3),I.Mc(t.errorMessage))},directives:[g.a,g.c,$.b,$.d,$.c,c.b,b.a,h.d,q.a,F.A,F.q,F.h,F.b,F.p,F.g,F.c,T.s,F.i,l.c,l.f,p.b,i.c,F.w,i.a,T.t,F.u,d.a,k.n,l.b],pipes:[T.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.soa-agent-storage-modal-dialog{width:100%}}@media screen and (min-width:960px){.soa-agent-storage-modal-dialog{width:1080px}}.soa-agent-storage-modal-dialog .mat-dialog-container{padding:0}.soa-agent-storage-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq{-webkit-box-flex:1;flex:1 0 auto}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq .item{padding:8px}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq .item .title{font-weight:700;font-size:14px;margin-bottom:8px}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq .item .info{font-size:12px;line-height:1.5}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper{margin:0;padding:0}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-header{padding:8px 20px;border-bottom:1px solid}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-header .example-viewer-title{font-weight:700}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content{background:#263238;color:#fff}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab{position:relative}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab .example-source-copy{position:absolute;top:0;right:8px}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab:hover .example-source-copy{display:inline-block}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab .example-source{padding:0;margin:0;min-height:150px;border-bottom:1px solid}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab .example-source>pre{width:100%}"],encapsulation:2}),ee),ie=n("Frtq"),oe=n("HX77"),ce=n("2Vo4"),se=n("jD4G"),le=n("tk/3"),be=n("6K47"),ue=n("Iab2"),pe=((ne=function(){function e(t,n,r){_classCallCheck(this,e),this._httpClient=t,this.authService=n,this.datePipe=r,this.defaultSearch={formSearch:{pay_party:null,issue_party:null,customer:null,agent:113,voyage:null,payment_center:6,debit:null,date_from:"11/01/2022",date_to:"11/30/2022"}},this.total={revenue:0,cost:0},this.sptVoyage=[],this.sptPrice=[],this.sptVoyageImp=[],this.sptPriceImp=[],this.onDataChanged=new ce.a([]),this.onTypeChanged=new ce.a("form"),this.onSoaChanged=new ce.a([]),this.onDataItemChanged=new ce.a([]),this.onVesselChanged=new ce.a([]),this.onVesselImpChanged=new ce.a([]),this.onUpdateAddInfoChanged=new ce.a([]),this.onSearchTextChanged=new V.a}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.authService.routerData=e,this.authService.back&&(this.authService.back=!1),(!this.currenSearch||this.currenSearch&&!this.currenSearch.formSearch)&&(this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch))),new Promise((function(e,n){Promise.all([t.getData(),t.getItemData()]).then((function(n){_slicedToArray(n,1)[0],t.onSearchTextChanged.subscribe((function(e){t.searchText=e;var n=t.shipment.slice();t.searchText&&""!==t.searchText&&(n=se.a.filterArrayByString(n,t.searchText));var r=t.buildVessel(n);t.shipmentVessel=r[0],t.voyage=r[1],t.arrType=r[2],t.dataBill=r[3],t.totalExp=r[4],t.onVesselChanged.next([t.shipmentVessel,t.voyage,t.arrType,t.sptPrice,t.dataBill,t.totalExp]);var a=t.shipmentImp.slice();t.searchText&&""!==t.searchText&&(a=se.a.filterArrayByString(a,t.searchText));var i=t.buildVessel(a);t.shipmentVesselImp=i[0],t.voyageImp=i[1],t.arrTypeImp=i[2],t.dataBillImp=i[3],t.totalImp=i[4],t.onVesselImpChanged.next([t.shipmentVesselImp,t.voyageImp,t.arrTypeImp,t.sptPriceImp,t.dataBillImp,t.totalImp])})),e()}),n)}))}},{key:"getData",value:function(){var e=this,t={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/sel/shipment/data",t).subscribe((function(t){e.dataCustomer=t[0],e.dataSupplier=t[1],e.users=t[3],e.onDataChanged.next(t),n(t)}),r)}))}},{key:"getItemData",value:function(){var e=this,t={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/sel/book/book",t).subscribe((function(t){e.agent=t.agent,e.commodity=t.commodity,e.packageType=t.packageType,e.price=t.price,e.currency=t.currency,e.country=t.country,e.depot=t.depot,e.onDataItemChanged.next(t),n(t)}),r)}))}},{key:"getSelShipmentSoaAgent",value:function(e){var t=this;this.selectAgent=this.agent.find((function(t){return t.id==e.agent})),this.dateFrom=e.date_from?e.date_from:null,this.dateTo=e.date_to?e.date_to:null;var n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.post(t.authService.apiUrl+"/sel/shipment/soa-agent",e,n).subscribe((function(e){console.log(e),t.shipment=e.export.shipment,t.shipmentAddInfo=e.export.shipmentAddInfo,t.sptPrice=e.export.price,t.sptVoyage=e.export.voyage;var n=t.shipment.slice();t.searchText&&""!==t.searchText&&(n=se.a.filterArrayByString(n,t.searchText));var a=t.buildVessel(n);t.shipmentVessel=a[0],t.voyage=a[1],t.arrType=a[2],t.dataBill=a[3],t.totalExp=a[4],t.onVesselChanged.next([t.shipmentVessel,t.voyage,t.arrType,t.sptPrice,t.dataBill,t.totalExp]),t.shipmentImp=e.import.shipment,t.shipmentImpAddInfo=e.import.shipmentAddInfo,t.sptPriceImp=e.import.price,t.sptVoyageImp=e.import.voyage;var i=t.shipmentImp.slice();t.searchText&&""!==t.searchText&&(i=se.a.filterArrayByString(i,t.searchText));var o=t.buildVessel(i);t.shipmentVesselImp=o[0],t.voyageImp=o[1],t.arrTypeImp=o[2],t.dataBillImp=o[3],t.totalImp=o[4],t.onVesselImpChanged.next([t.shipmentVesselImp,t.voyageImp,t.arrTypeImp,t.sptPriceImp,t.dataBillImp,t.totalImp]),r(e)}),a)}))}},{key:"createSelRevenue",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.post(t.authService.apiUrl+"/sel/revenue",e,n).subscribe((function(e){r(e)}),a)}))}},{key:"createSelCost",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.post(t.authService.apiUrl+"/sel/cost",e,n).subscribe((function(e){r(e)}),a)}))}},{key:"updateSelCost",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.put(t.authService.apiUrl+"/sel/cost",e,n).subscribe((function(e){r(e)}),a)}))}},{key:"updateSelRevenue",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.put(t.authService.apiUrl+"/sel/revenue",e,n).subscribe((function(e){r(e)}),a)}))}},{key:"updateMultiShipmentItem",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.put(t.authService.apiUrl+"/sel/shipment/multi-item",e,n).subscribe((function(e){r(e)}),a)}))}},{key:"buildVessel",value:function(e){var t=this,n=[],r=[],a={},i=[],o={revenueVN:{ALL:0},revenueNN:{ALL:0},costVN:{ALL:0},costNN:{ALL:0},revenueBalance:{},costBalance:{},currency:[]};function c(e,t,n,r){e.currency.includes(n)||e.currency.push(n),e[t][n]||(e[t][n]=0),e[t][n]+=r}return this.selectAgent&&113!=this.selectAgent.id&&(o.costNN[this.selectAgent.id]=0),e.map((function(e){var s={};s.vessel_full_name=e.vessel_full_name,s.pol_name=e.pol_name,s.pod_name=e.pod_name,s.depart_time=e.depart_time,s.arrive_time=e.arrive_time,s.date=e.date,s.id=e.id,s.code=e.code,s.bill=e.bill,s.customer_name=e.customer_name,s.customer_short_name=e.customer_short_name,s.agent_name=e.agent_name,s.agent_short_name=e.agent_short_name,s.supplier_name=e.supplier_name,s.supplier_short_name=e.supplier_short_name,s.process=e.process,s.profit=e.profit,s.currency=e.currency,s.profitCurrency=e.profitCurrency,s.revenueVN20=e.revenueVN20,s.revenueVN40=e.revenueVN40,s.revenueVNSpt=e.revenueVNSpt,s.revenueNN20=e.revenueNN20,s.revenueNN40=e.revenueNN40,s.revenueNNSpt=e.revenueNNSpt,s.costVN20=e.costVN20,s.costVN40=e.costVN40,s.costVNSpt=e.costVNSpt,s.costNN20=e.costNN20,s.costNN40=e.costNN40,s.costNNSpt=e.costNNSpt,s.voyage=e.voyage,s.volume=[];var l=e.date+"-"+e.vessel_name+"-"+e.voyage;s.key=l,a[l]||(a[l]={voyage_name:e.voyage_name,vessel_full_name:e.vessel_full_name,supplier_short_name:e.supplier_short_name,supplier_full_name:e.supplier_full_name,pol_name:e.pol_name,pod_name:e.pod_name,load_country:e.load_country,discharge_country:e.discharge_country,depart_time:e.depart_time,arrive_time:e.arrive_time,closing_time:e.closing_time,shipment:[]},r.push({key:l,vessel:e.vessel_name,voyage_id:e.voyage,voyage_name:e.voyage_name,depart_time:e.depart_time})),e.volume.map((function(t){e[t.cont_type_code]?e[t.cont_type_code]+=t.volume:e[t.cont_type_code]=t.volume,s[t.cont_type_code]?s[t.cont_type_code]+=t.volume:(s[t.cont_type_code]=t.volume,s.volume.push(t.cont_type_code)),a[l][t.cont_type_code]?a[l][t.cont_type_code]+=t.volume:a[l][t.cont_type_code]=t.volume,n.includes(t.cont_type_code)||n.push(t.cont_type_code),o[t.cont_type_code]||(o[t.cont_type_code]=0),o[t.cont_type_code]+=t.volume})),s.revenueVNSpt.length+s.revenueNNSpt.length+s.costVNSpt.length+s.costNNSpt.length>0&&s.volume.push("Spt");var b={rev_of20:null,rev_lthc20:null,rev_dthc20:null,cost_of20:null,rev_of40:null,rev_lthc40:null,rev_dthc40:null,cost_of40:null};e.revenueVN20.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"revenueVN",e.currency_code,t),o.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"revenueNN",e.currency_code,t),o.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF20"==e.price_code&&(b.rev_of20=e),"LTHC20"==e.price_code&&(b.rev_lthc20=e),"DTHC20"==e.price_code&&(b.rev_dthc20=e),c(o,"revenueBalance",e.currency_code,t)})),e.revenueVN40.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"revenueVN",e.currency_code,t),o.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"revenueNN",e.currency_code,t),o.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF40"==e.price_code&&(b.rev_of40=e),"LTHC40"==e.price_code&&(b.rev_lthc40=e),"DTHC40"==e.price_code&&(b.rev_dthc40=e),c(o,"revenueBalance",e.currency_code,t)})),e.revenueVNSpt.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"revenueVN",e.currency_code,t),o.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"revenueNN",e.currency_code,t),o.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),c(o,"revenueBalance",e.currency_code,t)})),e.revenueNN20.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"revenueVN",e.currency_code,t),o.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"revenueNN",e.currency_code,t),o.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF20"==e.price_code&&(b.rev_of20=e),"LTHC20"==e.price_code&&(b.rev_lthc20=e),"DTHC20"==e.price_code&&(b.rev_dthc20=e),c(o,"revenueBalance",e.currency_code,t)})),e.revenueNN40.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"revenueVN",e.currency_code,t),o.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"revenueNN",e.currency_code,t),o.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF40"==e.price_code&&(b.rev_of40=e),"LTHC40"==e.price_code&&(b.rev_lthc40=e),"DTHC40"==e.price_code&&(b.rev_dthc40=e),c(o,"revenueBalance",e.currency_code,t)})),e.revenueNNSpt.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"revenueVN",e.currency_code,t),o.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"revenueNN",e.currency_code,t),o.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),c(o,"revenueBalance",e.currency_code,t)})),e.costVN20.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"costVN",e.currency_code,t),o.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"costNN",e.currency_code,t),o.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF20"==e.price_code&&(b.cost_of20=e),c(o,"costBalance",e.currency_code,t)})),e.costVN40.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"costVN",e.currency_code,t),o.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"costNN",e.currency_code,t),o.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF40"==e.price_code&&(b.cost_of40=e),c(o,"costBalance",e.currency_code,t)})),e.costVNSpt.map((function(e){var t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"costVN",e.currency_code,t),o.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"costNN",e.currency_code,t),o.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),c(o,"costBalance",e.currency_code,t)})),e.costNN20.map((function(e){var n=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"costVN",e.currency_code,n),o.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"costNN",e.currency_code,n),o.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate,"USD"==e.currency_code&&113!=t.selectAgent.id&&[89,114,15,107,16,122,9,116,13,117].includes(e.price)&&(o.costNN[t.selectAgent.id]+=e.volume*(e.amount+e.tax_amount))),"OF20"==e.price_code&&(b.cost_of20=e),c(o,"costBalance",e.currency_code,n)})),e.costNN40.map((function(e){var n=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"costVN",e.currency_code,n),o.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"costNN",e.currency_code,n),o.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate,"USD"==e.currency_code&&113!=t.selectAgent.id&&[89,114,15,107,16,122,9,116,13,117].includes(e.price)&&(o.costNN[t.selectAgent.id]+=e.volume*(e.amount+e.tax_amount))),"OF40"==e.price_code&&(b.cost_of40=e),c(o,"costBalance",e.currency_code,n)})),e.costNNSpt.map((function(e){var n=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(c(o,"costVN",e.currency_code,n),o.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(c(o,"costNN",e.currency_code,n),o.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate,"USD"==e.currency_code&&113!=t.selectAgent.id&&[89,114,15,107,16,122,9,116,13,117].includes(e.price)&&(o.costNN[t.selectAgent.id]+=e.volume*(e.amount+e.tax_amount))),"OF40"==e.price_code&&(b.cost_of40=e),c(o,"costBalance",e.currency_code,n)}));var u=[];s.volume.map((function(e){e.includes("20")?(b.rev_of20?b.rev_of20.volume!=s[e]&&u.push("sai volume "+"rev_of20".toUpperCase()):u.push("thieu "+"rev_of20".toUpperCase()),b.rev_lthc20?b.rev_lthc20.volume!=s[e]&&u.push("sai volume "+"rev_lthc20".toUpperCase()):u.push("thieu "+"rev_lthc20".toUpperCase()),b.rev_dthc20?b.rev_dthc20.volume!=s[e]&&u.push("sai volume "+"rev_dthc20".toUpperCase()):u.push("thieu "+"rev_dthc20".toUpperCase()),b.cost_of20?b.cost_of20.volume!=s[e]&&u.push("sai volume "+"cost_of20".toUpperCase()):u.push("thieu "+"cost_of20".toUpperCase())):e.includes("40")&&(b.rev_of40?b.rev_of40.volume!=s[e]&&u.push("sai volume "+"rev_of40".toUpperCase()):u.push("thieu "+"rev_of40".toUpperCase()),b.rev_lthc40?b.rev_lthc40.volume!=s[e]&&u.push("sai volume "+"rev_lthc40".toUpperCase()):u.push("thieu "+"rev_lthc40".toUpperCase()),b.rev_dthc40?b.rev_dthc40.volume!=s[e]&&u.push("sai volume "+"rev_dthc40".toUpperCase()):u.push("thieu "+"rev_dthc40".toUpperCase()),b.cost_of40?b.cost_of40.volume!=s[e]&&u.push("sai volume "+"cost_of40".toUpperCase()):u.push("thieu "+"cost_of40".toUpperCase()))}));var p=0==u.length?null:u.join(", ");s.error=p,a[l].shipment.push(e),i.push(s)})),o.currency.map((function(e){c(o,"revenueBalance",e,0),c(o,"costBalance",e,0)})),n.sort(),r.sort((function(e,t){return e.key<t.key?1:t.key<e.key?-1:0})),i.sort((function(e,t){var n=e.date,r=t.date,a=e.vessel_full_name,i=t.vessel_full_name,o=e.bill,c=t.bill;return n>r?1:n<r?-1:a>i?1:a<i?-1:o>c?1:o<c?-1:0})),i.map((function(e){e.volume.sort()})),o.currency.sort(),[a,r,n,i,o]}},{key:"deleteSelRevenue",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.delete(t.authService.apiUrl+"/sel/revenue/"+e,n).subscribe((function(e){r(e)}),a)}))}},{key:"deleteSelCost",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.delete(t.authService.apiUrl+"/sel/cost/"+e,n).subscribe((function(e){r(e)}),a)}))}},{key:"buildExcelData",value:function(){var e=this,t=[],n=[];this.dataBill.map((function(r,a){r.volume.map((function(i,o){var c=[],s=r.bill+(i.includes("20")?"-20'":i.includes("40")?"-40'":"Spt")+"-"+(r[i]?r[i]:"");c.push(s),0==a&&0==o&&n.push({header:"KEY",width:24}),c.push(r.vessel_full_name),0==a&&0==o&&n.push({header:"VOY NO.",width:24}),c.push(r.bill),0==a&&0==o&&n.push({header:"BILL",width:18}),e.arrType.map((function(e){c.push(i==e?r[e]:null),0==a&&0==o&&n.push({header:e,width:6})}));var l=0,b=i.includes("20")?"20":i.includes("40")?"40":i,u=r["revenueNN"+b].find((function(e){return e.price_code=="OF"+b}));u?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"PP OF",width:12}),(u=r["revenueVN"+b].find((function(e){return e.price_code=="OF"+b})))?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"CL OF",width:12}),(u=r["revenueNN"+b].find((function(e){return e.price_code=="RR"+b})))?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"RR",width:12}),(u=r["revenueNN"+b].find((function(e){return e.price_code=="BAF"+b})))?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"BAF",width:12}),(u=r["revenueNN"+b].find((function(e){return e.price_code=="ECRS"+b})))?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"ECRS",width:12}),(u=r["revenueNN"+b].find((function(e){return e.price_code=="LSS"+b})))?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"LSS",width:12}),(u=r["revenueNN"+b].find((function(e){return e.price_code=="DG"+b})))?(l+=u.amount*u.volume,c.push(u.amount*u.volume)):c.push(null),0==a&&0==o&&n.push({header:"DG",width:12});var p=0;"Spt"==b?(r["revenueNN"+b].map((function(e){"USD"==e.currency_code&&(p+=e.amount*e.volume)})),c.push(p)):c.push(null),0==a&&0==o&&n.push({header:"OTHER",width:12}),c.push(l+p),0==a&&0==o&&n.push({header:"TOTAL REV",width:12}),u=r["costNN"+b].find((function(e){return"ADF20"==e.price_code})),c.push(u?u.amount*u.volume:null),0==a&&0==o&&n.push({header:"COM 20",width:12}),u=r["costNN"+b].find((function(e){return"ADF40"==e.price_code})),c.push(u?u.amount*u.volume:null),0==a&&0==o&&n.push({header:"COM 40",width:12});var m=0,d=0;r["costNN"+b].map((function(e){"USD"==e.currency_code&&(m+=e.amount*e.volume),"SGD"==e.currency_code&&(d+=e.amount*e.volume)})),c.push(m),0==a&&0==o&&n.push({header:"COST USD",width:12}),c.push(d),0==a&&0==o&&n.push({header:"COST SGD",width:12}),t.push(c)}))}));var r=[],a=[];this.dataBillImp.map((function(t,n){var i=[];i.push(t.vessel_full_name),0==n&&a.push({header:"VOY NO.",width:24}),i.push(t.supplier_short_name),0==n&&a.push({header:"OWNER",width:24}),i.push(t.bill),0==n&&a.push({header:"BILL",width:18}),e.arrTypeImp.map((function(e){"Spt"!=e&&i.push(t[e]?t[e]:null),0==n&&a.push({header:e,width:6})}));var o={ppof:0,clof:0,revUSD:0,revSGD:0,com20:0,com40:0,costUSD:0,costSGD:0};t.volume.map((function(e,n){var r=e.includes("20")?"20":e.includes("40")?"40":e,a=t["revenueVN"+r].find((function(e){return e.price_code=="OF"+r}));a&&(o.ppof+=a.amount*a.volume),(a=t["revenueNN"+r].find((function(e){return e.price_code=="OF"+r})))&&(o.clof+=a.amount*a.volume),t["revenueNN"+r].map((function(e){"USD"==e.currency_code&&(o.revUSD+=e.amount*e.volume),"SGD"==e.currency_code&&(o.revSGD+=e.amount*e.volume)})),(a=t["costNN"+r].find((function(e){return"ADF20"==e.price_code})))&&(o.com20+=a.amount*a.volume),(a=t["costNN"+r].find((function(e){return"ADF40"==e.price_code})))&&(o.com40+=a.amount*a.volume),t["costNN"+r].map((function(e){"USD"==e.currency_code&&(o.costUSD+=e.amount*e.volume),"SGD"==e.currency_code&&(o.costSGD+=e.amount*e.volume)}))})),i.push(o.ppof),0==n&&a.push({header:"PP OF",width:12}),i.push(o.clof),0==n&&a.push({header:"CL OF",width:12}),i.push(o.revUSD),0==n&&a.push({header:"REV USD",width:12}),i.push(o.revSGD),0==n&&a.push({header:"REV SGD",width:12}),i.push(o.com20),0==n&&a.push({header:"COM 20",width:12}),i.push(o.com40),0==n&&a.push({header:"COM 40",width:12}),i.push(o.costUSD),0==n&&a.push({header:"COST USD",width:12}),i.push(o.costSGD),0==n&&a.push({header:"COST SGD",width:12}),r.push(i)})),this.exportExcel(t,n,r,a)}},{key:"exportExcel",value:function(e,t,n,r){var a=this,i=new be.Workbook,o=i.addWorksheet("exp");o.addRow([" "]),o.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1};var c=this.currenSearch.formSearch.date_from;o.addRow(["EXPORT "+this.datePipe.transform(new Date(c),"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),o.getRow(2).font={size:18,bold:!0,italic:!1},o.addRow([]);var s=t.map((function(e){return e.header}));o.addRow(s).eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),e.map((function(e){for(var t=o.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!1},t.getCell(r).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}));for(var l=t.map((function(e){return e.width})),b=0;b<l.length;b++)o.getColumn(b+1).width=l[b];var u=i.addWorksheet("imp");u.addRow([" "]),u.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},u.addRow(["IMPORT "+this.datePipe.transform(new Date(c),"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),u.getRow(2).font={size:18,bold:!0,italic:!1},u.addRow([]);var p=r.map((function(e){return e.header}));u.addRow(p).eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),n.map((function(e){for(var t=u.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!1},t.getCell(r).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}));var m=r.map((function(e){return e.width}));for(b=0;b<l.length;b++)u.getColumn(b+1).width=m[b];i.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(ue.saveAs)(t,"soa_"+a.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")}))}}]),e}()).\u0275fac=function(e){return new(e||ne)(I.bc(le.a),I.bc(J.a),I.bc(T.f))},ne.\u0275prov=I.Nb({token:ne,factory:ne.\u0275fac}),ne),me=((te=function(){function e(t,n,r,a){_classCallCheck(this,e),this._httpClient=t,this.authService=n,this.datePipe=r,this.commonService=a,this.defaultSearch={formServer:{}},this.moveList=[],this.days=[],this.arrContType=[],this.total={},this.onDataChanged=new ce.a([]),this.onOverviewChanged=new ce.a([]),this.onFilterChanged=new V.a,this.onSearchTextChanged=new V.a}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.modul=e.params.modul,new Promise((function(e,n){Promise.all([t.getData()]).then((function(n){_slicedToArray(n,1)[0],t.onSearchTextChanged.subscribe((function(e){t.searchText=e,t.getFilterMove()})),t.onFilterChanged.subscribe((function(e){t.filterBy=e,t.getFilterMove()})),e()}),n)}))}},{key:"getData",value:function(){var e=this,t={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/move/movement/data",t).subscribe((function(t){e.place=t[0],e.port=t[1],e.onDataChanged.next(t),n(t)}),r)}))}},{key:"getMoveReportEmptyData",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.get(t.authService.apiUrl+"/move/movement/report-empty/"+e.place+"/"+e.type+"/"+e.date_from+"/"+e.date_to,n).subscribe((function(e){t.moveList=e.moveList,t.days=e.days,t.arrContType=e.arrContType,t.getFilterMove(),r(e)}),a)}))}},{key:"getFilterMove",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.moveList));t.length>0&&this.filterBy&&(this.filterBy.container&&(t=this.commonService.filterText(t,this.filterBy.container,"cont_number")),this.filterBy.type&&(t=this.commonService.filterText(t,this.filterBy.type,"cont_type_code"))),this.searchText&&""!==this.searchText&&(t=se.a.filterArrayByString(t,this.searchText)),this.filterMovement=t,this.total={},this.days.map((function(n){var r=t.filter((function(e){return n>=e.date_from-864e5+1&&n<=e.date_to}));e.total[n]=r.length})),this.arrContType.map((function(t){e.total[t]||(e.total[t]=0)})),this.total.lift_on=0,this.total.lift_off=0,this.total.storage=0,this.total.price_lift_on=0,this.total.price_lift_off=0,this.total.days=0,t.map((function(t){e.total[t.container_info.cont_type_code]++,e.total.days+=(t.time_to-t.time_from)/864e5+1,e.total.storage+=(e.storagePrice["LB"+t.container_info.type]?e.storagePrice["LB"+t.container_info.type]:0)*((t.time_to-t.time_from)/864e5+1),t.lift_on&&(e.total.lift_on+=t.lift_on,e.total.price_lift_on+=e.storagePrice["LON"+t.container_info.type]),t.lift_off&&(e.total.lift_off+=t.lift_off,e.total.price_lift_off+=e.storagePrice["LF"+t.container_info.type])})),this.total.total=this.total.storage+this.total.price_lift_on+this.total.price_lift_off,this.onOverviewChanged.next(t)}},{key:"exportExcel",value:function(e,t){var n=this,r=new be.Workbook,a=r.addWorksheet("storage");a.addRow([" "]),a.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},a.addRow(["EXPORT CONTAINER "+this.datePipe.transform(new Date,"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),a.getRow(2).font={size:18,bold:!0,italic:!1},a.addRow([]);var i=["NO","CONTAINER","TYPE","PLACE","MOVE","DATE","DATE FROM","NEXT MOVE","DATE TO","DAY","STORAGE","LIFT ON","LIFT OFF","TOTAL","CURRENCY"];a.addRow(i).eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),e.map((function(e){for(var t=a.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!1},t.getCell(r).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}));var o=[];i.map((function(e){o.push(null)})),o[1]="TOTAL",o[o.length-1]=e[0][e[0].length-1],o[o.length-2]=t.total,o[o.length-3]=t.price_lift_off,o[o.length-4]=t.price_lift_on,o[o.length-5]=t.storage,o[o.length-6]=t.days;var c=a.addRow(o);i.map((function(e,t){c.getCell(t+1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},c.getCell(t+1).font={size:10,bold:!0},c.getCell(t+1).alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),a.getColumn(1).width=4.25,a.getColumn(2).width=14,a.getColumn(3).width=8,a.getColumn(4).width=20,a.getColumn(5).width=12,a.getColumn(6).width=12,a.getColumn(7).width=12,a.getColumn(8).width=12,a.getColumn(9).width=12,a.getColumn(10).width=12,a.getColumn(11).width=12,a.getColumn(12).width=12,a.getColumn(13).width=12,a.getColumn(14).width=12,r.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(ue.saveAs)(t,"storage_"+n.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")}))}}]),e}()).\u0275fac=function(e){return new(e||te)(I.bc(le.a),I.bc(J.a),I.bc(T.f),I.bc(B.a))},te.\u0275prov=I.Nb({token:te,factory:te.\u0275fac}),te),de=n("I/3d"),fe=((re=function(){function e(t,n,r,a){if(_classCallCheck(this,e),this.router=t,this.db=n,this.authService=r,this._httpClient=a,this.onDataChanged=new ce.a([]),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var i=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(i)}}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.authService.routerData=e,new Promise((function(e,n){Promise.all([t.getItemData()]).then((function(t){_toArray(t),e()}),n)}))}},{key:"getItemData",value:function(){var e=this,t={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/sel/shipment/item-data",t).subscribe((function(t){e.price=t[0],e.unit=t[1],e.currency=t[2],e.country=t[3],e.user=t[4],e.commodity=t[5],e.packageType=t[6],e.onDataChanged.next(t),n(t)}),r)}))}},{key:"writeDatabaseContainerStoragePrice",value:function(e,t){this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPriceCollection.doc(e).set(t)}},{key:"readDatabaseContainerStoragePrice",value:function(){return this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPrice=this.contaienrPriceCollection.snapshotChanges().pipe(Object(E.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.contaienrPrice}},{key:"readDatabaseContainerStoragePriceByUser",value:function(e){return this.contaienrPriceCollection=this.db.collection("container-storage-price",(function(t){return t.where("user","==",e)})),this.contaienrPrice=this.contaienrPriceCollection.snapshotChanges().pipe(Object(E.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.contaienrPrice}},{key:"getDatabaseContainerStoragePriceById",value:function(e){return this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPriceCollection.doc(e).valueChanges()}},{key:"updateDatabaseContainerStoragePriceById",value:function(e,t){this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPriceCollection.doc(e).set(t)}},{key:"deleteDatabaseContainerStoragePriceById",value:function(e){this.contaienrPriceDoc=this.db.doc("container-storage-price/"+e),this.contaienrPriceDoc.delete()}}]),e}()).\u0275fac=function(e){return new(e||re)(I.bc(r.g),I.bc(de.a),I.bc(J.a),I.bc(le.a))},re.\u0275prov=I.Nb({token:re,factory:re.\u0275fac}),re),he=n("B9zo"),ge=n("0JVi"),ve=n("znSr"),ye=n("rPBI");function xe(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",12),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return e.stopPropagation(),t.changeScreen(!0)})),I.Xb(1,"mat-icon"),I.Lc(2,"flip_to_front"),I.Wb(),I.Wb()}}function Se(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",12),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return e.stopPropagation(),t.changeScreen(!1)})),I.Xb(1,"mat-icon"),I.Lc(2,"flip_to_back"),I.Wb(),I.Wb()}}var De,_e=((De=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=n,this.fullScreen=!1,this.toggleSidebar=new I.o,this.showHideBar=new I.o,this.refreshPage=new I.o,this.searchFilter=new I.o,this._unsubscribeAll=new V.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||De)(I.Rb(J.a),I.Rb(ge.b))},De.\u0275cmp=I.Lb({type:De,selectors:[["soa-agent-header"]],inputs:{sidebarName:"sidebarName",searchText:"searchText"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:51,vars:9,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],[3,"searchText","inputValue"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(I.Xb(0,"mat-toolbar",0),I.Xb(1,"div",1),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),I.Xb(5,"mat-icon"),I.Lc(6,"menu"),I.Wb(),I.Wb(),I.Xb(7,"button",5),I.fc("click",(function(e){return t.showHideBar.emit()})),I.Xb(8,"mat-icon"),I.Lc(9,"menu"),I.Wb(),I.Wb(),I.Wb(),I.Xb(10,"button",6),I.Xb(11,"span",7),I.Lc(12,"SOA"),I.Wb(),I.Xb(13,"mat-icon",8),I.Lc(14,"equalizer"),I.Wb(),I.Wb(),I.Xb(15,"button",6),I.Xb(16,"span",7),I.Lc(17,"Inward"),I.Wb(),I.Xb(18,"mat-icon",8),I.Lc(19,"equalizer"),I.Wb(),I.Wb(),I.Xb(20,"button",6),I.Xb(21,"span",7),I.Lc(22,"Outward"),I.Wb(),I.Xb(23,"mat-icon",8),I.Lc(24,"equalizer"),I.Wb(),I.Wb(),I.Xb(25,"button",6),I.Xb(26,"span",7),I.Lc(27,"Dem"),I.Wb(),I.Xb(28,"mat-icon",8),I.Lc(29,"equalizer"),I.Wb(),I.Wb(),I.Xb(30,"button",6),I.Xb(31,"span",7),I.Lc(32,"Storage"),I.Wb(),I.Xb(33,"mat-icon",8),I.Lc(34,"equalizer"),I.Wb(),I.Wb(),I.Xb(35,"button",6),I.Xb(36,"span",7),I.Lc(37,"Error"),I.Wb(),I.Xb(38,"mat-icon",8),I.Lc(39,"equalizer"),I.Wb(),I.Wb(),I.Wb(),I.Xb(40,"div",9),I.Sb(41,"div",10),I.Xb(42,"filter-search-bar",11),I.fc("inputValue",(function(e){return t.searchFilter.emit(e)})),I.Wb(),I.Sb(43,"div",10),I.Xb(44,"button",12),I.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),I.Xb(45,"mat-icon",13),I.Lc(46,"refresh"),I.Wb(),I.Wb(),I.Sb(47,"div",10),I.Jc(48,xe,3,0,"button",14),I.Jc(49,Se,3,0,"button",14),I.Sb(50,"div",10),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(10),I.pc("routerLink","/apps/workflow/soa-agent/soa"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/import"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/export"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/dem"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/storage"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/error"),I.Db(7),I.pc("searchText",t.searchText),I.Db(6),I.pc("ngIf",!t.fullScreen),I.Db(1),I.pc("ngIf",t.fullScreen))},directives:[g.a,$.b,$.e,$.d,$.c,c.b,ve.b,b.a,r.i,r.h,ye.a,T.t],styles:["soa-agent-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}soa-agent-header.below{z-index:2}soa-agent-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}soa-agent-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}soa-agent-header .logo .logo-icon{width:38px}soa-agent-header .chat-panel-toggle-button,soa-agent-header .language-button,soa-agent-header .quick-panel-toggle-button,soa-agent-header .user-button,soa-agent-header fuse-search-bar{min-width:68px;height:64px}@media screen and (max-width:599px){soa-agent-header .chat-panel-toggle-button,soa-agent-header .language-button,soa-agent-header .quick-panel-toggle-button,soa-agent-header .user-button,soa-agent-header fuse-search-bar{height:56px}}soa-agent-header .navbar-toggle-button{min-width:56px;height:56px}soa-agent-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){soa-agent-header .toolbar-separator{height:56px}}@media print{soa-agent-header{display:none}}"],encapsulation:2}),De),ke=n("vxfF"),Xe=n("cfqv"),We=["formDirective"];function we(e,t){if(1&e&&(I.Xb(0,"th",23),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc();I.Ic("top",r.inverseOfTranslation),I.Db(1),I.Mc(n)}}function Ce(e,t){1&e&&(I.Xb(0,"mat-icon",24),I.Lc(1,"add"),I.Wb())}function Le(e,t){1&e&&(I.Xb(0,"mat-icon",25),I.Lc(1,"removed"),I.Wb())}function Ne(e,t){if(1&e&&(I.Xb(0,"th",7),I.Lc(1),I.kc(2,"date"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("top",r.inverseOfTranslation),I.Db(1),I.Mc(I.mc(2,3,n,"M/d"))}}function Oe(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ne,3,6,"th",26),I.Ub()),2&e){var n=I.jc();I.Db(1),I.pc("ngForOf",n.days)}}var Ie=function(e){return{left:e}};function Te(e,t){if(1&e&&(I.Xb(0,"td",34),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=t.index,a=I.jc().$implicit;I.pc("ngStyle",I.rc(2,Ie,136+48*r+"px")),I.Db(1),I.Mc(a[n])}}function Ae(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2).$implicit;I.Db(1),I.Mc(n>=r.date_from-864e5+1&&n<=r.date_to?"x":"")}}function Me(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ae,2,1,"td",35),I.Ub()),2&e){var n=I.jc(2);I.Db(1),I.pc("ngForOf",n.days)}}function je(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",16),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit;return I.jc().createItem.emit([t,"Cost","LB"])})),I.Lc(1,"save"),I.Wb()}}function Ve(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",16),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit;return I.jc().createItem.emit([t,"Cost","LON"])})),I.Lc(1,"save"),I.Wb()}}function Pe(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",16),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit;return I.jc().createItem.emit([t,"Cost","LF"])})),I.Lc(1,"save"),I.Wb()}}var Fe=function(e){return{"grey-100-bg":e}};function Re(e,t){if(1&e){var n=I.Yb();I.Xb(0,"tr",27),I.fc("click",(function(e){return I.Bc(n),e.stopPropagation()})),I.Xb(1,"td",28),I.Lc(2),I.Wb(),I.Xb(3,"td",18),I.Xb(4,"a",29),I.Lc(5),I.Wb(),I.Wb(),I.Jc(6,Te,2,4,"td",30),I.Xb(7,"td"),I.Lc(8),I.Wb(),I.Xb(9,"td",31),I.Lc(10),I.kc(11,"date"),I.Wb(),I.Xb(12,"td",32),I.Lc(13),I.Wb(),I.Xb(14,"td",31),I.Lc(15),I.kc(16,"date"),I.Wb(),I.Xb(17,"td"),I.Lc(18),I.Wb(),I.Xb(19,"td",31),I.Lc(20),I.kc(21,"date"),I.Wb(),I.Jc(22,Me,2,1,"ng-container",12),I.Xb(23,"td",20),I.Lc(24),I.Wb(),I.Xb(25,"td",21),I.Lc(26),I.Wb(),I.Xb(27,"td",22),I.Lc(28),I.kc(29,"number"),I.Wb(),I.Xb(30,"td"),I.Jc(31,je,2,0,"mat-icon",33),I.Lc(32),I.kc(33,"number"),I.Wb(),I.Xb(34,"td"),I.Jc(35,Ve,2,0,"mat-icon",33),I.Lc(36),I.Wb(),I.Xb(37,"td"),I.Jc(38,Pe,2,0,"mat-icon",33),I.Lc(39),I.Wb(),I.Xb(40,"td"),I.Lc(41),I.kc(42,"number"),I.Wb(),I.Xb(43,"td"),I.Lc(44),I.Wb(),I.Wb()}if(2&e){var r=t.$implicit,a=t.index,i=I.jc();I.pc("ngClass",I.rc(41,Fe,a%2==0)),I.Db(2),I.Mc(a+1),I.Db(2),I.pc("routerLink","/apps/container/details/"+r.container),I.Db(1),I.Mc(r.container_info.cont_number),I.Db(1),I.pc("ngForOf",i.arrContType),I.Db(2),I.Mc(r.move_code),I.Db(2),I.Mc(I.mc(11,23,r.date,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(r.place_info.short_name),I.Db(2),I.Mc(I.mc(16,26,r.date_from,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(r.nextMove.move_code),I.Db(2),I.Mc(I.mc(21,29,r.date_to,"MM/dd/yyyy HH:mm")),I.Db(2),I.pc("ngIf",i.viewDay),I.Db(2),I.Mc(r.lift_on?r.lift_on:""),I.Db(2),I.Mc(r.lift_off?r.lift_off:""),I.Db(2),I.Mc(I.mc(29,32,(r.time_to-r.time_from)/864e5+1,"1.0-0")),I.Db(3),I.pc("ngIf",(i.storagePrice["LB"+r.container_info.type]?i.storagePrice["LB"+r.container_info.type]:0)*((r.time_to-r.time_from)/864e5+1)>0&&!r.storage_arr.includes(r.storage_info)),I.Db(1),I.Nc(" ",I.mc(33,35,(i.storagePrice["LB"+r.container_info.type]?i.storagePrice["LB"+r.container_info.type]:0)*((r.time_to-r.time_from)/864e5+1),"1.2-2")," "),I.Db(3),I.pc("ngIf",r.lift_on&&!r.lift_on_price),I.Db(1),I.Nc(" ",r.lift_on?i.storagePrice["LON"+r.container_info.type]:""," "),I.Db(2),I.pc("ngIf",r.lift_off&&!r.lift_off_price),I.Db(1),I.Nc(" ",r.lift_off?i.storagePrice["LF"+r.container_info.type]:""," "),I.Db(2),I.Mc(I.mc(42,38,(i.storagePrice["LB"+r.container_info.type]?i.storagePrice["LB"+r.container_info.type]:0)*((r.time_to-r.time_from)/864e5+1)+(r.lift_on?i.storagePrice["LON"+r.container_info.type]:0)+(r.lift_off?i.storagePrice["LF"+r.container_info.type]:0),"1.2-2")),I.Db(3),I.Mc(i.storagePrice.currency)}}function Ee(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc();I.Ic("bottom",r.inverseOfTranslation3),I.Db(1),I.Mc(r.total[n])}}function Je(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("bottom",r.inverseOfTranslation3),I.Db(1),I.Mc(r.total[n])}}function Be(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Je,2,3,"td",19),I.Ub()),2&e){var n=I.jc();I.Db(1),I.pc("ngForOf",n.days)}}var $e,qe=(($e=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.router=t,this.route=n,this._activatedRoute=r,this.authService=a,this.formBuilder=i,this.datePipe=o,this.exportExcel=new I.o,this.filterChange=new I.o,this.createItem=new I.o,this.viewDay=!1,this.form=this.formBuilder.group({container:[null]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.valueChanges.subscribe((function(t){e.moveList.length>0&&e.filterChange.emit(t)}))}},{key:"resetForm",value:function(){this.searchNgForm.reset()}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){if(!this.viewPort||!this.viewPort._renderedContentOffset)return"32px";var e=parseInt(this.viewPort._renderedContentOffset);return"-".concat(e-=32,"px")}},{key:"inverseOfTranslation3",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||$e)(I.Rb(r.g),I.Rb(r.a),I.Rb(r.a),I.Rb(J.a),I.Rb(F.d),I.Rb(T.f))},$e.\u0275cmp=I.Lb({type:$e,selectors:[["soa-agent-storage-table"]],viewQuery:function(e,t){var n;1&e&&(I.Sc(ke.e,!0),I.Sc(We,!0)),2&e&&(I.wc(n=I.gc())&&(t.viewPort=n.first),I.wc(n=I.gc())&&(t.searchNgForm=n.first))},inputs:{modul:"modul",arrContType:"arrContType",days:"days",moveList:"moveList",storagePrice:"storagePrice",total:"total",height:"height"},outputs:{exportExcel:"exportExcel",filterChange:"filterChange",createItem:"createItem"},decls:83,vars:94,consts:[["name","form",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-storage"],[1,"sticky-header-1","w-36"],[1,"sticky-header-1","sticky-col1","w-100",2,"z-index","25"],["class","sticky-header-1 w-48",3,"top",4,"ngFor","ngForOf"],[1,"sticky-header-1"],[1,"sticky-header-1",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",4,"ngIf"],["class","cursor-pointer","color","warn",4,"ngIf"],[4,"ngIf"],[1,"sticky-header-1","sticky-right-col3",2,"z-index","25"],[1,"sticky-header-1","sticky-right-col2",2,"z-index","25"],[1,"sticky-header-1","sticky-right-col",2,"z-index","25"],["color","accent",1,"cursor-pointer",3,"click"],[3,"ngClass","click",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"sticky-col1","w-100"],[3,"bottom",4,"ngFor","ngForOf"],[1,"sticky-right-col3"],[1,"sticky-right-col2"],[1,"sticky-right-col"],[1,"sticky-header-1","w-48"],["color","accent",1,"cursor-pointer"],["color","warn",1,"cursor-pointer"],["class","sticky-header-1",3,"top",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"w-36"],[3,"routerLink"],["class","w-48",3,"ngStyle",4,"ngFor","ngForOf"],[1,"w-120"],[1,"w-160"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],[1,"w-48",3,"ngStyle"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),I.Xb(2,"cdk-virtual-scroll-viewport",2),I.Xb(3,"table",3),I.Xb(4,"thead"),I.Xb(5,"tr"),I.Xb(6,"th",4),I.Lc(7,"No"),I.Wb(),I.Xb(8,"th",5),I.Lc(9,"Container"),I.Wb(),I.Jc(10,we,2,3,"th",6),I.Xb(11,"th",7),I.Lc(12,"Move"),I.Wb(),I.Xb(13,"th",7),I.Lc(14,"Date"),I.Wb(),I.Xb(15,"th",7),I.Lc(16,"Place"),I.Wb(),I.Xb(17,"th",7),I.Lc(18,"Date from"),I.Wb(),I.Xb(19,"th",7),I.Lc(20,"Next Move"),I.Wb(),I.Xb(21,"th",8),I.fc("click",(function(e){return e.stopPropagation(),t.viewDay=!t.viewDay})),I.Xb(22,"div",9),I.Xb(23,"span"),I.Lc(24,"Date to"),I.Wb(),I.Jc(25,Ce,2,0,"mat-icon",10),I.Jc(26,Le,2,0,"mat-icon",11),I.Wb(),I.Wb(),I.Jc(27,Oe,2,1,"ng-container",12),I.Xb(28,"th",13),I.Lc(29,"Lift on"),I.Wb(),I.Xb(30,"th",14),I.Lc(31,"Lift off"),I.Wb(),I.Xb(32,"th",15),I.Xb(33,"div",9),I.Xb(34,"span"),I.Lc(35,"Days"),I.Wb(),I.Xb(36,"mat-icon",16),I.fc("click",(function(e){return t.exportExcel.emit()})),I.Lc(37,"print"),I.Wb(),I.Wb(),I.Wb(),I.Xb(38,"th",7),I.Lc(39,"Storage"),I.Wb(),I.Xb(40,"th",7),I.Lc(41,"Price L-ON"),I.Wb(),I.Xb(42,"th",7),I.Lc(43,"Price L-OF"),I.Wb(),I.Xb(44,"th",7),I.Lc(45,"Total"),I.Wb(),I.Xb(46,"th",7),I.Lc(47,"Currency"),I.Wb(),I.Wb(),I.Wb(),I.Xb(48,"tbody"),I.Jc(49,Re,45,43,"tr",17),I.Wb(),I.Xb(50,"tfoot"),I.Xb(51,"tr"),I.Sb(52,"td"),I.Sb(53,"td",18),I.Jc(54,Ee,2,3,"td",19),I.Sb(55,"td"),I.Sb(56,"td"),I.Sb(57,"td"),I.Sb(58,"td"),I.Sb(59,"td"),I.Xb(60,"td"),I.Lc(61,"Total"),I.Wb(),I.Jc(62,Be,2,1,"ng-container",12),I.Xb(63,"td",20),I.Lc(64),I.Wb(),I.Xb(65,"td",21),I.Lc(66),I.Wb(),I.Xb(67,"td",22),I.Lc(68),I.Wb(),I.Xb(69,"td"),I.Lc(70),I.kc(71,"number"),I.Wb(),I.Xb(72,"td"),I.Lc(73),I.kc(74,"number"),I.Wb(),I.Xb(75,"td"),I.Lc(76),I.kc(77,"number"),I.Wb(),I.Xb(78,"td"),I.Lc(79),I.kc(80,"number"),I.Wb(),I.Xb(81,"td"),I.Lc(82),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.pc("formGroup",t.form),I.Db(2),I.Ic("height",t.height,"px"),I.Db(4),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.pc("ngForOf",t.arrContType),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(4),I.pc("ngIf",!t.viewDay),I.Db(1),I.pc("ngIf",t.viewDay),I.Db(1),I.pc("ngIf",t.viewDay),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(6),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(3),I.pc("cdkVirtualForOf",t.moveList),I.Db(3),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.pc("ngForOf",t.arrContType),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(2),I.pc("ngIf",t.viewDay),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total.lift_on),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total.lift_off),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total.days),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(71,82,t.total.storage,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(74,85,t.total.price_lift_on,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(77,88,t.total.price_lift_off,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(80,91,t.total.total,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.storagePrice.currency))},directives:[F.A,F.q,F.h,ke.e,Xe.a,$.d,T.s,$.c,T.t,b.a,ke.d,T.q,ve.a,r.j,T.w,ve.c],pipes:[T.g,T.f],styles:["soa-agent-storage-table .no-shipments-text{font-size:24px;font-weight:300}soa-agent-storage-table cdk-virtual-scroll-viewport{width:100%}soa-agent-storage-table .mat-expansion-panel-body{padding:0!important}soa-agent-storage-table .shipment-storage{font-size:12px}soa-agent-storage-table .shipment-storage td,soa-agent-storage-table .shipment-storage th{padding:8px!important;white-space:nowrap}soa-agent-storage-table .shipment-storage thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}soa-agent-storage-table .shipment-storage thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}soa-agent-storage-table .shipment-storage tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-storage-table .shipment-storage .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}soa-agent-storage-table .shipment-storage .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}soa-agent-storage-table .shipment-storage .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}soa-agent-storage-table .shipment-storage .sticky-right-col{min-width:46px;position:sticky;position:-webkit-sticky;right:0;background-color:#b3e5fc}soa-agent-storage-table .shipment-storage .sticky-right-col2{min-width:52px;position:sticky;position:-webkit-sticky;right:46px;background-color:#b3e5fc}soa-agent-storage-table .shipment-storage .sticky-right-col3{min-width:52px;position:sticky;position:-webkit-sticky;right:98px;background-color:#b3e5fc}soa-agent-storage-table .shipment-storage .border-vessel td{border-bottom:1px solid #000!important}soa-agent-storage-table .shipment-storage .row-even{background-color:#e0e0e0!important}soa-agent-storage-table .shipment-storage .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}soa-agent-storage-table .shipment-storage .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2}),$e),ze=n("fE3o"),Ue=["formDirective"];function Ye(e,t){if(1&e&&(I.Xb(0,"mat-option",33),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.full_name," ")}}function He(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",34),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return t.openPriceModal.emit(t.form.value.place)})),I.Xb(1,"mat-icon",35),I.Lc(2,"save"),I.Wb(),I.Wb()}2&e&&I.pc("matTooltip","Place storage price")}function Ge(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," place is required "),I.Wb())}function Qe(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," type is required "),I.Wb())}function Ke(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n),I.Db(1),I.Mc(n)}}var Ze,et=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]},tt=((Ze=function(){function e(t,n,r){_classCallCheck(this,e),this.formBuilder=t,this.commonService=n,this.datePipe=r,this.fitlerMovement=new I.o,this.openPriceModal=new I.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({place:[null,F.y.required],type:[0,F.y.required],month:[null],year:[this.year],date_from:[null,F.y.required],date_to:[null,F.y.required],button:[null]}),this.checkPlace=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.filteredPlace=this.form.controls.place.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.supplier_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"supplier_name",e.place):[]}))),this.form.controls.place.valueChanges.subscribe((function(t){t&&(e.checkPlace=isNaN(e.form.value.place))})),this.form.controls.button.valueChanges.subscribe((function(t){t&&e.getMonthTime(t)}))}},{key:"getMonthTime",value:function(e){var t,n,r=this.form.controls.year.value,a=this.form.controls.month.value,i=new Date,o=i.getMonth(),c=i.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(r,a?a-1:0,1),n=new Date(r,a||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,o,1),n=new Date(c,o+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):r&&(t=new Date(r,a?a-1:0,1),n=new Date(r,a||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}},{key:"clearForm",value:function(){this.searchNgForm.resetForm()}},{key:"onSearchFormSubmit",value:function(e){if(e.valid){var t=JSON.parse(JSON.stringify(e.value));t.date_from=this.datePipe.transform(t.date_from,"yyyy-MM-dd"),t.date_to=this.datePipe.transform(t.date_to,"yyyy-MM-dd"),this.fitlerMovement.emit(t)}}},{key:"setData",value:function(e){this.form.patchValue(e),this.form.controls.type.setValue(0),this.form.controls.year.setValue(this.year)}},{key:"setMonth",value:function(e){this.form.controls.month.setValue(parseInt(e.month)+1),this.form.controls.year.setValue(e.year),this.getMonthTime("M")}}]),e}()).\u0275fac=function(e){return new(e||Ze)(I.Rb(F.d),I.Rb(B.a),I.Rb(T.f))},Ze.\u0275cmp=I.Lb({type:Ze,selectors:[["soa-agent-storage-sidebar"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Ue,!0),2&e&&I.wc(n=I.gc())&&(t.searchNgForm=n.first)},inputs:{place:"place",height:"height",formSearch:"formSearch"},outputs:{fitlerMovement:"fitlerMovement",openPriceModal:"openPriceModal"},decls:82,vars:32,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","place","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPlace","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["fxFlex","100",1,"info-line"],["formControlName","type","required",""],[3,"value"],["inputCheck","","matInput","","name","date_from","formControlName","date_from","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to","required","",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","year",3,"selectionChange"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","button"],["value","TM",1,"mb-12"],["value","TY",1,"mb-12"],[2,"font-size","12px","overflow","visible","display","block",3,"value"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"matTooltip","click"],["color","accent"]],template:function(e,t){if(1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form)})),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.Lc(5," Submit "),I.Wb(),I.Xb(6,"button",5),I.fc("click",(function(e){return t.clearForm()})),I.Lc(7," Clear "),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",6),I.Xb(9,"div",7),I.Xb(10,"div",8),I.Xb(11,"div",9),I.Xb(12,"div",10),I.Xb(13,"mat-form-field",11),I.Xb(14,"mat-label"),I.Lc(15,"Place"),I.Wb(),I.Sb(16,"input",12),I.Xb(17,"mat-autocomplete",13,14),I.Jc(19,Ye,2,2,"mat-option",15),I.kc(20,"async"),I.Wb(),I.Jc(21,He,3,1,"button",16),I.Jc(22,Ge,2,0,"mat-error",17),I.Wb(),I.Wb(),I.Xb(23,"div",18),I.Xb(24,"mat-form-field",11),I.Xb(25,"mat-label"),I.Lc(26,"Cont Type"),I.Wb(),I.Xb(27,"mat-select",19),I.Xb(28,"mat-option",20),I.Lc(29,"All"),I.Wb(),I.Xb(30,"mat-option",20),I.Lc(31,"20DC"),I.Wb(),I.Xb(32,"mat-option",20),I.Lc(33,"40HC"),I.Wb(),I.Wb(),I.Jc(34,Qe,2,0,"mat-error",17),I.Wb(),I.Wb(),I.Xb(35,"div",18),I.Xb(36,"mat-form-field",11),I.Xb(37,"mat-label"),I.Lc(38,"Date from"),I.Wb(),I.Xb(39,"input",21),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(40,"mat-datepicker-toggle",22),I.Sb(41,"mat-datepicker",null,23),I.Wb(),I.Wb(),I.Xb(43,"div",18),I.Xb(44,"mat-form-field",11),I.Xb(45,"mat-label"),I.Lc(46,"Date to"),I.Wb(),I.Xb(47,"input",24),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(48,"mat-datepicker-toggle",22),I.Sb(49,"mat-datepicker",null,25),I.Wb(),I.Wb(),I.Xb(51,"div",18),I.Xb(52,"mat-form-field",11),I.Xb(53,"mat-label"),I.Lc(54,"Month"),I.Wb(),I.Xb(55,"mat-select",26),I.fc("selectionChange",(function(e){return t.getMonthTime("M")})),I.Jc(56,Ke,2,2,"mat-option",27),I.Wb(),I.Wb(),I.Wb(),I.Xb(57,"div",18),I.Xb(58,"mat-form-field",11),I.Xb(59,"mat-label"),I.Lc(60,"Year"),I.Wb(),I.Xb(61,"mat-select",28),I.fc("selectionChange",(function(e){return t.getMonthTime("Y")})),I.Xb(62,"mat-option",20),I.Lc(63),I.Wb(),I.Xb(64,"mat-option",20),I.Lc(65),I.Wb(),I.Xb(66,"mat-option",20),I.Lc(67),I.Wb(),I.Xb(68,"mat-option",20),I.Lc(69),I.Wb(),I.Xb(70,"mat-option",20),I.Lc(71),I.Wb(),I.Xb(72,"mat-option",20),I.Lc(73),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(74,"div",29),I.Xb(75,"h2"),I.Lc(76,"Time option"),I.Wb(),I.Xb(77,"mat-radio-group",30),I.Xb(78,"mat-radio-button",31),I.Lc(79,"This month"),I.Wb(),I.Xb(80,"mat-radio-button",32),I.Lc(81,"This year"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.xc(18),r=I.xc(42),a=I.xc(50);I.pc("formGroup",t.form),I.Db(8),I.Ic("height",t.height,"px"),I.Db(8),I.pc("matAutocomplete",n),I.Db(1),I.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.place)),I.Db(2),I.pc("ngForOf",I.lc(20,29,t.filteredPlace)),I.Db(2),I.pc("ngIf",t.checkPlace),I.Db(1),I.pc("ngIf",t.form.get("place").hasError("required")),I.Db(6),I.pc("value",0),I.Db(2),I.pc("value",1),I.Db(2),I.pc("value",2),I.Db(2),I.pc("ngIf",t.form.get("type").hasError("required")),I.Db(5),I.pc("matDatepicker",r),I.Db(1),I.pc("for",r),I.Db(7),I.pc("matDatepicker",a),I.Db(1),I.pc("for",a),I.Db(8),I.pc("ngForOf",I.qc(31,et)),I.Db(6),I.pc("value",t.year-4),I.Db(1),I.Mc(t.year-4),I.Db(1),I.pc("value",t.year-3),I.Db(1),I.Mc(t.year-3),I.Db(1),I.pc("value",t.year-2),I.Db(1),I.Mc(t.year-2),I.Db(1),I.pc("value",t.year-1),I.Db(1),I.Mc(t.year-1),I.Db(1),I.pc("value",t.year),I.Db(1),I.Mc(t.year),I.Db(1),I.pc("value",t.year+1),I.Db(1),I.Mc(t.year+1)}},directives:[F.A,F.q,F.h,$.d,$.c,c.b,$.b,q.a,l.c,l.f,p.b,F.b,i.c,F.p,F.g,F.w,i.a,T.s,T.t,d.a,k.n,o.b,o.d,l.h,o.a,f.b,f.a,u.a,b.a,l.b],pipes:[T.b],styles:["soa-agent-storage-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}soa-agent-storage-sidebar .navbar-scroll-container{background:#fff!important}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content{padding-top:0}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Ze);function nt(e,t){if(1&e){var n=I.Yb();I.Xb(0,"fuse-sidebar",6),I.Xb(1,"div",7),I.Xb(2,"soa-agent-storage-sidebar",8),I.fc("fitlerMovement",(function(e){return I.Bc(n),I.jc().fitlerMovement(e)}))("openPriceModal",(function(e){return I.Bc(n),I.jc().openPriceModal(e)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(2),I.pc("place",r.place)("height",r.height)("formSearch",r.formSearch)}}var rt,at=((rt=function(){function e(t,n,r,a,i,o,c,s){var l=this;_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.soaAgentService=r,this.containerEmptyService=a,this.containerPriceService=i,this.commonService=o,this._matDialog=c,this.datePipe=s,this.sidebarPanel=!0,this.invoice=[],this.height=560,this.fullScreen=!1,this.moveList=[],this.viewDay=!1,this.containerStoragePrice=[],this.storagePrice={},this.total={},this._unsubscribeAll=new V.a,this.modul=this.authService.modul,this.containerPriceService.readDatabaseContainerStoragePrice().subscribe((function(e){l.containerStoragePrice=e.slice();var t=l.soaAgentService.currenSearch?l.soaAgentService.currenSearch.formSearch:l.soaAgentService.defaultSearch.formSearch;if(t.place){var n=l.containerStoragePrice.find((function(e){return e.id==t.place})),r={};n&&n.price.map((function(e){r[e.price.code]=e.amount,r.currency=e.currency.code})),l.storagePrice=l.containerEmptyService.storagePrice=r}}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.urlChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.modul=e.authService.modul})),this.searchText=this.soaAgentService.searchText,this.searchText&&this.searchFilter(this.searchText),this.formSearch=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.soaAgentService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.soaAgentService.dataCustomer,e.supplier=e.soaAgentService.dataSupplier,e.users=e.soaAgentService.users})),this.containerEmptyService.onOverviewChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.moveList=t,e.moveList.map((function(t){t.storage_info=e.datePipe.transform(t.date_from,"M/d/yy")+" - "+e.datePipe.transform(t.date_to,"M/d/yy")})),e.days=e.containerEmptyService.days,e.arrContType=e.containerEmptyService.arrContType,e.total=e.containerEmptyService.total})),this.containerEmptyService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.place=e.containerEmptyService.place,e.port=e.containerEmptyService.port})),this.containerPriceService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.price=e.containerPriceService.price,e.currency=e.containerPriceService.currency,e.country=e.containerPriceService.country}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.containerEmptyService)}},{key:"searchFilter",value:function(e){this.containerEmptyService.onSearchTextChanged.next(e)}},{key:"fitlerMovement",value:function(e){var t=this,n=this.containerStoragePrice.find((function(t){return t.id==e.place})),r={};n&&n.price.map((function(e){r[e.price.code]=e.amount,r.currency=e.currency.code})),this.storagePrice=this.containerEmptyService.storagePrice=r,this.authService.onRequestChanged.next(!0),this.containerEmptyService.getMoveReportEmptyData(e).then((function(n){t.soaAgentService.currenSearch.formSearch.date_from=e.date_from,t.soaAgentService.currenSearch.formSearch.date_to=e.date_to,t.soaAgentService.currenSearch.formSearch.place=e.place,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("error load movement")}))}},{key:"openPriceModal",value:function(e){var t=this,n=this.place.find((function(t){return t.id==e}));if(n){var r=this.containerStoragePrice.find((function(t){return t.id==e}));this.dialogRef=this._matDialog.open(ae,{panelClass:"soa-agent-storage-modal-dialog",data:{label:"Add/Remove price: "+n.full_name,data:r,price:this.price,currency:this.currency,place:e,name:n.full_name}}),this.dialogRef.afterClosed().subscribe((function(n){n&&(r?t.containerPriceService.writeDatabaseContainerStoragePrice(e.toString(),n):t.containerPriceService.updateDatabaseContainerStoragePriceById(e.toString(),n))}))}}},{key:"exportExcel",value:function(e){var t=this;if(this.moveList.length>0){var n=[];this.moveList.map((function(e,r){var a=[r+1,e.container_info.cont_number,e.container_info.cont_type_code,e.place_info.short_name,e.move_code,t.datePipe.transform(e.date,"MM/dd/yyyy"),t.datePipe.transform(e.date_from,"MM/dd/yyyy"),e.nextMove.move_code,t.datePipe.transform(e.date_to,"MM/dd/yyyy"),(e.time_to-e.time_from)/864e5+1,(t.storagePrice["LB"+e.container_info.type]?t.storagePrice["LB"+e.container_info.type]:0)*((e.time_to-e.time_from)/864e5+1),e.lift_on?t.storagePrice["LON"+e.container_info.type]:null,e.lift_off?t.storagePrice["LF"+e.container_info.type]:null,(t.storagePrice["LB"+e.container_info.type]?t.storagePrice["LB"+e.container_info.type]:0)*((e.time_to-e.time_from)/864e5+1)+(e.lift_on?t.storagePrice["LON"+e.container_info.type]:0)+(e.lift_off?t.storagePrice["LF"+e.container_info.type]:0),t.storagePrice.currency];n.push(a)})),this.containerEmptyService.exportExcel(n,this.total)}}},{key:"filterChange",value:function(e){}},{key:"createItem",value:function(e){var t=this,n=e[1],r=JSON.parse(JSON.stringify(e[0])),a=e[2];"Revenue"==n&&(this.partner=this.customer),"Cost"==n&&(this.partner=this.supplier,r.agent=this.soaAgentService.currenSearch.formSearch.agent);var i=this.partner.find((function(e){return e.id==(r.agent?r.agent:r.place)})),o=this.currency.find((function(e){return e.country_id==i.country}));r.move_type=r.move_code;var c,s,l,b,u=[{last_move:r,move:[r]}];switch(a){case"LF":c=r.container_info.cont_type_code.includes("20")?9:116,s=1,l=this.storagePrice[a+r.container_info.type],b=null;break;case"LON":s=1,l=this.storagePrice[a+r.container_info.type],c=r.container_info.cont_type_code.includes("20")?13:117,b=null;break;default:c=r.container_info.cont_type_code.includes("20")?89:114,s=Math.round((r.time_to-r.time_from)/864e5+1),l=this.storagePrice["LB"+r.container_info.type],b=this.datePipe.transform(r.date_from,"M/d/yy")+" - "+this.datePipe.transform(r.date_to,"M/d/yy")}this.dialogRef=this._matDialog.open(ie.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+n,shipmentId:r.shipment_id,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:r,container:u,data:{id:null,shipment:r.shipment_id,price:c,volume:s,amount:l,tax:0,tax_amount:0,currency:o.id,ex_rate:o.exrate,payment_center:i.country,partner:i.id,move:r.sel_move_id,debit:null,inv_number:null,issue_date:null,bank_ref:null,pay_date:null,info:b,update_by:this.authService.user,create_by:this.authService.user}}}),this.dialogRef.componentInstance.createItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),n){case"Revenue":t.soaAgentService.createSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+n}));break;case"Cost":t.soaAgentService.createSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+n}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&(t.authService.onRequestChanged.next(!0),t.containerEmptyService.getMoveReportEmptyData(t.soaAgentService.currenSearch.formSearch).then((function(e){t.authService.onRequestChanged.next(!1)})))}))}}]),e}()).\u0275fac=function(e){return new(e||rt)(I.Rb(oe.a),I.Rb(J.a),I.Rb(pe),I.Rb(me),I.Rb(fe),I.Rb(B.a),I.Rb(h.b),I.Rb(T.f))},rt.\u0275cmp=I.Lb({type:rt,selectors:[["soa-agent-storage"]],decls:6,vars:10,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","empty-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"modul","arrContType","moveList","days","storagePrice","total","height","exportExcel","filterChange","createItem"],["name","empty-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"place","height","formSearch","fitlerMovement","openPriceModal"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,nt,3,3,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"soa-agent-storage-table",5),I.fc("exportExcel",(function(e){return t.exportExcel(e)}))("filterChange",(function(e){return t.filterChange(e)}))("createItem",(function(e){return t.createItem(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-storage-sidebar"),I.Db(2),I.pc("modul",t.modul)("arrContType",t.arrContType)("moveList",t.moveList)("days",t.days)("storagePrice",t.storagePrice)("total",t.total)("height",t.height))},directives:[he.a,T.t,q.a,_e,qe,ze.a,tt],styles:["soa-agent-storage{width:100%}"],encapsulation:2}),rt),it=["formDirective"];function ot(e,t){if(1&e&&(I.Xb(0,"mat-option",27),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.e_name),I.Db(1),I.Nc(" ",n.e_name," ")}}var ct,st,lt=((st=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=r,this.authService=a,this.commonService=i,this._formBuilder=o,this.errorMessage="",this.formRelease=this._formBuilder.group({id:[null],container:[null,F.y.required],mt_return:[null],free_day:[0,F.y.required],dem:[0,F.y.required],det:[0,F.y.required],info:[null],update_by:[this.authService.user,F.y.required]}),this.name=this.authService.name,this.label=r.label,this.data=r.data,this.depot=r.depot,this.data.release_id?this.formRelease.patchValue({id:this.data.release_id,container:this.data.container_id,mt_return:this.data.mt_return,free_day:this.data.free_day,dem:this.data.dem,det:this.data.det,info:this.data.release_info,update_by:this.authService.user}):(this.formRelease.controls.id.disable(),this.formRelease.controls.container.setValue(this.data.container_id))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.filteredDepot=this.formRelease.controls.mt_return.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.e_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"e_name",e.depot):[]}))),this.formRelease.valueChanges.subscribe((function(t){e.errorMessage=""}))}},{key:"onReleaseFormSubmit",value:function(e){e.valid&&this.matDialogRef.close(e.value)}}]),e}()).\u0275fac=function(e){return new(e||st)(I.Rb(r.g),I.Rb(h.f),I.Rb(h.a),I.Rb(J.a),I.Rb(B.a),I.Rb(F.d))},st.\u0275cmp=I.Lb({type:st,selectors:[["soa-agent-dem-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&I.Sc(it,!0),2&e&&I.wc(n=I.gc())&&(t.vesselNgForm=n.first)},decls:52,vars:8,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-details-bill-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","container","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","25",1,"pr-8"],["inputCheck","","type","text","matInput","","formControlName","mt_return",3,"matAutocomplete"],["autoDepot","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","number","matInput","","formControlName","free_day","required",""],["inputCheck","","type","number","matInput","","formControlName","dem","required",""],["inputCheck","","type","number","matInput","","formControlName","det","required",""],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","info"],["inputCheck","","matInput","","readonly","true",3,"value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(I.Xb(0,"div",0),I.Xb(1,"mat-toolbar",1),I.Xb(2,"mat-toolbar-row",2),I.Xb(3,"span",3),I.Lc(4),I.Wb(),I.Xb(5,"button",4),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Xb(6,"mat-icon"),I.Lc(7,"close"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",5),I.Xb(9,"div"),I.Xb(10,"form",6),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onReleaseFormSubmit(t.formRelease)})),I.Xb(11,"div",7),I.Sb(12,"input",8),I.Sb(13,"input",9),I.Wb(),I.Xb(14,"div",10),I.Xb(15,"mat-form-field",11),I.Xb(16,"mat-label"),I.Lc(17,"MT return"),I.Wb(),I.Sb(18,"input",12),I.Xb(19,"mat-autocomplete",null,13),I.Jc(21,ot,2,2,"mat-option",14),I.kc(22,"async"),I.Wb(),I.Wb(),I.Xb(23,"mat-form-field",11),I.Xb(24,"mat-label"),I.Lc(25,"Free day"),I.Wb(),I.Sb(26,"input",15),I.Wb(),I.Xb(27,"mat-form-field",11),I.Xb(28,"mat-label"),I.Lc(29,"DEM"),I.Wb(),I.Sb(30,"input",16),I.Wb(),I.Xb(31,"mat-form-field",11),I.Xb(32,"mat-label"),I.Lc(33,"DET"),I.Wb(),I.Sb(34,"input",17),I.Wb(),I.Xb(35,"mat-form-field",18),I.Xb(36,"mat-label"),I.Lc(37,"Info"),I.Wb(),I.Sb(38,"input",19),I.Wb(),I.Xb(39,"mat-form-field",18),I.Xb(40,"mat-label"),I.Lc(41,"Update by"),I.Wb(),I.Sb(42,"input",20),I.Sb(43,"input",21),I.Wb(),I.Wb(),I.Xb(44,"div",22),I.Xb(45,"div",23),I.Lc(46),I.Wb(),I.Wb(),I.Xb(47,"div",24),I.Xb(48,"button",25),I.Lc(49,"Submit"),I.Wb(),I.Xb(50,"button",26),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Lc(51,"Cancel"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.xc(20);I.Db(4),I.Mc(t.label),I.Db(6),I.pc("formGroup",t.formRelease),I.Db(8),I.pc("matAutocomplete",n),I.Db(3),I.pc("ngForOf",I.lc(22,6,t.filteredDepot)),I.Db(21),I.pc("value",t.name),I.Db(4),I.Mc(t.errorMessage)}},directives:[g.a,g.c,$.b,$.d,$.c,c.b,b.a,h.d,q.a,F.A,F.q,F.h,F.b,F.p,F.g,F.w,l.c,l.f,p.b,i.c,i.a,T.s,F.u,k.n],pipes:[T.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.soa-agent-dem-modal-dialog{width:100%}}@media screen and (min-width:960px){.soa-agent-dem-modal-dialog{width:1080px}}.soa-agent-dem-modal-dialog .mat-dialog-container{padding:0}.soa-agent-dem-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.soa-agent-dem-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.soa-agent-dem-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),st),bt=((ct=function(){function e(t,n,r,a){_classCallCheck(this,e),this._httpClient=t,this.authService=n,this.datePipe=r,this.commonService=a,this.emptyContainer=[],this.total=0,this.onDataChanged=new ce.a([]),this.onEmptyChanged=new ce.a([]),this.onFilterChanged=new V.a,this.onSearchTextChanged=new V.a}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.modul=e.params.modul,e&&(this.authService.routerData=e),new Promise((function(e,n){Promise.all([t.getData()]).then((function(n){_slicedToArray(n,1)[0],t.onFilterChanged.subscribe((function(e){t.filterBy=e,t.getFilterShipment()})),t.onSearchTextChanged.subscribe((function(e){t.searchText=e,t.getFilterShipment()})),e()}),n)}))}},{key:"getData",value:function(){var e=this,t={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/sel/shipment/data",t).subscribe((function(t){e.customer=t[0],e.supplier=t[1],e.seaport=t[2],e.user=t[3],e.onDataChanged.next(t),n(t)}),r)}))}},{key:"getShipments",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.post(t.authService.apiUrl+"/sel/shipment/soa-agent-dem2",e,n).subscribe((function(e){t.shipments=e[0],t.arrType=e[1],t.objSptVol=e[2],t.objVessel=e[3],t.buildReport(),r(e)}),a)}))}},{key:"getFilterShipment",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.emptyContainer));t.length>0&&this.filterBy&&(this.filterBy.container&&(t=this.commonService.filterText(t,this.filterBy.container,"cont_number")),this.filterBy.type&&(t=this.commonService.filterText(t,this.filterBy.type,"cont_type_code")),this.filterBy.voyage&&(t=this.commonService.filterText(t,this.filterBy.voyage,"vessel_full_name")),this.filterBy.code&&(t=this.commonService.filterText(t,this.filterBy.code,"shipment_code")),this.filterBy.bill&&(t=this.commonService.filterText(t,this.filterBy.bill,"bill")),"all"!=this.filterBy.sgd&&(1==this.filterBy.sgd&&(t=t.filter((function(e){return e.currency>0}))),0==this.filterBy.sgd&&(t=t.filter((function(e){return 0==e.currency}))))),this.searchText&&""!==this.searchText&&(t=se.a.filterArrayByString(t,this.searchText)),this.total=0,this.arrType=[],t.map((function(t){t.currency=e.getChargeDet(t),e.total+=t.currency,e.arrType.includes(t.cont_type_code)||e.arrType.push(t.cont_type_code)})),this.filterShipment=t,this.onEmptyChanged.next(t)}},{key:"buildReport",value:function(){var e=this;this.containerMove={},this.shipments.map((function(t){e.containerMove[t.container]||(e.containerMove[t.container]=[]),e.containerMove[t.container].push(t)}));var t=[],n=[],r={};this.shipments.filter((function(e){return 12==e.pod})).map((function(e){n.includes(e.shipment_id+"-"+e.container)||(n.push(e.shipment_id+"-"+e.container),r[e.shipment_id+"-"+e.container]={container:e.container,cont_number:e.cont_number,cont_type_code:e.cont_type_code,off_hire:e.off_hire,vessel_full_name:e.vessel_full_name,pol:e.pol,pol_name:e.pol_name,pod:e.pod,pod_name:e.pod_name,depart_time:e.depart_time,arrive_time:e.arrive_time,shipment:e.shipment_id,shipment_code:e.shipment_code,bill:e.bill,customer:e.customer,customer_short_name:e.customer_short_name,customer_full_name:e.customer_full_name,move:{},container_info:e.container_info}),r[e.shipment_id+"-"+e.container].move[e.move_code]={id:e.id,date:e.date,time:e.time,move_code:e.move_code,place:e.place,place_short_name:e.place_short_name,place_full_name:e.place_name,country_name:e.country_name}})),n.map((function(n){r[n].currency=e.getChargeDet(r[n]),t.push(r[n])})),(t=t.filter((function(e){return e.move.EMPTY}))).sort((function(e,t){return e.move.EMPTY.date<t.move.EMPTY.date?1:t.move.EMPTY.date<e.move.EMPTY.date?-1:0})),this.total=0;var a=["TREXP","FULEX","LOAD","FULIM","TRIMP","EMPTY"];t.map((function(t){e.total+=t.currency;var n=e.containerMove[t.container],r=n.findIndex((function(e){return e.id===t.move.EMPTY.id}));a.map((function(e,a){t.move[e+"_EXP"]=null,n[r+a+1]&&(t.move[e+"_EXP"]=n[r+a+1])}))})),this.emptyContainer=t,this.getFilterShipment()}},{key:"getChargeDet",value:function(e){var t=0;if(e.move.EMPTY&&e.move.FULIM)for(var n=e.cont_type_code.substring(0,2),r=(e.move.EMPTY.time-e.move.FULIM.time)/864e5,a=e.container_info&&e.container_info.free_day?e.container_info.free_day:7,i=1,o={20:{muc1:20,muc2:40},40:{muc1:40,muc2:80}};i<=r;){if(i>a){var c="muc1";i>11&&(c="muc2"),t+=o[n][c]}i++}return t}},{key:"exportExcel",value:function(e,t){var n=this,r=new be.Workbook,a=r.addWorksheet("vessel");a.addRow([" "]),a.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},a.addRow(["EXPORT CONTAINER "+this.datePipe.transform(new Date,"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),a.getRow(2).font={size:18,bold:!0,italic:!1},a.addRow([]);var i=["NO","CONTAINER","TYPE","VESSEL & VOYAGE","BILL","CUSTOMER"];this.arrType.map((function(e){i.push(e)})),i.push("FULLIM"),i.push("COD"),i.push("TRIMP"),i.push("EMPTY"),i.push("DET"),i.push("F DAY"),i.push("C DET"),i.push("SGD"),i.push("REMARK"),a.addRow(i).eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),e.map((function(e){for(var t=a.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!1},t.getCell(r).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}));var o=[];i.map((function(e){o.push(null)})),o[1]="TOTAL",o[o.length-2]=t;var c=a.addRow(o);i.map((function(e,t){c.getCell(t+1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},c.getCell(t+1).font={size:10,bold:!0}})),a.getColumn(1).width=4.25,a.getColumn(2).width=14,a.getColumn(3).width=8,a.getColumn(4).width=20,a.getColumn(5).width=16,a.getColumn(6).width=20,this.arrType.map((function(e,t){a.getColumn(7+t).width=6})),a.getColumn(7+this.arrType.length).width=12,a.getColumn(7+this.arrType.length+1).width=12,a.getColumn(7+this.arrType.length+2).width=12,a.getColumn(7+this.arrType.length+3).width=12,a.getColumn(7+this.arrType.length+4).width=8,a.getColumn(7+this.arrType.length+5).width=8,a.getColumn(7+this.arrType.length+6).width=8,a.getColumn(7+this.arrType.length+7).width=12,a.getColumn(7+this.arrType.length+8).width=12,r.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(ue.saveAs)(t,"container_"+n.modul+n.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")}))}},{key:"getDepotByPortId",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.get(t.authService.apiUrl+"/sel-book/depot/"+e,n).subscribe((function(e){t.depot=e,r(e)}),a)}))}},{key:"createContainerRelease",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.post(t.authService.apiUrl+"/sel/container-release",e,n).subscribe((function(e){r(e)}),a)}))}},{key:"updateContainerRelease",value:function(e){var t=this,n={headers:new le.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.put(t.authService.apiUrl+"/sel/container-release",e,n).subscribe((function(e){r(e)}),a)}))}}]),e}()).\u0275fac=function(e){return new(e||ct)(I.bc(le.a),I.bc(J.a),I.bc(T.f),I.bc(B.a))},ct.\u0275prov=I.Nb({token:ct,factory:ct.\u0275fac}),ct),ut=n("PVWW"),pt=["formDirective"];function mt(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",48),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return e.stopPropagation(),t.vesselOpen=!t.vesselOpen})),I.Lc(1,"add"),I.Wb()}}function dt(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",49),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return e.stopPropagation(),t.vesselOpen=!t.vesselOpen})),I.Lc(1,"removed"),I.Wb()}}function ft(e,t){if(1&e&&(I.Xb(0,"th",50),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("top",r.inverseOfTranslation),I.Db(1),I.Nc("Vessel ",n,"")}}function ht(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ft,2,3,"th",12),I.Ub()),2&e){var n=I.jc();I.Db(1),I.pc("ngForOf",n.arrType)}}function gt(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"POL"),I.Wb()),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation)}}function vt(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"POD"),I.Wb()),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation)}}function yt(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"ETD"),I.Wb()),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation)}}function xt(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"ETA"),I.Wb()),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation)}}function St(e,t){if(1&e&&(I.Xb(0,"th",50),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc();I.Ic("top",r.inverseOfTranslation),I.Db(1),I.Nc("Spt ",n,"")}}function Dt(e,t){if(1&e&&I.Sb(0,"th",51),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation2)}}function _t(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Dt,1,2,"th",30),I.Ub()),2&e){var n=I.jc();I.Db(1),I.pc("ngForOf",n.arrType)}}function kt(e,t){if(1&e&&I.Sb(0,"th",24),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation2)}}function Xt(e,t){if(1&e&&I.Sb(0,"th",24),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation2)}}function Wt(e,t){if(1&e&&I.Sb(0,"th",24),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation2)}}function wt(e,t){if(1&e&&I.Sb(0,"th",24),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation2)}}function Ct(e,t){if(1&e&&I.Sb(0,"th",51),2&e){var n=I.jc();I.Ic("top",n.inverseOfTranslation2)}}function Lt(e,t){if(1&e&&(I.Xb(0,"td",60),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc();I.Db(1),I.Mc(a.objVessel[r.vessel_full_name]?a.objVessel[r.vessel_full_name][n]:"")}}function Nt(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Lt,2,1,"td",55),I.Ub()),2&e){var n=I.jc(2);I.Db(1),I.pc("ngForOf",n.arrType)}}function Ot(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){var n=I.jc().$implicit;I.Db(1),I.Mc(n.pol_name)}}function It(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){var n=I.jc().$implicit;I.Db(1),I.Mc(n.pod_name)}}function Tt(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.kc(2,"date"),I.Wb()),2&e){var n=I.jc().$implicit;I.Db(1),I.Mc(I.mc(2,1,n.depart_time,"MM/dd/yyyy HH:mm"))}}function At(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.kc(2,"date"),I.Wb()),2&e){var n=I.jc().$implicit;I.Db(1),I.Mc(I.mc(2,1,n.arrive_time,"MM/dd/yyyy HH:mm"))}}function Mt(e,t){if(1&e&&(I.Xb(0,"td",60),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc().$implicit,a=I.jc();I.Db(1),I.Mc(a.objSptVol[r.shipment]?a.objSptVol[r.shipment][n]:"")}}function jt(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",48),I.fc("click",(function(e){I.Bc(n);var t=I.jc(),r=t.$implicit,a=t.index;return I.jc().openModal.emit([r,a])})),I.Lc(1,"edit"),I.Wb()}}var Vt=function(e){return{"grey-100-bg":e}};function Pt(e,t){if(1&e&&(I.Xb(0,"tr",52),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",39),I.Xb(4,"a",53),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",54),I.Lc(7),I.Wb(),I.Xb(8,"td",41),I.Lc(9),I.Wb(),I.Jc(10,Nt,2,1,"ng-container",10),I.Jc(11,Ot,2,1,"td",10),I.Jc(12,It,2,1,"td",10),I.Jc(13,Tt,3,4,"td",10),I.Jc(14,At,3,4,"td",10),I.Xb(15,"td"),I.Xb(16,"a",53),I.Lc(17),I.Wb(),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Jc(20,Mt,2,1,"td",55),I.Xb(21,"td",56),I.Lc(22),I.Wb(),I.Xb(23,"td"),I.Lc(24),I.Wb(),I.Xb(25,"td"),I.Lc(26),I.Wb(),I.Xb(27,"td",44),I.Lc(28),I.kc(29,"date"),I.Wb(),I.Xb(30,"td",44),I.Lc(31),I.kc(32,"date"),I.Wb(),I.Xb(33,"td",44),I.Lc(34),I.kc(35,"date"),I.Wb(),I.Xb(36,"td",44),I.Lc(37),I.kc(38,"date"),I.Wb(),I.Xb(39,"td",44),I.Lc(40),I.kc(41,"date"),I.Wb(),I.Xb(42,"td",45),I.Lc(43),I.Wb(),I.Xb(44,"td"),I.Lc(45),I.Wb(),I.Xb(46,"td",45),I.Lc(47),I.Wb(),I.Xb(48,"td",57),I.Lc(49),I.Wb(),I.Xb(50,"td",58),I.Jc(51,jt,2,0,"mat-icon",59),I.Wb(),I.Wb()),2&e){var n=t.$implicit,r=t.index,a=I.jc();I.pc("ngClass",I.rc(44,Vt,r%2==0)),I.Db(2),I.Mc(r+1),I.Db(2),I.pc("routerLink","/apps/container/details/"+n.container),I.Db(1),I.Mc(n.cont_number),I.Db(2),I.Mc(n.cont_type_code),I.Db(2),I.Mc(n.vessel_full_name),I.Db(1),I.pc("ngIf",a.vesselOpen),I.Db(1),I.pc("ngIf",a.vesselOpen),I.Db(1),I.pc("ngIf",a.vesselOpen),I.Db(1),I.pc("ngIf",a.vesselOpen),I.Db(1),I.pc("ngIf",a.vesselOpen),I.Db(2),I.pc("routerLink","/apps/"+a.modul+"/shipment/detail/"+n.shipment+"/overview"),I.Db(1),I.Mc(n.shipment_code),I.Db(2),I.Mc(n.bill),I.Db(1),I.pc("ngForOf",a.arrType),I.Db(1),I.pc("matTooltip",n.customer_full_name),I.Db(1),I.Mc(n.customer_short_name),I.Db(2),I.Mc(null==n.container_info?null:n.container_info.mt_return),I.Db(2),I.Mc(null==n.container_info?null:n.container_info.release_info),I.Db(2),I.Mc(I.mc(29,29,null==n.move.FULIM?null:n.move.FULIM.date,"MM/dd/yy")),I.Db(3),I.Mc(n.move.FULIM?I.mc(32,32,n.move.FULIM.date+864e5,"MM/dd/yy"):""),I.Db(3),I.Mc(I.mc(35,35,null==n.move.TRIMP?null:n.move.TRIMP.date,"MM/dd/yy")),I.Db(3),I.Mc(I.mc(38,38,null==n.move.EMPTY?null:n.move.EMPTY.date,"MM/dd/yy")),I.Db(3),I.Mc(n.off_hire?I.mc(41,41,n.off_hire,"MM/dd/yy"):""),I.Db(3),I.Mc(n.move.FULIM&&n.move.EMPTY?(n.move.EMPTY.time-n.move.FULIM.time)/864e5:""),I.Db(2),I.Mc(n.container_info.free_day?n.container_info.free_day:7),I.Db(2),I.Mc(n.move.FULIM&&n.move.EMPTY&&n.container_info&&(n.move.EMPTY.time-n.move.FULIM.time)/864e5>(n.container_info.free_day?n.container_info.free_day:7)?(n.move.EMPTY.time-n.move.FULIM.time)/864e5-(n.container_info.free_day?n.container_info.free_day:7):""),I.Db(2),I.Mc(n.move.FULIM&&n.move.EMPTY&&n.container_info&&(n.move.EMPTY.time-n.move.FULIM.time)/864e5>(n.container_info.free_day?n.container_info.free_day:7)?n.currency:""),I.Db(2),I.pc("ngIf",n.container_info)}}function Ft(e,t){if(1&e&&I.Sb(0,"td",60),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation3)}}function Rt(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ft,1,2,"td",43),I.Ub()),2&e){var n=I.jc();I.Db(1),I.pc("ngForOf",n.arrType)}}function Et(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc();I.Ic("bottom",n.inverseOfTranslation3)}}function Jt(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc();I.Ic("bottom",n.inverseOfTranslation3)}}function Bt(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc();I.Ic("bottom",n.inverseOfTranslation3)}}function $t(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc();I.Ic("bottom",n.inverseOfTranslation3)}}function qt(e,t){if(1&e&&I.Sb(0,"td",60),2&e){var n=I.jc();I.Ic("bottom",n.inverseOfTranslation3)}}var zt,Ut=((zt=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.router=t,this.route=n,this._activatedRoute=r,this.authService=a,this.formBuilder=i,this.datePipe=o,this.exportExcel=new I.o,this.openModal=new I.o,this.filterChange=new I.o,this.vesselOpen=!1,this.shipmentOpen=!1,this.form=this.formBuilder.group({container:[null],type:[null],voyage:[null],code:[null],bill:[null],sgd:["all"]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.valueChanges.subscribe((function(t){e.emptyContainer.length>0&&e.filterChange.emit(t)}))}},{key:"resetForm",value:function(){this.searchNgForm.reset()}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){if(!this.viewPort||!this.viewPort._renderedContentOffset)return"32px";var e=parseInt(this.viewPort._renderedContentOffset);return"-".concat(e-=32,"px")}},{key:"inverseOfTranslation3",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||zt)(I.Rb(r.g),I.Rb(r.a),I.Rb(r.a),I.Rb(J.a),I.Rb(F.d),I.Rb(T.f))},zt.\u0275cmp=I.Lb({type:zt,selectors:[["soa-agent-dem-table"]],viewQuery:function(e,t){var n;1&e&&(I.Sc(ke.e,!0),I.Sc(pt,!0)),2&e&&(I.wc(n=I.gc())&&(t.viewPort=n.first),I.wc(n=I.gc())&&(t.searchNgForm=n.first))},inputs:{modul:"modul",emptyContainer:"emptyContainer",objSptVol:"objSptVol",objVessel:"objVessel",arrType:"arrType",total:"total",height:"height"},outputs:{exportExcel:"exportExcel",openModal:"openModal",filterChange:"filterChange"},decls:132,vars:145,consts:[["name","form",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-empty"],[1,"sticky-header-1"],[1,"sticky-header-1","sticky-col",2,"z-index","30"],[1,"sticky-header-1","sticky-col2",2,"z-index","30"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[4,"ngIf"],["class","sticky-header-1",3,"top",4,"ngIf"],["class","sticky-header-1 text-center",3,"top",4,"ngFor","ngForOf"],[1,"sticky-header-1","grey-300-bg"],[1,"sticky-header-1","text-bold"],[1,"sticky-header-1",3,"matTooltip"],[1,"sticky-header-1","text-bold",3,"matTooltip"],[1,"sticky-header-1","sticky-right-col","text-bold",2,"z-index","30"],[1,"sticky-header-1","sticky-right-col1",2,"z-index","30"],["color","accent",1,"cursor-pointer",3,"matTooltip","click"],[1,"sticky-header-2","text-left","sticky-col",2,"z-index","30"],[1,"sticky-header-2","sticky-col2",2,"z-index","30"],[1,"my-form-field"],["matInput","","inputCheck","","type","text","formControlName","container",2,"font-size","12px"],[1,"sticky-header-2"],["matInput","","inputCheck","","type","text","formControlName","type",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","voyage",2,"font-size","12px"],["class","sticky-header-2",3,"top",4,"ngIf"],["matInput","","inputCheck","","type","text","formControlName","code",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","bill",2,"font-size","12px"],["class","sticky-header-2 text-center",3,"top",4,"ngFor","ngForOf"],[1,"sticky-header-2","grey-300-bg"],[1,"sticky-right-col","sticky-header-2",2,"z-index","30"],[1,"my-form-field","w-60"],["formControlName","sgd",2,"font-size","12px"],[2,"font-size","12px",3,"value"],[1,"sticky-header-2","sticky-right-col1",2,"z-index","30"],["color","warn",1,"cursor-pointer","ml-8",3,"click"],[3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"sticky-col"],[1,"sticky-col2","text-bold",2,"z-index","30"],[1,""],[3,"bottom",4,"ngIf"],["class","text-center",3,"bottom",4,"ngFor","ngForOf"],[1,"grey-300-bg"],[1,"text-bold"],[1,"sticky-right-col","text-bold",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"sticky-header-1","text-center"],[1,"sticky-header-2","text-center"],[3,"ngClass"],[1,"cursor-pointer",3,"routerLink"],[1,"sticky-col2"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[1,"sticky-right-col","ext-bold"],[1,"sticky-right-col1"],["color","accent","class","cursor-pointer",3,"click",4,"ngIf"],[1,"text-center"]],template:function(e,t){1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),I.Xb(2,"cdk-virtual-scroll-viewport",2),I.Xb(3,"table",3),I.Xb(4,"thead"),I.Xb(5,"tr"),I.Xb(6,"th",4),I.Lc(7,"No"),I.Wb(),I.Xb(8,"th",5),I.Lc(9,"Container"),I.Wb(),I.Xb(10,"th",6),I.Lc(11,"Type"),I.Wb(),I.Xb(12,"th",4),I.Xb(13,"div",7),I.Xb(14,"span"),I.Lc(15,"Vessel Voyage"),I.Wb(),I.Jc(16,mt,2,0,"mat-icon",8),I.Jc(17,dt,2,0,"mat-icon",9),I.Wb(),I.Wb(),I.Jc(18,ht,2,1,"ng-container",10),I.Jc(19,gt,2,2,"th",11),I.Jc(20,vt,2,2,"th",11),I.Jc(21,yt,2,2,"th",11),I.Jc(22,xt,2,2,"th",11),I.Xb(23,"th",4),I.Lc(24,"Shipment"),I.Wb(),I.Xb(25,"th",4),I.Lc(26,"Bill"),I.Wb(),I.Jc(27,St,2,3,"th",12),I.Xb(28,"th",4),I.Lc(29,"Customer"),I.Wb(),I.Xb(30,"th",4),I.Lc(31,"MT return"),I.Wb(),I.Xb(32,"th",4),I.Lc(33,"CR Info"),I.Wb(),I.Xb(34,"th",13),I.Lc(35,"FULIM"),I.Wb(),I.Xb(36,"th",13),I.Lc(37,"COD"),I.Wb(),I.Xb(38,"th",13),I.Lc(39,"TRIM"),I.Wb(),I.Xb(40,"th",13),I.Lc(41,"EMPTY"),I.Wb(),I.Xb(42,"th",13),I.Lc(43,"OFFHIRE"),I.Wb(),I.Xb(44,"th",14),I.Lc(45,"DET"),I.Wb(),I.Xb(46,"th",15),I.Lc(47,"F DAY"),I.Wb(),I.Xb(48,"th",16),I.Lc(49,"C DET"),I.Wb(),I.Xb(50,"th",17),I.Lc(51,"SGD"),I.Wb(),I.Xb(52,"th",18),I.Xb(53,"mat-icon",19),I.fc("click",(function(e){return e.stopPropagation(),t.exportExcel.emit([t.emptyContainer,t.total])})),I.Lc(54,"print"),I.Wb(),I.Wb(),I.Wb(),I.Xb(55,"tr"),I.Sb(56,"th",20),I.Xb(57,"th",21),I.Xb(58,"mat-form-field",22),I.Sb(59,"input",23),I.Wb(),I.Wb(),I.Xb(60,"th",24),I.Xb(61,"mat-form-field",22),I.Sb(62,"input",25),I.Wb(),I.Wb(),I.Xb(63,"th",24),I.Xb(64,"mat-form-field",22),I.Sb(65,"input",26),I.Wb(),I.Wb(),I.Jc(66,_t,2,1,"ng-container",10),I.Jc(67,kt,1,2,"th",27),I.Jc(68,Xt,1,2,"th",27),I.Jc(69,Wt,1,2,"th",27),I.Jc(70,wt,1,2,"th",27),I.Xb(71,"th",24),I.Xb(72,"mat-form-field",22),I.Sb(73,"input",28),I.Wb(),I.Wb(),I.Xb(74,"th",24),I.Xb(75,"mat-form-field",22),I.Sb(76,"input",29),I.Wb(),I.Wb(),I.Jc(77,Ct,1,2,"th",30),I.Sb(78,"th",24),I.Sb(79,"th",24),I.Sb(80,"th",24),I.Sb(81,"th",31),I.Sb(82,"th",31),I.Sb(83,"th",31),I.Sb(84,"th",31),I.Sb(85,"th",31),I.Sb(86,"th",24),I.Sb(87,"th",24),I.Sb(88,"th",24),I.Xb(89,"th",32),I.Xb(90,"mat-form-field",33),I.Xb(91,"mat-select",34),I.Xb(92,"mat-option",35),I.Lc(93,"All"),I.Wb(),I.Xb(94,"mat-option",35),I.Lc(95,"Yes"),I.Wb(),I.Xb(96,"mat-option",35),I.Lc(97,"No"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(98,"th",36),I.Xb(99,"mat-icon",37),I.fc("click",(function(e){return e.stopPropagation(),t.resetForm()})),I.Lc(100,"delete"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(101,"tbody"),I.Jc(102,Pt,52,46,"tr",38),I.Wb(),I.Xb(103,"tfoot"),I.Xb(104,"tr"),I.Sb(105,"td"),I.Sb(106,"td",39),I.Xb(107,"td",40),I.Lc(108,"TOTAL"),I.Wb(),I.Sb(109,"td",41),I.Jc(110,Rt,2,1,"ng-container",10),I.Jc(111,Et,1,2,"td",42),I.Jc(112,Jt,1,2,"td",42),I.Jc(113,Bt,1,2,"td",42),I.Jc(114,$t,1,2,"td",42),I.Sb(115,"td"),I.Sb(116,"td"),I.Jc(117,qt,1,2,"td",43),I.Sb(118,"td"),I.Sb(119,"td"),I.Sb(120,"td"),I.Sb(121,"td",44),I.Sb(122,"td",44),I.Sb(123,"td",44),I.Sb(124,"td",44),I.Sb(125,"td",44),I.Sb(126,"td",45),I.Sb(127,"td"),I.Sb(128,"td",45),I.Xb(129,"td",46),I.Lc(130),I.Wb(),I.Sb(131,"td",47),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.pc("formGroup",t.form),I.Db(2),I.Ic("height",t.height,"px"),I.Db(4),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(4),I.pc("ngIf",!t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.pc("ngForOf",t.arrType),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.pc("matTooltip","Free day"),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.pc("matTooltip","Charge det"),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("matTooltip","Export container"),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.pc("ngForOf",t.arrType),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.pc("value","all"),I.Db(2),I.pc("value",1),I.Db(2),I.pc("value",0),I.Db(2),I.Ic("top",t.inverseOfTranslation2),I.Db(4),I.pc("cdkVirtualForOf",t.emptyContainer),I.Db(3),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.pc("ngForOf",t.arrType),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3))},directives:[F.A,F.q,F.h,ke.e,Xe.a,$.d,$.c,T.t,T.s,u.a,b.a,l.c,p.b,F.b,F.p,F.g,d.a,k.n,ke.d,T.q,ve.a,r.j],pipes:[T.f],styles:["soa-agent-dem-table .no-shipments-text{font-size:24px;font-weight:300}soa-agent-dem-table cdk-virtual-scroll-viewport{width:100%}soa-agent-dem-table .mat-expansion-panel-body{padding:0!important}soa-agent-dem-table .shipment-empty{font-size:12px}soa-agent-dem-table .shipment-empty td,soa-agent-dem-table .shipment-empty th{padding:8px!important;white-space:nowrap}soa-agent-dem-table .shipment-empty thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}soa-agent-dem-table .shipment-empty thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}soa-agent-dem-table .shipment-empty tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-dem-table .shipment-empty .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}soa-agent-dem-table .shipment-empty .sticky-col{width:100px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}soa-agent-dem-table .shipment-empty .sticky-col2{width:50px;position:sticky;position:-webkit-sticky;background:#fff;left:98px;z-index:20}soa-agent-dem-table .shipment-empty .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}soa-agent-dem-table .shipment-empty .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}soa-agent-dem-table .shipment-empty .border-vessel td{border-bottom:1px solid #000!important}soa-agent-dem-table .shipment-empty .row-even{background-color:#e0e0e0!important}soa-agent-dem-table .shipment-empty .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}soa-agent-dem-table .shipment-empty .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2,data:{animation:ut.a}}),zt),Yt=["formDirective"];function Ht(e,t){if(1&e&&(I.Xb(0,"mat-option",31),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id)("matTooltip",n.full_name),I.Db(1),I.Nc(" ",n.short_name," ")}}function Gt(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1,"Agent is required!"),I.Wb())}function Qt(e,t){if(1&e&&(I.Xb(0,"mat-option",26),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n),I.Db(1),I.Mc(n)}}var Kt,Zt=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]},en=((Kt=function(){function e(t,n,r){_classCallCheck(this,e),this.formBuilder=t,this.commonService=n,this.datePipe=r,this.fitlerShipment=new I.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({customer:[null],agent:[null,F.y.required],voyage:[null],month:[null],year:[this.year],date_from:[null],date_to:[null],button:[null]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.customer):[]}))),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.short_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"short_name",e.agent):[]}))),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"name",e.voyage):[]}))),this.form.controls.button.valueChanges.subscribe((function(t){t&&e.getMonthTime(t)}))}},{key:"getMonthTime",value:function(e){var t,n,r=this.form.controls.year.value,a=this.form.controls.month.value,i=new Date,o=i.getMonth(),c=i.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(r,a?a-1:0,1),n=new Date(r,a||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,o,1),n=new Date(c,o+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):r&&(t=new Date(r,a?a-1:0,1),n=new Date(r,a||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}},{key:"clearForm",value:function(){this.searchNgForm.resetForm(),this.form.controls.year.setValue(this.year),this.form.controls.sgd.setValue("all")}},{key:"onSearchFormSubmit",value:function(e){if(e.valid){"string"==typeof e.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof e.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof e.value.voyage&&this.form.controls.voyage.setValue(null);var t=JSON.parse(JSON.stringify(e.value));t.date_from&&(t.date_from=this.datePipe.transform(new Date(t.date_from),"MM/dd/yyyy")),t.date_to&&(t.date_to=this.datePipe.transform(new Date(t.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(t)}}}]),e}()).\u0275fac=function(e){return new(e||Kt)(I.Rb(F.d),I.Rb(B.a),I.Rb(T.f))},Kt.\u0275cmp=I.Lb({type:Kt,selectors:[["soa-agent-dem-sidebar"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Yt,!0),2&e&&I.wc(n=I.gc())&&(t.searchNgForm=n.first)},inputs:{formSearch:"formSearch",customer:"customer",voyage:"voyage",agent:"agent",height:"height"},outputs:{fitlerShipment:"fitlerShipment"},decls:69,vars:27,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent","required","",3,"matAutocomplete"],[3,"displayWith"],["autoSup2","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100",1,"info-line"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","year",3,"selectionChange"],[3,"value"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","button"],["value","TM",1,"mb-12"],["value","TY",1,"mb-12"],[3,"value","matTooltip"]],template:function(e,t){if(1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form)})),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.Lc(5," Submit "),I.Wb(),I.Xb(6,"button",5),I.fc("click",(function(e){return t.clearForm()})),I.Lc(7," Clear "),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",6),I.Xb(9,"div",7),I.Xb(10,"div",8),I.Xb(11,"div",9),I.Xb(12,"div",10),I.Xb(13,"mat-form-field",11),I.Xb(14,"mat-label"),I.Lc(15,"Agent"),I.Wb(),I.Sb(16,"input",12),I.Xb(17,"mat-autocomplete",13,14),I.Jc(19,Ht,2,3,"mat-option",15),I.kc(20,"async"),I.Wb(),I.Jc(21,Gt,2,0,"mat-error",16),I.Wb(),I.Wb(),I.Xb(22,"div",17),I.Xb(23,"mat-form-field",11),I.Xb(24,"mat-label"),I.Lc(25,"Date from"),I.Wb(),I.Xb(26,"input",18),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(27,"mat-datepicker-toggle",19),I.Sb(28,"mat-datepicker",null,20),I.Wb(),I.Wb(),I.Xb(30,"div",17),I.Xb(31,"mat-form-field",11),I.Xb(32,"mat-label"),I.Lc(33,"Date to"),I.Wb(),I.Xb(34,"input",21),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(35,"mat-datepicker-toggle",19),I.Sb(36,"mat-datepicker",null,22),I.Wb(),I.Wb(),I.Xb(38,"div",17),I.Xb(39,"mat-form-field",11),I.Xb(40,"mat-label"),I.Lc(41,"Month"),I.Wb(),I.Xb(42,"mat-select",23),I.fc("selectionChange",(function(e){return t.getMonthTime("M")})),I.Jc(43,Qt,2,2,"mat-option",24),I.Wb(),I.Wb(),I.Wb(),I.Xb(44,"div",17),I.Xb(45,"mat-form-field",11),I.Xb(46,"mat-label"),I.Lc(47,"Year"),I.Wb(),I.Xb(48,"mat-select",25),I.fc("selectionChange",(function(e){return t.getMonthTime("Y")})),I.Xb(49,"mat-option",26),I.Lc(50),I.Wb(),I.Xb(51,"mat-option",26),I.Lc(52),I.Wb(),I.Xb(53,"mat-option",26),I.Lc(54),I.Wb(),I.Xb(55,"mat-option",26),I.Lc(56),I.Wb(),I.Xb(57,"mat-option",26),I.Lc(58),I.Wb(),I.Xb(59,"mat-option",26),I.Lc(60),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(61,"div",27),I.Xb(62,"h2"),I.Lc(63,"Time option"),I.Wb(),I.Xb(64,"mat-radio-group",28),I.Xb(65,"mat-radio-button",29),I.Lc(66,"This month"),I.Wb(),I.Xb(67,"mat-radio-button",30),I.Lc(68,"This year"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.xc(18),r=I.xc(29),a=I.xc(37);I.pc("formGroup",t.form),I.Db(8),I.Ic("height",t.height,"px"),I.Db(8),I.pc("matAutocomplete",n),I.Db(1),I.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.agent)),I.Db(2),I.pc("ngForOf",I.lc(20,24,t.filteredAgent)),I.Db(2),I.pc("ngIf",t.form.get("agent").hasError("required")),I.Db(5),I.pc("matDatepicker",r),I.Db(1),I.pc("for",r),I.Db(7),I.pc("matDatepicker",a),I.Db(1),I.pc("for",a),I.Db(8),I.pc("ngForOf",I.qc(26,Zt)),I.Db(6),I.pc("value",t.year-4),I.Db(1),I.Mc(t.year-4),I.Db(1),I.pc("value",t.year-3),I.Db(1),I.Mc(t.year-3),I.Db(1),I.pc("value",t.year-2),I.Db(1),I.Mc(t.year-2),I.Db(1),I.pc("value",t.year-1),I.Db(1),I.Mc(t.year-1),I.Db(1),I.pc("value",t.year),I.Db(1),I.Mc(t.year),I.Db(1),I.pc("value",t.year+1),I.Db(1),I.Mc(t.year+1)}},directives:[F.A,F.q,F.h,$.d,$.c,c.b,$.b,q.a,l.c,l.f,p.b,F.b,i.c,F.p,F.g,F.w,i.a,T.s,T.t,o.b,o.d,l.h,o.a,d.a,k.n,f.b,f.a,u.a,l.b],pipes:[T.b],styles:["soa-agent-dem-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}soa-agent-dem-sidebar .navbar-scroll-container{background:#fff!important}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content{padding-top:0}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Kt);function tn(e,t){if(1&e){var n=I.Yb();I.Xb(0,"fuse-sidebar",6),I.Xb(1,"div",7),I.Xb(2,"soa-agent-dem-sidebar",8),I.fc("fitlerShipment",(function(e){return I.Bc(n),I.jc().fitlerShipment(e)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(2),I.pc("formSearch",r.formSearch)("customer",r.customer)("agent",r.agent)("voyage",r.voyage)}}var nn,rn=((nn=function(){function e(t,n,r,a,i,o,c){_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.soaAgentDemService=r,this.soaAgentService=a,this.commonService=i,this.datePipe=o,this._matDialog=c,this.sidebarPanel=!0,this.height=560,this.fullScreen=!1,this.total=0,this._unsubscribeAll=new V.a,this.modul=this.authService.modul}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.urlChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.modul=e.authService.modul})),this.searchText=this.soaAgentService.searchText,this.searchText&&this.searchFilter(this.searchText),this.formSearch=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.soaAgentService.onDataItemChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.agent=e.soaAgentService.agent})),this.soaAgentService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.soaAgentService.dataCustomer})),this.soaAgentDemService.onEmptyChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.emptyContainer=t,e.arrType=e.soaAgentDemService.arrType,e.total=e.soaAgentDemService.total,e.objSptVol=e.soaAgentDemService.objSptVol,e.objVessel=e.soaAgentDemService.objVessel})),this.soaAgentService.onVesselImpChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.voyage=t[1]}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.soaAgentDemService)}},{key:"searchFilter",value:function(e){this.soaAgentDemService.onSearchTextChanged.next(e)}},{key:"fitlerShipment",value:function(e){var t=this;this.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentDemService.getShipments(e).then((function(n){t.soaAgentService.currenSearch.formSearch.agent=e.agent,t.soaAgentService.currenSearch.formSearch.date_from=e.date_from,t.soaAgentService.currenSearch.formSearch.date_to=e.date_to,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentDemService.getShipments(this.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"exportExcel",value:function(e){var t=this,n=_slicedToArray(e,2),r=n[0],a=n[1],i=[];r.map((function(e,n){var r=e.move.FULIM?e.move.FULIM.time:0,a=e.move.EMPTY?e.move.EMPTY.time:0,o=[n+1,e.cont_number,e.cont_type_code,e.vessel_full_name,e.bill,e.customer_short_name];t.arrType.map((function(n){o.push(t.objSptVol[e.shipment][n]?t.objSptVol[e.shipment][n]:0)})),o.push(e.move.FULIM?t.datePipe.transform(e.move.FULIM.date,"MM/dd/yyyy"):null),o.push(e.move.FULIM?t.datePipe.transform(e.move.FULIM.date+864e5,"MM/dd/yyyy"):null),o.push(e.move.TRIMP?t.datePipe.transform(e.move.TRIMP.date,"MM/dd/yyyy"):null),o.push(e.move.EMPTY?t.datePipe.transform(e.move.EMPTY.date,"MM/dd/yyyy"):null),o.push(r&&a?(a-r)/864e5:null),o.push(e.container_info&&e.container_info.free_day?e.container_info.free_day:7),o.push(e.move.FULIM&&e.move.EMPTY&&e.container_info&&(e.move.EMPTY.time-e.move.FULIM.time)/864e5>(e.container_info.free_day?e.container_info.free_day:7)?(e.move.EMPTY.time-e.move.FULIM.time)/864e5-(e.container_info.free_day?e.container_info.free_day:7):""),o.push(e.currency?e.currency:""),o.push(e.container_info&&e.container_info.release_info?e.container_info.release_info:null),i.push(o)})),this.soaAgentDemService.exportExcel(i,a)}},{key:"openModal",value:function(e){var t,n=this,r=_slicedToArray(e,2),a=r[0],i=r[1];t=a.container_info.release_id?"Edit container release information":"Add container release information",this.authService.onRequestChanged.next(!0),this.soaAgentDemService.getDepotByPortId(a.pod).then((function(e){n.authService.onRequestChanged.next(!1),n.dialogRef=n._matDialog.open(lt,{panelClass:"soa-agent-dem-modal-dialog",data:{label:t,depot:e,data:a.container_info}}),n.dialogRef.afterClosed().subscribe((function(e){e&&("Add container release information"==t?(n.authService.onRequestChanged.next(!0),n.soaAgentDemService.createContainerRelease(e).then((function(t){n.authService.onRequestChanged.next(!1),n.emptyContainer[i].container_info.release_id=t.insertId,n.emptyContainer[i].container_info.container_id=e.container,n.emptyContainer[i].container_info.mt_return=e.mt_return,n.emptyContainer[i].container_info.free_day=e.free_day,n.emptyContainer[i].container_info.dem=e.dem,n.emptyContainer[i].container_info.det=e.det,n.emptyContainer[i].container_info.release_info=e.info,n.emptyContainer[i].container_info.update_by=e.user,n.soaAgentDemService.emptyContainer.find((function(e){return e.shipment==a.shipment&&e.container==a.container})).container_info=JSON.parse(JSON.stringify(n.emptyContainer[i].container_info)),n.soaAgentDemService.getFilterShipment()})).catch((function(e){n.authService.onRequestChanged.next(!1),console.error(e),alert("ERROR")}))):(n.authService.onRequestChanged.next(!0),n.soaAgentDemService.updateContainerRelease(e).then((function(t){n.authService.onRequestChanged.next(!1),n.emptyContainer[i].container_info.container_id=e.container,n.emptyContainer[i].container_info.mt_return=e.mt_return,n.emptyContainer[i].container_info.free_day=e.free_day,n.emptyContainer[i].container_info.dem=e.dem,n.emptyContainer[i].container_info.det=e.det,n.emptyContainer[i].container_info.release_info=e.info,n.emptyContainer[i].container_info.update_by=e.user,n.soaAgentDemService.emptyContainer.find((function(e){return e.shipment==a.shipment&&e.container==a.container})).container_info=JSON.parse(JSON.stringify(n.emptyContainer[i].container_info)),n.soaAgentDemService.getFilterShipment()})).catch((function(e){n.authService.onRequestChanged.next(!1),console.error(e),alert("ERROR")}))))}))})).catch((function(e){n.authService.onRequestChanged.next(!1),console.error(e),alert("ERROR")}))}},{key:"filterChange",value:function(e){this.soaAgentDemService.onFilterChanged.next(e)}}]),e}()).\u0275fac=function(e){return new(e||nn)(I.Rb(oe.a),I.Rb(J.a),I.Rb(bt),I.Rb(pe),I.Rb(B.a),I.Rb(T.f),I.Rb(h.b))},nn.\u0275cmp=I.Lb({type:nn,selectors:[["soa-agent-dem"]],decls:6,vars:10,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","empty-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"modul","emptyContainer","objSptVol","objVessel","arrType","height","total","exportExcel","openModal","filterChange"],["name","empty-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"formSearch","customer","agent","voyage","fitlerShipment"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,tn,3,4,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"soa-agent-dem-table",5),I.fc("exportExcel",(function(e){return t.exportExcel(e)}))("openModal",(function(e){return t.openModal(e)}))("filterChange",(function(e){return t.filterChange(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-dem-sidebar"),I.Db(2),I.pc("modul",t.modul)("emptyContainer",t.emptyContainer)("objSptVol",t.objSptVol)("objVessel",t.objVessel)("arrType",t.arrType)("height",t.height)("total",t.total))},directives:[he.a,T.t,q.a,_e,Ut,ze.a,en],styles:["soa-agent-dem{width:100%}"],encapsulation:2}),nn),an=["formDirective"];function on(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Amount is required "),I.Wb())}function cn(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Tax is required "),I.Wb())}function sn(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Tax Amount is required "),I.Wb())}function ln(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Currency is required "),I.Wb())}function bn(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Ex rate is required "),I.Wb())}var un,pn=((un=function(){function e(t,n,r,a,i,o,c){_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=r,this.authService=a,this.commonService=i,this.datePipe=o,this._formBuilder=c,this.errorMessage="",this.form=this._formBuilder.group({id:[null,F.y.required],amount:[null,F.y.required],tax:[null,F.y.required],tax_amount:[0,F.y.required],currency:[1],ex_rate:[1,F.y.required],info:[null]});var s=JSON.parse(JSON.stringify(r.data));this.label=r.label,this.contract=r.contract,this.form.patchValue(s)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.name=this.authService.name,this.form.controls.amount.valueChanges.subscribe((function(t){t=t||0;var n=e.form.value.tax?e.form.value.tax:0;5.26==n&&(n=.05/.95*100);var r=Math.round(t*n/100);e.form.controls.tax_amount.setValue(r)})),this.form.controls.tax.valueChanges.subscribe((function(t){5.26==(t=t||0)&&(t=.05/.95*100);var n=Math.round((e.form.value.amount?e.form.value.amount:0)*t/100);e.form.controls.tax_amount.setValue(n)})),this.form.valueChanges.subscribe((function(t){e.errorMessage=""}))}},{key:"onFormSubmit",value:function(e){if(e.valid){var t=JSON.parse(JSON.stringify(e.value));t.update_by=this.authService.user,t.update_at=this.datePipe.transform(new Date,"yyyy/MM/dd HH:mm:ss")+".0",this.matDialogRef.close(t)}}},{key:"updateAmount",value:function(){this.form.controls.amount.setValue(this.contract.amount),this.form.controls.currency.setValue("VND"==this.contract.currency?1:4)}}]),e}()).\u0275fac=function(e){return new(e||un)(I.Rb(r.g),I.Rb(h.f),I.Rb(h.a),I.Rb(J.a),I.Rb(B.a),I.Rb(T.f),I.Rb(F.d))},un.\u0275cmp=I.Lb({type:un,selectors:[["soa-agent-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&I.Sc(an,!0),2&e&&I.wc(n=I.gc())&&(t.shipmentNgForm=n.first)},decls:70,vars:17,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","sel-soa-agent-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","20",1,"pr-8"],["inputCheck","","matInput","","type","number","formControlName","amount","required",""],["type","button","matSuffix","","mat-icon-button","","color","accent",2,"z-index","10",3,"matTooltip","click"],["color","accent"],[4,"ngIf"],["formControlName","tax","required",""],[3,"value"],["inputCheck","","matInput","","type","number","formControlName","tax_amount","required",""],["formControlName","currency"],["inputCheck","","matInput","","type","number","formControlName","ex_rate","required",""],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","info"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"mat-toolbar",1),I.Xb(2,"mat-toolbar-row",2),I.Xb(3,"span",3),I.Lc(4),I.Wb(),I.Xb(5,"button",4),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Xb(6,"mat-icon"),I.Lc(7,"close"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",5),I.Xb(9,"div"),I.Xb(10,"form",6),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),I.Xb(11,"div",7),I.Sb(12,"input",8),I.Wb(),I.Xb(13,"div",9),I.Xb(14,"mat-form-field",10),I.Xb(15,"mat-label"),I.Lc(16,"Amount"),I.Wb(),I.Sb(17,"input",11),I.Xb(18,"button",12),I.fc("click",(function(e){return t.updateAmount()})),I.Xb(19,"mat-icon",13),I.Lc(20,"refresh"),I.Wb(),I.Wb(),I.Jc(21,on,2,0,"mat-error",14),I.Wb(),I.Xb(22,"mat-form-field",10),I.Xb(23,"mat-label"),I.Lc(24,"Tax(%)"),I.Wb(),I.Xb(25,"mat-select",15),I.Xb(26,"mat-option",16),I.Lc(27,"0"),I.Wb(),I.Xb(28,"mat-option",16),I.Lc(29,"5"),I.Wb(),I.Xb(30,"mat-option",16),I.Lc(31,"5.26"),I.Wb(),I.Xb(32,"mat-option",16),I.Lc(33,"7"),I.Wb(),I.Xb(34,"mat-option",16),I.Lc(35,"8"),I.Wb(),I.Xb(36,"mat-option",16),I.Lc(37,"10"),I.Wb(),I.Wb(),I.Jc(38,cn,2,0,"mat-error",14),I.Wb(),I.Xb(39,"mat-form-field",10),I.Xb(40,"mat-label"),I.Lc(41,"Tax Amount"),I.Wb(),I.Sb(42,"input",17),I.Jc(43,sn,2,0,"mat-error",14),I.Wb(),I.Xb(44,"mat-form-field",10),I.Xb(45,"mat-label"),I.Lc(46,"Currency"),I.Wb(),I.Xb(47,"mat-select",18),I.Xb(48,"mat-option",16),I.Lc(49,"VND"),I.Wb(),I.Xb(50,"mat-option",16),I.Lc(51,"USD"),I.Wb(),I.Wb(),I.Jc(52,ln,2,0,"mat-error",14),I.Wb(),I.Xb(53,"mat-form-field",10),I.Xb(54,"mat-label"),I.Lc(55,"Ex rate"),I.Wb(),I.Sb(56,"input",19),I.Jc(57,bn,2,0,"mat-error",14),I.Wb(),I.Xb(58,"mat-form-field",20),I.Xb(59,"mat-label"),I.Lc(60,"info"),I.Wb(),I.Sb(61,"input",21),I.Wb(),I.Wb(),I.Xb(62,"div",22),I.Xb(63,"div",23),I.Lc(64),I.Wb(),I.Wb(),I.Xb(65,"div",24),I.Xb(66,"button",25),I.Lc(67,"Submit"),I.Wb(),I.Xb(68,"button",26),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Lc(69,"Cancel"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(4),I.Mc(t.label),I.Db(6),I.pc("formGroup",t.form),I.Db(8),I.pc("matTooltip","Update same contract"),I.Db(3),I.pc("ngIf",t.form.get("amount").hasError("required")),I.Db(5),I.pc("value",0),I.Db(2),I.pc("value",5),I.Db(2),I.pc("value",5.26),I.Db(2),I.pc("value",7),I.Db(2),I.pc("value",8),I.Db(2),I.pc("value",10),I.Db(2),I.pc("ngIf",t.form.get("tax").hasError("required")),I.Db(5),I.pc("ngIf",t.form.get("tax_amount").hasError("required")),I.Db(5),I.pc("value",1),I.Db(2),I.pc("value",4),I.Db(2),I.pc("ngIf",t.form.get("currency").hasError("required")),I.Db(5),I.pc("ngIf",t.form.get("ex_rate").hasError("required")),I.Db(7),I.Mc(t.errorMessage))},directives:[g.a,g.c,$.b,$.d,$.c,c.b,b.a,h.d,q.a,F.A,F.q,F.h,F.b,F.p,F.g,l.c,l.f,p.b,F.u,F.w,l.h,u.a,T.t,d.a,k.n,l.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.soa-agent-modal-dialog{width:100%}}@media screen and (min-width:960px){.soa-agent-modal-dialog{width:1080px}}.soa-agent-modal-dialog .mat-dialog-container{padding:0}.soa-agent-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.soa-agent-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.soa-agent-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}.soa-agent-modal-dialog #sel-soa-agent-modal .faq{-webkit-box-flex:1;flex:1 0 auto}.soa-agent-modal-dialog #sel-soa-agent-modal .faq .item{padding:8px}.soa-agent-modal-dialog #sel-soa-agent-modal .faq .item .title{font-size:14px;margin-bottom:8px}.soa-agent-modal-dialog #sel-soa-agent-modal .faq .item .info{font-size:12px;line-height:1.5;color:rgba(0,0,0,.54)}.table-inv-item{width:100%}.table-inv-item tr.example-detail-row{height:0}.table-inv-item tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}.table-inv-item tr.example-element-row:not(.example-expanded-row):active{background:#efefef}.table-inv-item .example-element-row td{border-bottom-width:0}.table-inv-item .example-element-detail{overflow:hidden;display:-webkit-box;display:flex}.table-inv-item .example-element-diagram{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.table-inv-item .example-element-symbol{font-weight:700;font-size:40px;line-height:normal}.table-inv-item .example-element-description{padding:16px}.table-inv-item .example-element-description-attribution{opacity:.5}"],encapsulation:2}),un),mn=["invoice"];function dn(e,t){if(1&e){var n=I.Yb();I.Xb(0,"tr"),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td"),I.Xb(4,"a",7),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td"),I.Lc(7),I.Wb(),I.Xb(8,"td"),I.Lc(9),I.Wb(),I.Xb(10,"td"),I.Lc(11),I.Wb(),I.Xb(12,"td",8),I.Lc(13),I.kc(14,"number"),I.Wb(),I.Xb(15,"td"),I.Lc(16),I.kc(17,"number"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Xb(20,"td",9),I.Lc(21),I.kc(22,"number"),I.Wb(),I.Xb(23,"td"),I.Lc(24),I.Wb(),I.Xb(25,"td"),I.Xb(26,"a",7),I.Lc(27),I.Wb(),I.Wb(),I.Xb(28,"td"),I.Lc(29),I.Wb(),I.Xb(30,"td"),I.Lc(31),I.Wb(),I.Xb(32,"td"),I.Lc(33),I.Wb(),I.Xb(34,"td"),I.Lc(35),I.Wb(),I.Xb(36,"td",5),I.Xb(37,"mat-icon",10),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit,a=I.jc(2);return e.stopPropagation(),a.updateItem.emit(r)})),I.Lc(38,"edit"),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=t.$implicit,a=t.index;I.Db(2),I.Mc(a+1),I.Db(2),I.pc("routerLink","/apps/workflow/shipment/detail/"+r.shipment+"/soa"),I.Db(1),I.Mc(r.code),I.Db(2),I.Mc(r.price_code),I.Db(2),I.Mc(r.unit_code),I.Db(2),I.Mc(r.volume),I.Db(2),I.Mc(I.mc(14,17,r.amount,"VND"==r.currency_code?"1.0-0":"1.2-2")),I.Db(3),I.Mc(I.mc(17,20,r.tax,"1.2-2")),I.Db(3),I.Mc(r.currency_code),I.Db(2),I.Mc(I.mc(22,23,r.price_contract,"VND"==r.currency_code_contract?"1.0-0":"1.2-2")),I.Db(3),I.Mc(r.currency_code_contract),I.Db(2),I.pc("routerLink","/apps/supplier/supplier-contract/supplier-contract-details/"+r.contract),I.Db(1),I.Mc(r.code_contract),I.Db(2),I.Mc(r.country_name),I.Db(2),I.Mc(r.partner_short_name),I.Db(2),I.Mc(r.info),I.Db(2),I.Mc(r.update_by_name)}}function fn(e,t){if(1&e&&(I.Xb(0,"div",1),I.Xb(1,"h2",2),I.Xb(2,"span"),I.Lc(3),I.Wb(),I.Wb(),I.Xb(4,"div",3),I.Xb(5,"table",4),I.Xb(6,"thead"),I.Xb(7,"tr"),I.Xb(8,"th"),I.Lc(9,"No"),I.Wb(),I.Xb(10,"th"),I.Lc(11,"Shipment"),I.Wb(),I.Xb(12,"th"),I.Lc(13,"Price"),I.Wb(),I.Xb(14,"th"),I.Lc(15,"Unit"),I.Wb(),I.Xb(16,"th"),I.Lc(17,"Volume"),I.Wb(),I.Xb(18,"th"),I.Lc(19,"Amount"),I.Wb(),I.Xb(20,"th"),I.Lc(21,"Tax(%)"),I.Wb(),I.Xb(22,"th"),I.Lc(23,"Currency"),I.Wb(),I.Xb(24,"th"),I.Lc(25,"Contract amount"),I.Wb(),I.Xb(26,"th"),I.Lc(27,"Contract currency"),I.Wb(),I.Xb(28,"th"),I.Lc(29,"Contract code"),I.Wb(),I.Xb(30,"th"),I.Lc(31,"Payment_center"),I.Wb(),I.Xb(32,"th"),I.Lc(33,"Pay party"),I.Wb(),I.Xb(34,"th"),I.Lc(35,"Info"),I.Wb(),I.Xb(36,"th"),I.Lc(37,"Update by"),I.Wb(),I.Sb(38,"th",5),I.Wb(),I.Wb(),I.Xb(39,"tbody"),I.Jc(40,dn,39,26,"tr",6),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc();I.Db(3),I.Mc(n.label),I.Db(1),I.Ic("max-height",n.height,"px"),I.Db(36),I.pc("ngForOf",n.data)}}var hn,gn=((hn=function(){function e(){_classCallCheck(this,e),this.updateItem=new I.o,this.type=!0,this._unsubscribeAll=new V.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,console.log(this.data))}}]),e}()).\u0275fac=function(e){return new(e||hn)},hn.\u0275cmp=I.Lb({type:hn,selectors:[["soa-agent-error-view"]],viewQuery:function(e,t){var n;1&e&&I.Sc(mn,!0),2&e&&I.wc(n=I.gc())&&(t.invoice=n.first)},inputs:{height:"height",label:"label",data:"data"},outputs:{updateItem:"updateItem"},features:[I.Bb()],decls:1,vars:1,consts:[["class","group mb-12 mt-12",4,"ngIf"],[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto"],[1,"simple","table-contract-details"],[1,"sticky-right-col"],[4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"routerLink"],[1,"red-200-bg"],[1,"accent-200-bg"],["color","accent",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&I.Jc(0,fn,41,4,"div",0),2&e&&I.pc("ngIf",t.data&&t.data.length>0)},directives:[T.t,$.d,$.c,T.s,r.j,b.a],pipes:[T.g],styles:["soa-agent-error-view .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}soa-agent-error-view .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}soa-agent-error-view .group .table-contract-details{font-size:12px}soa-agent-error-view .group .table-contract-details td,soa-agent-error-view .group .table-contract-details th{padding:8px;font-size:12px}soa-agent-error-view .group .table-contract-details thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}soa-agent-error-view .group .table-contract-details tfoot td{font-weight:600}soa-agent-error-view .group .table-contract-details .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}soa-agent-error-view .group .table-contract-details .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}soa-agent-error-view .group .table-contract-details .sticky-right-col{min-width:60px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}soa-agent-error-view .group .table-contract-details tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}soa-agent-error-view .group .table-contract-details tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:ut.a}}),hn),vn=["formDirective"],yn=["allSelected"];function xn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.short_name," ")}}function Sn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.short_name," ")}}function Dn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.short_name," ")}}function _n(e,t){if(1&e&&(I.Xb(0,"mat-option",45),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id)("matTooltip",n.full_name),I.Db(1),I.Nc(" ",n.short_name," ")}}function kn(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1,"Agent is required!"),I.Wb())}function Xn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.name," ")}}function Wn(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-option",30),I.fc("click",(function(e){I.Bc(n),I.jc();var t=I.xc(64);return I.jc().tosslePerOne(t.viewValue)})),I.Lc(1),I.Wb()}if(2&e){var r=t.$implicit;I.pc("value",r.id),I.Db(1),I.Mc(r.code)}}function wn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.code," ")}}function Cn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n.id),I.Db(1),I.Nc(" ",n.name," ")}}function Ln(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.pc("value",n),I.Db(1),I.Mc(n)}}var Nn=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};function On(e,t){if(1&e){var n=I.Yb();I.Xb(0,"form",2,3),I.fc("keydown.enter",(function(e){return I.Bc(n),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){I.Bc(n);var t=I.jc();return t.onSearchFormSubmit(t.form)})),I.Xb(2,"div",4),I.Xb(3,"div",5),I.Xb(4,"button",6),I.Lc(5," Submit "),I.Wb(),I.Xb(6,"button",7),I.fc("click",(function(e){return I.Bc(n),I.jc().clearForm()})),I.Lc(7," Clear "),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",8),I.Xb(9,"div",9),I.Xb(10,"div",10),I.Xb(11,"div",11),I.Xb(12,"div",12),I.Xb(13,"mat-form-field",13),I.Xb(14,"mat-label"),I.Lc(15,"Pay party"),I.Wb(),I.Sb(16,"input",14),I.Xb(17,"mat-autocomplete",15,16),I.Jc(19,xn,2,2,"mat-option",17),I.kc(20,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(21,"div",18),I.Xb(22,"mat-form-field",13),I.Xb(23,"mat-label"),I.Lc(24,"Issue Party"),I.Wb(),I.Sb(25,"input",19),I.Xb(26,"mat-autocomplete",15,20),I.Jc(28,Sn,2,2,"mat-option",17),I.kc(29,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(30,"div",18),I.Xb(31,"mat-form-field",13),I.Xb(32,"mat-label"),I.Lc(33,"Customer"),I.Wb(),I.Sb(34,"input",21),I.Xb(35,"mat-autocomplete",15,22),I.Jc(37,Dn,2,2,"mat-option",17),I.kc(38,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(39,"div",18),I.Xb(40,"mat-form-field",13),I.Xb(41,"mat-label"),I.Lc(42,"Agent"),I.Wb(),I.Sb(43,"input",23),I.Xb(44,"mat-autocomplete",15,24),I.Jc(46,_n,2,3,"mat-option",25),I.kc(47,"async"),I.Wb(),I.Jc(48,kn,2,0,"mat-error",26),I.Wb(),I.Wb(),I.Xb(49,"div",18),I.Xb(50,"mat-form-field",13),I.Xb(51,"mat-label"),I.Lc(52,"Voyage"),I.Wb(),I.Sb(53,"input",27),I.Xb(54,"mat-autocomplete",15,28),I.Jc(56,Xn,2,2,"mat-option",17),I.kc(57,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(58,"div",18),I.Xb(59,"mat-form-field",13),I.Xb(60,"mat-label"),I.Lc(61,"Price"),I.Wb(),I.Xb(62,"mat-select",29),I.Xb(63,"mat-option",30,31),I.fc("click",(function(e){return I.Bc(n),I.jc().toggleAllSelection()})),I.Lc(65),I.Wb(),I.Jc(66,Wn,2,2,"mat-option",32),I.Wb(),I.Wb(),I.Wb(),I.Xb(67,"div",18),I.Xb(68,"mat-form-field",13),I.Xb(69,"mat-label"),I.Lc(70,"Currency"),I.Wb(),I.Xb(71,"mat-select",33),I.Jc(72,wn,2,2,"mat-option",17),I.Wb(),I.Wb(),I.Wb(),I.Xb(73,"div",18),I.Xb(74,"mat-form-field",13),I.Xb(75,"mat-label"),I.Lc(76,"Payment center"),I.Wb(),I.Sb(77,"input",34),I.Xb(78,"mat-autocomplete",15,35),I.Jc(80,Cn,2,2,"mat-option",17),I.kc(81,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(82,"div",18),I.Xb(83,"mat-form-field",13),I.Xb(84,"mat-label"),I.Lc(85,"Debit"),I.Wb(),I.Sb(86,"input",36),I.Wb(),I.Wb(),I.Xb(87,"div",18),I.Xb(88,"mat-form-field",13),I.Xb(89,"mat-label"),I.Lc(90,"Date from"),I.Wb(),I.Xb(91,"input",37),I.fc("change",(function(e){return I.Bc(n),I.jc().commonService.setDateStr(e)})),I.Wb(),I.Sb(92,"mat-datepicker-toggle",38),I.Sb(93,"mat-datepicker",null,39),I.Wb(),I.Wb(),I.Xb(95,"div",18),I.Xb(96,"mat-form-field",13),I.Xb(97,"mat-label"),I.Lc(98,"Date to"),I.Wb(),I.Xb(99,"input",40),I.fc("change",(function(e){return I.Bc(n),I.jc().commonService.setDateStr(e)})),I.Wb(),I.Sb(100,"mat-datepicker-toggle",38),I.Sb(101,"mat-datepicker",null,41),I.Wb(),I.Wb(),I.Xb(103,"div",18),I.Xb(104,"mat-form-field",13),I.Xb(105,"mat-label"),I.Lc(106,"Month"),I.Wb(),I.Xb(107,"mat-select",42),I.fc("selectionChange",(function(e){return I.Bc(n),I.jc().getMonthTime("M")})),I.Jc(108,Ln,2,2,"mat-option",17),I.Wb(),I.Wb(),I.Wb(),I.Xb(109,"div",18),I.Xb(110,"mat-form-field",13),I.Xb(111,"mat-label"),I.Lc(112,"Year"),I.Wb(),I.Xb(113,"mat-select",43),I.fc("selectionChange",(function(e){return I.Bc(n),I.jc().getMonthTime("Y")})),I.Xb(114,"mat-option",44),I.Lc(115),I.Wb(),I.Xb(116,"mat-option",44),I.Lc(117),I.Wb(),I.Xb(118,"mat-option",44),I.Lc(119),I.Wb(),I.Xb(120,"mat-option",44),I.Lc(121),I.Wb(),I.Xb(122,"mat-option",44),I.Lc(123),I.Wb(),I.Xb(124,"mat-option",44),I.Lc(125),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.xc(18),a=I.xc(27),i=I.xc(36),o=I.xc(45),c=I.xc(55),s=I.xc(79),l=I.xc(94),b=I.xc(102),u=I.jc();I.pc("formGroup",u.form),I.Db(8),I.Ic("height",u.height,"px"),I.Db(8),I.pc("matAutocomplete",r),I.Db(1),I.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.customer)),I.Db(2),I.pc("ngForOf",I.lc(20,43,u.filteredCustomer)),I.Db(6),I.pc("matAutocomplete",a),I.Db(1),I.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.supplier)),I.Db(2),I.pc("ngForOf",I.lc(29,45,u.filteredSupplier)),I.Db(6),I.pc("matAutocomplete",i),I.Db(1),I.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.customer)),I.Db(2),I.pc("ngForOf",I.lc(38,47,u.filteredCustomer2)),I.Db(6),I.pc("matAutocomplete",o),I.Db(1),I.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.agent)),I.Db(2),I.pc("ngForOf",I.lc(47,49,u.filteredAgent)),I.Db(2),I.pc("ngIf",u.form.get("agent").hasError("required")),I.Db(5),I.pc("matAutocomplete",c),I.Db(1),I.pc("displayWith",u.commonService.displayFn.bind(u,"name",u.voyage)),I.Db(2),I.pc("ngForOf",I.lc(57,51,u.filteredVoyage)),I.Db(7),I.pc("value",0),I.Db(2),I.Nc("All of ",u.price.length," price"),I.Db(1),I.pc("ngForOf",u.price),I.Db(6),I.pc("ngForOf",u.currency),I.Db(5),I.pc("matAutocomplete",s),I.Db(1),I.pc("displayWith",u.commonService.displayFn.bind(u,"name",u.country)),I.Db(2),I.pc("ngForOf",I.lc(81,53,u.filteredCountry)),I.Db(11),I.pc("matDatepicker",l),I.Db(1),I.pc("for",l),I.Db(7),I.pc("matDatepicker",b),I.Db(1),I.pc("for",b),I.Db(8),I.pc("ngForOf",I.qc(55,Nn)),I.Db(6),I.pc("value",u.year-4),I.Db(1),I.Mc(u.year-4),I.Db(1),I.pc("value",u.year-3),I.Db(1),I.Mc(u.year-3),I.Db(1),I.pc("value",u.year-2),I.Db(1),I.Mc(u.year-2),I.Db(1),I.pc("value",u.year-1),I.Db(1),I.Mc(u.year-1),I.Db(1),I.pc("value",u.year),I.Db(1),I.Mc(u.year),I.Db(1),I.pc("value",u.year+1),I.Db(1),I.Mc(u.year+1)}}var In=function(e){return{"mt-8":e}},Tn=function(e){return{"red-600-fg":e}};function An(e,t){if(1&e&&(I.Xb(0,"div",63),I.Xb(1,"div",53),I.Lc(2),I.kc(3,"number"),I.Wb(),I.Wb()),2&e){var n=t.$implicit,r=t.index,a=I.jc(2);I.pc("ngClass",I.rc(7,In,0==r)),I.Db(1),I.pc("ngClass",I.rc(9,Tn,a.total.revenue[n]-a.total.cost[n]<0)),I.Db(1),I.Oc(" ",I.mc(3,4,a.total.revenue[n]-a.total.cost[n],"VND"!=n?"1.2-2":"1.0-0")," ",n," ")}}function Mn(e,t){1&e&&I.Sb(0,"div",64)}function jn(e,t){if(1&e){var n=I.Yb();I.Xb(0,"form",46),I.fc("keydown.enter",(function(e){return I.Bc(n),"TEXTAREA"==e.target.tagName})),I.Xb(1,"div",4),I.Xb(2,"div",5),I.Xb(3,"button",47),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return t.updateSelectItem.emit(t.formEdit.value)})),I.Lc(4," Save "),I.Wb(),I.Xb(5,"button",7),I.fc("click",(function(e){return I.Bc(n),I.jc().typeChange.emit("form")})),I.Lc(6," Search "),I.Wb(),I.Wb(),I.Wb(),I.Xb(7,"div",8),I.Xb(8,"div",9),I.Xb(9,"div",48),I.Xb(10,"div",11),I.Xb(11,"div",49),I.Xb(12,"h2"),I.Lc(13,"Total"),I.Wb(),I.Jc(14,An,4,11,"div",50),I.Jc(15,Mn,1,0,"div",51),I.Xb(16,"div",52),I.Xb(17,"div",53),I.Lc(18),I.kc(19,"number"),I.Wb(),I.Wb(),I.Wb(),I.Xb(20,"div",18),I.Xb(21,"mat-form-field",54),I.Xb(22,"mat-label"),I.Lc(23,"Debit"),I.Wb(),I.Sb(24,"input",55),I.Xb(25,"mat-checkbox",56),I.fc("change",(function(e){return I.Bc(n),I.jc().setDisabled("debit")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(26,"div",18),I.Xb(27,"mat-form-field",54),I.Xb(28,"mat-label"),I.Lc(29,"Issue date"),I.Wb(),I.Xb(30,"input",57),I.fc("change",(function(e){return I.Bc(n),I.jc().commonService.setDateStr(e)})),I.Wb(),I.Sb(31,"mat-datepicker-toggle",38),I.Sb(32,"mat-datepicker",null,58),I.Xb(34,"mat-checkbox",56),I.fc("change",(function(e){return I.Bc(n),I.jc().setDisabled("issue_date")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(35,"div",18),I.Xb(36,"mat-form-field",54),I.Xb(37,"mat-label"),I.Lc(38,"Pay date"),I.Wb(),I.Xb(39,"input",59),I.fc("change",(function(e){return I.Bc(n),I.jc().commonService.setDateStr(e)})),I.Wb(),I.Sb(40,"mat-datepicker-toggle",38),I.Sb(41,"mat-datepicker",null,60),I.Xb(43,"mat-checkbox",56),I.fc("change",(function(e){return I.Bc(n),I.jc().setDisabled("pay_date")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(44,"div",18),I.Xb(45,"mat-form-field",54),I.Xb(46,"mat-label"),I.Lc(47,"Exrate"),I.Wb(),I.Sb(48,"input",61),I.Xb(49,"mat-checkbox",56),I.fc("change",(function(e){return I.Bc(n),I.jc().setDisabled("ex_rate")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(50,"div",18),I.Xb(51,"mat-form-field",54),I.Xb(52,"mat-label"),I.Lc(53,"Info"),I.Wb(),I.Sb(54,"input",62),I.Xb(55,"mat-checkbox",56),I.fc("change",(function(e){return I.Bc(n),I.jc().setDisabled("info")})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.xc(33),a=I.xc(42),i=I.jc();I.pc("formGroup",i.formEdit),I.Db(3),I.pc("disabled",0==i.selected.length),I.Db(4),I.Ic("height",i.height,"px"),I.Db(7),I.pc("ngForOf",i.total.currency),I.Db(1),I.pc("ngIf",i.total.currency.length>0),I.Db(1),I.pc("ngClass",I.rc(21,In,0==i.total.currency.length)),I.Db(1),I.pc("ngClass",I.rc(23,Tn,i.total.VND<0)),I.Db(1),I.Nc(" ",I.mc(19,18,i.total.VND,"1.0-0")," Ex VND "),I.Db(7),I.pc("checked",i.check.debit),I.Db(5),I.pc("matDatepicker",r),I.Db(1),I.pc("for",r),I.Db(3),I.pc("checked",i.check.issue_date),I.Db(5),I.pc("matDatepicker",a),I.Db(1),I.pc("for",a),I.Db(3),I.pc("checked",i.check.pay_date),I.Db(6),I.pc("checked",i.check.ex_rate),I.Db(6),I.pc("checked",i.check.info)}}var Vn,Pn=((Vn=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.commonService=r,this.router=a,this.datePipe=i,this.route=o,this.fitlerShipment=new I.o,this.typeChange=new I.o,this.updateSelectItem=new I.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({pay_party:[null],issue_party:[null],customer:[null],agent:[null,F.y.required],voyage:[null],price:[null],currency:[null],payment_center:[null],debit:[null],date_from:[null],date_to:[null],month:[null],year:[null]}),this.formEdit=this.formBuilder.group({debit:[{value:null,disabled:!0}],issue_date:[{value:null,disabled:!0}],pay_date:[{value:null,disabled:!0}],ex_rate:[{value:null,disabled:!0}],info:[{value:null,disabled:!0}]}),this.check={debit:!1,issue_date:!1,pay_date:!1,ex_rate:!1,info:!1},this.now=new Date,this._unsubscribeAll=new V.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.filteredCustomer=this.form.controls.pay_party.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.customer):[]}))),this.filteredSupplier=this.form.controls.issue_party.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.supplier):[]}))),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.customer):[]}))),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.short_name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"short_name",e.agent):[]}))),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"name",e.voyage):[]}))),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.code:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"code",e.price):[]}))),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(R.a)(""),Object(E.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(E.a)((function(t){return t?e.commonService.filterData(t,"name",e.country):[]}))),this.form.controls.agent.valueChanges.subscribe((function(t){if("string"!=typeof t){var n=e.agent.find((function(e){return e.id==t}));n&&e.form.controls.payment_center.setValue(n.country)}}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleAllSelection",value:function(){this.form.controls.price.patchValue(this.allSelected.selected?[].concat(_toConsumableArray(this.price.map((function(e){return e.id}))),[0]):[])}},{key:"tosslePerOne",value:function(e){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.price.value&&this.form.controls.price.value.length==this.price.length&&this.allSelected.select()}},{key:"getMonthTime",value:function(e){var t,n,r=this.form.controls.year.value,a=this.form.controls.month.value,i=new Date,o=i.getMonth(),c=i.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(r,a?a-1:0,1),n=new Date(r,a||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,o,1),n=new Date(c,o+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):r&&(t=new Date(r,a?a-1:0,1),n=new Date(r,a||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}},{key:"clearForm",value:function(){this.searchNgForm.resetForm()}},{key:"onSearchFormSubmit",value:function(e){if(e.valid){"string"==typeof e.value.pay_party&&this.form.controls.pay_party.setValue(null),"string"==typeof e.value.issue_party&&this.form.controls.issue_party.setValue(null),"string"==typeof e.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof e.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof e.value.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof e.value.price&&this.form.controls.price.setValue(null);var t=JSON.parse(JSON.stringify(e.value));t.date_from&&(t.date_from=this.datePipe.transform(new Date(t.date_from),"MM/dd/yyyy")),t.date_to&&(t.date_to=this.datePipe.transform(new Date(t.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(t)}}},{key:"setCheck",value:function(e){e.check=!e.check}},{key:"setDisabled",value:function(e){this.check[e]?this.formEdit.controls[e].disable():this.formEdit.controls[e].enable(),this.check[e]=!this.check[e]}}]),e}()).\u0275fac=function(e){return new(e||Vn)(I.Rb(F.d),I.Rb(J.a),I.Rb(B.a),I.Rb(r.g),I.Rb(T.f),I.Rb(r.a))},Vn.\u0275cmp=I.Lb({type:Vn,selectors:[["soa-agent-sidebar"]],viewQuery:function(e,t){var n;1&e&&(I.Sc(vn,!0),I.Sc(yn,!0)),2&e&&(I.wc(n=I.gc())&&(t.searchNgForm=n.first),I.wc(n=I.gc())&&(t.allSelected=n.first))},inputs:{formSearch:"formSearch",customer:"customer",supplier:"supplier",agent:"agent",voyage:"voyage",price:"price",currency:"currency",country:"country",type:"type",selected:"selected",total:"total",height:"height"},outputs:{fitlerShipment:"fitlerShipment",typeChange:"typeChange",updateSelectItem:"updateSelectItem"},decls:2,vars:2,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit",4,"ngIf"],["name","form",3,"formGroup","keydown.enter",4,"ngIf"],["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","pay_party","matInput","","formControlName","pay_party",3,"matAutocomplete"],[3,"displayWith"],["autoCus1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","issue_party","matInput","","formControlName","issue_party",3,"matAutocomplete"],["autoSup1","matAutocomplete"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete"],["autoCus2","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent","required","",3,"matAutocomplete"],["autoSup2","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],[4,"ngIf"],["inputCheck","","aria-label","voyage","matInput","","formControlName","voyage",3,"matAutocomplete"],["autoVoyage","matAutocomplete"],["formControlName","price","multiple",""],[3,"value","click"],["allSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","currency"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["inputCheck","","aria-label","debit","matInput","","formControlName","debit"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],[3,"value","matTooltip"],["name","form",3,"formGroup","keydown.enter"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"disabled","click"],[1,"nav","material2"],["fxFlex","100",1,"group","mt-24"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],["class","item-divider",4,"ngIf"],[1,"item","mb-8",3,"ngClass"],[1,"font-size-16","text-bold",3,"ngClass"],["appearance","outline",1,"padding-item","w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","debit"],["matPrefix","",3,"checked","change"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["issue_date",""],["inputCheck","","matInput","","name","pay_date","formControlName","pay_date",3,"matDatepicker","change"],["pay_date",""],["type","number","inputCheck","","matInput","","formControlName","ex_rate"],["inputCheck","","matInput","","formControlName","info"],[1,"item",3,"ngClass"],[1,"item-divider"]],template:function(e,t){1&e&&(I.Jc(0,On,126,56,"form",0),I.Jc(1,jn,56,25,"form",1)),2&e&&(I.pc("ngIf","form"==t.type),I.Db(1),I.pc("ngIf","edit"==t.type))},directives:[T.t,F.A,F.q,F.h,$.d,$.c,c.b,$.b,q.a,l.c,l.f,p.b,F.b,i.c,F.p,F.g,i.a,T.s,F.w,d.a,k.n,o.b,o.d,l.h,o.a,u.a,l.b,T.q,ve.a,v.a,l.g,F.u],pipes:[T.b,T.g],styles:["soa-agent-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}soa-agent-sidebar .navbar-scroll-container{background:#fff!important}soa-agent-sidebar .navbar-scroll-container .navbar-content{padding-top:0}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Vn);function Fn(e,t){if(1&e){var n=I.Yb();I.Xb(0,"fuse-sidebar",9),I.Xb(1,"div",10),I.Xb(2,"soa-agent-sidebar",11),I.fc("fitlerShipment",(function(e){return I.Bc(n),I.jc().fitlerShipment(e)}))("typeChange",(function(e){return I.Bc(n),I.jc().typeChange(e)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(2),I.pc("height",r.height)("type",r.type)("selected",r.selected)("total",r.total)("formSearch",r.formSearch)("customer",r.customer)("supplier",r.supplier)("agent",r.agent)("voyage",r.voyage)("price",r.price)("currency",r.currency)("country",r.country)}}var Rn,En=((Rn=function(){function e(t,n,r,a,i,o,c){if(_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.soaAgentService=r,this.commonService=a,this.datePipe=i,this._matDialog=o,this.router=c,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this._unsubscribeAll=new V.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var s=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(s)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch.formSearch,this.user=this.authService.user,this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.soaAgentService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.soaAgentService.dataCustomer,e.supplier=e.soaAgentService.dataSupplier,e.users=e.soaAgentService.users})),this.soaAgentService.onDataItemChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.agent=e.soaAgentService.agent,e.commodity=e.soaAgentService.commodity,e.packageType=e.soaAgentService.packageType,e.currency=e.soaAgentService.currency,e.country=e.soaAgentService.country,e.depot=e.soaAgentService.depot,e.price=e.soaAgentService.price})),this.soaAgentService.onVesselImpChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.soaAgentService.shipmentAddInfo&&(e.costExp=e.soaAgentService.shipmentAddInfo.filter((function(e){return 0===e.checkPrice}))),e.soaAgentService.shipmentImpAddInfo&&(e.costImp=e.soaAgentService.shipmentImpAddInfo.filter((function(e){return 0===e.checkPrice})))}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.soaAgentService)}},{key:"fitlerShipment",value:function(e){var t=this;this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then((function(n){t.soaAgentService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"typeChange",value:function(e){this.type=e}},{key:"searchFilter",value:function(e){this.soaAgentService.onSearchTextChanged.next(e)}},{key:"updateItem",value:function(e){var t=this;this.dialogRef=this._matDialog.open(pn,{panelClass:"soa-agent-modal-dialog",data:{label:"Edit "+e.type_name+": Contract price "+e.price_contract+e.currency_code_contract,contract:{amount:e.price_contract,currency:e.currency_code_contract},data:e}}),this.dialogRef.afterClosed().subscribe((function(e){e&&(t.authService.onRequestChanged.next(!0),t.soaAgentService.updateSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.getShipment():(console.error(e),alert("update error"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("update error")})))}))}}]),e}()).\u0275fac=function(e){return new(e||Rn)(I.Rb(oe.a),I.Rb(J.a),I.Rb(pe),I.Rb(B.a),I.Rb(T.f),I.Rb(h.b),I.Rb(r.g))},Rn.\u0275cmp=I.Lb({type:Rn,selectors:[["soa-agent-error"]],decls:11,vars:9,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],["fxLayout","column",1,"pl-8","pt-8",2,"overflow","auto"],["fxLayout","row wrap"],["fxFlex","100"],[3,"label","data","updateItem"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,Fn,3,12,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"div",6),I.Xb(7,"div",7),I.Xb(8,"soa-agent-error-view",8),I.fc("updateItem",(function(e){return t.updateItem(e)})),I.Wb(),I.Wb(),I.Xb(9,"div",7),I.Xb(10,"soa-agent-error-view",8),I.fc("updateItem",(function(e){return t.updateItem(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.Ic("height",t.height,"px"),I.Db(3),I.pc("label","Inward")("data",t.costImp),I.Db(2),I.pc("label","Outward")("data",t.costExp))},directives:[he.a,T.t,q.a,_e,$.d,$.b,gn,ze.a,Pn],styles:["soa-agent-error{width:100%}"],encapsulation:2}),Rn),Jn=["invoice"];function Bn(e,t){if(1&e&&(I.Xb(0,"tr",17),I.Xb(1,"td"),I.Lc(2,"DETENTION COLLECTION"),I.Wb(),I.Xb(3,"td"),I.Lc(4),I.kc(5,"number"),I.Wb(),I.Xb(6,"td"),I.Lc(7,"5% Surcharge"),I.Wb(),I.Xb(8,"td"),I.Lc(9),I.kc(10,"number"),I.Wb(),I.Xb(11,"td"),I.Lc(12,"7% GST"),I.Wb(),I.Xb(13,"td"),I.Lc(14),I.kc(15,"number"),I.Wb(),I.Xb(16,"td"),I.Lc(17,"Refund"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.kc(20,"number"),I.Wb(),I.Wb()),2&e){var n=I.jc(2);I.Db(4),I.Mc(I.mc(5,4,n.totalDem,"1.2-2")),I.Db(5),I.Mc(I.mc(10,7,5*n.totalDem/100,"1.2-2")),I.Db(5),I.Mc(I.mc(15,10,5*n.totalDem/100*7/100,"1.2-2")),I.Db(5),I.Mc(I.mc(20,13,n.totalDem-5*n.totalDem/100-5*n.totalDem/100*7/100,"1.2-2"))}}function $n(e,t){if(1&e&&(I.Xb(0,"tr",17),I.Xb(1,"td"),I.Lc(2,"STORAGE COLLECTION"),I.Wb(),I.Xb(3,"td"),I.Lc(4),I.kc(5,"number"),I.Wb(),I.Wb()),2&e){var n=I.jc(2);I.Db(4),I.Mc(I.mc(5,1,n.totalImp.costNN[n.agent.id]+n.totalExp.costNN[n.agent.id],"1.2-2"))}}function qn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.Db(1),I.Mc(n)}}function zn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.Db(1),I.Mc(n)}}function Un(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function Yn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.Db(1),I.Mc(n)}}function Hn(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function Gn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalImp.revenueVN[n]?r.totalImp.revenueVN[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function Qn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalImp.costVN[n]?r.totalImp.costVN[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function Kn(e,t){1&e&&I.Sb(0,"td")}function Zn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalImp.revenueVN[n]?r.totalImp.revenueVN[n]:0)-(r.totalImp.costVN[n]?r.totalImp.costVN[n]:0),"VND"==n?"1.0-0":"1.2-2"))}}function er(e,t){1&e&&I.Sb(0,"td")}function tr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalImp.revenueNN[n]?r.totalImp.revenueNN[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function nr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalImp.costNN[n]?r.totalImp.costNN[n]:0)-(r.agent&&113!=r.agent.id&&"USD"==n?r.totalImp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function rr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalImp.costNN[n.agent.id],"1.2-2"))}}function ar(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalImp.revenueNN[n]?r.totalImp.revenueNN[n]:0)-(r.totalImp.costNN[n]?r.totalImp.costNN[n]:0)+(r.agent&&113!=r.agent.id&&"USD"==n?r.totalImp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function ir(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-n.totalImp.costNN[n.agent.id],"1.2-2"))}}function or(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalImp.revenueBalance[n]?r.totalImp.revenueBalance[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function cr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalImp.costBalance[n]?r.totalImp.costBalance[n]:0)-(r.agent&&113!=r.agent.id&&"USD"==n?r.totalImp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function sr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalImp.costNN[n.agent.id],"1.2-2"))}}function lr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalImp.revenueBalance[n]?r.totalImp.revenueBalance[n]:0)-(r.totalImp.costBalance[n]?r.totalImp.costBalance[n]:0)+(r.agent&&113!=r.agent.id&&"USD"==n?r.totalImp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function br(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-n.totalImp.costNN[n.agent.id],"1.2-2"))}}function ur(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.Db(1),I.Mc(n)}}function pr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.Db(1),I.Mc(n)}}function mr(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function dr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit;I.Db(1),I.Mc(n)}}function fr(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function hr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalExp.revenueVN[n]?r.totalExp.revenueVN[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function gr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalExp.costVN[n]?r.totalExp.costVN[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function vr(e,t){1&e&&I.Sb(0,"td")}function yr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalExp.revenueVN[n]?r.totalExp.revenueVN[n]:0)-(r.totalExp.costVN[n]?r.totalExp.costVN[n]:0),"VND"==n?"1.0-0":"1.2-2"))}}function xr(e,t){1&e&&I.Sb(0,"td")}function Sr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalExp.revenueNN[n]?r.totalExp.revenueNN[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function Dr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalExp.costNN[n]?r.totalExp.costNN[n]:0)-("USD"==n&&r.agent&&113!=r.agent.id?r.totalExp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function _r(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalExp.costNN[n.agent.id],"1.2-2"))}}function kr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalExp.revenueNN[n]?r.totalExp.revenueNN[n]:0)-(r.totalExp.costNN[n]?r.totalExp.costNN[n]:0)+("USD"==n&&r.agent&&113!=r.agent.id?r.totalExp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function Xr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-n.totalExp.costNN[n.agent.id],"1.2-2"))}}function Wr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,r.totalExp.revenueBalance[n]?r.totalExp.revenueBalance[n]:0,"VND"==n?"1.0-0":"1.2-2"))}}function wr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalExp.costBalance[n]?r.totalExp.costBalance[n]:0)-("USD"==n&&r.agent&&113!=r.agent.id?r.totalExp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function Cr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalExp.costNN[n.agent.id],"1.2-2"))}}function Lr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(r.totalExp.revenueBalance[n]?r.totalExp.revenueBalance[n]:0)-(r.totalExp.costBalance[n]?r.totalExp.costBalance[n]:0)+("USD"==n&&r.agent&&113!=r.agent.id?r.totalExp.costNN[r.agent.id]:0),"VND"==n?"1.0-0":"1.2-2"))}}function Nr(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-n.totalExp.costNN[n.agent.id],"1.2-2"))}}function Or(e,t){if(1&e&&(I.Xb(0,"div",14),I.Xb(1,"table",15),I.Xb(2,"tbody"),I.Jc(3,Bn,21,16,"tr",16),I.Jc(4,$n,6,4,"tr",16),I.Xb(5,"tr",17),I.Xb(6,"td"),I.Xb(7,"div",18),I.Xb(8,"span"),I.Lc(9,"INWARD"),I.Wb(),I.Xb(10,"span"),I.Lc(11,"ETA for shipment arrive"),I.Wb(),I.Wb(),I.Wb(),I.Xb(12,"td"),I.Lc(13,"Revenue"),I.Wb(),I.Xb(14,"td"),I.Lc(15,"Cost"),I.Wb(),I.Xb(16,"td"),I.Lc(17,"Profit"),I.Wb(),I.Wb(),I.Xb(18,"tr",19),I.Sb(19,"td"),I.Jc(20,qn,2,1,"td",20),I.Jc(21,zn,2,1,"td",20),I.Jc(22,Un,2,1,"td",21),I.Jc(23,Yn,2,1,"td",20),I.Jc(24,Hn,2,1,"td",21),I.Xb(25,"td",22),I.Lc(26,"Exchange VND"),I.Wb(),I.Wb(),I.Xb(27,"tr"),I.Xb(28,"td"),I.Lc(29,"VN"),I.Wb(),I.Jc(30,Gn,3,4,"td",20),I.Jc(31,Qn,3,4,"td",20),I.Jc(32,Kn,1,0,"td",23),I.Jc(33,Zn,3,4,"td",20),I.Jc(34,er,1,0,"td",23),I.Xb(35,"td",22),I.Lc(36),I.kc(37,"number"),I.Wb(),I.Wb(),I.Xb(38,"tr"),I.Xb(39,"td"),I.Lc(40,"NN"),I.Wb(),I.Jc(41,tr,3,4,"td",20),I.Jc(42,nr,3,4,"td",20),I.Jc(43,rr,3,4,"td",24),I.Jc(44,ar,3,4,"td",20),I.Jc(45,ir,3,4,"td",24),I.Xb(46,"td",22),I.Lc(47),I.kc(48,"number"),I.Wb(),I.Wb(),I.Xb(49,"tr",19),I.Xb(50,"td"),I.Lc(51,"TOTAL"),I.Wb(),I.Jc(52,or,3,4,"td",20),I.Jc(53,cr,3,4,"td",20),I.Jc(54,sr,3,4,"td",24),I.Jc(55,lr,3,4,"td",20),I.Jc(56,br,3,4,"td",24),I.Xb(57,"td",22),I.Lc(58),I.kc(59,"number"),I.Wb(),I.Wb(),I.Xb(60,"tr",17),I.Xb(61,"td"),I.Xb(62,"div",18),I.Xb(63,"span"),I.Lc(64,"OUTWARD"),I.Wb(),I.Xb(65,"span"),I.Lc(66,"ETD for shipment depart"),I.Wb(),I.Wb(),I.Wb(),I.Xb(67,"td"),I.Lc(68,"Revenue"),I.Wb(),I.Xb(69,"td"),I.Lc(70,"Cost"),I.Wb(),I.Xb(71,"td"),I.Lc(72,"Profit"),I.Wb(),I.Wb(),I.Xb(73,"tr",19),I.Sb(74,"td"),I.Jc(75,ur,2,1,"td",20),I.Jc(76,pr,2,1,"td",20),I.Jc(77,mr,2,1,"td",21),I.Jc(78,dr,2,1,"td",20),I.Jc(79,fr,2,1,"td",21),I.Xb(80,"td",22),I.Lc(81,"Exchange VND"),I.Wb(),I.Wb(),I.Xb(82,"tr"),I.Xb(83,"td"),I.Lc(84,"VN"),I.Wb(),I.Jc(85,hr,3,4,"td",20),I.Jc(86,gr,3,4,"td",20),I.Jc(87,vr,1,0,"td",23),I.Jc(88,yr,3,4,"td",20),I.Jc(89,xr,1,0,"td",23),I.Xb(90,"td",22),I.Lc(91),I.kc(92,"number"),I.Wb(),I.Wb(),I.Xb(93,"tr"),I.Xb(94,"td"),I.Lc(95,"NN"),I.Wb(),I.Jc(96,Sr,3,4,"td",20),I.Jc(97,Dr,3,4,"td",20),I.Jc(98,_r,3,4,"td",24),I.Jc(99,kr,3,4,"td",20),I.Jc(100,Xr,3,4,"td",24),I.Xb(101,"td",22),I.Lc(102),I.kc(103,"number"),I.Wb(),I.Wb(),I.Xb(104,"tr",19),I.Xb(105,"td"),I.Lc(106,"TOTAL"),I.Wb(),I.Jc(107,Wr,3,4,"td",20),I.Jc(108,wr,3,4,"td",20),I.Jc(109,Cr,3,4,"td",24),I.Jc(110,Lr,3,4,"td",20),I.Jc(111,Nr,3,4,"td",24),I.Xb(112,"td",22),I.Lc(113),I.kc(114,"number"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc();I.Db(3),I.pc("ngIf",n.totalDem&&113==n.agent.id),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(8),I.Eb("colspan",n.totalImp.currency.length),I.Db(2),I.Eb("colspan",n.totalImp.currency.length+(n.agent&&113!=n.agent.id?1:0)),I.Db(2),I.Eb("colspan",n.totalImp.currency.length+1+(n.agent&&113!=n.agent.id?1:0)),I.Db(4),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(6),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(2),I.Mc(I.mc(37,54,n.totalImp.revenueVN.ALL-n.totalImp.costVN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(2),I.Mc(I.mc(48,57,n.totalImp.revenueNN.ALL-n.totalImp.costNN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalImp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(2),I.Mc(I.mc(59,60,n.totalImp.revenueVN.ALL+n.totalImp.revenueNN.ALL-(n.totalImp.costVN.ALL+n.totalImp.costNN.ALL),"1.0-0")),I.Db(9),I.Eb("colspan",n.totalExp.currency.length),I.Db(2),I.Eb("colspan",n.totalExp.currency.length+(n.agent&&113!=n.agent.id?1:0)),I.Db(2),I.Eb("colspan",n.totalExp.currency.length+1+(n.agent&&113!=n.agent.id?1:0)),I.Db(4),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(6),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(2),I.Mc(I.mc(92,63,n.totalExp.revenueVN.ALL-n.totalExp.costVN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(2),I.Mc(I.mc(103,66,n.totalExp.revenueNN.ALL-n.totalExp.costNN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(1),I.pc("ngForOf",n.totalExp.currency),I.Db(1),I.pc("ngIf",n.agent&&113!=n.agent.id),I.Db(2),I.Mc(I.mc(114,69,n.totalExp.revenueVN.ALL+n.totalExp.revenueNN.ALL-(n.totalExp.costVN.ALL+n.totalExp.costNN.ALL),"1.0-0"))}}var Ir,Tr=((Ir=function(){function e(){_classCallCheck(this,e),this.print=new I.o,this.type=!0,this._unsubscribeAll=new V.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.isprint&&(e.isprint.currentValue||null==e.isprint.currentValue)&&(this.isprint=e.isprint.currentValue),e.totalImp&&e.totalImp.currentValue&&(this.totalImp=e.totalImp.currentValue),e.totalExp&&e.totalExp.currentValue&&(this.totalExp=e.totalExp.currentValue)}}]),e}()).\u0275fac=function(e){return new(e||Ir)},Ir.\u0275cmp=I.Lb({type:Ir,selectors:[["soa-agent-view-form"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Jn,!0),2&e&&I.wc(n=I.gc())&&(t.invoice=n.first)},inputs:{height:"height",isprint:"isprint",agent:"agent",dateFrom:"dateFrom",dateTo:"dateTo",totalImp:"totalImp",totalExp:"totalExp",totalDem:"totalDem"},outputs:{print:"print"},features:[I.Bb()],decls:26,vars:6,consts:[["fxLayout","column","id","print-content",2,"overflow","auto"],["fxLayout","row","fxLayoutAlign","start",1,"invoice-container"],[1,"card"],["invoice",""],[1,"header"],["fxLayout","row","fxLayoutAlign","start"],["fxFlex","100","fxLayout","column",1,"header-label"],[1,"title","font-size-20",2,"font-family","verdana"],["fxLayout","row wrap","fxLayoutAlign","start",1,"font-size-18"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","start","fxFlex","1 1 auto"],["fxFlex","30"],["fxFlex","70"],["class","content","fxLayout","column",4,"ngIf"],["fxLayout","column",1,"content"],[1,"simple"],["class","text-bold accent-200-bg",4,"ngIf"],[1,"text-bold","accent-200-bg"],["fxLayout","column"],[1,"text-bold"],["class","text-right",4,"ngFor","ngForOf"],["class","text-right",3,"matTooltip",4,"ngIf"],[1,"text-right"],[4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right",3,"matTooltip"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"div",1),I.Xb(2,"div",2,3),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"div",6),I.Xb(7,"span",7),I.Lc(8,"SE GLOBAL CONTAINER LINES"),I.Wb(),I.Wb(),I.Wb(),I.Sb(9,"br"),I.Xb(10,"div",8),I.Xb(11,"div",9),I.Xb(12,"div",10),I.Xb(13,"div",11),I.Lc(14,"AGENT NAME :"),I.Wb(),I.Xb(15,"div",12),I.Lc(16),I.Wb(),I.Wb(),I.Wb(),I.Xb(17,"div",9),I.Xb(18,"div",10),I.Xb(19,"div",11),I.Lc(20,"SOA :"),I.Wb(),I.Xb(21,"div",12),I.Lc(22),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Sb(23,"br"),I.Sb(24,"br"),I.Jc(25,Or,115,72,"div",13),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Ic("height",t.height,"px"),I.Db(16),I.Mc(null==t.agent?null:t.agent.full_name),I.Db(6),I.Oc("from ",t.dateFrom?t.dateFrom:"..."," to ",t.dateTo?t.dateTo:"...",""),I.Db(3),I.pc("ngIf",t.agent))},directives:[$.d,$.c,$.b,T.t,T.s,u.a],pipes:[T.g],styles:["soa-agent-view-form{font-family:arial}soa-agent-view-form #print-content .invoice-container{padding:0}soa-agent-view-form #print-content .invoice-container .card{width:100%;padding:32px;overflow:hidden;background:#fff}soa-agent-view-form #print-content .invoice-container .card .header .client .invoice-number{font-size:9px;padding-bottom:4px}soa-agent-view-form #print-content .invoice-container .card .header .client .invoice-number .title{color:rgba(0,0,0,.54)}soa-agent-view-form #print-content .invoice-container .card .header .client .invoice-number .number{color:rgba(0,0,0,.87);padding-left:6px}soa-agent-view-form #print-content .invoice-container .card .header .client .info{font-size:7px;color:rgba(0,0,0,.54);line-height:10px}soa-agent-view-form #print-content .invoice-container .card .header .issuer .logo{padding:0}soa-agent-view-form #print-content .invoice-container .card .header .header-label .title{font-size:24px;font-weight:700}soa-agent-view-form #print-content .invoice-container .card .header .header-label .info{font-size:18px}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper{padding:0}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper .mat-form-field-flex{-webkit-box-align:center;align-items:center}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix,soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper .mat-form-field-flex .mat-input-element{display:none}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-prefix .mat-datepicker-toggle-default-icon,soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:24px;color:#039be5}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-underline{background:#fff}soa-agent-view-form #print-content .invoice-container .card .content .height19{height:19px}soa-agent-view-form #print-content .invoice-container .card .content .table-volume{border-collapse:collapse}soa-agent-view-form #print-content .invoice-container .card .content .table-volume td{border:1px solid #000}soa-agent-view-form #print-content .invoice-container .card .content #editClosingtime,soa-agent-view-form #print-content .invoice-container .card .content #editEtd,soa-agent-view-form #print-content .invoice-container .card .content #editTerminal{height:26px}@media print{soa-agent-view-form #print-content{height:auto!important;background:#fff}soa-agent-view-form #print-content .invoice-container{padding-left:20pt;padding-right:10pt}soa-agent-view-form #print-content .invoice-container .card{width:100%;min-width:0;background:none;padding:0;box-shadow:none}soa-agent-view-form #print-content .invoice-container .card .header .issuer{padding-right:0;margin-right:0}soa-agent-view-form #edit-button,soa-agent-view-form #editClosingtime,soa-agent-view-form #editEtd,soa-agent-view-form #editTerminal,soa-agent-view-form #mail-button,soa-agent-view-form #print-button,soa-agent-view-form #print-input-month{display:none}}"],encapsulation:2,data:{animation:ut.a}}),Ir);function Ar(e,t){if(1&e){var n=I.Yb();I.Xb(0,"fuse-sidebar",6),I.Xb(1,"div",7),I.Xb(2,"soa-agent-sidebar",8),I.fc("fitlerShipment",(function(e){return I.Bc(n),I.jc().fitlerShipment(e)}))("typeChange",(function(e){return I.Bc(n),I.jc().typeChange(e)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(2),I.pc("height",r.height)("type",r.type)("selected",r.selected)("total",r.total)("formSearch",r.formSearch)("customer",r.customer)("supplier",r.supplier)("agent",r.agent)("voyage",r.voyage)("price",r.price)("currency",r.currency)("country",r.country)}}var Mr,jr=((Mr=function(){function e(t,n,r,a,i,o,c){if(_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.soaAgentService=r,this.soaAgentDemService=a,this.commonService=i,this.datePipe=o,this.router=c,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this._unsubscribeAll=new V.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var s=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(s)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.soaAgentService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.soaAgentService.dataCustomer,e.supplier=e.soaAgentService.dataSupplier,e.users=e.soaAgentService.users})),this.soaAgentService.onDataItemChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.agent=e.soaAgentService.agent,e.commodity=e.soaAgentService.commodity,e.packageType=e.soaAgentService.packageType,e.currency=e.soaAgentService.currency,e.country=e.soaAgentService.country,e.depot=e.soaAgentService.depot,e.price=e.soaAgentService.price})),this.soaAgentService.onTypeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){setTimeout((function(){e.type=t}),100)})),this.soaAgentService.onVesselChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.shipmentsExp=t[0],e.voyageExp=t[1],e.arrTypeExp=t[2],e.sptPriceExp=t[3],e.dataBillExp=t[4],e.totalExp=t[5],e.selectAgent=e.soaAgentService.selectAgent,e.dateFrom=e.soaAgentService.dateFrom,e.dateTo=e.soaAgentService.dateTo})),this.soaAgentService.onVesselImpChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.shipmentsImp=t[0],e.voyageImp=t[1],e.arrTypeImp=t[2],e.sptPriceImp=t[3],e.dataBillImp=t[4],e.totalImp=t[5]})),this.soaAgentDemService.onEmptyChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.totalDem=e.soaAgentDemService.total}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.soaAgentService)}},{key:"fitlerShipment",value:function(e){var t=this;this.soaAgentService.currenSearch.formSearch=e,113==e.agent?(this.authService.onRequestChanged.next(!0),Promise.all([this.soaAgentService.getSelShipmentSoaAgent(e),this.soaAgentDemService.getShipments(e)]).then((function(e){t.authService.onRequestChanged.next(!1)}),(function(e){t.authService.onRequestChanged.next(!1),alert("Submit fail")}))):(this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then((function(e){t.authService.onRequestChanged.next(!1)})).catch((function(e){console.error(e),t.authService.onRequestChanged.next(!1),alert("Submit fail")})))}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"getReportData",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){console.log(t),e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"searchFilter",value:function(e){this.soaAgentService.onSearchTextChanged.next(e)}},{key:"typeChange",value:function(e){this.type=e}}]),e}()).\u0275fac=function(e){return new(e||Mr)(I.Rb(oe.a),I.Rb(J.a),I.Rb(pe),I.Rb(bt),I.Rb(B.a),I.Rb(T.f),I.Rb(r.g))},Mr.\u0275cmp=I.Lb({type:Mr,selectors:[["soa-agent-view"]],decls:6,vars:10,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"height","agent","dateFrom","dateTo","totalImp","totalExp","totalDem"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,Ar,3,12,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Sb(5,"soa-agent-view-form",5),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.pc("height",t.height)("agent",t.selectAgent)("dateFrom",t.dateFrom)("dateTo",t.dateTo)("totalImp",t.totalImp)("totalExp",t.totalExp)("totalDem",t.totalDem))},directives:[he.a,T.t,q.a,_e,Tr,ze.a,Pn],styles:["soa-agent-view{width:100%}"],encapsulation:2}),Mr);function Vr(e,t){if(1&e&&(I.Xb(0,"th",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("top",r.inverseOfTranslation),I.Db(1),I.Mc(n)}}function Pr(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),I.Lc(1,"add"),I.Wb()}}function Fr(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),I.Lc(1,"removed"),I.Wb()}}function Rr(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function Er(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),I.Lc(1,"add"),I.Wb()}}function Jr(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),I.Lc(1,"removed"),I.Wb()}}function Br(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function $r(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),I.Lc(1,"add"),I.Wb()}}function qr(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),I.Lc(1,"removed"),I.Wb()}}function zr(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function Ur(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),I.Lc(1,"add"),I.Wb()}}function Yr(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),I.Lc(1,"removed"),I.Wb()}}function Hr(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function Gr(e,t){if(1&e&&(I.Xb(0,"td",46),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc().$implicit,a=I.jc().$implicit;I.Db(1),I.Mc(r==n?a[n]:"")}}function Qr(e,t){1&e&&(I.Xb(0,"mat-chip"),I.Lc(1,"Booking"),I.Wb())}function Kr(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Stuffing"),I.Wb())}function Zr(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Ready to load"),I.Wb())}function ea(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Loaded"),I.Wb())}function ta(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Discharge"),I.Wb())}function na(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Pick up"),I.Wb())}function ra(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Complete"),I.Wb())}var aa=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function ia(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,aa,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function oa(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function ca(e,t){if(1&e&&(I.Vb(0),I.Jc(1,oa,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.revenueVNOpen)}}function sa(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,ca,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,aa,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}var la=function(e,t){return{paid:e,"accent-100-bg":t}};function ba(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).deletePrice.emit(r)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).createCom.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,la,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function ua(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,ba,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function pa(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,aa,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function ma(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function da(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ma,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.revenueNNOpen)}}function fa(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,da,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,aa,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}function ha(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).deletePrice.emit(r)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).createCom.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,la,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function ga(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,ha,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function va(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,aa,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function ya(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function xa(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ya,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.costVNOpen)}}function Sa(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,xa,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,aa,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}function Da(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).deletePrice.emit(r)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).createCom.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,la,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function _a(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Da,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function ka(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,aa,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function Xa(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function Wa(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Xa,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.costNNOpen)}}function wa(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Wa,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,aa,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}function Ca(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).deletePrice.emit(r)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).createCom.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,la,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function La(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Ca,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function Na(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",63),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2).$implicit;return I.jc(2).createItem.emit([t,"Revenue"])})),I.Xb(1,"mat-icon",64),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Revenue"),I.Wb(),I.Wb()}}function Oa(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",63),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2).$implicit;return I.jc(2).createItem.emit([t,"Cost"])})),I.Xb(1,"mat-icon",64),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Cost"),I.Wb(),I.Wb()}}var Ia=function(e){return{"row-even":e}},Ta=function(e){return{"red-600-fg":e}};function Aa(e,t){if(1&e){var n=I.Yb();I.Xb(0,"tr",26),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",27),I.Xb(4,"a",28),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit;return I.jc(2).openVessel.emit(t.key)})),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",29),I.Lc(7),I.Wb(),I.Xb(8,"td",4),I.Lc(9),I.Wb(),I.Xb(10,"td",4),I.Lc(11),I.Wb(),I.Xb(12,"td",5),I.Lc(13),I.kc(14,"date"),I.Wb(),I.Xb(15,"td",5),I.Lc(16),I.kc(17,"date"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Xb(20,"td",30),I.Xb(21,"a",31),I.Lc(22),I.Wb(),I.Wb(),I.Jc(23,Gr,2,1,"td",32),I.Xb(24,"td",33),I.Lc(25),I.Wb(),I.Xb(26,"td",33),I.Lc(27),I.Wb(),I.Xb(28,"td"),I.Xb(29,"mat-chip-list",34),I.Jc(30,Qr,2,0,"mat-chip",35),I.Jc(31,Kr,2,0,"mat-chip",36),I.Jc(32,Zr,2,0,"mat-chip",37),I.Jc(33,ea,2,0,"mat-chip",38),I.Jc(34,ta,2,0,"mat-chip",36),I.Jc(35,na,2,0,"mat-chip",37),I.Jc(36,ra,2,0,"mat-chip",38),I.Wb(),I.Wb(),I.Jc(37,ia,3,8,"td",39),I.Jc(38,sa,10,9,"td",40),I.Jc(39,ua,2,1,"td",40),I.Jc(40,pa,3,8,"td",39),I.Jc(41,fa,10,9,"td",40),I.Jc(42,ga,2,1,"td",40),I.Jc(43,va,3,8,"td",39),I.Jc(44,Sa,10,9,"td",40),I.Jc(45,_a,2,1,"td",40),I.Jc(46,ka,3,8,"td",39),I.Jc(47,wa,10,9,"td",40),I.Jc(48,La,2,1,"td",40),I.Xb(49,"td",41),I.Lc(50),I.kc(51,"number"),I.Wb(),I.Xb(52,"td",42),I.Xb(53,"mat-icon",43),I.fc("click",(function(e){return I.Bc(n),e.stopPropagation()})),I.Lc(54,"more_vert"),I.Wb(),I.Xb(55,"mat-menu",null,44),I.Jc(57,Na,5,0,"button",45),I.Jc(58,Oa,5,0,"button",45),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=t.$implicit,a=I.xc(56),i=I.jc(),o=i.index,c=i.$implicit,s=I.jc(2);I.pc("ngClass",I.rc(53,Ia,o%2==0)),I.Db(2),I.Mc(o+1),I.Db(3),I.Mc(c.vessel_full_name),I.Db(1),I.pc("matTooltip",c.supplier_name),I.Db(1),I.Mc(c.supplier_short_name),I.Db(2),I.Mc(c.pol_name),I.Db(2),I.Mc(c.pod_name),I.Db(2),I.Mc(I.mc(14,44,c.depart_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(I.mc(17,47,c.arrive_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(c.code),I.Db(1),I.pc("matTooltip",c.error),I.Db(1),I.pc("ngClass",I.rc(55,Ta,c.error))("routerLink","/apps/workflow/shipment/detail/"+c.id+"/soa"),I.Db(1),I.Mc(c.bill),I.Db(1),I.pc("ngForOf",s.arrType),I.Db(1),I.pc("matTooltip",c.customer_name),I.Db(1),I.Mc(c.customer_short_name),I.Db(1),I.pc("matTooltip",c.agent_name),I.Db(1),I.Mc(c.agent_short_name),I.Db(2),I.pc("ngSwitch",c.process),I.Db(1),I.pc("ngSwitchCase",0),I.Db(1),I.pc("ngSwitchCase",1),I.Db(1),I.pc("ngSwitchCase",2),I.Db(1),I.pc("ngSwitchCase",3),I.Db(1),I.pc("ngSwitchCase",4),I.Db(1),I.pc("ngSwitchCase",5),I.Db(1),I.pc("ngSwitchCase",6),I.Db(1),I.pc("ngIf",!s.revenueVNOpen),I.Db(1),I.pc("ngIf",s.revenueVNOpen),I.Db(1),I.pc("ngIf",s.revenueVNOpen),I.Db(1),I.pc("ngIf",!s.revenueNNOpen),I.Db(1),I.pc("ngIf",s.revenueNNOpen),I.Db(1),I.pc("ngIf",s.revenueNNOpen),I.Db(1),I.pc("ngIf",!s.costVNOpen),I.Db(1),I.pc("ngIf",s.costVNOpen),I.Db(1),I.pc("ngIf",s.costVNOpen),I.Db(1),I.pc("ngIf",!s.costNNOpen),I.Db(1),I.pc("ngIf",s.costNNOpen),I.Db(1),I.pc("ngIf",s.costNNOpen),I.Db(1),I.pc("ngClass",I.sc(57,aa,c.profit["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]+c.profit["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]<0,c.profit["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]+c.profit["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]>=0)),I.Db(1),I.Mc(I.mc(51,50,c.profit["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]+c.profit["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)],"1.0-0")),I.Db(3),I.pc("matMenuTriggerFor",a),I.Db(4),I.pc("ngIf",s.permission.create),I.Db(1),I.pc("ngIf",s.permission.create)}}function Ma(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Aa,59,60,"tr",25),I.Ub()),2&e){var n=t.$implicit;I.Db(1),I.pc("ngForOf",n.volume)}}function ja(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,r.total[n],"1.0-0"))}}function Va(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.revenueVN.ALL,"1.0-0"))}}function Pa(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.revenueVN[n],"VND"==n?"1.0-0":"1.2-2"))}}function Fa(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Pa,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.revenueVN[n])}}function Ra(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Fa,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.revenueVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function Ea(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function Ja(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.revenueNN.ALL,"1.0-0"))}}function Ba(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.revenueNN[n],"VND"==n?"1.0-0":"1.2-2"))}}function $a(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ba,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.revenueNN[n])}}function qa(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,$a,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.revenueNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function za(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function Ua(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.costVN.ALL,"1.0-0"))}}function Ya(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.costVN[n],"VND"==n?"1.0-0":"1.2-2"))}}function Ha(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ya,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.costVN[n])}}function Ga(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ha,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.costVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function Qa(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function Ka(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.costNN.ALL,"1.0-0"))}}function Za(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.costNN[n],"VND"==n?"1.0-0":"1.2-2"))}}function ei(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Za,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.costNN[n])}}function ti(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,ei,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.costNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function ni(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function ri(e,t){if(1&e){var n=I.Yb();I.Xb(0,"table",2),I.Xb(1,"thead"),I.Xb(2,"tr"),I.Xb(3,"th"),I.Lc(4,"No"),I.Wb(),I.Xb(5,"th",3),I.Lc(6,"Voyage"),I.Wb(),I.Xb(7,"th",4),I.Lc(8,"Supplier"),I.Wb(),I.Xb(9,"th",4),I.Lc(10,"POL"),I.Wb(),I.Xb(11,"th",4),I.Lc(12,"POD"),I.Wb(),I.Xb(13,"th",5),I.Lc(14,"ETD"),I.Wb(),I.Xb(15,"th",5),I.Lc(16,"ETA"),I.Wb(),I.Xb(17,"th"),I.Lc(18,"Shipment"),I.Wb(),I.Xb(19,"th",6),I.Lc(20,"Bill"),I.Wb(),I.Jc(21,Vr,2,3,"th",7),I.Xb(22,"th"),I.Lc(23,"Customer"),I.Wb(),I.Xb(24,"th"),I.Lc(25,"Agent"),I.Wb(),I.Xb(26,"th"),I.Lc(27,"Process"),I.Wb(),I.Xb(28,"th"),I.Xb(29,"div",8),I.Xb(30,"span"),I.Lc(31,"REVENUE VN"),I.Wb(),I.Jc(32,Pr,2,0,"mat-icon",9),I.Jc(33,Fr,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(34,Rr,2,2,"th",11),I.Xb(35,"th"),I.Xb(36,"div",8),I.Xb(37,"span"),I.Lc(38,"REVENUE NN"),I.Wb(),I.Jc(39,Er,2,0,"mat-icon",9),I.Jc(40,Jr,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(41,Br,2,2,"th",11),I.Xb(42,"th"),I.Xb(43,"div",8),I.Xb(44,"span"),I.Lc(45,"COST VN"),I.Wb(),I.Jc(46,$r,2,0,"mat-icon",9),I.Jc(47,qr,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(48,zr,2,2,"th",11),I.Xb(49,"th"),I.Xb(50,"div",8),I.Xb(51,"span"),I.Lc(52,"COST NN"),I.Wb(),I.Jc(53,Ur,2,0,"mat-icon",9),I.Jc(54,Yr,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(55,Hr,2,2,"th",11),I.Xb(56,"th",12),I.Lc(57,"PROFIT"),I.Wb(),I.Xb(58,"th",13),I.Xb(59,"mat-icon",14),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return e.stopPropagation(),t.printExcel.emit()})),I.Lc(60,"print"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(61,"tbody"),I.Jc(62,Ma,2,1,"ng-container",15),I.Wb(),I.Xb(63,"tfoot"),I.Xb(64,"tr"),I.Sb(65,"td"),I.Xb(66,"td",16),I.Lc(67,"Total"),I.Wb(),I.Sb(68,"td"),I.Sb(69,"td"),I.Sb(70,"td"),I.Sb(71,"td"),I.Sb(72,"td"),I.Sb(73,"td"),I.Sb(74,"td"),I.Jc(75,ja,3,6,"td",17),I.Sb(76,"td"),I.Sb(77,"td"),I.Sb(78,"td"),I.Jc(79,Va,3,6,"td",18),I.Jc(80,Ra,10,7,"td",19),I.Jc(81,Ea,1,2,"td",20),I.Jc(82,Ja,3,6,"td",18),I.Jc(83,qa,10,7,"td",19),I.Jc(84,za,1,2,"td",20),I.Jc(85,Ua,3,6,"td",18),I.Jc(86,Ga,10,7,"td",19),I.Jc(87,Qa,1,2,"td",20),I.Jc(88,Ka,3,6,"td",18),I.Jc(89,ti,10,7,"td",19),I.Jc(90,ni,1,2,"td",20),I.Xb(91,"td",21),I.Lc(92),I.kc(93,"number"),I.Wb(),I.Sb(94,"td"),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(3),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.pc("ngForOf",r.arrType),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("cdkVirtualForOf",r.data),I.Db(3),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(2),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.pc("ngForOf",r.arrType),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.pc("ngIf",!r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.pc("ngIf",!r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.pc("ngIf",!r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.pc("ngIf",!r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(93,92,r.total.revenueVN.ALL+r.total.revenueNN.ALL-r.total.costVN.ALL-r.total.costNN.ALL,"1.0-0")),I.Db(2),I.Ic("bottom",r.inverseOfTranslation2)}}var ai,ii=((ai=function(){function e(t,n){_classCallCheck(this,e),this.commonService=t,this.changeDetector=n,this.createItem=new I.o,this.openVessel=new I.o,this.deletePrice=new I.o,this.createCom=new I.o,this.printExcel=new I.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new V.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,console.log(this.data))}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||ai)(I.Rb(B.a),I.Rb(I.h))},ai.\u0275cmp=I.Lb({type:ai,selectors:[["soa-agent-export-table"]],viewQuery:function(e,t){var n;1&e&&I.Sc(ke.e,!0),2&e&&I.wc(n=I.gc())&&(t.viewPort=n.first)},inputs:{data:"data",shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total"},outputs:{createItem:"createItem",openVessel:"openVessel",deletePrice:"deletePrice",createCom:"createCom",printExcel:"printExcel"},features:[I.Bb()],decls:2,vars:1,consts:[["autosize","",1,"h-100-p"],["class","report-table",4,"ngIf"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["color","accent","aria-label","Print",1,"cursor-pointer",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],["class","text-right text-bold teal-200-bg",3,"bottom",4,"ngIf"],["style","padding: 0",3,"bottom",4,"ngIf"],[3,"bottom",4,"ngIf"],[1,"text-right","text-bold","sticky-right-col",2,"z-index","30"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"w-152","sticky-col"],[1,"cursor-pointer",3,"click"],[1,"w-112",3,"matTooltip"],[1,"w-152","sticky-col2",3,"matTooltip"],[1,"cursor-pointer",3,"ngClass","routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["class","text-right text-bold",3,"ngClass",4,"ngIf"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[1,"text-right","text-bold",3,"ngClass"],[2,"padding","0"],[1,"text-right","text-bold","w-100",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes"],[1,"mb-4","font-size-10"],[1,"text-right","text-bold"],[4,"ngFor","ngForOf"],["class","text-right border-right w-80",4,"ngIf"],[1,"text-right","border-right","w-80"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10",3,"click"],[1,"text-right","text-bold",3,"click"],["mat-menu-item","","aria-label","remove",3,"click"],["color","accent"],[1,"text-center","text-bold"],[1,"text-right","text-bold","teal-200-bg"],[1,"text-right","text-bold","w-100"]],template:function(e,t){1&e&&(I.Xb(0,"cdk-virtual-scroll-viewport",0),I.Jc(1,ri,95,95,"table",1),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.data&&t.data.length>0))},directives:[ke.e,Xe.a,T.t,T.s,$.d,$.c,b.a,ke.d,T.q,ve.a,u.a,r.j,S.c,T.x,T.y,a.c,a.d,S.a,a.a],pipes:[T.g,T.f],styles:["soa-agent-export-table .report-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}soa-agent-export-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}soa-agent-export-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-export-table .report-table td,soa-agent-export-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}soa-agent-export-table .report-table td .mat-standard-chip,soa-agent-export-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}soa-agent-export-table .report-table .paid{background:#fff;color:#000}soa-agent-export-table .report-table .cost-paid{background:#ffe1c2;color:#000}soa-agent-export-table .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}soa-agent-export-table .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}soa-agent-export-table .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}soa-agent-export-table .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}soa-agent-export-table .report-table .row-even{background-color:#eee!important}"],encapsulation:2,data:{animation:ut.a}}),ai);function oi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"fuse-sidebar",7),I.Xb(1,"div",8),I.Xb(2,"soa-agent-sidebar",9),I.fc("fitlerShipment",(function(e){return I.Bc(n),I.jc().fitlerShipment(e)}))("typeChange",(function(e){return I.Bc(n),I.jc().typeChange(e)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(2),I.pc("height",r.height)("type",r.type)("selected",r.selected)("total",r.total)("formSearch",r.formSearch)("customer",r.customer)("supplier",r.supplier)("agent",r.agent)("price",r.price)("currency",r.currency)("country",r.country)}}var ci,si=((ci=function(){function e(t,n,r,a,i,o,c){if(_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.soaAgentService=r,this.commonService=a,this.datePipe=i,this._matDialog=o,this.router=c,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this._unsubscribeAll=new V.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var s=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(s)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.soaAgentService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.soaAgentService.dataCustomer,e.supplier=e.soaAgentService.dataSupplier,e.users=e.soaAgentService.users})),this.soaAgentService.onDataItemChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.agent=e.soaAgentService.agent,e.commodity=e.soaAgentService.commodity,e.packageType=e.soaAgentService.packageType,e.currency=e.soaAgentService.currency,e.country=e.soaAgentService.country,e.depot=e.soaAgentService.depot,e.price=e.soaAgentService.price})),this.soaAgentService.onTypeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){setTimeout((function(){e.type=t}),100)})),this.soaAgentService.onVesselChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.shipments=t[0],e.voyage=t[1],e.arrType=t[2],e.sptPrice=t[3],e.dataBill=t[4],e.total=t[5]}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.soaAgentService)}},{key:"fitlerShipment",value:function(e){var t=this;this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then((function(n){t.soaAgentService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"getReportData",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){console.log(t),e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"searchFilter",value:function(e){this.soaAgentService.onSearchTextChanged.next(e)}},{key:"typeChange",value:function(e){this.type=e}},{key:"createItem",value:function(e){var t=this,n=e[1],r=JSON.parse(JSON.stringify(e[0]));if("Revenue"==n){this.partner=this.customer;var a=this.supplier.find((function(e){return e.id==t.formSearch.agent}));if(a){var i=this.customer.find((function(e){return e.short_name==a.short_name}));r.customer=i.id}}"Cost"==n&&(this.partner=this.supplier,r.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ie.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+n,shipmentId:r.id,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:r}}),this.dialogRef.componentInstance.createItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),n){case"Revenue":t.soaAgentService.createSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+n}));break;case"Cost":t.soaAgentService.createSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+n}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getShipment()}))}},{key:"deletePrice",value:function(e){var t=this;if(1==this.authService.user&&confirm("Do you want to delete this item?")){this.authService.onRequestChanged.next(!0);var n=e.type_name;switch(n){case"Revenue":this.soaAgentService.deleteSelRevenue(e.id).then((function(e){t.authService.onRequestChanged.next(!1),t.getShipment()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+n+" error")}));break;case"Cost":this.soaAgentService.deleteSelCost(e.id).then((function(e){t.authService.onRequestChanged.next(!1),t.getShipment()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+n+" error")}))}}}},{key:"createCom",value:function(e){var t=this;if(e.price_code.includes("OF")&&1==this.authService.user){var n=e.price_code.includes(20)?"ADF20":"ADF40",r=this.price.find((function(e){return e.code==n})),a=this.currency.find((function(e){return"USD"==e.code})),i=this.supplier.find((function(e){return 113==e.id})),o=5*e.amount/100,c=(e.price_code.includes(20),10);o=o<c?c:o,this.createData("Cost",{shipment:e.shipment,price:r,volume:e.volume,amount:o,tax:0,tax_amount:0,currency:a.id,ex_rate:a.exrate,payment_center:i.country,issue_party:i.id,update_by:this.authService.user,create_by:this.authService.user})}else if(1==this.authService.user){var s=e.type_name,l=JSON.parse(JSON.stringify(e));if("Revenue"==s){this.partner=this.customer;var b=this.supplier.find((function(e){return e.id==t.formSearch.agent}));if(b){var u=this.customer.find((function(e){return e.short_name==b.short_name}));l.customer=u.id}}"Cost"==s&&(this.partner=this.supplier,l.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ie.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Edit "+s,shipmentId:l.shipment,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:l,data:l}}),this.dialogRef.componentInstance.updateItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),s){case"Revenue":t.soaAgentService.updateSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.affectedRows>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error update "+s)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+s}));break;case"Cost":t.soaAgentService.updateSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.affectedRows>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error update "+s)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+s}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getShipment()}))}}},{key:"createData",value:function(e,t){var n=this;switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":this.soaAgentService.createSelRevenue(t).then((function(e){n.authService.onRequestChanged.next(!1),n.getShipment()})).catch((function(t){n.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}));break;case"Cost":this.soaAgentService.createSelCost(t).then((function(e){n.authService.onRequestChanged.next(!1),n.getShipment()})).catch((function(t){n.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}))}}},{key:"printExcel",value:function(e){this.soaAgentService.buildExcelData()}}]),e}()).\u0275fac=function(e){return new(e||ci)(I.Rb(oe.a),I.Rb(J.a),I.Rb(pe),I.Rb(B.a),I.Rb(T.f),I.Rb(h.b),I.Rb(r.g))},ci.\u0275cmp=I.Lb({type:ci,selectors:[["soa-agent-export"]],decls:7,vars:12,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[2,"overflow","auto"],[3,"data","arrType","shipments","voyage","price","permission","total","createItem","deletePrice","createCom","printExcel"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,oi,3,11,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"soa-agent-export-table",6),I.fc("createItem",(function(e){return t.createItem(e)}))("deletePrice",(function(e){return t.deletePrice(e)}))("createCom",(function(e){return t.createCom(e)}))("printExcel",(function(e){return t.printExcel(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.Ic("height",t.height,"px"),I.Db(1),I.pc("data",t.dataBill)("arrType",t.arrType)("shipments",t.shipments)("voyage",t.voyage)("price",t.price)("permission",t.permission)("total",t.total))},directives:[he.a,T.t,q.a,_e,ii,ze.a,Pn],styles:["soa-agent-export{width:100%}"],encapsulation:2}),ci);function li(e,t){if(1&e&&(I.Xb(0,"th",22),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("top",r.inverseOfTranslation),I.Db(1),I.Mc(n)}}function bi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),I.Lc(1,"add"),I.Wb()}}function ui(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),I.Lc(1,"removed"),I.Wb()}}function pi(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function mi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),I.Lc(1,"add"),I.Wb()}}function di(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),I.Lc(1,"removed"),I.Wb()}}function fi(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function hi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),I.Lc(1,"add"),I.Wb()}}function gi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),I.Lc(1,"removed"),I.Wb()}}function vi(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function yi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),I.Lc(1,"add"),I.Wb()}}function xi(e,t){if(1&e){var n=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2);return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),I.Lc(1,"removed"),I.Wb()}}function Si(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){var n=I.jc(2);I.Ic("top",n.inverseOfTranslation)}}function Di(e,t){if(1&e&&(I.Xb(0,"td",46),I.Lc(1),I.Wb()),2&e){var n=t.$implicit,r=I.jc().$implicit,a=I.jc().$implicit;I.Db(1),I.Mc(r==n?a[n]:"")}}function _i(e,t){1&e&&(I.Xb(0,"mat-chip"),I.Lc(1,"Booking"),I.Wb())}function ki(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Stuffing"),I.Wb())}function Xi(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Ready to load"),I.Wb())}function Wi(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Loaded"),I.Wb())}function wi(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Discharge"),I.Wb())}function Ci(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Pick up"),I.Wb())}function Li(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Complete"),I.Wb())}var Ni=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function Oi(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,Ni,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function Ii(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function Ti(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ii,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.revenueVNOpen)}}function Ai(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ti,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Ni,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}var Mi=function(e,t){return{paid:e,"accent-100-bg":t}};function ji(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).editItem.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Mi,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function Vi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,ji,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function Pi(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,Ni,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function Fi(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function Ri(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Fi,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.revenueNNOpen)}}function Ei(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ri,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Ni,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}function Ji(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).editItem.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Mi,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function Bi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Ji,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function $i(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,Ni,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function qi(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function zi(e,t){if(1&e&&(I.Vb(0),I.Jc(1,qi,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.costVNOpen)}}function Ui(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,zi,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Ni,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}function Yi(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).editItem.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Mi,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function Hi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Yi,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function Gi(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.pc("ngClass",I.sc(5,Ni,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(1),I.Mc(I.mc(2,2,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0"))}}function Qi(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit;I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,a.profitCurrency["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n],"VND"==n?"1.0-0":"1.2-2"))}}function Ki(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Qi,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(2).$implicit,a=I.jc().$implicit,i=I.jc(2);I.Db(1),I.pc("ngIf",a.profitCurrency["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)][n]&&i.costNNOpen)}}function Zi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ki,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Ni,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]<0,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)]>=0)),I.Db(5),I.Mc(I.mc(8,3,r.profit["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)],"1.0-0")),I.Db(2),I.pc("ngForOf",r.currency)}}function eo(e,t){if(1&e){var n=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(e){I.Bc(n);var r=t.$implicit;return I.jc(5).editItem.emit(r)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){var r=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Mi,!!r.pay_date,!r.pay_date)),I.Db(1),I.pc("matTooltip",r.country_code),I.Db(2),I.Oc("",r.price_code," ",r.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,r.total_amount+r.total_tax,"VND"==r.currency_code?"1.0-0":"1.2-2"))}}function to(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,eo,8,11,"ng-container",56),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc().$implicit;I.Db(1),I.pc("ngForOf",r["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)])}}function no(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2).$implicit;return I.jc(2).createItem.emit([t,"Revenue"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Revenue"),I.Wb(),I.Wb()}}function ro(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(e){I.Bc(n);var t=I.jc(2).$implicit;return I.jc(2).createItem.emit([t,"Cost"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Cost"),I.Wb(),I.Wb()}}function ao(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit,r=I.jc().$implicit;return I.jc(2).addPrice.emit([r,"Revenue",t,r[t],"DTHC"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4),I.Wb(),I.Wb()}if(2&e){var r=I.jc().$implicit;I.Db(4),I.Nc("Revenue SIMBA DTHC ",r,"")}}function io(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit,r=I.jc().$implicit;return I.jc(2).addPrice.emit([r,"Cost",t,r[t],"ADF"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4),I.Wb(),I.Wb()}if(2&e){var r=I.jc().$implicit;I.Db(4),I.Nc("Cost SIMBA ADF ",r,"")}}function oo(e,t){if(1&e){var n=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit,r=I.jc().$implicit;return I.jc(2).addPrice.emit([r,"Cost",t,r[t],"DIS"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4),I.Wb(),I.Wb()}if(2&e){var r=I.jc().$implicit;I.Db(4),I.Nc("Cost SIMBA DIS ",r,"")}}var co=function(e){return{"row-even":e}},so=function(e){return{"red-600-fg":e}};function lo(e,t){if(1&e){var n=I.Yb();I.Xb(0,"tr",26),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",27),I.Xb(4,"a",28),I.fc("click",(function(e){I.Bc(n);var t=I.jc().$implicit;return I.jc(2).openVessel.emit(t.key)})),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",29),I.Lc(7),I.Wb(),I.Xb(8,"td",4),I.Lc(9),I.Wb(),I.Xb(10,"td",4),I.Lc(11),I.Wb(),I.Xb(12,"td",5),I.Lc(13),I.kc(14,"date"),I.Wb(),I.Xb(15,"td",5),I.Lc(16),I.kc(17,"date"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Xb(20,"td",30),I.Xb(21,"a",31),I.Lc(22),I.Wb(),I.Wb(),I.Jc(23,Di,2,1,"td",32),I.Xb(24,"td",33),I.Lc(25),I.Wb(),I.Xb(26,"td",33),I.Lc(27),I.Wb(),I.Xb(28,"td"),I.Xb(29,"mat-chip-list",34),I.Jc(30,_i,2,0,"mat-chip",35),I.Jc(31,ki,2,0,"mat-chip",36),I.Jc(32,Xi,2,0,"mat-chip",37),I.Jc(33,Wi,2,0,"mat-chip",38),I.Jc(34,wi,2,0,"mat-chip",36),I.Jc(35,Ci,2,0,"mat-chip",37),I.Jc(36,Li,2,0,"mat-chip",38),I.Wb(),I.Wb(),I.Jc(37,Oi,3,8,"td",39),I.Jc(38,Ai,10,9,"td",40),I.Jc(39,Vi,2,1,"td",40),I.Jc(40,Pi,3,8,"td",39),I.Jc(41,Ei,10,9,"td",40),I.Jc(42,Bi,2,1,"td",40),I.Jc(43,$i,3,8,"td",39),I.Jc(44,Ui,10,9,"td",40),I.Jc(45,Hi,2,1,"td",40),I.Jc(46,Gi,3,8,"td",39),I.Jc(47,Zi,10,9,"td",40),I.Jc(48,to,2,1,"td",40),I.Xb(49,"td",41),I.Lc(50),I.kc(51,"number"),I.Wb(),I.Xb(52,"td",42),I.Lc(53),I.Xb(54,"mat-icon",43),I.fc("click",(function(e){return I.Bc(n),e.stopPropagation()})),I.Lc(55,"more_vert"),I.Wb(),I.Xb(56,"mat-menu",null,44),I.Jc(58,no,5,0,"button",45),I.Jc(59,ro,5,0,"button",45),I.Jc(60,ao,5,1,"button",45),I.Jc(61,io,5,1,"button",45),I.Jc(62,oo,5,1,"button",45),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=t.$implicit,a=I.xc(57),i=I.jc(),o=i.index,c=i.$implicit,s=I.jc(2);I.pc("ngClass",I.rc(57,co,o%2==0)),I.Db(2),I.Mc(o+1),I.Db(3),I.Mc(c.vessel_full_name),I.Db(1),I.pc("matTooltip",c.supplier_name),I.Db(1),I.Mc(c.supplier_short_name),I.Db(2),I.Mc(c.pol_name),I.Db(2),I.Mc(c.pod_name),I.Db(2),I.Mc(I.mc(14,48,c.depart_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(I.mc(17,51,c.arrive_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(c.code),I.Db(1),I.pc("matTooltip",c.error),I.Db(1),I.pc("ngClass",I.rc(59,so,c.error))("routerLink","/apps/workflow/shipment/detail/"+c.id+"/soa"),I.Db(1),I.Mc(c.bill),I.Db(1),I.pc("ngForOf",s.arrType),I.Db(1),I.pc("matTooltip",c.customer_name),I.Db(1),I.Mc(c.customer_short_name),I.Db(1),I.pc("matTooltip",c.agent_name),I.Db(1),I.Mc(c.agent_short_name),I.Db(2),I.pc("ngSwitch",c.process),I.Db(1),I.pc("ngSwitchCase",0),I.Db(1),I.pc("ngSwitchCase",1),I.Db(1),I.pc("ngSwitchCase",2),I.Db(1),I.pc("ngSwitchCase",3),I.Db(1),I.pc("ngSwitchCase",4),I.Db(1),I.pc("ngSwitchCase",5),I.Db(1),I.pc("ngSwitchCase",6),I.Db(1),I.pc("ngIf",!s.revenueVNOpen),I.Db(1),I.pc("ngIf",s.revenueVNOpen),I.Db(1),I.pc("ngIf",s.revenueVNOpen),I.Db(1),I.pc("ngIf",!s.revenueNNOpen),I.Db(1),I.pc("ngIf",s.revenueNNOpen),I.Db(1),I.pc("ngIf",s.revenueNNOpen),I.Db(1),I.pc("ngIf",!s.costVNOpen),I.Db(1),I.pc("ngIf",s.costVNOpen),I.Db(1),I.pc("ngIf",s.costVNOpen),I.Db(1),I.pc("ngIf",!s.costNNOpen),I.Db(1),I.pc("ngIf",s.costNNOpen),I.Db(1),I.pc("ngIf",s.costNNOpen),I.Db(1),I.pc("ngClass",I.sc(61,Ni,c.profit["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]+c.profit["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]<0,c.profit["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]+c.profit["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]>=0)),I.Db(1),I.Mc(I.mc(51,54,c.profit["revenueVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]+c.profit["revenueNN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costVN"+(r.includes("20")?"20":r.includes("40")?"40":r)]-c.profit["costNN"+(r.includes("20")?"20":r.includes("40")?"40":r)],"1.0-0")),I.Db(3),I.Nc(" ",s.user," "),I.Db(1),I.pc("matMenuTriggerFor",a),I.Db(4),I.pc("ngIf",s.permission.create),I.Db(1),I.pc("ngIf",s.permission.create),I.Db(1),I.pc("ngIf",s.formSearch&&113==s.formSearch.agent&&"Spt"!=r),I.Db(1),I.pc("ngIf",s.formSearch&&113==s.formSearch.agent&&"Spt"!=r&&1==s.user),I.Db(1),I.pc("ngIf",s.formSearch&&113==s.formSearch.agent&&"Spt"!=r&&1==s.user)}}function bo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,lo,63,64,"tr",25),I.Ub()),2&e){var n=t.$implicit;I.Db(1),I.pc("ngForOf",n.volume)}}function uo(e,t){if(1&e&&(I.Xb(0,"td",64),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=t.$implicit,r=I.jc(2);I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,r.total[n],"1.0-0"))}}function po(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.revenueVN.ALL,"1.0-0"))}}function mo(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.revenueVN[n],"VND"==n?"1.0-0":"1.2-2"))}}function fo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,mo,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.revenueVN[n])}}function ho(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,fo,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.revenueVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function go(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function vo(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.revenueNN.ALL,"1.0-0"))}}function yo(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.revenueNN[n],"VND"==n?"1.0-0":"1.2-2"))}}function xo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,yo,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.revenueNN[n])}}function So(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,xo,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.revenueNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function Do(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function _o(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.costVN.ALL,"1.0-0"))}}function ko(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.costVN[n],"VND"==n?"1.0-0":"1.2-2"))}}function Xo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ko,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.costVN[n])}}function Wo(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Xo,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.costVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function wo(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function Co(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total.costNN.ALL,"1.0-0"))}}function Lo(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){var n=I.jc().$implicit,r=I.jc(3);I.Db(3),I.Mc(n),I.Db(2),I.Mc(I.mc(6,2,r.total.costNN[n],"VND"==n?"1.0-0":"1.2-2"))}}function No(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Lo,7,5,"td",57),I.Ub()),2&e){var n=t.$implicit,r=I.jc(3);I.Db(1),I.pc("ngIf",r.total.costNN[n])}}function Oo(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,No,2,1,"ng-container",56),I.Wb()),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,n.total.costNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",n.total.currency)}}function Io(e,t){if(1&e&&I.Sb(0,"td"),2&e){var n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2)}}function To(e,t){if(1&e){var n=I.Yb();I.Xb(0,"table",2),I.Xb(1,"thead"),I.Xb(2,"tr"),I.Xb(3,"th"),I.Lc(4,"No"),I.Wb(),I.Xb(5,"th",3),I.Lc(6,"Voyage"),I.Wb(),I.Xb(7,"th",4),I.Lc(8,"Supplier"),I.Wb(),I.Xb(9,"th",4),I.Lc(10,"POL"),I.Wb(),I.Xb(11,"th",4),I.Lc(12,"POD"),I.Wb(),I.Xb(13,"th",5),I.Lc(14,"ETD"),I.Wb(),I.Xb(15,"th",5),I.Lc(16,"ETA"),I.Wb(),I.Xb(17,"th"),I.Lc(18,"Shipment"),I.Wb(),I.Xb(19,"th",6),I.Lc(20,"Bill"),I.Wb(),I.Jc(21,li,2,3,"th",7),I.Xb(22,"th"),I.Lc(23,"Customer"),I.Wb(),I.Xb(24,"th"),I.Lc(25,"Agent"),I.Wb(),I.Xb(26,"th"),I.Lc(27,"Process"),I.Wb(),I.Xb(28,"th"),I.Xb(29,"div",8),I.Xb(30,"span"),I.Lc(31,"REVENUE VN"),I.Wb(),I.Jc(32,bi,2,0,"mat-icon",9),I.Jc(33,ui,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(34,pi,2,2,"th",11),I.Xb(35,"th"),I.Xb(36,"div",8),I.Xb(37,"span"),I.Lc(38,"REVENUE NN"),I.Wb(),I.Jc(39,mi,2,0,"mat-icon",9),I.Jc(40,di,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(41,fi,2,2,"th",11),I.Xb(42,"th"),I.Xb(43,"div",8),I.Xb(44,"span"),I.Lc(45,"COST VN"),I.Wb(),I.Jc(46,hi,2,0,"mat-icon",9),I.Jc(47,gi,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(48,vi,2,2,"th",11),I.Xb(49,"th"),I.Xb(50,"div",8),I.Xb(51,"span"),I.Lc(52,"COST NN"),I.Wb(),I.Jc(53,yi,2,0,"mat-icon",9),I.Jc(54,xi,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(55,Si,2,2,"th",11),I.Xb(56,"th",12),I.Lc(57,"PROFIT"),I.Wb(),I.Xb(58,"th",13),I.Xb(59,"mat-icon",14),I.fc("click",(function(e){I.Bc(n);var t=I.jc();return e.stopPropagation(),t.printExcel.emit()})),I.Lc(60,"print"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(61,"tbody"),I.Jc(62,bo,2,1,"ng-container",15),I.Wb(),I.Xb(63,"tfoot"),I.Xb(64,"tr"),I.Sb(65,"td"),I.Xb(66,"td",16),I.Lc(67,"Total"),I.Wb(),I.Sb(68,"td"),I.Sb(69,"td"),I.Sb(70,"td"),I.Sb(71,"td"),I.Sb(72,"td"),I.Sb(73,"td"),I.Sb(74,"td"),I.Jc(75,uo,3,6,"td",17),I.Sb(76,"td"),I.Sb(77,"td"),I.Sb(78,"td"),I.Jc(79,po,3,6,"td",18),I.Jc(80,ho,10,7,"td",19),I.Jc(81,go,1,2,"td",20),I.Jc(82,vo,3,6,"td",18),I.Jc(83,So,10,7,"td",19),I.Jc(84,Do,1,2,"td",20),I.Jc(85,_o,3,6,"td",18),I.Jc(86,Wo,10,7,"td",19),I.Jc(87,wo,1,2,"td",20),I.Jc(88,Co,3,6,"td",18),I.Jc(89,Oo,10,7,"td",19),I.Jc(90,Io,1,2,"td",20),I.Xb(91,"td",21),I.Lc(92),I.kc(93,"number"),I.Wb(),I.Sb(94,"td"),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(3),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.pc("ngForOf",r.arrType),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("ngIf",!r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.Ic("top",r.inverseOfTranslation),I.Db(2),I.Ic("top",r.inverseOfTranslation),I.Db(4),I.pc("cdkVirtualForOf",r.data),I.Db(3),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(2),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.pc("ngForOf",r.arrType),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.pc("ngIf",!r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.pc("ngIf",r.revenueVNOpen),I.Db(1),I.pc("ngIf",!r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.pc("ngIf",r.revenueNNOpen),I.Db(1),I.pc("ngIf",!r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.pc("ngIf",r.costVNOpen),I.Db(1),I.pc("ngIf",!r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.pc("ngIf",r.costNNOpen),I.Db(1),I.Ic("bottom",r.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(93,92,r.total.revenueVN.ALL+r.total.revenueNN.ALL-r.total.costVN.ALL-r.total.costNN.ALL,"1.0-0")),I.Db(2),I.Ic("bottom",r.inverseOfTranslation2)}}var Ao,Mo=((Ao=function(){function e(t,n){_classCallCheck(this,e),this.commonService=t,this.changeDetector=n,this.createItem=new I.o,this.openVessel=new I.o,this.deletePrice=new I.o,this.printExcel=new I.o,this.addPrice=new I.o,this.editItem=new I.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new V.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,console.log(this.data))}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||Ao)(I.Rb(B.a),I.Rb(I.h))},Ao.\u0275cmp=I.Lb({type:Ao,selectors:[["soa-agent-import-table"]],viewQuery:function(e,t){var n;1&e&&I.Sc(ke.e,!0),2&e&&I.wc(n=I.gc())&&(t.viewPort=n.first)},inputs:{data:"data",shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total",formSearch:"formSearch",user:"user"},outputs:{createItem:"createItem",openVessel:"openVessel",deletePrice:"deletePrice",printExcel:"printExcel",addPrice:"addPrice",editItem:"editItem"},features:[I.Bb()],decls:2,vars:1,consts:[["autosize","",1,"h-100-p"],["class","report-table",4,"ngIf"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["color","accent","aria-label","Print",1,"cursor-pointer",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],["class","text-right text-bold teal-200-bg",3,"bottom",4,"ngIf"],["style","padding: 0",3,"bottom",4,"ngIf"],[3,"bottom",4,"ngIf"],[1,"text-right","text-bold","sticky-right-col",2,"z-index","30"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"w-152","sticky-col"],[1,"cursor-pointer",3,"click"],[1,"w-112",3,"matTooltip"],[1,"w-152","sticky-col2",3,"matTooltip"],[1,"cursor-pointer",3,"ngClass","routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["class","text-right text-bold",3,"ngClass",4,"ngIf"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","add",3,"click",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[1,"text-right","text-bold",3,"ngClass"],[2,"padding","0"],[1,"text-right","text-bold","w-100",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes"],[1,"mb-4","font-size-10"],[1,"text-right","text-bold"],[4,"ngFor","ngForOf"],["class","text-right border-right w-80",4,"ngIf"],[1,"text-right","border-right","w-80"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"text-right","text-bold",3,"click"],["mat-menu-item","","aria-label","add",3,"click"],["color","accent"],[1,"text-center","text-bold"],[1,"text-right","text-bold","teal-200-bg"],[1,"text-right","text-bold","w-100"]],template:function(e,t){1&e&&(I.Xb(0,"cdk-virtual-scroll-viewport",0),I.Jc(1,To,95,95,"table",1),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.data&&t.data.length>0))},directives:[ke.e,Xe.a,T.t,T.s,$.d,$.c,b.a,ke.d,T.q,ve.a,u.a,r.j,S.c,T.x,T.y,a.c,a.d,S.a,a.a],pipes:[T.g,T.f],styles:["soa-agent-import-table .report-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}soa-agent-import-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}soa-agent-import-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-import-table .report-table td,soa-agent-import-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}soa-agent-import-table .report-table td .mat-standard-chip,soa-agent-import-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}soa-agent-import-table .report-table .paid{background:#fff;color:#000}soa-agent-import-table .report-table .cost-paid{background:#ffe1c2;color:#000}soa-agent-import-table .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}soa-agent-import-table .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}soa-agent-import-table .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}soa-agent-import-table .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}soa-agent-import-table .report-table .row-even{background-color:#eee!important}"],encapsulation:2,data:{animation:ut.a}}),Ao);function jo(e,t){if(1&e){var n=I.Yb();I.Xb(0,"fuse-sidebar",7),I.Xb(1,"div",8),I.Xb(2,"soa-agent-sidebar",9),I.fc("fitlerShipment",(function(e){return I.Bc(n),I.jc().fitlerShipment(e)}))("typeChange",(function(e){return I.Bc(n),I.jc().typeChange(e)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){var r=I.jc();I.Db(2),I.pc("height",r.height)("type",r.type)("selected",r.selected)("total",r.total)("formSearch",r.formSearch)("customer",r.customer)("supplier",r.supplier)("agent",r.agent)("voyage",r.voyage)("price",r.price)("currency",r.currency)("country",r.country)}}var Vo,Po=((Vo=function(){function e(t,n,r,a,i,o,c){if(_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.soaAgentService=r,this.commonService=a,this.datePipe=i,this._matDialog=o,this.router=c,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this.priceTarrif={DTHC20:{amount:225,currency:"SGD"},DTHC40:{amount:335,currency:"SGD"},ADF20:{amount:5,currency:"USD"},ADF40:{amount:7.5,currency:"USD"},DIS20:{amount:90,currency:"SGD"},DIS40:{amount:120,currency:"SGD"}},this._unsubscribeAll=new V.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var s=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(s)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch.formSearch,this.user=this.authService.user,this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.soaAgentService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.soaAgentService.dataCustomer,e.supplier=e.soaAgentService.dataSupplier,e.users=e.soaAgentService.users})),this.soaAgentService.onDataItemChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.agent=e.soaAgentService.agent,e.commodity=e.soaAgentService.commodity,e.packageType=e.soaAgentService.packageType,e.currency=e.soaAgentService.currency,e.country=e.soaAgentService.country,e.depot=e.soaAgentService.depot,e.price=e.soaAgentService.price})),this.soaAgentService.onTypeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){setTimeout((function(){e.type=t}),100)})),this.soaAgentService.onVesselImpChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.shipments=t[0],e.voyage=t[1],e.arrType=t[2],e.sptPrice=t[3],e.dataBill=t[4],e.total=t[5]}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.soaAgentService)}},{key:"fitlerShipment",value:function(e){var t=this;this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then((function(n){t.soaAgentService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"getReportData",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then((function(t){console.log(t),e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"searchFilter",value:function(e){this.soaAgentService.onSearchTextChanged.next(e)}},{key:"typeChange",value:function(e){this.type=e}},{key:"createItem",value:function(e){var t=this,n=e[1],r=JSON.parse(JSON.stringify(e[0]));if("Revenue"==n){this.partner=this.customer;var a=this.supplier.find((function(e){return e.id==t.formSearch.agent}));if(a){var i=this.customer.find((function(e){return e.short_name==a.short_name}));r.customer=i.id}}"Cost"==n&&(this.partner=this.supplier,r.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ie.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+n,shipmentId:r.id,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:r}}),this.dialogRef.componentInstance.createItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),n){case"Revenue":t.soaAgentService.createSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+n}));break;case"Cost":t.soaAgentService.createSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+n}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getShipment()}))}},{key:"deletePrice",value:function(e){var t=this;if(1==this.authService.user&&confirm("Do you want to delete this item?")){this.authService.onRequestChanged.next(!0);var n=e.type_name;switch(n){case"Revenue":this.soaAgentService.deleteSelRevenue(e.id).then((function(e){t.authService.onRequestChanged.next(!1),t.getShipment()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+n+" error")}));break;case"Cost":this.soaAgentService.deleteSelCost(e.id).then((function(e){t.authService.onRequestChanged.next(!1),t.getShipment()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+n+" error")}))}}}},{key:"editItem",value:function(e){var t=this;if(1==this.authService.user){var n=e.type_name,r=JSON.parse(JSON.stringify(e));if("Revenue"==n){this.partner=this.customer;var a=this.supplier.find((function(e){return e.id==t.formSearch.agent}));if(a){var i=this.customer.find((function(e){return e.short_name==a.short_name}));r.customer=i.id}}"Cost"==n&&(this.partner=this.supplier,r.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ie.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Edit "+n,shipmentId:r.shipment,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:r,data:r}}),this.dialogRef.componentInstance.updateItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),n){case"Revenue":t.soaAgentService.updateSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.affectedRows>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error update "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+n}));break;case"Cost":t.soaAgentService.updateSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.affectedRows>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error update "+n)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+n}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getShipment()}))}}},{key:"printExcel",value:function(e){this.soaAgentService.buildExcelData()}},{key:"addPrice",value:function(e){var t=this,n=_slicedToArray(e,5),r=n[0],a=n[1],i=n[2],o=n[3],c=n[4];if("Revenue"==a){this.partner=this.customer;var s=this.agent.find((function(e){return e.id==t.formSearch.agent})),l=this.partner.find((function(e){return e.short_name==s.short_name})),b=c+i.substring(0,2);if(r["revenueNN"+i.substring(0,2)].map((function(e){return e.price_code})).includes(b))alert("Price exist");else{var u=this.price.find((function(e){return e.code==b})),p=this.currency.find((function(e){return e.code==t.priceTarrif[u.code].currency}));this.createData(a,{shipment:r.id,price:u,volume:o,amount:this.priceTarrif[u.code].amount,tax:0,tax_amount:0,currency:p.id,ex_rate:p.exrate,payment_center:l.country,pay_party:l.id,update_by:this.authService.user,create_by:this.authService.user})}}else{this.partner=this.supplier;var m=this.agent.find((function(e){return e.id==t.formSearch.agent})),d=this.partner.find((function(e){return e.short_name==m.short_name})),f=c+i.substring(0,2);if(r["costNN"+i.substring(0,2)].map((function(e){return e.price_code})).includes(f))alert("Price exist");else{var h=this.price.find((function(e){return e.code==f})),g=this.currency.find((function(e){return e.code==t.priceTarrif[h.code].currency}));this.createData(a,{shipment:r.id,price:h,volume:o,amount:this.priceTarrif[h.code].amount,tax:0,tax_amount:0,currency:g.id,ex_rate:g.exrate,payment_center:d.country,issue_party:d.id,update_by:this.authService.user,create_by:this.authService.user})}}}},{key:"createData",value:function(e,t){var n=this;switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":this.soaAgentService.createSelRevenue(t).then((function(e){n.authService.onRequestChanged.next(!1),n.getShipment()})).catch((function(t){n.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}));break;case"Cost":this.soaAgentService.createSelCost(t).then((function(e){n.authService.onRequestChanged.next(!1),n.getShipment()})).catch((function(t){n.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}))}}}]),e}()).\u0275fac=function(e){return new(e||Vo)(I.Rb(oe.a),I.Rb(J.a),I.Rb(pe),I.Rb(B.a),I.Rb(T.f),I.Rb(h.b),I.Rb(r.g))},Vo.\u0275cmp=I.Lb({type:Vo,selectors:[["soa-agent-import"]],decls:7,vars:14,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[2,"overflow","auto"],[3,"data","arrType","shipments","voyage","price","permission","total","formSearch","user","createItem","deletePrice","printExcel","addPrice","editItem"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,jo,3,12,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"soa-agent-import-table",6),I.fc("createItem",(function(e){return t.createItem(e)}))("deletePrice",(function(e){return t.deletePrice(e)}))("printExcel",(function(e){return t.printExcel(e)}))("addPrice",(function(e){return t.addPrice(e)}))("editItem",(function(e){return t.editItem(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.Ic("height",t.height,"px"),I.Db(1),I.pc("data",t.dataBill)("arrType",t.arrType)("shipments",t.shipments)("voyage",t.voyage)("price",t.price)("permission",t.permission)("total",t.total)("formSearch",t.formSearch)("user",t.user))},directives:[he.a,T.t,q.a,_e,Mo,ze.a,Pn],styles:["soa-agent-import{width:100%}"],encapsulation:2}),Vo),Fo=n("m4Vh");n.d(t,"SoaAgentModule",(function(){return Jo}));var Ro,Eo=[{path:"",component:j,resolve:{data:pe,data1:bt,data2:me,data3:fe},children:[{path:"soa",component:jr},{path:"export",component:si},{path:"import",component:Po},{path:"error",component:En},{path:"dem",component:rn},{path:"storage",component:at}]}],Jo=((Ro=function e(){_classCallCheck(this,e)}).\u0275mod=I.Pb({type:Ro}),Ro.\u0275inj=I.Ob({factory:function(e){return new(e||Ro)},providers:[pe,bt,me,fe],imports:[[r.k.forChild(Eo),a.b,i.b,o.c,c.c,s.b,l.e,b.b,u.b,p.c,m.c,d.b,f.c,h.e,g.b,v.b,y.b,x.d,S.e,D.b,_.b,X.b,W.k,w.c,k.t,C.a,L.a,N.a,O.f,ke.g,Xe.b,Fo.a]]}),Ro)}}]);