(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{"0UZF":function(e,t,o){"use strict";o.r(t);var i=o("tyNb"),r=o("5HBU"),n=o("STbY"),c=o("/1cH"),a=o("iadO"),s=o("bTqV"),l=o("7EHt"),h=o("kmnG"),p=o("NFeN"),d=o("Qu3c"),u=o("qFsG"),m=o("wZkO"),v=o("d3UM"),b=o("QibW"),f=o("0IaG"),y=o("/t3+"),g=o("bSwM"),S=o("M9IT"),_=o("xHqg"),w=o("A5z7"),C=o("bv9b"),R=o("XhcP"),O=o("FKr1"),x=o("1jcm"),T=o("+0xr"),A=o("Dh3D"),F=o("IOBc"),D=o("212X"),I=o("LPQX"),j=o("4CPF"),B=o("3Pt+"),P=o("XNiG"),L=o("1G5W"),k=o("PVWW"),N=o("o/YO"),W=o("fXoL"),X=o("HX77"),H=o("2Vo4"),J=o("jD4G"),z=o("tk/3"),G=o("ofXK"),U=o("0Zc1"),M=o("qXBG");let q=(()=>{class e{constructor(e,t,o,i){this._httpClient=e,this.datePipe=t,this.commonService=o,this.authService=i,this.countryR=[],this.cityR=[],this.placeR=[],this.ownerR=[],this.contTypeR=[],this.moveR=[],this.leaseR=[],this.defaultSearch={valid:1,lease:null,owner:null,off_hire:0},this.onDataChanged=new H.a([]),this.onContainersListChanged=new H.a([]),this.onSelContainerDetailsChanged=new H.a([]),this.onFilterChanged=new P.a,this.onFilterColumnChanged=new P.a,this.onSearchTextChanged=new P.a,this.onSetFilterChanged=new P.a}resolve(e){return this.modul=e.params.modul,this.authService.routerData=e,this.filterBy=JSON.parse(JSON.stringify(this.defaultSearch)),new Promise((e,t)=>{Promise.all([this.getContainerInfo(),this.getData()]).then(([t])=>{this.onFilterChanged.subscribe(e=>{this.filterBy=e,this.getFilterContainer()}),this.onSearchTextChanged.subscribe(e=>{this.searchText=e,this.getFilterContainer()}),this.onFilterColumnChanged.subscribe(e=>{this.filterColumn=e,this.getFilterContainer()}),e()},t)})}getContainerInfo(){let e={headers:new z.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel/container/modul/"+this.modul,e).subscribe(e=>{this.containers=e.container,this.countryR=e.country,this.cityR=e.city,this.placeR=e.place,this.ownerR=e.owner,this.contTypeR=e.contType,this.moveR=e.move,this.leaseR=e.lease,this.getFilterContainer(),t(e)},o)})}getData(){let e={headers:new z.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel/container/data",e).subscribe(e=>{this.lease=e[0],this.leaseDetail=e[1],this.packageType=e[2],this.supplier=e[3],this.seaport=e[4],this.containerCode=e[5],this.moveType=e[6],this.supplierPort=e[10],this.supplierCarrier=e[11],this.onDataChanged.next(e),t(e)},o)})}getFilterContainers(e){let t={headers:new z.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/dnl/shipment/all",e,t).subscribe(e=>{this.containers=e,this.searchText?this.getFilterContainer():(this.filterContainer=JSON.parse(JSON.stringify(e)),this.onContainersListChanged.next(this.filterContainer)),o(this.filterContainer)},i)})}getSelContainerById(e){let t={headers:new z.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.get(this.authService.apiUrl+"/dnl/shipment/id/"+e,t).subscribe(e=>{this.onSelContainerDetailsChanged.next(e),o(e)},i)})}deleteSelContainer(e){let t={headers:new z.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.delete(this.authService.apiUrl+"/dnl/shipment/id/"+e,t).subscribe(e=>{o(e)},i)})}getFilterContainer(){let e=JSON.parse(JSON.stringify(this.containers));if(this.filterBy.container){let t=[];this.filterBy.container.trim().split(/\r?\n|\s+|[ ,]+/g).map(e=>{this.commonService.checkContNum(e)&&t.push(e)}),e=this.commonService.filterArray(e,t,"cont_number")}this.filterBy.type&&"all"!=this.filterBy.type&&(e=e.filter(e=>e.cont_type==this.filterBy.type)),e=this.commonService.filterSelect(e,this.filterBy.valid,"status"),this.filterBy.lease&&(e=this.commonService.filterById(e,this.filterBy.lease,"lease_id")),this.filterBy.owner&&(e=this.commonService.filterById(e,this.filterBy.owner.id,"owner")),this.filterBy.country&&(e=e.filter(e=>e.off_port_country&&e.off_port_country==this.filterBy.country.id||!e.movement&&e.on_port_country==this.filterBy.country.id||e.movement&&e.movement.country==this.filterBy.country.id)),this.filterBy.city&&(e=this.commonService.filterObjectNumber(e,"movement",this.filterBy.city,"city","equal")),this.filterBy.place&&(e=e.filter(e=>e.movement&&e.movement.place==this.filterBy.place.id||!e.movement&&e.on_port==this.filterBy.place.id||e.off_port&&e.off_port==this.filterBy.place.id)),this.filterBy.move&&(e=this.commonService.filterObjectNumber(e,"movement",this.filterBy.move,"move","equal")),e=this.commonService.filterSelect(e,this.filterBy.off_hire,"off_hire"),this.searchText&&""!==this.searchText&&(e=J.a.filterArrayByString(e,this.searchText)),this.filterColumn&&[{name:"Container",column:"cont_number",type:"text"},{name:"Type",column:"cont_type_code",type:"text"},{name:"Code",column:"cont_code",type:"text"},{name:"Grade",column:"grade",type:"text"},{name:"Owner",column:"owner_short_name",type:"text"},{name:"Lease",column:"lease_code",type:"text"},{name:"Min",column:"minimum",type:"number"},{name:"On hire",column:"on_hire",type:"date"},{name:"On port",column:"on_port_name",type:"text"},{name:"Off hire",column:"off_hire",type:"date"},{name:"Off port",column:"off_port_name",type:"text"},{name:"Usage",column:"usage",type:"number"},{name:"Over",column:"over",type:"number"},{name:"Place",column:"place_short_name",type:"text-movement"},{name:"Move",column:"move_code",type:"text-movement"},{name:"Move date",column:"maxDate",type:"date-movement"},{name:"Idle",column:"day",type:"number-movement"},{name:"Document",column:"document",type:"text-movement"},{name:"Shipment",column:"shipment_code",type:"text-movement"},{name:"Info",column:"info",type:"text"}].map(t=>{this.filterColumn[t.name]&&"text"==t.type&&(e=e.filter(e=>e[t.column]&&e[t.column].toLowerCase().includes(this.filterColumn[t.name].toLowerCase()))),this.filterColumn[t.name]&&"number"==t.type&&(e=e.filter(e=>e[t.column]>=this.filterColumn[t.name])),this.filterColumn[t.name]&&"text-movement"==t.type&&(e=e.filter(e=>e.movement&&e.movement[t.column]&&e.movement[t.column].toLowerCase().includes(this.filterColumn[t.name].toLowerCase()))),this.filterColumn[t.name]&&"number-movement"==t.type&&(e=e.filter(e=>e.movement&&e.movement[t.column]&&e.movement[t.column]>=this.filterColumn[t.name]))}),this.filterContainer=e;let t=[],o=[],i={};this.ownerR.map(r=>{let n={};n.owner=r,n.check=0,this.contTypeR.map(t=>{n[t.code]=e.filter(e=>e.cont_type==t.id&&e.owner==n.owner.id),n.check+=n[t.code].length,n[t.code+" over"]=e.filter(e=>e.cont_type==t.id&&e.owner==n.owner.id&&e.over>0),n[t.code+" unmoved"]=e.filter(e=>e.cont_type==t.id&&e.owner==n.owner.id&&!e.movement),o.includes(t.code)||o.push(t.code),o.includes(t.code+" over")||o.push(t.code+" over"),o.includes(t.code+" unmoved")||o.push(t.code+" unmoved"),i[t.code]||(i[t.code]=0),i[t.code]+=n[t.code].length,i[t.code+" over"]||(i[t.code+" over"]=0),i[t.code+" over"]+=n[t.code+" over"].length,i[t.code+" unmoved"]||(i[t.code+" unmoved"]=0),i[t.code+" unmoved"]+=n[t.code+" unmoved"].length}),t.push(n)}),o.unshift("owner"),this.containerReport={header:o,data:t,total:i};let r=[],n=[],c={};this.leaseR.map(t=>{let o={};o.lease=t,o.check=0,this.contTypeR.map(t=>{o[t.code]=e.filter(e=>e.cont_type==t.id&&e.lease_id==o.lease.id),o.check+=o[t.code].length,o[t.code+" over"]=e.filter(e=>e.cont_type==t.id&&e.lease_id==o.lease.id&&e.over>0),o[t.code+" unmoved"]=e.filter(e=>e.cont_type==t.id&&e.lease_id==o.lease.id&&!e.movement),n.includes(t.code)||n.push(t.code),n.includes(t.code+" over")||n.push(t.code+" over"),n.includes(t.code+" unmoved")||n.push(t.code+" unmoved"),c[t.code]||(c[t.code]=0),c[t.code]+=o[t.code].length,c[t.code+" over"]||(c[t.code+" over"]=0),c[t.code+" over"]+=o[t.code+" over"].length,c[t.code+" unmoved"]||(c[t.code+" unmoved"]=0),c[t.code+" unmoved"]+=o[t.code+" unmoved"].length}),r.push(o)}),n.unshift("lease"),this.leaseReport={header:n,data:r,total:c};let a={onhire:{},offhire:{},port:{},depot:{},carrier:{},noscope:{}},s={onhire:{total:{}},offhire:{total:{}},port:{total:{}},depot:{total:{}},carrier:{total:{}},noscope:{total:{}},all:{total:{}}};function l(e){return e||0}function h(e){return e||{}}function p(e){return e||[]}function d(e,t,o,i,r){e[i][r][o.movement.move_code].push(o),t[i][o.cont_type_code][o.movement.move_code]++,t[i].total[o.movement.move_code]++}let u=[];this.moveR.map(e=>{u.push(e.code)}),this.placeR.map(e=>{let t={id:e.id,name:e.name,code:e.code,country:e.country,country_name:e.country_name,country_code:e.country_code,pol:e.pol,pol_name:e.pol_name,pol_code:e.pol_code,pod:e.pod,pod_name:e.pod_name,pod_code:e.pod_code,city:"supplier"==e.type?e.city:null,move_code:e.move_code,typePlace:e.type};this.contTypeR.map(o=>{if("LOAD"==e.move_code){let i=e.id+"-"+e.pol+"-"+e.pod+"-"+o.code;a.carrier[i]||(a.carrier[i]={id:e.id,name:e.name,code:e.code,country:e.country,country_name:e.country_name,country_code:e.country_code,pol:e.pol,pol_name:e.pol_name,pol_code:e.pol_code,pod:e.pod,pod_name:e.pod_name,pod_code:e.pod_code,city:"supplier"==e.type?e.city:null,move_code:e.move_code,typePlace:e.type},a.carrier[i].type=o.code,this.moveR.map(e=>{a.carrier[i][e.code]=[]})),s.carrier[o.code]=h(s.carrier[o.code]),s.carrier[o.code].LOAD=l(s.carrier[o.code].LOAD),s.carrier[o.code].total=l(s.carrier[o.code].total),s.carrier.total.LOAD=l(s.carrier.total.LOAD),t.total=0}else{let r=e.id+"-"+o.code;for(var i in t.type=o.code,s)"carrier"!=i&&(s[i][o.code]=h(s[i][o.code]));this.moveR.map(e=>{for(var i in t[e.code]=[],s)"carrier"!=i&&(s[i].total[e.code]=l(s[i].total[e.code]),s[i][o.code][e.code]=l(s[i][o.code][e.code]),s[i][o.code].total=l(s[i][o.code].total))}),t.total=0,"seaport"==e.type?(a.onhire[r]=JSON.parse(JSON.stringify(t)),a.offhire[r]=JSON.parse(JSON.stringify(t))):(e.scope.includes("P")&&(a.port[r]=JSON.parse(JSON.stringify(t))),e.scope.includes("D")&&!e.scope.includes("P")&&(a.depot[r]=JSON.parse(JSON.stringify(t))),e.scope.includes("P")||e.scope.includes("D")||e.scope.includes("C")||(a.noscope[r]=JSON.parse(JSON.stringify(t))))}})}),e.map(e=>{if(e.off_port)a.offhire[e.off_port+"-"+e.cont_type_code].OFHI.push(e),s.offhire[e.cont_type_code].OFHI++,s.offhire.total.OFHI++;else if(e.movement)if("LOAD"==e.movement.move_code){let t=e.movement.place+"-"+e.movement.pol+"-"+e.movement.pod+"-"+e.cont_type_code;this.placeR.find(t=>t.id==e.movement.place&&t.pol==e.pol&&t.pod==e.pod),a.carrier[t].LOAD=p(a.carrier[t].LOAD),d(a,s,e,"carrier",t)}else{let t=e.movement.place+"-"+e.cont_type_code,o=this.placeR.find(t=>t.id==e.movement.place&&t.scope.includes("P")),i=this.placeR.find(t=>t.id==e.movement.place&&t.scope.includes("D")&&!t.scope.includes("P"));switch(!0){case!!o:a.port[t][e.movement.move_code]=p(a.port[t][e.movement.move_code]),d(a,s,e,"port",t);break;case!!i:a.depot[t][e.movement.move_code]=p(a.depot[t][e.movement.move_code]),d(a,s,e,"depot",t);break;default:a.noscope[t][e.movement.move_code]=p(a.noscope[t][e.movement.move_code]),d(a,s,e,"noscope",t)}s.all[e.cont_type_code][e.movement.move_code]++,s.all.total[e.movement.move_code]++}else"container"==this.modul&&(a.onhire[e.on_port+"-"+e.cont_type_code].ONHI.push(e),s.onhire[e.cont_type_code].ONHI++,s.onhire.total.ONHI++)});for(let m in a){let e=a[m];for(let t in e){let o=e[t];o.total||(o.total=0),this.moveR.map(e=>{"LOAD"==o.move_code&&"LOAD"!=e.code&&(o[e.code]=[]),o.total+=o[e.code].length})}}this.contTypeR.map(e=>{this.moveR.map(t=>{s.onhire[e.code].total+=s.onhire[e.code][t.code],s.onhire.total.total=l(s.onhire.total.total),s.onhire.total.total+=s.onhire[e.code][t.code],s.offhire[e.code].total+=s.offhire[e.code][t.code],s.offhire.total.total=l(s.offhire.total.total),s.offhire.total.total+=s.offhire[e.code][t.code],s.port[e.code].total+=s.port[e.code][t.code],s.port.total.total=l(s.port.total.total),s.port.total.total+=s.port[e.code][t.code],s.depot[e.code].total+=s.depot[e.code][t.code],s.depot.total.total=l(s.depot.total.total),s.depot.total.total+=s.depot[e.code][t.code],"LOAD"==t.code&&(s.carrier[e.code].total+=s.carrier[e.code][t.code],s.carrier.total.total=l(s.carrier.total.total),s.carrier.total.total+=s.carrier[e.code][t.code]),s.noscope[e.code].total+=s.noscope[e.code][t.code],s.noscope.total.total=l(s.noscope.total.total),s.noscope.total.total+=s.noscope[e.code][t.code]})}),this.moveReport={header:u,data:a,place:this.placeR,contType:this.contTypeR,total:s},this.onContainersListChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(W.bc(z.a),W.bc(G.f),W.bc(U.a),W.bc(M.a))},e.\u0275prov=W.Nb({token:e,factory:e.\u0275fac}),e})();var E=o("B9zo"),Q=o("fE3o"),Y=o("4qw1"),V=o("XiUz");function Z(e,t){if(1&e){const e=W.Yb();W.Xb(0,"fuse-sidebar",9),W.Xb(1,"container-overview-sidebar",10),W.fc("filterContainer",(function(t){return W.Bc(e),W.jc().filterContainer(t)})),W.Wb(),W.Wb()}if(2&e){const e=W.jc();W.Db(1),W.pc("modul",e.modul)("height",e.height)("lease",e.lease)("supplier",e.supplier)("contType",e.packageType)("moveType",e.moveType)("country",e.countryR)("city",e.cityR)("place",e.placeR)}}function K(e,t){1&e&&W.Sb(0,"router-outlet")}let $=(()=>{class e{constructor(e,t,o,i){this._fuseSidebarService=e,this.containerService=t,this.router=o,this.authService=i,this.type="list",this.sidebarPanel=!0,this.height=560,this.searchInput=new B.e(""),this._unsubscribeAll=new P.a,this.modul=this.authService.modul}ngOnInit(){this.authService.urlChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.modul=this.authService.modul}),this.searchText=this.containerService.searchText,this.authService.windowSizeChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12}),this.containerService.onContainersListChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.countryR=this.containerService.countryR,this.cityR=this.containerService.cityR,this.placeR=this.containerService.placeR}),this.containerService.onDataChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.lease=e[0],this.leaseDetail=e[1],this.packageType=e[2],this.supplier=e[3],this.seaport=e[4],this.containerCode=e[5],this.moveType=e[6]}),this.containerService.onSetFilterChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.containerOverviewSidebarComponent.setFilter(e)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}deselectCurrentContainer(){}toggleSelectAll(){}selectContainers(e,t){}deselectContainers(){}toggleTagOnSelectedContainers(e){}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}filterContainer(e){this.containerService.onFilterChanged.next(e)}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.containerService)}newContainer(e){this.router.navigate(["/apps/workflow/container-overview/form/0"])}searchFilter(e){this.containerService.onSearchTextChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(W.Rb(X.a),W.Rb(q),W.Rb(i.g),W.Rb(M.a))},e.\u0275cmp=W.Lb({type:e,selectors:[["container-overview"]],viewQuery:function(e,t){var o;1&e&&W.Sc(N.a,!0),2&e&&W.wc(o=W.gc())&&(t.containerOverviewSidebarComponent=o.first)},decls:9,vars:6,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-overview-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-overview-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"modul","type","searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","newContainer","searchFilter"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[4,"ngIf"],["name","container-overview-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"modul","height","lease","supplier","contType","moveType","country","city","place","filterContainer"]],template:function(e,t){1&e&&(W.Xb(0,"div",0),W.Jc(1,Z,2,9,"fuse-sidebar",1),W.Xb(2,"fuse-sidebar",2),W.Sb(3,"div",3),W.Wb(),W.Xb(4,"div",4),W.Xb(5,"container-overview-header",5),W.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newContainer",(function(e){return t.newContainer(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),W.Wb(),W.Xb(6,"div",6),W.Xb(7,"div",7),W.Jc(8,K,1,0,"router-outlet",8),W.Wb(),W.Wb(),W.Wb(),W.Wb()),2&e&&(W.Db(1),W.pc("ngIf",t.sidebarPanel),W.Db(4),W.pc("modul",t.modul)("type",t.type)("searchText",t.searchText)("sidebarName","container-overview-sidebar"),W.Db(3),W.pc("ngIf",!0))},directives:[E.a,G.t,Q.a,Y.a,V.a,N.a,i.l],styles:["container-overview{width:100%}container-overview .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-overview .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-overview .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-overview .center .content-card container-overview{border-right:0}container-overview .center .content-card container-overview,container-overview .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-overview .center .content-card shipment-details{display:none!important}container-overview .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-overview .center .content-card.current-shipment-selected .content container-overview,container-overview .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-overview .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:k.a}}),e})();var ee=o("GylT");let te=(()=>{class e{constructor(e,t,o){this._activatedRoute=e,this.authService=t,this.containerService=o,this.height=560,this.modul=this.authService.modul,this._unsubscribeAll=new P.a}ngOnInit(){this.authService.urlChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.modul=this.authService.modul}),this.authService.windowSizeChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.containerService.onContainersListChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.containers=e}),this.containerService.onDataChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.packageType=e[2],this.containerCode=e[5],this.moveType=e[6],this.modul=this.containerService.modul})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}filterColumn(e){this.containerService.onFilterColumnChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(W.Rb(i.a),W.Rb(M.a),W.Rb(q))},e.\u0275cmp=W.Lb({type:e,selectors:[["container-overview-list"]],decls:1,vars:6,consts:[[3,"modul","containers","packageType","moveType","containerCode","height","filterColumn"]],template:function(e,t){1&e&&(W.Xb(0,"container-overview-list-table",0),W.fc("filterColumn",(function(e){return t.filterColumn(e)})),W.Wb()),2&e&&W.pc("modul",t.modul)("containers",t.containers)("packageType",t.packageType)("moveType",t.moveType)("containerCode",t.containerCode)("height",t.height)},directives:[ee.a],styles:[""],encapsulation:2,data:{animation:k.a}}),e})();var oe=o("ZzBW"),ie=o("WruQ");function re(e,t){if(1&e){const e=W.Yb();W.Xb(0,"container-overview-place-list",1),W.fc("setFilter",(function(t){return W.Bc(e),W.jc().setFilter(t)})),W.Wb()}if(2&e){const e=W.jc();W.pc("label","ON HIRE")("header",e.moveReport.header)("places",e.seaportReport)("contType",e.moveReport.contType)("data",e.moveReport.data.onhire)("total",e.moveReport.total.onhire)}}function ne(e,t){if(1&e){const e=W.Yb();W.Xb(0,"container-overview-place-list",1),W.fc("setFilter",(function(t){return W.Bc(e),W.jc().setFilter(t)})),W.Wb()}if(2&e){const e=W.jc();W.pc("label","OFF HIRE")("header",e.moveReport.header)("places",e.seaportReport)("contType",e.moveReport.contType)("data",e.moveReport.data.offhire)("total",e.moveReport.total.offhire)}}let ce=(()=>{class e{constructor(e,t,o){this._activatedRoute=e,this.authService=t,this.containerService=o,this.height=560,this.modul=this.authService.modul,this._unsubscribeAll=new P.a}ngOnInit(){this.authService.urlChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.modul=this.authService.modul}),this.authService.windowSizeChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.width<600?e.height-16-4:e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{let t=e?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16-4+t:this.authService.screenHeight-64-64-16-4+t}),this.containerService.onContainersListChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.moveReport=this.containerService.moveReport,this.seaportReport=this.moveReport.place.filter(e=>"seaport"==e.type),this.portReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("P")),this.depotReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("D")&&!e.scope.includes("P")),this.carrierReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("C")),this.noscopeReport=this.moveReport.place.filter(e=>e.scope&&!e.scope.includes("C")&&!e.scope.includes("P")&&!e.scope.includes("D"))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(e){this.containerService.onSetFilterChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(W.Rb(i.a),W.Rb(M.a),W.Rb(q))},e.\u0275cmp=W.Lb({type:e,selectors:[["container-overview-place"]],decls:7,vars:28,consts:[["fxLayout","column"],[3,"label","header","places","contType","data","total","setFilter"],[3,"label","header","places","contType","data","total","setFilter",4,"ngIf"]],template:function(e,t){1&e&&(W.Xb(0,"div",0),W.Xb(1,"container-overview-place-list",1),W.fc("setFilter",(function(e){return t.setFilter(e)})),W.Wb(),W.Xb(2,"container-overview-place-list",1),W.fc("setFilter",(function(e){return t.setFilter(e)})),W.Wb(),W.Xb(3,"container-overview-place-carrier",1),W.fc("setFilter",(function(e){return t.setFilter(e)})),W.Wb(),W.Xb(4,"container-overview-place-list",1),W.fc("setFilter",(function(e){return t.setFilter(e)})),W.Wb(),W.Jc(5,re,1,6,"container-overview-place-list",2),W.Jc(6,ne,1,6,"container-overview-place-list",2),W.Wb()),2&e&&(W.Ic("height",t.height,"px"),W.Db(1),W.pc("label","PORT")("header",t.moveReport.header)("places",t.portReport)("contType",t.moveReport.contType)("data",t.moveReport.data.port)("total",t.moveReport.total.port),W.Db(1),W.pc("label","DEPOT")("header",t.moveReport.header)("places",t.depotReport)("contType",t.moveReport.contType)("data",t.moveReport.data.depot)("total",t.moveReport.total.depot),W.Db(1),W.pc("label","CARRIER")("header",t.moveReport.header)("places",t.carrierReport)("contType",t.moveReport.contType)("data",t.moveReport.data.carrier)("total",t.moveReport.total.carrier),W.Db(1),W.pc("label","NOSCOPE")("header",t.moveReport.header)("places",t.noscopeReport)("contType",t.moveReport.contType)("data",t.moveReport.data.noscope)("total",t.moveReport.total.noscope),W.Db(1),W.pc("ngIf","container"==t.modul),W.Db(1),W.pc("ngIf","container"==t.modul))},directives:[V.d,oe.a,ie.a,G.t],styles:[""],encapsulation:2,data:{animation:k.a}}),e})();var ae=o("r6Sg");let se=(()=>{class e{constructor(e,t,o){this._activatedRoute=e,this.authService=t,this.containerService=o,this.height=560,this.modul=this.authService.modul,this._unsubscribeAll=new P.a}ngOnInit(){this.authService.urlChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.modul=this.authService.modul}),this.authService.windowSizeChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.width<600?e.height-16-4:e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{let t=e?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16-4+t:this.authService.screenHeight-64-64-16-4+t}),this.containerService.onContainersListChanged.pipe(Object(L.a)(this._unsubscribeAll)).subscribe(e=>{this.containerReport=this.containerService.containerReport,this.leaseReport=this.containerService.leaseReport})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(e){this.containerService.onSetFilterChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(W.Rb(i.a),W.Rb(M.a),W.Rb(q))},e.\u0275cmp=W.Lb({type:e,selectors:[["container-overview-owner"]],decls:1,vars:4,consts:[[3,"modul","containerReport","leaseReport","height","setFilter"]],template:function(e,t){1&e&&(W.Xb(0,"container-overview-owner-table",0),W.fc("setFilter",(function(e){return t.setFilter(e)})),W.Wb()),2&e&&W.pc("modul",t.modul)("containerReport",t.containerReport)("leaseReport",t.leaseReport)("height",t.height)},directives:[ae.a],styles:[""],encapsulation:2,data:{animation:k.a}}),e})();var le=o("vxfF"),he=o("cfqv"),pe=o("CEJ5"),de=o("z4xR"),ue=o("9DWm"),me=o("0mUG"),ve=o("V9Ia"),be=o("1Tuo"),fe=o("9FSO");o.d(t,"ContainerOverviewModule",(function(){return ge}));const ye=[{path:"",component:$,resolve:{data:q},children:[{path:"list",component:te},{path:"owner",component:se},{path:"place",component:ce}]}];let ge=(()=>{class e{}return e.\u0275mod=W.Pb({type:e}),e.\u0275inj=W.Ob({factory:function(t){return new(t||e)},providers:[q],imports:[[i.k.forChild(ye),n.b,r.a,c.b,a.c,s.c,l.b,h.e,p.b,d.b,u.c,m.c,v.b,b.c,f.e,y.b,g.b,S.b,_.d,w.e,C.b,R.b,x.b,T.k,A.c,O.t,F.a,D.a,j.a,I.f,le.g,he.b,pe.a,de.a,ue.a,me.a,ve.a,be.a,fe.a]]}),e})()},jD4G:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));class i{static filterArrayByString(e,t){return""===t?e:(t=t.toLowerCase(),e.filter(e=>this.searchInObj(e,t)))}static searchInObj(e,t){for(const o in e){if(!e.hasOwnProperty(o))continue;const i=e[o];if("string"==typeof i){if(this.searchInString(i,t))return!0}else if(Array.isArray(i)&&this.searchInArray(i,t))return!0;if("object"==typeof i&&this.searchInObj(i,t))return!0}}static searchInArray(e,t){for(const o of e){if("string"==typeof o&&this.searchInString(o,t))return!0;if("object"==typeof o&&this.searchInObj(o,t))return!0}}static searchInString(e,t){return e.toLowerCase().includes(t)}static generateGUID(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}static toggleInArray(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}static handleize(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}}}]);