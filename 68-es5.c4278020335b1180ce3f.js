function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(i=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){o=!0,a=l}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{IOBc:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("5HBU"),o=n("bTqV"),a=n("kmnG"),r=n("NFeN"),c=n("qFsG"),l=n("wZkO"),s=n("/t3+"),u=n("bSwM"),b=n("+0xr"),m=n("FKr1"),d=n("MutI"),f=n("fXoL"),p=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=f.Pb({type:e}),e.\u0275inj=f.Ob({factory:function(t){return new(t||e)},imports:[[i.a,o.c,a.e,r.b,c.c,l.c,s.b,u.b,m.t,d.c,b.k]]}),e}()},Mx3C:function(e,t,n){"use strict";n.r(t);var i,o=n("tyNb"),a=n("5HBU"),r=n("STbY"),c=n("/1cH"),l=n("iadO"),s=n("bTqV"),u=n("7EHt"),b=n("kmnG"),m=n("NFeN"),d=n("Qu3c"),f=n("qFsG"),p=n("wZkO"),h=n("d3UM"),v=n("QibW"),g=n("0IaG"),y=n("/t3+"),x=n("bSwM"),C=n("M9IT"),S=n("xHqg"),k=n("A5z7"),W=n("bv9b"),X=n("XhcP"),_=n("FKr1"),w=n("1jcm"),D=n("+0xr"),L=n("Dh3D"),M=n("IOBc"),I=n("212X"),R=n("LPQX"),A=n("XNiG"),N=n("1G5W"),P=n("PVWW"),O=n("3Pt+"),q=n("JX91"),F=n("lJxs"),T=n("fXoL"),j=n("qXBG"),z=n("0Zc1"),B=n("2Vo4"),E=n("tk/3"),J=((i=function(){function e(t,n){_classCallCheck(this,e),this._httpClient=t,this.authService=n,this.onDataChanged=new B.a([]),this.onDataItemChanged=new B.a([]),this.onContainerChanged=new B.a([])}return _createClass(e,[{key:"resolve",value:function(e){var t=this;this.authService.routerData=e;var n=e.params.id;return new Promise((function(e,i){Promise.all([t.getContainerById(n),t.getData(),t.getItemData()]).then((function(t){_slicedToArray(t,1)[0],e()}),i)}))}},{key:"getData",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/sel/container/data",t).subscribe((function(t){e.lease=t[0],e.leaseDetail=t[1],e.packageType=t[2],e.supplier=t[3],e.seaport=t[4],e.containerCode=t[5],e.moveType=t[6],e.place=t[8],e.country=t[9],e.supplierPort=t[10],e.supplierCarrier=t[11],e.seaTerminal=t[12],e.onDataChanged.next(t),n(t)}),i)}))}},{key:"getItemData",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/sel/container/item-data",t).subscribe((function(t){e.price=t[0],e.unit=t[1],e.currency=t[2],e.user=t[4],e.commodity=t[5],e.dataCustomer=t[7],e.dataSupplier=t[8],e.onDataItemChanged.next(t),n(t)}),i)}))}},{key:"getContainerById",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.get(t.authService.apiUrl+"/sel/container/id/"+e,n).subscribe((function(e){t.container=e[0][0],t.movement=e[1],t.containerNote=e[2],t.containerSoa=e[3],t.movement.push({id:null,container:t.container.id,move_code:"ON HIRE",date:t.container.on_hire,place_short_name:t.container.on_port.name}),t.container.off_hire&&t.movement.unshift({id:null,container:t.container.id,move_code:"OFF HIRE",date:t.container.off_hire,place_short_name:t.container.off_port.name}),t.onContainerChanged.next(e),i(e)}),o)}))}},{key:"updateContainer",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.put(t.authService.apiUrl+"/sel/container",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"createMovement",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/movement",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"createInsertMovement",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/movement/insert",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"updateMovement",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.put(t.authService.apiUrl+"/movement/insert",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"deleteMovement",value:function(e,t){var n=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(o,a){n._httpClient.delete(n.authService.apiUrl+"/movement/id/"+e+"/"+t,i).subscribe((function(e){o(e)}),a)}))}},{key:"deleteSelMove",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.delete(t.authService.apiUrl+"/sel-move/"+e,n).subscribe((function(e){i(e)}),o)}))}},{key:"createContainerNote",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/container-note",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"deleteContainerNote",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.delete(t.authService.apiUrl+"/container-note/"+e,n).subscribe((function(e){i(e)}),o)}))}},{key:"getVoyage",value:function(e,t,n,i){var o=this,a={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,c){o._httpClient.get(o.authService.apiUrl+"/movement/voyage/"+e+"/"+t+"/"+n+"/"+i,a).subscribe((function(e){r(e)}),c)}))}},{key:"getShipmentByDocument",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.get(t.authService.apiUrl+"/sel/container/shipment/"+e,n).subscribe((function(e){i(e)}),o)}))}},{key:"getShipmentByDocument2",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/sel/container/shipment/",{str:e},n).subscribe((function(e){i(e)}),o)}))}},{key:"createSelMove",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/sel/container/sel-move/",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"createSelRevenue",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/sel/revenue",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"updateSelRevenue",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.put(t.authService.apiUrl+"/sel/revenue",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"deleteSelRevenue",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.delete(t.authService.apiUrl+"/sel/revenue/"+e,n).subscribe((function(e){i(e)}),o)}))}},{key:"createSelCost",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/sel/cost",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"updateSelCost",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.put(t.authService.apiUrl+"/sel/cost",e,n).subscribe((function(e){i(e)}),o)}))}},{key:"deleteSelCost",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.delete(t.authService.apiUrl+"/sel/cost/"+e,n).subscribe((function(e){i(e)}),o)}))}}]),e}()).\u0275fac=function(e){return new(e||i)(T.bc(E.a),T.bc(j.a))},i.\u0275prov=T.Nb({token:i,factory:i.\u0275fac}),i),V=n("ofXK"),H=n("XiUz"),$=n("EwFO");function U(e,t){1&e&&(T.Xb(0,"div",8),T.Xb(1,"div",9),T.Xb(2,"div",10),T.Sb(3,"div",11),T.Xb(4,"div",12),T.Sb(5,"div",13),T.Wb(),T.Xb(6,"div",14),T.Sb(7,"div",13),T.Wb(),T.Wb(),T.Wb(),T.Wb())}function G(e,t){if(1&e&&(T.Xb(0,"mat-option",41),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Nc(" ",n.code," ")}}function Y(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Move Type is required "),T.Wb())}function Q(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Date is required "),T.Wb())}function K(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Time is required "),T.Wb())}function Z(e,t){if(1&e&&(T.Xb(0,"mat-option",41),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Nc(" ",n.full_name," ")}}function ee(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Place is required "),T.Wb())}function te(e,t){if(1&e&&(T.Xb(0,"mat-form-field",42),T.Xb(1,"mat-label"),T.Lc(2,"Place"),T.Wb(),T.Sb(3,"input",43),T.Xb(4,"mat-autocomplete",44,45),T.Jc(6,Z,2,2,"mat-option",22),T.kc(7,"async"),T.Wb(),T.Jc(8,ee,2,0,"mat-error",7),T.Wb()),2&e){var n=T.xc(5),i=T.jc(2);T.Db(3),T.pc("matAutocomplete",n),T.Db(1),T.pc("displayWith",i.commonService.displayObjFn.bind(i,"full_name")),T.Db(2),T.pc("ngForOf",T.lc(7,4,i.filteredPlace)),T.Db(2),T.pc("ngIf",i.formMovement.get("place").hasError("required"))}}function ne(e,t){if(1&e){var n=T.Yb();T.Xb(0,"div"),T.Xb(1,"form",15),T.fc("keydown.enter",(function(e){return T.Bc(n),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){T.Bc(n);var t=T.jc();return t.onMovementFormSubmit(t.formMovement)})),T.Xb(2,"div",16),T.Sb(3,"input",17),T.Sb(4,"input",18),T.Wb(),T.Xb(5,"div",19),T.Xb(6,"mat-form-field",20),T.Xb(7,"mat-label"),T.Lc(8,"Move"),T.Wb(),T.Xb(9,"mat-select",21),T.Jc(10,G,2,2,"mat-option",22),T.Wb(),T.Jc(11,Y,2,0,"mat-error",7),T.Wb(),T.Xb(12,"mat-form-field",20),T.Xb(13,"mat-label"),T.Lc(14,"Date"),T.Wb(),T.Xb(15,"input",23),T.fc("change",(function(e){return T.Bc(n),T.jc().commonService.setDateStr(e)})),T.Wb(),T.Sb(16,"mat-datepicker-toggle",24),T.Sb(17,"mat-datepicker",null,25),T.Jc(19,Q,2,0,"mat-error",7),T.Wb(),T.Xb(20,"mat-form-field",20),T.Xb(21,"mat-label"),T.Lc(22),T.Wb(),T.Sb(23,"input",26),T.Jc(24,K,2,0,"mat-error",7),T.Wb(),T.Jc(25,te,9,6,"mat-form-field",27),T.Xb(26,"mat-form-field",28),T.Xb(27,"mat-label"),T.Lc(28,"Document"),T.Wb(),T.Sb(29,"input",29),T.Wb(),T.Xb(30,"div",30),T.Xb(31,"mat-form-field",31),T.Xb(32,"mat-label"),T.Lc(33,"Vehicle type"),T.Wb(),T.Sb(34,"input",32),T.Wb(),T.Xb(35,"mat-form-field",31),T.Xb(36,"mat-label"),T.Lc(37,"Vehicle number"),T.Wb(),T.Sb(38,"input",33),T.Wb(),T.Wb(),T.Xb(39,"mat-form-field",28),T.Xb(40,"mat-label"),T.Lc(41,"Update by"),T.Wb(),T.Sb(42,"input",34),T.Sb(43,"input",35),T.Wb(),T.Wb(),T.Xb(44,"div",36),T.Xb(45,"div",37),T.Lc(46),T.Wb(),T.Wb(),T.Xb(47,"div",38),T.Xb(48,"button",39),T.Lc(49,"Submit"),T.Wb(),T.Xb(50,"button",40),T.fc("click",(function(e){return T.Bc(n),T.jc().matDialogRef.close()})),T.Lc(51,"Cancel"),T.Wb(),T.Wb(),T.Wb(),T.Wb()}if(2&e){var i=T.xc(18),o=T.jc();T.Db(1),T.pc("formGroup",o.formMovement),T.Db(9),T.pc("ngForOf",o.moveType),T.Db(1),T.pc("ngIf",o.formMovement.get("move").hasError("required")),T.Db(4),T.pc("matDatepicker",i)("min",o.minDate)("max",o.maxDate),T.Db(1),T.pc("for",i),T.Db(3),T.pc("ngIf",o.formMovement.get("date").hasError("required")),T.Db(3),T.Nc("Time ",o.formMovement.get("time").hasError("required"),""),T.Db(2),T.pc("ngIf",o.formMovement.get("time").hasError("required")),T.Db(1),T.pc("ngIf",!o.formMovement.controls.move.value||"OFHI"!=o.formMovement.controls.move.value.code),T.Db(17),T.pc("readonly",!0)("value",o.name),T.Db(4),T.Mc(o.errorMessage)}}function ie(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Type is required "),T.Wb())}function oe(e,t){if(1&e){var n=T.Yb();T.Xb(0,"div"),T.Xb(1,"form",15),T.fc("keydown.enter",(function(e){return T.Bc(n),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){T.Bc(n);var t=T.jc();return t.onContainerNoteFormSubmit(t.formContainerNote)})),T.Xb(2,"div",16),T.Sb(3,"input",46),T.Wb(),T.Xb(4,"div",19),T.Xb(5,"mat-form-field",47),T.Xb(6,"mat-label"),T.Lc(7,"Type"),T.Wb(),T.Xb(8,"mat-select",48),T.Xb(9,"mat-option",49),T.Lc(10,"repair"),T.Wb(),T.Xb(11,"mat-option",50),T.Lc(12,"clean"),T.Wb(),T.Wb(),T.Jc(13,ie,2,0,"mat-error",7),T.Wb(),T.Xb(14,"mat-form-field",51),T.Xb(15,"mat-label"),T.Lc(16,"Content"),T.Wb(),T.Sb(17,"input",52),T.Wb(),T.Xb(18,"mat-form-field",53),T.Xb(19,"mat-label"),T.Lc(20,"Photo"),T.Wb(),T.Sb(21,"input",54),T.Xb(22,"mat-icon",55),T.fc("click",(function(e){return T.Bc(n),T.jc().viewPhoto()})),T.Lc(23,"search"),T.Wb(),T.Wb(),T.Xb(24,"mat-form-field",53),T.Xb(25,"mat-label"),T.Lc(26,"Info"),T.Wb(),T.Sb(27,"input",56),T.Wb(),T.Xb(28,"mat-form-field",57),T.Xb(29,"mat-label"),T.Lc(30,"Update by"),T.Wb(),T.Sb(31,"input",34),T.Sb(32,"input",35),T.Wb(),T.Wb(),T.Xb(33,"div",36),T.Xb(34,"div",37),T.Lc(35),T.Wb(),T.Wb(),T.Xb(36,"div",38),T.Xb(37,"button",39),T.Lc(38,"Submit"),T.Wb(),T.Xb(39,"button",40),T.fc("click",(function(e){return T.Bc(n),T.jc().matDialogRef.close()})),T.Lc(40,"Cancel"),T.Wb(),T.Wb(),T.Wb(),T.Wb()}if(2&e){var i=T.jc();T.Db(1),T.pc("formGroup",i.formContainerNote),T.Db(12),T.pc("ngIf",i.formContainerNote.get("type").hasError("required")),T.Db(18),T.pc("readonly",!0)("value",i.name),T.Db(4),T.Mc(i.errorMessage)}}var ae,re=((ae=function(){function e(t,n,i,o,a,r,c){var l=this;if(_classCallCheck(this,e),this.matDialogRef=t,this._data=n,this.authService=i,this._formBuilder=o,this.commonService=a,this.containerDetailsService=r,this.datePipe=c,this.requestProcessing=!1,this.formMovement=this._formBuilder.group({id:[null],container:[null,O.y.required],move:[null,O.y.required],document:[null],date:[null,O.y.required],time:["00:00",O.y.required],place:[null,O.y.required],info:this._formBuilder.group({country_of_loading:[null],pol:[null],load_terminal:[null],country_of_discharge:[null],pod:[null],discharge_terminal:[null],voyage:[null],vehicle_type:[null],vehicle_number:[null]}),update_by:[this.authService.user,O.y.required]}),this.formContainerNote=this._formBuilder.group({container_move:[""],type:["",O.y.required],content:["",O.y.required],info:[""],photo:[""],update_by:[this.authService.user,O.y.required]}),this.label=n.label,"Add movement"==this.label){var s=n.data;this.movement=n.movement;var u=this.movement.indexOf(s);this.maxDate=new Date(s.date),this.minDate=u==this.movement.length-1?new Date(n.container.on_hire):new Date(this.movement[u+1].date),this.id=n.id,this.moveType=[],n.moveType.map((function(e){"LOAD"!=e.code&&"ONHI"!=e.code&&"OFHI"!=e.code&&l.moveType.push(e)})),this.place=n.place,this.formMovement.controls.id.disable(),this.formMovement.controls.container.setValue(n.id)}if("Edit movement"==this.label){var b=JSON.parse(JSON.stringify(n.data));this.movement=n.movement,this.country=n.country;var m=this.movement.indexOf(n.data);this.maxDate=0==m?n.container.off_hire?new Date(n.container.off_hire):new Date:new Date(this.movement[m-1].date),this.minDate=m==this.movement.length-1?new Date(n.container.on_hire):new Date(this.movement[m+1].date),this.id=n.id,this.moveType=n.moveType.filter((function(e){return e.id==b.move})),this.place=n.place,b.move=n.moveType.find((function(e){return e.id==b.move})),b.place=this.place.find((function(e){return e.id==b.place})),b.date=new Date(b.date),b.time=this.datePipe.transform(b.date,"HH:mm"),b.info||delete b.info,this.formMovement.patchValue(b),this.formMovement.controls.update_by.setValue(this.authService.user)}"Add note"==this.label&&this.formContainerNote.controls.container_move.setValue(n.id),this.permission=n.permission}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.name=this.authService.name,this.filteredPlace=this.formMovement.controls.place.valueChanges.pipe(Object(q.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"full_name",e.place):[]}))),this.formMovement.valueChanges.subscribe((function(t){e.errorMessage=""})),this.formContainerNote.valueChanges.subscribe((function(t){e.errorMessage=""}))}},{key:"onMovementFormSubmit",value:function(e){var t=this;if(console.log(e.value),e.valid){var n=JSON.parse(JSON.stringify(e.value)),i=this.datePipe.transform(new Date(n.date),"yyyy/MM/dd");i+=" "+n.time+":00.0";var o=new Date(i).getTime();if(o>this.maxDate.getTime()||o<this.minDate.getTime())return void(this.errorMessage="Error time");"Add movement"==this.label?(this.requestProcessing=!0,n.date=i,this.containerDetailsService.createInsertMovement(n).then((function(e){t.requestProcessing=!1,e.insertId>0?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error create")})).catch((function(e){t.requestProcessing=!1,console.error(e),t.errorMessage="Error create"}))):(this.requestProcessing=!0,n.date=i,this.containerDetailsService.updateMovement(n).then((function(e){t.requestProcessing=!1,1==e.affectedRows?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error edit containerDetail")})).catch((function(e){t.requestProcessing=!1,console.error(e),t.errorMessage="Error edit containerDetail"})))}}},{key:"onContainerNoteFormSubmit",value:function(e){var t=this;e.valid&&(this.requestProcessing=!0,this.containerDetailsService.createContainerNote(e.value).then((function(e){t.requestProcessing=!1,t.matDialogRef.close(e)})).catch((function(e){t.requestProcessing=!1,console.error(e),t.errorMessage=e.sqlMessage})))}},{key:"viewPhoto",value:function(){var e=this.formContainerNote.controls.photo.value;/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)&&window.open(e,"_blank")}}]),e}()).\u0275fac=function(e){return new(e||ae)(T.Rb(g.f),T.Rb(g.a),T.Rb(j.a),T.Rb(O.d),T.Rb(z.a),T.Rb(J),T.Rb(V.f))},ae.\u0275cmp=T.Lb({type:ae,selectors:[["container-details-modal-dialog"]],decls:12,vars:4,consts:[["class","spinner-wrapper",4,"ngIf"],[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","container-details-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"inner"],[1,"gap"],[1,"left"],[1,"half-circle"],[1,"right"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","container","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","15",1,"pr-8"],["formControlName","move","required",""],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","matInput","","name","date","formControlName","date","required","",3,"matDatepicker","min","max","change"],["matSuffix","",3,"for"],["moveDatePicker",""],["inputCheck","","matInput","","type","time","formControlName","time","required",""],["appearance","outline","class","pr-8","fxFlex","100","fxFlex.gt-xs","55",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","document"],["formGroupName","info","fxFlex","100","fxFlex.gt-xs","50","fxLayout","row wrap","fxLayoutAlign","start center",1,"pr-8"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","50",1,"pr-8"],["inputCheck","","matInput","","formControlName","vehicle_type"],["inputCheck","","matInput","","formControlName","vehicle_number"],["inputCheck","","matInput","",3,"readonly","value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[3,"value"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","55",1,"pr-8"],["inputCheck","","matInput","","formControlName","place","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnPlace","matAutocomplete"],["inputCheck","","formControlName","container_move"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["formControlName","type","required",""],["value","repair"],["value","clean"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","matInput","","formControlName","content"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","40",1,"pr-8"],["inputCheck","","matInput","","formControlName","photo"],["matSuffix","",1,"cursor-pointer",3,"click"],["inputCheck","","matInput","","formControlName","info"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20"]],template:function(e,t){1&e&&(T.Jc(0,U,8,0,"div",0),T.Xb(1,"div",1),T.Xb(2,"mat-toolbar",2),T.Xb(3,"mat-toolbar-row",3),T.Xb(4,"span",4),T.Lc(5),T.Wb(),T.Xb(6,"button",5),T.fc("click",(function(e){return t.matDialogRef.close()})),T.Xb(7,"mat-icon"),T.Lc(8,"close"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(9,"div",6),T.Jc(10,ne,52,14,"div",7),T.Jc(11,oe,41,5,"div",7),T.Wb(),T.Wb()),2&e&&(T.pc("ngIf",t.requestProcessing),T.Db(5),T.Mc(t.label),T.Db(5),T.pc("ngIf","Add movement"==t.label||"Edit movement"==t.label),T.Db(1),T.pc("ngIf","Add note"==t.label||"Edit note"==t.label))},directives:[V.t,y.a,y.c,H.b,H.d,H.c,s.b,m.a,g.d,$.a,O.A,O.q,O.h,O.b,O.p,O.g,O.w,b.c,b.f,h.a,V.s,f.b,l.b,l.d,b.h,l.a,O.i,_.n,b.b,c.c,c.a],pipes:[V.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-modal-dialog{width:1080px}}.container-details-modal-dialog .mat-dialog-container{padding:0}.container-details-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),ae),ce=n("znSr");function le(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.name," ")}}function se(e,t){if(1&e){var n=T.Yb();T.Xb(0,"mat-form-field",19),T.Xb(1,"mat-label"),T.Lc(2,"Country"),T.Wb(),T.Xb(3,"mat-select",54),T.fc("selectionChange",(function(e){return T.Bc(n),T.jc(2).getCountry(e)})),T.Xb(4,"mat-option",55),T.Lc(5,"All"),T.Wb(),T.Jc(6,le,2,2,"mat-option",32),T.Wb(),T.Wb()}if(2&e){var i=T.jc(2);T.Db(4),T.pc("value",0),T.Db(2),T.pc("ngForOf",i.country)}}function ue(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Nc(" ",n.full_name," ")}}function be(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Place is required "),T.Wb())}function me(e,t){if(1&e&&(T.Xb(0,"mat-form-field",56),T.Xb(1,"mat-label"),T.Lc(2,"Place"),T.Wb(),T.Xb(3,"mat-select",57),T.Jc(4,ue,2,2,"mat-option",32),T.Wb(),T.Jc(5,be,2,0,"mat-error",6),T.Wb()),2&e){var n=T.jc(2);T.Db(4),T.pc("ngForOf",n.filterPlace),T.Db(1),T.pc("ngIf",n.formMovement.get("place").hasError("required"))}}function de(e,t){if(1&e&&(T.Xb(0,"mat-option",60),T.Lc(1),T.Wb()),2&e){var n=t.$implicit,i=T.jc(3);T.pc("value",n)("disabled",!i.filterStep.includes(n)),T.Db(1),T.Nc(" ",n.code," ")}}function fe(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Move Type is required "),T.Wb())}function pe(e,t){if(1&e&&(T.Xb(0,"mat-form-field",14),T.Xb(1,"mat-label"),T.Lc(2,"Move Type"),T.Wb(),T.Xb(3,"mat-select",58),T.Jc(4,de,2,3,"mat-option",59),T.Wb(),T.Jc(5,fe,2,0,"mat-error",6),T.Wb()),2&e){var n=T.jc(2);T.Db(4),T.pc("ngForOf",n.moveType),T.Db(1),T.pc("ngIf",n.formMovement.get("move").hasError("required"))}}function he(e,t){if(1&e&&(T.Xb(0,"mat-form-field",14),T.Xb(1,"mat-label"),T.Lc(2,"Move Type"),T.Wb(),T.Sb(3,"input",15),T.Sb(4,"input",61),T.Wb()),2&e){var n=T.jc(2);T.Db(3),T.pc("readonly",!0)("value",n.movement.move_code)}}function ve(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Nc(" ",n.name," ")}}function ge(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," seaport is required "),T.Wb())}function ye(e,t){if(1&e&&(T.Xb(0,"mat-form-field",14),T.Xb(1,"mat-label"),T.Lc(2,"Seaport"),T.Wb(),T.Xb(3,"mat-select",57),T.Jc(4,ve,2,2,"mat-option",32),T.Wb(),T.Jc(5,ge,2,0,"mat-error",6),T.Wb()),2&e){var n=T.jc(2);T.Db(4),T.pc("ngForOf",n.filterSeaport),T.Db(1),T.pc("ngIf",n.formMovement.get("place").hasError("required"))}}function xe(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Nc(" ",n.full_name," ")}}function Ce(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Carrier is required "),T.Wb())}function Se(e,t){if(1&e&&(T.Xb(0,"mat-form-field",62),T.Xb(1,"mat-label"),T.Lc(2,"Carrier"),T.Wb(),T.Xb(3,"mat-select",57),T.Jc(4,xe,2,2,"mat-option",32),T.Wb(),T.Jc(5,Ce,2,0,"mat-error",6),T.Wb()),2&e){var n=T.jc(2);T.Db(4),T.pc("ngForOf",n.filterCarrier),T.Db(1),T.pc("ngIf",n.formMovement.get("place").hasError("required"))}}function ke(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Date is required "),T.Wb())}function We(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Time is required "),T.Wb())}function Xe(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.name),T.Db(1),T.Nc(" ",n.name," ")}}function _e(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.name),T.Db(1),T.Nc(" ",n.name," ")}}function we(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.name," ")}}function De(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.name),T.Db(1),T.Nc(" ",n.name," ")}}function Le(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.name),T.Db(1),T.Nc(" ",n.name," ")}}function Me(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.name," ")}}function Ie(e,t){if(1&e&&T.Sb(0,"input",15),2&e){var n=T.jc(2);T.pc("readonly",!0)("value",n.voyageName)}}function Re(e,t){if(1&e&&(T.Xb(0,"mat-option",55),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Oc(" ",n.vessel_name," ",n.name," ")}}var Ae=function(e){return{hide:e}};function Ne(e,t){if(1&e){var n=T.Yb();T.Xb(0,"div"),T.Xb(1,"form",7),T.fc("keydown.enter",(function(e){return T.Bc(n),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){T.Bc(n);var t=T.jc();return t.onMovementFormSubmit(t.formMovement)})),T.Xb(2,"div",8),T.Sb(3,"input",9),T.Sb(4,"input",10),T.Wb(),T.Xb(5,"div",11),T.Jc(6,se,7,2,"mat-form-field",12),T.Jc(7,me,6,2,"mat-form-field",13),T.Xb(8,"mat-form-field",14),T.Xb(9,"mat-label"),T.Lc(10,"Container"),T.Wb(),T.Sb(11,"input",15),T.Wb(),T.Jc(12,pe,6,2,"mat-form-field",16),T.Jc(13,he,5,2,"mat-form-field",16),T.Jc(14,ye,6,2,"mat-form-field",17),T.Jc(15,Se,6,2,"mat-form-field",18),T.Xb(16,"mat-form-field",19),T.Xb(17,"mat-label"),T.Lc(18,"Document"),T.Wb(),T.Sb(19,"input",20),T.Wb(),T.Xb(20,"mat-form-field",14),T.Xb(21,"mat-label"),T.Lc(22,"Date"),T.Wb(),T.Xb(23,"input",21),T.fc("change",(function(e){return T.Bc(n),T.jc().setDateStr(e)})),T.Wb(),T.Sb(24,"mat-datepicker-toggle",22),T.Sb(25,"mat-datepicker",null,23),T.Jc(27,ke,2,0,"mat-error",6),T.Wb(),T.Xb(28,"mat-form-field",14),T.Xb(29,"mat-label"),T.Lc(30,"Time"),T.Wb(),T.Sb(31,"input",24),T.Jc(32,We,2,0,"mat-error",6),T.Wb(),T.Xb(33,"div",25),T.Xb(34,"mat-form-field",26),T.Xb(35,"mat-label"),T.Lc(36,"Vehicle type"),T.Wb(),T.Sb(37,"input",27),T.Wb(),T.Xb(38,"mat-form-field",26),T.Xb(39,"mat-label"),T.Lc(40,"Vehicle number"),T.Wb(),T.Sb(41,"input",28),T.Wb(),T.Xb(42,"mat-form-field",29),T.Xb(43,"mat-label"),T.Lc(44,"Country of Loading"),T.Wb(),T.Sb(45,"input",30),T.Xb(46,"mat-autocomplete",null,31),T.Jc(48,Xe,2,2,"mat-option",32),T.Wb(),T.Wb(),T.Xb(49,"mat-form-field",29),T.Xb(50,"mat-label"),T.Lc(51,"Port of Loading"),T.Wb(),T.Sb(52,"input",33),T.Xb(53,"mat-autocomplete",null,34),T.Jc(55,_e,2,2,"mat-option",32),T.Wb(),T.Wb(),T.Xb(56,"mat-form-field",35),T.Xb(57,"mat-label"),T.Lc(58,"Load terminal"),T.Wb(),T.Xb(59,"mat-select",36),T.Jc(60,we,2,2,"mat-option",32),T.Wb(),T.Wb(),T.Xb(61,"mat-form-field",29),T.Xb(62,"mat-label"),T.Lc(63,"Country of Discharge"),T.Wb(),T.Sb(64,"input",37),T.Xb(65,"mat-autocomplete",null,38),T.Jc(67,De,2,2,"mat-option",32),T.Wb(),T.Wb(),T.Xb(68,"mat-form-field",29),T.Xb(69,"mat-label"),T.Lc(70,"Port of Discharge"),T.Wb(),T.Sb(71,"input",39),T.Xb(72,"mat-autocomplete",null,40),T.Jc(74,Le,2,2,"mat-option",32),T.Wb(),T.Wb(),T.Xb(75,"mat-form-field",35),T.Xb(76,"mat-label"),T.Lc(77,"Discharge terminal"),T.Wb(),T.Xb(78,"mat-select",41),T.Jc(79,Me,2,2,"mat-option",32),T.Wb(),T.Wb(),T.Xb(80,"mat-form-field",42),T.Xb(81,"mat-label"),T.Lc(82,"Voyage"),T.Wb(),T.Jc(83,Ie,1,2,"input",43),T.Xb(84,"mat-select",44),T.Jc(85,Re,2,3,"mat-option",32),T.Wb(),T.Xb(86,"button",45),T.fc("click",(function(e){T.Bc(n);var t=T.jc();return t.getVoyage(t.formMovement.value)})),T.Xb(87,"mat-icon",46),T.Lc(88,"refresh"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(89,"mat-form-field",47),T.Xb(90,"mat-label"),T.Lc(91,"Update by"),T.Wb(),T.Sb(92,"input",15),T.Sb(93,"input",48),T.Wb(),T.Wb(),T.Xb(94,"div",49),T.Xb(95,"div",50),T.Lc(96),T.Wb(),T.Wb(),T.Xb(97,"div",51),T.Xb(98,"button",52),T.Lc(99,"Submit"),T.Wb(),T.Xb(100,"button",53),T.fc("click",(function(e){return T.Bc(n),T.jc().matDialogRef.close()})),T.Lc(101,"Cancel"),T.Wb(),T.Wb(),T.Wb(),T.Wb()}if(2&e){var i=T.xc(26),o=T.xc(47),a=T.xc(54),r=T.xc(66),c=T.xc(73),l=T.jc();T.Db(1),T.pc("formGroup",l.formMovement),T.Db(5),T.pc("ngIf","LOAD"!=l.stepCheck),T.Db(1),T.pc("ngIf","LOAD"!=l.stepCheck&&(!l.formMovement.controls.move.value||"OFHI"!=l.formMovement.controls.move.value.code)),T.Db(4),T.pc("readonly",!0)("value",l.containerNumber),T.Db(1),T.pc("ngIf","Add movement"==l.label),T.Db(1),T.pc("ngIf","Edit movement"==l.label),T.Db(1),T.pc("ngIf",!!l.formMovement.controls.move.value&&"OFHI"==l.formMovement.controls.move.value.code),T.Db(1),T.pc("ngIf","LOAD"==l.stepCheck),T.Db(8),T.pc("matDatepicker",i)("min",l.timeMin)("max",l.timeMax),T.Db(1),T.pc("for",i),T.Db(3),T.pc("ngIf",l.formMovement.get("date").hasError("required")),T.Db(5),T.pc("ngIf",l.formMovement.get("time").hasError("required")),T.Db(2),T.pc("ngClass",T.rc(42,Ae,"LOAD"==l.stepCheck)),T.Db(4),T.pc("ngClass",T.rc(44,Ae,"LOAD"==l.stepCheck)),T.Db(4),T.pc("ngClass",T.rc(46,Ae,"LOAD"!=l.stepCheck)),T.Db(3),T.pc("matAutocomplete",o),T.Db(3),T.pc("ngForOf",l.filteredCountry1),T.Db(1),T.pc("ngClass",T.rc(48,Ae,"LOAD"!=l.stepCheck)),T.Db(3),T.pc("matAutocomplete",a)("readonly",!l.formMovement.controls.info.value.country_of_loading),T.Db(3),T.pc("ngForOf",l.filteredPort1),T.Db(1),T.pc("ngClass",T.rc(50,Ae,"LOAD"!=l.stepCheck)),T.Db(4),T.pc("ngForOf",l.loadTerminal),T.Db(1),T.pc("ngClass",T.rc(52,Ae,"LOAD"!=l.stepCheck)),T.Db(3),T.pc("matAutocomplete",r),T.Db(3),T.pc("ngForOf",l.filteredCountry2),T.Db(1),T.pc("ngClass",T.rc(54,Ae,"LOAD"!=l.stepCheck)),T.Db(3),T.pc("matAutocomplete",c)("readonly",!l.formMovement.controls.info.value.country_of_discharge),T.Db(3),T.pc("ngForOf",l.filteredPort2),T.Db(1),T.pc("ngClass",T.rc(56,Ae,"LOAD"!=l.stepCheck)),T.Db(4),T.pc("ngForOf",l.dischargeTerminal),T.Db(1),T.pc("ngClass",T.rc(58,Ae,"LOAD"!=l.stepCheck)),T.Db(3),T.pc("ngIf",0==l.voyage.length),T.Db(1),T.pc("ngClass",T.rc(60,Ae,0==l.voyage.length)),T.Db(1),T.pc("ngForOf",l.voyage),T.Db(7),T.pc("readonly",!0)("value",l.name),T.Db(4),T.Mc(l.errorMessage)}}var Pe,Oe=((Pe=function(){function e(t,n,i,o,a,r,c){var l=this;if(_classCallCheck(this,e),this.matDialogRef=t,this._data=n,this.authService=i,this._formBuilder=o,this.commonService=a,this.containerDetailsService=r,this.datePipe=c,this.voyage=[],this.voyageName=null,this.timeMin=null,this.timeMax=new Date,this.filterStep=[],this.countryPlace=0,this.loadTerminal=[],this.dischargeTerminal=[],this.stepCheck="",this.formMovement=this._formBuilder.group({id:[null],container:[null,O.y.required],country:[null],move:[null,O.y.required],document:[null],date:[null,O.y.required],time:["00:00",O.y.required],place:[null,O.y.required],info:this._formBuilder.group({country_of_loading:[null],pol:[null],load_terminal:[null],country_of_discharge:[null],pod:[null],discharge_terminal:[null],voyage:[null],vehicle_type:[null],vehicle_number:[null]}),update_by:[this.authService.user,O.y.required]}),this.label=n.label,this.country=n.country,this.supplier=n.supplier,this.supplierCarrier=n.supplierCarrier,0==this.countryPlace?(this.filterPlace=this.supplier.slice(),this.filterCarrier=this.supplierCarrier.slice()):(this.filterPlace=this.supplier.filter((function(e){return e.country==l.countryPlace})),this.filterCarrier=this.supplierCarrier.filter((function(e){return e.country==l.countryPlace}))),this.seaport=n.seaport,this.filteredCountry1=this.country.slice(),this.filteredPort1=this.seaport.slice(),this.filteredCountry2=this.country.slice(),this.filteredPort2=this.seaport.slice(),this.filterSeaport=this.seaport.slice(),this.seaTerminal=n.seaTerminal,this.loadTerminal=this.seaTerminal.slice(),this.dischargeTerminal=this.seaTerminal.slice(),this.container=n.container,this.moveType=n.moveType,this.movements=n.movements,this.id=n.id,this.contId=n.contId,"Add movement"==this.label)if(this.containerNumber=this.container.cont_number,this.formMovement.controls.container.setValue(this.contId),this.container.off_hire)this.filterStep=[{code:""}];else{if(1==this.movements.length)this.stepId=this.moveType.filter((function(e){return 2==e.step||7==e.step||10==e.step})),this.timeMin=this.container.on_hire;else{var s=this.movements[0].move;this.timeMin=this.movements[0].date;var u=this.moveType.find((function(e){return e.id==s}));if(u){var b=u.step;switch(b){case 1:this.stepId=this.moveType.filter((function(e){return 2==e.step||7==e.step||10==e.step}));break;case 2:case 3:case 4:case 5:this.stepId=this.moveType.filter((function(e){return e.step==b+1}));break;case 6:case 7:this.stepId=this.moveType.filter((function(e){return 1==e.step||8==e.step}));break;case 10:this.stepId=this.moveType.filter((function(e){return 1==e.step}))}}}this.moveType.map((function(e){l.stepId.map((function(t){e.id==t.id&&l.filterStep.push(e)}))}))}if("Edit movement"==this.label){this.movement=this.movements.find((function(e){return e.id==l.id}));var m=this.movements.indexOf(this.movement),d=this.movements.length;switch(!0){case 0==m&&1==d:this.timeMin=null,this.timeMax=new Date;break;case 0==m&&d>1:this.timeMin=new Date(this.movements[1].date),this.timeMax=new Date;break;case m>0&&m<d-1:this.timeMin=new Date(this.movements[m+1].date),this.timeMax=new Date(this.movements[m-1].date);break;case m>0&&m==d-1:this.timeMin=null,this.timeMax=new Date(this.movements[m-1].date)}this.containerNumber=this.container.cont_number,"LOAD"==this.movement.move_code?(this.stepCheck="LOAD",this.movement.place=this.filterCarrier.find((function(e){return e.id==l.movement.place}))):this.movement.place=this.filterPlace.find((function(e){return e.id==l.movement.place}));var f=this.datePipe.transform(new Date(this.movement.date),"yyyy/MM/dd");this.movement.time=this.datePipe.transform(new Date(this.movement.date),"HH:mm"),this.movement.date=new Date(f),this.movement.info?this.movement.info.voyage&&(this.voyageName=this.movement.info.voyage.vessel_name+" "+this.movement.info.voyage.name):this.movement.info={},this.movement.move=this.moveType.find((function(e){return e.id==l.movement.move})),this.formMovement.patchValue(this.movement),this.filterStep=this.moveType.filter((function(e){return e.id==l.movement.move})),this.formMovement.controls.update_by.setValue(this.authService.user)}this.permission=n.permission}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.name=this.authService.name,this.formMovement.valueChanges.subscribe((function(t){e.errorMessage=""})),this.formMovement.controls.move.valueChanges.subscribe((function(t){t&&(e.stepCheck=t.code,e.filterStep[0]=t)})),this.formMovement.get("info.country_of_loading").valueChanges.subscribe((function(t){if(t){var n=t.toLowerCase();e.filteredCountry1=e.country.filter((function(e){return 0===e.name.toLowerCase().indexOf(n)}))}else e.filteredCountry1=e.country.slice();e.col=e.country.find((function(e){return e.name==t})),e.col&&(e.filteredPort1=e.seaport.filter((function(t){return t.country_id==e.col.id})))})),this.formMovement.get("info.pol").valueChanges.subscribe((function(t){if(e.col&&(e.filteredPort1=e.seaport.filter((function(t){return t.country_id==e.col.id}))),t&&""!=t){var n=t.toLowerCase();e.filteredPort1=e.filteredPort1.filter((function(e){return 0===e.name.toLowerCase().indexOf(n)}))}var i=e.seaport.find((function(e){return e.name==t}));i&&("string"==typeof i.info&&""!=i.info&&(i.info=JSON.parse(i.info)),!e.pod||e.pod&&i.id!=e.pod.id?(e.pol=i,e.loadTerminal=e.seaTerminal.filter((function(e){return e.seaport_id==i.id}))):(e.col=e.country.find((function(e){return e.id==i.country_id})),e.loadTerminal=e.seaTerminal.filter((function(e){return e.seaport_id==i.id}))))})),this.formMovement.get("info.country_of_discharge").valueChanges.subscribe((function(t){if(t){var n=t.toLowerCase();e.filteredCountry2=e.country.filter((function(e){return 0===e.name.toLowerCase().indexOf(n)}))}else e.filteredCountry2=e.country.slice();e.cod=e.country.find((function(e){return e.name==t})),e.cod&&(e.filteredPort2=e.seaport.filter((function(t){return t.country_id==e.cod.id})))})),this.formMovement.get("info.pod").valueChanges.subscribe((function(t){if(e.cod&&(e.filteredPort2=e.seaport.filter((function(t){return t.country_id==e.cod.id}))),t&&""!=t){var n=t.toLowerCase();e.filteredPort2=e.filteredPort2.filter((function(e){return 0===e.name.toLowerCase().indexOf(n)}))}var i=e.seaport.find((function(e){return e.name==t}));i&&("string"==typeof i.info&&""!=i.info&&(i.info=JSON.parse(i.info)),!e.pol||e.pol&&i.id!=e.pol.id?(e.pod=i,e.dischargeTerminal=e.seaTerminal.filter((function(e){return e.seaport_id==i.id}))):(e.cod=e.country.find((function(e){return e.id==i.country_id})),e.dischargeTerminal=e.seaTerminal.slice()))})),this.formMovement.get("info.voyage").valueChanges.subscribe((function(t){t&&(e.formMovement.get("info.pol").setValue(t.load_port_name),e.formMovement.get("info.country_of_loading").setValue(t.country_of_loading),e.formMovement.get("info.pod").setValue(t.discharge_port_name),e.formMovement.get("info.country_of_discharge").setValue(t.country_of_discharge))}))}},{key:"setDateStr",value:function(e){e.target.value=""==e.target.value?null:new Date(e.target.value)}},{key:"displayFnCont",value:function(e){return e?e.cont_number:void 0}},{key:"_filterCont",value:function(e){var t=e.toLowerCase();return this.container.filter((function(e){return e.cont_number.toLowerCase().includes(t)}))}},{key:"getCountry",value:function(e){var t=this;this.countryPlace=e.value,0==this.countryPlace?(this.filterPlace=this.supplier.slice(),this.filterCarrier=this.supplierCarrier.slice(),this.filterSeaport=this.seaport.slice()):(this.filterPlace=this.supplier.filter((function(e){return e.country==t.countryPlace})),this.filterSeaport=this.seaport.filter((function(e){return e.country_id==t.countryPlace})),this.filterCarrier=this.supplierCarrier.filter((function(e){return e.country==t.countryPlace}))),this.formMovement.controls.place.setValue(null)}},{key:"onMovementFormSubmit",value:function(e){var t=this;if(this.filterStep.length>0&&"LOAD"==this.filterStep[0].code&&!e.value.info.voyage)this.errorMessage="Voyage is required";else if(e.valid){var n=JSON.parse(JSON.stringify(e.value)),i=this.datePipe.transform(new Date(n.date),"yyyy/MM/dd");i+=" "+n.time+":00.0",delete n.time,delete n.country,n.date=i,n.info=JSON.stringify(n.info),n.move=n.move.id,n.place=n.place.id,"Add movement"==this.label?(this.authService.onRequestChanged.next(!0),this.containerDetailsService.createMovement(n).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error create")})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.errorMessage="Error create"}))):(this.authService.onRequestChanged.next(!0),n.date=i,this.containerDetailsService.updateMovement(n).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error edit containerDetail")})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.errorMessage="Error edit containerDetail"})))}}},{key:"goBack",value:function(){this.authService.goBack()}},{key:"getVoyage",value:function(e){var t=this;if(this.errorMessage="",e.place&&""!=e.place)if(e.info.load_terminal&&""!=e.info.load_terminal)if(e.info.discharge_terminal&&""!=e.info.discharge_terminal)if(e.date){var n=this.datePipe.transform(e.date,"yyyy-MM-dd");this.authService.onRequestChanged.next(!0),this.containerDetailsService.getVoyage(e.place.id,e.info.load_terminal,e.info.discharge_terminal,n).then((function(e){t.authService.onRequestChanged.next(!1),0==e.length&&(t.errorMessage="Voyage get 0 result"),t.voyage=e}))}else this.errorMessage="Date is required";else this.errorMessage="Discharge terminal is required";else this.errorMessage="Load terminal is required";else this.errorMessage="Place is required"}}]),e}()).\u0275fac=function(e){return new(e||Pe)(T.Rb(g.f),T.Rb(g.a),T.Rb(j.a),T.Rb(O.d),T.Rb(z.a),T.Rb(J),T.Rb(V.f))},Pe.\u0275cmp=T.Lb({type:Pe,selectors:[["container-details-movement-modal-dialog"]],decls:10,vars:2,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","container-details-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","container","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20","class","pr-8",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80","class","pr-8",4,"ngIf"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","",3,"readonly","value"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20","class","pr-8",4,"ngIf"],["appearance","outline","class","pr-8","fxFlex","50","fxFlex.gt-xs","20",4,"ngIf"],["appearance","outline","class","pr-8","fxFlex","100","fxFlex.gt-xs","60",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","","formControlName","document"],["inputCheck","","matInput","","name","date","formControlName","date","required","",3,"matDatepicker","min","max","change"],["matSuffix","",3,"for"],["moveDatePicker",""],["inputCheck","","matInput","","type","time","formControlName","time","required",""],["formGroupName","info","fxFlex","100","fxLayout","row wrap","fxLayoutAlign","start center",1,"pr-8"],["appearance","outline","fxFlex","50",1,"pr-8",3,"ngClass"],["inputCheck","","matInput","","formControlName","vehicle_type"],["inputCheck","","matInput","","formControlName","vehicle_number"],["appearance","outline","fxFlex","33",1,"pr-8",3,"ngClass"],["inputCheck","","type","text","aria-label","Country of Loading","matInput","","formControlName","country_of_loading",3,"matAutocomplete"],["autoCOL","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","aria-label","Port of Loading","matInput","","formControlName","pol",3,"matAutocomplete","readonly"],["autoPOL","matAutocomplete"],["appearance","outline","fxFlex","34",1,"pr-8",3,"ngClass"],["formControlName","load_terminal"],["inputCheck","","type","text","aria-label","Country of Discharge","matInput","","formControlName","country_of_discharge",3,"matAutocomplete"],["autoCOD","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of Discharge","matInput","","formControlName","pod",3,"matAutocomplete","readonly"],["autoPOD","matAutocomplete"],["formControlName","discharge_terminal"],["appearance","outline","fxFlex","100",1,"pr-8",3,"ngClass"],["inputCheck","","matInput","",3,"readonly","value",4,"ngIf"],["formControlName","voyage",3,"ngClass"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"click"],["color","accent"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],["formControlName","country",3,"selectionChange"],[3,"value"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["formControlName","place","required",""],["formControlName","move","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["inputCheck","","type","text","matInput","","formControlName","move",2,"display","none"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","60",1,"pr-8"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"mat-toolbar",1),T.Xb(2,"mat-toolbar-row",2),T.Xb(3,"span",3),T.Lc(4),T.Wb(),T.Xb(5,"button",4),T.fc("click",(function(e){return t.matDialogRef.close()})),T.Xb(6,"mat-icon"),T.Lc(7,"close"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(8,"div",5),T.Jc(9,Ne,102,62,"div",6),T.Wb(),T.Wb()),2&e&&(T.Db(4),T.Mc(t.label),T.Db(5),T.pc("ngIf","Add movement"==t.label||"Edit movement"==t.label))},directives:[y.a,y.c,H.b,H.d,H.c,s.b,m.a,g.d,$.a,V.t,O.A,O.q,O.h,O.b,O.p,O.g,O.w,b.c,b.f,f.b,l.b,l.d,b.h,l.a,O.i,V.q,ce.a,c.c,c.a,V.s,h.a,_.n,b.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-movement-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-movement-modal-dialog{width:1080px}}.container-details-movement-modal-dialog .mat-dialog-container{padding:0}.container-details-movement-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-movement-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-movement-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),Pe),qe=n("ihCf"),Fe=["formDirective"];function Te(e,t){if(1&e&&(T.Xb(0,"mat-option",26),T.Lc(1),T.kc(2,"date"),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.sel_move_id),T.Db(1),T.Oc("",n.move_code," ",T.mc(2,3,n.date,"MM/dd/yyyy"),"")}}function je(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Move is required "),T.Wb())}function ze(e,t){if(1&e&&(T.Xb(0,"mat-option",53),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n),T.Db(1),T.Nc(" ",n.name," ")}}function Be(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Price is required "),T.Wb())}function Ee(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Volume is required "),T.Wb())}function Je(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Amount is required "),T.Wb())}function Ve(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Tax is required "),T.Wb())}function He(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Tax Amount is required "),T.Wb())}function $e(e,t){if(1&e&&(T.Xb(0,"mat-option",26),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.code," ")}}function Ue(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Currency is required "),T.Wb())}function Ge(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Ex_rate is required "),T.Wb())}function Ye(e,t){if(1&e&&(T.Xb(0,"mat-option",26),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.full_name," ")}}function Qe(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Party is required "),T.Wb())}function Ke(e,t){if(1&e&&(T.Xb(0,"mat-option",26),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.name," ")}}function Ze(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Payment center is required "),T.Wb())}var et,tt,nt=((et=function(){function e(t,n,i,o,a,r,c){switch(_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=i,this.authService=o,this.commonService=a,this.datePipe=r,this._formBuilder=c,this.errorMessage="",this.type="",this.form=this._formBuilder.group({id:[null,O.y.required],move:[null,O.y.required],shipment:[null,O.y.required],price:[null,O.y.required],volume:[null,O.y.required],amount:[null,O.y.required],tax:[0,O.y.required],tax_amount:[null,O.y.required],currency:[4,O.y.required],ex_rate:[23500,O.y.required],payment_center:[6,O.y.required],partner:[null,O.y.required],debit:[null],inv_number:[null],issue_date:[null],info:[null],update_by:[this.authService.user,O.y.required],create_by:[this.authService.user,O.y.required]}),this.partnerColumn={Revenue:"pay_party",Cost:"issue_party"},this.updateItem=new T.o,this.label=i.label,this.price=i.price,this.currency=i.currency,this.partner=i.partner,this.country=i.country,this.user=i.users,this.move=i.move,this.permission=i.permission,!0){case this.label.includes("Revenue"):this.type="Revenue";break;case this.label.includes("Cost"):this.type="Cost"}if(i.data){var l=JSON.parse(JSON.stringify(i.data));l.price=this.price.find((function(e){return e.id==l.price})),this.form.patchValue(l),this.createName=l.create_by_name,this.shipment=i.data.code}if(this.label.includes("Edit"))this.form.controls.update_by.setValue(this.authService.user);else if(this.form.controls.id.disable(),!i.data){var s=this.move.find((function(e){return e.sel_move_id==i.selMove.sel_move_id}));if(this.form.controls.shipment.setValue(s.shipment_id),this.form.controls.move.setValue(s.sel_move_id),this.shipment=s.shipment_code,"HLA"==s.place_short_name){var u=this.partner.find((function(e){return"SIMBA SIN"==e.short_name}));u&&(this.form.controls.partner.setValue(u.id),this.form.controls.payment_center.setValue(u.country),this.form.controls.currency.setValue(173),this.form.controls.ex_rate.setValue(17e3))}this.createName=this.authService.name}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.name=this.authService.name,this.filteredPartner=this.form.controls.partner.valueChanges.pipe(Object(q.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(q.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.price_name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"price_name",e.price):e.price}))),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(q.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.country):[]}))),this.form.controls.partner.valueChanges.subscribe((function(t){var n=e.partner.find((function(e){return e.id==t}));n&&e.form.controls.payment_center.setValue(n.country)})),this.form.controls.amount.valueChanges.subscribe((function(t){t=t||0;var n=e.form.value.tax?e.form.value.tax:0;5.26==n&&(n=.05/.95*100);var i=Math.round(t*n/100);e.form.controls.tax_amount.setValue(i)})),this.form.controls.tax.valueChanges.subscribe((function(t){5.26==(t=t||0)&&(t=.05/.95*100);var n=Math.round((e.form.value.amount?e.form.value.amount:0)*t/100);e.form.controls.tax_amount.setValue(n)})),this.form.valueChanges.subscribe((function(t){e.errorMessage=""}))}},{key:"onFormSubmit",value:function(e){if(e.valid){var t=JSON.parse(JSON.stringify(e.value));if("string"==typeof t.price&&this.form.controls.price.setValue(null),"string"==typeof t.currency&&this.form.controls.currency.setValue(null),"string"==typeof t.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof t.partner&&this.form.controls.partner.setValue(null),"string"==typeof t.create_by&&this.form.controls.create_by.setValue(null),!this.form.valid)return;t.issue_date&&(t.issue_date=this.datePipe.transform(t.issue_date,"yyyy-MM-dd")),t.update_at=this.datePipe.transform(new Date,"yyyy-MM-dd HH:mm:ss"),t[this.partnerColumn[this.type]]=t.partner,delete t.partner,this.updateItem.emit(t)}}},{key:"getExrate",value:function(e){var t=this.currency.find((function(t){return t.id==e.value}));this.form.controls.ex_rate.setValue(t.exrate)}}]),e}()).\u0275fac=function(e){return new(e||et)(T.Rb(o.g),T.Rb(g.f),T.Rb(g.a),T.Rb(j.a),T.Rb(z.a),T.Rb(V.f),T.Rb(O.d))},et.\u0275cmp=T.Lb({type:et,selectors:[["container-details-soa-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&T.Sc(Fe,!0),2&e&&T.wc(n=T.gc())&&(t.shipmentNgForm=n.first)},decls:136,vars:45,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-detail-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","shipment","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","50",1,"pr-8"],["formControlName","move","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["inputCheck","","matInput","",3,"value","readonly"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","10",1,"pr-8"],["inputCheck","","matInput","","formControlName","volume","min","1","type","number","required",""],["inputCheck","","matInput","","type","number","formControlName","amount","required",""],["formControlName","tax","required",""],[3,"value"],["inputCheck","","matInput","","type","number","formControlName","tax_amount","required",""],["formControlName","currency","required","",3,"selectionChange"],["floatLabel","always","fxFlex","25","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","type","number","matInput","","formControlName","ex_rate"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","75",1,"pr-8"],["inputCheck","","aria-label","partner","matInput","","formControlName","partner",3,"matAutocomplete"],["autoCus","matAutocomplete"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","aria-label","payment_center","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["inputCheck","","matInput","","formControlName","debit"],["inputCheck","","matInput","","formControlName","inv_number"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["matSuffix","",3,"for"],["issueDate",""],["inputCheck","","matInput","","readonly","true",3,"value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","20"],["inputCheck","","matInput","","formControlName","create_by",2,"display","none"],["floatLabel","always","fxFlex","100",1,"pr-8"],["textareaCheck","","matInput","","formControlName","info","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[2,"font-size","12px","overflow","visible","display","block",3,"value"]],template:function(e,t){if(1&e&&(T.Xb(0,"div",0),T.Xb(1,"mat-toolbar",1),T.Xb(2,"mat-toolbar-row",2),T.Xb(3,"span",3),T.Lc(4),T.Wb(),T.Xb(5,"button",4),T.fc("click",(function(e){return t.matDialogRef.close()})),T.Xb(6,"mat-icon"),T.Lc(7,"close"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(8,"div",5),T.Xb(9,"div"),T.Xb(10,"form",6),T.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),T.Xb(11,"div",7),T.Sb(12,"input",8),T.Sb(13,"input",9),T.Wb(),T.Xb(14,"div",10),T.Xb(15,"mat-form-field",11),T.Xb(16,"mat-label"),T.Lc(17,"Move"),T.Wb(),T.Xb(18,"mat-select",12),T.Jc(19,Te,3,6,"mat-option",13),T.Wb(),T.Jc(20,je,2,0,"mat-error",14),T.Wb(),T.Xb(21,"mat-form-field",11),T.Xb(22,"mat-label"),T.Lc(23,"Shipment"),T.Wb(),T.Sb(24,"input",15),T.Wb(),T.Xb(25,"mat-form-field",16),T.Xb(26,"mat-label"),T.Lc(27,"Price"),T.Wb(),T.Sb(28,"input",17),T.Xb(29,"mat-autocomplete",18,19),T.Jc(31,ze,2,2,"mat-option",20),T.kc(32,"async"),T.Wb(),T.Jc(33,Be,2,0,"mat-error",14),T.Wb(),T.Xb(34,"mat-form-field",21),T.Xb(35,"mat-label"),T.Lc(36,"Unit"),T.Wb(),T.Sb(37,"input",15),T.Wb(),T.Xb(38,"mat-form-field",22),T.Xb(39,"mat-label"),T.Lc(40,"Volume"),T.Wb(),T.Sb(41,"input",23),T.Jc(42,Ee,2,0,"mat-error",14),T.Wb(),T.Xb(43,"mat-form-field",21),T.Xb(44,"mat-label"),T.Lc(45,"Amount"),T.Wb(),T.Sb(46,"input",24),T.Jc(47,Je,2,0,"mat-error",14),T.Wb(),T.Xb(48,"mat-form-field",22),T.Xb(49,"mat-label"),T.Lc(50,"Tax(%)"),T.Wb(),T.Xb(51,"mat-select",25),T.Xb(52,"mat-option",26),T.Lc(53,"0"),T.Wb(),T.Xb(54,"mat-option",26),T.Lc(55,"5"),T.Wb(),T.Xb(56,"mat-option",26),T.Lc(57,"5.26"),T.Wb(),T.Xb(58,"mat-option",26),T.Lc(59,"7"),T.Wb(),T.Xb(60,"mat-option",26),T.Lc(61,"8"),T.Wb(),T.Xb(62,"mat-option",26),T.Lc(63,"10"),T.Wb(),T.Wb(),T.Jc(64,Ve,2,0,"mat-error",14),T.Wb(),T.Xb(65,"mat-form-field",21),T.Xb(66,"mat-label"),T.Lc(67,"Tax Amount"),T.Wb(),T.Sb(68,"input",27),T.Jc(69,He,2,0,"mat-error",14),T.Wb(),T.Xb(70,"mat-form-field",21),T.Xb(71,"mat-label"),T.Lc(72,"Currency"),T.Wb(),T.Xb(73,"mat-select",28),T.fc("selectionChange",(function(e){return t.getExrate(e)})),T.Jc(74,$e,2,2,"mat-option",13),T.Wb(),T.Jc(75,Ue,2,0,"mat-error",14),T.Wb(),T.Xb(76,"mat-form-field",29),T.Xb(77,"mat-label"),T.Lc(78,"Ex-rate"),T.Wb(),T.Sb(79,"input",30),T.Jc(80,Ge,2,0,"mat-error",14),T.Wb(),T.Xb(81,"mat-form-field",31),T.Xb(82,"mat-label"),T.Lc(83),T.Wb(),T.Sb(84,"input",32),T.Xb(85,"mat-autocomplete",18,33),T.Jc(87,Ye,2,2,"mat-option",13),T.kc(88,"async"),T.Wb(),T.Jc(89,Qe,2,0,"mat-error",14),T.Wb(),T.Xb(90,"mat-form-field",34),T.Xb(91,"mat-label"),T.Lc(92,"Payment center"),T.Wb(),T.Sb(93,"input",35),T.Xb(94,"mat-autocomplete",18,36),T.Jc(96,Ke,2,2,"mat-option",13),T.kc(97,"async"),T.Wb(),T.Jc(98,Ze,2,0,"mat-error",14),T.Wb(),T.Xb(99,"mat-form-field",21),T.Xb(100,"mat-label"),T.Lc(101,"Debit"),T.Wb(),T.Sb(102,"input",37),T.Wb(),T.Xb(103,"mat-form-field",21),T.Xb(104,"mat-label"),T.Lc(105,"Invoice number"),T.Wb(),T.Sb(106,"input",38),T.Wb(),T.Xb(107,"mat-form-field",21),T.Xb(108,"mat-label"),T.Lc(109,"Issue date"),T.Wb(),T.Xb(110,"input",39),T.fc("change",(function(e){return t.commonService.setDateStr(e)})),T.Wb(),T.Sb(111,"mat-datepicker-toggle",40),T.Sb(112,"mat-datepicker",null,41),T.Wb(),T.Xb(114,"mat-form-field",21),T.Xb(115,"mat-label"),T.Lc(116,"Update by"),T.Wb(),T.Sb(117,"input",42),T.Sb(118,"input",43),T.Wb(),T.Xb(119,"mat-form-field",44),T.Xb(120,"mat-label"),T.Lc(121,"Create by"),T.Wb(),T.Sb(122,"input",42),T.Sb(123,"input",45),T.Wb(),T.Xb(124,"mat-form-field",46),T.Xb(125,"mat-label"),T.Lc(126,"Info"),T.Wb(),T.Sb(127,"textarea",47),T.Wb(),T.Wb(),T.Xb(128,"div",48),T.Xb(129,"div",49),T.Lc(130),T.Wb(),T.Wb(),T.Xb(131,"div",50),T.Xb(132,"button",51),T.Lc(133,"Submit"),T.Wb(),T.Xb(134,"button",52),T.fc("click",(function(e){return t.matDialogRef.close()})),T.Lc(135,"Cancel"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e){var n=T.xc(30),i=T.xc(86),o=T.xc(95),a=T.xc(113);T.Db(4),T.Mc(t.label),T.Db(6),T.pc("formGroup",t.form),T.Db(9),T.pc("ngForOf",t.move),T.Db(1),T.pc("ngIf",t.form.get("move").hasError("required")),T.Db(4),T.pc("value",t.shipment)("readonly",!0),T.Db(4),T.pc("matAutocomplete",n),T.Db(1),T.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),T.Db(2),T.pc("ngForOf",T.lc(32,39,t.filteredPrice)),T.Db(2),T.pc("ngIf",t.form.get("price").hasError("required")),T.Db(4),T.pc("value",null==t.form.value.price?null:t.form.value.price.unit_code)("readonly",!0),T.Db(5),T.pc("ngIf",t.form.get("volume").hasError("required")),T.Db(5),T.pc("ngIf",t.form.get("amount").hasError("required")),T.Db(5),T.pc("value",0),T.Db(2),T.pc("value",5),T.Db(2),T.pc("value",5.26),T.Db(2),T.pc("value",7),T.Db(2),T.pc("value",8),T.Db(2),T.pc("value",10),T.Db(2),T.pc("ngIf",t.form.get("tax").hasError("required")),T.Db(5),T.pc("ngIf",t.form.get("tax_amount").hasError("required")),T.Db(5),T.pc("ngForOf",t.currency),T.Db(1),T.pc("ngIf",t.form.get("currency").hasError("required")),T.Db(5),T.pc("ngIf",t.form.get("ex_rate").hasError("required")),T.Db(3),T.Nc("",t.label.includes("Revenue")?"Pay":"Issue"," Party"),T.Db(1),T.pc("matAutocomplete",i),T.Db(1),T.pc("displayWith",t.commonService.displayFn.bind(t,"full_name",t.partner)),T.Db(2),T.pc("ngForOf",T.lc(88,41,t.filteredPartner)),T.Db(2),T.pc("ngIf",t.form.get("partner").hasError("required")),T.Db(4),T.pc("matAutocomplete",o),T.Db(1),T.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.country)),T.Db(2),T.pc("ngForOf",T.lc(97,43,t.filteredCountry)),T.Db(2),T.pc("ngIf",t.form.get("payment_center").hasError("required")),T.Db(12),T.pc("matDatepicker",a),T.Db(1),T.pc("for",a),T.Db(6),T.pc("value",t.name),T.Db(5),T.pc("value",t.createName),T.Db(8),T.Mc(t.errorMessage)}},directives:[y.a,y.c,H.b,H.d,H.c,s.b,m.a,g.d,$.a,O.A,O.q,O.h,O.b,O.p,O.g,O.w,b.c,b.f,h.a,V.s,V.t,f.b,c.c,c.a,O.u,_.n,l.b,l.d,b.h,l.a,qe.b,b.b],pipes:[V.b,V.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-soa-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-soa-modal-dialog{width:1080px}}.container-details-soa-modal-dialog .mat-dialog-container{padding:0}.container-details-soa-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-soa-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-soa-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),et),it=n("HX77"),ot=n("B9zo"),at=n("fE3o"),rt=((tt=function(){function e(t,n){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.height=560,this.changeSetting=new T.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"initForm",value:function(){return this.formBuilder.group({column:this.formBuilder.array([])})}},{key:"addColumn",value:function(e){var t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}},{key:"checkAll",value:function(){var e=this;this.displayedColumns.map((function(t,n){e.form.controls.column.controls[n].controls[t].setValue(!0)}))}},{key:"toggleCardCover",value:function(){}},{key:"toggleSubscription",value:function(){}},{key:"columnAdd",get:function(){return this.form.get("column")}}]),e}()).\u0275fac=function(e){return new(e||tt)(T.Rb(O.d),T.Rb(j.a))},tt.\u0275cmp=T.Lb({type:tt,selectors:[["container-details-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Xb(3,"div"),T.Lc(4,"Settings"),T.Wb(),T.Wb(),T.Wb(),T.Xb(5,"div",3),T.Xb(6,"form",4),T.Xb(7,"div",5),T.Xb(8,"h2"),T.Lc(9,"Column"),T.Wb(),T.Xb(10,"div",6),T.Xb(11,"button",7),T.fc("click",(function(e){return t.checkAll()})),T.Lc(12,"All column"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(5),T.Ic("height",t.height,"px"),T.Db(1),T.pc("formGroup",t.form))},directives:[H.d,H.c,$.a,O.A,O.q,O.h,s.b],styles:["container-details-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-setting .navbar-scroll-container{background:#fff!important}container-details-setting .navbar-scroll-container .navbar-content{padding-top:0}container-details-setting .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-details-setting .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-details-setting .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:P.a}}),tt),ct=n("0JVi");function lt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",8),T.fc("click",(function(e){T.Bc(n);var t=T.jc();return e.stopPropagation(),t.changeScreen(!0)})),T.Xb(1,"mat-icon"),T.Lc(2,"flip_to_front"),T.Wb(),T.Wb()}}function st(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",8),T.fc("click",(function(e){T.Bc(n);var t=T.jc();return e.stopPropagation(),t.changeScreen(!1)})),T.Xb(1,"mat-icon"),T.Lc(2,"flip_to_back"),T.Wb(),T.Wb()}}var ut,bt=((ut=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=n,this.fullScreen=!1,this.toggleSidebar=new T.o,this.showHideBar=new T.o,this.refreshPage=new T.o,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||ut)(T.Rb(j.a),T.Rb(ct.b))},ut.\u0275cmp=T.Lb({type:ut,selectors:[["container-details-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(T.Xb(0,"mat-toolbar",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Xb(3,"div",3),T.Xb(4,"button",4),T.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),T.Xb(5,"mat-icon"),T.Lc(6,"menu"),T.Wb(),T.Wb(),T.Xb(7,"button",5),T.fc("click",(function(e){return t.showHideBar.emit()})),T.Xb(8,"mat-icon"),T.Lc(9,"menu"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(10,"div",6),T.Sb(11,"div",7),T.Xb(12,"button",8),T.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),T.Xb(13,"mat-icon",9),T.Lc(14,"refresh"),T.Wb(),T.Wb(),T.Sb(15,"div",7),T.Jc(16,lt,3,0,"button",10),T.Jc(17,st,3,0,"button",10),T.Sb(18,"div",7),T.Xb(19,"button",8),T.fc("click",(function(e){return t.toggleSidebar.emit("container-details-setting")})),T.Xb(20,"mat-icon"),T.Lc(21,"settings"),T.Wb(),T.Wb(),T.Sb(22,"div",7),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(16),T.pc("ngIf",!t.fullScreen),T.Db(1),T.pc("ngIf",t.fullScreen))},directives:[y.a,H.b,H.e,H.d,H.c,s.b,ce.b,m.a,V.t],styles:["container-details-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}container-details-header.below{z-index:2}container-details-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}container-details-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}container-details-header .logo .logo-icon{width:38px}container-details-header .chat-panel-toggle-button,container-details-header .language-button,container-details-header .quick-panel-toggle-button,container-details-header .user-button,container-details-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){container-details-header .chat-panel-toggle-button,container-details-header .language-button,container-details-header .quick-panel-toggle-button,container-details-header .user-button,container-details-header fuse-search-bar{height:56px}}container-details-header .navbar-toggle-button{min-width:56px;height:56px}container-details-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){container-details-header .toolbar-separator{height:56px}}"],encapsulation:2}),ut);function mt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"mat-icon",7),T.fc("click",(function(e){return T.Bc(n),T.jc().openAddMoveModal.emit()})),T.Lc(1,"add"),T.Wb()}}function dt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"td"),T.Xb(1,"a",15),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit,i=T.jc();return e.stopPropagation(),i.getShipment.emit(t)})),T.Lc(2),T.Wb(),T.Wb()}if(2&e){var i=T.jc().$implicit;T.Db(2),T.Mc(i.document)}}function ft(e,t){if(1&e&&(T.Xb(0,"td"),T.Lc(1),T.Wb()),2&e){var n=T.jc().$implicit;T.Db(1),T.Mc(n.document)}}function pt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",16),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().openAddMoveModal.emit(t)})),T.Xb(1,"mat-icon"),T.Lc(2,"add"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Add Movement"),T.Wb(),T.Wb()}}function ht(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",16),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().openEditMoveModal.emit(t)})),T.Xb(1,"mat-icon"),T.Lc(2,"edit"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Edit Movement"),T.Wb(),T.Wb()}}function vt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",14),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().deleteMovement.emit(t)})),T.Xb(1,"mat-icon"),T.Lc(2,"delete"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Remove Movement"),T.Wb(),T.Wb()}}function gt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",14),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().deleteSelMove.emit(t.sel_move_id)})),T.Xb(1,"mat-icon"),T.Lc(2,"delete"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Remove Shipment"),T.Wb(),T.Wb()}}function yt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",14),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().saveSelMove.emit(t)})),T.Xb(1,"mat-icon"),T.Lc(2,"save"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Save Shipment"),T.Wb(),T.Wb()}}function xt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",14),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().addSelRevenue.emit(t)})),T.Xb(1,"mat-icon"),T.Lc(2,"add"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Revenue"),T.Wb(),T.Wb()}}function Ct(e,t){if(1&e){var n=T.Yb();T.Xb(0,"button",14),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit;return T.jc().addSelCost.emit(t)})),T.Xb(1,"mat-icon"),T.Lc(2,"add"),T.Wb(),T.Xb(3,"span"),T.Lc(4,"Cost"),T.Wb(),T.Wb()}}function St(e,t){if(1&e){var n=T.Yb();T.Xb(0,"tr"),T.Xb(1,"td"),T.Lc(2),T.Wb(),T.Xb(3,"td"),T.Lc(4),T.Wb(),T.Xb(5,"td"),T.Lc(6),T.kc(7,"date"),T.Wb(),T.Xb(8,"td"),T.Lc(9),T.Wb(),T.Jc(10,dt,3,1,"td",8),T.Jc(11,ft,2,1,"td",8),T.Xb(12,"td"),T.Xb(13,"a",9),T.fc("click",(function(e){return T.Bc(n),e.stopPropagation()})),T.Lc(14),T.Wb(),T.Wb(),T.Xb(15,"td"),T.Lc(16),T.Wb(),T.Xb(17,"td"),T.Lc(18),T.kc(19,"date"),T.Wb(),T.Xb(20,"td",4),T.Xb(21,"mat-icon",10),T.fc("click",(function(e){return T.Bc(n),e.stopPropagation()})),T.Lc(22,"more_vert"),T.Wb(),T.Xb(23,"mat-menu",null,11),T.Jc(25,pt,5,0,"button",12),T.Jc(26,ht,5,0,"button",12),T.Jc(27,vt,5,0,"button",13),T.Jc(28,gt,5,0,"button",13),T.Jc(29,yt,5,0,"button",13),T.Xb(30,"button",14),T.fc("click",(function(e){T.Bc(n);var i=t.$implicit;return T.jc().openAddNoteModal.emit(i)})),T.Xb(31,"mat-icon"),T.Lc(32,"note"),T.Wb(),T.Xb(33,"span"),T.Lc(34,"Note"),T.Wb(),T.Wb(),T.Jc(35,xt,5,0,"button",13),T.Jc(36,Ct,5,0,"button",13),T.Wb(),T.Wb(),T.Wb()}if(2&e){var i=t.$implicit,o=t.index,a=T.xc(24),r=T.jc();T.Db(2),T.Mc(o+1),T.Db(2),T.Mc(i.move_code),T.Db(2),T.Mc(T.mc(7,18,i.date,"MM/dd/yyyy HH:mm")),T.Db(3),T.Mc(i.place_short_name),T.Db(1),T.pc("ngIf",!i.shipment_code),T.Db(1),T.pc("ngIf",i.shipment_code),T.Db(2),T.pc("routerLink","/apps/import-haiphong/shipment/detail/"+i.shipment_id+"/overview"),T.Db(1),T.Mc(i.shipment_code),T.Db(2),T.Mc(i.update_by_name),T.Db(2),T.Mc(T.mc(19,21,i.update_at,"MM/dd/yyyy HH:mm")),T.Db(3),T.pc("matMenuTriggerFor",a),T.Db(4),T.pc("ngIf",r.permission.create),T.Db(1),T.pc("ngIf",r.permission.edit&&i.id),T.Db(1),T.pc("ngIf",r.permission.delete),T.Db(1),T.pc("ngIf",r.permission.delete&&i.sel_move_id),T.Db(1),T.pc("ngIf",r.permission.create&&!i.sel_move_id&&i.document),T.Db(6),T.pc("ngIf",r.permission.create&&i.sel_move_id&&83==r.userId),T.Db(1),T.pc("ngIf",r.permission.create&&i.sel_move_id&&83==r.userId)}}var kt,Wt=((kt=function(){function e(){_classCallCheck(this,e),this.deleteMovement=new T.o,this.deleteSelMove=new T.o,this.openAddMoveModal=new T.o,this.openEditMoveModal=new T.o,this.openAddNoteModal=new T.o,this.getShipment=new T.o,this.saveSelMove=new T.o,this.addSelRevenue=new T.o,this.addSelCost=new T.o,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||kt)},kt.\u0275cmp=T.Lb({type:kt,selectors:[["container-details-content-movement"]],inputs:{container:"container",movement:"movement",permission:"permission",userId:"userId"},outputs:{deleteMovement:"deleteMovement",deleteSelMove:"deleteSelMove",openAddMoveModal:"openAddMoveModal",openEditMoveModal:"openEditMoveModal",openAddNoteModal:"openAddNoteModal",getShipment:"getShipment",saveSelMove:"saveSelMove",addSelRevenue:"addSelRevenue",addSelCost:"addSelCost"},decls:28,vars:2,consts:[[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto","height","350px"],[1,"simple","table-movement"],[1,"w-40","sticky-right-col"],["class","cursor-pointer mr-8","color","accent",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["color","accent",1,"cursor-pointer","mr-8",3,"click"],[4,"ngIf"],[1,"cursor-pointer",3,"routerLink","click"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","edit",3,"click",4,"ngIf"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],["mat-menu-item","","aria-label","remove",3,"click"],[1,"cursor-pointer",3,"click"],["mat-menu-item","","aria-label","edit",3,"click"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"h2",1),T.Xb(2,"span"),T.Lc(3,"Container movement"),T.Wb(),T.Wb(),T.Xb(4,"div",2),T.Xb(5,"table",3),T.Xb(6,"thead"),T.Xb(7,"tr"),T.Xb(8,"th"),T.Lc(9,"No"),T.Wb(),T.Xb(10,"th"),T.Lc(11,"Type"),T.Wb(),T.Xb(12,"th"),T.Lc(13,"Date"),T.Wb(),T.Xb(14,"th"),T.Lc(15,"Place"),T.Wb(),T.Xb(16,"th"),T.Lc(17,"Document"),T.Wb(),T.Xb(18,"th"),T.Lc(19,"Shipment"),T.Wb(),T.Xb(20,"th"),T.Lc(21,"Update by"),T.Wb(),T.Xb(22,"th"),T.Lc(23,"Update at"),T.Wb(),T.Xb(24,"th",4),T.Jc(25,mt,2,0,"mat-icon",5),T.Wb(),T.Wb(),T.Wb(),T.Xb(26,"tbody"),T.Jc(27,St,37,24,"tr",6),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(25),T.pc("ngIf",t.permission.create),T.Db(2),T.pc("ngForOf",t.movement))},directives:[H.d,H.c,V.t,V.s,m.a,o.j,r.c,r.d,r.a],pipes:[V.f],styles:["container-details-content-movement .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-movement .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-movement .group .table-movement{font-size:12px}container-details-content-movement .group .table-movement td,container-details-content-movement .group .table-movement th{padding:8px;font-size:12px;white-space:nowrap}container-details-content-movement .group .table-movement thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}container-details-content-movement .group .table-movement tfoot td{font-weight:600}container-details-content-movement .group .table-movement .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-movement .group .table-movement .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-movement .group .table-movement .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}container-details-content-movement .group .table-movement tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-movement .group .table-movement tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:P.a}}),kt),Xt=["formDirective"];function _t(e,t){if(1&e){var n=T.Yb();T.Xb(0,"mat-icon",42),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit,i=T.jc();return e.stopPropagation(),i.createSoaItem.emit(t)})),T.Lc(1,"file_copy"),T.Wb()}}function wt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"mat-icon",42),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit,i=T.jc();return e.stopPropagation(),i.editSoaItem.emit(t)})),T.Lc(1,"edit"),T.Wb()}}function Dt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"mat-icon",43),T.fc("click",(function(e){T.Bc(n);var t=T.jc().$implicit,i=T.jc();return e.stopPropagation(),i.deleteSoaItem.emit(t)})),T.Lc(1,"delete"),T.Wb()}}var Lt=function(e){return{"red-200-bg":e}},Mt=function(){return[1,15]};function It(e,t){if(1&e&&(T.Xb(0,"tr"),T.Xb(1,"td"),T.Lc(2),T.Wb(),T.Xb(3,"td",33),T.Lc(4),T.Wb(),T.Xb(5,"td",33),T.Lc(6),T.kc(7,"date"),T.Wb(),T.Xb(8,"td"),T.Xb(9,"a",34),T.Lc(10),T.Wb(),T.Wb(),T.Xb(11,"td",35),T.Lc(12),T.Wb(),T.Xb(13,"td",35),T.Lc(14),T.Wb(),T.Xb(15,"td"),T.Lc(16),T.Wb(),T.Xb(17,"td"),T.Lc(18),T.Wb(),T.Xb(19,"td",36),T.Lc(20),T.kc(21,"number"),T.Wb(),T.Xb(22,"td"),T.Lc(23),T.Wb(),T.Xb(24,"td",36),T.Lc(25),T.Wb(),T.Xb(26,"td",36),T.Lc(27),T.kc(28,"number"),T.Wb(),T.Xb(29,"td",36),T.Lc(30),T.kc(31,"number"),T.Wb(),T.Xb(32,"td",37),T.Lc(33),T.kc(34,"number"),T.Wb(),T.Xb(35,"td",38),T.Lc(36),T.kc(37,"number"),T.Wb(),T.Xb(38,"td"),T.Lc(39),T.Wb(),T.Xb(40,"td",36),T.Lc(41),T.kc(42,"number"),T.Wb(),T.Xb(43,"td"),T.Lc(44),T.Wb(),T.Xb(45,"td"),T.Lc(46),T.Wb(),T.Xb(47,"td",33),T.Lc(48),T.Wb(),T.Xb(49,"td"),T.Lc(50),T.kc(51,"date"),T.Wb(),T.Xb(52,"td"),T.Lc(53),T.kc(54,"date"),T.Wb(),T.Xb(55,"td"),T.Lc(56),T.Wb(),T.Xb(57,"td"),T.Lc(58),T.Wb(),T.Xb(59,"td",39),T.Jc(60,_t,2,0,"mat-icon",40),T.Jc(61,wt,2,0,"mat-icon",40),T.Jc(62,Dt,2,0,"mat-icon",41),T.Wb(),T.Wb()),2&e){var n=t.$implicit,i=t.index,o=T.jc();T.Db(2),T.Mc(i+1),T.Db(1),T.pc("ngClass",T.rc(60,Lt,!n.move_code)),T.Db(1),T.Mc(n.move_code),T.Db(1),T.pc("ngClass",T.rc(62,Lt,!n.move_code)),T.Db(1),T.Mc(T.mc(7,33,n.move_date,"MM/dd/yyyy")),T.Db(3),T.pc("routerLink","/apps/import-haiphong/shipment/detail/"+n.shipment+"/soa"),T.Db(1),T.Mc(n.code),T.Db(1),T.pc("matTooltip",n.partner_name),T.Db(1),T.Mc(n.partner_short_name),T.Db(1),T.pc("matTooltip",n.price_name),T.Db(1),T.Mc(n.price_code),T.Db(2),T.Mc(n.unit_code),T.Db(2),T.Mc(n.volume),T.Db(2),T.Mc(T.mc(21,36,n.amount,"1.2-2")),T.Db(3),T.Mc(n.tax),T.Db(2),T.Mc(n.tax_amount),T.Db(2),T.Mc(T.mc(28,39,n.total_amount,"1.2-2")),T.Db(3),T.Mc(T.mc(31,42,n.total_tax,"1.2-2")),T.Db(3),T.Mc("Revenue"==n.type_name?T.mc(34,45,n.total_amount+n.total_tax,"1.2-2"):""),T.Db(3),T.Mc("Cost"==n.type_name?T.mc(37,48,n.total_amount+n.total_tax,"1.2-2"):""),T.Db(3),T.Mc(n.currency_code),T.Db(2),T.Mc(T.mc(42,51,n.ex_rate,"1.2-2")),T.Db(3),T.Mc(n.country_name),T.Db(2),T.Mc(n.debit),T.Db(1),T.pc("ngClass",T.rc(64,Lt,!n.inv_number)),T.Db(1),T.Mc(n.inv_number),T.Db(2),T.Mc(T.mc(51,54,n.issue_date,"MM/dd/yyyy")),T.Db(3),T.Mc(T.mc(54,57,n.pay_date,"MM/dd/yyyy")),T.Db(3),T.Mc(n.info),T.Db(2),T.Mc(n.update_by_name),T.Db(2),T.pc("ngIf",o.permission.create&&o.act.copy),T.Db(1),T.pc("ngIf",!n.bank&&o.permission.edit&&(15==o.user||15==n.update_by&&T.qc(66,Mt).includes(o.user)||15!=n.update_by)),T.Db(1),T.pc("ngIf",!n.bank&&o.permission.delete&&(15==o.user||15==n.update_by&&T.qc(67,Mt).includes(o.user)||15!=n.update_by))}}function Rt(e,t){if(1&e&&(T.Xb(0,"tr"),T.Sb(1,"td"),T.Sb(2,"td"),T.Sb(3,"td"),T.Sb(4,"td"),T.Sb(5,"td"),T.Sb(6,"td"),T.Sb(7,"td"),T.Sb(8,"td"),T.Sb(9,"td"),T.Sb(10,"td"),T.Xb(11,"td",31),T.Lc(12,"Total"),T.Wb(),T.Xb(13,"td",32),T.Lc(14),T.kc(15,"number"),T.Wb(),T.Xb(16,"td",32),T.Lc(17),T.kc(18,"number"),T.Wb(),T.Xb(19,"td",31),T.Lc(20),T.Wb(),T.Wb()),2&e){var n=t.$implicit;T.Db(14),T.Mc(T.mc(15,3,n.amount,"1.2-2")),T.Db(3),T.Mc(T.mc(18,6,n.tax,"1.2-2")),T.Db(3),T.Mc(n.code)}}var At,Nt=((At=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.createSoaItem=new T.o,this.editSoaItem=new T.o,this.deleteSoaItem=new T.o,this.filterChange=new T.o,this.form=this.formBuilder.group({shipment:[null],party:[null],price:[null],unit:[null],debit:[null],currency:[null],payment_center:[null],invoice_number:[null],pay_date:["All"],info:[null],type_name:["All"]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.valueChanges.subscribe((function(t){e.filterChange.emit(t)}))}},{key:"resetForm",value:function(){this.searchNgForm.reset()}}]),e}()).\u0275fac=function(e){return new(e||At)(T.Rb(O.d))},At.\u0275cmp=T.Lb({type:At,selectors:[["container-details-content-soa"]],viewQuery:function(e,t){var n;1&e&&T.Sc(Xt,!0),2&e&&T.wc(n=T.gc())&&(t.searchNgForm=n.first)},inputs:{data:"data",totalCurrency:"totalCurrency",total:"total",permission:"permission",act:"act",user:"user"},outputs:{createSoaItem:"createSoaItem",editSoaItem:"editSoaItem",deleteSoaItem:"deleteSoaItem",filterChange:"filterChange"},decls:148,vars:21,consts:[[1,"group","mb-12","mt-12"],["name","form",2,"overflow","auto","max-height","410px",3,"formGroup","keydown.enter"],["formDirective","ngForm"],[1,"simple","table-soa"],[1,"sticky-header-1"],[1,"sticky-header-1","text-right"],[1,"sticky-header-1","text-right","rev-color"],[1,"sticky-header-1","text-right","cost-color"],[1,"sticky-header-1","sticky-right-col",2,"z-index","30"],[1,"sticky-header-2"],[1,"my-form-field","w-160"],["matInput","","inputCheck","","type","text","formControlName","shipment",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","party",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","price",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","unit",2,"font-size","12px"],[1,"sticky-header-2","text-right"],[1,"sticky-header-2","text-right","rev-color"],[1,"sticky-header-2","text-right","cost-color"],["matInput","","inputCheck","","type","text","formControlName","currency",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","payment_center",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","debit",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","invoice_number",2,"font-size","12px"],[1,"my-form-field","w-100"],["formControlName","pay_date",2,"font-size","12px"],[2,"font-size","12px",3,"value"],["matInput","","inputCheck","","type","text","formControlName","info",2,"font-size","12px"],["fxLayout","row",1,"sticky-header-2","w-100","sticky-right-col"],[1,"my-form-field","w-60"],["formControlName","type_name",2,"font-size","12px"],["color","warn",1,"cursor-pointer","ml-8",3,"click"],[4,"ngFor","ngForOf"],[1,"text-bold"],[1,"text-right","text-bold"],[3,"ngClass"],[1,"cursor-pointer",3,"routerLink"],[3,"matTooltip"],[1,"text-right"],[1,"text-right","rev-color"],[1,"text-right","cost-color"],[1,"sticky-right-col"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"h2"),T.Lc(2,"SOA"),T.Wb(),T.Xb(3,"form",1,2),T.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),T.Xb(5,"table",3),T.Xb(6,"thead"),T.Xb(7,"tr"),T.Xb(8,"th",4),T.Lc(9,"No"),T.Wb(),T.Xb(10,"th",4),T.Lc(11,"Move"),T.Wb(),T.Xb(12,"th",4),T.Lc(13,"Date"),T.Wb(),T.Xb(14,"th",4),T.Lc(15,"Shipment"),T.Wb(),T.Xb(16,"th",4),T.Lc(17,"Party"),T.Wb(),T.Xb(18,"th",4),T.Lc(19,"Price"),T.Wb(),T.Xb(20,"th",4),T.Lc(21,"Unit"),T.Wb(),T.Xb(22,"th",4),T.Lc(23,"Volume"),T.Wb(),T.Xb(24,"th",5),T.Lc(25,"Amount"),T.Wb(),T.Xb(26,"th",4),T.Lc(27,"Tax"),T.Wb(),T.Xb(28,"th",5),T.Lc(29,"Tax Amount"),T.Wb(),T.Xb(30,"th",5),T.Lc(31,"Total Amount"),T.Wb(),T.Xb(32,"th",5),T.Lc(33,"Total Tax"),T.Wb(),T.Xb(34,"th",6),T.Lc(35,"Revenue"),T.Wb(),T.Xb(36,"th",7),T.Lc(37,"Cost"),T.Wb(),T.Xb(38,"th",4),T.Lc(39,"Currency"),T.Wb(),T.Xb(40,"th",5),T.Lc(41,"Exrate"),T.Wb(),T.Xb(42,"th",4),T.Lc(43,"Payment center"),T.Wb(),T.Xb(44,"th",4),T.Lc(45,"Debit"),T.Wb(),T.Xb(46,"th",4),T.Lc(47,"Invoice number"),T.Wb(),T.Xb(48,"th",4),T.Lc(49,"Issue date"),T.Wb(),T.Xb(50,"th",4),T.Lc(51,"Pay date"),T.Wb(),T.Xb(52,"th",4),T.Lc(53,"Info"),T.Wb(),T.Xb(54,"th",4),T.Lc(55,"Update by"),T.Wb(),T.Xb(56,"th",8),T.Lc(57,"Type "),T.Wb(),T.Wb(),T.Xb(58,"tr"),T.Sb(59,"th",9),T.Sb(60,"th",9),T.Sb(61,"th",9),T.Xb(62,"th",9),T.Xb(63,"mat-form-field",10),T.Sb(64,"input",11),T.Wb(),T.Wb(),T.Xb(65,"th",9),T.Xb(66,"mat-form-field",10),T.Sb(67,"input",12),T.Wb(),T.Wb(),T.Xb(68,"th",9),T.Xb(69,"mat-form-field",10),T.Sb(70,"input",13),T.Wb(),T.Wb(),T.Xb(71,"th",9),T.Xb(72,"mat-form-field",10),T.Sb(73,"input",14),T.Wb(),T.Wb(),T.Sb(74,"th",9),T.Sb(75,"th",15),T.Sb(76,"th",9),T.Sb(77,"th",15),T.Sb(78,"th",15),T.Sb(79,"th",15),T.Sb(80,"th",16),T.Sb(81,"th",17),T.Xb(82,"th",9),T.Xb(83,"mat-form-field",10),T.Sb(84,"input",18),T.Wb(),T.Wb(),T.Sb(85,"th",15),T.Xb(86,"th",9),T.Xb(87,"mat-form-field",10),T.Sb(88,"input",19),T.Wb(),T.Wb(),T.Xb(89,"th",9),T.Xb(90,"mat-form-field",10),T.Sb(91,"input",20),T.Wb(),T.Wb(),T.Xb(92,"th",9),T.Xb(93,"mat-form-field",10),T.Sb(94,"input",21),T.Wb(),T.Wb(),T.Sb(95,"th",9),T.Xb(96,"th",9),T.Xb(97,"mat-form-field",22),T.Xb(98,"mat-select",23),T.Xb(99,"mat-option",24),T.Lc(100,"All"),T.Wb(),T.Xb(101,"mat-option",24),T.Lc(102,"Yes"),T.Wb(),T.Xb(103,"mat-option",24),T.Lc(104,"No"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(105,"th",9),T.Xb(106,"mat-form-field",10),T.Sb(107,"input",25),T.Wb(),T.Wb(),T.Sb(108,"th",9),T.Xb(109,"th",26),T.Xb(110,"mat-form-field",27),T.Xb(111,"mat-select",28),T.Xb(112,"mat-option",24),T.Lc(113,"All"),T.Wb(),T.Xb(114,"mat-option",24),T.Lc(115,"Revenue"),T.Wb(),T.Xb(116,"mat-option",24),T.Lc(117,"Cost"),T.Wb(),T.Wb(),T.Wb(),T.Xb(118,"mat-icon",29),T.fc("click",(function(e){return e.stopPropagation(),t.resetForm()})),T.Lc(119,"delete"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(120,"tbody"),T.Jc(121,It,63,68,"tr",30),T.Wb(),T.Xb(122,"tfoot"),T.Jc(123,Rt,21,9,"tr",30),T.Xb(124,"tr"),T.Sb(125,"td"),T.Sb(126,"td"),T.Sb(127,"td"),T.Sb(128,"td"),T.Sb(129,"td"),T.Sb(130,"td"),T.Sb(131,"td"),T.Sb(132,"td"),T.Sb(133,"td"),T.Sb(134,"td"),T.Xb(135,"td",31),T.Lc(136,"Exchange"),T.Wb(),T.Xb(137,"td",32),T.Lc(138),T.kc(139,"number"),T.Wb(),T.Xb(140,"td",32),T.Lc(141),T.kc(142,"number"),T.Wb(),T.Xb(143,"td",31),T.Lc(144,"VND"),T.Wb(),T.Xb(145,"td",32),T.Lc(146),T.kc(147,"number"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(3),T.pc("formGroup",t.form),T.Db(96),T.pc("value","All"),T.Db(2),T.pc("value",1),T.Db(2),T.pc("value",0),T.Db(9),T.pc("value","All"),T.Db(2),T.pc("value","Revenue"),T.Db(2),T.pc("value","Cost"),T.Db(5),T.pc("ngForOf",t.data),T.Db(2),T.pc("ngForOf",t.totalCurrency),T.Db(15),T.Mc(T.mc(139,12,t.total.amount,"1.0-0")),T.Db(3),T.Mc(T.mc(142,15,t.total.tax,"1.0-0")),T.Db(5),T.Mc(T.mc(147,18,t.total.amount+t.total.tax,"1.0-0")))},directives:[O.A,O.q,O.h,b.c,f.b,O.b,O.p,O.g,h.a,_.n,H.d,m.a,V.s,V.q,ce.a,o.j,d.a,V.t],pipes:[V.g,V.f],styles:["container-details-content-soa .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-soa .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-soa .group .table-soa{font-size:12px}container-details-content-soa .group .table-soa td,container-details-content-soa .group .table-soa th{padding:8px!important;white-space:nowrap}container-details-content-soa .group .table-soa thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-details-content-soa .group .table-soa thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}container-details-content-soa .group .table-soa tfoot td{font-weight:600}container-details-content-soa .group .table-soa .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-soa .group .table-soa .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-soa .group .table-soa .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#b3e5fc}container-details-content-soa .group .table-soa tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-soa .group .table-soa tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}container-details-content-soa .group .table-soa .rev-color{background-color:#b3e5fc}container-details-content-soa .group .table-soa .cost-color{background-color:#ffcf9c}container-details-content-soa .group .table-soa .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}container-details-content-soa .group .table-soa .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2,data:{animation:P.a}}),At);function Pt(e,t){if(1&e){var n=T.Yb();T.Xb(0,"tr"),T.Xb(1,"td",3),T.Lc(2),T.Wb(),T.Xb(3,"td"),T.Lc(4),T.Wb(),T.Xb(5,"td"),T.Lc(6),T.Wb(),T.Xb(7,"td"),T.Lc(8),T.Wb(),T.Xb(9,"td",4),T.Lc(10),T.Wb(),T.Xb(11,"td",5),T.Xb(12,"a",7),T.fc("click",(function(e){T.Bc(n);var i=t.$implicit;return T.jc().viewLink(i.photo)})),T.Lc(13),T.Wb(),T.Wb(),T.Xb(14,"td"),T.Lc(15),T.Wb(),T.Xb(16,"td",8),T.Xb(17,"mat-icon",9),T.fc("click",(function(e){T.Bc(n);var i=t.$implicit,o=T.jc();return e.stopPropagation(),o.deleteNote.emit(i)})),T.Lc(18,"delete"),T.Wb(),T.Wb(),T.Wb()}if(2&e){var i=t.$implicit,o=t.index;T.Db(2),T.Mc(o+1),T.Db(2),T.Mc(i.shipment_code),T.Db(2),T.Mc(i.move_code),T.Db(2),T.Mc(i.type),T.Db(2),T.Mc(i.content),T.Db(3),T.Mc(i.photo),T.Db(2),T.Mc(i.info)}}var Ot,qt,Ft=((qt=function(){function e(){_classCallCheck(this,e),this.deleteNote=new T.o,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"viewLink",value:function(e){/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)&&window.open(e,"_blank")}}]),e}()).\u0275fac=function(e){return new(e||qt)},qt.\u0275cmp=T.Lb({type:qt,selectors:[["container-details-content-note"]],inputs:{container:"container",containerNote:"containerNote",permission:"permission"},outputs:{deleteNote:"deleteNote"},decls:24,vars:2,consts:[[1,"group","mb-12","mt-12"],[2,"overflow","auto"],[1,"simple","table-note"],[1,"text-center"],[1,"w-200"],[1,"w-160"],[4,"ngFor","ngForOf"],[3,"click"],[1,"w-60"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"h2"),T.Lc(2),T.Wb(),T.Xb(3,"div",1),T.Xb(4,"table",2),T.Xb(5,"thead"),T.Xb(6,"tr"),T.Xb(7,"th",3),T.Lc(8,"No"),T.Wb(),T.Xb(9,"th"),T.Lc(10,"Shipment"),T.Wb(),T.Xb(11,"th"),T.Lc(12,"Move"),T.Wb(),T.Xb(13,"th"),T.Lc(14,"Type"),T.Wb(),T.Xb(15,"th",4),T.Lc(16,"Content"),T.Wb(),T.Xb(17,"th",5),T.Lc(18,"Photo"),T.Wb(),T.Xb(19,"th"),T.Lc(20,"Info"),T.Wb(),T.Sb(21,"th"),T.Wb(),T.Wb(),T.Xb(22,"tbody"),T.Jc(23,Pt,19,7,"tr",6),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(2),T.Nc("Note(",t.containerNote.length,")"),T.Db(21),T.pc("ngForOf",t.containerNote))},directives:[V.s,m.a],styles:["container-details-content-note .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-note .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-note .group .table-note{font-size:12px}container-details-content-note .group .table-note td,container-details-content-note .group .table-note th{padding:8px;font-size:12px;word-break:break-all}container-details-content-note .group .table-note thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}container-details-content-note .group .table-note tfoot td{font-weight:600}container-details-content-note .group .table-note .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-note .group .table-note .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-note .group .table-note .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#b3e5fc}container-details-content-note .group .table-note tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-note .group .table-note tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:P.a}}),qt),Tt=((Ot=function(){function e(t,n){_classCallCheck(this,e),this._activatedRoute=t,this.authService=n,this.createMovement=new T.o,this.deleteMovement=new T.o,this.deleteSelMove=new T.o,this.createNote=new T.o,this.deleteNote=new T.o,this.openAddMoveModal=new T.o,this.openEditMoveModal=new T.o,this.openAddNoteModal=new T.o,this.getShipment=new T.o,this.saveSelMove=new T.o,this.addSelRevenue=new T.o,this.addSelCost=new T.o,this.createSoaItem=new T.o,this.editSoaItem=new T.o,this.deleteSoaItem=new T.o,this.filterChange=new T.o}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ot)(T.Rb(o.a),T.Rb(j.a))},Ot.\u0275cmp=T.Lb({type:Ot,selectors:[["container-details-content"]],inputs:{height:"height",container:"container",containerSoa:"containerSoa",movement:"movement",moveType:"moveType",place:"place",containerNote:"containerNote",permission:"permission",act:"act",user:"user",userId:"userId",totalCurrency:"totalCurrency",total:"total"},outputs:{createMovement:"createMovement",deleteMovement:"deleteMovement",deleteSelMove:"deleteSelMove",createNote:"createNote",deleteNote:"deleteNote",openAddMoveModal:"openAddMoveModal",openEditMoveModal:"openEditMoveModal",openAddNoteModal:"openAddNoteModal",getShipment:"getShipment",saveSelMove:"saveSelMove",addSelRevenue:"addSelRevenue",addSelCost:"addSelCost",createSoaItem:"createSoaItem",editSoaItem:"editSoaItem",deleteSoaItem:"deleteSoaItem",filterChange:"filterChange"},decls:4,vars:15,consts:[["fxLayout","column"],[3,"container","movement","permission","userId","deleteMovement","deleteSelMove","openAddMoveModal","openEditMoveModal","openAddNoteModal","getShipment","saveSelMove","addSelRevenue","addSelCost"],[3,"data","totalCurrency","total","act","user","permission","createSoaItem","editSoaItem","deleteSoaItem","filterChange"],[3,"container","containerNote","permission","deleteNote"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"container-details-content-movement",1),T.fc("deleteMovement",(function(e){return t.deleteMovement.emit(e)}))("deleteSelMove",(function(e){return t.deleteSelMove.emit(e)}))("openAddMoveModal",(function(e){return t.openAddMoveModal.emit(e)}))("openEditMoveModal",(function(e){return t.openEditMoveModal.emit(e)}))("openAddNoteModal",(function(e){return t.openAddNoteModal.emit(e)}))("getShipment",(function(e){return t.getShipment.emit(e)}))("saveSelMove",(function(e){return t.saveSelMove.emit(e)}))("addSelRevenue",(function(e){return t.addSelRevenue.emit(e)}))("addSelCost",(function(e){return t.addSelCost.emit(e)})),T.Wb(),T.Xb(2,"container-details-content-soa",2),T.fc("createSoaItem",(function(e){return t.createSoaItem.emit(e)}))("editSoaItem",(function(e){return t.editSoaItem.emit(e)}))("deleteSoaItem",(function(e){return t.deleteSoaItem.emit(e)}))("filterChange",(function(e){return t.filterChange.emit(e)})),T.Wb(),T.Xb(3,"container-details-content-note",3),T.fc("deleteNote",(function(e){return t.deleteNote.emit(e)})),T.Wb(),T.Wb()),2&e&&(T.Ic("height",t.height,"px"),T.Db(1),T.pc("container",t.container)("movement",t.movement)("permission",t.permission)("userId",t.userId),T.Db(1),T.pc("data",t.containerSoa)("totalCurrency",t.totalCurrency)("total",t.total)("act",t.act)("user",t.user)("permission",t.permission),T.Db(1),T.pc("container",t.container)("containerNote",t.containerNote)("permission",t.permission))},directives:[H.d,Wt,Nt,Ft],styles:[""],encapsulation:2,data:{animation:P.a}}),Ot),jt=["formDirective"],zt=["sidebarPerfectScroll"],Bt=function(e){return{"mt-32":e}};function Et(e,t){if(1&e&&(T.Xb(0,"div",10),T.Xb(1,"h2"),T.Lc(2),T.Wb(),T.Xb(3,"div",11),T.Lc(4),T.Wb(),T.Wb()),2&e){var n=T.jc(),i=n.$implicit;T.pc("ngClass",T.rc(3,Bt,0==n.index)),T.Db(2),T.Mc(i.name),T.Db(2),T.Mc(i.value)}}function Jt(e,t){if(1&e&&(T.Xb(0,"div"),T.Jc(1,Et,5,5,"div",9),T.Wb()),2&e){var n=t.$implicit;T.Db(1),T.pc("ngIf",n.value)}}var Vt,Ht=((Vt=function(){function e(t,n,i,o,a){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this._fuseSidebarService=i,this.commonService=o,this.datePipe=a,this.sidebarPage=new T.o,this.form=[{name:"Container number",value:null},{name:"Type",value:null},{name:"Code",value:null},{name:"Grade",value:null},{name:"Lease",value:null},{name:"On hire",value:null},{name:"On port",value:null},{name:"Off hire",value:null},{name:"Off port",value:null},{name:"Status",value:null},{name:"Info",value:null}]}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=[{name:"Container number",value:this.container.cont_number},{name:"Type",value:this.container.cont_type_code},{name:"Code",value:this.container.cont_code},{name:"Grade",value:this.container.grade},{name:"Lease",value:this.container.lease_code},{name:"On hire",value:this.datePipe.transform(this.container.on_hire,"MM/dd/yyyy")},{name:"On port",value:this.container.on_port_name},{name:"Off hire",value:this.container.off_hire?this.datePipe.transform(this.container.off_hire,"MM/dd/yyyy"):null},{name:"Off port",value:this.container.off_port_name},{name:"Status",value:this.container.status?"Valid":"Invalid"},{name:"Info",value:this.container.info}]}},{key:"ngAfterViewInit",value:function(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}}]),e}()).\u0275fac=function(e){return new(e||Vt)(T.Rb(O.d),T.Rb(j.a),T.Rb(it.a),T.Rb(z.a),T.Rb(V.f))},Vt.\u0275cmp=T.Lb({type:Vt,selectors:[["container-details-sidebar-view"]],viewQuery:function(e,t){var n;1&e&&(T.Sc(jt,!0),T.Sc(zt,!0)),2&e&&(T.wc(n=T.gc())&&(t.searchNgForm=n.first),T.wc(n=T.gc())&&(t.sidebarPerfectScroll=n.first))},inputs:{height:"height",container:"container"},outputs:{sidebarPage:"sidebarPage"},decls:10,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","45",1,"ml-8","mr-8"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],["sidebarPerfectScroll",""],[1,"navbar-content"],[4,"ngFor","ngForOf"],["class","group",3,"ngClass",4,"ngIf"],[1,"group",3,"ngClass"],[1,"item"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Sb(3,"div",3),T.Xb(4,"button",4),T.fc("click",(function(e){return t.sidebarPage.emit("form")})),T.Lc(5," Edit "),T.Wb(),T.Wb(),T.Wb(),T.Xb(6,"div",5,6),T.Xb(8,"div",7),T.Jc(9,Jt,2,1,"div",8),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(6),T.Ic("height",t.height,"px"),T.Db(3),T.pc("ngForOf",t.form))},directives:[H.d,H.c,H.b,s.b,$.a,V.s,V.t,V.q,ce.a],styles:["container-details-sidebar-view{-webkit-user-drag:auto}container-details-sidebar-view .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-sidebar-view .navbar-scroll-container{background:#fff!important}container-details-sidebar-view .navbar-scroll-container .navbar-content{padding-top:0}container-details-sidebar-view .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12)}container-details-sidebar-view .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-details-sidebar-view .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Vt),$t=n("Ivtv"),Ut=["formDirective"],Gt=["sidebarPerfectScroll"];function Yt(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Cont number is required "),T.Wb())}function Qt(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Invalid container number "),T.Wb())}function Kt(e,t){if(1&e&&(T.Xb(0,"mat-option",22),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Mc(n.code)}}function Zt(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Cont type is required "),T.Wb())}function en(e,t){if(1&e&&(T.Xb(0,"mat-option",22),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Mc(n.code)}}function tn(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Code is required "),T.Wb())}function nn(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Grade is required "),T.Wb())}function on(e,t){if(1&e&&(T.Xb(0,"mat-option",22),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Mc(n.code)}}function an(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Lease is required "),T.Wb())}function rn(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," On Hire is required "),T.Wb())}function cn(e,t){if(1&e&&(T.Xb(0,"mat-option",22),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.name," ")}}function ln(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," On port is required "),T.Wb())}function sn(e,t){if(1&e&&(T.Xb(0,"mat-option",22),T.Lc(1),T.Wb()),2&e){var n=t.$implicit;T.pc("value",n.id),T.Db(1),T.Nc(" ",n.name," ")}}function un(e,t){1&e&&(T.Xb(0,"mat-error"),T.Lc(1," Status is required "),T.Wb())}var bn,mn=((bn=function(){function e(t,n,i,o){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this._fuseSidebarService=i,this.commonService=o,this.sidebarPage=new T.o,this.editContainer=new T.o,this.filteredContType=[],this.form=this.formBuilder.group({id:[""],cont_number:["",[O.y.required,$t.a]],cont_type:["",O.y.required],lease_id:["",O.y.required],on_hire:["",O.y.required],on_port:["",O.y.required],off_hire:[null],off_port:[null],status:[0,O.y.required],code:[1,O.y.required],grade:["U",O.y.required],info:[""]}),this.now=new Date}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.container.on_hire=new Date(this.container.on_hire),this.container.off_hire&&(this.container.off_hire=new Date(this.container.off_hire)),this.form.patchValue(this.container),this.getContType({value:this.container.lease_id}),this.form.controls.cont_type.setValue(this.container.cont_type),this.filteredSeaport1=this.form.controls.on_port.valueChanges.pipe(Object(q.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredSeaport2=this.form.controls.off_port.valueChanges.pipe(Object(q.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]})))}},{key:"setCheck",value:function(e){e.check=!e.check}},{key:"resetForm",value:function(){this.searchNgForm.resetForm()}},{key:"onFormSubmit",value:function(e){if(console.log(e),e.valid){if("string"==typeof e.value.on_port)return void this.form.controls.on_port.setValue(null);"string"==typeof e.value.off_port&&this.form.controls.off_port.setValue(null),this.editContainer.emit(e.value)}}},{key:"getContType",value:function(e){var t=this;this.form.controls.cont_type.setValue(null);var n=this.leaseDetail.filter((function(t){return t.lease==e.value}));this.filteredContType=[],n.map((function(e){t.filteredContType.push({id:e.cont_type,code:e.cont_type_code})}))}}]),e}()).\u0275fac=function(e){return new(e||bn)(T.Rb(O.d),T.Rb(j.a),T.Rb(it.a),T.Rb(z.a))},bn.\u0275cmp=T.Lb({type:bn,selectors:[["container-details-sidebar-form"]],viewQuery:function(e,t){var n;1&e&&(T.Sc(Ut,!0),T.Sc(Gt,!0)),2&e&&(T.wc(n=T.gc())&&(t.searchNgForm=n.first),T.wc(n=T.gc())&&(t.sidebarPerfectScroll=n.first))},inputs:{height:"height",container:"container",lease:"lease",leaseDetail:"leaseDetail",packageType:"packageType",seaport:"seaport",containerCode:"containerCode",containerDetailValue:"containerDetailValue"},outputs:{sidebarPage:"sidebarPage",editContainer:"editContainer"},decls:110,vars:36,consts:[["name","form",2,"border-right","1px solid #E6E6E6",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],["sidebarPerfectScroll",""],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],[2,"display","none"],["inputCheck","","type","number","formControlName","id"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","maxlength","11","formControlName","cont_number","required",""],[4,"ngIf"],["fxFlex","100",1,"info-line"],["formControlName","cont_type","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","code","required",""],["formControlName","grade","required",""],[3,"value"],["formControlName","lease_id","required","",3,"selectionChange"],["inputCheck","","matInput","","name","on_hire","formControlName","on_hire","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["on_hire",""],["inputCheck","","type","text","matInput","","formControlName","on_port","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnport","matAutocomplete"],["inputCheck","","matInput","","name","off_hire","formControlName","off_hire",3,"matDatepicker","change"],["off_hire",""],["inputCheck","","type","text","matInput","","formControlName","off_port",3,"matAutocomplete"],["autoOffport","matAutocomplete"],["formControlName","status","required",""],["inputCheck","","matInput","","formControlName","info"]],template:function(e,t){if(1&e&&(T.Xb(0,"form",0,1),T.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),T.Xb(2,"div",2),T.Xb(3,"div",3),T.Xb(4,"button",4),T.Lc(5," Submit "),T.Wb(),T.Xb(6,"button",5),T.fc("click",(function(e){return t.sidebarPage.emit("view")})),T.Lc(7," Cancel "),T.Wb(),T.Wb(),T.Wb(),T.Xb(8,"div",6,7),T.Xb(10,"div",8),T.Xb(11,"div",9),T.Xb(12,"div",10),T.Xb(13,"div",11),T.Sb(14,"input",12),T.Wb(),T.Xb(15,"div",13),T.Xb(16,"mat-form-field",14),T.Xb(17,"mat-label"),T.Lc(18,"Cont number"),T.Wb(),T.Sb(19,"input",15),T.Jc(20,Yt,2,0,"mat-error",16),T.Jc(21,Qt,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(22,"div",17),T.Xb(23,"mat-form-field",14),T.Xb(24,"mat-label"),T.Lc(25,"Cont type"),T.Wb(),T.Xb(26,"mat-select",18),T.Jc(27,Kt,2,2,"mat-option",19),T.Wb(),T.Jc(28,Zt,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(29,"div",17),T.Xb(30,"mat-form-field",14),T.Xb(31,"mat-label"),T.Lc(32,"Code"),T.Wb(),T.Xb(33,"mat-select",20),T.Jc(34,en,2,2,"mat-option",19),T.Wb(),T.Jc(35,tn,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(36,"div",17),T.Xb(37,"mat-form-field",14),T.Xb(38,"mat-label"),T.Lc(39,"Grade"),T.Wb(),T.Xb(40,"mat-select",21),T.Xb(41,"mat-option",22),T.Lc(42,"A"),T.Wb(),T.Xb(43,"mat-option",22),T.Lc(44,"B"),T.Wb(),T.Xb(45,"mat-option",22),T.Lc(46,"C"),T.Wb(),T.Xb(47,"mat-option",22),T.Lc(48,"D"),T.Wb(),T.Xb(49,"mat-option",22),T.Lc(50,"U"),T.Wb(),T.Wb(),T.Jc(51,nn,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(52,"div",17),T.Xb(53,"mat-form-field",14),T.Xb(54,"mat-label"),T.Lc(55,"Lease"),T.Wb(),T.Xb(56,"mat-select",23),T.fc("selectionChange",(function(e){return t.getContType(e)})),T.Jc(57,on,2,2,"mat-option",19),T.Wb(),T.Jc(58,an,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(59,"div",17),T.Xb(60,"mat-form-field",14),T.Xb(61,"mat-label"),T.Lc(62,"On hire"),T.Wb(),T.Xb(63,"input",24),T.fc("change",(function(e){return t.commonService.setDateStr(e)})),T.Wb(),T.Sb(64,"mat-datepicker-toggle",25),T.Sb(65,"mat-datepicker",null,26),T.Jc(67,rn,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(68,"div",17),T.Xb(69,"mat-form-field",14),T.Xb(70,"mat-label"),T.Lc(71,"On Port"),T.Wb(),T.Sb(72,"input",27),T.Xb(73,"mat-autocomplete",28,29),T.Jc(75,cn,2,2,"mat-option",19),T.kc(76,"async"),T.Wb(),T.Jc(77,ln,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(78,"div",17),T.Xb(79,"mat-form-field",14),T.Xb(80,"mat-label"),T.Lc(81,"Off hire"),T.Wb(),T.Xb(82,"input",30),T.fc("change",(function(e){return t.commonService.setDateStr(e)})),T.Wb(),T.Sb(83,"mat-datepicker-toggle",25),T.Sb(84,"mat-datepicker",null,31),T.Wb(),T.Wb(),T.Xb(86,"div",17),T.Xb(87,"mat-form-field",14),T.Xb(88,"mat-label"),T.Lc(89,"Off Port"),T.Wb(),T.Sb(90,"input",32),T.Xb(91,"mat-autocomplete",28,33),T.Jc(93,sn,2,2,"mat-option",19),T.kc(94,"async"),T.Wb(),T.Wb(),T.Wb(),T.Xb(95,"div",17),T.Xb(96,"mat-form-field",14),T.Xb(97,"mat-label"),T.Lc(98,"Status"),T.Wb(),T.Xb(99,"mat-select",34),T.Xb(100,"mat-option",22),T.Lc(101,"Invalid"),T.Wb(),T.Xb(102,"mat-option",22),T.Lc(103,"Valid"),T.Wb(),T.Wb(),T.Jc(104,un,2,0,"mat-error",16),T.Wb(),T.Wb(),T.Xb(105,"div",17),T.Xb(106,"mat-form-field",14),T.Xb(107,"mat-label"),T.Lc(108,"Info"),T.Wb(),T.Sb(109,"input",35),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e){var n=T.xc(66),i=T.xc(74),o=T.xc(85),a=T.xc(92);T.pc("formGroup",t.form),T.Db(8),T.Ic("height",t.height,"px"),T.Db(12),T.pc("ngIf",t.form.get("cont_number").hasError("required")),T.Db(1),T.pc("ngIf",t.form.get("cont_number").errors&&t.form.get("cont_number").dirty&&t.form.get("cont_number").errors.validConNum),T.Db(6),T.pc("ngForOf",t.filteredContType),T.Db(1),T.pc("ngIf",t.form.get("cont_type").hasError("required")),T.Db(6),T.pc("ngForOf",t.containerCode),T.Db(1),T.pc("ngIf",t.form.get("code").hasError("required")),T.Db(6),T.pc("value","A"),T.Db(2),T.pc("value","B"),T.Db(2),T.pc("value","C"),T.Db(2),T.pc("value","D"),T.Db(2),T.pc("value","U"),T.Db(2),T.pc("ngIf",t.form.get("grade").hasError("required")),T.Db(6),T.pc("ngForOf",t.lease),T.Db(1),T.pc("ngIf",t.form.get("lease_id").hasError("required")),T.Db(5),T.pc("matDatepicker",n),T.Db(1),T.pc("for",n),T.Db(3),T.pc("ngIf",t.form.get("on_hire").hasError("required")),T.Db(5),T.pc("matAutocomplete",i),T.Db(1),T.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),T.Db(2),T.pc("ngForOf",T.lc(76,32,t.filteredSeaport1)),T.Db(2),T.pc("ngIf",t.form.get("on_port").hasError("required")),T.Db(5),T.pc("matDatepicker",o),T.Db(1),T.pc("for",o),T.Db(7),T.pc("matAutocomplete",a),T.Db(1),T.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),T.Db(2),T.pc("ngForOf",T.lc(94,34,t.filteredSeaport2)),T.Db(7),T.pc("value",0),T.Db(2),T.pc("value",1),T.Db(2),T.pc("ngIf",t.form.get("status").hasError("required"))}},directives:[O.A,O.q,O.h,H.d,H.c,s.b,H.b,$.a,O.u,O.b,O.p,O.g,b.c,b.f,f.b,O.k,O.w,V.t,h.a,V.s,_.n,l.b,l.d,b.h,l.a,c.c,c.a,b.b],pipes:[V.b],styles:["container-details-sidebar-form{-webkit-user-drag:auto}container-details-sidebar-form .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-sidebar-form .navbar-scroll-container{background:#fff!important}container-details-sidebar-form .navbar-scroll-container .navbar-content{padding-top:0}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),bn);function dn(e,t){if(1&e){var n=T.Yb();T.Xb(0,"container-details-sidebar-view",3),T.fc("sidebarPage",(function(e){return T.Bc(n),T.jc().sidebarPage.emit(e)})),T.Wb()}if(2&e){var i=T.jc();T.pc("height",i.height)("container",i.container)}}function fn(e,t){if(1&e){var n=T.Yb();T.Xb(0,"container-details-sidebar-form",4),T.fc("sidebarPage",(function(e){return T.Bc(n),T.jc().sidebarPage.emit(e)}))("editContainer",(function(e){return T.Bc(n),T.jc().editContainer.emit(e)})),T.Wb()}if(2&e){var i=T.jc();T.pc("height",i.height)("container",i.container)("lease",i.lease)("leaseDetail",i.leaseDetail)("packageType",i.packageType)("seaport",i.seaport)("containerCode",i.containerCode)}}var pn,hn=((pn=function(){function e(t,n,i){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.commonService=i,this.sidebarPage=new T.o,this.editContainer=new T.o,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||pn)(T.Rb(O.d),T.Rb(j.a),T.Rb(z.a))},pn.\u0275cmp=T.Lb({type:pn,selectors:[["container-details-sidebar"]],inputs:{height:"height",type:"type",container:"container",lease:"lease",leaseDetail:"leaseDetail",packageType:"packageType",seaport:"seaport",containerCode:"containerCode",containerDetailValue:"containerDetailValue"},outputs:{sidebarPage:"sidebarPage",editContainer:"editContainer"},decls:3,vars:3,consts:[[1,"sidebar-content",3,"ngSwitch"],[3,"height","container","sidebarPage",4,"ngSwitchCase"],[3,"height","container","lease","leaseDetail","packageType","seaport","containerCode","sidebarPage","editContainer",4,"ngSwitchCase"],[3,"height","container","sidebarPage"],[3,"height","container","lease","leaseDetail","packageType","seaport","containerCode","sidebarPage","editContainer"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Jc(1,dn,1,2,"container-details-sidebar-view",1),T.Jc(2,fn,1,7,"container-details-sidebar-form",2),T.Wb()),2&e&&(T.pc("ngSwitch",!0),T.Db(1),T.pc("ngSwitchCase","view"==t.type),T.Db(1),T.pc("ngSwitchCase","form"==t.type))},directives:[V.x,V.y,Ht,mn],styles:[""],encapsulation:2}),pn);function vn(e,t){if(1&e){var n=T.Yb();T.Xb(0,"fuse-sidebar",10),T.Xb(1,"container-details-sidebar",11),T.fc("sidebarPage",(function(e){return T.Bc(n),T.jc().getTypeSidebar(e)}))("editContainer",(function(e){return T.Bc(n),T.jc().editContainer(e)})),T.Wb(),T.Wb()}if(2&e){var i=T.jc();T.Db(1),T.pc("height",i.height)("type",i.type)("container",i.container)("lease",i.lease)("leaseDetail",i.leaseDetail)("packageType",i.packageType)("seaport",i.seaport)("containerCode",i.containerCode)}}var gn,yn=((gn=function(){function e(t,n,i,o,a,r,c){_classCallCheck(this,e),this._fuseSidebarService=t,this.containerDetailsService=n,this._matDialog=i,this.router=o,this.route=a,this.authService=r,this.datePipe=c,this.sidebarPanel=!0,this.type="view",this.total={tax:0,amount:0},this.totalCurrency=[],this.height=560,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.params.id,this.userId=this.authService.user,this.authService.windowSizeChanged.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18})),this.containerDetailsService.onContainerChanged.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.container=e.containerDetailsService.container,e.movement=e.containerDetailsService.movement,e.containerSoa=e.containerDetailsService.containerSoa,e.filterChange(),e.containerNote=e.containerDetailsService.containerNote})),this.containerDetailsService.onDataChanged.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.lease=t[0],e.leaseDetail=t[1],e.packageType=t[2],e.supplier=t[3],e.seaport=t[4],e.containerCode=t[5],e.moveType=t[6],e.place=t[8],e.country=e.containerDetailsService.country,e.supplierPort=e.containerDetailsService.supplierPort,e.supplierCarrier=e.containerDetailsService.supplierCarrier,e.seaTerminal=e.containerDetailsService.seaTerminal})),this.containerDetailsService.onDataItemChanged.pipe(Object(N.a)(this._unsubscribeAll)).subscribe((function(t){e.price=e.containerDetailsService.price.filter((function(e){return["VS20","VS40","SC20","SC40","LF20","LF40","LON20","LON40","LC20","LC40","LB20","LB40"].includes(e.code)})),e.unit=e.containerDetailsService.unit,e.currency=e.containerDetailsService.currency,e.user=e.containerDetailsService.user,e.dataCustomer=e.containerDetailsService.dataCustomer,e.dataSupplier=e.containerDetailsService.dataSupplier})),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this.act=this.authService.act}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.containerDetailsService)}},{key:"newContainer",value:function(e){this.router.navigate(["/apps/container/container-details/form/0"])}},{key:"getTypeSidebar",value:function(e){this.type=e}},{key:"getContainer",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.containerDetailsService.getContainerById(this.id).then((function(t){e.authService.onRequestChanged.next(!1),e.type="view"})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")}))}},{key:"editContainer",value:function(e){var t=this;this.authService.onRequestChanged.next(!0),e.on_hire&&(e.on_hire=this.datePipe.transform(e.on_hire,"yyyy-MM-dd")),e.off_hire&&(e.off_hire=this.datePipe.transform(e.off_hire,"yyyy-MM-dd")),e.update_by=this.authService.user,this.containerDetailsService.updateContainer(e).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows&&t.getContainer()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Error edit")}))}},{key:"createMovement",value:function(e){var t=this;this.containerDetailsService.createMovement(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?(t.getContainer(),alert("create success")):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("create error")}))}},{key:"deleteMovement",value:function(e){var t=this;confirm("Do you want to delete this movement?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteMovement(e.container,e.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?(t.getContainer(),alert("delete success")):(console.error(e),alert("delete error"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")})))}},{key:"deleteSelMove",value:function(e){var t=this;confirm("Do you want to delete this shipment move?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteSelMove(e).then((function(e){t.authService.onRequestChanged.next(!1),1==e.selMove.affectedRows?(t.getContainer(),alert("Delete success")):(console.error(e),alert("Delete error"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Delete error")})))}},{key:"createNote",value:function(e){var t=this;this.authService.onRequestChanged.next(!0),this.containerDetailsService.createContainerNote(e).then((function(e){t.authService.onRequestChanged.next(!1),t.getContainer()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("error")}))}},{key:"deleteNote",value:function(e){var t=this;confirm("Do you want to delete this container note?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteContainerNote(e.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?(alert("Delete success"),t.getContainer()):(console.error(e),alert("Error: No container exist."))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Delete error")})))}},{key:"openAddMoveModal",value:function(e){var t=this;if(e){var n=[];this.moveType.map((function(e){"LOAD"==e.move_code&&"ONHI"==e.move_code&&"OFHI"==e.move_code||n.push(e)})),this.dialogRef=this._matDialog.open(re,{panelClass:"container-details-modal-dialog",data:{label:"Add movement",id:this.id,data:e,movement:this.movement,moveType:n,seaport:this.seaport,place:this.supplierPort,container:this.container}}),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getContainer()}))}else this.dialogRef=this._matDialog.open(Oe,{panelClass:"container-details-movement-modal-dialog",data:{label:"Add movement",movements:this.movement,contId:this.id,moveType:this.moveType,seaport:this.seaport,place:this.place,container:this.container,country:this.country,supplier:this.supplierPort,supplierCarrier:this.supplierCarrier,seaTerminal:this.seaTerminal}}),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getContainer()}))}},{key:"openEditMoveModal",value:function(e){var t=this;this.dialogRef=this._matDialog.open(Oe,{panelClass:"container-details-movement-modal-dialog",data:{label:"Edit movement",movements:this.movement,contId:this.id,id:e.id,moveType:this.moveType,seaport:this.seaport,place:this.place,container:this.container,country:this.country,supplier:this.supplierPort,supplierCarrier:this.supplierCarrier,seaTerminal:this.seaTerminal,voyage:this.voyage}}),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getContainer()}))}},{key:"openAddNoteModal",value:function(e){var t=this;this.dialogRef=this._matDialog.open(re,{panelClass:"container-details-modal-dialog",data:{label:"Add note",id:e.id}}),this.dialogRef.afterClosed().subscribe((function(e){e&&(e.insertId>0?t.getContainer():(console.error(e),alert("error")))}))}},{key:"getShipment",value:function(e){var t=this,n=e.document.trim();/\s/.test(n)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument2(n).then((function(e){t.authService.onRequestChanged.next(!1),1==e.length?t.router.navigate(["/apps/import-haiphong/shipment/detail/"+e[0].id+"/overview"]):alert("shipment document not exact")})).catch((function(e){t.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)})))}},{key:"saveSelMove",value:function(e){var t=this,n=e.document.trim();/\s/.test(n)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument2(n).then((function(n){if(t.authService.onRequestChanged.next(!1),1==n.length){var i=n[0].id;t.containerDetailsService.createSelMove({shipment:n[0],move:e,user:t.authService.user}).then((function(n){t.authService.onRequestChanged.next(!1),n.insertId>0?(t.getContainer(),t.authService.addAction(i,t.authService.actionCode[e.move_code])):(console.error(n),alert(n.error?n.error:"ERROR"))})).catch((function(e){t.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}else alert("shipment document not exact")})).catch((function(e){t.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)})))}},{key:"addSelRevenue",value:function(e){var t=this.movement.filter((function(t){return t.shipment_id==e.shipment_id}));this.openModal("Revenue","create",e,t)}},{key:"addSelCost",value:function(e){var t=this.movement.filter((function(t){return t.shipment_id==e.shipment_id}));this.openModal("Cost","create",e,t)}},{key:"editSoaItem",value:function(e){var t=this.movement.filter((function(t){return t.shipment_id==e.shipment}));this.openModal(e.type_name,"update",e,t)}},{key:"createSoaItem",value:function(e){var t=this.movement.filter((function(t){return t.shipment_id==e.shipment}));this.openModal(e.type_name,"create",e,t)}},{key:"openModal",value:function(e,t,n,i){var o=this;"Revenue"==e&&(this.partner=this.dataCustomer),"Cost"==e&&(this.partner=this.dataSupplier),this.dialogRef=this._matDialog.open(nt,{panelClass:"container-details-soa-modal-dialog",data:{label:("create"==t?"Add ":"Edit ")+e,price:this.price,currency:this.currency,partner:this.partner,country:this.country,move:i,selMove:n||null,data:n||null}}),this.dialogRef.componentInstance.updateItem.subscribe((function(n){switch(o.authService.onRequestChanged.next(!0),e){case"Revenue":"create"==t?o.containerDetailsService.createSelRevenue(n).then((function(t){o.authService.onRequestChanged.next(!1),t.insertId>0?o.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),o.dialogRef.componentInstance.errorMessage="Error update "+e)})).catch((function(t){o.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")})):o.containerDetailsService.updateSelRevenue(n).then((function(t){o.authService.onRequestChanged.next(!1),t.insertId>0?o.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),o.dialogRef.componentInstance.errorMessage="Error update "+e)})).catch((function(t){o.authService.onRequestChanged.next(!1),console.error(t),alert("Update "+e+" error")}));break;case"Cost":"create"==t?o.containerDetailsService.createSelCost(n).then((function(t){o.authService.onRequestChanged.next(!1),t.affectedRows>0?o.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),o.dialogRef.componentInstance.errorMessage="Error update "+e)})).catch((function(t){o.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")})):o.containerDetailsService.updateSelCost(n).then((function(t){o.authService.onRequestChanged.next(!1),t.affectedRows>0?o.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),o.dialogRef.componentInstance.errorMessage="Error update "+e)})).catch((function(t){o.authService.onRequestChanged.next(!1),console.error(t),alert("Update "+e+" error")}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&o.getContainer()}))}},{key:"deleteSoaItem",value:function(e){var t=this;if(confirm("Do you want to delete this item?"))switch(this.authService.onRequestChanged.next(!0),e.type_name){case"Revenue":this.containerDetailsService.deleteSelRevenue(e.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.getContainer():(console.error(e),alert("Error delete item"),t.getContainer())})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("delete item error")}));break;case"Cost":this.containerDetailsService.deleteSelCost(e.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.getContainer():(console.error(e),alert("Error delete item"),t.getContainer())})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("delete item error")}))}}},{key:"getTotal",value:function(e){var t=this;this.total={tax:0,amount:0},this.totalCurrency=[],e.map((function(e){var n="Revenue"==e.type_name?1:-1,i=t.totalCurrency.find((function(t){return t.code==e.currency_code}));i?(i.amount+=e.volume*e.amount*n,i.tax+=e.volume*e.tax_amount*n):t.totalCurrency.push({code:e.currency_code,amount:e.volume*e.amount*n,tax:e.volume*e.tax_amount*n}),t.total.tax+=e.volume*e.tax_amount*e.ex_rate*n,t.total.amount+=e.volume*e.amount*e.ex_rate*n}))}},{key:"filterChange",value:function(e){var t=this;if(e&&(this.filterContent=e),this.containerSoa.length>0){var n=this.containerSoa.slice();n.map((function(e){e.issue_date&&(e.issue_date=new Date(e.issue_date).setDate(new Date(e.issue_date).getDate())),e.pay_date&&(e.pay_date=new Date(e.pay_date).setDate(new Date(e.pay_date).getDate()))})),this.filterContent&&(this.filterContent.shipment&&(n=n.filter((function(e){return e.shipment_code.toLowerCase().includes(t.filterContent.shipment.toLowerCase())}))),this.filterContent.party&&(n=n.filter((function(e){return e.partner_short_name.toLowerCase().includes(t.filterContent.party.toLowerCase())}))),this.filterContent.price&&(n=n.filter((function(e){return e.price_code.toLowerCase().includes(t.filterContent.price.toLowerCase())}))),this.filterContent.unit&&(n=n.filter((function(e){return e.unit_code.toLowerCase().includes(t.filterContent.unit.toLowerCase())}))),this.filterContent.debit&&(n=n.filter((function(e){return e.debit&&e.debit.toLowerCase().includes(t.filterContent.debit.toLowerCase())}))),this.filterContent.invoice_number&&(n=n.filter((function(e){return e.inv_number&&e.inv_number.toLowerCase().includes(t.filterContent.invoice_number.toLowerCase())}))),"All"!=this.filterContent.pay_date&&(1==this.filterContent.pay_date?n=n.filter((function(e){return e.pay_date})):0==this.filterContent.pay_date&&(n=n.filter((function(e){return!e.pay_date})))),this.filterContent.currency&&(n=n.filter((function(e){return e.currency_code.toLowerCase().includes(t.filterContent.currency.toLowerCase())}))),this.filterContent.payment_center&&(n=n.filter((function(e){return e.country_name.toLowerCase().includes(t.filterContent.payment_center.toLowerCase())}))),this.filterContent.info&&(n=n.filter((function(e){return e.info.toLowerCase().includes(t.filterContent.info.toLowerCase())}))),"All"!=this.filterContent.type_name&&(n=n.filter((function(e){return e.type_name==t.filterContent.type_name})))),this.filterData=n,this.getTotal(this.filterData)}}}]),e}()).\u0275fac=function(e){return new(e||gn)(T.Rb(it.a),T.Rb(J),T.Rb(g.b),T.Rb(o.g),T.Rb(o.a),T.Rb(j.a),T.Rb(V.f))},gn.\u0275cmp=T.Lb({type:gn,selectors:[["container-details"]],decls:10,vars:15,consts:[[1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-details-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-details-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar","newContainer"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[3,"height","container","movement","moveType","place","containerSoa","containerNote","total","totalCurrency","act","user","permission","createMovement","deleteMovement","deleteSelMove","createNote","deleteNote","openAddMoveModal","openEditMoveModal","openAddNoteModal","getShipment","saveSelMove","addSelRevenue","addSelCost","createSoaItem","editSoaItem","deleteSoaItem","filterChange"],["name","container-details-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"height","type","container","lease","leaseDetail","packageType","seaport","containerCode","sidebarPage","editContainer"]],template:function(e,t){1&e&&(T.Xb(0,"div",0),T.Jc(1,vn,2,8,"fuse-sidebar",1),T.Xb(2,"fuse-sidebar",2),T.Xb(3,"div",3),T.Sb(4,"container-details-setting",4),T.Wb(),T.Wb(),T.Xb(5,"div",5),T.Xb(6,"container-details-header",6),T.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newContainer",(function(e){return t.newContainer(e)})),T.Wb(),T.Xb(7,"div",7),T.Xb(8,"div",8),T.Xb(9,"container-details-content",9),T.fc("createMovement",(function(e){return t.createMovement(e)}))("deleteMovement",(function(e){return t.deleteMovement(e)}))("deleteSelMove",(function(e){return t.deleteSelMove(e)}))("createNote",(function(e){return t.createNote(e)}))("deleteNote",(function(e){return t.deleteNote(e)}))("openAddMoveModal",(function(e){return t.openAddMoveModal(e)}))("openEditMoveModal",(function(e){return t.openEditMoveModal(e)}))("openAddNoteModal",(function(e){return t.openAddNoteModal(e)}))("getShipment",(function(e){return t.getShipment(e)}))("saveSelMove",(function(e){return t.saveSelMove(e)}))("addSelRevenue",(function(e){return t.addSelRevenue(e)}))("addSelCost",(function(e){return t.addSelCost(e)}))("createSoaItem",(function(e){return t.createSoaItem(e)}))("editSoaItem",(function(e){return t.editSoaItem(e)}))("deleteSoaItem",(function(e){return t.deleteSoaItem(e)}))("filterChange",(function(e){return t.filterChange(e)})),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.Db(1),T.pc("ngIf",t.sidebarPanel),T.Db(3),T.pc("displayObject",t.displayObject),T.Db(2),T.pc("sidebarName","container-details-sidebar"),T.Db(3),T.pc("height",t.height)("container",t.container)("movement",t.movement)("moveType",t.moveType)("place",t.place)("containerSoa",t.filterData)("containerNote",t.containerNote)("total",t.total)("totalCurrency",t.totalCurrency)("act",t.act)("user",t.userId)("permission",t.permission))},directives:[ot.a,V.t,at.a,rt,bt,H.a,Tt,hn],styles:["container-details{width:100%}container-details .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-details .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-details .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-details .center .content-card container-details{border-right:0}container-details .center .content-card container-details,container-details .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-details .center .content-card shipment-details{display:none!important}container-details .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-details .center .content-card.current-shipment-selected .content container-details,container-details .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-details .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:P.a}}),gn),xn=n("vxfF"),Cn=n("cfqv");n.d(t,"ContainerDetailsModule",(function(){return Wn}));var Sn,kn=[{path:":id",component:yn,resolve:{data:J}}],Wn=((Sn=function e(){_classCallCheck(this,e)}).\u0275mod=T.Pb({type:Sn}),Sn.\u0275inj=T.Ob({factory:function(e){return new(e||Sn)},providers:[J],imports:[[o.k.forChild(kn),r.b,a.a,c.b,l.c,s.c,u.b,b.e,m.b,d.b,f.c,p.c,h.b,v.c,g.e,y.b,x.b,C.b,S.d,k.e,W.b,X.b,w.b,D.k,L.c,_.t,M.a,I.a,R.f,xn.g,Cn.b]]}),Sn)},cfqv:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var i=n("8LU1"),o=n("vxfF"),a=n("fXoL"),r=n("HDdC"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;_classCallCheck(this,e),this._totalWeight=0,this._defaultItemSize=t,this._averageItemSize=t}return _createClass(e,[{key:"getAverageItemSize",value:function(){return this._averageItemSize}},{key:"addSample",value:function(e,t){var n=this._totalWeight+e.end-e.start;if(n){var i=(t+this._averageItemSize*this._totalWeight)/n;i&&(this._averageItemSize=i,this._totalWeight=n)}}},{key:"reset",value:function(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}]),e}(),l=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c;_classCallCheck(this,e),this.scrolledIndexChange=new r.a((function(){throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")})),this._viewport=null,this._removalFailures=0,this._minBufferPx=t,this._maxBufferPx=n,this._averager=i}return _createClass(e,[{key:"attach",value:function(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}},{key:"detach",value:function(){this._viewport=null}},{key:"onContentScrolled",value:function(){this._viewport&&this._updateRenderedContentAfterScroll()}},{key:"onDataLengthChanged",value:function(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}},{key:"onContentRendered",value:function(){this._viewport&&this._checkRenderedContentSize()}},{key:"onRenderedOffsetChanged",value:function(){this._viewport&&this._checkRenderedContentOffset()}},{key:"scrollToIndex",value:function(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}},{key:"updateBufferSize",value:function(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}},{key:"_updateRenderedContentAfterScroll",value:function(){var e=this._viewport,t=e.measureScrollOffset(),n=t-this._lastScrollOffset,i=Math.abs(n),o=e.getRenderedRange(),a=0;if(n<0){var r=o.start*this._averager.getAverageItemSize();n-=a=Math.round((r-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,i/(t+i)))),i=Math.abs(n)}var c=this._lastScrollOffset-this._lastRenderedContentOffset,l=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),s=i+this._minBufferPx-(n<0?c:l);if(s>0)if(i>=e.getViewportSize())this._renderContentForCurrentOffset();else{var u,b,m=Math.max(0,Math.ceil((s-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),d=(n<0?l:c)-this._minBufferPx+i,f=Math.floor(d/this._averager.getAverageItemSize()/(this._removalFailures+1)),p=Math.min(o.end-o.start,Math.max(0,f)),h=this._expandRange(o,n<0?m:0,n>0?m:0);if(n<0?h.end=Math.max(h.start+1,h.end-p):h.start=Math.min(h.end-1,h.start+p),n<0){var v=e.measureRangeSize({start:h.end,end:o.end});v<=d?(u=this._lastRenderedContentOffset+this._lastRenderedContentSize-v,this._removalFailures=0):(h.end=o.end,u=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),b="to-end"}else{var g=e.measureRangeSize({start:o.start,end:h.start});g<=d?(u=this._lastRenderedContentOffset+g,this._removalFailures=0):(h.start=o.start,u=this._lastRenderedContentOffset,this._removalFailures++),b="to-start"}e.setRenderedRange(h),e.setRenderedContentOffset(u+a,b)}else a&&e.setRenderedContentOffset(this._lastRenderedContentOffset+a);this._lastScrollOffset=t}},{key:"_checkRenderedContentSize",value:function(){var e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}},{key:"_checkRenderedContentOffset",value:function(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}},{key:"_renderContentForCurrentOffset",value:function(){var e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;var n=this._averager.getAverageItemSize(),i=Math.min(e.getDataLength()-1,Math.floor(t/n)),o=Math.ceil(this._maxBufferPx/n),a=this._expandRange(this._getVisibleRangeForIndex(i),o,o);e.setRenderedRange(a),e.setRenderedContentOffset(n*a.start)}},{key:"_getVisibleRangeForIndex",value:function(e){var t=this._viewport,n={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},i=n.end-t.getDataLength();return i>0&&(n.start=Math.max(0,n.start-i)),n}},{key:"_expandRange",value:function(e,t,n){var i=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(i.getDataLength(),e.end+n)}}},{key:"_updateTotalContentSize",value:function(e){var t=this._viewport,n=t.getRenderedRange(),i=e+(t.getDataLength()-(n.end-n.start))*this._averager.getAverageItemSize();t.setTotalContentSize(i)}}]),e}();function s(e){return e._scrollStrategy}var u=function(){var e=function(){function e(){_classCallCheck(this,e),this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new l(this.minBufferPx,this.maxBufferPx)}return _createClass(e,[{key:"ngOnChanges",value:function(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=Object(i.f)(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=Object(i.f)(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=a.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[a.Cb([{provide:o.h,useFactory:s,deps:[Object(a.V)((function(){return e}))]}]),a.Bb()]}),e}(),b=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)}}),e}()}}]);