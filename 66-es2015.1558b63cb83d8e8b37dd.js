(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{jD4G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{static filterArrayByString(e,t){return""===t?e:(t=t.toLowerCase(),e.filter(e=>this.searchInObj(e,t)))}static searchInObj(e,t){for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n];if("string"==typeof i){if(this.searchInString(i,t))return!0}else if(Array.isArray(i)&&this.searchInArray(i,t))return!0;if("object"==typeof i&&this.searchInObj(i,t))return!0}}static searchInArray(e,t){for(const n of e){if("string"==typeof n&&this.searchInString(n,t))return!0;if("object"==typeof n&&this.searchInObj(n,t))return!0}}static searchInString(e,t){return e.toLowerCase().includes(t)}static generateGUID(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}static toggleInArray(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}static handleize(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}},rPBI:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("fXoL"),o=n("XNiG"),r=n("1G5W"),a=n("3Pt+"),c=n("Kj3r"),s=n("/uUt"),l=n("0JVi"),b=n("ofXK"),p=n("znSr"),u=n("XiUz"),m=n("bTqV"),d=n("NFeN");function h(e,t){if(1&e){const e=i.Yb();i.Xb(0,"button",7),i.fc("click",(function(t){return i.Bc(e),i.jc().expand()})),i.Xb(1,"mat-icon",8),i.Lc(2,"search"),i.Wb(),i.Wb()}if(2&e){const e=i.jc();i.Db(1),i.pc("color",e.searchText&&""!==e.searchText?"accent":"")}}const f=function(e){return{expanded:e}};let g=(()=>{class e{constructor(e){this._fuseConfigService=e,this.inputValue=new i.o,this.collapsed=!0,this.searchInput=new a.e(""),this._unsubscribeAll=new o.a}ngOnInit(){this._fuseConfigService.config.pipe(Object(r.a)(this._unsubscribeAll)).subscribe(e=>{this.fuseConfig=e}),this.searchInput.valueChanges.pipe(Object(r.a)(this._unsubscribeAll),Object(c.a)(300),Object(s.a)()).subscribe(e=>{this.searchText=e,this.inputValue.emit(e)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.searchText&&(e.searchText.currentValue||null==e.searchText.currentValue)&&(this.searchText=e.searchText.currentValue,this.searchInput.setValue(this.searchText))}collapse(){this.collapsed=!0}expand(){this.collapsed=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Rb(l.b))},e.\u0275cmp=i.Lb({type:e,selectors:[["filter-search-bar"]],inputs:{searchText:"searchText"},outputs:{inputValue:"inputValue"},features:[i.Bb()],decls:8,vars:5,consts:[[1,"filter-search-bar",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",1,"filter-search-bar-content"],["for","filter-search-bar-input"],["mat-icon-button","","class","filter-search-bar-expander","aria-label","Expand Search Bar",3,"click",4,"ngIf"],["id","filter-search-bar-input","type","text","placeholder","Search","fxFlex","",1,"ml-24",3,"formControl"],["mat-icon-button","","aria-label","Collapse Search Bar",1,"filter-search-bar-collapser",3,"click"],[1,"s-24","secondary-text"],["mat-icon-button","","aria-label","Expand Search Bar",1,"filter-search-bar-expander",3,"click"],[1,"s-24","secondary-text",3,"color"]],template:function(e,t){1&e&&(i.Xb(0,"div",0),i.Xb(1,"div",1),i.Xb(2,"label",2),i.Jc(3,h,3,1,"button",3),i.Wb(),i.Sb(4,"input",4),i.Xb(5,"button",5),i.fc("click",(function(e){return t.collapse()})),i.Xb(6,"mat-icon",6),i.Lc(7,"close"),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&e&&(i.pc("ngClass",i.rc(3,f,!t.collapsed)),i.Db(3),i.pc("ngIf",t.collapsed),i.Db(1),i.pc("formControl",t.searchInput))},directives:[b.q,p.a,u.d,u.c,b.t,a.b,u.b,a.p,a.f,m.b,d.a],styles:["[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{height:56px}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:block}"]}),e})()},rTeU:function(e,t,n){"use strict";n.r(t);var i=n("tyNb"),o=n("STbY"),r=n("/1cH"),a=n("iadO"),c=n("bTqV"),s=n("7EHt"),l=n("kmnG"),b=n("NFeN"),p=n("Qu3c"),u=n("qFsG"),m=n("wZkO"),d=n("d3UM"),h=n("QibW"),f=n("0IaG"),g=n("/t3+"),v=n("bSwM"),y=n("M9IT"),x=n("xHqg"),S=n("A5z7"),D=n("bv9b"),_=n("XhcP"),X=n("FKr1"),W=n("1jcm"),w=n("+0xr"),L=n("Dh3D"),N=n("IOBc"),k=n("212X"),C=n("5HBU"),O=n("LPQX"),I=n("fXoL"),T=n("ofXK");function M(e,t){1&e&&I.Sb(0,"router-outlet")}let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&I.Jc(0,M,1,0,"router-outlet",0),2&e&&I.pc("ngIf",!0)},directives:[T.t,i.l],styles:[""]}),e})();var j=n("XNiG"),V=n("1G5W"),P=n("3Pt+"),F=n("JX91"),R=n("lJxs"),E=n("qXBG"),J=n("0Zc1"),B=n("XiUz"),$=n("EwFO");function q(e,t){if(1&e&&(I.Xb(0,"mat-option",31),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Nc(" ",e.name," ")}}function z(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Price is required "),I.Wb())}function U(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Amount is required "),I.Wb())}function Y(e,t){if(1&e&&(I.Xb(0,"mat-option",32),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Nc(" ",e.code," ")}}function H(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Currency is required "),I.Wb())}function G(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",33),I.fc("click",(function(t){I.Bc(e);const n=I.jc().index;return I.jc().removePrice(n)})),I.Xb(1,"mat-icon"),I.Lc(2,"delete"),I.Wb(),I.Wb()}}function Q(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",34),I.fc("click",(function(t){return I.Bc(e),I.jc(2).addPrice()})),I.Xb(1,"mat-icon"),I.Lc(2,"add"),I.Wb(),I.Wb()}}function K(e,t){if(1&e&&(I.Xb(0,"div",16),I.Xb(1,"mat-form-field",17),I.Xb(2,"mat-label"),I.Lc(3,"Price"),I.Wb(),I.Sb(4,"input",18),I.Xb(5,"mat-autocomplete",19,20),I.Jc(7,q,2,2,"mat-option",21),I.kc(8,"async"),I.Wb(),I.Jc(9,z,2,0,"mat-error",22),I.Wb(),I.Xb(10,"mat-form-field",23),I.Xb(11,"mat-label"),I.Lc(12,"Unit"),I.Wb(),I.Sb(13,"input",24),I.Wb(),I.Xb(14,"mat-form-field",23),I.Xb(15,"mat-label"),I.Lc(16,"Amount"),I.Wb(),I.Sb(17,"input",25),I.Jc(18,U,2,0,"mat-error",22),I.Wb(),I.Xb(19,"mat-form-field",23),I.Xb(20,"mat-label"),I.Lc(21,"Currency"),I.Wb(),I.Xb(22,"mat-select",26),I.Jc(23,Y,2,2,"mat-option",27),I.Wb(),I.Jc(24,H,2,0,"mat-error",22),I.Wb(),I.Xb(25,"div",28),I.Jc(26,G,3,0,"button",29),I.Jc(27,Q,3,0,"button",30),I.Wb(),I.Wb()),2&e){const e=t.index,n=I.xc(6),i=I.jc();I.pc("formGroupName",e),I.Db(4),I.pc("matAutocomplete",n),I.Db(1),I.pc("displayWith",i.commonService.displayObjFn.bind(i,"code")),I.Db(2),I.pc("ngForOf",I.lc(8,12,i.filteredPrice[e])),I.Db(2),I.pc("ngIf",i.form.controls.price.controls[e].get("price").hasError("required")),I.Db(4),I.pc("value",null==i.form.value.price[e].price?null:i.form.value.price[e].price.unit_code)("readonly",!0),I.Db(5),I.pc("ngIf",i.form.controls.price.controls[e].get("amount").hasError("required")),I.Db(5),I.pc("ngForOf",i.currency),I.Db(1),I.pc("ngIf",i.form.controls.price.controls[e].get("currency").hasError("required")),I.Db(2),I.pc("ngIf",e>0),I.Db(1),I.pc("ngIf",i.form.controls.price.value.length==e+1)}}let Z=(()=>{class e{constructor(e,t,n,i,o,r,a){this.router=e,this.matDialogRef=t,this._data=n,this.authService=i,this._formBuilder=o,this.datePipe=r,this.commonService=a,this.filteredPrice=[],this.form=this._formBuilder.group({place:[null],price:this._formBuilder.array([this._formBuilder.group({price:[null,P.y.required],amount:[null,P.y.required],currency:[null,P.y.required]})])}),this.label=n.label,this.price=n.price,this.currency=n.currency,this.priceControl(0),n.data&&n.data.price.length>0&&(this.data=JSON.parse(JSON.stringify(n.data.price)),this.data.map((e,t)=>{t>0&&this.addPrice(),e.price=this.price.find(t=>t.id==e.price.id),e.currency=this.currency.find(t=>t.id==e.currency.id)}),this.form.patchValue({price:this.data})),this.form.controls.place.setValue(n.name)}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.errorMessage=""})}onFormSubmit(e){e.valid&&this.matDialogRef.close(e.value)}get priceAdd(){return this.form.get("price")}addPrice(){this.priceAdd.push(this._formBuilder.group({price:[null,P.y.required],amount:[null,P.y.required],currency:[null,P.y.required]})),this.priceControl(this.priceAdd.length-1)}removePrice(e){this.priceAdd.removeAt(e)}priceControl(e){this.filteredPrice[e]=this.priceAdd.at(e).get("price").valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.price_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"price_name",this.price):[]))}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(i.g),I.Rb(f.f),I.Rb(f.a),I.Rb(E.a),I.Rb(P.d),I.Rb(T.f),I.Rb(J.a))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-storage-modal-dialog"]],decls:23,vars:4,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","soa-agent-storage-modal-modal","fxLayout","column",1,"p-16","pb-0","m-0"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","place"],["formArrayName","price","fxLayout","column"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","30",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","",3,"value","readonly"],["inputCheck","","matInput","","formControlName","amount","type","number"],["formControlName","currency","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","10",1,"pr-8"],["mat-mini-fab","","color","warn","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent","type","button",3,"click",4,"ngIf"],[2,"font-size","12px","overflow","visible","display","block",3,"value"],[3,"value"],["mat-mini-fab","","color","warn","type","button",3,"click"],["mat-mini-fab","","color","accent","type","button",3,"click"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"mat-toolbar",1),I.Xb(2,"mat-toolbar-row",2),I.Xb(3,"span",3),I.Lc(4),I.Wb(),I.Xb(5,"button",4),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Xb(6,"mat-icon"),I.Lc(7,"close"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",5),I.Xb(9,"div"),I.Xb(10,"form",6),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),I.Xb(11,"div",7),I.Sb(12,"input",8),I.Wb(),I.Xb(13,"div",9),I.Jc(14,K,28,14,"div",10),I.Wb(),I.Xb(15,"div",11),I.Xb(16,"div",12),I.Lc(17),I.Wb(),I.Wb(),I.Xb(18,"div",13),I.Xb(19,"button",14),I.Lc(20,"Submit"),I.Wb(),I.Xb(21,"button",15),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Lc(22,"Cancel"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(4),I.Mc(t.label),I.Db(6),I.pc("formGroup",t.form),I.Db(4),I.pc("ngForOf",t.priceAdd.controls),I.Db(3),I.Mc(t.errorMessage))},directives:[g.a,g.c,B.b,B.d,B.c,c.b,b.a,f.d,$.a,P.A,P.q,P.h,P.b,P.p,P.g,P.c,T.s,P.i,l.c,l.f,u.b,r.c,P.w,r.a,T.t,P.u,d.a,X.n,l.b],pipes:[T.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.soa-agent-storage-modal-dialog{width:100%}}@media screen and (min-width:960px){.soa-agent-storage-modal-dialog{width:1080px}}.soa-agent-storage-modal-dialog .mat-dialog-container{padding:0}.soa-agent-storage-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq{-webkit-box-flex:1;flex:1 0 auto}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq .item{padding:8px}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq .item .title{font-weight:700;font-size:14px;margin-bottom:8px}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .faq .item .info{font-size:12px;line-height:1.5}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper{margin:0;padding:0}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-header{padding:8px 20px;border-bottom:1px solid}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-header .example-viewer-title{font-weight:700}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content{background:#263238;color:#fff}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab{position:relative}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab .example-source-copy{position:absolute;top:0;right:8px}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab:hover .example-source-copy{display:inline-block}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab .example-source{padding:0;margin:0;min-height:150px;border-bottom:1px solid}.soa-agent-storage-modal-dialog #soa-agent-storage-modal .example-viewer-wrapper .example-viewer-source .tab-content .tab .example-source>pre{width:100%}"],encapsulation:2}),e})();var ee=n("Frtq"),te=n("HX77"),ne=n("2Vo4"),ie=n("jD4G"),oe=n("tk/3"),re=n("6K47"),ae=n("Iab2");let ce=(()=>{class e{constructor(e,t,n){this._httpClient=e,this.authService=t,this.datePipe=n,this.defaultSearch={formSearch:{pay_party:null,issue_party:null,customer:null,agent:113,voyage:null,payment_center:6,debit:null,date_from:"11/01/2022",date_to:"11/30/2022"}},this.total={revenue:0,cost:0},this.sptVoyage=[],this.sptPrice=[],this.sptVoyageImp=[],this.sptPriceImp=[],this.onDataChanged=new ne.a([]),this.onTypeChanged=new ne.a("form"),this.onSoaChanged=new ne.a([]),this.onDataItemChanged=new ne.a([]),this.onVesselChanged=new ne.a([]),this.onVesselImpChanged=new ne.a([]),this.onUpdateAddInfoChanged=new ne.a([]),this.onSearchTextChanged=new j.a}resolve(e){return this.authService.routerData=e,this.authService.back&&(this.authService.back=!1),(!this.currenSearch||this.currenSearch&&!this.currenSearch.formSearch)&&(this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch))),new Promise((e,t)=>{Promise.all([this.getData(),this.getItemData()]).then(([t])=>{this.onSearchTextChanged.subscribe(e=>{this.searchText=e;let t=this.shipment.slice();this.searchText&&""!==this.searchText&&(t=ie.a.filterArrayByString(t,this.searchText));let n=this.buildVessel(t);this.shipmentVessel=n[0],this.voyage=n[1],this.arrType=n[2],this.dataBill=n[3],this.totalExp=n[4],this.onVesselChanged.next([this.shipmentVessel,this.voyage,this.arrType,this.sptPrice,this.dataBill,this.totalExp]);let i=this.shipmentImp.slice();this.searchText&&""!==this.searchText&&(i=ie.a.filterArrayByString(i,this.searchText));let o=this.buildVessel(i);this.shipmentVesselImp=o[0],this.voyageImp=o[1],this.arrTypeImp=o[2],this.dataBillImp=o[3],this.totalImp=o[4],this.onVesselImpChanged.next([this.shipmentVesselImp,this.voyageImp,this.arrTypeImp,this.sptPriceImp,this.dataBillImp,this.totalImp])}),e()},t)})}getData(){let e={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/data",e).subscribe(e=>{this.dataCustomer=e[0],this.dataSupplier=e[1],this.users=e[3],this.onDataChanged.next(e),t(e)},n)})}getItemData(){let e={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/book/book",e).subscribe(e=>{this.agent=e.agent,this.commodity=e.commodity,this.packageType=e.packageType,this.price=e.price,this.currency=e.currency,this.country=e.country,this.depot=e.depot,this.onDataItemChanged.next(e),t(e)},n)})}getSelShipmentSoaAgent(e){this.selectAgent=this.agent.find(t=>t.id==e.agent),this.dateFrom=e.date_from?e.date_from:null,this.dateTo=e.date_to?e.date_to:null;let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/shipment/soa-agent",e,t).subscribe(e=>{console.log(e),this.shipment=e.export.shipment,this.shipmentAddInfo=e.export.shipmentAddInfo,this.sptPrice=e.export.price,this.sptVoyage=e.export.voyage;let t=this.shipment.slice();this.searchText&&""!==this.searchText&&(t=ie.a.filterArrayByString(t,this.searchText));let i=this.buildVessel(t);this.shipmentVessel=i[0],this.voyage=i[1],this.arrType=i[2],this.dataBill=i[3],this.totalExp=i[4],this.onVesselChanged.next([this.shipmentVessel,this.voyage,this.arrType,this.sptPrice,this.dataBill,this.totalExp]),this.shipmentImp=e.import.shipment,this.shipmentImpAddInfo=e.import.shipmentAddInfo,this.sptPriceImp=e.import.price,this.sptVoyageImp=e.import.voyage;let o=this.shipmentImp.slice();this.searchText&&""!==this.searchText&&(o=ie.a.filterArrayByString(o,this.searchText));let r=this.buildVessel(o);this.shipmentVesselImp=r[0],this.voyageImp=r[1],this.arrTypeImp=r[2],this.dataBillImp=r[3],this.totalImp=r[4],this.onVesselImpChanged.next([this.shipmentVesselImp,this.voyageImp,this.arrTypeImp,this.sptPriceImp,this.dataBillImp,this.totalImp]),n(e)},i)})}createSelRevenue(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/revenue",e,t).subscribe(e=>{n(e)},i)})}createSelCost(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/cost",e,t).subscribe(e=>{n(e)},i)})}updateSelCost(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/cost",e,t).subscribe(e=>{n(e)},i)})}updateSelRevenue(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/revenue",e,t).subscribe(e=>{n(e)},i)})}updateMultiShipmentItem(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/shipment/multi-item",e,t).subscribe(e=>{n(e)},i)})}buildVessel(e){let t=[],n=[],i={},o=[],r={revenueVN:{ALL:0},revenueNN:{ALL:0},costVN:{ALL:0},costNN:{ALL:0},revenueBalance:{},costBalance:{},currency:[]};function a(e,t,n,i){e.currency.includes(n)||e.currency.push(n),e[t][n]||(e[t][n]=0),e[t][n]+=i}return this.selectAgent&&113!=this.selectAgent.id&&(r.costNN[this.selectAgent.id]=0),e.map(e=>{let c={};c.vessel_full_name=e.vessel_full_name,c.pol_name=e.pol_name,c.pod_name=e.pod_name,c.depart_time=e.depart_time,c.arrive_time=e.arrive_time,c.date=e.date,c.id=e.id,c.code=e.code,c.bill=e.bill,c.customer_name=e.customer_name,c.customer_short_name=e.customer_short_name,c.agent_name=e.agent_name,c.agent_short_name=e.agent_short_name,c.supplier_name=e.supplier_name,c.supplier_short_name=e.supplier_short_name,c.process=e.process,c.profit=e.profit,c.currency=e.currency,c.profitCurrency=e.profitCurrency,c.revenueVN20=e.revenueVN20,c.revenueVN40=e.revenueVN40,c.revenueVNSpt=e.revenueVNSpt,c.revenueNN20=e.revenueNN20,c.revenueNN40=e.revenueNN40,c.revenueNNSpt=e.revenueNNSpt,c.costVN20=e.costVN20,c.costVN40=e.costVN40,c.costVNSpt=e.costVNSpt,c.costNN20=e.costNN20,c.costNN40=e.costNN40,c.costNNSpt=e.costNNSpt,c.voyage=e.voyage,c.volume=[];let s=e.date+"-"+e.vessel_name+"-"+e.voyage;c.key=s,i[s]||(i[s]={voyage_name:e.voyage_name,vessel_full_name:e.vessel_full_name,supplier_short_name:e.supplier_short_name,supplier_full_name:e.supplier_full_name,pol_name:e.pol_name,pod_name:e.pod_name,load_country:e.load_country,discharge_country:e.discharge_country,depart_time:e.depart_time,arrive_time:e.arrive_time,closing_time:e.closing_time,shipment:[]},n.push({key:s,vessel:e.vessel_name,voyage_id:e.voyage,voyage_name:e.voyage_name,depart_time:e.depart_time})),e.volume.map(n=>{e[n.cont_type_code]?e[n.cont_type_code]+=n.volume:e[n.cont_type_code]=n.volume,c[n.cont_type_code]?c[n.cont_type_code]+=n.volume:(c[n.cont_type_code]=n.volume,c.volume.push(n.cont_type_code)),i[s][n.cont_type_code]?i[s][n.cont_type_code]+=n.volume:i[s][n.cont_type_code]=n.volume,t.includes(n.cont_type_code)||t.push(n.cont_type_code),r[n.cont_type_code]||(r[n.cont_type_code]=0),r[n.cont_type_code]+=n.volume}),c.revenueVNSpt.length+c.revenueNNSpt.length+c.costVNSpt.length+c.costNNSpt.length>0&&c.volume.push("Spt");let l={rev_of20:null,rev_lthc20:null,rev_dthc20:null,cost_of20:null,rev_of40:null,rev_lthc40:null,rev_dthc40:null,cost_of40:null};e.revenueVN20.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"revenueVN",e.currency_code,t),r.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"revenueNN",e.currency_code,t),r.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF20"==e.price_code&&(l.rev_of20=e),"LTHC20"==e.price_code&&(l.rev_lthc20=e),"DTHC20"==e.price_code&&(l.rev_dthc20=e),a(r,"revenueBalance",e.currency_code,t)}),e.revenueVN40.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"revenueVN",e.currency_code,t),r.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"revenueNN",e.currency_code,t),r.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF40"==e.price_code&&(l.rev_of40=e),"LTHC40"==e.price_code&&(l.rev_lthc40=e),"DTHC40"==e.price_code&&(l.rev_dthc40=e),a(r,"revenueBalance",e.currency_code,t)}),e.revenueVNSpt.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"revenueVN",e.currency_code,t),r.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"revenueNN",e.currency_code,t),r.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),a(r,"revenueBalance",e.currency_code,t)}),e.revenueNN20.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"revenueVN",e.currency_code,t),r.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"revenueNN",e.currency_code,t),r.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF20"==e.price_code&&(l.rev_of20=e),"LTHC20"==e.price_code&&(l.rev_lthc20=e),"DTHC20"==e.price_code&&(l.rev_dthc20=e),a(r,"revenueBalance",e.currency_code,t)}),e.revenueNN40.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"revenueVN",e.currency_code,t),r.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"revenueNN",e.currency_code,t),r.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF40"==e.price_code&&(l.rev_of40=e),"LTHC40"==e.price_code&&(l.rev_lthc40=e),"DTHC40"==e.price_code&&(l.rev_dthc40=e),a(r,"revenueBalance",e.currency_code,t)}),e.revenueNNSpt.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"revenueVN",e.currency_code,t),r.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"revenueNN",e.currency_code,t),r.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),a(r,"revenueBalance",e.currency_code,t)}),e.costVN20.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"costVN",e.currency_code,t),r.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"costNN",e.currency_code,t),r.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF20"==e.price_code&&(l.cost_of20=e),a(r,"costBalance",e.currency_code,t)}),e.costVN40.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"costVN",e.currency_code,t),r.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"costNN",e.currency_code,t),r.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),"OF40"==e.price_code&&(l.cost_of40=e),a(r,"costBalance",e.currency_code,t)}),e.costVNSpt.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"costVN",e.currency_code,t),r.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"costNN",e.currency_code,t),r.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),a(r,"costBalance",e.currency_code,t)}),e.costNN20.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"costVN",e.currency_code,t),r.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"costNN",e.currency_code,t),r.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate,"USD"==e.currency_code&&113!=this.selectAgent.id&&[89,114,15,107,16,122,9,116,13,117].includes(e.price)&&(r.costNN[this.selectAgent.id]+=e.volume*(e.amount+e.tax_amount))),"OF20"==e.price_code&&(l.cost_of20=e),a(r,"costBalance",e.currency_code,t)}),e.costNN40.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"costVN",e.currency_code,t),r.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"costNN",e.currency_code,t),r.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate,"USD"==e.currency_code&&113!=this.selectAgent.id&&[89,114,15,107,16,122,9,116,13,117].includes(e.price)&&(r.costNN[this.selectAgent.id]+=e.volume*(e.amount+e.tax_amount))),"OF40"==e.price_code&&(l.cost_of40=e),a(r,"costBalance",e.currency_code,t)}),e.costNNSpt.map(e=>{let t=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(a(r,"costVN",e.currency_code,t),r.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(a(r,"costNN",e.currency_code,t),r.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate,"USD"==e.currency_code&&113!=this.selectAgent.id&&[89,114,15,107,16,122,9,116,13,117].includes(e.price)&&(r.costNN[this.selectAgent.id]+=e.volume*(e.amount+e.tax_amount))),"OF40"==e.price_code&&(l.cost_of40=e),a(r,"costBalance",e.currency_code,t)});let b=[];c.volume.map(e=>{e.includes("20")?(l.rev_of20?l.rev_of20.volume!=c[e]&&b.push("sai volume "+"rev_of20".toUpperCase()):b.push("thieu "+"rev_of20".toUpperCase()),l.rev_lthc20?l.rev_lthc20.volume!=c[e]&&b.push("sai volume "+"rev_lthc20".toUpperCase()):b.push("thieu "+"rev_lthc20".toUpperCase()),l.rev_dthc20?l.rev_dthc20.volume!=c[e]&&b.push("sai volume "+"rev_dthc20".toUpperCase()):b.push("thieu "+"rev_dthc20".toUpperCase()),l.cost_of20?l.cost_of20.volume!=c[e]&&b.push("sai volume "+"cost_of20".toUpperCase()):b.push("thieu "+"cost_of20".toUpperCase())):e.includes("40")&&(l.rev_of40?l.rev_of40.volume!=c[e]&&b.push("sai volume "+"rev_of40".toUpperCase()):b.push("thieu "+"rev_of40".toUpperCase()),l.rev_lthc40?l.rev_lthc40.volume!=c[e]&&b.push("sai volume "+"rev_lthc40".toUpperCase()):b.push("thieu "+"rev_lthc40".toUpperCase()),l.rev_dthc40?l.rev_dthc40.volume!=c[e]&&b.push("sai volume "+"rev_dthc40".toUpperCase()):b.push("thieu "+"rev_dthc40".toUpperCase()),l.cost_of40?l.cost_of40.volume!=c[e]&&b.push("sai volume "+"cost_of40".toUpperCase()):b.push("thieu "+"cost_of40".toUpperCase()))});let p=0==b.length?null:b.join(", ");c.error=p,i[s].shipment.push(e),o.push(c)}),r.currency.map(e=>{a(r,"revenueBalance",e,0),a(r,"costBalance",e,0)}),t.sort(),n.sort((e,t)=>e.key<t.key?1:t.key<e.key?-1:0),o.sort((e,t)=>{var n=e.date,i=t.date,o=e.vessel_full_name,r=t.vessel_full_name,a=e.bill,c=t.bill;return n>i?1:n<i?-1:o>r?1:o<r?-1:a>c?1:a<c?-1:0}),o.map(e=>{e.volume.sort()}),r.currency.sort(),[i,n,t,o,r]}deleteSelRevenue(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/revenue/"+e,t).subscribe(e=>{n(e)},i)})}deleteSelCost(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/cost/"+e,t).subscribe(e=>{n(e)},i)})}buildExcelData(){let e=[],t=[];this.dataBill.map((n,i)=>{n.volume.map((o,r)=>{let a=[],c=n.bill+(o.includes("20")?"-20'":o.includes("40")?"-40'":"Spt")+"-"+(n[o]?n[o]:"");a.push(c),0==i&&0==r&&t.push({header:"KEY",width:24}),a.push(n.vessel_full_name),0==i&&0==r&&t.push({header:"VOY NO.",width:24}),a.push(n.bill),0==i&&0==r&&t.push({header:"BILL",width:18}),this.arrType.map(e=>{a.push(o==e?n[e]:null),0==i&&0==r&&t.push({header:e,width:6})});let s=0,l=o.includes("20")?"20":o.includes("40")?"40":o,b=n["revenueNN"+l].find(e=>e.price_code=="OF"+l);b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"PP OF",width:12}),b=n["revenueVN"+l].find(e=>e.price_code=="OF"+l),b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"CL OF",width:12}),b=n["revenueNN"+l].find(e=>e.price_code=="RR"+l),b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"RR",width:12}),b=n["revenueNN"+l].find(e=>e.price_code=="BAF"+l),b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"BAF",width:12}),b=n["revenueNN"+l].find(e=>e.price_code=="ECRS"+l),b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"ECRS",width:12}),b=n["revenueNN"+l].find(e=>e.price_code=="LSS"+l),b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"LSS",width:12}),b=n["revenueNN"+l].find(e=>e.price_code=="DG"+l),b?(s+=b.amount*b.volume,a.push(b.amount*b.volume)):a.push(null),0==i&&0==r&&t.push({header:"DG",width:12});let p=0;"Spt"==l?(n["revenueNN"+l].map(e=>{"USD"==e.currency_code&&(p+=e.amount*e.volume)}),a.push(p)):a.push(null),0==i&&0==r&&t.push({header:"OTHER",width:12}),a.push(s+p),0==i&&0==r&&t.push({header:"TOTAL REV",width:12}),b=n["costNN"+l].find(e=>"ADF20"==e.price_code),a.push(b?b.amount*b.volume:null),0==i&&0==r&&t.push({header:"COM 20",width:12}),b=n["costNN"+l].find(e=>"ADF40"==e.price_code),a.push(b?b.amount*b.volume:null),0==i&&0==r&&t.push({header:"COM 40",width:12});let u=0,m=0;n["costNN"+l].map(e=>{"USD"==e.currency_code&&(u+=e.amount*e.volume),"SGD"==e.currency_code&&(m+=e.amount*e.volume)}),a.push(u),0==i&&0==r&&t.push({header:"COST USD",width:12}),a.push(m),0==i&&0==r&&t.push({header:"COST SGD",width:12}),e.push(a)})});let n=[],i=[];this.dataBillImp.map((e,t)=>{let o=[];o.push(e.vessel_full_name),0==t&&i.push({header:"VOY NO.",width:24}),o.push(e.supplier_short_name),0==t&&i.push({header:"OWNER",width:24}),o.push(e.bill),0==t&&i.push({header:"BILL",width:18}),this.arrTypeImp.map(n=>{"Spt"!=n&&o.push(e[n]?e[n]:null),0==t&&i.push({header:n,width:6})});let r={ppof:0,clof:0,revUSD:0,revSGD:0,com20:0,com40:0,costUSD:0,costSGD:0};e.volume.map((t,n)=>{let i=t.includes("20")?"20":t.includes("40")?"40":t,o=e["revenueVN"+i].find(e=>e.price_code=="OF"+i);o&&(r.ppof+=o.amount*o.volume),o=e["revenueNN"+i].find(e=>e.price_code=="OF"+i),o&&(r.clof+=o.amount*o.volume),e["revenueNN"+i].map(e=>{"USD"==e.currency_code&&(r.revUSD+=e.amount*e.volume),"SGD"==e.currency_code&&(r.revSGD+=e.amount*e.volume)}),o=e["costNN"+i].find(e=>"ADF20"==e.price_code),o&&(r.com20+=o.amount*o.volume),o=e["costNN"+i].find(e=>"ADF40"==e.price_code),o&&(r.com40+=o.amount*o.volume),e["costNN"+i].map(e=>{"USD"==e.currency_code&&(r.costUSD+=e.amount*e.volume),"SGD"==e.currency_code&&(r.costSGD+=e.amount*e.volume)})}),o.push(r.ppof),0==t&&i.push({header:"PP OF",width:12}),o.push(r.clof),0==t&&i.push({header:"CL OF",width:12}),o.push(r.revUSD),0==t&&i.push({header:"REV USD",width:12}),o.push(r.revSGD),0==t&&i.push({header:"REV SGD",width:12}),o.push(r.com20),0==t&&i.push({header:"COM 20",width:12}),o.push(r.com40),0==t&&i.push({header:"COM 40",width:12}),o.push(r.costUSD),0==t&&i.push({header:"COST USD",width:12}),o.push(r.costSGD),0==t&&i.push({header:"COST SGD",width:12}),n.push(o)}),this.exportExcel(e,t,n,i)}exportExcel(e,t,n,i){let o=new re.Workbook,r=o.addWorksheet("exp");r.addRow([" "]),r.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1};let a=this.currenSearch.formSearch.date_from;r.addRow(["EXPORT "+this.datePipe.transform(new Date(a),"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),r.getRow(2).font={size:18,bold:!0,italic:!1},r.addRow([]);let c=t.map(e=>e.header);r.addRow(c).eachCell((e,t)=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),e.map(e=>{let t=r.addRow(e),n=e.length;for(let i=1;i<=n;i++)t.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(i).font={size:8,bold:!1},t.getCell(i).alignment={vertical:"middle",horizontal:"center",wrapText:!0}});let s=t.map(e=>e.width);for(var l=0;l<s.length;l++)r.getColumn(l+1).width=s[l];let b=o.addWorksheet("imp");b.addRow([" "]),b.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},b.addRow(["IMPORT "+this.datePipe.transform(new Date(a),"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),b.getRow(2).font={size:18,bold:!0,italic:!1},b.addRow([]);let p=i.map(e=>e.header);b.addRow(p).eachCell((e,t)=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),n.map(e=>{let t=b.addRow(e),n=e.length;for(let i=1;i<=n;i++)t.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(i).font={size:8,bold:!1},t.getCell(i).alignment={vertical:"middle",horizontal:"center",wrapText:!0}});let u=i.map(e=>e.width);for(l=0;l<s.length;l++)b.getColumn(l+1).width=u[l];o.xlsx.writeBuffer().then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(ae.saveAs)(t,"soa_"+this.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")})}}return e.\u0275fac=function(t){return new(t||e)(I.bc(oe.a),I.bc(E.a),I.bc(T.f))},e.\u0275prov=I.Nb({token:e,factory:e.\u0275fac}),e})(),se=(()=>{class e{constructor(e,t,n,i){this._httpClient=e,this.authService=t,this.datePipe=n,this.commonService=i,this.defaultSearch={formServer:{}},this.moveList=[],this.days=[],this.arrContType=[],this.total={},this.onDataChanged=new ne.a([]),this.onOverviewChanged=new ne.a([]),this.onFilterChanged=new j.a,this.onSearchTextChanged=new j.a}resolve(e){return this.modul=e.params.modul,new Promise((e,t)=>{Promise.all([this.getData()]).then(([t])=>{this.onSearchTextChanged.subscribe(e=>{this.searchText=e,this.getFilterMove()}),this.onFilterChanged.subscribe(e=>{this.filterBy=e,this.getFilterMove()}),e()},t)})}getData(){let e={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,n)=>{this._httpClient.get(this.authService.apiUrl+"/move/movement/data",e).subscribe(e=>{this.place=e[0],this.port=e[1],this.onDataChanged.next(e),t(e)},n)})}getMoveReportEmptyData(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.get(this.authService.apiUrl+"/move/movement/report-empty/"+e.place+"/"+e.type+"/"+e.date_from+"/"+e.date_to,t).subscribe(e=>{this.moveList=e.moveList,this.days=e.days,this.arrContType=e.arrContType,this.getFilterMove(),n(e)},i)})}getFilterMove(){let e=JSON.parse(JSON.stringify(this.moveList));e.length>0&&this.filterBy&&(this.filterBy.container&&(e=this.commonService.filterText(e,this.filterBy.container,"cont_number")),this.filterBy.type&&(e=this.commonService.filterText(e,this.filterBy.type,"cont_type_code"))),this.searchText&&""!==this.searchText&&(e=ie.a.filterArrayByString(e,this.searchText)),this.filterMovement=e,this.total={},this.days.map(t=>{let n=e.filter(e=>t>=e.date_from-864e5+1&&t<=e.date_to);this.total[t]=n.length}),this.arrContType.map(e=>{this.total[e]||(this.total[e]=0)}),this.total.lift_on=0,this.total.lift_off=0,this.total.storage=0,this.total.price_lift_on=0,this.total.price_lift_off=0,this.total.days=0,e.map(e=>{this.total[e.container_info.cont_type_code]++,this.total.days+=(e.time_to-e.time_from)/864e5+1,this.total.storage+=(this.storagePrice["LB"+e.container_info.type]?this.storagePrice["LB"+e.container_info.type]:0)*((e.time_to-e.time_from)/864e5+1),e.lift_on&&(this.total.lift_on+=e.lift_on,this.total.price_lift_on+=this.storagePrice["LON"+e.container_info.type]),e.lift_off&&(this.total.lift_off+=e.lift_off,this.total.price_lift_off+=this.storagePrice["LF"+e.container_info.type])}),this.total.total=this.total.storage+this.total.price_lift_on+this.total.price_lift_off,this.onOverviewChanged.next(e)}exportExcel(e,t){let n=new re.Workbook,i=n.addWorksheet("storage");i.addRow([" "]),i.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},i.addRow(["EXPORT CONTAINER "+this.datePipe.transform(new Date,"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),i.getRow(2).font={size:18,bold:!0,italic:!1},i.addRow([]);let o=["NO","CONTAINER","TYPE","PLACE","MOVE","DATE","DATE FROM","NEXT MOVE","DATE TO","DAY","STORAGE","LIFT ON","LIFT OFF","TOTAL","CURRENCY"];i.addRow(o).eachCell((e,t)=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),e.map(e=>{let t=i.addRow(e),n=e.length;for(let i=1;i<=n;i++)t.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(i).font={size:8,bold:!1},t.getCell(i).alignment={vertical:"middle",horizontal:"center",wrapText:!0}});let r=[];o.map(e=>{r.push(null)}),r[1]="TOTAL",r[r.length-1]=e[0][e[0].length-1],r[r.length-2]=t.total,r[r.length-3]=t.price_lift_off,r[r.length-4]=t.price_lift_on,r[r.length-5]=t.storage,r[r.length-6]=t.days;let a=i.addRow(r);o.map((e,t)=>{a.getCell(t+1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(t+1).font={size:10,bold:!0},a.getCell(t+1).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),i.getColumn(1).width=4.25,i.getColumn(2).width=14,i.getColumn(3).width=8,i.getColumn(4).width=20,i.getColumn(5).width=12,i.getColumn(6).width=12,i.getColumn(7).width=12,i.getColumn(8).width=12,i.getColumn(9).width=12,i.getColumn(10).width=12,i.getColumn(11).width=12,i.getColumn(12).width=12,i.getColumn(13).width=12,i.getColumn(14).width=12,n.xlsx.writeBuffer().then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(ae.saveAs)(t,"storage_"+this.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")})}}return e.\u0275fac=function(t){return new(t||e)(I.bc(oe.a),I.bc(E.a),I.bc(T.f),I.bc(J.a))},e.\u0275prov=I.Nb({token:e,factory:e.\u0275fac}),e})();var le=n("I/3d");let be=(()=>{class e{constructor(e,t,n,i){if(this.router=e,this.db=t,this.authService=n,this._httpClient=i,this.onDataChanged=new ne.a([]),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let e=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(e)}}resolve(e){return this.authService.routerData=e,new Promise((e,t)=>{Promise.all([this.getItemData()]).then(([])=>{e()},t)})}getItemData(){let e={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/item-data",e).subscribe(e=>{this.price=e[0],this.unit=e[1],this.currency=e[2],this.country=e[3],this.user=e[4],this.commodity=e[5],this.packageType=e[6],this.onDataChanged.next(e),t(e)},n)})}writeDatabaseContainerStoragePrice(e,t){this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPriceCollection.doc(e).set(t)}readDatabaseContainerStoragePrice(){return this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPrice=this.contaienrPriceCollection.snapshotChanges().pipe(Object(R.a)(e=>e.map(e=>{const t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))),this.contaienrPrice}readDatabaseContainerStoragePriceByUser(e){return this.contaienrPriceCollection=this.db.collection("container-storage-price",t=>t.where("user","==",e)),this.contaienrPrice=this.contaienrPriceCollection.snapshotChanges().pipe(Object(R.a)(e=>e.map(e=>{const t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))),this.contaienrPrice}getDatabaseContainerStoragePriceById(e){return this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPriceCollection.doc(e).valueChanges()}updateDatabaseContainerStoragePriceById(e,t){this.contaienrPriceCollection=this.db.collection("container-storage-price"),this.contaienrPriceCollection.doc(e).set(t)}deleteDatabaseContainerStoragePriceById(e){this.contaienrPriceDoc=this.db.doc("container-storage-price/"+e),this.contaienrPriceDoc.delete()}}return e.\u0275fac=function(t){return new(t||e)(I.bc(i.g),I.bc(le.a),I.bc(E.a),I.bc(oe.a))},e.\u0275prov=I.Nb({token:e,factory:e.\u0275fac}),e})();var pe=n("B9zo"),ue=n("0JVi"),me=n("znSr"),de=n("rPBI");function he(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",12),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return t.stopPropagation(),n.changeScreen(!0)})),I.Xb(1,"mat-icon"),I.Lc(2,"flip_to_front"),I.Wb(),I.Wb()}}function fe(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",12),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return t.stopPropagation(),n.changeScreen(!1)})),I.Xb(1,"mat-icon"),I.Lc(2,"flip_to_back"),I.Wb(),I.Wb()}}let ge=(()=>{class e{constructor(e,t){this.authService=e,this._fuseConfigService=t,this.fullScreen=!1,this.toggleSidebar=new I.o,this.showHideBar=new I.o,this.refreshPage=new I.o,this.searchFilter=new I.o,this._unsubscribeAll=new j.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(E.a),I.Rb(ue.b))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-header"]],inputs:{sidebarName:"sidebarName",searchText:"searchText"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:51,vars:9,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],[3,"searchText","inputValue"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(I.Xb(0,"mat-toolbar",0),I.Xb(1,"div",1),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),I.Xb(5,"mat-icon"),I.Lc(6,"menu"),I.Wb(),I.Wb(),I.Xb(7,"button",5),I.fc("click",(function(e){return t.showHideBar.emit()})),I.Xb(8,"mat-icon"),I.Lc(9,"menu"),I.Wb(),I.Wb(),I.Wb(),I.Xb(10,"button",6),I.Xb(11,"span",7),I.Lc(12,"SOA"),I.Wb(),I.Xb(13,"mat-icon",8),I.Lc(14,"equalizer"),I.Wb(),I.Wb(),I.Xb(15,"button",6),I.Xb(16,"span",7),I.Lc(17,"Inward"),I.Wb(),I.Xb(18,"mat-icon",8),I.Lc(19,"equalizer"),I.Wb(),I.Wb(),I.Xb(20,"button",6),I.Xb(21,"span",7),I.Lc(22,"Outward"),I.Wb(),I.Xb(23,"mat-icon",8),I.Lc(24,"equalizer"),I.Wb(),I.Wb(),I.Xb(25,"button",6),I.Xb(26,"span",7),I.Lc(27,"Dem"),I.Wb(),I.Xb(28,"mat-icon",8),I.Lc(29,"equalizer"),I.Wb(),I.Wb(),I.Xb(30,"button",6),I.Xb(31,"span",7),I.Lc(32,"Storage"),I.Wb(),I.Xb(33,"mat-icon",8),I.Lc(34,"equalizer"),I.Wb(),I.Wb(),I.Xb(35,"button",6),I.Xb(36,"span",7),I.Lc(37,"Error"),I.Wb(),I.Xb(38,"mat-icon",8),I.Lc(39,"equalizer"),I.Wb(),I.Wb(),I.Wb(),I.Xb(40,"div",9),I.Sb(41,"div",10),I.Xb(42,"filter-search-bar",11),I.fc("inputValue",(function(e){return t.searchFilter.emit(e)})),I.Wb(),I.Sb(43,"div",10),I.Xb(44,"button",12),I.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),I.Xb(45,"mat-icon",13),I.Lc(46,"refresh"),I.Wb(),I.Wb(),I.Sb(47,"div",10),I.Jc(48,he,3,0,"button",14),I.Jc(49,fe,3,0,"button",14),I.Sb(50,"div",10),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(10),I.pc("routerLink","/apps/workflow/soa-agent/soa"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/import"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/export"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/dem"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/storage"),I.Db(5),I.pc("routerLink","/apps/workflow/soa-agent/error"),I.Db(7),I.pc("searchText",t.searchText),I.Db(6),I.pc("ngIf",!t.fullScreen),I.Db(1),I.pc("ngIf",t.fullScreen))},directives:[g.a,B.b,B.e,B.d,B.c,c.b,me.b,b.a,i.i,i.h,de.a,T.t],styles:["soa-agent-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}soa-agent-header.below{z-index:2}soa-agent-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}soa-agent-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}soa-agent-header .logo .logo-icon{width:38px}soa-agent-header .chat-panel-toggle-button,soa-agent-header .language-button,soa-agent-header .quick-panel-toggle-button,soa-agent-header .user-button,soa-agent-header fuse-search-bar{min-width:68px;height:64px}@media screen and (max-width:599px){soa-agent-header .chat-panel-toggle-button,soa-agent-header .language-button,soa-agent-header .quick-panel-toggle-button,soa-agent-header .user-button,soa-agent-header fuse-search-bar{height:56px}}soa-agent-header .navbar-toggle-button{min-width:56px;height:56px}soa-agent-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){soa-agent-header .toolbar-separator{height:56px}}@media print{soa-agent-header{display:none}}"],encapsulation:2}),e})();var ve=n("vxfF"),ye=n("cfqv");const xe=["formDirective"];function Se(e,t){if(1&e&&(I.Xb(0,"th",23),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc();I.Ic("top",n.inverseOfTranslation),I.Db(1),I.Mc(e)}}function De(e,t){1&e&&(I.Xb(0,"mat-icon",24),I.Lc(1,"add"),I.Wb())}function _e(e,t){1&e&&(I.Xb(0,"mat-icon",25),I.Lc(1,"removed"),I.Wb())}function Xe(e,t){if(1&e&&(I.Xb(0,"th",7),I.Lc(1),I.kc(2,"date"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("top",n.inverseOfTranslation),I.Db(1),I.Mc(I.mc(2,3,e,"M/d"))}}function We(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Xe,3,6,"th",26),I.Ub()),2&e){const e=I.jc();I.Db(1),I.pc("ngForOf",e.days)}}const we=function(e){return{left:e}};function Le(e,t){if(1&e&&(I.Xb(0,"td",34),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=t.index,i=I.jc().$implicit;I.pc("ngStyle",I.rc(2,we,136+48*n+"px")),I.Db(1),I.Mc(i[e])}}function Ne(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2).$implicit;I.Db(1),I.Mc(e>=n.date_from-864e5+1&&e<=n.date_to?"x":"")}}function ke(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ne,2,1,"td",35),I.Ub()),2&e){const e=I.jc(2);I.Db(1),I.pc("ngForOf",e.days)}}function Ce(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",16),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit;return I.jc().createItem.emit([n,"Cost","LB"])})),I.Lc(1,"save"),I.Wb()}}function Oe(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",16),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit;return I.jc().createItem.emit([n,"Cost","LON"])})),I.Lc(1,"save"),I.Wb()}}function Ie(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",16),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit;return I.jc().createItem.emit([n,"Cost","LF"])})),I.Lc(1,"save"),I.Wb()}}const Te=function(e){return{"grey-100-bg":e}};function Me(e,t){if(1&e){const e=I.Yb();I.Xb(0,"tr",27),I.fc("click",(function(t){return I.Bc(e),t.stopPropagation()})),I.Xb(1,"td",28),I.Lc(2),I.Wb(),I.Xb(3,"td",18),I.Xb(4,"a",29),I.Lc(5),I.Wb(),I.Wb(),I.Jc(6,Le,2,4,"td",30),I.Xb(7,"td"),I.Lc(8),I.Wb(),I.Xb(9,"td",31),I.Lc(10),I.kc(11,"date"),I.Wb(),I.Xb(12,"td",32),I.Lc(13),I.Wb(),I.Xb(14,"td",31),I.Lc(15),I.kc(16,"date"),I.Wb(),I.Xb(17,"td"),I.Lc(18),I.Wb(),I.Xb(19,"td",31),I.Lc(20),I.kc(21,"date"),I.Wb(),I.Jc(22,ke,2,1,"ng-container",12),I.Xb(23,"td",20),I.Lc(24),I.Wb(),I.Xb(25,"td",21),I.Lc(26),I.Wb(),I.Xb(27,"td",22),I.Lc(28),I.kc(29,"number"),I.Wb(),I.Xb(30,"td"),I.Jc(31,Ce,2,0,"mat-icon",33),I.Lc(32),I.kc(33,"number"),I.Wb(),I.Xb(34,"td"),I.Jc(35,Oe,2,0,"mat-icon",33),I.Lc(36),I.Wb(),I.Xb(37,"td"),I.Jc(38,Ie,2,0,"mat-icon",33),I.Lc(39),I.Wb(),I.Xb(40,"td"),I.Lc(41),I.kc(42,"number"),I.Wb(),I.Xb(43,"td"),I.Lc(44),I.Wb(),I.Wb()}if(2&e){const e=t.$implicit,n=t.index,i=I.jc();I.pc("ngClass",I.rc(41,Te,n%2==0)),I.Db(2),I.Mc(n+1),I.Db(2),I.pc("routerLink","/apps/container/details/"+e.container),I.Db(1),I.Mc(e.container_info.cont_number),I.Db(1),I.pc("ngForOf",i.arrContType),I.Db(2),I.Mc(e.move_code),I.Db(2),I.Mc(I.mc(11,23,e.date,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(e.place_info.short_name),I.Db(2),I.Mc(I.mc(16,26,e.date_from,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(e.nextMove.move_code),I.Db(2),I.Mc(I.mc(21,29,e.date_to,"MM/dd/yyyy HH:mm")),I.Db(2),I.pc("ngIf",i.viewDay),I.Db(2),I.Mc(e.lift_on?e.lift_on:""),I.Db(2),I.Mc(e.lift_off?e.lift_off:""),I.Db(2),I.Mc(I.mc(29,32,(e.time_to-e.time_from)/864e5+1,"1.0-0")),I.Db(3),I.pc("ngIf",(i.storagePrice["LB"+e.container_info.type]?i.storagePrice["LB"+e.container_info.type]:0)*((e.time_to-e.time_from)/864e5+1)>0&&!e.storage_arr.includes(e.storage_info)),I.Db(1),I.Nc(" ",I.mc(33,35,(i.storagePrice["LB"+e.container_info.type]?i.storagePrice["LB"+e.container_info.type]:0)*((e.time_to-e.time_from)/864e5+1),"1.2-2")," "),I.Db(3),I.pc("ngIf",e.lift_on&&!e.lift_on_price),I.Db(1),I.Nc(" ",e.lift_on?i.storagePrice["LON"+e.container_info.type]:""," "),I.Db(2),I.pc("ngIf",e.lift_off&&!e.lift_off_price),I.Db(1),I.Nc(" ",e.lift_off?i.storagePrice["LF"+e.container_info.type]:""," "),I.Db(2),I.Mc(I.mc(42,38,(i.storagePrice["LB"+e.container_info.type]?i.storagePrice["LB"+e.container_info.type]:0)*((e.time_to-e.time_from)/864e5+1)+(e.lift_on?i.storagePrice["LON"+e.container_info.type]:0)+(e.lift_off?i.storagePrice["LF"+e.container_info.type]:0),"1.2-2")),I.Db(3),I.Mc(i.storagePrice.currency)}}function Ae(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc();I.Ic("bottom",n.inverseOfTranslation3),I.Db(1),I.Mc(n.total[e])}}function je(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation3),I.Db(1),I.Mc(n.total[e])}}function Ve(e,t){if(1&e&&(I.Vb(0),I.Jc(1,je,2,3,"td",19),I.Ub()),2&e){const e=I.jc();I.Db(1),I.pc("ngForOf",e.days)}}let Pe=(()=>{class e{constructor(e,t,n,i,o,r){this.router=e,this.route=t,this._activatedRoute=n,this.authService=i,this.formBuilder=o,this.datePipe=r,this.exportExcel=new I.o,this.filterChange=new I.o,this.createItem=new I.o,this.viewDay=!1,this.form=this.formBuilder.group({container:[null]})}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.moveList.length>0&&this.filterChange.emit(e)})}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){if(!this.viewPort||!this.viewPort._renderedContentOffset)return"32px";let e=parseInt(this.viewPort._renderedContentOffset);return e-=32,`-${e}px`}get inverseOfTranslation3(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}resetForm(){this.searchNgForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(i.g),I.Rb(i.a),I.Rb(i.a),I.Rb(E.a),I.Rb(P.d),I.Rb(T.f))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-storage-table"]],viewQuery:function(e,t){var n;1&e&&(I.Sc(ve.e,!0),I.Sc(xe,!0)),2&e&&(I.wc(n=I.gc())&&(t.viewPort=n.first),I.wc(n=I.gc())&&(t.searchNgForm=n.first))},inputs:{modul:"modul",arrContType:"arrContType",days:"days",moveList:"moveList",storagePrice:"storagePrice",total:"total",height:"height"},outputs:{exportExcel:"exportExcel",filterChange:"filterChange",createItem:"createItem"},decls:83,vars:94,consts:[["name","form",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-storage"],[1,"sticky-header-1","w-36"],[1,"sticky-header-1","sticky-col1","w-100",2,"z-index","25"],["class","sticky-header-1 w-48",3,"top",4,"ngFor","ngForOf"],[1,"sticky-header-1"],[1,"sticky-header-1",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",4,"ngIf"],["class","cursor-pointer","color","warn",4,"ngIf"],[4,"ngIf"],[1,"sticky-header-1","sticky-right-col3",2,"z-index","25"],[1,"sticky-header-1","sticky-right-col2",2,"z-index","25"],[1,"sticky-header-1","sticky-right-col",2,"z-index","25"],["color","accent",1,"cursor-pointer",3,"click"],[3,"ngClass","click",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"sticky-col1","w-100"],[3,"bottom",4,"ngFor","ngForOf"],[1,"sticky-right-col3"],[1,"sticky-right-col2"],[1,"sticky-right-col"],[1,"sticky-header-1","w-48"],["color","accent",1,"cursor-pointer"],["color","warn",1,"cursor-pointer"],["class","sticky-header-1",3,"top",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"w-36"],[3,"routerLink"],["class","w-48",3,"ngStyle",4,"ngFor","ngForOf"],[1,"w-120"],[1,"w-160"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],[1,"w-48",3,"ngStyle"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),I.Xb(2,"cdk-virtual-scroll-viewport",2),I.Xb(3,"table",3),I.Xb(4,"thead"),I.Xb(5,"tr"),I.Xb(6,"th",4),I.Lc(7,"No"),I.Wb(),I.Xb(8,"th",5),I.Lc(9,"Container"),I.Wb(),I.Jc(10,Se,2,3,"th",6),I.Xb(11,"th",7),I.Lc(12,"Move"),I.Wb(),I.Xb(13,"th",7),I.Lc(14,"Date"),I.Wb(),I.Xb(15,"th",7),I.Lc(16,"Place"),I.Wb(),I.Xb(17,"th",7),I.Lc(18,"Date from"),I.Wb(),I.Xb(19,"th",7),I.Lc(20,"Next Move"),I.Wb(),I.Xb(21,"th",8),I.fc("click",(function(e){return e.stopPropagation(),t.viewDay=!t.viewDay})),I.Xb(22,"div",9),I.Xb(23,"span"),I.Lc(24,"Date to"),I.Wb(),I.Jc(25,De,2,0,"mat-icon",10),I.Jc(26,_e,2,0,"mat-icon",11),I.Wb(),I.Wb(),I.Jc(27,We,2,1,"ng-container",12),I.Xb(28,"th",13),I.Lc(29,"Lift on"),I.Wb(),I.Xb(30,"th",14),I.Lc(31,"Lift off"),I.Wb(),I.Xb(32,"th",15),I.Xb(33,"div",9),I.Xb(34,"span"),I.Lc(35,"Days"),I.Wb(),I.Xb(36,"mat-icon",16),I.fc("click",(function(e){return t.exportExcel.emit()})),I.Lc(37,"print"),I.Wb(),I.Wb(),I.Wb(),I.Xb(38,"th",7),I.Lc(39,"Storage"),I.Wb(),I.Xb(40,"th",7),I.Lc(41,"Price L-ON"),I.Wb(),I.Xb(42,"th",7),I.Lc(43,"Price L-OF"),I.Wb(),I.Xb(44,"th",7),I.Lc(45,"Total"),I.Wb(),I.Xb(46,"th",7),I.Lc(47,"Currency"),I.Wb(),I.Wb(),I.Wb(),I.Xb(48,"tbody"),I.Jc(49,Me,45,43,"tr",17),I.Wb(),I.Xb(50,"tfoot"),I.Xb(51,"tr"),I.Sb(52,"td"),I.Sb(53,"td",18),I.Jc(54,Ae,2,3,"td",19),I.Sb(55,"td"),I.Sb(56,"td"),I.Sb(57,"td"),I.Sb(58,"td"),I.Sb(59,"td"),I.Xb(60,"td"),I.Lc(61,"Total"),I.Wb(),I.Jc(62,Ve,2,1,"ng-container",12),I.Xb(63,"td",20),I.Lc(64),I.Wb(),I.Xb(65,"td",21),I.Lc(66),I.Wb(),I.Xb(67,"td",22),I.Lc(68),I.Wb(),I.Xb(69,"td"),I.Lc(70),I.kc(71,"number"),I.Wb(),I.Xb(72,"td"),I.Lc(73),I.kc(74,"number"),I.Wb(),I.Xb(75,"td"),I.Lc(76),I.kc(77,"number"),I.Wb(),I.Xb(78,"td"),I.Lc(79),I.kc(80,"number"),I.Wb(),I.Xb(81,"td"),I.Lc(82),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.pc("formGroup",t.form),I.Db(2),I.Ic("height",t.height,"px"),I.Db(4),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.pc("ngForOf",t.arrContType),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(4),I.pc("ngIf",!t.viewDay),I.Db(1),I.pc("ngIf",t.viewDay),I.Db(1),I.pc("ngIf",t.viewDay),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(6),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(3),I.pc("cdkVirtualForOf",t.moveList),I.Db(3),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.pc("ngForOf",t.arrContType),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(2),I.pc("ngIf",t.viewDay),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total.lift_on),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total.lift_off),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total.days),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(71,82,t.total.storage,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(74,85,t.total.price_lift_on,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(77,88,t.total.price_lift_off,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(I.mc(80,91,t.total.total,"1.2-2")),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.storagePrice.currency))},directives:[P.A,P.q,P.h,ve.e,ye.a,B.d,T.s,B.c,T.t,b.a,ve.d,T.q,me.a,i.j,T.w,me.c],pipes:[T.g,T.f],styles:["soa-agent-storage-table .no-shipments-text{font-size:24px;font-weight:300}soa-agent-storage-table cdk-virtual-scroll-viewport{width:100%}soa-agent-storage-table .mat-expansion-panel-body{padding:0!important}soa-agent-storage-table .shipment-storage{font-size:12px}soa-agent-storage-table .shipment-storage td,soa-agent-storage-table .shipment-storage th{padding:8px!important;white-space:nowrap}soa-agent-storage-table .shipment-storage thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}soa-agent-storage-table .shipment-storage thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}soa-agent-storage-table .shipment-storage tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-storage-table .shipment-storage .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}soa-agent-storage-table .shipment-storage .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}soa-agent-storage-table .shipment-storage .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}soa-agent-storage-table .shipment-storage .sticky-right-col{min-width:46px;position:sticky;position:-webkit-sticky;right:0;background-color:#b3e5fc}soa-agent-storage-table .shipment-storage .sticky-right-col2{min-width:52px;position:sticky;position:-webkit-sticky;right:46px;background-color:#b3e5fc}soa-agent-storage-table .shipment-storage .sticky-right-col3{min-width:52px;position:sticky;position:-webkit-sticky;right:98px;background-color:#b3e5fc}soa-agent-storage-table .shipment-storage .border-vessel td{border-bottom:1px solid #000!important}soa-agent-storage-table .shipment-storage .row-even{background-color:#e0e0e0!important}soa-agent-storage-table .shipment-storage .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}soa-agent-storage-table .shipment-storage .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2}),e})();var Fe=n("fE3o");const Re=["formDirective"];function Ee(e,t){if(1&e&&(I.Xb(0,"mat-option",33),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.full_name," ")}}function Je(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",34),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return n.openPriceModal.emit(n.form.value.place)})),I.Xb(1,"mat-icon",35),I.Lc(2,"save"),I.Wb(),I.Wb()}2&e&&I.pc("matTooltip","Place storage price")}function Be(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," place is required "),I.Wb())}function $e(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," type is required "),I.Wb())}function qe(e,t){if(1&e&&(I.Xb(0,"mat-option",20),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Mc(e)}}const ze=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};let Ue=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.commonService=t,this.datePipe=n,this.fitlerMovement=new I.o,this.openPriceModal=new I.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({place:[null,P.y.required],type:[0,P.y.required],month:[null],year:[this.year],date_from:[null,P.y.required],date_to:[null,P.y.required],button:[null]}),this.checkPlace=!1}ngOnInit(){this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.filteredPlace=this.form.controls.place.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.supplier_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"supplier_name",this.place):[])),this.form.controls.place.valueChanges.subscribe(e=>{e&&(this.checkPlace=isNaN(this.form.value.place))}),this.form.controls.button.valueChanges.subscribe(e=>{e&&this.getMonthTime(e)})}getMonthTime(e){let t,n,i=this.form.controls.year.value,o=this.form.controls.month.value,r=new Date,a=r.getMonth(),c=r.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,a,1),n=new Date(c,a+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):i&&(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}clearForm(){this.searchNgForm.resetForm()}onSearchFormSubmit(e){if(e.valid){let t=JSON.parse(JSON.stringify(e.value));t.date_from=this.datePipe.transform(t.date_from,"yyyy-MM-dd"),t.date_to=this.datePipe.transform(t.date_to,"yyyy-MM-dd"),this.fitlerMovement.emit(t)}}setData(e){this.form.patchValue(e),this.form.controls.type.setValue(0),this.form.controls.year.setValue(this.year)}setMonth(e){this.form.controls.month.setValue(parseInt(e.month)+1),this.form.controls.year.setValue(e.year),this.getMonthTime("M")}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(P.d),I.Rb(J.a),I.Rb(T.f))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-storage-sidebar"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Re,!0),2&e&&I.wc(n=I.gc())&&(t.searchNgForm=n.first)},inputs:{place:"place",height:"height",formSearch:"formSearch"},outputs:{fitlerMovement:"fitlerMovement",openPriceModal:"openPriceModal"},decls:82,vars:32,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","place","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPlace","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["fxFlex","100",1,"info-line"],["formControlName","type","required",""],[3,"value"],["inputCheck","","matInput","","name","date_from","formControlName","date_from","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to","required","",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","year",3,"selectionChange"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","button"],["value","TM",1,"mb-12"],["value","TY",1,"mb-12"],[2,"font-size","12px","overflow","visible","display","block",3,"value"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"matTooltip","click"],["color","accent"]],template:function(e,t){if(1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form)})),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.Lc(5," Submit "),I.Wb(),I.Xb(6,"button",5),I.fc("click",(function(e){return t.clearForm()})),I.Lc(7," Clear "),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",6),I.Xb(9,"div",7),I.Xb(10,"div",8),I.Xb(11,"div",9),I.Xb(12,"div",10),I.Xb(13,"mat-form-field",11),I.Xb(14,"mat-label"),I.Lc(15,"Place"),I.Wb(),I.Sb(16,"input",12),I.Xb(17,"mat-autocomplete",13,14),I.Jc(19,Ee,2,2,"mat-option",15),I.kc(20,"async"),I.Wb(),I.Jc(21,Je,3,1,"button",16),I.Jc(22,Be,2,0,"mat-error",17),I.Wb(),I.Wb(),I.Xb(23,"div",18),I.Xb(24,"mat-form-field",11),I.Xb(25,"mat-label"),I.Lc(26,"Cont Type"),I.Wb(),I.Xb(27,"mat-select",19),I.Xb(28,"mat-option",20),I.Lc(29,"All"),I.Wb(),I.Xb(30,"mat-option",20),I.Lc(31,"20DC"),I.Wb(),I.Xb(32,"mat-option",20),I.Lc(33,"40HC"),I.Wb(),I.Wb(),I.Jc(34,$e,2,0,"mat-error",17),I.Wb(),I.Wb(),I.Xb(35,"div",18),I.Xb(36,"mat-form-field",11),I.Xb(37,"mat-label"),I.Lc(38,"Date from"),I.Wb(),I.Xb(39,"input",21),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(40,"mat-datepicker-toggle",22),I.Sb(41,"mat-datepicker",null,23),I.Wb(),I.Wb(),I.Xb(43,"div",18),I.Xb(44,"mat-form-field",11),I.Xb(45,"mat-label"),I.Lc(46,"Date to"),I.Wb(),I.Xb(47,"input",24),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(48,"mat-datepicker-toggle",22),I.Sb(49,"mat-datepicker",null,25),I.Wb(),I.Wb(),I.Xb(51,"div",18),I.Xb(52,"mat-form-field",11),I.Xb(53,"mat-label"),I.Lc(54,"Month"),I.Wb(),I.Xb(55,"mat-select",26),I.fc("selectionChange",(function(e){return t.getMonthTime("M")})),I.Jc(56,qe,2,2,"mat-option",27),I.Wb(),I.Wb(),I.Wb(),I.Xb(57,"div",18),I.Xb(58,"mat-form-field",11),I.Xb(59,"mat-label"),I.Lc(60,"Year"),I.Wb(),I.Xb(61,"mat-select",28),I.fc("selectionChange",(function(e){return t.getMonthTime("Y")})),I.Xb(62,"mat-option",20),I.Lc(63),I.Wb(),I.Xb(64,"mat-option",20),I.Lc(65),I.Wb(),I.Xb(66,"mat-option",20),I.Lc(67),I.Wb(),I.Xb(68,"mat-option",20),I.Lc(69),I.Wb(),I.Xb(70,"mat-option",20),I.Lc(71),I.Wb(),I.Xb(72,"mat-option",20),I.Lc(73),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(74,"div",29),I.Xb(75,"h2"),I.Lc(76,"Time option"),I.Wb(),I.Xb(77,"mat-radio-group",30),I.Xb(78,"mat-radio-button",31),I.Lc(79,"This month"),I.Wb(),I.Xb(80,"mat-radio-button",32),I.Lc(81,"This year"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.xc(18),n=I.xc(42),i=I.xc(50);I.pc("formGroup",t.form),I.Db(8),I.Ic("height",t.height,"px"),I.Db(8),I.pc("matAutocomplete",e),I.Db(1),I.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.place)),I.Db(2),I.pc("ngForOf",I.lc(20,29,t.filteredPlace)),I.Db(2),I.pc("ngIf",t.checkPlace),I.Db(1),I.pc("ngIf",t.form.get("place").hasError("required")),I.Db(6),I.pc("value",0),I.Db(2),I.pc("value",1),I.Db(2),I.pc("value",2),I.Db(2),I.pc("ngIf",t.form.get("type").hasError("required")),I.Db(5),I.pc("matDatepicker",n),I.Db(1),I.pc("for",n),I.Db(7),I.pc("matDatepicker",i),I.Db(1),I.pc("for",i),I.Db(8),I.pc("ngForOf",I.qc(31,ze)),I.Db(6),I.pc("value",t.year-4),I.Db(1),I.Mc(t.year-4),I.Db(1),I.pc("value",t.year-3),I.Db(1),I.Mc(t.year-3),I.Db(1),I.pc("value",t.year-2),I.Db(1),I.Mc(t.year-2),I.Db(1),I.pc("value",t.year-1),I.Db(1),I.Mc(t.year-1),I.Db(1),I.pc("value",t.year),I.Db(1),I.Mc(t.year),I.Db(1),I.pc("value",t.year+1),I.Db(1),I.Mc(t.year+1)}},directives:[P.A,P.q,P.h,B.d,B.c,c.b,B.b,$.a,l.c,l.f,u.b,P.b,r.c,P.p,P.g,P.w,r.a,T.s,T.t,d.a,X.n,a.b,a.d,l.h,a.a,h.b,h.a,p.a,b.a,l.b],pipes:[T.b],styles:["soa-agent-storage-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}soa-agent-storage-sidebar .navbar-scroll-container{background:#fff!important}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content{padding-top:0}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}soa-agent-storage-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function Ye(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",6),I.Xb(1,"div",7),I.Xb(2,"soa-agent-storage-sidebar",8),I.fc("fitlerMovement",(function(t){return I.Bc(e),I.jc().fitlerMovement(t)}))("openPriceModal",(function(t){return I.Bc(e),I.jc().openPriceModal(t)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(2),I.pc("place",e.place)("height",e.height)("formSearch",e.formSearch)}}let He=(()=>{class e{constructor(e,t,n,i,o,r,a,c){this._fuseSidebarService=e,this.authService=t,this.soaAgentService=n,this.containerEmptyService=i,this.containerPriceService=o,this.commonService=r,this._matDialog=a,this.datePipe=c,this.sidebarPanel=!0,this.invoice=[],this.height=560,this.fullScreen=!1,this.moveList=[],this.viewDay=!1,this.containerStoragePrice=[],this.storagePrice={},this.total={},this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.containerPriceService.readDatabaseContainerStoragePrice().subscribe(e=>{this.containerStoragePrice=e.slice();let t=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch;if(t.place){let e=this.containerStoragePrice.find(e=>e.id==t.place),n={};e&&e.price.map(e=>{n[e.price.code]=e.amount,n.currency=e.currency.code}),this.storagePrice=this.containerEmptyService.storagePrice=n}})}ngOnInit(){this.authService.urlChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.modul=this.authService.modul}),this.searchText=this.soaAgentService.searchText,this.searchText&&this.searchFilter(this.searchText),this.formSearch=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-12-12-56}),this.authService.changeScreen.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-12-12-56:this.authService.screenHeight-64-12-12-56}),this.soaAgentService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.soaAgentService.dataCustomer,this.supplier=this.soaAgentService.dataSupplier,this.users=this.soaAgentService.users}),this.containerEmptyService.onOverviewChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.moveList=e,this.moveList.map(e=>{e.storage_info=this.datePipe.transform(e.date_from,"M/d/yy")+" - "+this.datePipe.transform(e.date_to,"M/d/yy")}),this.days=this.containerEmptyService.days,this.arrContType=this.containerEmptyService.arrContType,this.total=this.containerEmptyService.total}),this.containerEmptyService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.place=this.containerEmptyService.place,this.port=this.containerEmptyService.port}),this.containerPriceService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.price=this.containerPriceService.price,this.currency=this.containerPriceService.currency,this.country=this.containerPriceService.country})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.containerEmptyService)}searchFilter(e){this.containerEmptyService.onSearchTextChanged.next(e)}fitlerMovement(e){let t=this.containerStoragePrice.find(t=>t.id==e.place),n={};t&&t.price.map(e=>{n[e.price.code]=e.amount,n.currency=e.currency.code}),this.storagePrice=this.containerEmptyService.storagePrice=n,this.authService.onRequestChanged.next(!0),this.containerEmptyService.getMoveReportEmptyData(e).then(t=>{this.soaAgentService.currenSearch.formSearch.date_from=e.date_from,this.soaAgentService.currenSearch.formSearch.date_to=e.date_to,this.soaAgentService.currenSearch.formSearch.place=e.place,this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("error load movement")})}openPriceModal(e){let t=this.place.find(t=>t.id==e);if(t){let n=this.containerStoragePrice.find(t=>t.id==e);this.dialogRef=this._matDialog.open(Z,{panelClass:"soa-agent-storage-modal-dialog",data:{label:"Add/Remove price: "+t.full_name,data:n,price:this.price,currency:this.currency,place:e,name:t.full_name}}),this.dialogRef.afterClosed().subscribe(t=>{t&&(n?this.containerPriceService.writeDatabaseContainerStoragePrice(e.toString(),t):this.containerPriceService.updateDatabaseContainerStoragePriceById(e.toString(),t))})}}exportExcel(e){if(this.moveList.length>0){let e=[];this.moveList.map((t,n)=>{let i=[n+1,t.container_info.cont_number,t.container_info.cont_type_code,t.place_info.short_name,t.move_code,this.datePipe.transform(t.date,"MM/dd/yyyy"),this.datePipe.transform(t.date_from,"MM/dd/yyyy"),t.nextMove.move_code,this.datePipe.transform(t.date_to,"MM/dd/yyyy"),(t.time_to-t.time_from)/864e5+1,(this.storagePrice["LB"+t.container_info.type]?this.storagePrice["LB"+t.container_info.type]:0)*((t.time_to-t.time_from)/864e5+1),t.lift_on?this.storagePrice["LON"+t.container_info.type]:null,t.lift_off?this.storagePrice["LF"+t.container_info.type]:null,(this.storagePrice["LB"+t.container_info.type]?this.storagePrice["LB"+t.container_info.type]:0)*((t.time_to-t.time_from)/864e5+1)+(t.lift_on?this.storagePrice["LON"+t.container_info.type]:0)+(t.lift_off?this.storagePrice["LF"+t.container_info.type]:0),this.storagePrice.currency];e.push(i)}),this.containerEmptyService.exportExcel(e,this.total)}}filterChange(e){}createItem(e){let t=e[1],n=JSON.parse(JSON.stringify(e[0])),i=e[2];"Revenue"==t&&(this.partner=this.customer),"Cost"==t&&(this.partner=this.supplier,n.agent=this.soaAgentService.currenSearch.formSearch.agent);let o=this.partner.find(e=>e.id==(n.agent?n.agent:n.place)),r=this.currency.find(e=>e.country_id==o.country);n.move_type=n.move_code;let a,c,s,l,b=[{last_move:n,move:[n]}];switch(i){case"LF":a=n.container_info.cont_type_code.includes("20")?9:116,c=1,s=this.storagePrice[i+n.container_info.type],l=null;break;case"LON":c=1,s=this.storagePrice[i+n.container_info.type],a=n.container_info.cont_type_code.includes("20")?13:117,l=null;break;default:a=n.container_info.cont_type_code.includes("20")?89:114,c=Math.round((n.time_to-n.time_from)/864e5+1),s=this.storagePrice["LB"+n.container_info.type],l=this.datePipe.transform(n.date_from,"M/d/yy")+" - "+this.datePipe.transform(n.date_to,"M/d/yy")}this.dialogRef=this._matDialog.open(ee.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+t,shipmentId:n.shipment_id,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n,container:b,data:{id:null,shipment:n.shipment_id,price:a,volume:c,amount:s,tax:0,tax_amount:0,currency:r.id,ex_rate:r.exrate,payment_center:o.country,partner:o.id,move:n.sel_move_id,debit:null,inv_number:null,issue_date:null,bank_ref:null,pay_date:null,info:l,update_by:this.authService.user,create_by:this.authService.user}}}),this.dialogRef.componentInstance.createItem.subscribe(e=>{switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":this.soaAgentService.createSelRevenue(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error create "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+t});break;case"Cost":this.soaAgentService.createSelCost(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error create "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+t})}}),this.dialogRef.afterClosed().subscribe(e=>{e&&(this.authService.onRequestChanged.next(!0),this.containerEmptyService.getMoveReportEmptyData(this.soaAgentService.currenSearch.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}))})}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(te.a),I.Rb(E.a),I.Rb(ce),I.Rb(se),I.Rb(be),I.Rb(J.a),I.Rb(f.b),I.Rb(T.f))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-storage"]],decls:6,vars:10,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","empty-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"modul","arrContType","moveList","days","storagePrice","total","height","exportExcel","filterChange","createItem"],["name","empty-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"place","height","formSearch","fitlerMovement","openPriceModal"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,Ye,3,3,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"soa-agent-storage-table",5),I.fc("exportExcel",(function(e){return t.exportExcel(e)}))("filterChange",(function(e){return t.filterChange(e)}))("createItem",(function(e){return t.createItem(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-storage-sidebar"),I.Db(2),I.pc("modul",t.modul)("arrContType",t.arrContType)("moveList",t.moveList)("days",t.days)("storagePrice",t.storagePrice)("total",t.total)("height",t.height))},directives:[pe.a,T.t,$.a,ge,Pe,Fe.a,Ue],styles:["soa-agent-storage{width:100%}"],encapsulation:2}),e})();const Ge=["formDirective"];function Qe(e,t){if(1&e&&(I.Xb(0,"mat-option",27),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.e_name),I.Db(1),I.Nc(" ",e.e_name," ")}}let Ke=(()=>{class e{constructor(e,t,n,i,o,r){this.router=e,this.matDialogRef=t,this._data=n,this.authService=i,this.commonService=o,this._formBuilder=r,this.errorMessage="",this.formRelease=this._formBuilder.group({id:[null],container:[null,P.y.required],mt_return:[null],free_day:[0,P.y.required],dem:[0,P.y.required],det:[0,P.y.required],info:[null],update_by:[this.authService.user,P.y.required]}),this.name=this.authService.name,this.label=n.label,this.data=n.data,this.depot=n.depot,this.data.release_id?this.formRelease.patchValue({id:this.data.release_id,container:this.data.container_id,mt_return:this.data.mt_return,free_day:this.data.free_day,dem:this.data.dem,det:this.data.det,info:this.data.release_info,update_by:this.authService.user}):(this.formRelease.controls.id.disable(),this.formRelease.controls.container.setValue(this.data.container_id))}ngOnInit(){this.filteredDepot=this.formRelease.controls.mt_return.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.e_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"e_name",this.depot):[])),this.formRelease.valueChanges.subscribe(e=>{this.errorMessage=""})}onReleaseFormSubmit(e){e.valid&&this.matDialogRef.close(e.value)}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(i.g),I.Rb(f.f),I.Rb(f.a),I.Rb(E.a),I.Rb(J.a),I.Rb(P.d))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-dem-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Ge,!0),2&e&&I.wc(n=I.gc())&&(t.vesselNgForm=n.first)},decls:52,vars:8,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-details-bill-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","container","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","25",1,"pr-8"],["inputCheck","","type","text","matInput","","formControlName","mt_return",3,"matAutocomplete"],["autoDepot","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","number","matInput","","formControlName","free_day","required",""],["inputCheck","","type","number","matInput","","formControlName","dem","required",""],["inputCheck","","type","number","matInput","","formControlName","det","required",""],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","info"],["inputCheck","","matInput","","readonly","true",3,"value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(I.Xb(0,"div",0),I.Xb(1,"mat-toolbar",1),I.Xb(2,"mat-toolbar-row",2),I.Xb(3,"span",3),I.Lc(4),I.Wb(),I.Xb(5,"button",4),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Xb(6,"mat-icon"),I.Lc(7,"close"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",5),I.Xb(9,"div"),I.Xb(10,"form",6),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onReleaseFormSubmit(t.formRelease)})),I.Xb(11,"div",7),I.Sb(12,"input",8),I.Sb(13,"input",9),I.Wb(),I.Xb(14,"div",10),I.Xb(15,"mat-form-field",11),I.Xb(16,"mat-label"),I.Lc(17,"MT return"),I.Wb(),I.Sb(18,"input",12),I.Xb(19,"mat-autocomplete",null,13),I.Jc(21,Qe,2,2,"mat-option",14),I.kc(22,"async"),I.Wb(),I.Wb(),I.Xb(23,"mat-form-field",11),I.Xb(24,"mat-label"),I.Lc(25,"Free day"),I.Wb(),I.Sb(26,"input",15),I.Wb(),I.Xb(27,"mat-form-field",11),I.Xb(28,"mat-label"),I.Lc(29,"DEM"),I.Wb(),I.Sb(30,"input",16),I.Wb(),I.Xb(31,"mat-form-field",11),I.Xb(32,"mat-label"),I.Lc(33,"DET"),I.Wb(),I.Sb(34,"input",17),I.Wb(),I.Xb(35,"mat-form-field",18),I.Xb(36,"mat-label"),I.Lc(37,"Info"),I.Wb(),I.Sb(38,"input",19),I.Wb(),I.Xb(39,"mat-form-field",18),I.Xb(40,"mat-label"),I.Lc(41,"Update by"),I.Wb(),I.Sb(42,"input",20),I.Sb(43,"input",21),I.Wb(),I.Wb(),I.Xb(44,"div",22),I.Xb(45,"div",23),I.Lc(46),I.Wb(),I.Wb(),I.Xb(47,"div",24),I.Xb(48,"button",25),I.Lc(49,"Submit"),I.Wb(),I.Xb(50,"button",26),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Lc(51,"Cancel"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.xc(20);I.Db(4),I.Mc(t.label),I.Db(6),I.pc("formGroup",t.formRelease),I.Db(8),I.pc("matAutocomplete",e),I.Db(3),I.pc("ngForOf",I.lc(22,6,t.filteredDepot)),I.Db(21),I.pc("value",t.name),I.Db(4),I.Mc(t.errorMessage)}},directives:[g.a,g.c,B.b,B.d,B.c,c.b,b.a,f.d,$.a,P.A,P.q,P.h,P.b,P.p,P.g,P.w,l.c,l.f,u.b,r.c,r.a,T.s,P.u,X.n],pipes:[T.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.soa-agent-dem-modal-dialog{width:100%}}@media screen and (min-width:960px){.soa-agent-dem-modal-dialog{width:1080px}}.soa-agent-dem-modal-dialog .mat-dialog-container{padding:0}.soa-agent-dem-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.soa-agent-dem-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.soa-agent-dem-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})(),Ze=(()=>{class e{constructor(e,t,n,i){this._httpClient=e,this.authService=t,this.datePipe=n,this.commonService=i,this.emptyContainer=[],this.total=0,this.onDataChanged=new ne.a([]),this.onEmptyChanged=new ne.a([]),this.onFilterChanged=new j.a,this.onSearchTextChanged=new j.a}resolve(e){return this.modul=e.params.modul,e&&(this.authService.routerData=e),new Promise((e,t)=>{Promise.all([this.getData()]).then(([t])=>{this.onFilterChanged.subscribe(e=>{this.filterBy=e,this.getFilterShipment()}),this.onSearchTextChanged.subscribe(e=>{this.searchText=e,this.getFilterShipment()}),e()},t)})}getData(){let e={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/data",e).subscribe(e=>{this.customer=e[0],this.supplier=e[1],this.seaport=e[2],this.user=e[3],this.onDataChanged.next(e),t(e)},n)})}getShipments(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/shipment/soa-agent-dem2",e,t).subscribe(e=>{this.shipments=e[0],this.arrType=e[1],this.objSptVol=e[2],this.objVessel=e[3],this.buildReport(),n(e)},i)})}getFilterShipment(){let e=JSON.parse(JSON.stringify(this.emptyContainer));e.length>0&&this.filterBy&&(this.filterBy.container&&(e=this.commonService.filterText(e,this.filterBy.container,"cont_number")),this.filterBy.type&&(e=this.commonService.filterText(e,this.filterBy.type,"cont_type_code")),this.filterBy.voyage&&(e=this.commonService.filterText(e,this.filterBy.voyage,"vessel_full_name")),this.filterBy.code&&(e=this.commonService.filterText(e,this.filterBy.code,"shipment_code")),this.filterBy.bill&&(e=this.commonService.filterText(e,this.filterBy.bill,"bill")),"all"!=this.filterBy.sgd&&(1==this.filterBy.sgd&&(e=e.filter(e=>e.currency>0)),0==this.filterBy.sgd&&(e=e.filter(e=>0==e.currency)))),this.searchText&&""!==this.searchText&&(e=ie.a.filterArrayByString(e,this.searchText)),this.total=0,this.arrType=[],e.map(e=>{e.currency=this.getChargeDet(e),this.total+=e.currency,this.arrType.includes(e.cont_type_code)||this.arrType.push(e.cont_type_code)}),this.filterShipment=e,this.onEmptyChanged.next(e)}buildReport(){this.containerMove={},this.shipments.map(e=>{this.containerMove[e.container]||(this.containerMove[e.container]=[]),this.containerMove[e.container].push(e)});let e=[],t=[],n={};this.shipments.filter(e=>12==e.pod).map(e=>{t.includes(e.shipment_id+"-"+e.container)||(t.push(e.shipment_id+"-"+e.container),n[e.shipment_id+"-"+e.container]={container:e.container,cont_number:e.cont_number,cont_type_code:e.cont_type_code,off_hire:e.off_hire,vessel_full_name:e.vessel_full_name,pol:e.pol,pol_name:e.pol_name,pod:e.pod,pod_name:e.pod_name,depart_time:e.depart_time,arrive_time:e.arrive_time,shipment:e.shipment_id,shipment_code:e.shipment_code,bill:e.bill,customer:e.customer,customer_short_name:e.customer_short_name,customer_full_name:e.customer_full_name,move:{},container_info:e.container_info}),n[e.shipment_id+"-"+e.container].move[e.move_code]={id:e.id,date:e.date,time:e.time,move_code:e.move_code,place:e.place,place_short_name:e.place_short_name,place_full_name:e.place_name,country_name:e.country_name}}),t.map(t=>{n[t].currency=this.getChargeDet(n[t]),e.push(n[t])}),e=e.filter(e=>e.move.EMPTY),e.sort((e,t)=>e.move.EMPTY.date<t.move.EMPTY.date?1:t.move.EMPTY.date<e.move.EMPTY.date?-1:0),this.total=0;let i=["TREXP","FULEX","LOAD","FULIM","TRIMP","EMPTY"];e.map(e=>{this.total+=e.currency;let t=this.containerMove[e.container],n=t.findIndex(t=>t.id===e.move.EMPTY.id);i.map((i,o)=>{e.move[i+"_EXP"]=null,t[n+o+1]&&(e.move[i+"_EXP"]=t[n+o+1])})}),this.emptyContainer=e,this.getFilterShipment()}getChargeDet(e){let t=0;if(e.move.EMPTY&&e.move.FULIM){let n=e.cont_type_code.substring(0,2),i=(e.move.EMPTY.time-e.move.FULIM.time)/864e5,o=e.container_info&&e.container_info.free_day?e.container_info.free_day:7,r=1,a={20:{muc1:20,muc2:40},40:{muc1:40,muc2:80}};for(;r<=i;){if(r>o){let e="muc1";r>11&&(e="muc2"),t+=a[n][e]}r++}}return t}exportExcel(e,t){let n=new re.Workbook,i=n.addWorksheet("vessel");i.addRow([" "]),i.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},i.addRow(["EXPORT CONTAINER "+this.datePipe.transform(new Date,"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),i.getRow(2).font={size:18,bold:!0,italic:!1},i.addRow([]);let o=["NO","CONTAINER","TYPE","VESSEL & VOYAGE","BILL","CUSTOMER"];this.arrType.map(e=>{o.push(e)}),o.push("FULLIM"),o.push("COD"),o.push("TRIMP"),o.push("EMPTY"),o.push("DET"),o.push("F DAY"),o.push("C DET"),o.push("SGD"),o.push("REMARK"),i.addRow(o).eachCell((e,t)=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),e.map(e=>{let t=i.addRow(e),n=e.length;for(let i=1;i<=n;i++)t.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(i).font={size:8,bold:!1},t.getCell(i).alignment={vertical:"middle",horizontal:"center",wrapText:!0}});let r=[];o.map(e=>{r.push(null)}),r[1]="TOTAL",r[r.length-2]=t;let a=i.addRow(r);o.map((e,t)=>{a.getCell(t+1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(t+1).font={size:10,bold:!0}}),i.getColumn(1).width=4.25,i.getColumn(2).width=14,i.getColumn(3).width=8,i.getColumn(4).width=20,i.getColumn(5).width=16,i.getColumn(6).width=20,this.arrType.map((e,t)=>{i.getColumn(7+t).width=6}),i.getColumn(7+this.arrType.length).width=12,i.getColumn(7+this.arrType.length+1).width=12,i.getColumn(7+this.arrType.length+2).width=12,i.getColumn(7+this.arrType.length+3).width=12,i.getColumn(7+this.arrType.length+4).width=8,i.getColumn(7+this.arrType.length+5).width=8,i.getColumn(7+this.arrType.length+6).width=8,i.getColumn(7+this.arrType.length+7).width=12,i.getColumn(7+this.arrType.length+8).width=12,n.xlsx.writeBuffer().then(e=>{let t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(ae.saveAs)(t,"container_"+this.modul+this.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")})}getDepotByPortId(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel-book/depot/"+e,t).subscribe(e=>{this.depot=e,n(e)},i)})}createContainerRelease(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/container-release",e,t).subscribe(e=>{n(e)},i)})}updateContainerRelease(e){let t={headers:new oe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/container-release",e,t).subscribe(e=>{n(e)},i)})}}return e.\u0275fac=function(t){return new(t||e)(I.bc(oe.a),I.bc(E.a),I.bc(T.f),I.bc(J.a))},e.\u0275prov=I.Nb({token:e,factory:e.\u0275fac}),e})();var et=n("PVWW");const tt=["formDirective"];function nt(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",48),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return t.stopPropagation(),n.vesselOpen=!n.vesselOpen})),I.Lc(1,"add"),I.Wb()}}function it(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",49),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return t.stopPropagation(),n.vesselOpen=!n.vesselOpen})),I.Lc(1,"removed"),I.Wb()}}function ot(e,t){if(1&e&&(I.Xb(0,"th",50),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("top",n.inverseOfTranslation),I.Db(1),I.Nc("Vessel ",e,"")}}function rt(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ot,2,3,"th",12),I.Ub()),2&e){const e=I.jc();I.Db(1),I.pc("ngForOf",e.arrType)}}function at(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"POL"),I.Wb()),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation)}}function ct(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"POD"),I.Wb()),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation)}}function st(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"ETD"),I.Wb()),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation)}}function lt(e,t){if(1&e&&(I.Xb(0,"th",4),I.Lc(1,"ETA"),I.Wb()),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation)}}function bt(e,t){if(1&e&&(I.Xb(0,"th",50),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc();I.Ic("top",n.inverseOfTranslation),I.Db(1),I.Nc("Spt ",e,"")}}function pt(e,t){if(1&e&&I.Sb(0,"th",51),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation2)}}function ut(e,t){if(1&e&&(I.Vb(0),I.Jc(1,pt,1,2,"th",30),I.Ub()),2&e){const e=I.jc();I.Db(1),I.pc("ngForOf",e.arrType)}}function mt(e,t){if(1&e&&I.Sb(0,"th",24),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation2)}}function dt(e,t){if(1&e&&I.Sb(0,"th",24),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation2)}}function ht(e,t){if(1&e&&I.Sb(0,"th",24),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation2)}}function ft(e,t){if(1&e&&I.Sb(0,"th",24),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation2)}}function gt(e,t){if(1&e&&I.Sb(0,"th",51),2&e){const e=I.jc();I.Ic("top",e.inverseOfTranslation2)}}function vt(e,t){if(1&e&&(I.Xb(0,"td",60),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc();I.Db(1),I.Mc(i.objVessel[n.vessel_full_name]?i.objVessel[n.vessel_full_name][e]:"")}}function yt(e,t){if(1&e&&(I.Vb(0),I.Jc(1,vt,2,1,"td",55),I.Ub()),2&e){const e=I.jc(2);I.Db(1),I.pc("ngForOf",e.arrType)}}function xt(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){const e=I.jc().$implicit;I.Db(1),I.Mc(e.pol_name)}}function St(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.Wb()),2&e){const e=I.jc().$implicit;I.Db(1),I.Mc(e.pod_name)}}function Dt(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.kc(2,"date"),I.Wb()),2&e){const e=I.jc().$implicit;I.Db(1),I.Mc(I.mc(2,1,e.depart_time,"MM/dd/yyyy HH:mm"))}}function _t(e,t){if(1&e&&(I.Xb(0,"td"),I.Lc(1),I.kc(2,"date"),I.Wb()),2&e){const e=I.jc().$implicit;I.Db(1),I.Mc(I.mc(2,1,e.arrive_time,"MM/dd/yyyy HH:mm"))}}function Xt(e,t){if(1&e&&(I.Xb(0,"td",60),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc().$implicit,i=I.jc();I.Db(1),I.Mc(i.objSptVol[n.shipment]?i.objSptVol[n.shipment][e]:"")}}function Wt(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",48),I.fc("click",(function(t){I.Bc(e);const n=I.jc(),i=n.$implicit,o=n.index;return I.jc().openModal.emit([i,o])})),I.Lc(1,"edit"),I.Wb()}}const wt=function(e){return{"grey-100-bg":e}};function Lt(e,t){if(1&e&&(I.Xb(0,"tr",52),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",39),I.Xb(4,"a",53),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",54),I.Lc(7),I.Wb(),I.Xb(8,"td",41),I.Lc(9),I.Wb(),I.Jc(10,yt,2,1,"ng-container",10),I.Jc(11,xt,2,1,"td",10),I.Jc(12,St,2,1,"td",10),I.Jc(13,Dt,3,4,"td",10),I.Jc(14,_t,3,4,"td",10),I.Xb(15,"td"),I.Xb(16,"a",53),I.Lc(17),I.Wb(),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Jc(20,Xt,2,1,"td",55),I.Xb(21,"td",56),I.Lc(22),I.Wb(),I.Xb(23,"td"),I.Lc(24),I.Wb(),I.Xb(25,"td"),I.Lc(26),I.Wb(),I.Xb(27,"td",44),I.Lc(28),I.kc(29,"date"),I.Wb(),I.Xb(30,"td",44),I.Lc(31),I.kc(32,"date"),I.Wb(),I.Xb(33,"td",44),I.Lc(34),I.kc(35,"date"),I.Wb(),I.Xb(36,"td",44),I.Lc(37),I.kc(38,"date"),I.Wb(),I.Xb(39,"td",44),I.Lc(40),I.kc(41,"date"),I.Wb(),I.Xb(42,"td",45),I.Lc(43),I.Wb(),I.Xb(44,"td"),I.Lc(45),I.Wb(),I.Xb(46,"td",45),I.Lc(47),I.Wb(),I.Xb(48,"td",57),I.Lc(49),I.Wb(),I.Xb(50,"td",58),I.Jc(51,Wt,2,0,"mat-icon",59),I.Wb(),I.Wb()),2&e){const e=t.$implicit,n=t.index,i=I.jc();I.pc("ngClass",I.rc(44,wt,n%2==0)),I.Db(2),I.Mc(n+1),I.Db(2),I.pc("routerLink","/apps/container/details/"+e.container),I.Db(1),I.Mc(e.cont_number),I.Db(2),I.Mc(e.cont_type_code),I.Db(2),I.Mc(e.vessel_full_name),I.Db(1),I.pc("ngIf",i.vesselOpen),I.Db(1),I.pc("ngIf",i.vesselOpen),I.Db(1),I.pc("ngIf",i.vesselOpen),I.Db(1),I.pc("ngIf",i.vesselOpen),I.Db(1),I.pc("ngIf",i.vesselOpen),I.Db(2),I.pc("routerLink","/apps/"+i.modul+"/shipment/detail/"+e.shipment+"/overview"),I.Db(1),I.Mc(e.shipment_code),I.Db(2),I.Mc(e.bill),I.Db(1),I.pc("ngForOf",i.arrType),I.Db(1),I.pc("matTooltip",e.customer_full_name),I.Db(1),I.Mc(e.customer_short_name),I.Db(2),I.Mc(null==e.container_info?null:e.container_info.mt_return),I.Db(2),I.Mc(null==e.container_info?null:e.container_info.release_info),I.Db(2),I.Mc(I.mc(29,29,null==e.move.FULIM?null:e.move.FULIM.date,"MM/dd/yy")),I.Db(3),I.Mc(e.move.FULIM?I.mc(32,32,e.move.FULIM.date+864e5,"MM/dd/yy"):""),I.Db(3),I.Mc(I.mc(35,35,null==e.move.TRIMP?null:e.move.TRIMP.date,"MM/dd/yy")),I.Db(3),I.Mc(I.mc(38,38,null==e.move.EMPTY?null:e.move.EMPTY.date,"MM/dd/yy")),I.Db(3),I.Mc(e.off_hire?I.mc(41,41,e.off_hire,"MM/dd/yy"):""),I.Db(3),I.Mc(e.move.FULIM&&e.move.EMPTY?(e.move.EMPTY.time-e.move.FULIM.time)/864e5:""),I.Db(2),I.Mc(e.container_info.free_day?e.container_info.free_day:7),I.Db(2),I.Mc(e.move.FULIM&&e.move.EMPTY&&e.container_info&&(e.move.EMPTY.time-e.move.FULIM.time)/864e5>(e.container_info.free_day?e.container_info.free_day:7)?(e.move.EMPTY.time-e.move.FULIM.time)/864e5-(e.container_info.free_day?e.container_info.free_day:7):""),I.Db(2),I.Mc(e.move.FULIM&&e.move.EMPTY&&e.container_info&&(e.move.EMPTY.time-e.move.FULIM.time)/864e5>(e.container_info.free_day?e.container_info.free_day:7)?e.currency:""),I.Db(2),I.pc("ngIf",e.container_info)}}function Nt(e,t){if(1&e&&I.Sb(0,"td",60),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation3)}}function kt(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Nt,1,2,"td",43),I.Ub()),2&e){const e=I.jc();I.Db(1),I.pc("ngForOf",e.arrType)}}function Ct(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc();I.Ic("bottom",e.inverseOfTranslation3)}}function Ot(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc();I.Ic("bottom",e.inverseOfTranslation3)}}function It(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc();I.Ic("bottom",e.inverseOfTranslation3)}}function Tt(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc();I.Ic("bottom",e.inverseOfTranslation3)}}function Mt(e,t){if(1&e&&I.Sb(0,"td",60),2&e){const e=I.jc();I.Ic("bottom",e.inverseOfTranslation3)}}let At=(()=>{class e{constructor(e,t,n,i,o,r){this.router=e,this.route=t,this._activatedRoute=n,this.authService=i,this.formBuilder=o,this.datePipe=r,this.exportExcel=new I.o,this.openModal=new I.o,this.filterChange=new I.o,this.vesselOpen=!1,this.shipmentOpen=!1,this.form=this.formBuilder.group({container:[null],type:[null],voyage:[null],code:[null],bill:[null],sgd:["all"]})}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.emptyContainer.length>0&&this.filterChange.emit(e)})}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){if(!this.viewPort||!this.viewPort._renderedContentOffset)return"32px";let e=parseInt(this.viewPort._renderedContentOffset);return e-=32,`-${e}px`}get inverseOfTranslation3(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}resetForm(){this.searchNgForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(i.g),I.Rb(i.a),I.Rb(i.a),I.Rb(E.a),I.Rb(P.d),I.Rb(T.f))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-dem-table"]],viewQuery:function(e,t){var n;1&e&&(I.Sc(ve.e,!0),I.Sc(tt,!0)),2&e&&(I.wc(n=I.gc())&&(t.viewPort=n.first),I.wc(n=I.gc())&&(t.searchNgForm=n.first))},inputs:{modul:"modul",emptyContainer:"emptyContainer",objSptVol:"objSptVol",objVessel:"objVessel",arrType:"arrType",total:"total",height:"height"},outputs:{exportExcel:"exportExcel",openModal:"openModal",filterChange:"filterChange"},decls:132,vars:145,consts:[["name","form",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-empty"],[1,"sticky-header-1"],[1,"sticky-header-1","sticky-col",2,"z-index","30"],[1,"sticky-header-1","sticky-col2",2,"z-index","30"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[4,"ngIf"],["class","sticky-header-1",3,"top",4,"ngIf"],["class","sticky-header-1 text-center",3,"top",4,"ngFor","ngForOf"],[1,"sticky-header-1","grey-300-bg"],[1,"sticky-header-1","text-bold"],[1,"sticky-header-1",3,"matTooltip"],[1,"sticky-header-1","text-bold",3,"matTooltip"],[1,"sticky-header-1","sticky-right-col","text-bold",2,"z-index","30"],[1,"sticky-header-1","sticky-right-col1",2,"z-index","30"],["color","accent",1,"cursor-pointer",3,"matTooltip","click"],[1,"sticky-header-2","text-left","sticky-col",2,"z-index","30"],[1,"sticky-header-2","sticky-col2",2,"z-index","30"],[1,"my-form-field"],["matInput","","inputCheck","","type","text","formControlName","container",2,"font-size","12px"],[1,"sticky-header-2"],["matInput","","inputCheck","","type","text","formControlName","type",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","voyage",2,"font-size","12px"],["class","sticky-header-2",3,"top",4,"ngIf"],["matInput","","inputCheck","","type","text","formControlName","code",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","bill",2,"font-size","12px"],["class","sticky-header-2 text-center",3,"top",4,"ngFor","ngForOf"],[1,"sticky-header-2","grey-300-bg"],[1,"sticky-right-col","sticky-header-2",2,"z-index","30"],[1,"my-form-field","w-60"],["formControlName","sgd",2,"font-size","12px"],[2,"font-size","12px",3,"value"],[1,"sticky-header-2","sticky-right-col1",2,"z-index","30"],["color","warn",1,"cursor-pointer","ml-8",3,"click"],[3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"sticky-col"],[1,"sticky-col2","text-bold",2,"z-index","30"],[1,""],[3,"bottom",4,"ngIf"],["class","text-center",3,"bottom",4,"ngFor","ngForOf"],[1,"grey-300-bg"],[1,"text-bold"],[1,"sticky-right-col","text-bold",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"sticky-header-1","text-center"],[1,"sticky-header-2","text-center"],[3,"ngClass"],[1,"cursor-pointer",3,"routerLink"],[1,"sticky-col2"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[1,"sticky-right-col","ext-bold"],[1,"sticky-right-col1"],["color","accent","class","cursor-pointer",3,"click",4,"ngIf"],[1,"text-center"]],template:function(e,t){1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),I.Xb(2,"cdk-virtual-scroll-viewport",2),I.Xb(3,"table",3),I.Xb(4,"thead"),I.Xb(5,"tr"),I.Xb(6,"th",4),I.Lc(7,"No"),I.Wb(),I.Xb(8,"th",5),I.Lc(9,"Container"),I.Wb(),I.Xb(10,"th",6),I.Lc(11,"Type"),I.Wb(),I.Xb(12,"th",4),I.Xb(13,"div",7),I.Xb(14,"span"),I.Lc(15,"Vessel Voyage"),I.Wb(),I.Jc(16,nt,2,0,"mat-icon",8),I.Jc(17,it,2,0,"mat-icon",9),I.Wb(),I.Wb(),I.Jc(18,rt,2,1,"ng-container",10),I.Jc(19,at,2,2,"th",11),I.Jc(20,ct,2,2,"th",11),I.Jc(21,st,2,2,"th",11),I.Jc(22,lt,2,2,"th",11),I.Xb(23,"th",4),I.Lc(24,"Shipment"),I.Wb(),I.Xb(25,"th",4),I.Lc(26,"Bill"),I.Wb(),I.Jc(27,bt,2,3,"th",12),I.Xb(28,"th",4),I.Lc(29,"Customer"),I.Wb(),I.Xb(30,"th",4),I.Lc(31,"MT return"),I.Wb(),I.Xb(32,"th",4),I.Lc(33,"CR Info"),I.Wb(),I.Xb(34,"th",13),I.Lc(35,"FULIM"),I.Wb(),I.Xb(36,"th",13),I.Lc(37,"COD"),I.Wb(),I.Xb(38,"th",13),I.Lc(39,"TRIM"),I.Wb(),I.Xb(40,"th",13),I.Lc(41,"EMPTY"),I.Wb(),I.Xb(42,"th",13),I.Lc(43,"OFFHIRE"),I.Wb(),I.Xb(44,"th",14),I.Lc(45,"DET"),I.Wb(),I.Xb(46,"th",15),I.Lc(47,"F DAY"),I.Wb(),I.Xb(48,"th",16),I.Lc(49,"C DET"),I.Wb(),I.Xb(50,"th",17),I.Lc(51,"SGD"),I.Wb(),I.Xb(52,"th",18),I.Xb(53,"mat-icon",19),I.fc("click",(function(e){return e.stopPropagation(),t.exportExcel.emit([t.emptyContainer,t.total])})),I.Lc(54,"print"),I.Wb(),I.Wb(),I.Wb(),I.Xb(55,"tr"),I.Sb(56,"th",20),I.Xb(57,"th",21),I.Xb(58,"mat-form-field",22),I.Sb(59,"input",23),I.Wb(),I.Wb(),I.Xb(60,"th",24),I.Xb(61,"mat-form-field",22),I.Sb(62,"input",25),I.Wb(),I.Wb(),I.Xb(63,"th",24),I.Xb(64,"mat-form-field",22),I.Sb(65,"input",26),I.Wb(),I.Wb(),I.Jc(66,ut,2,1,"ng-container",10),I.Jc(67,mt,1,2,"th",27),I.Jc(68,dt,1,2,"th",27),I.Jc(69,ht,1,2,"th",27),I.Jc(70,ft,1,2,"th",27),I.Xb(71,"th",24),I.Xb(72,"mat-form-field",22),I.Sb(73,"input",28),I.Wb(),I.Wb(),I.Xb(74,"th",24),I.Xb(75,"mat-form-field",22),I.Sb(76,"input",29),I.Wb(),I.Wb(),I.Jc(77,gt,1,2,"th",30),I.Sb(78,"th",24),I.Sb(79,"th",24),I.Sb(80,"th",24),I.Sb(81,"th",31),I.Sb(82,"th",31),I.Sb(83,"th",31),I.Sb(84,"th",31),I.Sb(85,"th",31),I.Sb(86,"th",24),I.Sb(87,"th",24),I.Sb(88,"th",24),I.Xb(89,"th",32),I.Xb(90,"mat-form-field",33),I.Xb(91,"mat-select",34),I.Xb(92,"mat-option",35),I.Lc(93,"All"),I.Wb(),I.Xb(94,"mat-option",35),I.Lc(95,"Yes"),I.Wb(),I.Xb(96,"mat-option",35),I.Lc(97,"No"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(98,"th",36),I.Xb(99,"mat-icon",37),I.fc("click",(function(e){return e.stopPropagation(),t.resetForm()})),I.Lc(100,"delete"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(101,"tbody"),I.Jc(102,Lt,52,46,"tr",38),I.Wb(),I.Xb(103,"tfoot"),I.Xb(104,"tr"),I.Sb(105,"td"),I.Sb(106,"td",39),I.Xb(107,"td",40),I.Lc(108,"TOTAL"),I.Wb(),I.Sb(109,"td",41),I.Jc(110,kt,2,1,"ng-container",10),I.Jc(111,Ct,1,2,"td",42),I.Jc(112,Ot,1,2,"td",42),I.Jc(113,It,1,2,"td",42),I.Jc(114,Tt,1,2,"td",42),I.Sb(115,"td"),I.Sb(116,"td"),I.Jc(117,Mt,1,2,"td",43),I.Sb(118,"td"),I.Sb(119,"td"),I.Sb(120,"td"),I.Sb(121,"td",44),I.Sb(122,"td",44),I.Sb(123,"td",44),I.Sb(124,"td",44),I.Sb(125,"td",44),I.Sb(126,"td",45),I.Sb(127,"td"),I.Sb(128,"td",45),I.Xb(129,"td",46),I.Lc(130),I.Wb(),I.Sb(131,"td",47),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.pc("formGroup",t.form),I.Db(2),I.Ic("height",t.height,"px"),I.Db(4),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(4),I.pc("ngIf",!t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.pc("ngForOf",t.arrType),I.Db(1),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.pc("matTooltip","Free day"),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.pc("matTooltip","Charge det"),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(2),I.Ic("top",t.inverseOfTranslation),I.Db(1),I.pc("matTooltip","Export container"),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.pc("ngForOf",t.arrType),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(1),I.Ic("top",t.inverseOfTranslation2),I.Db(3),I.pc("value","all"),I.Db(2),I.pc("value",1),I.Db(2),I.pc("value",0),I.Db(2),I.Ic("top",t.inverseOfTranslation2),I.Db(4),I.pc("cdkVirtualForOf",t.emptyContainer),I.Db(3),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(2),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.pc("ngIf",t.vesselOpen),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.pc("ngForOf",t.arrType),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3),I.Db(1),I.Mc(t.total),I.Db(1),I.Ic("bottom",t.inverseOfTranslation3))},directives:[P.A,P.q,P.h,ve.e,ye.a,B.d,B.c,T.t,T.s,p.a,b.a,l.c,u.b,P.b,P.p,P.g,d.a,X.n,ve.d,T.q,me.a,i.j],pipes:[T.f],styles:["soa-agent-dem-table .no-shipments-text{font-size:24px;font-weight:300}soa-agent-dem-table cdk-virtual-scroll-viewport{width:100%}soa-agent-dem-table .mat-expansion-panel-body{padding:0!important}soa-agent-dem-table .shipment-empty{font-size:12px}soa-agent-dem-table .shipment-empty td,soa-agent-dem-table .shipment-empty th{padding:8px!important;white-space:nowrap}soa-agent-dem-table .shipment-empty thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}soa-agent-dem-table .shipment-empty thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}soa-agent-dem-table .shipment-empty tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-dem-table .shipment-empty .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}soa-agent-dem-table .shipment-empty .sticky-col{width:100px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}soa-agent-dem-table .shipment-empty .sticky-col2{width:50px;position:sticky;position:-webkit-sticky;background:#fff;left:98px;z-index:20}soa-agent-dem-table .shipment-empty .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}soa-agent-dem-table .shipment-empty .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}soa-agent-dem-table .shipment-empty .border-vessel td{border-bottom:1px solid #000!important}soa-agent-dem-table .shipment-empty .row-even{background-color:#e0e0e0!important}soa-agent-dem-table .shipment-empty .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}soa-agent-dem-table .shipment-empty .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2,data:{animation:et.a}}),e})();const jt=["formDirective"];function Vt(e,t){if(1&e&&(I.Xb(0,"mat-option",31),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id)("matTooltip",e.full_name),I.Db(1),I.Nc(" ",e.short_name," ")}}function Pt(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1,"Agent is required!"),I.Wb())}function Ft(e,t){if(1&e&&(I.Xb(0,"mat-option",26),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Mc(e)}}const Rt=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};let Et=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.commonService=t,this.datePipe=n,this.fitlerShipment=new I.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({customer:[null],agent:[null,P.y.required],voyage:[null],month:[null],year:[this.year],date_from:[null],date_to:[null],button:[null]})}ngOnInit(){this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"partner_name",this.customer):[])),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.short_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"short_name",this.agent):[])),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"name",this.voyage):[])),this.form.controls.button.valueChanges.subscribe(e=>{e&&this.getMonthTime(e)})}getMonthTime(e){let t,n,i=this.form.controls.year.value,o=this.form.controls.month.value,r=new Date,a=r.getMonth(),c=r.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,a,1),n=new Date(c,a+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):i&&(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}clearForm(){this.searchNgForm.resetForm(),this.form.controls.year.setValue(this.year),this.form.controls.sgd.setValue("all")}onSearchFormSubmit(e){if(e.valid){"string"==typeof e.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof e.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof e.value.voyage&&this.form.controls.voyage.setValue(null);let t=JSON.parse(JSON.stringify(e.value));t.date_from&&(t.date_from=this.datePipe.transform(new Date(t.date_from),"MM/dd/yyyy")),t.date_to&&(t.date_to=this.datePipe.transform(new Date(t.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(t)}}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(P.d),I.Rb(J.a),I.Rb(T.f))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-dem-sidebar"]],viewQuery:function(e,t){var n;1&e&&I.Sc(jt,!0),2&e&&I.wc(n=I.gc())&&(t.searchNgForm=n.first)},inputs:{formSearch:"formSearch",customer:"customer",voyage:"voyage",agent:"agent",height:"height"},outputs:{fitlerShipment:"fitlerShipment"},decls:69,vars:27,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent","required","",3,"matAutocomplete"],[3,"displayWith"],["autoSup2","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100",1,"info-line"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","year",3,"selectionChange"],[3,"value"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","button"],["value","TM",1,"mb-12"],["value","TY",1,"mb-12"],[3,"value","matTooltip"]],template:function(e,t){if(1&e&&(I.Xb(0,"form",0,1),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form)})),I.Xb(2,"div",2),I.Xb(3,"div",3),I.Xb(4,"button",4),I.Lc(5," Submit "),I.Wb(),I.Xb(6,"button",5),I.fc("click",(function(e){return t.clearForm()})),I.Lc(7," Clear "),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",6),I.Xb(9,"div",7),I.Xb(10,"div",8),I.Xb(11,"div",9),I.Xb(12,"div",10),I.Xb(13,"mat-form-field",11),I.Xb(14,"mat-label"),I.Lc(15,"Agent"),I.Wb(),I.Sb(16,"input",12),I.Xb(17,"mat-autocomplete",13,14),I.Jc(19,Vt,2,3,"mat-option",15),I.kc(20,"async"),I.Wb(),I.Jc(21,Pt,2,0,"mat-error",16),I.Wb(),I.Wb(),I.Xb(22,"div",17),I.Xb(23,"mat-form-field",11),I.Xb(24,"mat-label"),I.Lc(25,"Date from"),I.Wb(),I.Xb(26,"input",18),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(27,"mat-datepicker-toggle",19),I.Sb(28,"mat-datepicker",null,20),I.Wb(),I.Wb(),I.Xb(30,"div",17),I.Xb(31,"mat-form-field",11),I.Xb(32,"mat-label"),I.Lc(33,"Date to"),I.Wb(),I.Xb(34,"input",21),I.fc("change",(function(e){return t.commonService.setDateStr(e)})),I.Wb(),I.Sb(35,"mat-datepicker-toggle",19),I.Sb(36,"mat-datepicker",null,22),I.Wb(),I.Wb(),I.Xb(38,"div",17),I.Xb(39,"mat-form-field",11),I.Xb(40,"mat-label"),I.Lc(41,"Month"),I.Wb(),I.Xb(42,"mat-select",23),I.fc("selectionChange",(function(e){return t.getMonthTime("M")})),I.Jc(43,Ft,2,2,"mat-option",24),I.Wb(),I.Wb(),I.Wb(),I.Xb(44,"div",17),I.Xb(45,"mat-form-field",11),I.Xb(46,"mat-label"),I.Lc(47,"Year"),I.Wb(),I.Xb(48,"mat-select",25),I.fc("selectionChange",(function(e){return t.getMonthTime("Y")})),I.Xb(49,"mat-option",26),I.Lc(50),I.Wb(),I.Xb(51,"mat-option",26),I.Lc(52),I.Wb(),I.Xb(53,"mat-option",26),I.Lc(54),I.Wb(),I.Xb(55,"mat-option",26),I.Lc(56),I.Wb(),I.Xb(57,"mat-option",26),I.Lc(58),I.Wb(),I.Xb(59,"mat-option",26),I.Lc(60),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(61,"div",27),I.Xb(62,"h2"),I.Lc(63,"Time option"),I.Wb(),I.Xb(64,"mat-radio-group",28),I.Xb(65,"mat-radio-button",29),I.Lc(66,"This month"),I.Wb(),I.Xb(67,"mat-radio-button",30),I.Lc(68,"This year"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.xc(18),n=I.xc(29),i=I.xc(37);I.pc("formGroup",t.form),I.Db(8),I.Ic("height",t.height,"px"),I.Db(8),I.pc("matAutocomplete",e),I.Db(1),I.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.agent)),I.Db(2),I.pc("ngForOf",I.lc(20,24,t.filteredAgent)),I.Db(2),I.pc("ngIf",t.form.get("agent").hasError("required")),I.Db(5),I.pc("matDatepicker",n),I.Db(1),I.pc("for",n),I.Db(7),I.pc("matDatepicker",i),I.Db(1),I.pc("for",i),I.Db(8),I.pc("ngForOf",I.qc(26,Rt)),I.Db(6),I.pc("value",t.year-4),I.Db(1),I.Mc(t.year-4),I.Db(1),I.pc("value",t.year-3),I.Db(1),I.Mc(t.year-3),I.Db(1),I.pc("value",t.year-2),I.Db(1),I.Mc(t.year-2),I.Db(1),I.pc("value",t.year-1),I.Db(1),I.Mc(t.year-1),I.Db(1),I.pc("value",t.year),I.Db(1),I.Mc(t.year),I.Db(1),I.pc("value",t.year+1),I.Db(1),I.Mc(t.year+1)}},directives:[P.A,P.q,P.h,B.d,B.c,c.b,B.b,$.a,l.c,l.f,u.b,P.b,r.c,P.p,P.g,P.w,r.a,T.s,T.t,a.b,a.d,l.h,a.a,d.a,X.n,h.b,h.a,p.a,l.b],pipes:[T.b],styles:["soa-agent-dem-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}soa-agent-dem-sidebar .navbar-scroll-container{background:#fff!important}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content{padding-top:0}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}soa-agent-dem-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function Jt(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",6),I.Xb(1,"div",7),I.Xb(2,"soa-agent-dem-sidebar",8),I.fc("fitlerShipment",(function(t){return I.Bc(e),I.jc().fitlerShipment(t)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(2),I.pc("formSearch",e.formSearch)("customer",e.customer)("agent",e.agent)("voyage",e.voyage)}}let Bt=(()=>{class e{constructor(e,t,n,i,o,r,a){this._fuseSidebarService=e,this.authService=t,this.soaAgentDemService=n,this.soaAgentService=i,this.commonService=o,this.datePipe=r,this._matDialog=a,this.sidebarPanel=!0,this.height=560,this.fullScreen=!1,this.total=0,this._unsubscribeAll=new j.a,this.modul=this.authService.modul}ngOnInit(){this.authService.urlChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.modul=this.authService.modul}),this.searchText=this.soaAgentService.searchText,this.searchText&&this.searchFilter(this.searchText),this.formSearch=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-12-12-56}),this.authService.changeScreen.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-12-12-56:this.authService.screenHeight-64-12-12-56}),this.soaAgentService.onDataItemChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.soaAgentService.agent}),this.soaAgentService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.soaAgentService.dataCustomer}),this.soaAgentDemService.onEmptyChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.emptyContainer=e,this.arrType=this.soaAgentDemService.arrType,this.total=this.soaAgentDemService.total,this.objSptVol=this.soaAgentDemService.objSptVol,this.objVessel=this.soaAgentDemService.objVessel}),this.soaAgentService.onVesselImpChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.voyage=e[1]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.soaAgentDemService)}searchFilter(e){this.soaAgentDemService.onSearchTextChanged.next(e)}fitlerShipment(e){this.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentDemService.getShipments(e).then(t=>{this.soaAgentService.currenSearch.formSearch.agent=e.agent,this.soaAgentService.currenSearch.formSearch.date_from=e.date_from,this.soaAgentService.currenSearch.formSearch.date_to=e.date_to,this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getShipment(){this.authService.onRequestChanged.next(!0),this.soaAgentDemService.getShipments(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}exportExcel(e){let[t,n]=e,i=[];t.map((e,t)=>{let n=e.move.FULIM?e.move.FULIM.time:0,o=e.move.EMPTY?e.move.EMPTY.time:0,r=[t+1,e.cont_number,e.cont_type_code,e.vessel_full_name,e.bill,e.customer_short_name];this.arrType.map(t=>{r.push(this.objSptVol[e.shipment][t]?this.objSptVol[e.shipment][t]:0)}),r.push(e.move.FULIM?this.datePipe.transform(e.move.FULIM.date,"MM/dd/yyyy"):null),r.push(e.move.FULIM?this.datePipe.transform(e.move.FULIM.date+864e5,"MM/dd/yyyy"):null),r.push(e.move.TRIMP?this.datePipe.transform(e.move.TRIMP.date,"MM/dd/yyyy"):null),r.push(e.move.EMPTY?this.datePipe.transform(e.move.EMPTY.date,"MM/dd/yyyy"):null),r.push(n&&o?(o-n)/864e5:null),r.push(e.container_info&&e.container_info.free_day?e.container_info.free_day:7),r.push(e.move.FULIM&&e.move.EMPTY&&e.container_info&&(e.move.EMPTY.time-e.move.FULIM.time)/864e5>(e.container_info.free_day?e.container_info.free_day:7)?(e.move.EMPTY.time-e.move.FULIM.time)/864e5-(e.container_info.free_day?e.container_info.free_day:7):""),r.push(e.currency?e.currency:""),r.push(e.container_info&&e.container_info.release_info?e.container_info.release_info:null),i.push(r)}),this.soaAgentDemService.exportExcel(i,n)}openModal([e,t]){let n;n=e.container_info.release_id?"Edit container release information":"Add container release information",this.authService.onRequestChanged.next(!0),this.soaAgentDemService.getDepotByPortId(e.pod).then(i=>{this.authService.onRequestChanged.next(!1),this.dialogRef=this._matDialog.open(Ke,{panelClass:"soa-agent-dem-modal-dialog",data:{label:n,depot:i,data:e.container_info}}),this.dialogRef.afterClosed().subscribe(i=>{i&&("Add container release information"==n?(this.authService.onRequestChanged.next(!0),this.soaAgentDemService.createContainerRelease(i).then(n=>{this.authService.onRequestChanged.next(!1),this.emptyContainer[t].container_info.release_id=n.insertId,this.emptyContainer[t].container_info.container_id=i.container,this.emptyContainer[t].container_info.mt_return=i.mt_return,this.emptyContainer[t].container_info.free_day=i.free_day,this.emptyContainer[t].container_info.dem=i.dem,this.emptyContainer[t].container_info.det=i.det,this.emptyContainer[t].container_info.release_info=i.info,this.emptyContainer[t].container_info.update_by=i.user,this.soaAgentDemService.emptyContainer.find(t=>t.shipment==e.shipment&&t.container==e.container).container_info=JSON.parse(JSON.stringify(this.emptyContainer[t].container_info)),this.soaAgentDemService.getFilterShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("ERROR")})):(this.authService.onRequestChanged.next(!0),this.soaAgentDemService.updateContainerRelease(i).then(n=>{this.authService.onRequestChanged.next(!1),this.emptyContainer[t].container_info.container_id=i.container,this.emptyContainer[t].container_info.mt_return=i.mt_return,this.emptyContainer[t].container_info.free_day=i.free_day,this.emptyContainer[t].container_info.dem=i.dem,this.emptyContainer[t].container_info.det=i.det,this.emptyContainer[t].container_info.release_info=i.info,this.emptyContainer[t].container_info.update_by=i.user,this.soaAgentDemService.emptyContainer.find(t=>t.shipment==e.shipment&&t.container==e.container).container_info=JSON.parse(JSON.stringify(this.emptyContainer[t].container_info)),this.soaAgentDemService.getFilterShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("ERROR")})))})}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("ERROR")})}filterChange(e){this.soaAgentDemService.onFilterChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(te.a),I.Rb(E.a),I.Rb(Ze),I.Rb(ce),I.Rb(J.a),I.Rb(T.f),I.Rb(f.b))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-dem"]],decls:6,vars:10,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","empty-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"modul","emptyContainer","objSptVol","objVessel","arrType","height","total","exportExcel","openModal","filterChange"],["name","empty-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"formSearch","customer","agent","voyage","fitlerShipment"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,Jt,3,4,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"soa-agent-dem-table",5),I.fc("exportExcel",(function(e){return t.exportExcel(e)}))("openModal",(function(e){return t.openModal(e)}))("filterChange",(function(e){return t.filterChange(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-dem-sidebar"),I.Db(2),I.pc("modul",t.modul)("emptyContainer",t.emptyContainer)("objSptVol",t.objSptVol)("objVessel",t.objVessel)("arrType",t.arrType)("height",t.height)("total",t.total))},directives:[pe.a,T.t,$.a,ge,At,Fe.a,Et],styles:["soa-agent-dem{width:100%}"],encapsulation:2}),e})();const $t=["formDirective"];function qt(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Amount is required "),I.Wb())}function zt(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Tax is required "),I.Wb())}function Ut(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Tax Amount is required "),I.Wb())}function Yt(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Currency is required "),I.Wb())}function Ht(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1," Ex rate is required "),I.Wb())}let Gt=(()=>{class e{constructor(e,t,n,i,o,r,a){this.router=e,this.matDialogRef=t,this._data=n,this.authService=i,this.commonService=o,this.datePipe=r,this._formBuilder=a,this.errorMessage="",this.form=this._formBuilder.group({id:[null,P.y.required],amount:[null,P.y.required],tax:[null,P.y.required],tax_amount:[0,P.y.required],currency:[1],ex_rate:[1,P.y.required],info:[null]});let c=JSON.parse(JSON.stringify(n.data));this.label=n.label,this.contract=n.contract,this.form.patchValue(c)}ngOnInit(){this.name=this.authService.name,this.form.controls.amount.valueChanges.subscribe(e=>{e=e||0;let t=this.form.value.tax?this.form.value.tax:0;5.26==t&&(t=.05/.95*100);let n=Math.round(e*t/100);this.form.controls.tax_amount.setValue(n)}),this.form.controls.tax.valueChanges.subscribe(e=>{5.26==(e=e||0)&&(e=.05/.95*100);let t=Math.round((this.form.value.amount?this.form.value.amount:0)*e/100);this.form.controls.tax_amount.setValue(t)}),this.form.valueChanges.subscribe(e=>{this.errorMessage=""})}onFormSubmit(e){if(e.valid){let t=JSON.parse(JSON.stringify(e.value));t.update_by=this.authService.user,t.update_at=this.datePipe.transform(new Date,"yyyy/MM/dd HH:mm:ss")+".0",this.matDialogRef.close(t)}}updateAmount(){this.form.controls.amount.setValue(this.contract.amount),this.form.controls.currency.setValue("VND"==this.contract.currency?1:4)}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(i.g),I.Rb(f.f),I.Rb(f.a),I.Rb(E.a),I.Rb(J.a),I.Rb(T.f),I.Rb(P.d))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&I.Sc($t,!0),2&e&&I.wc(n=I.gc())&&(t.shipmentNgForm=n.first)},decls:70,vars:17,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","sel-soa-agent-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","20",1,"pr-8"],["inputCheck","","matInput","","type","number","formControlName","amount","required",""],["type","button","matSuffix","","mat-icon-button","","color","accent",2,"z-index","10",3,"matTooltip","click"],["color","accent"],[4,"ngIf"],["formControlName","tax","required",""],[3,"value"],["inputCheck","","matInput","","type","number","formControlName","tax_amount","required",""],["formControlName","currency"],["inputCheck","","matInput","","type","number","formControlName","ex_rate","required",""],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","info"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"mat-toolbar",1),I.Xb(2,"mat-toolbar-row",2),I.Xb(3,"span",3),I.Lc(4),I.Wb(),I.Xb(5,"button",4),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Xb(6,"mat-icon"),I.Lc(7,"close"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",5),I.Xb(9,"div"),I.Xb(10,"form",6),I.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),I.Xb(11,"div",7),I.Sb(12,"input",8),I.Wb(),I.Xb(13,"div",9),I.Xb(14,"mat-form-field",10),I.Xb(15,"mat-label"),I.Lc(16,"Amount"),I.Wb(),I.Sb(17,"input",11),I.Xb(18,"button",12),I.fc("click",(function(e){return t.updateAmount()})),I.Xb(19,"mat-icon",13),I.Lc(20,"refresh"),I.Wb(),I.Wb(),I.Jc(21,qt,2,0,"mat-error",14),I.Wb(),I.Xb(22,"mat-form-field",10),I.Xb(23,"mat-label"),I.Lc(24,"Tax(%)"),I.Wb(),I.Xb(25,"mat-select",15),I.Xb(26,"mat-option",16),I.Lc(27,"0"),I.Wb(),I.Xb(28,"mat-option",16),I.Lc(29,"5"),I.Wb(),I.Xb(30,"mat-option",16),I.Lc(31,"5.26"),I.Wb(),I.Xb(32,"mat-option",16),I.Lc(33,"7"),I.Wb(),I.Xb(34,"mat-option",16),I.Lc(35,"8"),I.Wb(),I.Xb(36,"mat-option",16),I.Lc(37,"10"),I.Wb(),I.Wb(),I.Jc(38,zt,2,0,"mat-error",14),I.Wb(),I.Xb(39,"mat-form-field",10),I.Xb(40,"mat-label"),I.Lc(41,"Tax Amount"),I.Wb(),I.Sb(42,"input",17),I.Jc(43,Ut,2,0,"mat-error",14),I.Wb(),I.Xb(44,"mat-form-field",10),I.Xb(45,"mat-label"),I.Lc(46,"Currency"),I.Wb(),I.Xb(47,"mat-select",18),I.Xb(48,"mat-option",16),I.Lc(49,"VND"),I.Wb(),I.Xb(50,"mat-option",16),I.Lc(51,"USD"),I.Wb(),I.Wb(),I.Jc(52,Yt,2,0,"mat-error",14),I.Wb(),I.Xb(53,"mat-form-field",10),I.Xb(54,"mat-label"),I.Lc(55,"Ex rate"),I.Wb(),I.Sb(56,"input",19),I.Jc(57,Ht,2,0,"mat-error",14),I.Wb(),I.Xb(58,"mat-form-field",20),I.Xb(59,"mat-label"),I.Lc(60,"info"),I.Wb(),I.Sb(61,"input",21),I.Wb(),I.Wb(),I.Xb(62,"div",22),I.Xb(63,"div",23),I.Lc(64),I.Wb(),I.Wb(),I.Xb(65,"div",24),I.Xb(66,"button",25),I.Lc(67,"Submit"),I.Wb(),I.Xb(68,"button",26),I.fc("click",(function(e){return t.matDialogRef.close()})),I.Lc(69,"Cancel"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(4),I.Mc(t.label),I.Db(6),I.pc("formGroup",t.form),I.Db(8),I.pc("matTooltip","Update same contract"),I.Db(3),I.pc("ngIf",t.form.get("amount").hasError("required")),I.Db(5),I.pc("value",0),I.Db(2),I.pc("value",5),I.Db(2),I.pc("value",5.26),I.Db(2),I.pc("value",7),I.Db(2),I.pc("value",8),I.Db(2),I.pc("value",10),I.Db(2),I.pc("ngIf",t.form.get("tax").hasError("required")),I.Db(5),I.pc("ngIf",t.form.get("tax_amount").hasError("required")),I.Db(5),I.pc("value",1),I.Db(2),I.pc("value",4),I.Db(2),I.pc("ngIf",t.form.get("currency").hasError("required")),I.Db(5),I.pc("ngIf",t.form.get("ex_rate").hasError("required")),I.Db(7),I.Mc(t.errorMessage))},directives:[g.a,g.c,B.b,B.d,B.c,c.b,b.a,f.d,$.a,P.A,P.q,P.h,P.b,P.p,P.g,l.c,l.f,u.b,P.u,P.w,l.h,p.a,T.t,d.a,X.n,l.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.soa-agent-modal-dialog{width:100%}}@media screen and (min-width:960px){.soa-agent-modal-dialog{width:1080px}}.soa-agent-modal-dialog .mat-dialog-container{padding:0}.soa-agent-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.soa-agent-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.soa-agent-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}.soa-agent-modal-dialog #sel-soa-agent-modal .faq{-webkit-box-flex:1;flex:1 0 auto}.soa-agent-modal-dialog #sel-soa-agent-modal .faq .item{padding:8px}.soa-agent-modal-dialog #sel-soa-agent-modal .faq .item .title{font-size:14px;margin-bottom:8px}.soa-agent-modal-dialog #sel-soa-agent-modal .faq .item .info{font-size:12px;line-height:1.5;color:rgba(0,0,0,.54)}.table-inv-item{width:100%}.table-inv-item tr.example-detail-row{height:0}.table-inv-item tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}.table-inv-item tr.example-element-row:not(.example-expanded-row):active{background:#efefef}.table-inv-item .example-element-row td{border-bottom-width:0}.table-inv-item .example-element-detail{overflow:hidden;display:-webkit-box;display:flex}.table-inv-item .example-element-diagram{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.table-inv-item .example-element-symbol{font-weight:700;font-size:40px;line-height:normal}.table-inv-item .example-element-description{padding:16px}.table-inv-item .example-element-description-attribution{opacity:.5}"],encapsulation:2}),e})();const Qt=["invoice"];function Kt(e,t){if(1&e){const e=I.Yb();I.Xb(0,"tr"),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td"),I.Xb(4,"a",7),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td"),I.Lc(7),I.Wb(),I.Xb(8,"td"),I.Lc(9),I.Wb(),I.Xb(10,"td"),I.Lc(11),I.Wb(),I.Xb(12,"td",8),I.Lc(13),I.kc(14,"number"),I.Wb(),I.Xb(15,"td"),I.Lc(16),I.kc(17,"number"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Xb(20,"td",9),I.Lc(21),I.kc(22,"number"),I.Wb(),I.Xb(23,"td"),I.Lc(24),I.Wb(),I.Xb(25,"td"),I.Xb(26,"a",7),I.Lc(27),I.Wb(),I.Wb(),I.Xb(28,"td"),I.Lc(29),I.Wb(),I.Xb(30,"td"),I.Lc(31),I.Wb(),I.Xb(32,"td"),I.Lc(33),I.Wb(),I.Xb(34,"td"),I.Lc(35),I.Wb(),I.Xb(36,"td",5),I.Xb(37,"mat-icon",10),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit,o=I.jc(2);return n.stopPropagation(),o.updateItem.emit(i)})),I.Lc(38,"edit"),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=t.$implicit,n=t.index;I.Db(2),I.Mc(n+1),I.Db(2),I.pc("routerLink","/apps/workflow/shipment/detail/"+e.shipment+"/soa"),I.Db(1),I.Mc(e.code),I.Db(2),I.Mc(e.price_code),I.Db(2),I.Mc(e.unit_code),I.Db(2),I.Mc(e.volume),I.Db(2),I.Mc(I.mc(14,17,e.amount,"VND"==e.currency_code?"1.0-0":"1.2-2")),I.Db(3),I.Mc(I.mc(17,20,e.tax,"1.2-2")),I.Db(3),I.Mc(e.currency_code),I.Db(2),I.Mc(I.mc(22,23,e.price_contract,"VND"==e.currency_code_contract?"1.0-0":"1.2-2")),I.Db(3),I.Mc(e.currency_code_contract),I.Db(2),I.pc("routerLink","/apps/supplier/supplier-contract/supplier-contract-details/"+e.contract),I.Db(1),I.Mc(e.code_contract),I.Db(2),I.Mc(e.country_name),I.Db(2),I.Mc(e.partner_short_name),I.Db(2),I.Mc(e.info),I.Db(2),I.Mc(e.update_by_name)}}function Zt(e,t){if(1&e&&(I.Xb(0,"div",1),I.Xb(1,"h2",2),I.Xb(2,"span"),I.Lc(3),I.Wb(),I.Wb(),I.Xb(4,"div",3),I.Xb(5,"table",4),I.Xb(6,"thead"),I.Xb(7,"tr"),I.Xb(8,"th"),I.Lc(9,"No"),I.Wb(),I.Xb(10,"th"),I.Lc(11,"Shipment"),I.Wb(),I.Xb(12,"th"),I.Lc(13,"Price"),I.Wb(),I.Xb(14,"th"),I.Lc(15,"Unit"),I.Wb(),I.Xb(16,"th"),I.Lc(17,"Volume"),I.Wb(),I.Xb(18,"th"),I.Lc(19,"Amount"),I.Wb(),I.Xb(20,"th"),I.Lc(21,"Tax(%)"),I.Wb(),I.Xb(22,"th"),I.Lc(23,"Currency"),I.Wb(),I.Xb(24,"th"),I.Lc(25,"Contract amount"),I.Wb(),I.Xb(26,"th"),I.Lc(27,"Contract currency"),I.Wb(),I.Xb(28,"th"),I.Lc(29,"Contract code"),I.Wb(),I.Xb(30,"th"),I.Lc(31,"Payment_center"),I.Wb(),I.Xb(32,"th"),I.Lc(33,"Pay party"),I.Wb(),I.Xb(34,"th"),I.Lc(35,"Info"),I.Wb(),I.Xb(36,"th"),I.Lc(37,"Update by"),I.Wb(),I.Sb(38,"th",5),I.Wb(),I.Wb(),I.Xb(39,"tbody"),I.Jc(40,Kt,39,26,"tr",6),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc();I.Db(3),I.Mc(e.label),I.Db(1),I.Ic("max-height",e.height,"px"),I.Db(36),I.pc("ngForOf",e.data)}}let en=(()=>{class e{constructor(){this.updateItem=new I.o,this.type=!0,this._unsubscribeAll=new j.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,console.log(this.data))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-error-view"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Qt,!0),2&e&&I.wc(n=I.gc())&&(t.invoice=n.first)},inputs:{height:"height",label:"label",data:"data"},outputs:{updateItem:"updateItem"},features:[I.Bb()],decls:1,vars:1,consts:[["class","group mb-12 mt-12",4,"ngIf"],[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto"],[1,"simple","table-contract-details"],[1,"sticky-right-col"],[4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"routerLink"],[1,"red-200-bg"],[1,"accent-200-bg"],["color","accent",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&I.Jc(0,Zt,41,4,"div",0),2&e&&I.pc("ngIf",t.data&&t.data.length>0)},directives:[T.t,B.d,B.c,T.s,i.j,b.a],pipes:[T.g],styles:["soa-agent-error-view .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}soa-agent-error-view .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}soa-agent-error-view .group .table-contract-details{font-size:12px}soa-agent-error-view .group .table-contract-details td,soa-agent-error-view .group .table-contract-details th{padding:8px;font-size:12px}soa-agent-error-view .group .table-contract-details thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}soa-agent-error-view .group .table-contract-details tfoot td{font-weight:600}soa-agent-error-view .group .table-contract-details .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}soa-agent-error-view .group .table-contract-details .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}soa-agent-error-view .group .table-contract-details .sticky-right-col{min-width:60px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}soa-agent-error-view .group .table-contract-details tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}soa-agent-error-view .group .table-contract-details tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:et.a}}),e})();const tn=["formDirective"],nn=["allSelected"];function on(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.short_name," ")}}function rn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.short_name," ")}}function an(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.short_name," ")}}function cn(e,t){if(1&e&&(I.Xb(0,"mat-option",45),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id)("matTooltip",e.full_name),I.Db(1),I.Nc(" ",e.short_name," ")}}function sn(e,t){1&e&&(I.Xb(0,"mat-error"),I.Lc(1,"Agent is required!"),I.Wb())}function ln(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.name," ")}}function bn(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-option",30),I.fc("click",(function(t){I.Bc(e),I.jc();const n=I.xc(64);return I.jc().tosslePerOne(n.viewValue)})),I.Lc(1),I.Wb()}if(2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Mc(e.code)}}function pn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.code," ")}}function un(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e.id),I.Db(1),I.Nc(" ",e.name," ")}}function mn(e,t){if(1&e&&(I.Xb(0,"mat-option",44),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.pc("value",e),I.Db(1),I.Mc(e)}}const dn=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};function hn(e,t){if(1&e){const e=I.Yb();I.Xb(0,"form",2,3),I.fc("keydown.enter",(function(t){return I.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){I.Bc(e);const n=I.jc();return n.onSearchFormSubmit(n.form)})),I.Xb(2,"div",4),I.Xb(3,"div",5),I.Xb(4,"button",6),I.Lc(5," Submit "),I.Wb(),I.Xb(6,"button",7),I.fc("click",(function(t){return I.Bc(e),I.jc().clearForm()})),I.Lc(7," Clear "),I.Wb(),I.Wb(),I.Wb(),I.Xb(8,"div",8),I.Xb(9,"div",9),I.Xb(10,"div",10),I.Xb(11,"div",11),I.Xb(12,"div",12),I.Xb(13,"mat-form-field",13),I.Xb(14,"mat-label"),I.Lc(15,"Pay party"),I.Wb(),I.Sb(16,"input",14),I.Xb(17,"mat-autocomplete",15,16),I.Jc(19,on,2,2,"mat-option",17),I.kc(20,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(21,"div",18),I.Xb(22,"mat-form-field",13),I.Xb(23,"mat-label"),I.Lc(24,"Issue Party"),I.Wb(),I.Sb(25,"input",19),I.Xb(26,"mat-autocomplete",15,20),I.Jc(28,rn,2,2,"mat-option",17),I.kc(29,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(30,"div",18),I.Xb(31,"mat-form-field",13),I.Xb(32,"mat-label"),I.Lc(33,"Customer"),I.Wb(),I.Sb(34,"input",21),I.Xb(35,"mat-autocomplete",15,22),I.Jc(37,an,2,2,"mat-option",17),I.kc(38,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(39,"div",18),I.Xb(40,"mat-form-field",13),I.Xb(41,"mat-label"),I.Lc(42,"Agent"),I.Wb(),I.Sb(43,"input",23),I.Xb(44,"mat-autocomplete",15,24),I.Jc(46,cn,2,3,"mat-option",25),I.kc(47,"async"),I.Wb(),I.Jc(48,sn,2,0,"mat-error",26),I.Wb(),I.Wb(),I.Xb(49,"div",18),I.Xb(50,"mat-form-field",13),I.Xb(51,"mat-label"),I.Lc(52,"Voyage"),I.Wb(),I.Sb(53,"input",27),I.Xb(54,"mat-autocomplete",15,28),I.Jc(56,ln,2,2,"mat-option",17),I.kc(57,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(58,"div",18),I.Xb(59,"mat-form-field",13),I.Xb(60,"mat-label"),I.Lc(61,"Price"),I.Wb(),I.Xb(62,"mat-select",29),I.Xb(63,"mat-option",30,31),I.fc("click",(function(t){return I.Bc(e),I.jc().toggleAllSelection()})),I.Lc(65),I.Wb(),I.Jc(66,bn,2,2,"mat-option",32),I.Wb(),I.Wb(),I.Wb(),I.Xb(67,"div",18),I.Xb(68,"mat-form-field",13),I.Xb(69,"mat-label"),I.Lc(70,"Currency"),I.Wb(),I.Xb(71,"mat-select",33),I.Jc(72,pn,2,2,"mat-option",17),I.Wb(),I.Wb(),I.Wb(),I.Xb(73,"div",18),I.Xb(74,"mat-form-field",13),I.Xb(75,"mat-label"),I.Lc(76,"Payment center"),I.Wb(),I.Sb(77,"input",34),I.Xb(78,"mat-autocomplete",15,35),I.Jc(80,un,2,2,"mat-option",17),I.kc(81,"async"),I.Wb(),I.Wb(),I.Wb(),I.Xb(82,"div",18),I.Xb(83,"mat-form-field",13),I.Xb(84,"mat-label"),I.Lc(85,"Debit"),I.Wb(),I.Sb(86,"input",36),I.Wb(),I.Wb(),I.Xb(87,"div",18),I.Xb(88,"mat-form-field",13),I.Xb(89,"mat-label"),I.Lc(90,"Date from"),I.Wb(),I.Xb(91,"input",37),I.fc("change",(function(t){return I.Bc(e),I.jc().commonService.setDateStr(t)})),I.Wb(),I.Sb(92,"mat-datepicker-toggle",38),I.Sb(93,"mat-datepicker",null,39),I.Wb(),I.Wb(),I.Xb(95,"div",18),I.Xb(96,"mat-form-field",13),I.Xb(97,"mat-label"),I.Lc(98,"Date to"),I.Wb(),I.Xb(99,"input",40),I.fc("change",(function(t){return I.Bc(e),I.jc().commonService.setDateStr(t)})),I.Wb(),I.Sb(100,"mat-datepicker-toggle",38),I.Sb(101,"mat-datepicker",null,41),I.Wb(),I.Wb(),I.Xb(103,"div",18),I.Xb(104,"mat-form-field",13),I.Xb(105,"mat-label"),I.Lc(106,"Month"),I.Wb(),I.Xb(107,"mat-select",42),I.fc("selectionChange",(function(t){return I.Bc(e),I.jc().getMonthTime("M")})),I.Jc(108,mn,2,2,"mat-option",17),I.Wb(),I.Wb(),I.Wb(),I.Xb(109,"div",18),I.Xb(110,"mat-form-field",13),I.Xb(111,"mat-label"),I.Lc(112,"Year"),I.Wb(),I.Xb(113,"mat-select",43),I.fc("selectionChange",(function(t){return I.Bc(e),I.jc().getMonthTime("Y")})),I.Xb(114,"mat-option",44),I.Lc(115),I.Wb(),I.Xb(116,"mat-option",44),I.Lc(117),I.Wb(),I.Xb(118,"mat-option",44),I.Lc(119),I.Wb(),I.Xb(120,"mat-option",44),I.Lc(121),I.Wb(),I.Xb(122,"mat-option",44),I.Lc(123),I.Wb(),I.Xb(124,"mat-option",44),I.Lc(125),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.xc(18),t=I.xc(27),n=I.xc(36),i=I.xc(45),o=I.xc(55),r=I.xc(79),a=I.xc(94),c=I.xc(102),s=I.jc();I.pc("formGroup",s.form),I.Db(8),I.Ic("height",s.height,"px"),I.Db(8),I.pc("matAutocomplete",e),I.Db(1),I.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.customer)),I.Db(2),I.pc("ngForOf",I.lc(20,43,s.filteredCustomer)),I.Db(6),I.pc("matAutocomplete",t),I.Db(1),I.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.supplier)),I.Db(2),I.pc("ngForOf",I.lc(29,45,s.filteredSupplier)),I.Db(6),I.pc("matAutocomplete",n),I.Db(1),I.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.customer)),I.Db(2),I.pc("ngForOf",I.lc(38,47,s.filteredCustomer2)),I.Db(6),I.pc("matAutocomplete",i),I.Db(1),I.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.agent)),I.Db(2),I.pc("ngForOf",I.lc(47,49,s.filteredAgent)),I.Db(2),I.pc("ngIf",s.form.get("agent").hasError("required")),I.Db(5),I.pc("matAutocomplete",o),I.Db(1),I.pc("displayWith",s.commonService.displayFn.bind(s,"name",s.voyage)),I.Db(2),I.pc("ngForOf",I.lc(57,51,s.filteredVoyage)),I.Db(7),I.pc("value",0),I.Db(2),I.Nc("All of ",s.price.length," price"),I.Db(1),I.pc("ngForOf",s.price),I.Db(6),I.pc("ngForOf",s.currency),I.Db(5),I.pc("matAutocomplete",r),I.Db(1),I.pc("displayWith",s.commonService.displayFn.bind(s,"name",s.country)),I.Db(2),I.pc("ngForOf",I.lc(81,53,s.filteredCountry)),I.Db(11),I.pc("matDatepicker",a),I.Db(1),I.pc("for",a),I.Db(7),I.pc("matDatepicker",c),I.Db(1),I.pc("for",c),I.Db(8),I.pc("ngForOf",I.qc(55,dn)),I.Db(6),I.pc("value",s.year-4),I.Db(1),I.Mc(s.year-4),I.Db(1),I.pc("value",s.year-3),I.Db(1),I.Mc(s.year-3),I.Db(1),I.pc("value",s.year-2),I.Db(1),I.Mc(s.year-2),I.Db(1),I.pc("value",s.year-1),I.Db(1),I.Mc(s.year-1),I.Db(1),I.pc("value",s.year),I.Db(1),I.Mc(s.year),I.Db(1),I.pc("value",s.year+1),I.Db(1),I.Mc(s.year+1)}}const fn=function(e){return{"mt-8":e}},gn=function(e){return{"red-600-fg":e}};function vn(e,t){if(1&e&&(I.Xb(0,"div",63),I.Xb(1,"div",53),I.Lc(2),I.kc(3,"number"),I.Wb(),I.Wb()),2&e){const e=t.$implicit,n=t.index,i=I.jc(2);I.pc("ngClass",I.rc(7,fn,0==n)),I.Db(1),I.pc("ngClass",I.rc(9,gn,i.total.revenue[e]-i.total.cost[e]<0)),I.Db(1),I.Oc(" ",I.mc(3,4,i.total.revenue[e]-i.total.cost[e],"VND"!=e?"1.2-2":"1.0-0")," ",e," ")}}function yn(e,t){1&e&&I.Sb(0,"div",64)}function xn(e,t){if(1&e){const e=I.Yb();I.Xb(0,"form",46),I.fc("keydown.enter",(function(t){return I.Bc(e),"TEXTAREA"==t.target.tagName})),I.Xb(1,"div",4),I.Xb(2,"div",5),I.Xb(3,"button",47),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return n.updateSelectItem.emit(n.formEdit.value)})),I.Lc(4," Save "),I.Wb(),I.Xb(5,"button",7),I.fc("click",(function(t){return I.Bc(e),I.jc().typeChange.emit("form")})),I.Lc(6," Search "),I.Wb(),I.Wb(),I.Wb(),I.Xb(7,"div",8),I.Xb(8,"div",9),I.Xb(9,"div",48),I.Xb(10,"div",11),I.Xb(11,"div",49),I.Xb(12,"h2"),I.Lc(13,"Total"),I.Wb(),I.Jc(14,vn,4,11,"div",50),I.Jc(15,yn,1,0,"div",51),I.Xb(16,"div",52),I.Xb(17,"div",53),I.Lc(18),I.kc(19,"number"),I.Wb(),I.Wb(),I.Wb(),I.Xb(20,"div",18),I.Xb(21,"mat-form-field",54),I.Xb(22,"mat-label"),I.Lc(23,"Debit"),I.Wb(),I.Sb(24,"input",55),I.Xb(25,"mat-checkbox",56),I.fc("change",(function(t){return I.Bc(e),I.jc().setDisabled("debit")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(26,"div",18),I.Xb(27,"mat-form-field",54),I.Xb(28,"mat-label"),I.Lc(29,"Issue date"),I.Wb(),I.Xb(30,"input",57),I.fc("change",(function(t){return I.Bc(e),I.jc().commonService.setDateStr(t)})),I.Wb(),I.Sb(31,"mat-datepicker-toggle",38),I.Sb(32,"mat-datepicker",null,58),I.Xb(34,"mat-checkbox",56),I.fc("change",(function(t){return I.Bc(e),I.jc().setDisabled("issue_date")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(35,"div",18),I.Xb(36,"mat-form-field",54),I.Xb(37,"mat-label"),I.Lc(38,"Pay date"),I.Wb(),I.Xb(39,"input",59),I.fc("change",(function(t){return I.Bc(e),I.jc().commonService.setDateStr(t)})),I.Wb(),I.Sb(40,"mat-datepicker-toggle",38),I.Sb(41,"mat-datepicker",null,60),I.Xb(43,"mat-checkbox",56),I.fc("change",(function(t){return I.Bc(e),I.jc().setDisabled("pay_date")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(44,"div",18),I.Xb(45,"mat-form-field",54),I.Xb(46,"mat-label"),I.Lc(47,"Exrate"),I.Wb(),I.Sb(48,"input",61),I.Xb(49,"mat-checkbox",56),I.fc("change",(function(t){return I.Bc(e),I.jc().setDisabled("ex_rate")})),I.Wb(),I.Wb(),I.Wb(),I.Xb(50,"div",18),I.Xb(51,"mat-form-field",54),I.Xb(52,"mat-label"),I.Lc(53,"Info"),I.Wb(),I.Sb(54,"input",62),I.Xb(55,"mat-checkbox",56),I.fc("change",(function(t){return I.Bc(e),I.jc().setDisabled("info")})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.xc(33),t=I.xc(42),n=I.jc();I.pc("formGroup",n.formEdit),I.Db(3),I.pc("disabled",0==n.selected.length),I.Db(4),I.Ic("height",n.height,"px"),I.Db(7),I.pc("ngForOf",n.total.currency),I.Db(1),I.pc("ngIf",n.total.currency.length>0),I.Db(1),I.pc("ngClass",I.rc(21,fn,0==n.total.currency.length)),I.Db(1),I.pc("ngClass",I.rc(23,gn,n.total.VND<0)),I.Db(1),I.Nc(" ",I.mc(19,18,n.total.VND,"1.0-0")," Ex VND "),I.Db(7),I.pc("checked",n.check.debit),I.Db(5),I.pc("matDatepicker",e),I.Db(1),I.pc("for",e),I.Db(3),I.pc("checked",n.check.issue_date),I.Db(5),I.pc("matDatepicker",t),I.Db(1),I.pc("for",t),I.Db(3),I.pc("checked",n.check.pay_date),I.Db(6),I.pc("checked",n.check.ex_rate),I.Db(6),I.pc("checked",n.check.info)}}let Sn=(()=>{class e{constructor(e,t,n,i,o,r){this.formBuilder=e,this.authService=t,this.commonService=n,this.router=i,this.datePipe=o,this.route=r,this.fitlerShipment=new I.o,this.typeChange=new I.o,this.updateSelectItem=new I.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({pay_party:[null],issue_party:[null],customer:[null],agent:[null,P.y.required],voyage:[null],price:[null],currency:[null],payment_center:[null],debit:[null],date_from:[null],date_to:[null],month:[null],year:[null]}),this.formEdit=this.formBuilder.group({debit:[{value:null,disabled:!0}],issue_date:[{value:null,disabled:!0}],pay_date:[{value:null,disabled:!0}],ex_rate:[{value:null,disabled:!0}],info:[{value:null,disabled:!0}]}),this.check={debit:!1,issue_date:!1,pay_date:!1,ex_rate:!1,info:!1},this.now=new Date,this._unsubscribeAll=new j.a}ngOnInit(){this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.filteredCustomer=this.form.controls.pay_party.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"partner_name",this.customer):[])),this.filteredSupplier=this.form.controls.issue_party.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"partner_name",this.supplier):[])),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"partner_name",this.customer):[])),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.short_name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"short_name",this.agent):[])),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"name",this.voyage):[])),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.code:null),Object(R.a)(e=>e?this.commonService.filterData(e,"code",this.price):[])),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(F.a)(""),Object(R.a)(e=>e?"string"==typeof e?e:e.name:null),Object(R.a)(e=>e?this.commonService.filterData(e,"name",this.country):[])),this.form.controls.agent.valueChanges.subscribe(e=>{if("string"!=typeof e){let t=this.agent.find(t=>t.id==e);t&&this.form.controls.payment_center.setValue(t.country)}})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleAllSelection(){this.form.controls.price.patchValue(this.allSelected.selected?[...this.price.map(e=>e.id),0]:[])}tosslePerOne(e){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.price.value&&this.form.controls.price.value.length==this.price.length&&this.allSelected.select()}getMonthTime(e){let t,n,i=this.form.controls.year.value,o=this.form.controls.month.value,r=new Date,a=r.getMonth(),c=r.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,a,1),n=new Date(c,a+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):i&&(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}clearForm(){this.searchNgForm.resetForm()}onSearchFormSubmit(e){if(e.valid){"string"==typeof e.value.pay_party&&this.form.controls.pay_party.setValue(null),"string"==typeof e.value.issue_party&&this.form.controls.issue_party.setValue(null),"string"==typeof e.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof e.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof e.value.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof e.value.price&&this.form.controls.price.setValue(null);let t=JSON.parse(JSON.stringify(e.value));t.date_from&&(t.date_from=this.datePipe.transform(new Date(t.date_from),"MM/dd/yyyy")),t.date_to&&(t.date_to=this.datePipe.transform(new Date(t.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(t)}}setCheck(e){e.check=!e.check}setDisabled(e){this.check[e]?this.formEdit.controls[e].disable():this.formEdit.controls[e].enable(),this.check[e]=!this.check[e]}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(P.d),I.Rb(E.a),I.Rb(J.a),I.Rb(i.g),I.Rb(T.f),I.Rb(i.a))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-sidebar"]],viewQuery:function(e,t){var n;1&e&&(I.Sc(tn,!0),I.Sc(nn,!0)),2&e&&(I.wc(n=I.gc())&&(t.searchNgForm=n.first),I.wc(n=I.gc())&&(t.allSelected=n.first))},inputs:{formSearch:"formSearch",customer:"customer",supplier:"supplier",agent:"agent",voyage:"voyage",price:"price",currency:"currency",country:"country",type:"type",selected:"selected",total:"total",height:"height"},outputs:{fitlerShipment:"fitlerShipment",typeChange:"typeChange",updateSelectItem:"updateSelectItem"},decls:2,vars:2,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit",4,"ngIf"],["name","form",3,"formGroup","keydown.enter",4,"ngIf"],["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","pay_party","matInput","","formControlName","pay_party",3,"matAutocomplete"],[3,"displayWith"],["autoCus1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","issue_party","matInput","","formControlName","issue_party",3,"matAutocomplete"],["autoSup1","matAutocomplete"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete"],["autoCus2","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent","required","",3,"matAutocomplete"],["autoSup2","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],[4,"ngIf"],["inputCheck","","aria-label","voyage","matInput","","formControlName","voyage",3,"matAutocomplete"],["autoVoyage","matAutocomplete"],["formControlName","price","multiple",""],[3,"value","click"],["allSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","currency"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["inputCheck","","aria-label","debit","matInput","","formControlName","debit"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],[3,"value","matTooltip"],["name","form",3,"formGroup","keydown.enter"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"disabled","click"],[1,"nav","material2"],["fxFlex","100",1,"group","mt-24"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],["class","item-divider",4,"ngIf"],[1,"item","mb-8",3,"ngClass"],[1,"font-size-16","text-bold",3,"ngClass"],["appearance","outline",1,"padding-item","w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","debit"],["matPrefix","",3,"checked","change"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["issue_date",""],["inputCheck","","matInput","","name","pay_date","formControlName","pay_date",3,"matDatepicker","change"],["pay_date",""],["type","number","inputCheck","","matInput","","formControlName","ex_rate"],["inputCheck","","matInput","","formControlName","info"],[1,"item",3,"ngClass"],[1,"item-divider"]],template:function(e,t){1&e&&(I.Jc(0,hn,126,56,"form",0),I.Jc(1,xn,56,25,"form",1)),2&e&&(I.pc("ngIf","form"==t.type),I.Db(1),I.pc("ngIf","edit"==t.type))},directives:[T.t,P.A,P.q,P.h,B.d,B.c,c.b,B.b,$.a,l.c,l.f,u.b,P.b,r.c,P.p,P.g,r.a,T.s,P.w,d.a,X.n,a.b,a.d,l.h,a.a,p.a,l.b,T.q,me.a,v.a,l.g,P.u],pipes:[T.b,T.g],styles:["soa-agent-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}soa-agent-sidebar .navbar-scroll-container{background:#fff!important}soa-agent-sidebar .navbar-scroll-container .navbar-content{padding-top:0}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}soa-agent-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function Dn(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",9),I.Xb(1,"div",10),I.Xb(2,"soa-agent-sidebar",11),I.fc("fitlerShipment",(function(t){return I.Bc(e),I.jc().fitlerShipment(t)}))("typeChange",(function(t){return I.Bc(e),I.jc().typeChange(t)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(2),I.pc("height",e.height)("type",e.type)("selected",e.selected)("total",e.total)("formSearch",e.formSearch)("customer",e.customer)("supplier",e.supplier)("agent",e.agent)("voyage",e.voyage)("price",e.price)("currency",e.currency)("country",e.country)}}let _n=(()=>{class e{constructor(e,t,n,i,o,r,a){if(this._fuseSidebarService=e,this.authService=t,this.soaAgentService=n,this.commonService=i,this.datePipe=o,this._matDialog=r,this.router=a,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this._unsubscribeAll=new j.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let e=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(e)}}ngOnInit(){this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch.formSearch,this.user=this.authService.user,this.authService.windowSizeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-12-12-56}),this.authService.changeScreen.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-12-12-56:this.authService.screenHeight-64-12-12-56}),this.soaAgentService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.soaAgentService.dataCustomer,this.supplier=this.soaAgentService.dataSupplier,this.users=this.soaAgentService.users}),this.soaAgentService.onDataItemChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.soaAgentService.agent,this.commodity=this.soaAgentService.commodity,this.packageType=this.soaAgentService.packageType,this.currency=this.soaAgentService.currency,this.country=this.soaAgentService.country,this.depot=this.soaAgentService.depot,this.price=this.soaAgentService.price}),this.soaAgentService.onVesselImpChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.soaAgentService.shipmentAddInfo&&(this.costExp=this.soaAgentService.shipmentAddInfo.filter(e=>0===e.checkPrice)),this.soaAgentService.shipmentImpAddInfo&&(this.costImp=this.soaAgentService.shipmentImpAddInfo.filter(e=>0===e.checkPrice))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.soaAgentService)}fitlerShipment(e){this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then(t=>{this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getShipment(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}typeChange(e){this.type=e}searchFilter(e){this.soaAgentService.onSearchTextChanged.next(e)}updateItem(e){this.dialogRef=this._matDialog.open(Gt,{panelClass:"soa-agent-modal-dialog",data:{label:"Edit "+e.type_name+": Contract price "+e.price_contract+e.currency_code_contract,contract:{amount:e.price_contract,currency:e.currency_code_contract},data:e}}),this.dialogRef.afterClosed().subscribe(e=>{e&&(this.authService.onRequestChanged.next(!0),this.soaAgentService.updateSelCost(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?this.getShipment():(console.error(e),alert("update error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("update error")}))})}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(te.a),I.Rb(E.a),I.Rb(ce),I.Rb(J.a),I.Rb(T.f),I.Rb(f.b),I.Rb(i.g))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-error"]],decls:11,vars:9,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],["fxLayout","column",1,"pl-8","pt-8",2,"overflow","auto"],["fxLayout","row wrap"],["fxFlex","100"],[3,"label","data","updateItem"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,Dn,3,12,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"div",6),I.Xb(7,"div",7),I.Xb(8,"soa-agent-error-view",8),I.fc("updateItem",(function(e){return t.updateItem(e)})),I.Wb(),I.Wb(),I.Xb(9,"div",7),I.Xb(10,"soa-agent-error-view",8),I.fc("updateItem",(function(e){return t.updateItem(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.Ic("height",t.height,"px"),I.Db(3),I.pc("label","Inward")("data",t.costImp),I.Db(2),I.pc("label","Outward")("data",t.costExp))},directives:[pe.a,T.t,$.a,ge,B.d,B.b,en,Fe.a,Sn],styles:["soa-agent-error{width:100%}"],encapsulation:2}),e})();const Xn=["invoice"];function Wn(e,t){if(1&e&&(I.Xb(0,"tr",17),I.Xb(1,"td"),I.Lc(2,"DETENTION COLLECTION"),I.Wb(),I.Xb(3,"td"),I.Lc(4),I.kc(5,"number"),I.Wb(),I.Xb(6,"td"),I.Lc(7,"5% Surcharge"),I.Wb(),I.Xb(8,"td"),I.Lc(9),I.kc(10,"number"),I.Wb(),I.Xb(11,"td"),I.Lc(12,"7% GST"),I.Wb(),I.Xb(13,"td"),I.Lc(14),I.kc(15,"number"),I.Wb(),I.Xb(16,"td"),I.Lc(17,"Refund"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.kc(20,"number"),I.Wb(),I.Wb()),2&e){const e=I.jc(2);I.Db(4),I.Mc(I.mc(5,4,e.totalDem,"1.2-2")),I.Db(5),I.Mc(I.mc(10,7,5*e.totalDem/100,"1.2-2")),I.Db(5),I.Mc(I.mc(15,10,5*e.totalDem/100*7/100,"1.2-2")),I.Db(5),I.Mc(I.mc(20,13,e.totalDem-5*e.totalDem/100-5*e.totalDem/100*7/100,"1.2-2"))}}function wn(e,t){if(1&e&&(I.Xb(0,"tr",17),I.Xb(1,"td"),I.Lc(2,"STORAGE COLLECTION"),I.Wb(),I.Xb(3,"td"),I.Lc(4),I.kc(5,"number"),I.Wb(),I.Wb()),2&e){const e=I.jc(2);I.Db(4),I.Mc(I.mc(5,1,e.totalImp.costNN[e.agent.id]+e.totalExp.costNN[e.agent.id],"1.2-2"))}}function Ln(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.Mc(e)}}function Nn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.Mc(e)}}function kn(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function Cn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.Mc(e)}}function On(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function In(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalImp.revenueVN[e]?n.totalImp.revenueVN[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function Tn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalImp.costVN[e]?n.totalImp.costVN[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function Mn(e,t){1&e&&I.Sb(0,"td")}function An(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalImp.revenueVN[e]?n.totalImp.revenueVN[e]:0)-(n.totalImp.costVN[e]?n.totalImp.costVN[e]:0),"VND"==e?"1.0-0":"1.2-2"))}}function jn(e,t){1&e&&I.Sb(0,"td")}function Vn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalImp.revenueNN[e]?n.totalImp.revenueNN[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function Pn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalImp.costNN[e]?n.totalImp.costNN[e]:0)-(n.agent&&113!=n.agent.id&&"USD"==e?n.totalImp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function Fn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,e.totalImp.costNN[e.agent.id],"1.2-2"))}}function Rn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalImp.revenueNN[e]?n.totalImp.revenueNN[e]:0)-(n.totalImp.costNN[e]?n.totalImp.costNN[e]:0)+(n.agent&&113!=n.agent.id&&"USD"==e?n.totalImp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function En(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-e.totalImp.costNN[e.agent.id],"1.2-2"))}}function Jn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalImp.revenueBalance[e]?n.totalImp.revenueBalance[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function Bn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalImp.costBalance[e]?n.totalImp.costBalance[e]:0)-(n.agent&&113!=n.agent.id&&"USD"==e?n.totalImp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function $n(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,e.totalImp.costNN[e.agent.id],"1.2-2"))}}function qn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalImp.revenueBalance[e]?n.totalImp.revenueBalance[e]:0)-(n.totalImp.costBalance[e]?n.totalImp.costBalance[e]:0)+(n.agent&&113!=n.agent.id&&"USD"==e?n.totalImp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function zn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-e.totalImp.costNN[e.agent.id],"1.2-2"))}}function Un(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.Mc(e)}}function Yn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.Mc(e)}}function Hn(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function Gn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit;I.Db(1),I.Mc(e)}}function Qn(e,t){1&e&&(I.Xb(0,"td",25),I.Lc(1,"Storage"),I.Wb()),2&e&&I.pc("matTooltip","Storage, Clearning, Repair charges")}function Kn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalExp.revenueVN[e]?n.totalExp.revenueVN[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function Zn(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalExp.costVN[e]?n.totalExp.costVN[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function ei(e,t){1&e&&I.Sb(0,"td")}function ti(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalExp.revenueVN[e]?n.totalExp.revenueVN[e]:0)-(n.totalExp.costVN[e]?n.totalExp.costVN[e]:0),"VND"==e?"1.0-0":"1.2-2"))}}function ni(e,t){1&e&&I.Sb(0,"td")}function ii(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalExp.revenueNN[e]?n.totalExp.revenueNN[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function oi(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalExp.costNN[e]?n.totalExp.costNN[e]:0)-("USD"==e&&n.agent&&113!=n.agent.id?n.totalExp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function ri(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,e.totalExp.costNN[e.agent.id],"1.2-2"))}}function ai(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalExp.revenueNN[e]?n.totalExp.revenueNN[e]:0)-(n.totalExp.costNN[e]?n.totalExp.costNN[e]:0)+("USD"==e&&n.agent&&113!=n.agent.id?n.totalExp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function ci(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-e.totalExp.costNN[e.agent.id],"1.2-2"))}}function si(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,n.totalExp.revenueBalance[e]?n.totalExp.revenueBalance[e]:0,"VND"==e?"1.0-0":"1.2-2"))}}function li(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalExp.costBalance[e]?n.totalExp.costBalance[e]:0)-("USD"==e&&n.agent&&113!=n.agent.id?n.totalExp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function bi(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,e.totalExp.costNN[e.agent.id],"1.2-2"))}}function pi(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,(n.totalExp.revenueBalance[e]?n.totalExp.revenueBalance[e]:0)-(n.totalExp.costBalance[e]?n.totalExp.costBalance[e]:0)+("USD"==e&&n.agent&&113!=n.agent.id?n.totalExp.costNN[n.agent.id]:0),"VND"==e?"1.0-0":"1.2-2"))}}function ui(e,t){if(1&e&&(I.Xb(0,"td",22),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Db(1),I.Mc(I.mc(2,1,0-e.totalExp.costNN[e.agent.id],"1.2-2"))}}function mi(e,t){if(1&e&&(I.Xb(0,"div",14),I.Xb(1,"table",15),I.Xb(2,"tbody"),I.Jc(3,Wn,21,16,"tr",16),I.Jc(4,wn,6,4,"tr",16),I.Xb(5,"tr",17),I.Xb(6,"td"),I.Xb(7,"div",18),I.Xb(8,"span"),I.Lc(9,"INWARD"),I.Wb(),I.Xb(10,"span"),I.Lc(11,"ETA for shipment arrive"),I.Wb(),I.Wb(),I.Wb(),I.Xb(12,"td"),I.Lc(13,"Revenue"),I.Wb(),I.Xb(14,"td"),I.Lc(15,"Cost"),I.Wb(),I.Xb(16,"td"),I.Lc(17,"Profit"),I.Wb(),I.Wb(),I.Xb(18,"tr",19),I.Sb(19,"td"),I.Jc(20,Ln,2,1,"td",20),I.Jc(21,Nn,2,1,"td",20),I.Jc(22,kn,2,1,"td",21),I.Jc(23,Cn,2,1,"td",20),I.Jc(24,On,2,1,"td",21),I.Xb(25,"td",22),I.Lc(26,"Exchange VND"),I.Wb(),I.Wb(),I.Xb(27,"tr"),I.Xb(28,"td"),I.Lc(29,"VN"),I.Wb(),I.Jc(30,In,3,4,"td",20),I.Jc(31,Tn,3,4,"td",20),I.Jc(32,Mn,1,0,"td",23),I.Jc(33,An,3,4,"td",20),I.Jc(34,jn,1,0,"td",23),I.Xb(35,"td",22),I.Lc(36),I.kc(37,"number"),I.Wb(),I.Wb(),I.Xb(38,"tr"),I.Xb(39,"td"),I.Lc(40,"NN"),I.Wb(),I.Jc(41,Vn,3,4,"td",20),I.Jc(42,Pn,3,4,"td",20),I.Jc(43,Fn,3,4,"td",24),I.Jc(44,Rn,3,4,"td",20),I.Jc(45,En,3,4,"td",24),I.Xb(46,"td",22),I.Lc(47),I.kc(48,"number"),I.Wb(),I.Wb(),I.Xb(49,"tr",19),I.Xb(50,"td"),I.Lc(51,"TOTAL"),I.Wb(),I.Jc(52,Jn,3,4,"td",20),I.Jc(53,Bn,3,4,"td",20),I.Jc(54,$n,3,4,"td",24),I.Jc(55,qn,3,4,"td",20),I.Jc(56,zn,3,4,"td",24),I.Xb(57,"td",22),I.Lc(58),I.kc(59,"number"),I.Wb(),I.Wb(),I.Xb(60,"tr",17),I.Xb(61,"td"),I.Xb(62,"div",18),I.Xb(63,"span"),I.Lc(64,"OUTWARD"),I.Wb(),I.Xb(65,"span"),I.Lc(66,"ETD for shipment depart"),I.Wb(),I.Wb(),I.Wb(),I.Xb(67,"td"),I.Lc(68,"Revenue"),I.Wb(),I.Xb(69,"td"),I.Lc(70,"Cost"),I.Wb(),I.Xb(71,"td"),I.Lc(72,"Profit"),I.Wb(),I.Wb(),I.Xb(73,"tr",19),I.Sb(74,"td"),I.Jc(75,Un,2,1,"td",20),I.Jc(76,Yn,2,1,"td",20),I.Jc(77,Hn,2,1,"td",21),I.Jc(78,Gn,2,1,"td",20),I.Jc(79,Qn,2,1,"td",21),I.Xb(80,"td",22),I.Lc(81,"Exchange VND"),I.Wb(),I.Wb(),I.Xb(82,"tr"),I.Xb(83,"td"),I.Lc(84,"VN"),I.Wb(),I.Jc(85,Kn,3,4,"td",20),I.Jc(86,Zn,3,4,"td",20),I.Jc(87,ei,1,0,"td",23),I.Jc(88,ti,3,4,"td",20),I.Jc(89,ni,1,0,"td",23),I.Xb(90,"td",22),I.Lc(91),I.kc(92,"number"),I.Wb(),I.Wb(),I.Xb(93,"tr"),I.Xb(94,"td"),I.Lc(95,"NN"),I.Wb(),I.Jc(96,ii,3,4,"td",20),I.Jc(97,oi,3,4,"td",20),I.Jc(98,ri,3,4,"td",24),I.Jc(99,ai,3,4,"td",20),I.Jc(100,ci,3,4,"td",24),I.Xb(101,"td",22),I.Lc(102),I.kc(103,"number"),I.Wb(),I.Wb(),I.Xb(104,"tr",19),I.Xb(105,"td"),I.Lc(106,"TOTAL"),I.Wb(),I.Jc(107,si,3,4,"td",20),I.Jc(108,li,3,4,"td",20),I.Jc(109,bi,3,4,"td",24),I.Jc(110,pi,3,4,"td",20),I.Jc(111,ui,3,4,"td",24),I.Xb(112,"td",22),I.Lc(113),I.kc(114,"number"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc();I.Db(3),I.pc("ngIf",e.totalDem&&113==e.agent.id),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(8),I.Eb("colspan",e.totalImp.currency.length),I.Db(2),I.Eb("colspan",e.totalImp.currency.length+(e.agent&&113!=e.agent.id?1:0)),I.Db(2),I.Eb("colspan",e.totalImp.currency.length+1+(e.agent&&113!=e.agent.id?1:0)),I.Db(4),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(6),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(2),I.Mc(I.mc(37,54,e.totalImp.revenueVN.ALL-e.totalImp.costVN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(2),I.Mc(I.mc(48,57,e.totalImp.revenueNN.ALL-e.totalImp.costNN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalImp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(2),I.Mc(I.mc(59,60,e.totalImp.revenueVN.ALL+e.totalImp.revenueNN.ALL-(e.totalImp.costVN.ALL+e.totalImp.costNN.ALL),"1.0-0")),I.Db(9),I.Eb("colspan",e.totalExp.currency.length),I.Db(2),I.Eb("colspan",e.totalExp.currency.length+(e.agent&&113!=e.agent.id?1:0)),I.Db(2),I.Eb("colspan",e.totalExp.currency.length+1+(e.agent&&113!=e.agent.id?1:0)),I.Db(4),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(6),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(2),I.Mc(I.mc(92,63,e.totalExp.revenueVN.ALL-e.totalExp.costVN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(2),I.Mc(I.mc(103,66,e.totalExp.revenueNN.ALL-e.totalExp.costNN.ALL,"1.0-0")),I.Db(5),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(1),I.pc("ngForOf",e.totalExp.currency),I.Db(1),I.pc("ngIf",e.agent&&113!=e.agent.id),I.Db(2),I.Mc(I.mc(114,69,e.totalExp.revenueVN.ALL+e.totalExp.revenueNN.ALL-(e.totalExp.costVN.ALL+e.totalExp.costNN.ALL),"1.0-0"))}}let di=(()=>{class e{constructor(){this.print=new I.o,this.type=!0,this._unsubscribeAll=new j.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.isprint&&(e.isprint.currentValue||null==e.isprint.currentValue)&&(this.isprint=e.isprint.currentValue),e.totalImp&&e.totalImp.currentValue&&(this.totalImp=e.totalImp.currentValue),e.totalExp&&e.totalExp.currentValue&&(this.totalExp=e.totalExp.currentValue)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-view-form"]],viewQuery:function(e,t){var n;1&e&&I.Sc(Xn,!0),2&e&&I.wc(n=I.gc())&&(t.invoice=n.first)},inputs:{height:"height",isprint:"isprint",agent:"agent",dateFrom:"dateFrom",dateTo:"dateTo",totalImp:"totalImp",totalExp:"totalExp",totalDem:"totalDem"},outputs:{print:"print"},features:[I.Bb()],decls:26,vars:6,consts:[["fxLayout","column","id","print-content",2,"overflow","auto"],["fxLayout","row","fxLayoutAlign","start",1,"invoice-container"],[1,"card"],["invoice",""],[1,"header"],["fxLayout","row","fxLayoutAlign","start"],["fxFlex","100","fxLayout","column",1,"header-label"],[1,"title","font-size-20",2,"font-family","verdana"],["fxLayout","row wrap","fxLayoutAlign","start",1,"font-size-18"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","start","fxFlex","1 1 auto"],["fxFlex","30"],["fxFlex","70"],["class","content","fxLayout","column",4,"ngIf"],["fxLayout","column",1,"content"],[1,"simple"],["class","text-bold accent-200-bg",4,"ngIf"],[1,"text-bold","accent-200-bg"],["fxLayout","column"],[1,"text-bold"],["class","text-right",4,"ngFor","ngForOf"],["class","text-right",3,"matTooltip",4,"ngIf"],[1,"text-right"],[4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right",3,"matTooltip"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Xb(1,"div",1),I.Xb(2,"div",2,3),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"div",6),I.Xb(7,"span",7),I.Lc(8,"SE GLOBAL CONTAINER LINES"),I.Wb(),I.Wb(),I.Wb(),I.Sb(9,"br"),I.Xb(10,"div",8),I.Xb(11,"div",9),I.Xb(12,"div",10),I.Xb(13,"div",11),I.Lc(14,"AGENT NAME :"),I.Wb(),I.Xb(15,"div",12),I.Lc(16),I.Wb(),I.Wb(),I.Wb(),I.Xb(17,"div",9),I.Xb(18,"div",10),I.Xb(19,"div",11),I.Lc(20,"SOA :"),I.Wb(),I.Xb(21,"div",12),I.Lc(22),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Sb(23,"br"),I.Sb(24,"br"),I.Jc(25,mi,115,72,"div",13),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Ic("height",t.height,"px"),I.Db(16),I.Mc(null==t.agent?null:t.agent.full_name),I.Db(6),I.Oc("from ",t.dateFrom?t.dateFrom:"..."," to ",t.dateTo?t.dateTo:"...",""),I.Db(3),I.pc("ngIf",t.agent))},directives:[B.d,B.c,B.b,T.t,T.s,p.a],pipes:[T.g],styles:["soa-agent-view-form{font-family:arial}soa-agent-view-form #print-content .invoice-container{padding:0}soa-agent-view-form #print-content .invoice-container .card{width:100%;padding:32px;overflow:hidden;background:#fff}soa-agent-view-form #print-content .invoice-container .card .header .client .invoice-number{font-size:9px;padding-bottom:4px}soa-agent-view-form #print-content .invoice-container .card .header .client .invoice-number .title{color:rgba(0,0,0,.54)}soa-agent-view-form #print-content .invoice-container .card .header .client .invoice-number .number{color:rgba(0,0,0,.87);padding-left:6px}soa-agent-view-form #print-content .invoice-container .card .header .client .info{font-size:7px;color:rgba(0,0,0,.54);line-height:10px}soa-agent-view-form #print-content .invoice-container .card .header .issuer .logo{padding:0}soa-agent-view-form #print-content .invoice-container .card .header .header-label .title{font-size:24px;font-weight:700}soa-agent-view-form #print-content .invoice-container .card .header .header-label .info{font-size:18px}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper{padding:0}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper .mat-form-field-flex{-webkit-box-align:center;align-items:center}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix,soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-wrapper .mat-form-field-flex .mat-input-element{display:none}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-prefix .mat-datepicker-toggle-default-icon,soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:24px;color:#039be5}soa-agent-view-form #print-content .invoice-container .card .header .header-label #print-input-month .mat-form-field-underline{background:#fff}soa-agent-view-form #print-content .invoice-container .card .content .height19{height:19px}soa-agent-view-form #print-content .invoice-container .card .content .table-volume{border-collapse:collapse}soa-agent-view-form #print-content .invoice-container .card .content .table-volume td{border:1px solid #000}soa-agent-view-form #print-content .invoice-container .card .content #editClosingtime,soa-agent-view-form #print-content .invoice-container .card .content #editEtd,soa-agent-view-form #print-content .invoice-container .card .content #editTerminal{height:26px}@media print{soa-agent-view-form #print-content{height:auto!important;background:#fff}soa-agent-view-form #print-content .invoice-container{padding-left:20pt;padding-right:10pt}soa-agent-view-form #print-content .invoice-container .card{width:100%;min-width:0;background:none;padding:0;box-shadow:none}soa-agent-view-form #print-content .invoice-container .card .header .issuer{padding-right:0;margin-right:0}soa-agent-view-form #edit-button,soa-agent-view-form #editClosingtime,soa-agent-view-form #editEtd,soa-agent-view-form #editTerminal,soa-agent-view-form #mail-button,soa-agent-view-form #print-button,soa-agent-view-form #print-input-month{display:none}}"],encapsulation:2,data:{animation:et.a}}),e})();function hi(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",6),I.Xb(1,"div",7),I.Xb(2,"soa-agent-sidebar",8),I.fc("fitlerShipment",(function(t){return I.Bc(e),I.jc().fitlerShipment(t)}))("typeChange",(function(t){return I.Bc(e),I.jc().typeChange(t)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(2),I.pc("height",e.height)("type",e.type)("selected",e.selected)("total",e.total)("formSearch",e.formSearch)("customer",e.customer)("supplier",e.supplier)("agent",e.agent)("voyage",e.voyage)("price",e.price)("currency",e.currency)("country",e.country)}}let fi=(()=>{class e{constructor(e,t,n,i,o,r,a){if(this._fuseSidebarService=e,this.authService=t,this.soaAgentService=n,this.soaAgentDemService=i,this.commonService=o,this.datePipe=r,this.router=a,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this._unsubscribeAll=new j.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let e=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(e)}}ngOnInit(){this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch?this.soaAgentService.currenSearch.formSearch:this.soaAgentService.defaultSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-12-12-56}),this.authService.changeScreen.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-12-12-56:this.authService.screenHeight-64-12-12-56}),this.soaAgentService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.soaAgentService.dataCustomer,this.supplier=this.soaAgentService.dataSupplier,this.users=this.soaAgentService.users}),this.soaAgentService.onDataItemChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.soaAgentService.agent,this.commodity=this.soaAgentService.commodity,this.packageType=this.soaAgentService.packageType,this.currency=this.soaAgentService.currency,this.country=this.soaAgentService.country,this.depot=this.soaAgentService.depot,this.price=this.soaAgentService.price}),this.soaAgentService.onTypeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{setTimeout(()=>{this.type=e},100)}),this.soaAgentService.onVesselChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.shipmentsExp=e[0],this.voyageExp=e[1],this.arrTypeExp=e[2],this.sptPriceExp=e[3],this.dataBillExp=e[4],this.totalExp=e[5],this.selectAgent=this.soaAgentService.selectAgent,this.dateFrom=this.soaAgentService.dateFrom,this.dateTo=this.soaAgentService.dateTo}),this.soaAgentService.onVesselImpChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.shipmentsImp=e[0],this.voyageImp=e[1],this.arrTypeImp=e[2],this.sptPriceImp=e[3],this.dataBillImp=e[4],this.totalImp=e[5]}),this.soaAgentDemService.onEmptyChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.totalDem=this.soaAgentDemService.total})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.soaAgentService)}fitlerShipment(e){this.soaAgentService.currenSearch.formSearch=e,113==e.agent?(this.authService.onRequestChanged.next(!0),Promise.all([this.soaAgentService.getSelShipmentSoaAgent(e),this.soaAgentDemService.getShipments(e)]).then(e=>{this.authService.onRequestChanged.next(!1)},e=>{this.authService.onRequestChanged.next(!1),alert("Submit fail")})):(this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{console.error(e),this.authService.onRequestChanged.next(!1),alert("Submit fail")}))}getShipment(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getReportData(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}searchFilter(e){this.soaAgentService.onSearchTextChanged.next(e)}typeChange(e){this.type=e}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(te.a),I.Rb(E.a),I.Rb(ce),I.Rb(Ze),I.Rb(J.a),I.Rb(T.f),I.Rb(i.g))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-view"]],decls:6,vars:10,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"height","agent","dateFrom","dateTo","totalImp","totalExp","totalDem"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,hi,3,12,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Sb(5,"soa-agent-view-form",5),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.pc("height",t.height)("agent",t.selectAgent)("dateFrom",t.dateFrom)("dateTo",t.dateTo)("totalImp",t.totalImp)("totalExp",t.totalExp)("totalDem",t.totalDem))},directives:[pe.a,T.t,$.a,ge,di,Fe.a,Sn],styles:["soa-agent-view{width:100%}"],encapsulation:2}),e})();function gi(e,t){if(1&e&&(I.Xb(0,"th",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("top",n.inverseOfTranslation),I.Db(1),I.Mc(e)}}function vi(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),I.Lc(1,"add"),I.Wb()}}function yi(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),I.Lc(1,"removed"),I.Wb()}}function xi(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function Si(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),I.Lc(1,"add"),I.Wb()}}function Di(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),I.Lc(1,"removed"),I.Wb()}}function _i(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function Xi(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costVNOpen=!n.costVNOpen})),I.Lc(1,"add"),I.Wb()}}function Wi(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costVNOpen=!n.costVNOpen})),I.Lc(1,"removed"),I.Wb()}}function wi(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function Li(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costNNOpen=!n.costNNOpen})),I.Lc(1,"add"),I.Wb()}}function Ni(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costNNOpen=!n.costNNOpen})),I.Lc(1,"removed"),I.Wb()}}function ki(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function Ci(e,t){if(1&e&&(I.Xb(0,"td",46),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc().$implicit,i=I.jc().$implicit;I.Db(1),I.Mc(n==e?i[e]:"")}}function Oi(e,t){1&e&&(I.Xb(0,"mat-chip"),I.Lc(1,"Booking"),I.Wb())}function Ii(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Stuffing"),I.Wb())}function Ti(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Ready to load"),I.Wb())}function Mi(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Loaded"),I.Wb())}function Ai(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Discharge"),I.Wb())}function ji(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Pick up"),I.Wb())}function Vi(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Complete"),I.Wb())}const Pi=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function Fi(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,Pi,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function Ri(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["revenueVN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function Ei(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ri,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.revenueVNOpen)}}function Ji(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ei,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Pi,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}const Bi=function(e,t){return{paid:e,"accent-100-bg":t}};function $i(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).deletePrice.emit(i)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).createCom.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Bi,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function qi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,$i,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function zi(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,Pi,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function Ui(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["revenueNN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function Yi(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Ui,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.revenueNNOpen)}}function Hi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Yi,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Pi,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}function Gi(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).deletePrice.emit(i)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).createCom.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Bi,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function Qi(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Gi,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function Ki(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,Pi,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function Zi(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["costVN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function eo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Zi,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.costVNOpen)}}function to(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,eo,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Pi,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}function no(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).deletePrice.emit(i)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).createCom.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Bi,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function io(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,no,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function oo(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,Pi,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function ro(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["costNN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function ao(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ro,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.costNNOpen)}}function co(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,ao,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,Pi,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}function so(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).deletePrice.emit(i)})),I.Lc(4),I.Wb(),I.Xb(5,"span",62),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).createCom.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,Bi,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function lo(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,so,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function bo(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",63),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2).$implicit;return I.jc(2).createItem.emit([n,"Revenue"])})),I.Xb(1,"mat-icon",64),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Revenue"),I.Wb(),I.Wb()}}function po(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",63),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2).$implicit;return I.jc(2).createItem.emit([n,"Cost"])})),I.Xb(1,"mat-icon",64),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Cost"),I.Wb(),I.Wb()}}const uo=function(e){return{"row-even":e}},mo=function(e){return{"red-600-fg":e}};function ho(e,t){if(1&e){const e=I.Yb();I.Xb(0,"tr",26),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",27),I.Xb(4,"a",28),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit;return I.jc(2).openVessel.emit(n.key)})),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",29),I.Lc(7),I.Wb(),I.Xb(8,"td",4),I.Lc(9),I.Wb(),I.Xb(10,"td",4),I.Lc(11),I.Wb(),I.Xb(12,"td",5),I.Lc(13),I.kc(14,"date"),I.Wb(),I.Xb(15,"td",5),I.Lc(16),I.kc(17,"date"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Xb(20,"td",30),I.Xb(21,"a",31),I.Lc(22),I.Wb(),I.Wb(),I.Jc(23,Ci,2,1,"td",32),I.Xb(24,"td",33),I.Lc(25),I.Wb(),I.Xb(26,"td",33),I.Lc(27),I.Wb(),I.Xb(28,"td"),I.Xb(29,"mat-chip-list",34),I.Jc(30,Oi,2,0,"mat-chip",35),I.Jc(31,Ii,2,0,"mat-chip",36),I.Jc(32,Ti,2,0,"mat-chip",37),I.Jc(33,Mi,2,0,"mat-chip",38),I.Jc(34,Ai,2,0,"mat-chip",36),I.Jc(35,ji,2,0,"mat-chip",37),I.Jc(36,Vi,2,0,"mat-chip",38),I.Wb(),I.Wb(),I.Jc(37,Fi,3,8,"td",39),I.Jc(38,Ji,10,9,"td",40),I.Jc(39,qi,2,1,"td",40),I.Jc(40,zi,3,8,"td",39),I.Jc(41,Hi,10,9,"td",40),I.Jc(42,Qi,2,1,"td",40),I.Jc(43,Ki,3,8,"td",39),I.Jc(44,to,10,9,"td",40),I.Jc(45,io,2,1,"td",40),I.Jc(46,oo,3,8,"td",39),I.Jc(47,co,10,9,"td",40),I.Jc(48,lo,2,1,"td",40),I.Xb(49,"td",41),I.Lc(50),I.kc(51,"number"),I.Wb(),I.Xb(52,"td",42),I.Xb(53,"mat-icon",43),I.fc("click",(function(t){return I.Bc(e),t.stopPropagation()})),I.Lc(54,"more_vert"),I.Wb(),I.Xb(55,"mat-menu",null,44),I.Jc(57,bo,5,0,"button",45),I.Jc(58,po,5,0,"button",45),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=t.$implicit,n=I.xc(56),i=I.jc(),o=i.index,r=i.$implicit,a=I.jc(2);I.pc("ngClass",I.rc(53,uo,o%2==0)),I.Db(2),I.Mc(o+1),I.Db(3),I.Mc(r.vessel_full_name),I.Db(1),I.pc("matTooltip",r.supplier_name),I.Db(1),I.Mc(r.supplier_short_name),I.Db(2),I.Mc(r.pol_name),I.Db(2),I.Mc(r.pod_name),I.Db(2),I.Mc(I.mc(14,44,r.depart_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(I.mc(17,47,r.arrive_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(r.code),I.Db(1),I.pc("matTooltip",r.error),I.Db(1),I.pc("ngClass",I.rc(55,mo,r.error))("routerLink","/apps/workflow/shipment/detail/"+r.id+"/soa"),I.Db(1),I.Mc(r.bill),I.Db(1),I.pc("ngForOf",a.arrType),I.Db(1),I.pc("matTooltip",r.customer_name),I.Db(1),I.Mc(r.customer_short_name),I.Db(1),I.pc("matTooltip",r.agent_name),I.Db(1),I.Mc(r.agent_short_name),I.Db(2),I.pc("ngSwitch",r.process),I.Db(1),I.pc("ngSwitchCase",0),I.Db(1),I.pc("ngSwitchCase",1),I.Db(1),I.pc("ngSwitchCase",2),I.Db(1),I.pc("ngSwitchCase",3),I.Db(1),I.pc("ngSwitchCase",4),I.Db(1),I.pc("ngSwitchCase",5),I.Db(1),I.pc("ngSwitchCase",6),I.Db(1),I.pc("ngIf",!a.revenueVNOpen),I.Db(1),I.pc("ngIf",a.revenueVNOpen),I.Db(1),I.pc("ngIf",a.revenueVNOpen),I.Db(1),I.pc("ngIf",!a.revenueNNOpen),I.Db(1),I.pc("ngIf",a.revenueNNOpen),I.Db(1),I.pc("ngIf",a.revenueNNOpen),I.Db(1),I.pc("ngIf",!a.costVNOpen),I.Db(1),I.pc("ngIf",a.costVNOpen),I.Db(1),I.pc("ngIf",a.costVNOpen),I.Db(1),I.pc("ngIf",!a.costNNOpen),I.Db(1),I.pc("ngIf",a.costNNOpen),I.Db(1),I.pc("ngIf",a.costNNOpen),I.Db(1),I.pc("ngClass",I.sc(57,Pi,r.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]+r.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,r.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]+r.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(51,50,r.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]+r.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(3),I.pc("matMenuTriggerFor",n),I.Db(4),I.pc("ngIf",a.permission.create),I.Db(1),I.pc("ngIf",a.permission.create)}}function fo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ho,59,60,"tr",25),I.Ub()),2&e){const e=t.$implicit;I.Db(1),I.pc("ngForOf",e.volume)}}function go(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total[e],"1.0-0"))}}function vo(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.revenueVN.ALL,"1.0-0"))}}function yo(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.revenueVN[e],"VND"==e?"1.0-0":"1.2-2"))}}function xo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,yo,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.revenueVN[e])}}function So(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,xo,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.revenueVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function Do(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function _o(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.revenueNN.ALL,"1.0-0"))}}function Xo(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.revenueNN[e],"VND"==e?"1.0-0":"1.2-2"))}}function Wo(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Xo,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.revenueNN[e])}}function wo(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Wo,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.revenueNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function Lo(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function No(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.costVN.ALL,"1.0-0"))}}function ko(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.costVN[e],"VND"==e?"1.0-0":"1.2-2"))}}function Co(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ko,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.costVN[e])}}function Oo(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Co,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.costVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function Io(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function To(e,t){if(1&e&&(I.Xb(0,"td",66),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.costNN.ALL,"1.0-0"))}}function Mo(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.costNN[e],"VND"==e?"1.0-0":"1.2-2"))}}function Ao(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Mo,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.costNN[e])}}function jo(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",67),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ao,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.costNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function Vo(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function Po(e,t){if(1&e){const e=I.Yb();I.Xb(0,"table",2),I.Xb(1,"thead"),I.Xb(2,"tr"),I.Xb(3,"th"),I.Lc(4,"No"),I.Wb(),I.Xb(5,"th",3),I.Lc(6,"Voyage"),I.Wb(),I.Xb(7,"th",4),I.Lc(8,"Supplier"),I.Wb(),I.Xb(9,"th",4),I.Lc(10,"POL"),I.Wb(),I.Xb(11,"th",4),I.Lc(12,"POD"),I.Wb(),I.Xb(13,"th",5),I.Lc(14,"ETD"),I.Wb(),I.Xb(15,"th",5),I.Lc(16,"ETA"),I.Wb(),I.Xb(17,"th"),I.Lc(18,"Shipment"),I.Wb(),I.Xb(19,"th",6),I.Lc(20,"Bill"),I.Wb(),I.Jc(21,gi,2,3,"th",7),I.Xb(22,"th"),I.Lc(23,"Customer"),I.Wb(),I.Xb(24,"th"),I.Lc(25,"Agent"),I.Wb(),I.Xb(26,"th"),I.Lc(27,"Process"),I.Wb(),I.Xb(28,"th"),I.Xb(29,"div",8),I.Xb(30,"span"),I.Lc(31,"REVENUE VN"),I.Wb(),I.Jc(32,vi,2,0,"mat-icon",9),I.Jc(33,yi,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(34,xi,2,2,"th",11),I.Xb(35,"th"),I.Xb(36,"div",8),I.Xb(37,"span"),I.Lc(38,"REVENUE NN"),I.Wb(),I.Jc(39,Si,2,0,"mat-icon",9),I.Jc(40,Di,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(41,_i,2,2,"th",11),I.Xb(42,"th"),I.Xb(43,"div",8),I.Xb(44,"span"),I.Lc(45,"COST VN"),I.Wb(),I.Jc(46,Xi,2,0,"mat-icon",9),I.Jc(47,Wi,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(48,wi,2,2,"th",11),I.Xb(49,"th"),I.Xb(50,"div",8),I.Xb(51,"span"),I.Lc(52,"COST NN"),I.Wb(),I.Jc(53,Li,2,0,"mat-icon",9),I.Jc(54,Ni,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(55,ki,2,2,"th",11),I.Xb(56,"th",12),I.Lc(57,"PROFIT"),I.Wb(),I.Xb(58,"th",13),I.Xb(59,"mat-icon",14),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return t.stopPropagation(),n.printExcel.emit()})),I.Lc(60,"print"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(61,"tbody"),I.Jc(62,fo,2,1,"ng-container",15),I.Wb(),I.Xb(63,"tfoot"),I.Xb(64,"tr"),I.Sb(65,"td"),I.Xb(66,"td",16),I.Lc(67,"Total"),I.Wb(),I.Sb(68,"td"),I.Sb(69,"td"),I.Sb(70,"td"),I.Sb(71,"td"),I.Sb(72,"td"),I.Sb(73,"td"),I.Sb(74,"td"),I.Jc(75,go,3,6,"td",17),I.Sb(76,"td"),I.Sb(77,"td"),I.Sb(78,"td"),I.Jc(79,vo,3,6,"td",18),I.Jc(80,So,10,7,"td",19),I.Jc(81,Do,1,2,"td",20),I.Jc(82,_o,3,6,"td",18),I.Jc(83,wo,10,7,"td",19),I.Jc(84,Lo,1,2,"td",20),I.Jc(85,No,3,6,"td",18),I.Jc(86,Oo,10,7,"td",19),I.Jc(87,Io,1,2,"td",20),I.Jc(88,To,3,6,"td",18),I.Jc(89,jo,10,7,"td",19),I.Jc(90,Vo,1,2,"td",20),I.Xb(91,"td",21),I.Lc(92),I.kc(93,"number"),I.Wb(),I.Sb(94,"td"),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(3),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.pc("ngForOf",e.arrType),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("cdkVirtualForOf",e.data),I.Db(3),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(2),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.pc("ngForOf",e.arrType),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.pc("ngIf",!e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.pc("ngIf",!e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.pc("ngIf",!e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.pc("ngIf",!e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(93,92,e.total.revenueVN.ALL+e.total.revenueNN.ALL-e.total.costVN.ALL-e.total.costNN.ALL,"1.0-0")),I.Db(2),I.Ic("bottom",e.inverseOfTranslation2)}}let Fo=(()=>{class e{constructor(e,t){this.commonService=e,this.changeDetector=t,this.createItem=new I.o,this.openVessel=new I.o,this.deletePrice=new I.o,this.createCom=new I.o,this.printExcel=new I.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new j.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,console.log(this.data))}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(J.a),I.Rb(I.h))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-export-table"]],viewQuery:function(e,t){var n;1&e&&I.Sc(ve.e,!0),2&e&&I.wc(n=I.gc())&&(t.viewPort=n.first)},inputs:{data:"data",shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total"},outputs:{createItem:"createItem",openVessel:"openVessel",deletePrice:"deletePrice",createCom:"createCom",printExcel:"printExcel"},features:[I.Bb()],decls:2,vars:1,consts:[["autosize","",1,"h-100-p"],["class","report-table",4,"ngIf"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["color","accent","aria-label","Print",1,"cursor-pointer",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],["class","text-right text-bold teal-200-bg",3,"bottom",4,"ngIf"],["style","padding: 0",3,"bottom",4,"ngIf"],[3,"bottom",4,"ngIf"],[1,"text-right","text-bold","sticky-right-col",2,"z-index","30"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"w-152","sticky-col"],[1,"cursor-pointer",3,"click"],[1,"w-112",3,"matTooltip"],[1,"w-152","sticky-col2",3,"matTooltip"],[1,"cursor-pointer",3,"ngClass","routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["class","text-right text-bold",3,"ngClass",4,"ngIf"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[1,"text-right","text-bold",3,"ngClass"],[2,"padding","0"],[1,"text-right","text-bold","w-100",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes"],[1,"mb-4","font-size-10"],[1,"text-right","text-bold"],[4,"ngFor","ngForOf"],["class","text-right border-right w-80",4,"ngIf"],[1,"text-right","border-right","w-80"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10",3,"click"],[1,"text-right","text-bold",3,"click"],["mat-menu-item","","aria-label","remove",3,"click"],["color","accent"],[1,"text-center","text-bold"],[1,"text-right","text-bold","teal-200-bg"],[1,"text-right","text-bold","w-100"]],template:function(e,t){1&e&&(I.Xb(0,"cdk-virtual-scroll-viewport",0),I.Jc(1,Po,95,95,"table",1),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.data&&t.data.length>0))},directives:[ve.e,ye.a,T.t,T.s,B.d,B.c,b.a,ve.d,T.q,me.a,p.a,i.j,S.c,T.x,T.y,o.c,o.d,S.a,o.a],pipes:[T.g,T.f],styles:["soa-agent-export-table .report-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}soa-agent-export-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}soa-agent-export-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-export-table .report-table td,soa-agent-export-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}soa-agent-export-table .report-table td .mat-standard-chip,soa-agent-export-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}soa-agent-export-table .report-table .paid{background:#fff;color:#000}soa-agent-export-table .report-table .cost-paid{background:#ffe1c2;color:#000}soa-agent-export-table .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}soa-agent-export-table .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}soa-agent-export-table .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}soa-agent-export-table .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}soa-agent-export-table .report-table .row-even{background-color:#eee!important}"],encapsulation:2,data:{animation:et.a}}),e})();function Ro(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",7),I.Xb(1,"div",8),I.Xb(2,"soa-agent-sidebar",9),I.fc("fitlerShipment",(function(t){return I.Bc(e),I.jc().fitlerShipment(t)}))("typeChange",(function(t){return I.Bc(e),I.jc().typeChange(t)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(2),I.pc("height",e.height)("type",e.type)("selected",e.selected)("total",e.total)("formSearch",e.formSearch)("customer",e.customer)("supplier",e.supplier)("agent",e.agent)("price",e.price)("currency",e.currency)("country",e.country)}}let Eo=(()=>{class e{constructor(e,t,n,i,o,r,a){if(this._fuseSidebarService=e,this.authService=t,this.soaAgentService=n,this.commonService=i,this.datePipe=o,this._matDialog=r,this.router=a,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this._unsubscribeAll=new j.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let e=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(e)}}ngOnInit(){this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-12-12-56}),this.authService.changeScreen.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-12-12-56:this.authService.screenHeight-64-12-12-56}),this.soaAgentService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.soaAgentService.dataCustomer,this.supplier=this.soaAgentService.dataSupplier,this.users=this.soaAgentService.users}),this.soaAgentService.onDataItemChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.soaAgentService.agent,this.commodity=this.soaAgentService.commodity,this.packageType=this.soaAgentService.packageType,this.currency=this.soaAgentService.currency,this.country=this.soaAgentService.country,this.depot=this.soaAgentService.depot,this.price=this.soaAgentService.price}),this.soaAgentService.onTypeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{setTimeout(()=>{this.type=e},100)}),this.soaAgentService.onVesselChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.shipments=e[0],this.voyage=e[1],this.arrType=e[2],this.sptPrice=e[3],this.dataBill=e[4],this.total=e[5]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.soaAgentService)}fitlerShipment(e){this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then(t=>{this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getShipment(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getReportData(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}searchFilter(e){this.soaAgentService.onSearchTextChanged.next(e)}typeChange(e){this.type=e}createItem(e){let t=e[1],n=JSON.parse(JSON.stringify(e[0]));if("Revenue"==t){this.partner=this.customer;let e=this.supplier.find(e=>e.id==this.formSearch.agent);if(e){let t=this.customer.find(t=>t.short_name==e.short_name);n.customer=t.id}}"Cost"==t&&(this.partner=this.supplier,n.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ee.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+t,shipmentId:n.id,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n}}),this.dialogRef.componentInstance.createItem.subscribe(e=>{switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":this.soaAgentService.createSelRevenue(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error create "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+t});break;case"Cost":this.soaAgentService.createSelCost(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error create "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+t})}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getShipment()})}deletePrice(e){if(1==this.authService.user&&confirm("Do you want to delete this item?")){this.authService.onRequestChanged.next(!0);let t=e.type_name;switch(t){case"Revenue":this.soaAgentService.deleteSelRevenue(e.id).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+t+" error")});break;case"Cost":this.soaAgentService.deleteSelCost(e.id).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+t+" error")})}}}createCom(e){if(e.price_code.includes("OF")&&1==this.authService.user){let t=e.price_code.includes(20)?"ADF20":"ADF40",n=this.price.find(e=>e.code==t),i=this.currency.find(e=>"USD"==e.code),o=this.supplier.find(e=>113==e.id),r=5*e.amount/100,a=(e.price_code.includes(20),10);r=r<a?a:r,this.createData("Cost",{shipment:e.shipment,price:n,volume:e.volume,amount:r,tax:0,tax_amount:0,currency:i.id,ex_rate:i.exrate,payment_center:o.country,issue_party:o.id,update_by:this.authService.user,create_by:this.authService.user})}else if(1==this.authService.user){let t=e.type_name,n=JSON.parse(JSON.stringify(e));if("Revenue"==t){this.partner=this.customer;let e=this.supplier.find(e=>e.id==this.formSearch.agent);if(e){let t=this.customer.find(t=>t.short_name==e.short_name);n.customer=t.id}}"Cost"==t&&(this.partner=this.supplier,n.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ee.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Edit "+t,shipmentId:n.shipment,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n,data:n}}),this.dialogRef.componentInstance.updateItem.subscribe(e=>{switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":this.soaAgentService.updateSelRevenue(e).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error update "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+t});break;case"Cost":this.soaAgentService.updateSelCost(e).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error update "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+t})}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getShipment()})}}createData(e,t){switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":this.soaAgentService.createSelRevenue(t).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")});break;case"Cost":this.soaAgentService.createSelCost(t).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")})}}printExcel(e){this.soaAgentService.buildExcelData()}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(te.a),I.Rb(E.a),I.Rb(ce),I.Rb(J.a),I.Rb(T.f),I.Rb(f.b),I.Rb(i.g))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-export"]],decls:7,vars:12,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[2,"overflow","auto"],[3,"data","arrType","shipments","voyage","price","permission","total","createItem","deletePrice","createCom","printExcel"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,Ro,3,11,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"soa-agent-export-table",6),I.fc("createItem",(function(e){return t.createItem(e)}))("deletePrice",(function(e){return t.deletePrice(e)}))("createCom",(function(e){return t.createCom(e)}))("printExcel",(function(e){return t.printExcel(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.Ic("height",t.height,"px"),I.Db(1),I.pc("data",t.dataBill)("arrType",t.arrType)("shipments",t.shipments)("voyage",t.voyage)("price",t.price)("permission",t.permission)("total",t.total))},directives:[pe.a,T.t,$.a,ge,Fo,Fe.a,Sn],styles:["soa-agent-export{width:100%}"],encapsulation:2}),e})();function Jo(e,t){if(1&e&&(I.Xb(0,"th",22),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("top",n.inverseOfTranslation),I.Db(1),I.Mc(e)}}function Bo(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),I.Lc(1,"add"),I.Wb()}}function $o(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),I.Lc(1,"removed"),I.Wb()}}function qo(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function zo(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),I.Lc(1,"add"),I.Wb()}}function Uo(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),I.Lc(1,"removed"),I.Wb()}}function Yo(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function Ho(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costVNOpen=!n.costVNOpen})),I.Lc(1,"add"),I.Wb()}}function Go(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costVNOpen=!n.costVNOpen})),I.Lc(1,"removed"),I.Wb()}}function Qo(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function Ko(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",23),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costNNOpen=!n.costNNOpen})),I.Lc(1,"add"),I.Wb()}}function Zo(e,t){if(1&e){const e=I.Yb();I.Xb(0,"mat-icon",24),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2);return t.stopPropagation(),n.costNNOpen=!n.costNNOpen})),I.Lc(1,"removed"),I.Wb()}}function er(e,t){if(1&e&&(I.Xb(0,"th"),I.Lc(1,"Price"),I.Wb()),2&e){const e=I.jc(2);I.Ic("top",e.inverseOfTranslation)}}function tr(e,t){if(1&e&&(I.Xb(0,"td",46),I.Lc(1),I.Wb()),2&e){const e=t.$implicit,n=I.jc().$implicit,i=I.jc().$implicit;I.Db(1),I.Mc(n==e?i[e]:"")}}function nr(e,t){1&e&&(I.Xb(0,"mat-chip"),I.Lc(1,"Booking"),I.Wb())}function ir(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Stuffing"),I.Wb())}function or(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Ready to load"),I.Wb())}function rr(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Loaded"),I.Wb())}function ar(e,t){1&e&&(I.Xb(0,"mat-chip",47),I.Lc(1,"Discharge"),I.Wb())}function cr(e,t){1&e&&(I.Xb(0,"mat-chip",48),I.Lc(1,"Pick up"),I.Wb())}function sr(e,t){1&e&&(I.Xb(0,"mat-chip",49),I.Lc(1,"Complete"),I.Wb())}const lr=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function br(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,lr,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function pr(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["revenueVN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function ur(e,t){if(1&e&&(I.Vb(0),I.Jc(1,pr,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["revenueVN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.revenueVNOpen)}}function mr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,ur,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,lr,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}const dr=function(e,t){return{paid:e,"accent-100-bg":t}};function hr(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).editItem.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,dr,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function fr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,hr,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function gr(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,lr,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function vr(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["revenueNN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function yr(e,t){if(1&e&&(I.Vb(0),I.Jc(1,vr,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["revenueNN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.revenueNNOpen)}}function xr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,yr,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,lr,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}function Sr(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).editItem.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,dr,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function Dr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Sr,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function _r(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,lr,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function Xr(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["costVN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function Wr(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Xr,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["costVN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.costVNOpen)}}function wr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Wr,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,lr,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}function Lr(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).editItem.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,dr,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function Nr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Lr,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function kr(e,t){if(1&e&&(I.Xb(0,"td",50),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.pc("ngClass",I.sc(5,lr,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(2,2,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0"))}}function Cr(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(2).$implicit,n=I.jc().$implicit;I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,n.profitCurrency["costNN"+(t.includes("20")?"20":t.includes("40")?"40":t)][e],"VND"==e?"1.0-0":"1.2-2"))}}function Or(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Cr,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(2).$implicit,i=I.jc().$implicit,o=I.jc(2);I.Db(1),I.pc("ngIf",i.profitCurrency["costNN"+(n.includes("20")?"20":n.includes("40")?"40":n)][e]&&o.costNNOpen)}}function Ir(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",52),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Or,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(2),I.pc("ngClass",I.sc(6,lr,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(5),I.Mc(I.mc(8,3,t.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(2),I.pc("ngForOf",t.currency)}}function Tr(e,t){if(1&e){const e=I.Yb();I.Vb(0),I.Xb(1,"td",59),I.Xb(2,"div",60),I.Xb(3,"span",54),I.Lc(4),I.Wb(),I.Xb(5,"span",61),I.fc("click",(function(n){I.Bc(e);const i=t.$implicit;return I.jc(5).editItem.emit(i)})),I.Lc(6),I.kc(7,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub()}if(2&e){const e=t.$implicit;I.Db(1),I.pc("ngClass",I.sc(8,dr,!!e.pay_date,!e.pay_date)),I.Db(1),I.pc("matTooltip",e.country_code),I.Db(2),I.Oc("",e.price_code," ",e.currency_code,""),I.Db(2),I.Mc(I.mc(7,5,e.total_amount+e.total_tax,"VND"==e.currency_code?"1.0-0":"1.2-2"))}}function Mr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Jc(1,Tr,8,11,"ng-container",56),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc().$implicit;I.Db(1),I.pc("ngForOf",t["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)])}}function Ar(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2).$implicit;return I.jc(2).createItem.emit([n,"Revenue"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Revenue"),I.Wb(),I.Wb()}}function jr(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(t){I.Bc(e);const n=I.jc(2).$implicit;return I.jc(2).createItem.emit([n,"Cost"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4,"Cost"),I.Wb(),I.Wb()}}function Vr(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit,i=I.jc().$implicit;return I.jc(2).addPrice.emit([i,"Revenue",n,i[n],"DTHC"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4),I.Wb(),I.Wb()}if(2&e){const e=I.jc().$implicit;I.Db(4),I.Nc("Revenue SIMBA DTHC ",e,"")}}function Pr(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit,i=I.jc().$implicit;return I.jc(2).addPrice.emit([i,"Cost",n,i[n],"ADF"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4),I.Wb(),I.Wb()}if(2&e){const e=I.jc().$implicit;I.Db(4),I.Nc("Cost SIMBA ADF ",e,"")}}function Fr(e,t){if(1&e){const e=I.Yb();I.Xb(0,"button",62),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit,i=I.jc().$implicit;return I.jc(2).addPrice.emit([i,"Cost",n,i[n],"DIS"])})),I.Xb(1,"mat-icon",63),I.Lc(2,"add"),I.Wb(),I.Xb(3,"span"),I.Lc(4),I.Wb(),I.Wb()}if(2&e){const e=I.jc().$implicit;I.Db(4),I.Nc("Cost SIMBA DIS ",e,"")}}const Rr=function(e){return{"row-even":e}},Er=function(e){return{"red-600-fg":e}};function Jr(e,t){if(1&e){const e=I.Yb();I.Xb(0,"tr",26),I.Xb(1,"td"),I.Lc(2),I.Wb(),I.Xb(3,"td",27),I.Xb(4,"a",28),I.fc("click",(function(t){I.Bc(e);const n=I.jc().$implicit;return I.jc(2).openVessel.emit(n.key)})),I.Lc(5),I.Wb(),I.Wb(),I.Xb(6,"td",29),I.Lc(7),I.Wb(),I.Xb(8,"td",4),I.Lc(9),I.Wb(),I.Xb(10,"td",4),I.Lc(11),I.Wb(),I.Xb(12,"td",5),I.Lc(13),I.kc(14,"date"),I.Wb(),I.Xb(15,"td",5),I.Lc(16),I.kc(17,"date"),I.Wb(),I.Xb(18,"td"),I.Lc(19),I.Wb(),I.Xb(20,"td",30),I.Xb(21,"a",31),I.Lc(22),I.Wb(),I.Wb(),I.Jc(23,tr,2,1,"td",32),I.Xb(24,"td",33),I.Lc(25),I.Wb(),I.Xb(26,"td",33),I.Lc(27),I.Wb(),I.Xb(28,"td"),I.Xb(29,"mat-chip-list",34),I.Jc(30,nr,2,0,"mat-chip",35),I.Jc(31,ir,2,0,"mat-chip",36),I.Jc(32,or,2,0,"mat-chip",37),I.Jc(33,rr,2,0,"mat-chip",38),I.Jc(34,ar,2,0,"mat-chip",36),I.Jc(35,cr,2,0,"mat-chip",37),I.Jc(36,sr,2,0,"mat-chip",38),I.Wb(),I.Wb(),I.Jc(37,br,3,8,"td",39),I.Jc(38,mr,10,9,"td",40),I.Jc(39,fr,2,1,"td",40),I.Jc(40,gr,3,8,"td",39),I.Jc(41,xr,10,9,"td",40),I.Jc(42,Dr,2,1,"td",40),I.Jc(43,_r,3,8,"td",39),I.Jc(44,wr,10,9,"td",40),I.Jc(45,Nr,2,1,"td",40),I.Jc(46,kr,3,8,"td",39),I.Jc(47,Ir,10,9,"td",40),I.Jc(48,Mr,2,1,"td",40),I.Xb(49,"td",41),I.Lc(50),I.kc(51,"number"),I.Wb(),I.Xb(52,"td",42),I.Lc(53),I.Xb(54,"mat-icon",43),I.fc("click",(function(t){return I.Bc(e),t.stopPropagation()})),I.Lc(55,"more_vert"),I.Wb(),I.Xb(56,"mat-menu",null,44),I.Jc(58,Ar,5,0,"button",45),I.Jc(59,jr,5,0,"button",45),I.Jc(60,Vr,5,1,"button",45),I.Jc(61,Pr,5,1,"button",45),I.Jc(62,Fr,5,1,"button",45),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=t.$implicit,n=I.xc(57),i=I.jc(),o=i.index,r=i.$implicit,a=I.jc(2);I.pc("ngClass",I.rc(57,Rr,o%2==0)),I.Db(2),I.Mc(o+1),I.Db(3),I.Mc(r.vessel_full_name),I.Db(1),I.pc("matTooltip",r.supplier_name),I.Db(1),I.Mc(r.supplier_short_name),I.Db(2),I.Mc(r.pol_name),I.Db(2),I.Mc(r.pod_name),I.Db(2),I.Mc(I.mc(14,48,r.depart_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(I.mc(17,51,r.arrive_time,"MM/dd/yyyy HH:mm")),I.Db(3),I.Mc(r.code),I.Db(1),I.pc("matTooltip",r.error),I.Db(1),I.pc("ngClass",I.rc(59,Er,r.error))("routerLink","/apps/workflow/shipment/detail/"+r.id+"/soa"),I.Db(1),I.Mc(r.bill),I.Db(1),I.pc("ngForOf",a.arrType),I.Db(1),I.pc("matTooltip",r.customer_name),I.Db(1),I.Mc(r.customer_short_name),I.Db(1),I.pc("matTooltip",r.agent_name),I.Db(1),I.Mc(r.agent_short_name),I.Db(2),I.pc("ngSwitch",r.process),I.Db(1),I.pc("ngSwitchCase",0),I.Db(1),I.pc("ngSwitchCase",1),I.Db(1),I.pc("ngSwitchCase",2),I.Db(1),I.pc("ngSwitchCase",3),I.Db(1),I.pc("ngSwitchCase",4),I.Db(1),I.pc("ngSwitchCase",5),I.Db(1),I.pc("ngSwitchCase",6),I.Db(1),I.pc("ngIf",!a.revenueVNOpen),I.Db(1),I.pc("ngIf",a.revenueVNOpen),I.Db(1),I.pc("ngIf",a.revenueVNOpen),I.Db(1),I.pc("ngIf",!a.revenueNNOpen),I.Db(1),I.pc("ngIf",a.revenueNNOpen),I.Db(1),I.pc("ngIf",a.revenueNNOpen),I.Db(1),I.pc("ngIf",!a.costVNOpen),I.Db(1),I.pc("ngIf",a.costVNOpen),I.Db(1),I.pc("ngIf",a.costVNOpen),I.Db(1),I.pc("ngIf",!a.costNNOpen),I.Db(1),I.pc("ngIf",a.costNNOpen),I.Db(1),I.pc("ngIf",a.costNNOpen),I.Db(1),I.pc("ngClass",I.sc(61,lr,r.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]+r.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]<0,r.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]+r.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]>=0)),I.Db(1),I.Mc(I.mc(51,54,r.profit["revenueVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]+r.profit["revenueNN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costVN"+(e.includes("20")?"20":e.includes("40")?"40":e)]-r.profit["costNN"+(e.includes("20")?"20":e.includes("40")?"40":e)],"1.0-0")),I.Db(3),I.Nc(" ",a.user," "),I.Db(1),I.pc("matMenuTriggerFor",n),I.Db(4),I.pc("ngIf",a.permission.create),I.Db(1),I.pc("ngIf",a.permission.create),I.Db(1),I.pc("ngIf",a.formSearch&&113==a.formSearch.agent&&"Spt"!=e),I.Db(1),I.pc("ngIf",a.formSearch&&113==a.formSearch.agent&&"Spt"!=e&&1==a.user),I.Db(1),I.pc("ngIf",a.formSearch&&113==a.formSearch.agent&&"Spt"!=e&&1==a.user)}}function Br(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Jr,63,64,"tr",25),I.Ub()),2&e){const e=t.$implicit;I.Db(1),I.pc("ngForOf",e.volume)}}function $r(e,t){if(1&e&&(I.Xb(0,"td",64),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=t.$implicit,n=I.jc(2);I.Ic("bottom",n.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,n.total[e],"1.0-0"))}}function qr(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.revenueVN.ALL,"1.0-0"))}}function zr(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.revenueVN[e],"VND"==e?"1.0-0":"1.2-2"))}}function Ur(e,t){if(1&e&&(I.Vb(0),I.Jc(1,zr,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.revenueVN[e])}}function Yr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Ur,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.revenueVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function Hr(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function Gr(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.revenueNN.ALL,"1.0-0"))}}function Qr(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.revenueNN[e],"VND"==e?"1.0-0":"1.2-2"))}}function Kr(e,t){if(1&e&&(I.Vb(0),I.Jc(1,Qr,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.revenueNN[e])}}function Zr(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,Kr,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.revenueNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function ea(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function ta(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.costVN.ALL,"1.0-0"))}}function na(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.costVN[e],"VND"==e?"1.0-0":"1.2-2"))}}function ia(e,t){if(1&e&&(I.Vb(0),I.Jc(1,na,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.costVN[e])}}function oa(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,ia,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.costVN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function ra(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function aa(e,t){if(1&e&&(I.Xb(0,"td",65),I.Lc(1),I.kc(2,"number"),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(2,3,e.total.costNN.ALL,"1.0-0"))}}function ca(e,t){if(1&e&&(I.Xb(0,"td",58),I.Xb(1,"div",53),I.Xb(2,"span",54),I.Lc(3),I.Wb(),I.Xb(4,"span",55),I.Lc(5),I.kc(6,"number"),I.Wb(),I.Wb(),I.Wb()),2&e){const e=I.jc().$implicit,t=I.jc(3);I.Db(3),I.Mc(e),I.Db(2),I.Mc(I.mc(6,2,t.total.costNN[e],"VND"==e?"1.0-0":"1.2-2"))}}function sa(e,t){if(1&e&&(I.Vb(0),I.Jc(1,ca,7,5,"td",57),I.Ub()),2&e){const e=t.$implicit,n=I.jc(3);I.Db(1),I.pc("ngIf",n.total.costNN[e])}}function la(e,t){if(1&e&&(I.Xb(0,"td",51),I.Vb(1),I.Xb(2,"td",66),I.Xb(3,"div",53),I.Xb(4,"span",54),I.Lc(5,"Exchange VND"),I.Wb(),I.Xb(6,"span",55),I.Lc(7),I.kc(8,"number"),I.Wb(),I.Wb(),I.Wb(),I.Ub(),I.Jc(9,sa,2,1,"ng-container",56),I.Wb()),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2),I.Db(7),I.Mc(I.mc(8,4,e.total.costNN.ALL,"1.0-0")),I.Db(2),I.pc("ngForOf",e.total.currency)}}function ba(e,t){if(1&e&&I.Sb(0,"td"),2&e){const e=I.jc(2);I.Ic("bottom",e.inverseOfTranslation2)}}function pa(e,t){if(1&e){const e=I.Yb();I.Xb(0,"table",2),I.Xb(1,"thead"),I.Xb(2,"tr"),I.Xb(3,"th"),I.Lc(4,"No"),I.Wb(),I.Xb(5,"th",3),I.Lc(6,"Voyage"),I.Wb(),I.Xb(7,"th",4),I.Lc(8,"Supplier"),I.Wb(),I.Xb(9,"th",4),I.Lc(10,"POL"),I.Wb(),I.Xb(11,"th",4),I.Lc(12,"POD"),I.Wb(),I.Xb(13,"th",5),I.Lc(14,"ETD"),I.Wb(),I.Xb(15,"th",5),I.Lc(16,"ETA"),I.Wb(),I.Xb(17,"th"),I.Lc(18,"Shipment"),I.Wb(),I.Xb(19,"th",6),I.Lc(20,"Bill"),I.Wb(),I.Jc(21,Jo,2,3,"th",7),I.Xb(22,"th"),I.Lc(23,"Customer"),I.Wb(),I.Xb(24,"th"),I.Lc(25,"Agent"),I.Wb(),I.Xb(26,"th"),I.Lc(27,"Process"),I.Wb(),I.Xb(28,"th"),I.Xb(29,"div",8),I.Xb(30,"span"),I.Lc(31,"REVENUE VN"),I.Wb(),I.Jc(32,Bo,2,0,"mat-icon",9),I.Jc(33,$o,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(34,qo,2,2,"th",11),I.Xb(35,"th"),I.Xb(36,"div",8),I.Xb(37,"span"),I.Lc(38,"REVENUE NN"),I.Wb(),I.Jc(39,zo,2,0,"mat-icon",9),I.Jc(40,Uo,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(41,Yo,2,2,"th",11),I.Xb(42,"th"),I.Xb(43,"div",8),I.Xb(44,"span"),I.Lc(45,"COST VN"),I.Wb(),I.Jc(46,Ho,2,0,"mat-icon",9),I.Jc(47,Go,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(48,Qo,2,2,"th",11),I.Xb(49,"th"),I.Xb(50,"div",8),I.Xb(51,"span"),I.Lc(52,"COST NN"),I.Wb(),I.Jc(53,Ko,2,0,"mat-icon",9),I.Jc(54,Zo,2,0,"mat-icon",10),I.Wb(),I.Wb(),I.Jc(55,er,2,2,"th",11),I.Xb(56,"th",12),I.Lc(57,"PROFIT"),I.Wb(),I.Xb(58,"th",13),I.Xb(59,"mat-icon",14),I.fc("click",(function(t){I.Bc(e);const n=I.jc();return t.stopPropagation(),n.printExcel.emit()})),I.Lc(60,"print"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(61,"tbody"),I.Jc(62,Br,2,1,"ng-container",15),I.Wb(),I.Xb(63,"tfoot"),I.Xb(64,"tr"),I.Sb(65,"td"),I.Xb(66,"td",16),I.Lc(67,"Total"),I.Wb(),I.Sb(68,"td"),I.Sb(69,"td"),I.Sb(70,"td"),I.Sb(71,"td"),I.Sb(72,"td"),I.Sb(73,"td"),I.Sb(74,"td"),I.Jc(75,$r,3,6,"td",17),I.Sb(76,"td"),I.Sb(77,"td"),I.Sb(78,"td"),I.Jc(79,qr,3,6,"td",18),I.Jc(80,Yr,10,7,"td",19),I.Jc(81,Hr,1,2,"td",20),I.Jc(82,Gr,3,6,"td",18),I.Jc(83,Zr,10,7,"td",19),I.Jc(84,ea,1,2,"td",20),I.Jc(85,ta,3,6,"td",18),I.Jc(86,oa,10,7,"td",19),I.Jc(87,ra,1,2,"td",20),I.Jc(88,aa,3,6,"td",18),I.Jc(89,la,10,7,"td",19),I.Jc(90,ba,1,2,"td",20),I.Xb(91,"td",21),I.Lc(92),I.kc(93,"number"),I.Wb(),I.Sb(94,"td"),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(3),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.pc("ngForOf",e.arrType),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("ngIf",!e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.Ic("top",e.inverseOfTranslation),I.Db(2),I.Ic("top",e.inverseOfTranslation),I.Db(4),I.pc("cdkVirtualForOf",e.data),I.Db(3),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(2),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.pc("ngForOf",e.arrType),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.pc("ngIf",!e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.pc("ngIf",e.revenueVNOpen),I.Db(1),I.pc("ngIf",!e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.pc("ngIf",e.revenueNNOpen),I.Db(1),I.pc("ngIf",!e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.pc("ngIf",e.costVNOpen),I.Db(1),I.pc("ngIf",!e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.pc("ngIf",e.costNNOpen),I.Db(1),I.Ic("bottom",e.inverseOfTranslation2),I.Db(1),I.Mc(I.mc(93,92,e.total.revenueVN.ALL+e.total.revenueNN.ALL-e.total.costVN.ALL-e.total.costNN.ALL,"1.0-0")),I.Db(2),I.Ic("bottom",e.inverseOfTranslation2)}}let ua=(()=>{class e{constructor(e,t){this.commonService=e,this.changeDetector=t,this.createItem=new I.o,this.openVessel=new I.o,this.deletePrice=new I.o,this.printExcel=new I.o,this.addPrice=new I.o,this.editItem=new I.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new j.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue,console.log(this.data))}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(J.a),I.Rb(I.h))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-import-table"]],viewQuery:function(e,t){var n;1&e&&I.Sc(ve.e,!0),2&e&&I.wc(n=I.gc())&&(t.viewPort=n.first)},inputs:{data:"data",shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total",formSearch:"formSearch",user:"user"},outputs:{createItem:"createItem",openVessel:"openVessel",deletePrice:"deletePrice",printExcel:"printExcel",addPrice:"addPrice",editItem:"editItem"},features:[I.Bb()],decls:2,vars:1,consts:[["autosize","",1,"h-100-p"],["class","report-table",4,"ngIf"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["color","accent","aria-label","Print",1,"cursor-pointer",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],["class","text-right text-bold teal-200-bg",3,"bottom",4,"ngIf"],["style","padding: 0",3,"bottom",4,"ngIf"],[3,"bottom",4,"ngIf"],[1,"text-right","text-bold","sticky-right-col",2,"z-index","30"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"w-152","sticky-col"],[1,"cursor-pointer",3,"click"],[1,"w-112",3,"matTooltip"],[1,"w-152","sticky-col2",3,"matTooltip"],[1,"cursor-pointer",3,"ngClass","routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["class","text-right text-bold",3,"ngClass",4,"ngIf"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","add",3,"click",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[1,"text-right","text-bold",3,"ngClass"],[2,"padding","0"],[1,"text-right","text-bold","w-100",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes"],[1,"mb-4","font-size-10"],[1,"text-right","text-bold"],[4,"ngFor","ngForOf"],["class","text-right border-right w-80",4,"ngIf"],[1,"text-right","border-right","w-80"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"text-right","text-bold",3,"click"],["mat-menu-item","","aria-label","add",3,"click"],["color","accent"],[1,"text-center","text-bold"],[1,"text-right","text-bold","teal-200-bg"],[1,"text-right","text-bold","w-100"]],template:function(e,t){1&e&&(I.Xb(0,"cdk-virtual-scroll-viewport",0),I.Jc(1,pa,95,95,"table",1),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.data&&t.data.length>0))},directives:[ve.e,ye.a,T.t,T.s,B.d,B.c,b.a,ve.d,T.q,me.a,p.a,i.j,S.c,T.x,T.y,o.c,o.d,S.a,o.a],pipes:[T.g,T.f],styles:["soa-agent-import-table .report-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}soa-agent-import-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}soa-agent-import-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}soa-agent-import-table .report-table td,soa-agent-import-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}soa-agent-import-table .report-table td .mat-standard-chip,soa-agent-import-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}soa-agent-import-table .report-table .paid{background:#fff;color:#000}soa-agent-import-table .report-table .cost-paid{background:#ffe1c2;color:#000}soa-agent-import-table .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}soa-agent-import-table .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}soa-agent-import-table .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}soa-agent-import-table .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}soa-agent-import-table .report-table .row-even{background-color:#eee!important}"],encapsulation:2,data:{animation:et.a}}),e})();function ma(e,t){if(1&e){const e=I.Yb();I.Xb(0,"fuse-sidebar",7),I.Xb(1,"div",8),I.Xb(2,"soa-agent-sidebar",9),I.fc("fitlerShipment",(function(t){return I.Bc(e),I.jc().fitlerShipment(t)}))("typeChange",(function(t){return I.Bc(e),I.jc().typeChange(t)})),I.Wb(),I.Wb(),I.Wb()}if(2&e){const e=I.jc();I.Db(2),I.pc("height",e.height)("type",e.type)("selected",e.selected)("total",e.total)("formSearch",e.formSearch)("customer",e.customer)("supplier",e.supplier)("agent",e.agent)("voyage",e.voyage)("price",e.price)("currency",e.currency)("country",e.country)}}let da=(()=>{class e{constructor(e,t,n,i,o,r,a){if(this._fuseSidebarService=e,this.authService=t,this.soaAgentService=n,this.commonService=i,this.datePipe=o,this._matDialog=r,this.router=a,this.sidebarPanel=!0,this.price=[],this.type="form",this.height=560,this.priceTarrif={DTHC20:{amount:225,currency:"SGD"},DTHC40:{amount:335,currency:"SGD"},ADF20:{amount:5,currency:"USD"},ADF40:{amount:7.5,currency:"USD"},DIS20:{amount:90,currency:"SGD"},DIS40:{amount:120,currency:"SGD"}},this._unsubscribeAll=new j.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let e=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(e)}}ngOnInit(){this.searchText=this.soaAgentService.searchText,this.formSearch=this.soaAgentService.currenSearch.formSearch,this.user=this.authService.user,this.authService.windowSizeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-12-12-56}),this.authService.changeScreen.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-12-12-56:this.authService.screenHeight-64-12-12-56}),this.soaAgentService.onDataChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.soaAgentService.dataCustomer,this.supplier=this.soaAgentService.dataSupplier,this.users=this.soaAgentService.users}),this.soaAgentService.onDataItemChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.soaAgentService.agent,this.commodity=this.soaAgentService.commodity,this.packageType=this.soaAgentService.packageType,this.currency=this.soaAgentService.currency,this.country=this.soaAgentService.country,this.depot=this.soaAgentService.depot,this.price=this.soaAgentService.price}),this.soaAgentService.onTypeChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{setTimeout(()=>{this.type=e},100)}),this.soaAgentService.onVesselImpChanged.pipe(Object(V.a)(this._unsubscribeAll)).subscribe(e=>{this.shipments=e[0],this.voyage=e[1],this.arrType=e[2],this.sptPrice=e[3],this.dataBill=e[4],this.total=e[5]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.soaAgentService)}fitlerShipment(e){this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(e).then(t=>{this.soaAgentService.currenSearch.formSearch=e,this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getShipment(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getReportData(){this.authService.onRequestChanged.next(!0),this.soaAgentService.getSelShipmentSoaAgent(this.formSearch).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}searchFilter(e){this.soaAgentService.onSearchTextChanged.next(e)}typeChange(e){this.type=e}createItem(e){let t=e[1],n=JSON.parse(JSON.stringify(e[0]));if("Revenue"==t){this.partner=this.customer;let e=this.supplier.find(e=>e.id==this.formSearch.agent);if(e){let t=this.customer.find(t=>t.short_name==e.short_name);n.customer=t.id}}"Cost"==t&&(this.partner=this.supplier,n.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ee.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+t,shipmentId:n.id,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n}}),this.dialogRef.componentInstance.createItem.subscribe(e=>{switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":this.soaAgentService.createSelRevenue(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error create "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+t});break;case"Cost":this.soaAgentService.createSelCost(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error create "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+t})}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getShipment()})}deletePrice(e){if(1==this.authService.user&&confirm("Do you want to delete this item?")){this.authService.onRequestChanged.next(!0);let t=e.type_name;switch(t){case"Revenue":this.soaAgentService.deleteSelRevenue(e.id).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+t+" error")});break;case"Cost":this.soaAgentService.deleteSelCost(e.id).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete "+t+" error")})}}}editItem(e){if(1==this.authService.user){let t=e.type_name,n=JSON.parse(JSON.stringify(e));if("Revenue"==t){this.partner=this.customer;let e=this.supplier.find(e=>e.id==this.formSearch.agent);if(e){let t=this.customer.find(t=>t.short_name==e.short_name);n.customer=t.id}}"Cost"==t&&(this.partner=this.supplier,n.agent=this.formSearch.agent),this.dialogRef=this._matDialog.open(ee.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Edit "+t,shipmentId:n.shipment,price:this.price,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n,data:n}}),this.dialogRef.componentInstance.updateItem.subscribe(e=>{switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":this.soaAgentService.updateSelRevenue(e).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error update "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+t});break;case"Cost":this.soaAgentService.updateSelCost(e).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),this.dialogRef.componentInstance.errorMessage="Error update "+t)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error update "+t})}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getShipment()})}}printExcel(e){this.soaAgentService.buildExcelData()}addPrice([e,t,n,i,o]){if("Revenue"==t){this.partner=this.customer;let r=this.agent.find(e=>e.id==this.formSearch.agent),a=this.partner.find(e=>e.short_name==r.short_name),c=o+n.substring(0,2);if(e["revenueNN"+n.substring(0,2)].map(e=>e.price_code).includes(c))alert("Price exist");else{let n=this.price.find(e=>e.code==c),o=this.currency.find(e=>e.code==this.priceTarrif[n.code].currency);this.createData(t,{shipment:e.id,price:n,volume:i,amount:this.priceTarrif[n.code].amount,tax:0,tax_amount:0,currency:o.id,ex_rate:o.exrate,payment_center:a.country,pay_party:a.id,update_by:this.authService.user,create_by:this.authService.user})}}else{this.partner=this.supplier;let r=this.agent.find(e=>e.id==this.formSearch.agent),a=this.partner.find(e=>e.short_name==r.short_name),c=o+n.substring(0,2);if(e["costNN"+n.substring(0,2)].map(e=>e.price_code).includes(c))alert("Price exist");else{let n=this.price.find(e=>e.code==c),o=this.currency.find(e=>e.code==this.priceTarrif[n.code].currency);this.createData(t,{shipment:e.id,price:n,volume:i,amount:this.priceTarrif[n.code].amount,tax:0,tax_amount:0,currency:o.id,ex_rate:o.exrate,payment_center:a.country,issue_party:a.id,update_by:this.authService.user,create_by:this.authService.user})}}}createData(e,t){switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":this.soaAgentService.createSelRevenue(t).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")});break;case"Cost":this.soaAgentService.createSelCost(t).then(e=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")})}}}return e.\u0275fac=function(t){return new(t||e)(I.Rb(te.a),I.Rb(E.a),I.Rb(ce),I.Rb(J.a),I.Rb(T.f),I.Rb(f.b),I.Rb(i.g))},e.\u0275cmp=I.Lb({type:e,selectors:[["soa-agent-import"]],decls:7,vars:14,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","soa-agent-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[2,"overflow","auto"],[3,"data","arrType","shipments","voyage","price","permission","total","formSearch","user","createItem","deletePrice","printExcel","addPrice","editItem"],["name","soa-agent-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange"]],template:function(e,t){1&e&&(I.Xb(0,"div",0),I.Jc(1,ma,3,12,"fuse-sidebar",1),I.Xb(2,"div",2),I.Xb(3,"soa-agent-header",3),I.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),I.Wb(),I.Xb(4,"div",4),I.Xb(5,"div",5),I.Xb(6,"soa-agent-import-table",6),I.fc("createItem",(function(e){return t.createItem(e)}))("deletePrice",(function(e){return t.deletePrice(e)}))("printExcel",(function(e){return t.printExcel(e)}))("addPrice",(function(e){return t.addPrice(e)}))("editItem",(function(e){return t.editItem(e)})),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&e&&(I.Db(1),I.pc("ngIf",t.sidebarPanel),I.Db(2),I.pc("searchText",t.searchText)("sidebarName","soa-agent-sidebar"),I.Db(2),I.Ic("height",t.height,"px"),I.Db(1),I.pc("data",t.dataBill)("arrType",t.arrType)("shipments",t.shipments)("voyage",t.voyage)("price",t.price)("permission",t.permission)("total",t.total)("formSearch",t.formSearch)("user",t.user))},directives:[pe.a,T.t,$.a,ge,ua,Fe.a,Sn],styles:["soa-agent-import{width:100%}"],encapsulation:2}),e})();var ha=n("m4Vh");n.d(t,"SoaAgentModule",(function(){return ga}));const fa=[{path:"",component:A,resolve:{data:ce,data1:Ze,data2:se,data3:be},children:[{path:"soa",component:fi},{path:"export",component:Eo},{path:"import",component:da},{path:"error",component:_n},{path:"dem",component:Bt},{path:"storage",component:He}]}];let ga=(()=>{class e{}return e.\u0275mod=I.Pb({type:e}),e.\u0275inj=I.Ob({factory:function(t){return new(t||e)},providers:[ce,Ze,se,be],imports:[[i.k.forChild(fa),o.b,r.b,a.c,c.c,s.b,l.e,b.b,p.b,u.c,m.c,d.b,h.c,f.e,g.b,v.b,y.b,x.d,S.e,D.b,_.b,W.b,w.k,L.c,X.t,N.a,k.a,C.a,O.f,ve.g,ye.b,ha.a]]}),e})()}}]);