function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{XfhF:function(e,t,o){"use strict";o.r(t);var i,n=o("tyNb"),a=o("5HBU"),r=o("STbY"),c=o("/1cH"),b=o("iadO"),l=o("bTqV"),m=o("7EHt"),d=o("kmnG"),u=o("NFeN"),s=o("Qu3c"),p=o("qFsG"),f=o("wZkO"),h=o("d3UM"),g=o("QibW"),v=o("0IaG"),k=o("/t3+"),y=o("bSwM"),x=o("M9IT"),W=o("xHqg"),X=o("A5z7"),w=o("bv9b"),_=o("XhcP"),D=o("FKr1"),L=o("1jcm"),C=o("+0xr"),S=o("Dh3D"),A=o("IOBc"),O=o("212X"),q=o("vxfF"),N=o("cfqv"),I=o("LPQX"),B=o("XNiG"),M=o("1G5W"),P=o("PVWW"),j=o("fXoL"),T=o("HX77"),J=o("qXBG"),F=o("lJxs"),E=o("2Vo4"),H=o("tk/3"),R=o("I/3d"),V=((i=function(){function e(t,o,i,n){if(_classCallCheck(this,e),this.router=t,this.db=o,this.authService=i,this._httpClient=n,this.codeCompany=["DCL","SEG","SEL","SIN","SLO","TWN","REF: "],this.onVoyageChanged=new E.a([]),this.onQuoteChanged=new E.a([]),this.onShipmentChanged=new E.a(null),this.onDataChanged=new E.a([]),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var a=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(a)}}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.modul=e.params.modul,this.authService.routerData=e,new Promise((function(e,o){Promise.all([t.getItemData(),t.getVoyage(),t.getQuote()]).then((function(t){_toArray(t),e()}),o)}))}},{key:"getItemData",value:function(){var e=this,t={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(o,i){e._httpClient.get(e.authService.apiUrl+"/sel/book/book",t).subscribe((function(t){e.customer=t.customer,e.agent=t.agent,e.seaport=t.seaport,e.user=t.user,e.commodity=t.commodity,e.packageType=t.packageType,e.price=t.price,e.currency=t.currency,e.country=t.country,e.depot=t.depot,e.onDataChanged.next(t),o(t)}),i)}))}},{key:"getVoyage",value:function(e){var t=this,o={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})},i="/sel/book/voyage/"+(e?1:0);return new Promise((function(e,n){t._httpClient.get(t.authService.apiUrl+i,o).subscribe((function(o){t.voyage=o,t.onVoyageChanged.next(o),e(o)}),n)}))}},{key:"getQuote",value:function(e){var t=this,o={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})},i="/sel/book/quote/"+(e?1:0);return new Promise((function(e,n){t._httpClient.get(t.authService.apiUrl+i,o).subscribe((function(o){t.quote=o.quote,t.tarrif=o.tarrif,t.onQuoteChanged.next(o),e(o)}),n)}))}},{key:"writeDatabaseBooking",value:function(e,t){this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(e).set(t)}},{key:"readDatabaseBooking",value:function(){return this.bookingCollection=this.db.collection("booking-draft"),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(F.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.booking}},{key:"readDatabaseBookingByUser",value:function(e){return this.bookingCollection=this.db.collection("booking-draft",(function(t){return t.where("user","==",e)})),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(F.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.booking}},{key:"getDatabaseBookingById",value:function(e){return this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(e).valueChanges()}},{key:"updateDatabaseBookingById",value:function(e,t){this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(e).set(t)}},{key:"deleteDatabaseBookingById",value:function(e){this.bookingDoc=this.db.doc("booking-draft/"+e),this.bookingDoc.delete()}},{key:"updateBookingConfirm",value:function(e,t){var o,i,n=this,a=t.book,r=t.voyage,c=a.volume.map((function(e){return e.commodity.name})),b=(c=c.filter((function(e,t,o){return o.indexOf(e)===t}))).join(",");r.closing_time||(r.closing_time=r.depart_time-864e5),"HAIPHONG"==r.load_port_name||"DA NANG"==r.load_port_name?(o=null,i="CAP CONT NANG, SACH, TOT"):(o="DUY\u1ec6T L\u1ec6NH QUA EMAIL",i="Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container");var l="";a.volume.map((function(e){l+=n.calculateTotal(e.cont_type.code,a.volume)+"x"+e.cont_type.code+" "}));var m={book_number:a.code,shipper:a.customer,agent:a.agent?a.agent:null,volume:a.volume,commodity:b,empty_pick_up_depot:a.empty_pick_up_depot?a.empty_pick_up_depot:null,place_of_stuffing:a.place_of_stuffing?a.place_of_stuffing:null,closing_time_vgm:a.closing_time_vgm?a.closing_time_vgm:null,return_laden_cont:r.load_terminal_name,clcv:a.clcv?a.clcv:o,note:a.note?a.note:i,contact_note:a.contact_note?a.contact_note:"HOCHIMINH"==r.pol?"Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container":"For picking-up container, handing over custom clearance sheet, pls contact with our branch as follows",voyage:{pol:r.load_port_name,pod:r.discharge_port_name,load_terminal:r.load_terminal_name,discharge_terminal:r.discharge_terminal_name,vessel:r.vessel_name.replace(r.name,"").trim(),voyage:r.name,closing_time:r.closing_time,etd:r.depart_time,eta:r.arrive_time},lcv_volume:l,lcv_note:a.lcv_note?a.lcv_note:null,truck_name:a.truck_name?a.truck_name:null,truck_number:a.truck_number?a.truck_number:null,valid:a.valid?a.valid:null,valid_time:a.valid_time?a.valid_time:null,code_company:a.code_company?a.code_company:""};t.bookConfirm=m,this.updateDatabaseBookingById(e,t)}},{key:"calculateTotal",value:function(e,t){var o=0;return t.map((function(t){t.cont_type.code==e&&(o+=t.quantity)})),o}},{key:"getCustomer",value:function(){var e=this,t={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(o,i){e._httpClient.get(e.authService.apiUrl+"/sel-book/customer",t).subscribe((function(e){o(e)}),i)}))}},{key:"getDepotByPortId",value:function(e){var t=this,o={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,n){t._httpClient.get(t.authService.apiUrl+"/sel-book/depot/"+e,o).subscribe((function(e){t.depot=e,i(e)}),n)}))}},{key:"updateSelDocument",value:function(e){var t=this,o={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,n){t._httpClient.put(t.authService.apiUrl+"/sel-document",e,o).subscribe((function(e){i(e)}),n)}))}}]),e}()).\u0275fac=function(e){return new(e||i)(j.bc(n.g),j.bc(R.a),j.bc(J.a),j.bc(H.a))},i.\u0275prov=j.Nb({token:i,factory:i.\u0275fac}),i),G=o("B9zo"),U=o("ofXK"),$=o("fE3o"),z=o("0JVi"),Q=o("XiUz"),Y=o("znSr");function K(e,t){if(1&e){var o=j.Yb();j.Xb(0,"button",8),j.fc("click",(function(e){j.Bc(o);var t=j.jc();return e.stopPropagation(),t.changeScreen(!0)})),j.Xb(1,"mat-icon"),j.Lc(2,"flip_to_front"),j.Wb(),j.Wb()}}function Z(e,t){if(1&e){var o=j.Yb();j.Xb(0,"button",8),j.fc("click",(function(e){j.Bc(o);var t=j.jc();return e.stopPropagation(),t.changeScreen(!1)})),j.Xb(1,"mat-icon"),j.Lc(2,"flip_to_back"),j.Wb(),j.Wb()}}var ee,te,oe=((ee=function(){function e(t,o){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=o,this.fullScreen=!1,this.toggleSidebar=new j.o,this.showHideBar=new j.o,this.refreshPage=new j.o,this._unsubscribeAll=new B.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||ee)(j.Rb(J.a),j.Rb(z.b))},ee.\u0275cmp=j.Lb({type:ee,selectors:[["bookings-form-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(j.Xb(0,"mat-toolbar",0),j.Xb(1,"div",1),j.Xb(2,"div",2),j.Xb(3,"div",3),j.Xb(4,"button",4),j.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),j.Xb(5,"mat-icon"),j.Lc(6,"menu"),j.Wb(),j.Wb(),j.Xb(7,"button",5),j.fc("click",(function(e){return t.showHideBar.emit()})),j.Xb(8,"mat-icon"),j.Lc(9,"menu"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(10,"div",6),j.Sb(11,"div",7),j.Xb(12,"button",8),j.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),j.Xb(13,"mat-icon",9),j.Lc(14,"refresh"),j.Wb(),j.Wb(),j.Sb(15,"div",7),j.Jc(16,K,3,0,"button",10),j.Jc(17,Z,3,0,"button",10),j.Sb(18,"div",7),j.Xb(19,"button",8),j.fc("click",(function(e){return t.toggleSidebar.emit("bookings-form-setting")})),j.Xb(20,"mat-icon"),j.Lc(21,"settings"),j.Wb(),j.Wb(),j.Sb(22,"div",7),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.Db(16),j.pc("ngIf",!t.fullScreen),j.Db(1),j.pc("ngIf",t.fullScreen))},directives:[k.a,Q.b,Q.e,Q.d,Q.c,l.b,Y.b,u.a,U.t],styles:["bookings-form-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}bookings-form-header.below{z-index:2}bookings-form-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}bookings-form-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}bookings-form-header .logo .logo-icon{width:38px}bookings-form-header .chat-panel-toggle-button,bookings-form-header .language-button,bookings-form-header .quick-panel-toggle-button,bookings-form-header .user-button,bookings-form-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){bookings-form-header .chat-panel-toggle-button,bookings-form-header .language-button,bookings-form-header .quick-panel-toggle-button,bookings-form-header .user-button,bookings-form-header fuse-search-bar{height:56px}}bookings-form-header .navbar-toggle-button{min-width:56px;height:56px}bookings-form-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){bookings-form-header .toolbar-separator{height:56px}}"],encapsulation:2}),ee),ie=o("3Pt+"),ne=o("EwFO"),ae=["formDirective"],re=((te=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.form=this.formBuilder.group({valid:[null]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"resetForm",value:function(){this.searchNgForm.resetForm()}},{key:"onSearchFormSubmit",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||te)(j.Rb(ie.d))},te.\u0275cmp=j.Lb({type:te,selectors:[["bookings-form-sidebar"]],viewQuery:function(e,t){var o;1&e&&j.Sc(ae,!0),2&e&&j.wc(o=j.gc())&&(t.searchNgForm=o.first)},inputs:{height:"height"},decls:19,vars:5,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["formControlName","valid"],[3,"value"]],template:function(e,t){1&e&&(j.Xb(0,"form",0,1),j.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form.value)})),j.Xb(2,"div",2),j.Xb(3,"div",3),j.Xb(4,"button",4),j.fc("click",(function(e){return t.resetForm()})),j.Lc(5," Reset "),j.Wb(),j.Wb(),j.Wb(),j.Xb(6,"div",5),j.Xb(7,"div",6),j.Xb(8,"div",7),j.Xb(9,"div",8),j.Xb(10,"div",9),j.Xb(11,"mat-form-field",10),j.Xb(12,"mat-label"),j.Lc(13,"Valid"),j.Wb(),j.Xb(14,"mat-select",11),j.Xb(15,"mat-option",12),j.Lc(16,"Invalid"),j.Wb(),j.Xb(17,"mat-option",12),j.Lc(18,"Valid"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.pc("formGroup",t.form),j.Db(6),j.Ic("height",t.height,"px"),j.Db(9),j.pc("value",0),j.Db(2),j.pc("value",0))},directives:[ie.A,ie.q,ie.h,Q.d,Q.c,l.b,Q.b,ne.a,d.c,d.f,h.a,ie.p,ie.g,D.n],styles:["bookings-form-sidebar{border-right:1px solid #a3a3a3}bookings-form-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}bookings-form-sidebar .navbar-scroll-container{background:#fff!important}bookings-form-sidebar .navbar-scroll-container .navbar-content{padding-top:0}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),te);function ce(e,t){if(1&e&&(j.Xb(0,"fuse-sidebar",8),j.Sb(1,"bookings-form-sidebar",9),j.Wb()),2&e){var o=j.jc();j.Db(1),j.pc("height",o.height)}}function be(e,t){1&e&&j.Sb(0,"router-outlet")}var le,me=((le=function(){function e(t,o,i,n,a){var r=this;_classCallCheck(this,e),this._fuseSidebarService=t,this.route=o,this.router=i,this.authService=n,this.shipmentService=a,this.sidebarPanel=!1,this.height=560,this._unsubscribeAll=new B.a,this.bookId=this.shipmentService.bookId=this.route.snapshot.params.bookId,this._unsubscribeAll=new B.a,this.shipmentService.readDatabaseBooking().subscribe((function(e){r.bookingfb=e.slice(),0==r.bookId?r.shipmentService.onShipmentChanged.next(null):(r.data=r.bookingfb.find((function(e){return e.id==r.bookId})),r.shipmentService.onShipmentChanged.next(r.data))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.shipmentService)}},{key:"newContainer",value:function(e){this.router.navigate(["/apps/news/shipment-book-form/form/0"])}}]),e}()).\u0275fac=function(e){return new(e||le)(j.Rb(T.a),j.Rb(n.a),j.Rb(n.g),j.Rb(J.a),j.Rb(V))},le.\u0275cmp=j.Lb({type:le,selectors:[["shipment-book-form"]],decls:9,vars:3,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","bookings-form-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","bookings-form-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar"],[1,"content-card",2,"border","none","border-radius","0"],[4,"ngIf"],["name","bookings-form-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"height"]],template:function(e,t){1&e&&(j.Xb(0,"div",0),j.Jc(1,ce,2,1,"fuse-sidebar",1),j.Xb(2,"fuse-sidebar",2),j.Sb(3,"div",3),j.Wb(),j.Xb(4,"div",4),j.Xb(5,"bookings-form-header",5),j.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)})),j.Wb(),j.Xb(6,"div",6),j.Xb(7,"div",3),j.Jc(8,be,1,0,"router-outlet",7),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.Db(1),j.pc("ngIf",t.sidebarPanel),j.Db(4),j.pc("sidebarName","bookings-form-sidebar"),j.Db(3),j.pc("ngIf",!0))},directives:[G.a,U.t,$.a,oe,re,n.l],styles:["shipment-book-form{width:100%}shipment-book-form .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){shipment-book-form .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}shipment-book-form .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){shipment-book-form .center .content-card shipment-book-form{border-right:0}shipment-book-form .center .content-card shipment-book-form,shipment-book-form .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}shipment-book-form .center .content-card shipment-details{display:none!important}shipment-book-form .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}shipment-book-form .center .content-card.current-shipment-selected .content shipment-book-form,shipment-book-form .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}shipment-book-form .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:P.a}}),le),de=o("JX91"),ue=o("R0Ic"),se=o("0Zc1");function pe(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," No "),j.Wb())}function fe(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit,i=j.jc(2);j.Db(1),j.Mc(i.quote.indexOf(o)+1)}}function he(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Code "),j.Wb())}function ge(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",o.code," ")}}function ve(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Customer "),j.Wb())}function ke(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",o.customer_short_name," ")}}function ye(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Load port "),j.Wb())}function xe(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",o.load_port_name," ")}}function We(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Discharge "),j.Wb())}function Xe(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",o.discharge_port_name," ")}}function we(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Quote from "),j.Wb())}function _e(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.kc(2,"date"),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",j.mc(2,1,o.quote_from,"MM/dd/yyyy")," ")}}function De(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Quote to "),j.Wb())}function Le(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.kc(2,"date"),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",j.mc(2,1,o.quote_to,"MM/dd/yyyy")," ")}}function Ce(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Validity "),j.Wb())}function Se(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",1==o.valididty?"Valid":"Invalid"," ")}}function Ae(e,t){1&e&&j.Sb(0,"th",25)}function Oe(e,t){if(1&e){var o=j.Yb();j.Xb(0,"td",26),j.Xb(1,"button",27),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit,n=j.jc(2);return e.stopPropagation(),n.getAllPrice(i)})),j.Lc(2,"Add All"),j.Wb(),j.Wb()}}function qe(e,t){if(1&e){var o=j.Yb();j.Xb(0,"tr"),j.Xb(1,"td"),j.Lc(2),j.Wb(),j.Xb(3,"td"),j.Lc(4),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.kc(7,"number"),j.Wb(),j.Xb(8,"td"),j.Lc(9),j.kc(10,"number"),j.Wb(),j.Xb(11,"td"),j.Lc(12),j.Wb(),j.Xb(13,"td"),j.Lc(14),j.Wb(),j.Xb(15,"td"),j.Lc(16),j.Wb(),j.Xb(17,"td"),j.Lc(18),j.Wb(),j.Xb(19,"td"),j.Lc(20),j.Wb(),j.Xb(21,"td"),j.Xb(22,"mat-icon",31),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit;return j.jc(3).getPrice(i)})),j.Lc(23,"add"),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit,n=t.index;j.Db(2),j.Mc(n+1),j.Db(2),j.Mc(i.price_name),j.Db(2),j.Mc(j.mc(7,9,i.amount,"1.2-2")),j.Db(3),j.Mc(j.mc(10,12,i.tax,"1.2-2")),j.Db(3),j.Mc(i.volume),j.Db(2),j.Mc(i.unit_code),j.Db(2),j.Mc(i.currency_code),j.Db(2),j.Mc(i.country_name),j.Db(2),j.Mc(i.partner_short_name)}}function Ne(e,t){if(1&e&&(j.Xb(0,"td",26),j.Xb(1,"div",28),j.Xb(2,"table",29),j.Xb(3,"thead"),j.Xb(4,"tr"),j.Xb(5,"th"),j.Lc(6,"No"),j.Wb(),j.Xb(7,"th"),j.Lc(8,"Price"),j.Wb(),j.Xb(9,"th"),j.Lc(10,"Amount"),j.Wb(),j.Xb(11,"th"),j.Lc(12,"Tax(%)"),j.Wb(),j.Xb(13,"th"),j.Lc(14,"Volume"),j.Wb(),j.Xb(15,"th"),j.Lc(16,"Unit"),j.Wb(),j.Xb(17,"th"),j.Lc(18,"Currency"),j.Wb(),j.Xb(19,"th"),j.Lc(20,"Payment center"),j.Wb(),j.Xb(21,"th"),j.Lc(22,"Pay party"),j.Wb(),j.Sb(23,"th"),j.Wb(),j.Wb(),j.Xb(24,"tbody"),j.Jc(25,qe,24,15,"tr",30),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var o=t.$implicit,i=j.jc(2);j.Eb("colspan",8),j.Db(1),j.pc("@detailExpand",o==i.expandedElement?"expanded":"collapsed"),j.Db(24),j.pc("ngForOf",o.detail)}}function Ie(e,t){1&e&&j.Sb(0,"tr",32)}function Be(e,t){if(1&e){var o=j.Yb();j.Xb(0,"tr",33),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit,n=j.jc(2);return n.expandedElement=n.expandedElement===i?null:i})),j.Wb()}if(2&e){var i=t.$implicit,n=j.jc(2);j.Hb("example-expanded-row",n.expandedElement===i)}}function Me(e,t){if(1&e&&j.Sb(0,"tr",34),2&e){var o=t.$implicit,i=j.jc(2);j.Hb("example-expanded-row",i.expandedElement===o)}}var Pe=function(){return["no","code","customer","load_port","discharge_port","quote_from","quote_to","validity","button"]},je=function(){return["expandedDetail"]};function Te(e,t){if(1&e&&(j.Xb(0,"table",9),j.Vb(1,10),j.Jc(2,pe,2,0,"th",11),j.Jc(3,fe,2,1,"td",12),j.Ub(),j.Vb(4,13),j.Jc(5,he,2,0,"th",11),j.Jc(6,ge,2,1,"td",12),j.Ub(),j.Vb(7,14),j.Jc(8,ve,2,0,"th",11),j.Jc(9,ke,2,1,"td",12),j.Ub(),j.Vb(10,15),j.Jc(11,ye,2,0,"th",11),j.Jc(12,xe,2,1,"td",12),j.Ub(),j.Vb(13,16),j.Jc(14,We,2,0,"th",11),j.Jc(15,Xe,2,1,"td",12),j.Ub(),j.Vb(16,17),j.Jc(17,we,2,0,"th",11),j.Jc(18,_e,3,4,"td",12),j.Ub(),j.Vb(19,18),j.Jc(20,De,2,0,"th",11),j.Jc(21,Le,3,4,"td",12),j.Ub(),j.Vb(22,19),j.Jc(23,Ce,2,0,"th",11),j.Jc(24,Se,2,1,"td",12),j.Ub(),j.Vb(25,20),j.Jc(26,Ae,1,0,"th",11),j.Jc(27,Oe,3,0,"td",12),j.Ub(),j.Vb(28,21),j.Jc(29,Ne,26,3,"td",12),j.Ub(),j.Jc(30,Ie,1,0,"tr",22),j.Jc(31,Be,1,2,"tr",23),j.Jc(32,Me,1,2,"tr",24),j.Wb()),2&e){var o=j.jc();j.pc("dataSource",o.quote),j.Db(30),j.pc("matHeaderRowDef",j.qc(4,Pe)),j.Db(1),j.pc("matRowDefColumns",j.qc(5,Pe)),j.Db(1),j.pc("matRowDefColumns",j.qc(6,je))}}function Je(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," No "),j.Wb())}function Fe(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit,i=j.jc(2);j.Db(1),j.Mc(i.tarrif.indexOf(o)+1)}}function Ee(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Code "),j.Wb())}function He(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",o.code," ")}}function Re(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Type "),j.Wb())}function Ve(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",0==o.type?"Export":"Import"," ")}}function Ge(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Port "),j.Wb())}function Ue(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",o.port_name," ")}}function $e(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Tarrif from "),j.Wb())}function ze(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.kc(2,"date"),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",j.mc(2,1,o.tarrif_from,"MM/dd/yyyy")," ")}}function Qe(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Tarrif to "),j.Wb())}function Ye(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.kc(2,"date"),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",j.mc(2,1,o.tarrif_to,"MM/dd/yyyy")," ")}}function Ke(e,t){1&e&&(j.Xb(0,"th",25),j.Lc(1," Validity "),j.Wb())}function Ze(e,t){if(1&e&&(j.Xb(0,"td",26),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.Db(1),j.Nc(" ",1==o.validity?"Valid":"Invalid"," ")}}function et(e,t){if(1&e){var o=j.Yb();j.Xb(0,"th",25),j.Xb(1,"mat-icon",41),j.fc("click",(function(e){return j.Bc(o),j.jc(2).tarrifPanel.close()})),j.Lc(2,"close"),j.Wb(),j.Wb()}}function tt(e,t){if(1&e){var o=j.Yb();j.Xb(0,"td",26),j.Xb(1,"button",27),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit,n=j.jc(2);return e.stopPropagation(),n.getAllPrice(i)})),j.Lc(2,"Add all"),j.Wb(),j.Wb()}}function ot(e,t){if(1&e){var o=j.Yb();j.Xb(0,"tr"),j.Xb(1,"td"),j.Xb(2,"mat-icon",31),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit;return j.jc(3).getPrice(i)})),j.Lc(3,"add"),j.Wb(),j.Wb(),j.Xb(4,"td"),j.Lc(5),j.Wb(),j.Xb(6,"td"),j.Lc(7),j.kc(8,"number"),j.Wb(),j.Xb(9,"td"),j.Lc(10),j.kc(11,"number"),j.Wb(),j.Xb(12,"td"),j.Lc(13),j.Wb(),j.Xb(14,"td"),j.Lc(15),j.Wb(),j.Xb(16,"td"),j.Lc(17),j.Wb(),j.Xb(18,"td"),j.Lc(19),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit;j.Db(5),j.Mc(i.price_name),j.Db(2),j.Mc(j.mc(8,7,i.amount,"1.2-2")),j.Db(3),j.Mc(j.mc(11,10,i.tax,"1.2-2")),j.Db(3),j.Mc(i.volume),j.Db(2),j.Mc(i.unit_code),j.Db(2),j.Mc(i.currency_code),j.Db(2),j.Mc(i.payment_center_name)}}function it(e,t){if(1&e&&(j.Xb(0,"td",26),j.Xb(1,"div",28),j.Xb(2,"table",29),j.Xb(3,"thead"),j.Xb(4,"tr"),j.Sb(5,"th"),j.Xb(6,"th"),j.Lc(7,"Price"),j.Wb(),j.Xb(8,"th"),j.Lc(9,"Amount"),j.Wb(),j.Xb(10,"th"),j.Lc(11,"Tax(%)"),j.Wb(),j.Xb(12,"th"),j.Lc(13,"Volume"),j.Wb(),j.Xb(14,"th"),j.Lc(15,"Unit"),j.Wb(),j.Xb(16,"th"),j.Lc(17,"Currency"),j.Wb(),j.Xb(18,"th"),j.Lc(19,"Payment_center"),j.Wb(),j.Wb(),j.Wb(),j.Xb(20,"tbody"),j.Jc(21,ot,20,13,"tr",30),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var o=t.$implicit,i=j.jc(2);j.Eb("colspan",8),j.Db(1),j.pc("@detailExpand",o==i.expandedElement?"expanded":"collapsed"),j.Db(20),j.pc("ngForOf",o.detail)}}function nt(e,t){1&e&&j.Sb(0,"tr",32)}function at(e,t){if(1&e){var o=j.Yb();j.Xb(0,"tr",33),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit,n=j.jc(2);return n.expandedElement=n.expandedElement===i?null:i})),j.Wb()}if(2&e){var i=t.$implicit,n=j.jc(2);j.Hb("example-expanded-row",n.expandedElement===i)}}function rt(e,t){1&e&&j.Sb(0,"tr",34)}var ct=function(){return["no","code","type","port","tarrif_from","tarrif_to","validity","button"]};function bt(e,t){if(1&e&&(j.Xb(0,"table",35),j.Vb(1,10),j.Jc(2,Je,2,0,"th",11),j.Jc(3,Fe,2,1,"td",12),j.Ub(),j.Vb(4,13),j.Jc(5,Ee,2,0,"th",11),j.Jc(6,He,2,1,"td",12),j.Ub(),j.Vb(7,36),j.Jc(8,Re,2,0,"th",11),j.Jc(9,Ve,2,1,"td",12),j.Ub(),j.Vb(10,37),j.Jc(11,Ge,2,0,"th",11),j.Jc(12,Ue,2,1,"td",12),j.Ub(),j.Vb(13,38),j.Jc(14,$e,2,0,"th",11),j.Jc(15,ze,3,4,"td",12),j.Ub(),j.Vb(16,39),j.Jc(17,Qe,2,0,"th",11),j.Jc(18,Ye,3,4,"td",12),j.Ub(),j.Vb(19,19),j.Jc(20,Ke,2,0,"th",11),j.Jc(21,Ze,2,1,"td",12),j.Ub(),j.Vb(22,20),j.Jc(23,et,3,0,"th",11),j.Jc(24,tt,3,0,"td",12),j.Ub(),j.Vb(25,21),j.Jc(26,it,22,3,"td",12),j.Ub(),j.Jc(27,nt,1,0,"tr",22),j.Jc(28,at,1,2,"tr",23),j.Jc(29,rt,1,0,"tr",40),j.Wb()),2&e){var o=j.jc();j.pc("dataSource",o.tarrif),j.Db(27),j.pc("matHeaderRowDef",j.qc(4,ct)),j.Db(1),j.pc("matRowDefColumns",j.qc(5,ct)),j.Db(1),j.pc("matRowDefColumns",j.qc(6,je))}}var lt,mt=((lt=function(){function e(t,o,i,n,a,r,c){_classCallCheck(this,e),this.router=t,this.matDialogRef=o,this._data=i,this.authService=n,this.commonService=a,this.datePipe=r,this._formBuilder=c,this.label=i.label,this.shipmentId=i.shipmentId,this.quote=i.quote,this.tarrif=i.tarrif,this.booking=i.booking,this.price=i.price,this.currency=i.currency,this.country=i.country,this.customer=i.customer}return _createClass(e,[{key:"ngOnInit",value:function(){this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}},{key:"getPrice",value:function(e){if(e){var t=this.currency.find((function(t){return t.id==e.currency})),o={price:this.price.find((function(t){return t.id==e.price})),amount:e.amount,tax:e.tax,volume:0,currency:t,ex_rate:t.exrate,payment_center:this.country.find((function(t){return t.id==e.payment_center})),info:e.info};o.volume=this.booking.vol[o.price.unit_code]?this.booking.vol[o.price.unit_code]:e.volume,this.booking.revenue.sell.push(o)}}},{key:"getAllPrice",value:function(e){var t=this;e.detail.map((function(e){t.getPrice(e)})),this.matDialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||lt)(j.Rb(n.g),j.Rb(v.f),j.Rb(v.a),j.Rb(J.a),j.Rb(se.a),j.Rb(U.f),j.Rb(ie.d))},lt.\u0275cmp=j.Lb({type:lt,selectors:[["bookings-form-quote-modal-dialog"]],decls:12,vars:3,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","dnl-new-shipment-revenue-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],[1,"viewer-panel"],["mat-table","","multiTemplateDataRows","","class","simple quote-table",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","","class","simple tarrif-table",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",1,"simple","quote-table",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","customer"],["matColumnDef","load_port"],["matColumnDef","discharge_port"],["matColumnDef","quote_from"],["matColumnDef","quote_to"],["matColumnDef","validity"],["matColumnDef","button"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"example-element-detail"],[1,"simple"],[4,"ngFor","ngForOf"],["color","accent",1,"cursor-pointer",3,"click"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"],["mat-table","","multiTemplateDataRows","",1,"simple","tarrif-table",3,"dataSource"],["matColumnDef","type"],["matColumnDef","port"],["matColumnDef","tarrif_from"],["matColumnDef","tarrif_to"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[2,"float","right","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(j.Xb(0,"div",0),j.Xb(1,"mat-toolbar",1),j.Xb(2,"mat-toolbar-row",2),j.Xb(3,"span",3),j.Lc(4),j.Wb(),j.Xb(5,"button",4),j.fc("click",(function(e){return t.matDialogRef.close()})),j.Xb(6,"mat-icon"),j.Lc(7,"close"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(8,"div",5),j.Xb(9,"div",6),j.Jc(10,Te,33,7,"table",7),j.Jc(11,bt,30,7,"table",8),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.Db(4),j.Mc(t.label),j.Db(6),j.pc("ngIf",t.quote.length>0),j.Db(1),j.pc("ngIf",t.tarrif.length>0))},directives:[k.a,k.c,Q.b,Q.d,Q.c,l.b,u.a,v.d,ne.a,U.t,C.j,C.c,C.e,C.b,C.g,C.i,C.d,C.a,U.s,C.f,C.h],pipes:[U.f,U.g],styles:["@media screen and (min-width:600px)and (max-width:959px){.bookings-form-quote-modal-dialog{width:100%}}@media screen and (min-width:960px){.bookings-form-quote-modal-dialog{width:1080px}}.bookings-form-quote-modal-dialog .mat-dialog-container{padding:0}.bookings-form-quote-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table th{padding:8px;font-size:12px!important}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-detail-row td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-detail-row td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-detail-row td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-detail-row td{padding:0}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-detail-row td .simple th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-detail-row td .simple th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-detail-row td .simple th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-detail-row td .simple th{padding:8px!important}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-detail-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-detail-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-detail-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-detail-row{height:0!important}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-element-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-element-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-element-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-element-row{background:#b3e5fc}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-element-row:not(.example-expanded-row):hover,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-element-row:not(.example-expanded-row):hover,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-element-row:not(.example-expanded-row):hover,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-element-row:not(.example-expanded-row):hover{background:#e1f5fe}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-element-row:not(.example-expanded-row):active,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-element-row:not(.example-expanded-row):active,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-element-row:not(.example-expanded-row):active,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-element-row:not(.example-expanded-row):active{background:#81d4fa}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-element-detail,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-element-detail,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-element-detail,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-element-detail{overflow:hidden;display:-webkit-box;display:flex}.bookings-form-quote-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.bookings-form-quote-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2,data:{animation:[Object(ue.p)("detailExpand",[Object(ue.m)("collapsed",Object(ue.n)({height:"0px",minHeight:"0"})),Object(ue.m)("expanded",Object(ue.n)({height:"*"})),Object(ue.o)("expanded <=> collapsed",Object(ue.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),lt),dt=o("z0wS"),ut=["formDirective"];function st(e,t){1&e&&j.Lc(0,"Fill your info")}function pt(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1,"Booking number is required!"),j.Wb())}function ft(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Mc(o)}}function ht(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc(" ",o.name," ")}}function gt(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Owner is required "),j.Wb())}function vt(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc(" ",o.name," ")}}function kt(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Create by by is required "),j.Wb())}function yt(e,t){if(1&e&&(j.Xb(0,"mat-option",51),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc("",o.full_name," ")}}function xt(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1,"Booking party is required!"),j.Wb())}function Wt(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc(" ",o.name," ")}}function Xt(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1,"Port of loading is required!"),j.Wb())}function wt(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc(" ",o.name," ")}}function _t(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1,"Port of discharge is required!"),j.Wb())}function Dt(e,t){if(1&e&&(j.Xb(0,"mat-option",51),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc("",o.full_name," ")}}function Lt(e,t){if(1&e&&(j.Xb(0,"mat-option",51),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc("",o.full_name," ")}}function Ct(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1,"Dest Agent is required!"),j.Wb())}function St(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," From Date is required "),j.Wb())}function At(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," To Date is required "),j.Wb())}function Ot(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Nc(" ",o.name," ")}}function qt(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Commodity is required "),j.Wb())}function Nt(e,t){if(1&e&&(j.Xb(0,"mat-option",50),j.Lc(1),j.Wb()),2&e){var o=t.$implicit;j.pc("value",o),j.Db(1),j.Mc(o.code)}}function It(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Container type is required "),j.Wb())}function Bt(e,t){if(1&e){var o=j.Yb();j.Xb(0,"button",60),j.fc("click",(function(e){j.Bc(o);var t=j.jc().index;return j.jc().removeVolume(t)})),j.Xb(1,"mat-icon"),j.Lc(2,"delete"),j.Wb(),j.Wb()}}function Mt(e,t){if(1&e){var o=j.Yb();j.Xb(0,"button",61),j.fc("click",(function(e){return j.Bc(o),j.jc(2).addVolume()})),j.Xb(1,"mat-icon"),j.Lc(2,"add"),j.Wb(),j.Wb()}}function Pt(e,t){if(1&e&&(j.Xb(0,"div",52),j.Xb(1,"mat-form-field",21),j.Xb(2,"mat-label"),j.Lc(3,"Commodity"),j.Wb(),j.Sb(4,"input",53),j.Xb(5,"mat-autocomplete",17,54),j.Jc(7,Ot,2,2,"mat-option",15),j.kc(8,"async"),j.Wb(),j.Jc(9,qt,2,0,"mat-error",12),j.Wb(),j.Xb(10,"mat-form-field",34),j.Xb(11,"mat-label"),j.Lc(12,"Qty"),j.Wb(),j.Sb(13,"input",55),j.Wb(),j.Xb(14,"mat-form-field",34),j.Xb(15,"mat-label"),j.Lc(16,"Container type"),j.Wb(),j.Xb(17,"mat-select",56),j.Jc(18,Nt,2,2,"mat-option",15),j.Wb(),j.Jc(19,It,2,0,"mat-error",12),j.Wb(),j.Xb(20,"div",57),j.Jc(21,Bt,3,0,"button",58),j.Jc(22,Mt,3,0,"button",59),j.Wb(),j.Wb()),2&e){var o=t.index,i=j.xc(6),n=j.jc();j.pc("formGroupName",o),j.Db(4),j.pc("matAutocomplete",i),j.Db(1),j.pc("displayWith",n.commonService.displayObjFn.bind(n,"name")),j.Db(2),j.pc("ngForOf",j.lc(8,9,n.filteredCommodity[o])),j.Db(2),j.pc("ngIf",n.formBook.controls.volume.controls[o].get("commodity").hasError("required")),j.Db(9),j.pc("ngForOf",n.packageType),j.Db(1),j.pc("ngIf",n.formBook.controls.volume.controls[o].get("cont_type").hasError("required")),j.Db(2),j.pc("ngIf",o>0),j.Db(1),j.pc("ngIf",n.formBook.controls.volume.value.length==o+1)}}function jt(e,t){1&e&&j.Lc(0,"Voyage")}function Tt(e,t){if(1&e){var o=j.Yb();j.Xb(0,"tr"),j.Xb(1,"td",68),j.Lc(2),j.Wb(),j.Xb(3,"td",69),j.Lc(4),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.Wb(),j.Xb(7,"td"),j.Lc(8),j.kc(9,"date"),j.Wb(),j.Xb(10,"td"),j.Lc(11),j.kc(12,"date"),j.Wb(),j.Xb(13,"td"),j.Lc(14),j.Wb(),j.Xb(15,"td"),j.Lc(16),j.Wb(),j.Xb(17,"td"),j.Lc(18),j.kc(19,"date"),j.Wb(),j.Xb(20,"td"),j.Lc(21),j.Wb(),j.Xb(22,"td"),j.Lc(23),j.Wb(),j.Xb(24,"td"),j.Lc(25),j.Wb(),j.Xb(26,"td",66),j.Xb(27,"button",49),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit,n=j.jc(2),a=j.xc(3);return n.getBook(a,i)})),j.Lc(28," Book "),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit,n=t.index;j.Db(2),j.Mc(n+1),j.Db(2),j.Oc("",i.vessel_name," ",i.name,""),j.Db(2),j.Mc(i.partner_short_name),j.Db(2),j.Mc(j.mc(9,12,i.closing_time,"MMM/dd HH:mm")),j.Db(3),j.Mc(j.mc(12,15,i.depart_time,"EEE MMM/dd/yyyy HH:mm")),j.Db(3),j.Mc(i.load_port_name),j.Db(2),j.Mc(i.load_terminal_name),j.Db(2),j.Mc(j.mc(19,18,i.arrive_time,"EEE MMM/dd/yyyy HH:mm")),j.Db(3),j.Mc(i.discharge_port_name),j.Db(2),j.Mc(i.discharge_terminal_name),j.Db(2),j.Mc(i.transit_time)}}function Jt(e,t){if(1&e&&(j.Xb(0,"div",62),j.Xb(1,"table",63),j.Xb(2,"thead"),j.Xb(3,"tr"),j.Xb(4,"th",64),j.Lc(5,"No"),j.Wb(),j.Xb(6,"th",65),j.Lc(7,"Vessel/Voyage"),j.Wb(),j.Xb(8,"th"),j.Lc(9,"Supplier"),j.Wb(),j.Xb(10,"th"),j.Lc(11,"Closing time"),j.Wb(),j.Xb(12,"th"),j.Lc(13,"Depart time"),j.Wb(),j.Xb(14,"th"),j.Lc(15,"Port of Loading"),j.Wb(),j.Xb(16,"th"),j.Lc(17,"Load Terminal"),j.Wb(),j.Xb(18,"th"),j.Lc(19,"Arrive time"),j.Wb(),j.Xb(20,"th"),j.Lc(21,"Port of discharge"),j.Wb(),j.Xb(22,"th"),j.Lc(23,"Discharge terminal"),j.Wb(),j.Xb(24,"th"),j.Lc(25,"Transit time"),j.Wb(),j.Sb(26,"th",66),j.Wb(),j.Wb(),j.Xb(27,"tbody"),j.Jc(28,Tt,29,21,"tr",67),j.Wb(),j.Wb(),j.Wb()),2&e){var o=j.jc();j.Db(28),j.pc("ngForOf",o.filterVoyage)}}function Ft(e,t){1&e&&j.Lc(0,"Selling rate")}function Et(e,t){if(1&e){var o=j.Yb();j.Xb(0,"tr"),j.Xb(1,"td",68),j.Lc(2),j.Wb(),j.Xb(3,"td",69),j.Lc(4),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.Wb(),j.Xb(7,"td"),j.Lc(8),j.Wb(),j.Xb(9,"td"),j.Lc(10),j.kc(11,"number"),j.Wb(),j.Xb(12,"td"),j.Lc(13),j.Wb(),j.Xb(14,"td"),j.Lc(15),j.Wb(),j.Xb(16,"td"),j.Lc(17),j.kc(18,"number"),j.Wb(),j.Xb(19,"td"),j.Lc(20),j.Wb(),j.Xb(21,"td",66),j.Xb(22,"mat-icon",70),j.fc("click",(function(e){j.Bc(o);var i=t.$implicit,n=t.index;return j.jc(2).openModal([i,n])})),j.Lc(23,"edit"),j.Wb(),j.Xb(24,"mat-icon",71),j.fc("click",(function(e){j.Bc(o);var i=t.index;return j.jc(2).deleteRevenue(i)})),j.Lc(25,"delete"),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit,n=t.index;j.Db(2),j.Mc(n+1),j.Db(2),j.Mc(null==i.price?null:i.price.name),j.Db(2),j.Mc(null==i.price?null:i.price.unit_code),j.Db(2),j.Mc(i.volume),j.Db(2),j.Mc(j.mc(11,9,i.amount,"VND"!=i.currency.code?"1.2-2":"1.0-0")),j.Db(3),j.Mc(i.tax),j.Db(2),j.Mc(null==i.currency?null:i.currency.code),j.Db(2),j.Mc(j.mc(18,12,i.ex_rate,"1.2-2")),j.Db(3),j.Mc(null==i.payment_center?null:i.payment_center.name)}}function Ht(e,t){if(1&e){var o=j.Yb();j.Xb(0,"div",62),j.Xb(1,"table",63),j.Xb(2,"thead"),j.Xb(3,"tr"),j.Xb(4,"th",68),j.Lc(5,"No"),j.Wb(),j.Xb(6,"th",69),j.Lc(7,"Price"),j.Wb(),j.Xb(8,"th"),j.Lc(9,"Unit"),j.Wb(),j.Xb(10,"th"),j.Lc(11,"Volume"),j.Wb(),j.Xb(12,"th"),j.Lc(13,"Amount"),j.Wb(),j.Xb(14,"th"),j.Lc(15,"Tax(%)"),j.Wb(),j.Xb(16,"th"),j.Lc(17,"Currency"),j.Wb(),j.Xb(18,"th"),j.Lc(19,"Ex rate"),j.Wb(),j.Xb(20,"th"),j.Lc(21,"Payment_center"),j.Wb(),j.Xb(22,"th",66),j.Xb(23,"mat-icon",70),j.fc("click",(function(e){return j.Bc(o),j.jc().openQuoteModal()})),j.Lc(24,"file_copy"),j.Wb(),j.Xb(25,"mat-icon",70),j.fc("click",(function(e){return j.Bc(o),j.jc().openModal()})),j.Lc(26,"add"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(27,"tbody"),j.Jc(28,Et,26,15,"tr",67),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=j.jc();j.Db(28),j.pc("ngForOf",i.booking.revenue.sell)}}function Rt(e,t){1&e&&j.Lc(0,"Save booking")}function Vt(e,t){if(1&e&&(j.Xb(0,"div",72),j.Xb(1,"h2"),j.Lc(2,"Book info"),j.Wb(),j.Xb(3,"div",73),j.Xb(4,"div",74),j.Xb(5,"div",75),j.Xb(6,"div",76),j.Lc(7,"Booking number"),j.Wb(),j.Xb(8,"div",77),j.Lc(9),j.Wb(),j.Wb(),j.Wb(),j.Xb(10,"div",74),j.Xb(11,"div",75),j.Xb(12,"div",76),j.Lc(13,"Status"),j.Wb(),j.Xb(14,"div",77),j.Lc(15),j.Wb(),j.Wb(),j.Wb(),j.Xb(16,"div",78),j.Xb(17,"div",75),j.Xb(18,"div",76),j.Lc(19,"Booking party"),j.Wb(),j.Xb(20,"div",77),j.Lc(21),j.Wb(),j.Wb(),j.Wb(),j.Xb(22,"div",78),j.Xb(23,"div",75),j.Xb(24,"div",76),j.Lc(25,"Load Agent"),j.Wb(),j.Xb(26,"div",77),j.Lc(27),j.Wb(),j.Wb(),j.Wb(),j.Xb(28,"div",78),j.Xb(29,"div",75),j.Xb(30,"div",76),j.Lc(31,"Dest Agent"),j.Wb(),j.Xb(32,"div",77),j.Lc(33),j.Wb(),j.Wb(),j.Wb(),j.Xb(34,"div",78),j.Xb(35,"div",75),j.Xb(36,"div",76),j.Lc(37,"Owner"),j.Wb(),j.Xb(38,"div",77),j.Lc(39),j.Wb(),j.Wb(),j.Wb(),j.Xb(40,"div",78),j.Xb(41,"div",75),j.Xb(42,"div",76),j.Lc(43,"Create_by"),j.Wb(),j.Xb(44,"div",77),j.Lc(45),j.Wb(),j.Wb(),j.Wb(),j.Xb(46,"div",78),j.Xb(47,"div",75),j.Xb(48,"div",76),j.Lc(49,"Port of loading"),j.Wb(),j.Xb(50,"div",77),j.Lc(51),j.Wb(),j.Wb(),j.Wb(),j.Xb(52,"div",78),j.Xb(53,"div",75),j.Xb(54,"div",76),j.Lc(55,"Port of discharge"),j.Wb(),j.Xb(56,"div",77),j.Lc(57),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var o=j.jc();j.Db(9),j.Mc(o.booking.book.code),j.Db(6),j.Mc(0==o.booking.book.status?"Invalid":"Valid"),j.Db(6),j.Mc(o.booking.book.customer.full_name),j.Db(6),j.Mc(o.booking.book.load_agent?o.booking.book.load_agent.full_name:""),j.Db(6),j.Mc(o.booking.book.agent?o.booking.book.agent.full_name:""),j.Db(6),j.Mc(o.booking.name?o.booking.name:o.booking.user),j.Db(6),j.Mc(o.booking.book.create_by?o.booking.book.create_by.name:""),j.Db(6),j.Mc(o.booking.voyage.load_port_name),j.Db(6),j.Mc(o.booking.voyage.discharge_port_name)}}function Gt(e,t){if(1&e&&(j.Xb(0,"div",72),j.Xb(1,"h2"),j.Lc(2,"Voyage"),j.Wb(),j.Xb(3,"div",73),j.Xb(4,"div",79),j.Xb(5,"div",75),j.Xb(6,"div",76),j.Lc(7,"Supplier"),j.Wb(),j.Xb(8,"div",77),j.Lc(9),j.Wb(),j.Wb(),j.Wb(),j.Xb(10,"div",80),j.Xb(11,"div",75),j.Xb(12,"div",76),j.Lc(13,"Vessel/Voyage"),j.Wb(),j.Xb(14,"div",77),j.Lc(15),j.Wb(),j.Wb(),j.Wb(),j.Xb(16,"div",80),j.Xb(17,"div",75),j.Xb(18,"div",76),j.Lc(19,"Load port"),j.Wb(),j.Xb(20,"div",77),j.Lc(21),j.Wb(),j.Wb(),j.Wb(),j.Xb(22,"div",80),j.Xb(23,"div",75),j.Xb(24,"div",76),j.Lc(25,"Load terminal"),j.Wb(),j.Xb(26,"div",77),j.Lc(27),j.Wb(),j.Wb(),j.Wb(),j.Xb(28,"div",80),j.Xb(29,"div",75),j.Xb(30,"div",76),j.Lc(31,"Depart time"),j.Wb(),j.Xb(32,"div",77),j.Lc(33),j.kc(34,"date"),j.Wb(),j.Wb(),j.Wb(),j.Xb(35,"div",80),j.Xb(36,"div",75),j.Xb(37,"div",76),j.Lc(38,"Arrive time"),j.Wb(),j.Xb(39,"div",77),j.Lc(40),j.kc(41,"date"),j.Wb(),j.Wb(),j.Wb(),j.Xb(42,"div",80),j.Xb(43,"div",75),j.Xb(44,"div",76),j.Lc(45,"Discharge port"),j.Wb(),j.Xb(46,"div",77),j.Lc(47),j.Wb(),j.Wb(),j.Wb(),j.Xb(48,"div",80),j.Xb(49,"div",75),j.Xb(50,"div",76),j.Lc(51,"Discharge terminal"),j.Wb(),j.Xb(52,"div",77),j.Lc(53),j.Wb(),j.Wb(),j.Wb(),j.Xb(54,"div",80),j.Xb(55,"div",75),j.Xb(56,"div",76),j.Lc(57,"Closing time"),j.Wb(),j.Xb(58,"div",77),j.Lc(59),j.kc(60,"date"),j.Wb(),j.Wb(),j.Wb(),j.Xb(61,"div",80),j.Xb(62,"div",75),j.Xb(63,"div",76),j.Lc(64,"Transit time"),j.Wb(),j.Xb(65,"div",77),j.Lc(66),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var o=j.jc();j.Db(9),j.Mc(o.booking.voyage.supplier_name),j.Db(6),j.Mc(o.booking.voyage.vessel_full_name),j.Db(6),j.Mc(o.booking.voyage.load_port_name),j.Db(6),j.Mc(o.booking.voyage.load_terminal_name),j.Db(6),j.Mc(j.mc(34,10,o.booking.voyage.depart_time,"EEE MMM/dd/yyyy HH:mm")),j.Db(7),j.Mc(j.mc(41,13,o.booking.voyage.arrive_time,"EEE MMM/dd/yyyy HH:mm")),j.Db(7),j.Mc(o.booking.voyage.discharge_port_name),j.Db(6),j.Mc(o.booking.voyage.discharge_terminal_name),j.Db(6),j.Mc(j.mc(60,16,o.booking.voyage.closing_time,"MMM/dd HH:mm")),j.Db(7),j.Nc("",o.booking.voyage.transit_time," days")}}function Ut(e,t){if(1&e&&(j.Xb(0,"tr"),j.Xb(1,"td"),j.Lc(2),j.Wb(),j.Xb(3,"td"),j.Lc(4),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.Wb(),j.Xb(7,"td"),j.Lc(8),j.Wb(),j.Wb()),2&e){var o=t.$implicit,i=t.index;j.Db(2),j.Mc(i+1),j.Db(2),j.Mc(o.commodity.name),j.Db(2),j.Mc(o.quantity),j.Db(2),j.Mc(o.cont_type.code)}}function $t(e,t){if(1&e&&(j.Xb(0,"div",72),j.Xb(1,"h2"),j.Lc(2,"Volume"),j.Wb(),j.Xb(3,"div",8),j.Xb(4,"table",63),j.Xb(5,"thead"),j.Xb(6,"tr"),j.Xb(7,"th"),j.Lc(8,"No"),j.Wb(),j.Xb(9,"th"),j.Lc(10,"Commodity"),j.Wb(),j.Xb(11,"th"),j.Lc(12,"Quantity"),j.Wb(),j.Xb(13,"th"),j.Lc(14,"Container type"),j.Wb(),j.Wb(),j.Wb(),j.Xb(15,"tbody"),j.Jc(16,Ut,9,4,"tr",67),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var o=j.jc();j.Db(16),j.pc("ngForOf",o.booking.book.volume)}}function zt(e,t){if(1&e&&(j.Xb(0,"tr"),j.Xb(1,"td",68),j.Lc(2),j.Wb(),j.Xb(3,"td",69),j.Lc(4),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.Wb(),j.Xb(7,"td"),j.Lc(8),j.Wb(),j.Xb(9,"td",81),j.Lc(10),j.kc(11,"number"),j.Wb(),j.Xb(12,"td"),j.Lc(13),j.Wb(),j.Xb(14,"td"),j.Lc(15),j.Wb(),j.Xb(16,"td"),j.Lc(17),j.kc(18,"number"),j.Wb(),j.Xb(19,"td",81),j.Lc(20),j.kc(21,"number"),j.Wb(),j.Xb(22,"td"),j.Lc(23),j.Wb(),j.Wb()),2&e){var o=t.$implicit,i=t.index;j.Db(2),j.Mc(i+1),j.Db(2),j.Mc(o.price.name),j.Db(2),j.Mc(o.price.unit_code),j.Db(2),j.Mc(o.volume),j.Db(2),j.Mc(j.mc(11,10,o.amount,"VND"!=o.currency.code?"1.2-2":"1.0-0")),j.Db(3),j.Mc(o.tax),j.Db(2),j.Mc(o.currency.code),j.Db(2),j.Mc(o.ex_rate?j.mc(18,13,o.ex_rate,"1.2-2"):1),j.Db(3),j.Mc(j.mc(21,16,o.volume*(o.amount+o.amount*o.tax/100)*(o.ex_rate?o.ex_rate:1),"1.0-0")),j.Db(3),j.Mc(o.payment_center.name)}}function Qt(e,t){if(1&e&&(j.Xb(0,"div",72),j.Xb(1,"h2"),j.Lc(2,"Selling rate"),j.Wb(),j.Xb(3,"div",8),j.Xb(4,"table",63),j.Xb(5,"thead"),j.Xb(6,"tr"),j.Xb(7,"th",68),j.Lc(8,"No"),j.Wb(),j.Xb(9,"th",69),j.Lc(10,"Price"),j.Wb(),j.Xb(11,"th"),j.Lc(12,"Unit"),j.Wb(),j.Xb(13,"th"),j.Lc(14,"Volume"),j.Wb(),j.Xb(15,"th",81),j.Lc(16,"Amount"),j.Wb(),j.Xb(17,"th"),j.Lc(18,"Tax(%)"),j.Wb(),j.Xb(19,"th"),j.Lc(20,"Currency"),j.Wb(),j.Xb(21,"th"),j.Lc(22,"Ex rate"),j.Wb(),j.Xb(23,"th",81),j.Lc(24,"Total"),j.Wb(),j.Xb(25,"th"),j.Lc(26,"Payment center"),j.Wb(),j.Wb(),j.Wb(),j.Xb(27,"tbody"),j.Jc(28,zt,24,19,"tr",67),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var o=j.jc();j.Db(28),j.pc("ngForOf",o.booking.revenue.sell)}}var Yt,Kt,Zt,eo,to=((Yt=function(){function e(t,o,i,n,a,r,c,b){if(_classCallCheck(this,e),this.shipmentService=t,this.router=o,this.authService=i,this.route=n,this.datePipe=a,this._matDialog=r,this._formBuilder=c,this.commonService=b,this.date=new Date,this.minDate=new Date((new Date).setMonth((new Date).getMonth()-1)),this.maxDate=new Date((new Date).setMonth((new Date).getMonth()+1)),this.filterVoyage=[],this.filterQuote=[],this.filterTarrif=[],this.codeCompany=[],this.formBook=this._formBuilder.group({code:[null,ie.y.required],code_company:[""],owner:[null,ie.y.required],create_by:[null,ie.y.required],customer:[null,ie.y.required],load_agent:[null],agent:[null,ie.y.required],pol:[null,ie.y.required],pod:[null,ie.y.required],from_date:[this.date,ie.y.required],to_date:[this.maxDate,ie.y.required],volume:this._formBuilder.array([this._formBuilder.group({commodity:[null,ie.y.required],quantity:[1,ie.y.required],cont_type:[null,ie.y.required]})])}),this.height=560,this.check=!1,this.filteredCommodity=[],this.filteredPrice=[],this.filteredCountry=[],this.objAgent={3:{port:"HAIPHONG",agent:278,name:"C\xd4NG TY C\u1ed4 PH\u1ea6N SE GLOBAL LINES - HAIPHONG BRANCH"},4:{port:"HOCHIMINH",agent:223,name:"C\xd4NG TY C\u1ed4 PH\u1ea6N SE GLOBAL LINES - HOCHIMINH"},5:{port:"DANANG",agent:212,name:"C\xd4NG TY C\u1ed4 PH\u1ea6N SE GLOBAL LINES"},6:{port:"KEELUNG",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},7:{port:"KAOHSIUNG",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},11:{port:"HONG KONG",agent:123,name:"MARINE CONNECTIONS (H.K) LTD"},10:{port:"TAICHUNG",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},12:{port:"SINGAPORE",agent:113,name:"SIMBA LOGISTICS PTE LTD"},100:{port:"TAIPEI",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},103:{port:"PORT KLANG",agent:136,name:"BEN LINES AGENCY (MALAYSIA) - PORT KLANG OFFICE"},142:{port:"SIHANOUKVILLE",agent:135,name:"BEN LINE AGENCIES (CAMBODIA) - PHNOMPENH OFFICE"},143:{port:"PHNOMPENH PORT",agent:135,name:"BEN LINE AGENCIES (CAMBODIA) - PHNOMPENH OFFICE"}},this._unsubscribeAll=new B.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var l=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(l)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.urlChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){if(e.modul=e.authService.modul,e.authService.permissionModul)e.permission=e.authService.permissionModul;else{var o=e.router.routerState.snapshot.url.split("/")[2];e.permission=e.authService.getAction(o)}})),this.shipmentService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.codeCompany=e.shipmentService.codeCompany,e.customer=e.shipmentService.customer,e.agent=e.shipmentService.agent,e.seaport=e.shipmentService.seaport,e.user=e.shipmentService.user,e.commodity=e.shipmentService.commodity,e.packageType=e.shipmentService.packageType,e.price=e.shipmentService.price,e.currency=e.shipmentService.currency,e.country=e.shipmentService.country;var o=e.user.find((function(t){return t.id==e.authService.user}));if(o&&(e.formBook.controls.owner.setValue(o),e.formBook.controls.create_by.setValue(o)),e.modul.includes("hochiminh")){var i=e.seaport.find((function(e){return 4==e.id})),n=e.agent.find((function(t){return t.id==e.objAgent[i.id].agent}));e.formBook.controls.pol.setValue(i),n&&e.formBook.controls.load_agent.setValue(n)}})),this.shipmentService.onVoyageChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.voyage=e.shipmentService.voyage})),this.shipmentService.onQuoteChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.quote=e.shipmentService.quote,e.tarrif=e.shipmentService.tarrif})),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-64-72})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-64-72:e.authService.screenHeight-64-12-12-64-72})),this.shipmentService.onShipmentChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){if(e.oldData=t,e.oldData){e.draftId=e.oldData.id;for(var o=e.oldData.book.volume.length,i=function(t){t>0&&e.addVolume(),e.oldData.book.volume[t].commodity=e.commodity.find((function(o){return o.id==e.oldData.book.volume[t].commodity.id})),e.oldData.book.volume[t].cont_type=e.packageType.find((function(o){return o.id==e.oldData.book.volume[t].cont_type.id}))},n=0;n<o;n++)i(n);e.formBook.patchValue(e.oldData.book),e.minDate=new Date(e.oldData.book.from_date)}else e.booking=null,e.draftId=null})),this.filteredPol=this.formBook.controls.pol.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredPod=this.formBook.controls.pod.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredCustomer=this.formBook.controls.customer.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.customer_name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"customer_name",e.customer):[]}))),this.filteredAgent=this.formBook.controls.agent.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.supplier_name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"supplier_name",e.agent):[]}))),this.filteredAgent2=this.formBook.controls.load_agent.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.supplier_name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"supplier_name",e.agent):[]}))),this.filteredUser=this.formBook.controls.owner.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.user):[]}))),this.filteredUser2=this.formBook.controls.create_by.valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(t){return t?e.commonService.filterData(t,"name",e.user):[]}))),this.commodityControl(0),this.formBook.controls.pol.valueChanges.subscribe((function(t){if(t&&"string"!=typeof t&&t.id){var o=e.agent.find((function(o){return o.id==e.objAgent[t.id].agent}));o&&e.formBook.controls.load_agent.setValue(o)}})),this.formBook.controls.pod.valueChanges.subscribe((function(t){if(t&&"string"!=typeof t&&t.id){var o=e.agent.find((function(o){return o.id==e.objAgent[t.id].agent}));o&&e.formBook.controls.agent.setValue(o)}})),this.formBook.valueChanges.subscribe((function(e){}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"addVolume",value:function(){this.volumeAdd.push(this._formBuilder.group({commodity:[null,ie.y.required],quantity:[1,ie.y.required],cont_type:[null,ie.y.required]})),this.commodityControl(this.volumeAdd.length-1)}},{key:"removeVolume",value:function(e){this.volumeAdd.removeAt(e)}},{key:"commodityControl",value:function(e){var t=this;this.filteredCommodity[e]=this.volumeAdd.at(e).get("commodity").valueChanges.pipe(Object(de.a)(""),Object(F.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(F.a)((function(e){return e?t.commonService.filterData(e,"name",t.commodity):[]})))}},{key:"checkVolume",value:function(){var e=this,t=this.booking.book.volume,o=this.booking.container;if(t&&o){var i=t.map((function(e){return e.cont_type.id}));i=i.filter((function(e,t,o){return o.indexOf(e)==t}));for(var n=function(n){var a=i[n];if(t.filter((function(e){return e.cont_type.id==a})).reduce((function(e,t){return e+t.quantity}),0)!=o.filter((function(e){return e.cont_type.id==a})).length)return{v:void(e.check=!1)}},a=0;a<i.length;a++){var r=n(a);if("object"==typeof r)return r.v}this.check=!0}else this.check=!1}},{key:"updateBook",value:function(e){this.shipmentService.updateDatabaseBookingById(this.draftId,e)}},{key:"onFormBookSubmit",value:function(e,t){var o=this;if(this.filterVoyage=[],this.filterQuote=[],e.valid){var i=JSON.parse(JSON.stringify(e.value));if("string"==typeof i.customer)return void this.formBook.controls.customer.setValue(null);if("string"==typeof i.pol)return void this.formBook.controls.pol.setValue(null);if("string"==typeof i.pod)return void this.formBook.controls.pod.setValue(null);if("string"==typeof i.agent)return void this.formBook.controls.agent.setValue(null);"string"==typeof i.load_agent&&this.formBook.controls.load_agent.setValue(null),i.volume.map((function(e,t){"string"!=typeof e.commodity||o.formBook.controls.volume.controls[t].controls.commodity.setValue(null)}));var n=new Date(i.from_date).getTime()-864e5,a=new Date(i.to_date).getTime();this.filterVoyage=this.voyage.filter((function(e){return e.load_port==i.pol.id&&e.discharge_port==i.pod.id&&e.depart_time>=n&&e.depart_time<=a})),t.next()}}},{key:"getBook",value:function(e,t){t.supplier_name=t.partner_name;for(var o=JSON.parse(JSON.stringify(this.formBook.value)),i=new Date(t.depart_time).getTime()-864e5,n=(new Date(t.arrive_time).getTime(),o.volume.length),a=[],r={},c=0;c<n;c++)o[o.volume[c].cont_type.code]?o[o.volume[c].cont_type.code]+=o.volume[c].quantity:o[o.volume[c].cont_type.code]=o.volume[c].quantity,a.includes(o.volume[c].commodity.name)||a.push(o.volume[c].commodity.name),r[o.volume[c].cont_type.code]||(r[o.volume[c].cont_type.code]=0),r.PCS||(r.PCS=0),r.SPT||(r.SPT=1),r[o.volume[c].cont_type.code]+=o.volume[c].quantity,r.PCS+=o.volume[c].quantity;if(o.commodity=a.join(", "),this.booking={user:o.owner.id,name:o.owner.name,book:o,voyage:t,vol:r},this.draftId){for(var b in this.oldData.book)this.booking.book[b]||(this.booking.book[b]=this.oldData.book[b]);this.booking.revenue=this.oldData.revenue,this.booking.party=this.oldData.party}else this.booking.revenue={sell:[]},this.booking.party=[];this.quote.find((function(e){return"VINALINK_HAN_0026 (CONSOL)"==e.code})),this.filterQuote=this.quote.filter((function(e){return e.customer==o.customer.id&&e.supplier==t.supplier_id&&e.load_port==o.pol.id&&e.discharge_port==o.pod.id&&e.quote_from<=i&&e.quote_to>=i})),this.filterTarrif=this.tarrif.filter((function(e){return(e.port==o.pol.id||e.port==o.pod.id)&&e.tarrif_from<=i&&e.tarrif_to>=i})),e.next()}},{key:"openQuoteModal",value:function(){this.filterQuote.length+this.filterTarrif.length>0?(this.dialogRef=this._matDialog.open(mt,{panelClass:"bookings-form-quote-modal-dialog",data:{label:"Quote & tarrif",quote:this.filterQuote,tarrif:this.filterTarrif,booking:this.booking,price:this.price,currency:this.currency,country:this.country,customer:this.formBook.value.customer}}),this.dialogRef.afterClosed().subscribe((function(e){}))):alert("No quotation or tarrif to add selling rate!")}},{key:"openModal",value:function(e){var t=this;this.dialogRef=this._matDialog.open(dt.a,{panelClass:"bookings-details-revenue-modal-dialog",data:{label:e?"Edit selling rate":"Create selling rate",price:this.price,currency:this.currency,partner:this.customer,customer:this.formBook.value.customer,country:this.country,data:e?e[0]:null}}),this.dialogRef.afterClosed().subscribe((function(o){o&&(e?t.booking.revenue.sell[e[1]]=o:t.booking.revenue.sell.push(o))}))}},{key:"deleteRevenue",value:function(e){this.booking.revenue.sell.splice(e,1)}},{key:"saveBook",value:function(){var e,t=this;this.booking.book.code_company||(this.booking.book.code_company=""),this.updateBookingConfirm(this.booking.book,this.booking.voyage),this.draftId?this.shipmentService.updateDatabaseBookingById(this.draftId,this.booking):(e=Date.now().toString(),this.shipmentService.writeDatabaseBooking(e,this.booking)),setTimeout((function(){t.draftId=t.draftId?t.draftId:e,t.router.navigate(["/apps/workflow/shipment/book-detail/id/"+t.draftId+"/overview"])}),3e3)}},{key:"updateBookingConfirm",value:function(e,t){var o,i,n=this;"HAIPHONG"==t.load_port_name||"DA NANG"==t.load_port_name?(o=null,i="CAP CONT NANG, SACH, TOT"):(o="DUY\u1ec6T L\u1ec6NH QUA EMAIL",i="Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container");var a=e.volume.map((function(e){return e.commodity.name})),r=(a=a.filter((function(e,t,o){return o.indexOf(e)===t}))).join(","),c="";e.volume.map((function(t){c+=n.shipmentService.calculateTotal(t.cont_type.code,e.volume)+"x"+t.cont_type.code+" "})),t.closing_time||(t.closing_time=t.depart_time-864e5),this.booking.bookConfirm={book_number:e.code,shipper:e.customer,agent:e.agent?e.agent:null,volume:e.volume,commodity:r,empty_pick_up_depot:this.oldData?this.oldData.bookConfirm.empty_pick_up_depot:null,place_of_stuffing:this.oldData?this.oldData.bookConfirm.place_of_stuffing:null,closing_time_vgm:this.oldData?this.oldData.bookConfirm.closing_time_vgm:null,return_laden_cont:t.load_terminal_name,clcv:this.oldData?this.oldData.bookConfirm.clcv:o,note:this.oldData?this.oldData.bookConfirm.note:i,contact_note:this.oldData?this.oldData.bookConfirm.contact_note:"HOCHIMINH"==t.pol?"Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container":"For picking-up container, handing over custom clearance sheet, pls contact with our branch as follows",voyage:{pol:t.load_port_name,pod:t.discharge_port_name,load_terminal:t.load_terminal_name,discharge_terminal:t.discharge_terminal_name,vessel:t.vessel_name,voyage:t.name,closing_time:t.closing_time,etd:t.depart_time,eta:t.arrive_time},lcv_note:this.oldData?this.oldData.bookConfirm.lcv_note:null,lcv_volume:c,truck_name:this.oldData?this.oldData.bookConfirm.truck_name:null,truck_number:this.oldData?this.oldData.bookConfirm.truck_number:null,valid:this.oldData?this.oldData.bookConfirm.valid:null,valid_time:this.oldData?this.oldData.bookConfirm.valid_time:null,code_company:this.oldData?this.oldData.bookConfirm.code_company:""}}},{key:"goBookList",value:function(){}},{key:"volumeAdd",get:function(){return this.formBook.get("volume")}}]),e}()).\u0275fac=function(e){return new(e||Yt)(j.Rb(V),j.Rb(n.g),j.Rb(J.a),j.Rb(n.a),j.Rb(U.f),j.Rb(v.b),j.Rb(ie.d),j.Rb(se.a))},Yt.\u0275cmp=j.Lb({type:Yt,selectors:[["shipment-book-form-overview"]],viewQuery:function(e,t){var o;1&e&&j.Sc(ut,!0),2&e&&j.wc(o=j.gc())&&(t.bookNgForm=o.first)},decls:136,vars:71,consts:[["fxLayout","column"],["fxLayout","row wrap"],["fxFlex","100",3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[2,"overflow","auto"],["fxFlex","1 0 auto","fxLayout","row wrap"],["fxFlex","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","code","required",""],[4,"ngIf"],["inputCheck","","type","text","matInput","","formControlName","code_company",3,"matAutocomplete"],["autoCode","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","matInput","","formControlName","owner","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOwner","matAutocomplete"],["inputCheck","","type","text","matInput","","formControlName","create_by","required","",3,"matAutocomplete"],["autoCreateby","matAutocomplete"],["fxFlex","50",1,"pr-8"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer","required","",3,"matAutocomplete"],["autoCus","matAutocomplete"],["style","font-size: 12px",3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","aria-label","Port of Loading","matInput","","formControlName","pol","required","",3,"matAutocomplete","readonly"],["autoPOL","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of discharge","matInput","","formControlName","pod","required","",3,"matAutocomplete"],["autoPOD","matAutocomplete"],["fxFlex","30",1,"pr-8"],["inputCheck","","matInput","","formControlName","load_agent",3,"matAutocomplete","readonly"],["autoAgent2","matAutocomplete"],["inputCheck","","matInput","","formControlName","agent","required","",3,"matAutocomplete"],["autoAgent","matAutocomplete"],["fxFlex","20",1,"pr-8"],["inputCheck","","matInput","","name","date","formControlName","from_date","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["fromDatePicker",""],["inputCheck","","matInput","","name","date","formControlName","to_date","required","",3,"matDatepicker","change"],["toDatePicker",""],["formArrayName","volume","fxFlex","1 0 auto","fxLayout","column"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","type","ngSubmit","color","accent"],["fxFlex","100",4,"ngIf"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent"],["fxLayout","row"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent",1,"mr-8"],["mat-raised-button","","matStepperNext","","type","button","color","accent",3,"disabled"],["class","group mb-12 mt-12",4,"ngIf"],["mat-raised-button","","type","button","color","accent",1,"mr-8",3,"click"],[3,"value"],[2,"font-size","12px",3,"value"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName"],["inputCheck","","aria-label","commodity","matInput","","formControlName","commodity","required","",3,"matAutocomplete"],["autoCommodity","matAutocomplete"],["inputCheck","","matInput","","type","number","formControlName","quantity"],["formControlName","cont_type","required",""],["fxFlex","10",1,"pr-8"],["mat-mini-fab","","color","warn","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn","type","button",3,"click"],["mat-mini-fab","","color","accent","type","button",3,"click"],["fxFlex","100"],[1,"simple","book-table"],[1,"sticky-left-col1",2,"z-index","30"],[1,"sticky-left-col2",2,"z-index","30"],[1,"sticky-right-col"],[4,"ngFor","ngForOf"],[1,"sticky-left-col1"],[1,"sticky-left-col2"],["color","accent",1,"cursor-pointer","mr-8",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"group","mb-12","mt-12"],["fxLayout","row wrap","fxLayoutAlign","start",1,"p-16"],["fxFlex","25",1,"pb-8"],["fxLayout","column","fxLayoutAlign","start"],[1,"text-bold"],[1,"mt-8"],["fxFlex","50",1,"pb-8"],["fxFlex","50","fxFlex.gt-xs","75",1,"pb-8"],["fxFlex","50","fxFlex.gt-xs","25",1,"pb-8"],[1,"text-right"]],template:function(e,t){if(1&e){var o=j.Yb();j.Xb(0,"div",0),j.Xb(1,"div",1),j.Xb(2,"mat-horizontal-stepper",2,3),j.Xb(4,"mat-step",4),j.Jc(5,st,1,0,"ng-template",5),j.Xb(6,"form",6,7),j.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){j.Bc(o);var i=j.xc(3);return t.onFormBookSubmit(t.formBook,i)})),j.Xb(8,"div",8),j.Xb(9,"div",0),j.Xb(10,"div",9),j.Xb(11,"mat-form-field",10),j.Xb(12,"mat-label"),j.Lc(13,"Booking number"),j.Wb(),j.Sb(14,"input",11),j.Jc(15,pt,2,0,"mat-error",12),j.Wb(),j.Xb(16,"mat-form-field",10),j.Xb(17,"mat-label"),j.Lc(18,"Code"),j.Wb(),j.Sb(19,"input",13),j.Xb(20,"mat-autocomplete",null,14),j.Jc(22,ft,2,2,"mat-option",15),j.Wb(),j.Wb(),j.Xb(23,"mat-form-field",10),j.Xb(24,"mat-label"),j.Lc(25,"Owner"),j.Wb(),j.Sb(26,"input",16),j.Xb(27,"mat-autocomplete",17,18),j.Jc(29,ht,2,2,"mat-option",15),j.kc(30,"async"),j.Wb(),j.Jc(31,gt,2,0,"mat-error",12),j.Wb(),j.Xb(32,"mat-form-field",10),j.Xb(33,"mat-label"),j.Lc(34,"Create by"),j.Wb(),j.Sb(35,"input",19),j.Xb(36,"mat-autocomplete",17,20),j.Jc(38,vt,2,2,"mat-option",15),j.kc(39,"async"),j.Wb(),j.Jc(40,kt,2,0,"mat-error",12),j.Wb(),j.Xb(41,"mat-form-field",21),j.Xb(42,"mat-label"),j.Lc(43,"Booking party"),j.Wb(),j.Sb(44,"input",22),j.Xb(45,"mat-autocomplete",17,23),j.Jc(47,yt,2,2,"mat-option",24),j.kc(48,"async"),j.Wb(),j.Jc(49,xt,2,0,"mat-error",12),j.Wb(),j.Xb(50,"mat-form-field",10),j.Xb(51,"mat-label"),j.Lc(52,"Port of loading"),j.Wb(),j.Sb(53,"input",25),j.Xb(54,"mat-autocomplete",17,26),j.Jc(56,Wt,2,2,"mat-option",15),j.kc(57,"async"),j.Wb(),j.Jc(58,Xt,2,0,"mat-error",12),j.Wb(),j.Xb(59,"mat-form-field",10),j.Xb(60,"mat-label"),j.Lc(61,"Port of discharge"),j.Wb(),j.Sb(62,"input",27),j.Xb(63,"mat-autocomplete",17,28),j.Jc(65,wt,2,2,"mat-option",15),j.kc(66,"async"),j.Wb(),j.Jc(67,_t,2,0,"mat-error",12),j.Wb(),j.Xb(68,"mat-form-field",29),j.Xb(69,"mat-label"),j.Lc(70,"Load Agent"),j.Wb(),j.Sb(71,"input",30),j.Xb(72,"mat-autocomplete",17,31),j.Jc(74,Dt,2,2,"mat-option",24),j.kc(75,"async"),j.Wb(),j.Wb(),j.Xb(76,"mat-form-field",29),j.Xb(77,"mat-label"),j.Lc(78,"Dest Agent"),j.Wb(),j.Sb(79,"input",32),j.Xb(80,"mat-autocomplete",17,33),j.Jc(82,Lt,2,2,"mat-option",24),j.kc(83,"async"),j.Wb(),j.Jc(84,Ct,2,0,"mat-error",12),j.Wb(),j.Xb(85,"mat-form-field",34),j.Xb(86,"mat-label"),j.Lc(87,"From Date"),j.Wb(),j.Xb(88,"input",35),j.fc("change",(function(e){return t.commonService.setDateStr(e)})),j.Wb(),j.Sb(89,"mat-datepicker-toggle",36),j.Sb(90,"mat-datepicker",null,37),j.Jc(92,St,2,0,"mat-error",12),j.Wb(),j.Xb(93,"mat-form-field",34),j.Xb(94,"mat-label"),j.Lc(95,"To Date"),j.Wb(),j.Xb(96,"input",38),j.fc("change",(function(e){return t.commonService.setDateStr(e)})),j.Wb(),j.Sb(97,"mat-datepicker-toggle",36),j.Sb(98,"mat-datepicker",null,39),j.Jc(100,At,2,0,"mat-error",12),j.Wb(),j.Xb(101,"div",40),j.Jc(102,Pt,23,11,"div",41),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(103,"div"),j.Xb(104,"button",42),j.Lc(105," Next "),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(106,"mat-step"),j.Jc(107,jt,1,0,"ng-template",5),j.Xb(108,"div",8),j.Xb(109,"div",1),j.Jc(110,Jt,29,1,"div",43),j.Wb(),j.Wb(),j.Xb(111,"div"),j.Xb(112,"button",44),j.Lc(113," Back "),j.Wb(),j.Wb(),j.Wb(),j.Xb(114,"mat-step"),j.Jc(115,Ft,1,0,"ng-template",5),j.Xb(116,"div",8),j.Xb(117,"div",1),j.Jc(118,Ht,29,1,"div",43),j.Wb(),j.Wb(),j.Xb(119,"div",45),j.Xb(120,"button",46),j.Lc(121," Back "),j.Wb(),j.Xb(122,"button",47),j.Lc(123," Next "),j.Wb(),j.Wb(),j.Wb(),j.Xb(124,"mat-step"),j.Jc(125,Rt,1,0,"ng-template",5),j.Xb(126,"div",8),j.Jc(127,Vt,58,9,"div",48),j.Jc(128,Gt,67,19,"div",48),j.Jc(129,$t,17,1,"div",48),j.Jc(130,Qt,29,1,"div",48),j.Wb(),j.Xb(131,"div",45),j.Xb(132,"button",46),j.Lc(133," Previous "),j.Wb(),j.Xb(134,"button",49),j.fc("click",(function(e){return t.saveBook()})),j.Lc(135," Save "),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=j.xc(21),n=j.xc(28),a=j.xc(37),r=j.xc(46),c=j.xc(55),b=j.xc(64),l=j.xc(73),m=j.xc(81),d=j.xc(91),u=j.xc(99);j.Db(2),j.pc("linear",!0),j.Db(2),j.pc("stepControl",t.formBook),j.Db(2),j.pc("formGroup",t.formBook),j.Db(2),j.Ic("height",t.height-48,"px"),j.Db(7),j.pc("ngIf",t.formBook.get("code").hasError("required")),j.Db(4),j.pc("matAutocomplete",i),j.Db(3),j.pc("ngForOf",t.codeCompany),j.Db(4),j.pc("matAutocomplete",n),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),j.Db(2),j.pc("ngForOf",j.lc(30,57,t.filteredUser)),j.Db(2),j.pc("ngIf",t.formBook.get("owner").hasError("required")),j.Db(4),j.pc("matAutocomplete",a),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),j.Db(2),j.pc("ngForOf",j.lc(39,59,t.filteredUser2)),j.Db(2),j.pc("ngIf",t.formBook.get("create_by").hasError("required")),j.Db(4),j.pc("matAutocomplete",r),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),j.Db(2),j.pc("ngForOf",j.lc(48,61,t.filteredCustomer)),j.Db(2),j.pc("ngIf",t.formBook.get("customer").hasError("required")),j.Db(4),j.pc("matAutocomplete",c)("readonly",t.modul.includes("hochiminh")),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),j.Db(2),j.pc("ngForOf",j.lc(57,63,t.filteredPol)),j.Db(2),j.pc("ngIf",t.formBook.get("pol").hasError("required")),j.Db(4),j.pc("matAutocomplete",b),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),j.Db(2),j.pc("ngForOf",j.lc(66,65,t.filteredPod)),j.Db(2),j.pc("ngIf",t.formBook.get("pod").hasError("required")),j.Db(4),j.pc("matAutocomplete",l)("readonly",t.modul.includes("hochiminh")),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),j.Db(2),j.pc("ngForOf",j.lc(75,67,t.filteredAgent2)),j.Db(5),j.pc("matAutocomplete",m),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),j.Db(2),j.pc("ngForOf",j.lc(83,69,t.filteredAgent)),j.Db(2),j.pc("ngIf",t.formBook.get("agent").hasError("required")),j.Db(4),j.pc("matDatepicker",d),j.Db(1),j.pc("for",d),j.Db(3),j.pc("ngIf",t.formBook.get("from_date").hasError("required")),j.Db(4),j.pc("matDatepicker",u),j.Db(1),j.pc("for",u),j.Db(3),j.pc("ngIf",t.formBook.get("to_date").hasError("required")),j.Db(2),j.pc("ngForOf",t.volumeAdd.controls),j.Db(6),j.Ic("height",t.height-48,"px"),j.Db(2),j.pc("ngIf",t.formBook.valid),j.Db(6),j.Ic("height",t.height-48,"px"),j.Db(2),j.pc("ngIf",t.formBook.valid&&t.booking&&t.booking.revenue),j.Db(4),j.pc("disabled",!t.booking||!t.booking.revenue||0==t.booking.revenue.length),j.Db(4),j.Ic("height",t.height-48,"px"),j.Db(1),j.pc("ngIf",t.booking&&t.booking.book),j.Db(1),j.pc("ngIf",t.booking&&t.booking.voyage),j.Db(1),j.pc("ngIf",t.booking&&t.booking.book),j.Db(1),j.pc("ngIf",t.booking&&t.booking.revenue)}},directives:[Q.d,W.a,Q.b,W.b,W.c,ie.A,ie.q,ie.h,d.c,d.f,p.b,ie.b,ie.p,ie.g,ie.w,U.t,c.c,c.a,U.s,b.b,b.d,d.h,b.a,ie.c,l.b,W.f,W.e,d.b,D.n,ie.i,ie.u,h.a,u.a,Q.c],pipes:[U.b,U.f,U.g],styles:["shipment-book-form-overview .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:16px 0 8px}shipment-book-form-overview .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}shipment-book-form-overview .border-black{border:1px solid #000!important}shipment-book-form-overview .book-table{font-size:12px}shipment-book-form-overview .book-table td,shipment-book-form-overview .book-table th{padding:8px;font-size:12px;white-space:nowrap}shipment-book-form-overview .book-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}shipment-book-form-overview .book-table tfoot td{font-weight:600}shipment-book-form-overview .book-table .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}shipment-book-form-overview .book-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}shipment-book-form-overview .book-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background:#fff}shipment-book-form-overview .book-table tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}shipment-book-form-overview .book-table tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:P.a}}),Yt),oo=o("MutI"),io=o("f0Cb"),no=((eo=function e(){_classCallCheck(this,e)}).\u0275mod=j.Pb({type:eo}),eo.\u0275inj=j.Ob({factory:function(e){return new(e||eo)},imports:[[n.k,r.b,a.a,c.b,b.c,l.c,m.b,d.e,u.b,s.b,p.c,f.c,h.b,g.c,v.e,k.b,y.b,x.b,W.d,X.e,w.b,_.b,L.b,C.k,oo.c,io.b,D.t,A.a]]}),eo),ao=((Zt=function e(){_classCallCheck(this,e)}).\u0275mod=j.Pb({type:Zt}),Zt.\u0275inj=j.Ob({factory:function(e){return new(e||Zt)},imports:[[n.k,r.b,a.a,c.b,b.c,l.c,m.b,d.e,u.b,s.b,p.c,f.c,h.b,g.c,v.e,k.b,y.b,x.b,W.d,X.e,w.b,_.b,L.b,C.k,oo.c,io.b,D.t]]}),Zt),ro=((Kt=function e(){_classCallCheck(this,e)}).\u0275mod=j.Pb({type:Kt}),Kt.\u0275inj=j.Ob({factory:function(e){return new(e||Kt)},imports:[[n.k,r.b,a.a,c.b,b.c,l.c,m.b,d.e,u.b,s.b,p.c,f.c,h.b,g.c,v.e,k.b,y.b,x.b,W.d,X.e,w.b,_.b,L.b,C.k,oo.c,io.b,D.t]]}),Kt),co=o("v9+L");o.d(t,"ShipmentBookFormModule",(function(){return mo}));var bo,lo=[{path:"form/:bookId",component:me,resolve:{data:V},children:[{path:"overview",component:to}]}],mo=((bo=function e(){_classCallCheck(this,e)}).\u0275mod=j.Pb({type:bo}),bo.\u0275inj=j.Ob({factory:function(e){return new(e||bo)},providers:[V],imports:[[n.k.forChild(lo),r.b,a.a,c.b,b.c,l.c,m.b,d.e,u.b,s.b,p.c,f.c,h.b,g.c,v.e,k.b,y.b,x.b,W.d,X.e,w.b,_.b,L.b,C.k,S.c,D.t,A.a,O.a,I.f,q.g,N.b,no,ao,ro,co.a]]}),bo)}}]);