(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{IOBc:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("5HBU"),a=r("bTqV"),i=r("kmnG"),o=r("NFeN"),s=r("qFsG"),c=r("wZkO"),l=r("/t3+"),u=r("bSwM"),f=r("+0xr"),m=r("FKr1"),d=r("MutI"),b=r("fXoL");let h=(()=>{class e{}return e.\u0275mod=b.Pb({type:e}),e.\u0275inj=b.Ob({factory:function(t){return new(t||e)},imports:[[n.a,a.c,i.e,o.b,s.c,c.c,l.b,u.b,m.t,d.c,f.k]]}),e})()},cfqv:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return f}));var n=r("8LU1"),a=r("vxfF"),i=r("fXoL"),o=r("HDdC");class s{constructor(e=50){this._totalWeight=0,this._defaultItemSize=e,this._averageItemSize=e}getAverageItemSize(){return this._averageItemSize}addSample(e,t){const r=this._totalWeight+e.end-e.start;if(r){const e=(t+this._averageItemSize*this._totalWeight)/r;e&&(this._averageItemSize=e,this._totalWeight=r)}}reset(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}class c{constructor(e,t,r=new s){this.scrolledIndexChange=new o.a(()=>{throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")}),this._viewport=null,this._removalFailures=0,this._minBufferPx=e,this._maxBufferPx=t,this._averager=r}attach(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}detach(){this._viewport=null}onContentScrolled(){this._viewport&&this._updateRenderedContentAfterScroll()}onDataLengthChanged(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}onContentRendered(){this._viewport&&this._checkRenderedContentSize()}onRenderedOffsetChanged(){this._viewport&&this._checkRenderedContentOffset()}scrollToIndex(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}updateBufferSize(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}_updateRenderedContentAfterScroll(){const e=this._viewport,t=e.measureScrollOffset();let r=t-this._lastScrollOffset,n=Math.abs(r);const a=e.getRenderedRange();let i=0;if(r<0){const e=a.start*this._averager.getAverageItemSize();i=Math.round((e-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,n/(t+n)))),r-=i,n=Math.abs(r)}const o=this._lastScrollOffset-this._lastRenderedContentOffset,s=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),c=n+this._minBufferPx-(r<0?o:s);if(c>0)if(n>=e.getViewportSize())this._renderContentForCurrentOffset();else{const t=Math.max(0,Math.ceil((c-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),l=(r<0?s:o)-this._minBufferPx+n,u=Math.floor(l/this._averager.getAverageItemSize()/(this._removalFailures+1)),f=Math.min(a.end-a.start,Math.max(0,u)),m=this._expandRange(a,r<0?t:0,r>0?t:0);let d,b;if(r<0?m.end=Math.max(m.start+1,m.end-f):m.start=Math.min(m.end-1,m.start+f),r<0){let t=e.measureRangeSize({start:m.end,end:a.end});t<=l?(d=this._lastRenderedContentOffset+this._lastRenderedContentSize-t,this._removalFailures=0):(m.end=a.end,d=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),b="to-end"}else{const t=e.measureRangeSize({start:a.start,end:m.start});t<=l?(d=this._lastRenderedContentOffset+t,this._removalFailures=0):(m.start=a.start,d=this._lastRenderedContentOffset,this._removalFailures++),b="to-start"}e.setRenderedRange(m),e.setRenderedContentOffset(d+i,b)}else i&&e.setRenderedContentOffset(this._lastRenderedContentOffset+i);this._lastScrollOffset=t}_checkRenderedContentSize(){const e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}_checkRenderedContentOffset(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}_renderContentForCurrentOffset(){const e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;const r=this._averager.getAverageItemSize(),n=Math.min(e.getDataLength()-1,Math.floor(t/r)),a=Math.ceil(this._maxBufferPx/r),i=this._expandRange(this._getVisibleRangeForIndex(n),a,a);e.setRenderedRange(i),e.setRenderedContentOffset(r*i.start)}_getVisibleRangeForIndex(e){const t=this._viewport,r={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},n=r.end-t.getDataLength();return n>0&&(r.start=Math.max(0,r.start-n)),r}_expandRange(e,t,r){const n=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(n.getDataLength(),e.end+r)}}_updateTotalContentSize(e){const t=this._viewport,r=t.getRenderedRange(),n=e+(t.getDataLength()-(r.end-r.start))*this._averager.getAverageItemSize();t.setTotalContentSize(n)}}function l(e){return e._scrollStrategy}let u=(()=>{class e{constructor(){this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new c(this.minBufferPx,this.maxBufferPx)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Object(n.f)(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Object(n.f)(e)}ngOnChanges(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[i.Cb([{provide:a.h,useFactory:l,deps:[Object(i.V)(()=>e)]}]),i.Bb()]}),e})(),f=(()=>{class e{}return e.\u0275mod=i.Pb({type:e}),e.\u0275inj=i.Ob({factory:function(t){return new(t||e)}}),e})()},"v9+L":function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r("tyNb"),a=r("STbY"),i=r("/1cH"),o=r("iadO"),s=r("bTqV"),c=r("7EHt"),l=r("kmnG"),u=r("NFeN"),f=r("Qu3c"),m=r("qFsG"),d=r("wZkO"),b=r("d3UM"),h=r("QibW"),p=r("0IaG"),g=r("/t3+"),x=r("bSwM"),v=r("M9IT"),_=r("xHqg"),y=r("A5z7"),C=r("bv9b"),S=r("XhcP"),w=r("FKr1"),X=r("1jcm"),R=r("+0xr"),W=r("MutI"),L=r("f0Cb"),O=r("5HBU"),k=r("fXoL");let F=(()=>{class e{}return e.\u0275mod=k.Pb({type:e}),e.\u0275inj=k.Ob({factory:function(t){return new(t||e)},imports:[[n.k,a.b,O.a,i.b,o.c,s.c,c.b,l.e,u.b,f.b,m.c,d.c,b.b,h.c,p.e,g.b,x.b,v.b,_.d,y.e,C.b,S.b,X.b,R.k,W.c,L.b,w.t]]}),e})()},z0wS:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var n=r("0IaG"),a=r("3Pt+"),i=r("JX91"),o=r("lJxs"),s=r("fXoL"),c=r("tyNb"),l=r("qXBG"),u=r("0Zc1"),f=r("ofXK"),m=r("/t3+"),d=r("XiUz"),b=r("bTqV"),h=r("NFeN"),p=r("EwFO"),g=r("kmnG"),x=r("qFsG"),v=r("/1cH"),_=r("d3UM"),y=r("FKr1"),C=r("ihCf");const S=["formDirective"];function w(e,t){if(1&e&&(s.Xb(0,"mat-option",32),s.Lc(1),s.Wb()),2&e){const e=t.$implicit;s.pc("value",e),s.Db(1),s.Nc(" ",e.name," ")}}function X(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Price is required "),s.Wb())}function R(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Volume is required "),s.Wb())}function W(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Amount is required "),s.Wb())}function L(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Tax is required "),s.Wb())}function O(e,t){if(1&e&&(s.Xb(0,"mat-option",19),s.Lc(1),s.Wb()),2&e){const e=t.$implicit;s.pc("value",e),s.Db(1),s.Nc(" ",e.code," ")}}function k(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Currency is required "),s.Wb())}function F(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Ex_rate is required "),s.Wb())}function z(e,t){if(1&e&&(s.Xb(0,"mat-option",19),s.Lc(1),s.Wb()),2&e){const e=t.$implicit;s.pc("value",e),s.Db(1),s.Nc(" ",e.name," ")}}function I(e,t){1&e&&(s.Xb(0,"mat-error"),s.Lc(1," Payment center is required "),s.Wb())}let P=(()=>{class e{constructor(e,t,r,n,i,o,s){switch(this.router=e,this.matDialogRef=t,this._data=r,this.authService=n,this.commonService=i,this.datePipe=o,this._formBuilder=s,this.errorMessage="",this.type="",this.form=this._formBuilder.group({price:[null,a.y.required],volume:[null,a.y.required],amount:[null,a.y.required],tax:[null,a.y.required],currency:[null,a.y.required],ex_rate:[1,a.y.required],payment_center:[2,a.y.required],info:[null]}),this.partnerColumn={Revenue:"pay_party",Cost:"issue_party"},this.label=r.label,this.shipmentId=r.shipmentId,this.price=r.price,this.currency=r.currency,this.partner=r.partner,this.country=r.country,this.user=r.user,this.permission=r.permission,!0){case this.label.includes("selling rate"):this.type="Revenue";break;case this.label.includes("cost"):this.type="Cost"}if(this.label.includes("Edit")){let e=JSON.parse(JSON.stringify(r.data));e.currency=this.currency.find(t=>t.id==e.currency.id),e.payment_center=this.country.find(t=>t.id==e.payment_center.id),this.form.patchValue(e)}else{let e=this.country.find(e=>e.id==r.customer.country);this.form.controls.payment_center.setValue(e)}}ngOnInit(){this.name=this.authService.name,this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(i.a)(""),Object(o.a)(e=>e?"string"==typeof e?e:e.price_name:null),Object(o.a)(e=>e?this.commonService.filterData(e,"price_name",this.price):[])),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(i.a)(""),Object(o.a)(e=>e?"string"==typeof e?e:e.name:null),Object(o.a)(e=>e?this.commonService.filterData(e,"name",this.country):[])),this.form.valueChanges.subscribe(e=>{this.errorMessage=""})}onFormSubmit(e){if(e.valid){if("string"==typeof e.value.price&&this.form.controls.price.setValue(null),!this.form.valid)return;this.matDialogRef.close(e.value)}}getExrate(e){this.form.controls.ex_rate.setValue(e.value.exrate)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(c.g),s.Rb(n.f),s.Rb(n.a),s.Rb(l.a),s.Rb(u.a),s.Rb(f.f),s.Rb(a.d))},e.\u0275cmp=s.Lb({type:e,selectors:[["bookings-details-revenue-modal-dialog"]],viewQuery:function(e,t){var r;1&e&&s.Sc(S,!0),2&e&&s.wc(r=s.gc())&&(t.shipmentNgForm=r.first)},decls:84,vars:29,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","bookings-details-revenue-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["floatLabel","always","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["floatLabel","always","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","",3,"value","readonly"],["inputCheck","","matInput","","formControlName","volume","min","1","type","number","required",""],["inputCheck","","matInput","","type","number","formControlName","amount","required",""],["formControlName","tax","required",""],[3,"value"],["formControlName","currency","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","number","matInput","","formControlName","ex_rate"],["floatLabel","always","fxFlex","100",1,"pr-8"],["inputCheck","","aria-label","payment_center","matInput","","formControlName","payment_center","required","",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["textareaCheck","","matInput","","formControlName","info","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[2,"font-size","12px","overflow","visible","display","block",3,"value"]],template:function(e,t){if(1&e&&(s.Xb(0,"div",0),s.Xb(1,"mat-toolbar",1),s.Xb(2,"mat-toolbar-row",2),s.Xb(3,"span",3),s.Lc(4),s.Wb(),s.Xb(5,"button",4),s.fc("click",(function(e){return t.matDialogRef.close()})),s.Xb(6,"mat-icon"),s.Lc(7,"close"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(8,"div",5),s.Xb(9,"div"),s.Xb(10,"form",6),s.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),s.Xb(11,"div",7),s.Xb(12,"mat-form-field",8),s.Xb(13,"mat-label"),s.Lc(14,"Price"),s.Wb(),s.Sb(15,"input",9),s.Xb(16,"mat-autocomplete",10,11),s.Jc(18,w,2,2,"mat-option",12),s.kc(19,"async"),s.Wb(),s.Jc(20,X,2,0,"mat-error",13),s.Wb(),s.Xb(21,"mat-form-field",14),s.Xb(22,"mat-label"),s.Lc(23,"Unit"),s.Wb(),s.Sb(24,"input",15),s.Wb(),s.Xb(25,"mat-form-field",14),s.Xb(26,"mat-label"),s.Lc(27,"Volume"),s.Wb(),s.Sb(28,"input",16),s.Jc(29,R,2,0,"mat-error",13),s.Wb(),s.Xb(30,"mat-form-field",14),s.Xb(31,"mat-label"),s.Lc(32,"Amount"),s.Wb(),s.Sb(33,"input",17),s.Jc(34,W,2,0,"mat-error",13),s.Wb(),s.Xb(35,"mat-form-field",14),s.Xb(36,"mat-label"),s.Lc(37,"Tax(%)"),s.Wb(),s.Xb(38,"mat-select",18),s.Xb(39,"mat-option",19),s.Lc(40,"0"),s.Wb(),s.Xb(41,"mat-option",19),s.Lc(42,"5"),s.Wb(),s.Xb(43,"mat-option",19),s.Lc(44,"5.26"),s.Wb(),s.Xb(45,"mat-option",19),s.Lc(46,"7"),s.Wb(),s.Xb(47,"mat-option",19),s.Lc(48,"8"),s.Wb(),s.Xb(49,"mat-option",19),s.Lc(50,"10"),s.Wb(),s.Wb(),s.Jc(51,L,2,0,"mat-error",13),s.Wb(),s.Xb(52,"mat-form-field",14),s.Xb(53,"mat-label"),s.Lc(54,"Currency"),s.Wb(),s.Xb(55,"mat-select",20),s.fc("selectionChange",(function(e){return t.getExrate(e)})),s.Jc(56,O,2,2,"mat-option",21),s.Wb(),s.Jc(57,k,2,0,"mat-error",13),s.Wb(),s.Xb(58,"mat-form-field",14),s.Xb(59,"mat-label"),s.Lc(60,"Ex-rate"),s.Wb(),s.Sb(61,"input",22),s.Jc(62,F,2,0,"mat-error",13),s.Wb(),s.Xb(63,"mat-form-field",23),s.Xb(64,"mat-label"),s.Lc(65,"Payment center"),s.Wb(),s.Sb(66,"input",24),s.Xb(67,"mat-autocomplete",10,25),s.Jc(69,z,2,2,"mat-option",21),s.kc(70,"async"),s.Wb(),s.Jc(71,I,2,0,"mat-error",13),s.Wb(),s.Xb(72,"mat-form-field",23),s.Xb(73,"mat-label"),s.Lc(74,"Info"),s.Wb(),s.Sb(75,"textarea",26),s.Wb(),s.Wb(),s.Xb(76,"div",27),s.Xb(77,"div",28),s.Lc(78),s.Wb(),s.Wb(),s.Xb(79,"div",29),s.Xb(80,"button",30),s.Lc(81,"Submit"),s.Wb(),s.Xb(82,"button",31),s.fc("click",(function(e){return t.matDialogRef.close()})),s.Lc(83,"Cancel"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e){const e=s.xc(17),r=s.xc(68);s.Db(4),s.Mc(t.label),s.Db(6),s.pc("formGroup",t.form),s.Db(5),s.pc("matAutocomplete",e),s.Db(1),s.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),s.Db(2),s.pc("ngForOf",s.lc(19,25,t.filteredPrice)),s.Db(2),s.pc("ngIf",t.form.get("price").hasError("required")),s.Db(4),s.pc("value",null==t.form.value.price?null:t.form.value.price.unit_code)("readonly",!0),s.Db(5),s.pc("ngIf",t.form.get("volume").hasError("required")),s.Db(5),s.pc("ngIf",t.form.get("amount").hasError("required")),s.Db(5),s.pc("value",0),s.Db(2),s.pc("value",5),s.Db(2),s.pc("value",5.26),s.Db(2),s.pc("value",7),s.Db(2),s.pc("value",8),s.Db(2),s.pc("value",10),s.Db(2),s.pc("ngIf",t.form.get("tax").hasError("required")),s.Db(5),s.pc("ngForOf",t.currency),s.Db(1),s.pc("ngIf",t.form.get("currency").hasError("required")),s.Db(5),s.pc("ngIf",t.form.get("ex_rate").hasError("required")),s.Db(4),s.pc("matAutocomplete",r),s.Db(1),s.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),s.Db(2),s.pc("ngForOf",s.lc(70,27,t.filteredCountry)),s.Db(2),s.pc("ngIf",t.form.get("payment_center").hasError("required")),s.Db(7),s.Mc(t.errorMessage)}},directives:[m.a,m.c,d.b,d.d,d.c,b.b,h.a,n.d,p.a,a.A,a.q,a.h,g.c,g.f,x.b,a.b,v.c,a.p,a.g,a.w,v.a,f.s,f.t,a.u,_.a,y.n,C.b,g.b],pipes:[f.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.bookings-details-revenue-modal-dialog{width:100%}}@media screen and (min-width:960px){.bookings-details-revenue-modal-dialog{width:1080px}}.bookings-details-revenue-modal-dialog .mat-dialog-container{padding:0}.bookings-details-revenue-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.bookings-details-revenue-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.bookings-details-revenue-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})()}}]);