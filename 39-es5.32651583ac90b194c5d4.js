function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"/3JZ":function(e,t,n){"use strict";n.r(t);var i=n("tyNb"),o=n("STbY"),r=n("/1cH"),a=n("iadO"),c=n("bTqV"),s=n("7EHt"),b=n("kmnG"),l=n("NFeN"),p=n("Qu3c"),u=n("qFsG"),d=n("wZkO"),h=n("d3UM"),v=n("QibW"),f=n("0IaG"),m=n("/t3+"),g=n("bSwM"),w=n("M9IT"),y=n("xHqg"),k=n("A5z7"),x=n("bv9b"),W=n("XhcP"),D=n("FKr1"),_=n("1jcm"),X=n("+0xr"),S=n("Dh3D"),O=n("IOBc"),C=n("212X"),L=n("5HBU"),M=n("LPQX"),T=n("vxfF"),j=n("cfqv"),P=n("fXoL"),I=n("ofXK");function F(e,t){1&e&&P.Sb(0,"router-outlet")}var V,J=((V=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||V)},V.\u0275cmp=P.Lb({type:V,selectors:[["overview"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&P.Jc(0,F,1,0,"router-outlet",0),2&e&&P.pc("ngIf",!0)},directives:[I.t,i.l],styles:[""]}),V),A=n("XNiG"),R=n("1G5W"),B=n("qXBG"),$=n("0Zc1"),N=n("XiUz"),z=n("3Pt+");function H(e,t){if(1&e&&(P.Xb(0,"mat-option",7),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n),P.Db(1),P.Mc(n)}}function E(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"th",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(2),P.Mc(n)}}function U(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"th",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(2),P.Mc(n)}}function Y(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc(3).$implicit,o=P.jc(2);P.Db(1),P.Eb("rowspan",o.dataVessel[i].shipment.length),P.Db(1),P.Mc(o.dataVessel[i][n])}}function q(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.kc(7,"date"),P.Wb(),P.Xb(8,"td"),P.Lc(9),P.kc(10,"date"),P.Wb(),P.Jc(11,Y,3,2,"ng-container",15),P.Ub()),2&e){var n=P.jc().$implicit,i=P.jc(),o=i.$implicit,r=i.index,a=P.jc(2);P.Db(1),P.Eb("rowspan",a.dataVessel[o].shipment.length),P.Db(1),P.Mc(r+1),P.Db(1),P.Eb("rowspan",a.dataVessel[o].shipment.length),P.Db(1),P.Oc("",n.voyage.vessel_name," ",n.voyage.name,""),P.Db(1),P.Eb("rowspan",a.dataVessel[o].shipment.length),P.Db(1),P.Mc(P.mc(7,10,n.voyage.depart_time,"MM/dd/yyyy HH:mm")),P.Db(2),P.Eb("rowspan",a.dataVessel[o].shipment.length),P.Db(1),P.Mc(P.mc(10,13,n.voyage.arrive_time,"MM/dd/yyyy HH:mm")),P.Db(2),P.pc("ngForOf",a.contType)}}function G(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc().$implicit;P.Db(2),P.Mc(i[n])}}function K(e,t){if(1&e){var n=P.Yb();P.Xb(0,"tr"),P.Jc(1,q,12,16,"ng-container",26),P.Xb(2,"td",27),P.Xb(3,"a",28),P.fc("click",(function(e){return P.Bc(n),P.jc(3).matDialogRef.close()})),P.Lc(4),P.Wb(),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Jc(7,G,3,1,"ng-container",15),P.Xb(8,"td"),P.Lc(9),P.Wb(),P.Xb(10,"td"),P.Lc(11),P.Wb(),P.Xb(12,"td"),P.Lc(13),P.Wb(),P.Xb(14,"td"),P.Lc(15),P.Wb(),P.Xb(16,"td"),P.Lc(17),P.Wb(),P.Wb()}if(2&e){var i=t.$implicit,o=t.index,r=P.jc(3);P.Db(1),P.pc("ngIf",0==o),P.Db(2),P.pc("routerLink","/apps/"+r.modul+"/shipment/book-detail/id/"+i.id+"/overview"),P.Db(1),P.Mc(i.book.code),P.Db(2),P.Mc(i.book.customer.short_name),P.Db(1),P.pc("ngForOf",r.contType),P.Db(2),P.Mc(i.voyage.load_terminal_name),P.Db(2),P.Mc(i.voyage.discharge_terminal_name),P.Db(2),P.Mc(i.book.commodity),P.Db(2),P.Mc(i.name?i.name:i.user),P.Db(2),P.Mc(i.book.create_by?i.book.create_by.name:i.user)}}function Q(e,t){if(1&e&&(P.Vb(0),P.Jc(1,K,18,10,"tr",15),P.Ub()),2&e){var n=t.$implicit,i=P.jc(2);P.Db(1),P.pc("ngForOf",i.dataVessel[n].shipment)}}function Z(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"tr"),P.Xb(2,"td",25),P.Lc(3),P.Wb(),P.Wb(),P.Jc(4,Q,2,1,"ng-container",15),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(2),P.Eb("colspan",12+i.contType.length),P.Db(1),P.Mc(n),P.Db(1),P.pc("ngForOf",i.voyage[n])}}function ee(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",29),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(2),P.Mc(i.total[n])}}function te(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"th",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(2),P.Mc(n)}}function ne(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"th",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(2),P.Mc(n)}}function ie(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",30),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"add"),P.Wb()}}function oe(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",31),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"removed"),P.Wb()}}function re(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",30),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"add"),P.Wb()}}function ae(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",31),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"removed"),P.Wb()}}function ce(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc(4).$implicit,o=P.jc(2);P.Db(1),P.Eb("rowspan",o.dataVessel[i].shipment.length+o.dataVessel[i].container),P.Db(1),P.Mc(o.dataVessel[i][n])}}function se(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.kc(7,"date"),P.Wb(),P.Xb(8,"td"),P.Lc(9),P.kc(10,"date"),P.Wb(),P.Jc(11,ce,3,2,"ng-container",15),P.Ub()),2&e){var n=P.jc(2).$implicit,i=P.jc(),o=i.$implicit,r=i.index,a=P.jc(2);P.Db(1),P.Eb("rowspan",a.dataVessel[o].shipment.length+a.dataVessel[o].container),P.Db(1),P.Mc(r+1),P.Db(1),P.Eb("rowspan",a.dataVessel[o].shipment.length+a.dataVessel[o].container),P.Db(1),P.Oc("",n.voyage.vessel_name," ",n.voyage.name,""),P.Db(1),P.Eb("rowspan",a.dataVessel[o].shipment.length+a.dataVessel[o].container),P.Db(1),P.Mc(P.mc(7,10,n.voyage.depart_time,"MM/dd/yyyy HH:mm")),P.Db(2),P.Eb("rowspan",a.dataVessel[o].shipment.length+a.dataVessel[o].container),P.Db(1),P.Mc(P.mc(10,13,n.voyage.arrive_time,"MM/dd/yyyy HH:mm")),P.Db(2),P.pc("ngForOf",a.contType)}}function be(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",35),P.fc("click",(function(e){P.Bc(n);var t=P.jc(3).$implicit;return P.jc(3).openModal(t)})),P.Lc(1,"add"),P.Wb()}2&e&&P.pc("matTooltip","Add container")}function le(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc(3).$implicit;P.Db(1),P.Eb("rowspan",i.bookConfirm.contArr.length),P.Db(1),P.Mc(i[n])}}function pe(e,t){if(1&e&&(P.Xb(0,"td",37),P.Xb(1,"div",38),P.Xb(2,"span",39),P.Lc(3),P.Wb(),P.Xb(4,"span",40),P.Lc(5),P.kc(6,"number"),P.Wb(),P.Wb(),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc(4).$implicit,o=P.jc(3);P.Db(1),P.pc("matTooltip",n.payment_center),P.Db(2),P.Oc("",n.code," ",n.currency,""),P.Db(2),P.Mc(P.mc(6,4,o.priceObj[i.id].revenueVNPrice[n.code+n.currency+n.payment_center],"VND"==n.currency?"1.0-0":"1.2-2"))}}function ue(e,t){if(1&e&&(P.Vb(0),P.Jc(1,pe,7,7,"td",36),P.Ub()),2&e){var n=t.$implicit,i=P.jc(4).$implicit,o=P.jc(3);P.Db(1),P.pc("ngIf",o.priceObj[i.id].revenueVNPrice[n.code+n.currency+n.payment_center])}}function de(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ue,2,1,"ng-container",15),P.Ub()),2&e){var n=P.jc(6);P.Db(1),P.pc("ngForOf",n.priceHeader)}}function he(e,t){if(1&e&&(P.Xb(0,"td",37),P.Xb(1,"div",38),P.Xb(2,"span",39),P.Lc(3),P.Wb(),P.Xb(4,"span",40),P.Lc(5),P.kc(6,"number"),P.Wb(),P.Wb(),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc(5).$implicit,o=P.jc(3);P.Db(1),P.pc("matTooltip",n.payment_center),P.Db(2),P.Oc("",n.code," ",n.currency,""),P.Db(2),P.Mc(P.mc(6,4,o.priceObj[i.id].revenueNNPrice[n.code+n.currency+n.payment_center],"VND"==n.currency?"1.0-0":"1.2-2"))}}function ve(e,t){if(1&e&&(P.Vb(0),P.Jc(1,he,7,7,"td",36),P.Ub()),2&e){var n=t.$implicit,i=P.jc(5).$implicit,o=P.jc(3);P.Db(1),P.pc("ngIf",o.priceObj[i.id].revenueNNPrice[n.code+n.currency+n.payment_center])}}function fe(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ve,2,1,"ng-container",15),P.Ub()),2&e){var n=P.jc(7);P.Db(1),P.pc("ngForOf",n.priceHeader)}}function me(e,t){if(1&e&&(P.Xb(0,"td",33),P.Jc(1,fe,2,1,"ng-container",26),P.Wb()),2&e){var n=P.jc(3).$implicit,i=P.jc(3);P.Eb("rowspan",n.bookConfirm.contArr.length),P.Db(1),P.pc("ngIf",i.revenueNNOpen)}}function ge(e,t){if(1&e){var n=P.Yb();P.Vb(0),P.Xb(1,"td",27),P.Xb(2,"div",20),P.Xb(3,"a",28),P.fc("click",(function(e){return P.Bc(n),P.jc(5).matDialogRef.close()})),P.Lc(4),P.Wb(),P.Jc(5,be,2,1,"mat-icon",32),P.Wb(),P.Wb(),P.Xb(6,"td"),P.Lc(7),P.Wb(),P.Jc(8,le,3,2,"ng-container",15),P.Xb(9,"td"),P.Lc(10),P.Wb(),P.Xb(11,"td"),P.Lc(12),P.Wb(),P.Xb(13,"td"),P.Lc(14),P.Wb(),P.Xb(15,"td"),P.Lc(16),P.Wb(),P.Xb(17,"td"),P.Lc(18),P.Wb(),P.Xb(19,"td",33),P.Jc(20,de,2,1,"ng-container",26),P.Wb(),P.Jc(21,me,2,2,"td",34),P.Ub()}if(2&e){var i=P.jc().index,o=P.jc().$implicit,r=P.jc(3);P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(2),P.pc("routerLink","/apps/"+r.modul+"/shipment/book-detail/id/"+o.id+"/overview"),P.Db(1),P.Mc(o.book.code),P.Db(1),P.pc("ngIf",0==i),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.Mc(o.book.customer.short_name),P.Db(1),P.pc("ngForOf",r.contType),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.Mc(o.voyage.load_terminal_name),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.Mc(o.voyage.discharge_terminal_name),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.Mc(o.book.commodity),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.Mc(o.name?o.name:o.user),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.Mc(o.book.create_by?o.book.create_by.name:o.user),P.Db(1),P.Eb("rowspan",o.bookConfirm.contArr.length),P.Db(1),P.pc("ngIf",r.revenueVNOpen),P.Db(1),P.pc("ngIf",r.revenueNNOpen)}}function we(e,t){if(1&e&&(P.Xb(0,"tr"),P.Jc(1,se,12,16,"ng-container",26),P.Jc(2,ge,22,20,"ng-container",26),P.Xb(3,"td",23),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Wb()),2&e){var n=t.$implicit,i=t.index,o=P.jc().index;P.Db(1),P.pc("ngIf",0==o&&0==i),P.Db(1),P.pc("ngIf",0==i),P.Db(2),P.Mc(n.container),P.Db(2),P.Mc(n.type)}}function ye(e,t){if(1&e&&(P.Vb(0),P.Jc(1,we,7,4,"tr",15),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngForOf",n.bookConfirm.contArr)}}function ke(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ye,2,1,"ng-container",15),P.Ub()),2&e){var n=t.$implicit,i=P.jc(2);P.Db(1),P.pc("ngForOf",i.dataVessel[n].shipment)}}function xe(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"tr"),P.Xb(2,"td",25),P.Lc(3),P.Wb(),P.Wb(),P.Jc(4,ke,2,1,"ng-container",15),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(2),P.Eb("colspan",15+i.contType.length),P.Db(1),P.Mc(n),P.Db(1),P.pc("ngForOf",i.voyage[n])}}function We(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",29),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(2),P.Mc(i.total[n])}}function De(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"th",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(2),P.Mc(n)}}function _e(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",24),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc().$implicit;P.Db(2),P.Mc(i[n])}}function Xe(e,t){if(1&e){var n=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td",27),P.Xb(4,"a",28),P.fc("click",(function(e){return P.Bc(n),P.jc(2).matDialogRef.close()})),P.Lc(5),P.Wb(),P.Wb(),P.Xb(6,"td"),P.Lc(7),P.Wb(),P.Xb(8,"td"),P.Lc(9),P.Wb(),P.Jc(10,_e,3,1,"ng-container",15),P.Xb(11,"td"),P.Lc(12),P.Wb(),P.Xb(13,"td"),P.Lc(14),P.kc(15,"date"),P.Wb(),P.Xb(16,"td"),P.Lc(17),P.Wb(),P.Xb(18,"td"),P.Lc(19),P.kc(20,"date"),P.Wb(),P.Xb(21,"td"),P.Lc(22),P.Wb(),P.Xb(23,"td"),P.Lc(24),P.Wb(),P.Xb(25,"td"),P.Lc(26),P.Wb(),P.Wb()}if(2&e){var i=t.$implicit,o=t.index,r=P.jc(2);P.Db(2),P.Mc(o+1),P.Db(2),P.pc("routerLink","/apps/"+r.modul+"/shipment/book-detail/id/"+i.id+"/overview"),P.Db(1),P.Mc(i.book.code),P.Db(2),P.Mc(i.book.customer.short_name),P.Db(2),P.Oc("",i.voyage.vessel_name," ",i.voyage.name,""),P.Db(1),P.pc("ngForOf",r.contType),P.Db(2),P.Mc(i.voyage.load_terminal_name),P.Db(2),P.Mc(P.mc(15,14,i.voyage.depart_time,"MM/dd/yyyy HH:mm")),P.Db(3),P.Mc(i.voyage.discharge_terminal_name),P.Db(2),P.Mc(P.mc(20,17,i.voyage.arrive_time,"MM/dd/yyyy HH:mm")),P.Db(3),P.Mc(i.book.commodity),P.Db(2),P.Mc(i.name?i.name:i.user),P.Db(2),P.Mc(i.book.create_by?i.book.create_by.name:i.user)}}function Se(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"tr"),P.Xb(2,"td",25),P.Lc(3),P.Wb(),P.Wb(),P.Jc(4,Xe,27,20,"tr",15),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(2),P.Eb("colspan",12+i.contType.length),P.Db(1),P.Mc(n),P.Db(1),P.pc("ngForOf",i.data[n])}}function Oe(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",41),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(2),P.Mc(i.total[n])}}var Ce,Le,Me,Te=((Ce=function(){function e(t,n,i,o,r,a,c){var s=this;_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=i,this.authService=o,this.commonService=r,this._matDialog=a,this.datePipe=c,this.vessel=[],this.data={},this.dataVessel={},this.voyage={},this.sptRouter=[],this.book=[],this.filterBook=[],this.selected=0,this.total={},this.priceHeader=[],this.priceObj={},this.selectedVessel="all",this.revenueVNOpen=!0,this.revenueNNOpen=!0,this.height=500,this.label=i.label,this.book=i.data,this.contType=i.contType,this.priceHeader=i.priceHeader,this.priceObj=i.priceObj,this.height=i.height,this.modul=i.modul,this.bookFirebaseService=i.bookFirebaseService,this.vessel=[],this.book.map((function(e){s.vessel.includes(e.voyage.vessel_name+" "+e.voyage.name)||s.vessel.push(e.voyage.vessel_name+" "+e.voyage.name)})),this.filterBook=this.book.slice(),this.buildReport()}return _createClass(e,[{key:"ngOnInit",value:function(){this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}},{key:"selectedChanged",value:function(e){this.filterBook="all"!=e.value?this.book.filter((function(t){return t.voyage.vessel_name+" "+t.voyage.name==e.value})):this.book.slice(),this.buildReport()}},{key:"buildReport",value:function(){var e=this;this.sptRouter=[],this.data={},this.voyage={},this.dataVessel={},this.total={},this.filterBook.map((function(t){t.bookConfirm.contArr&&0!=t.bookConfirm.contArr.length||(t.bookConfirm.contArr=[{container:null,type:null}]);var n=t.voyage.load_port_name+"-"+t.voyage.discharge_port_name;e.sptRouter.includes(n)?e.data[n].push(t):(e.sptRouter.push(n),e.data[n]=[t])})),this.sptRouter.map((function(t){e.voyage[t]=[],e.data[t].map((function(n){var i=n.voyage,o=i.depart_time+"-"+i.vessel_name+"-"+i.name;e.dataVessel[o]||(e.dataVessel[o]={voyage_name:i.name,vessel_name:i.vessel_name,pol_name:i.load_port_name,pod_name:i.discharge_port_name,depart_time:i.depart_time,arrive_time:i.arrive_time,closing_time:i.closing_time,shipment:[],container:0},e.voyage[t].push(o)),e.dataVessel[o].shipment.push(n),e.dataVessel[o].container+=n.bookConfirm.contArr.length-1,n.book.volume.map((function(t){e.dataVessel[o][t.cont_type.code]?e.dataVessel[o][t.cont_type.code]+=t.quantity:e.dataVessel[o][t.cont_type.code]=t.quantity,e.total[t.cont_type.code]?e.total[t.cont_type.code]+=t.quantity:e.total[t.cont_type.code]=t.quantity}))}))}))}},{key:"openModal",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||Ce)(P.Rb(i.g),P.Rb(f.f),P.Rb(f.a),P.Rb(B.a),P.Rb($.a),P.Rb(f.b),P.Rb(I.f))},Ce.\u0275cmp=P.Lb({type:Ce,selectors:[["overview-view-modal-dialog"]],decls:183,vars:25,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-button","",3,"color","click"],["mat-button","",1,"ml-8",3,"color","click"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matPrefix",""],["mat-icon-button","","aria-label","Close dialog",3,"click"],[1,"p-16","pb-0","m-0",2,"overflow","auto"],[1,"header-less-tabs",3,"selectedIndex"],[1,"viewer-panel"],[1,"simple","overview-view-table"],[4,"ngFor","ngForOf"],[1,"sticky-col1",2,"z-index","25"],[1,"sticky-col1","text-bold"],[1,"w-40","p-0","sticky-right-col"],[1,"simple","overview-view-table2"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[1,"sticky-right-col"],[1,"text-center"],[1,"text-bold","row-router"],[4,"ngIf"],[1,"sticky-col1"],[1,"cursor-pointer",3,"routerLink","click"],[1,"text-bold","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],["class","cursor-pointer","color","accent",3,"matTooltip","click",4,"ngIf"],[2,"padding","0"],["style","padding: 0",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"matTooltip","click"],["style","padding: 4px","class"," border-right w-80 accent-100-bg",4,"ngIf"],[1,"border-right","w-80","accent-100-bg",2,"padding","4px"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],[1,"text-bold"],[1,"text-center","text-bold"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"mat-toolbar",1),P.Xb(2,"mat-toolbar-row",2),P.Xb(3,"div"),P.Xb(4,"span",3),P.Lc(5),P.Wb(),P.Xb(6,"button",4),P.fc("click",(function(e){return t.selected=0})),P.Lc(7,"Vessel"),P.Wb(),P.Xb(8,"button",4),P.fc("click",(function(e){return t.selected=1})),P.Lc(9,"Container"),P.Wb(),P.Xb(10,"button",5),P.fc("click",(function(e){return t.selected=2})),P.Lc(11,"Router"),P.Wb(),P.Wb(),P.Xb(12,"div"),P.Xb(13,"mat-form-field"),P.Xb(14,"mat-select",6),P.fc("ngModelChange",(function(e){return t.selectedVessel=e}))("selectionChange",(function(e){return t.selectedChanged(e)})),P.Xb(15,"mat-option",7),P.Lc(16,"All"),P.Wb(),P.Jc(17,H,2,2,"mat-option",8),P.Wb(),P.Xb(18,"span",9),P.Lc(19,"Vessel:\xa0"),P.Wb(),P.Wb(),P.Xb(20,"button",10),P.fc("click",(function(e){return t.matDialogRef.close()})),P.Xb(21,"mat-icon"),P.Lc(22,"close"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(23,"div",11),P.Xb(24,"mat-tab-group",12),P.Xb(25,"mat-tab"),P.Xb(26,"div",13),P.Xb(27,"table",14),P.Xb(28,"thead"),P.Xb(29,"tr"),P.Xb(30,"th"),P.Lc(31,"No"),P.Wb(),P.Xb(32,"th"),P.Lc(33,"Voyage"),P.Wb(),P.Xb(34,"th"),P.Lc(35,"ETD"),P.Wb(),P.Xb(36,"th"),P.Lc(37,"ETA"),P.Wb(),P.Jc(38,E,3,1,"ng-container",15),P.Xb(39,"th",16),P.Lc(40,"Code"),P.Wb(),P.Xb(41,"th"),P.Lc(42,"Customer"),P.Wb(),P.Jc(43,U,3,1,"ng-container",15),P.Xb(44,"th"),P.Lc(45,"Load terminal"),P.Wb(),P.Xb(46,"th"),P.Lc(47,"Discharge terminal"),P.Wb(),P.Xb(48,"th"),P.Lc(49,"Commodity"),P.Wb(),P.Xb(50,"th"),P.Lc(51,"Owner"),P.Wb(),P.Xb(52,"th"),P.Lc(53,"Create by"),P.Wb(),P.Wb(),P.Wb(),P.Xb(54,"tbody"),P.Jc(55,Z,5,3,"ng-container",15),P.Wb(),P.Xb(56,"tfoot"),P.Xb(57,"tr"),P.Sb(58,"td"),P.Xb(59,"td",17),P.Lc(60,"Total"),P.Wb(),P.Sb(61,"td"),P.Sb(62,"td"),P.Jc(63,ee,3,1,"ng-container",15),P.Sb(64,"td"),P.Sb(65,"td"),P.Sb(66,"td"),P.Sb(67,"td"),P.Sb(68,"td"),P.Sb(69,"td"),P.Sb(70,"td"),P.Sb(71,"td",18),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(72,"mat-tab"),P.Xb(73,"div",13),P.Xb(74,"table",19),P.Xb(75,"thead"),P.Xb(76,"tr"),P.Xb(77,"th"),P.Lc(78,"No"),P.Wb(),P.Xb(79,"th"),P.Lc(80,"Voyage"),P.Wb(),P.Xb(81,"th"),P.Lc(82,"ETD"),P.Wb(),P.Xb(83,"th"),P.Lc(84,"ETA"),P.Wb(),P.Jc(85,te,3,1,"ng-container",15),P.Xb(86,"th",16),P.Lc(87,"Code"),P.Wb(),P.Xb(88,"th"),P.Lc(89,"Customer"),P.Wb(),P.Jc(90,ne,3,1,"ng-container",15),P.Xb(91,"th"),P.Lc(92,"Load terminal"),P.Wb(),P.Xb(93,"th"),P.Lc(94,"Discharge terminal"),P.Wb(),P.Xb(95,"th"),P.Lc(96,"Commodity"),P.Wb(),P.Xb(97,"th"),P.Lc(98,"Owner"),P.Wb(),P.Xb(99,"th"),P.Lc(100,"Create by"),P.Wb(),P.Xb(101,"th"),P.Xb(102,"div",20),P.Xb(103,"span"),P.Lc(104,"REV VN"),P.Wb(),P.Jc(105,ie,2,0,"mat-icon",21),P.Jc(106,oe,2,0,"mat-icon",22),P.Wb(),P.Wb(),P.Xb(107,"th"),P.Xb(108,"div",20),P.Xb(109,"span"),P.Lc(110,"REV NN"),P.Wb(),P.Jc(111,re,2,0,"mat-icon",21),P.Jc(112,ae,2,0,"mat-icon",22),P.Wb(),P.Wb(),P.Xb(113,"th",23),P.Lc(114,"Container"),P.Wb(),P.Xb(115,"th"),P.Lc(116,"Type"),P.Wb(),P.Wb(),P.Wb(),P.Xb(117,"tbody"),P.Jc(118,xe,5,3,"ng-container",15),P.Wb(),P.Xb(119,"tfoot"),P.Xb(120,"tr"),P.Sb(121,"td"),P.Xb(122,"td",17),P.Lc(123,"Total"),P.Wb(),P.Sb(124,"td"),P.Sb(125,"td"),P.Jc(126,We,3,1,"ng-container",15),P.Sb(127,"td"),P.Sb(128,"td"),P.Sb(129,"td"),P.Sb(130,"td"),P.Sb(131,"td"),P.Sb(132,"td"),P.Sb(133,"td"),P.Sb(134,"td"),P.Sb(135,"td"),P.Sb(136,"td"),P.Sb(137,"td"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(138,"mat-tab"),P.Xb(139,"div",13),P.Xb(140,"table",14),P.Xb(141,"thead"),P.Xb(142,"tr"),P.Xb(143,"th"),P.Lc(144,"No"),P.Wb(),P.Xb(145,"th",16),P.Lc(146,"Code"),P.Wb(),P.Xb(147,"th"),P.Lc(148,"Customer"),P.Wb(),P.Xb(149,"th"),P.Lc(150,"Voyage"),P.Wb(),P.Jc(151,De,3,1,"ng-container",15),P.Xb(152,"th"),P.Lc(153,"Load terminal"),P.Wb(),P.Xb(154,"th"),P.Lc(155,"ETD"),P.Wb(),P.Xb(156,"th"),P.Lc(157,"Discharge terminal"),P.Wb(),P.Xb(158,"th"),P.Lc(159,"ETA"),P.Wb(),P.Xb(160,"th"),P.Lc(161,"Commodity"),P.Wb(),P.Xb(162,"th"),P.Lc(163,"Owner"),P.Wb(),P.Xb(164,"th"),P.Lc(165,"Create by"),P.Wb(),P.Wb(),P.Wb(),P.Xb(166,"tbody"),P.Jc(167,Se,5,3,"ng-container",15),P.Wb(),P.Xb(168,"tfoot"),P.Xb(169,"tr"),P.Sb(170,"td"),P.Xb(171,"td",17),P.Lc(172,"Total"),P.Wb(),P.Sb(173,"td"),P.Sb(174,"td"),P.Jc(175,Oe,3,1,"ng-container",15),P.Sb(176,"td"),P.Sb(177,"td"),P.Sb(178,"td"),P.Sb(179,"td"),P.Sb(180,"td"),P.Sb(181,"td"),P.Sb(182,"td"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(5),P.Mc(t.label),P.Db(1),P.pc("color",0==t.selected?"primary":""),P.Db(2),P.pc("color",1==t.selected?"primary":""),P.Db(2),P.pc("color",2==t.selected?"primary":""),P.Db(4),P.pc("ngModel",t.selectedVessel),P.Db(1),P.pc("value","all"),P.Db(2),P.pc("ngForOf",t.vessel),P.Db(6),P.Ic("height",t.height,"px"),P.Db(1),P.pc("selectedIndex",t.selected),P.Db(14),P.pc("ngForOf",t.contType),P.Db(5),P.pc("ngForOf",t.contType),P.Db(12),P.pc("ngForOf",t.sptRouter),P.Db(8),P.pc("ngForOf",t.contType),P.Db(22),P.pc("ngForOf",t.contType),P.Db(5),P.pc("ngForOf",t.contType),P.Db(15),P.pc("ngIf",!t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(5),P.pc("ngIf",!t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(6),P.pc("ngForOf",t.sptRouter),P.Db(8),P.pc("ngForOf",t.contType),P.Db(25),P.pc("ngForOf",t.contType),P.Db(16),P.pc("ngForOf",t.sptRouter),P.Db(8),P.pc("ngForOf",t.contType))},directives:[m.a,m.c,N.b,N.d,N.c,c.b,b.c,h.a,z.p,z.s,D.n,I.s,b.g,l.a,d.b,d.a,I.t,i.j,p.a],pipes:[I.f,I.g],styles:["@media screen and (min-width:600px)and (max-width:959px){.overview-view-modal-dialog{width:100%}}@media screen and (min-width:960px){.overview-view-modal-dialog{width:1080px}}.overview-view-modal-dialog .mat-dialog-container{padding:0}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel{height:100%}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table{overflow:auto}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table td,.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table th{padding:8px;font-size:12px!important;white-space:nowrap}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table .row-router{background-color:#e0e0e0}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table .sticky-right-col{min-width:100px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2{overflow:auto}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2 td,.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2 th{padding:8px;font-size:12px!important;white-space:nowrap}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2 td{border-bottom:1px solid #000!important}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2 thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2 .row-router{background-color:#e0e0e0}.overview-view-modal-dialog .dialog-content-wrapper .viewer-panel .overview-view-table2 .sticky-right-col{min-width:100px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.overview-view-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.overview-view-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}.overview-view-modal-dialog .header-less-tabs.mat-tab-group .mat-tab-header{display:none}"],encapsulation:2}),Ce),je=n("HX77"),Pe=n("2Vo4"),Ie=n("jD4G"),Fe=n("tk/3"),Ve=((Le=function(){function e(t,n,i){_classCallCheck(this,e),this._httpClient=t,this.authService=n,this.datePipe=i,this.defaultSearch={formFilter:{code:null,customer:null,owner:null,pay_customer:null},formSearch:{customer:null,principal:null,agent:null,owner:null,pol:null,pod:null,date_from:null,date_to:null}},this.headerType=[],this.containerMovement={LOAD:[],FULIM:[],TRIM:[],EMPTY:[],TREXP:[],FULEX:[]},this.onDataChanged=new Pe.a([]),this.onDataItemChanged=new Pe.a([]),this.onOverviewChanged=new Pe.a([]),this.onBookOverviewChanged=new Pe.a([]),this.onShipmentChanged=new Pe.a([]),this.onContainersMovementChanged=new Pe.a([]),this.onFilterChanged=new A.a,this.onSearchTextChanged=new A.a}return _createClass(e,[{key:"resolve",value:function(e){var t=this;if(e&&(this.authService.routerData=e),this.authService.back&&(this.authService.back=!1),!this.currenSearch||this.currenSearch&&!this.currenSearch.formSearch){this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch));var n=new Date,i=n.getFullYear(),o=n.getMonth();n=new Date(n.setMonth(o-1)),n=new Date(n.setFullYear(i-1)),this.currenSearch.formSearch.date_movement=this.datePipe.transform(n,"yyyy-MM-dd")}return new Promise((function(e,n){Promise.all([t.getShipment(t.currenSearch.formSearch),t.getContainerMovement(),t.getData()]).then((function(n){_slicedToArray(n,1)[0],t.onFilterChanged.subscribe((function(e){t.filterBy=e,t.getFilterShipment()})),t.onSearchTextChanged.subscribe((function(e){t.searchText=e,t.getFilterShipment()})),e()}),n)}))}},{key:"checkModule",value:function(e){var t=e.split("-"),n={haiphong:3,hochiminh:4,singapore:12},i={pol:null,pod:null};return"import"==t[0]&&(i.pod=n[t[1]]),"export"==t[0]&&(i.pol=n[t[1]]),i}},{key:"getData",value:function(){var e=this,t={headers:new Fe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/pln/shipment/data",t).subscribe((function(t){e.partner=t[0],e.seaport=t[1],e.users=t[2],e.country=t[3],e.seaTerminal=t[4],e.onDataChanged.next(t),n(t)}),i)}))}},{key:"getItemData",value:function(){var e=this,t={headers:new Fe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/pln/shipment/item-data",t).subscribe((function(t){e.price=t[0],e.unit=t[1],e.currency=t[2],e.country=t[3],e.users=t[4],e.commodity=t[5],e.packageType=t[6],e.onDataItemChanged.next(t),n(t)}),i)}))}},{key:"getShipment",value:function(e){var t=this;this.currenSearch.formSearch=e;var n={headers:new Fe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.post(t.authService.apiUrl+"/pln/shipment/overview",e,n).subscribe((function(e){t.shipments=e[0],t.objRevenue=e[1],t.objCost=e[2],t.objMove=e[3],t.arrType=e[4],t.getFilterShipment(),i(e)}),o)}))}},{key:"getFilterShipment",value:function(){var e=JSON.parse(JSON.stringify(this.shipments));this.searchText&&""!==this.searchText&&(e=Ie.a.filterArrayByString(e,this.searchText)),this.filterShipment=e,this.buildVesselOverview(e)}},{key:"getContainerMovement",value:function(){var e=this,t={headers:new Fe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/pln/shipment/container-movement",t).subscribe((function(t){e.headerType=t[0],e.containerMovement=t[1],e.onContainersMovementChanged.next(t),n(t)}),i)}))}},{key:"getPermissionById",value:function(e){var t=this,n={headers:new Fe.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,o){t._httpClient.get(t.authService.apiUrl+"/permission/id/"+e,n).subscribe((function(e){i(e)}),o)}))}},{key:"buildVesselOverview",value:function(e){var t=this;this.total={shipment:0,load_shipment:0,revenue:0,cost:0,revenuePaydate:0,costPaydate:0,revenueComplete:0,costComplete:0,teu:0,load_teu:0},this.totalMonth={},this.arrMonth=[],this.arrYear=[],this.portPair=[];var n=[],i=[],o={};e.map((function(e){e.revenue=t.objRevenue[e.id]?t.objRevenue[e.id]:[],e.cost=t.objCost[e.id]?t.objCost[e.id]:[],e.move=t.objMove[e.id]?t.objMove[e.id]:[];var r={pol:e.pol,pol_lat:e.pol_info&&e.pol_info.coords&&e.pol_info.coords.lat?e.pol_info.coords.lat:null,pol_lng:e.pol_info&&e.pol_info.coords&&e.pol_info.coords.lng?e.pol_info.coords.lng:null,pol_name:e.pol_name,pod:e.pod,pod_lat:e.pod_info&&e.pod_info.coords&&e.pod_info.coords.lat?e.pod_info.coords.lat:null,pod_lng:e.pod_info&&e.pod_info.coords&&e.pod_info.coords.lng?e.pod_info.coords.lng:null,pod_name:e.pod_name,type:"VIETNAM"==e.load_country_name?"import":"export",name:e.pol_name+" - "+e.pod_name};n.includes(r.name)||(t.portPair.push(r),n.push(r.name)),e.profit={revenue:0,cost:0};var a=new Date(e.depart_time).getMonth().toString();parseInt(a)<10&&(a="0"+a);var c=new Date(e.depart_time).getFullYear();t.totalMonth[c+"-"+a]||(t.totalMonth[c+"-"+a]=function(e,t){return{month:parseInt(e)+1,year:t,teu:0,count_shipment:0,revenueComplete:0,costComplete:0,load_teu:0,count_load_shipment:0,revenue:0,cost:0,revenuePaydate:0,revenueBank:0,costPaydate:0,costBank:0}}(a,c),t.arrMonth.push({name:c+"-"+a,year:c,month:a})),t.arrYear.includes(c)||t.arrYear.push(c),t.totalMonth[c+"-"+a].count_shipment++,t.total.shipment++,"Yes"==e.cont_move&&(t.totalMonth[c+"-"+a].count_load_shipment++,t.total.load_shipment++);var s=!0;e.revenue.map((function(n){e.profit.revenue+=n.total_vnd,t.totalMonth[c+"-"+a].revenue+=n.total_vnd,t.total.revenue+=n.total_vnd,n.pay_date?(t.totalMonth[c+"-"+a].revenuePaydate+=n.total_vnd,t.total.revenuePaydate+=n.total_vnd,e.profit.revenuePaydate+=n.total_vnd):s=!1})),s&&(t.totalMonth[c+"-"+a].revenueComplete++,t.total.revenueComplete++);var b=!0;e.cost.map((function(n){e.profit.cost+=n.total_vnd,t.totalMonth[c+"-"+a].cost+=n.total_vnd,t.total.cost+=n.total_vnd,n.pay_date?(t.totalMonth[c+"-"+a].costPaydate+=n.total_vnd,t.total.costPaydate+=n.total_vnd,e.profit.costPaydate+=n.total_vnd):b=!1})),b&&(t.totalMonth[c+"-"+a].costComplete++,t.total.costComplete++),i.includes(e.voyage)||(i.push(e.voyage),o[e.voyage]={id:e.voyage,vessel_full_name:e.vessel_full_name,pol:e.pol,pol_name:e.pol_name,pod:e.pod,pod_name:e.pod_name,depart_time:e.depart_time,arrive_time:e.arrive_time,shipment:[],objShipment:{},row:0}),o[e.voyage].shipment.includes(e.id)||(o[e.voyage].shipment.push(e.id),o[e.voyage].objShipment[e.id]={id:e.id,code:e.code,bill:e.bill,customer:e.customer,principal:e.principal,status:e.status,owner:e.owner,container:[],objContainer:{}},o[e.voyage].row++),e.move.length>0?e.move.map((function(t){o[e.voyage].objShipment[e.id].container.push(t.last_move.container),o[e.voyage].objShipment[e.id].objContainer[t.last_move.container]=t.last_move})):(o[e.voyage].objShipment[e.id].container.push("no-contaienr"),o[e.voyage].objShipment[e.id].objContainer["no-contaienr"]={id:null,cont_number:null,cont_type_code:null})})),this.arrMonth.sort((function(e,t){var n=e.year,i=t.year,o=e.month,r=t.month;return n>i?-1:n<i?1:o>r?-1:o<r?1:void 0})),this.onShipmentChanged.next({shipment:e,total:this.total}),this.onOverviewChanged.next([i,o])}},{key:"buildBookOverview",value:function(){var e=this,t=(new Date).getTime()-432e5,n=[],i=[],o={},r={book:0,teu:0,revenue:0,cost:0},a=this.book.slice(),c=JSON.parse(JSON.stringify(this.currenSearch.formSearch));if(c.customer&&(a=a.filter((function(e){return e.book.customer.id==c.customer}))),c.principal&&(a=a.filter((function(e){return e.book.principal.id==c.principal}))),c.agent&&(a=a.filter((function(e){return e.book.agent.id==c.agent}))),c.owner&&(a=a.filter((function(e){return e.user==c.owner}))),c.pol&&(a=a.filter((function(e){return e.voyage.load_port==c.pol}))),c.pod&&(a=a.filter((function(e){return e.voyage.discharge_port==c.pod}))),c.date_from){var s=c.date_from.split("-");s[1]=parseInt(s[1])-1;var b=new Date(s[0],s[1],s[2]).getTime();a=a.filter((function(e){return e.voyage.depart_time>=b}))}if(c.date_to){var l=c.date_to.split("-");l[1]=parseInt(l[1])-1;var p=new Date(l[0],l[1],l[2]).getTime();a=a.filter((function(e){return e.voyage.depart_time<=p}))}this.filterBook=a;var u=[],d=[];this.priceObj={},this.filterBook.map((function(a){if(e.priceObj[a.id]={},t<a.voyage.depart_time){var c=e.getWeek(new Date(a.voyage.depart_time)),s=new Date(a.voyage.depart_time).getFullYear(),b=s.toString()+"-"+(c<10?"0":"")+c.toString();n.includes(b)||(n.push(b),o[b]={week:b,year:s,teu:0,revenue:0,cost:0,count_book:0,data:[],type:!0}),a.book.volume.map((function(e){i.includes(e.cont_type.code)||i.push(e.cont_type.code),o[b][e.cont_type.code]||(o[b][e.cont_type.code]=0),o[b][e.cont_type.code]+=e.quantity,o[b].teu+=e.quantity*(e.cont_type.code.includes("20")?1:2),a[e.cont_type.code]||(a[e.cont_type.code]=0),a[e.cont_type.code]+=e.quantity,r[e.cont_type.code]||(r[e.cont_type.code]=0),r[e.cont_type.code]+=e.quantity,r.teu+=e.quantity*(e.cont_type.code.includes("20")?1:2)})),a.revenue.sell.map((function(e){var t=5.26==e.tax?.05/.95*100:e.tax/100;o[b].revenue+=e.volume*e.amount*e.ex_rate+e.volume*e.amount*t*e.ex_rate,r.revenue+=e.volume*e.amount*e.ex_rate+e.volume*e.amount*t*e.ex_rate})),o[b].count_book++,r.book++,a.type=!0,o[b].data.push(a)}else a.type=!1;e.priceObj[a.id].revenueVNPrice||(e.priceObj[a.id].revenueVNPrice={}),e.priceObj[a.id].revenueNNPrice||(e.priceObj[a.id].revenueNNPrice={}),a.revenue.sell.map((function(t){u.includes(t.price.code+t.currency.code+t.payment_center.name)||(u.push(t.price.code+t.currency.code+t.payment_center.name),d.push({id:t.price.id,code:t.price.code,name:t.price.name,unit_code:t.price.unit_code,currency:t.currency.code,payment_center:t.payment_center.name})),"VIETNAM"==t.payment_center.name?e.priceObj[a.id].revenueVNPrice[t.price.code+t.currency.code+t.payment_center.name]=t.amount:e.priceObj[a.id].revenueNNPrice[t.price.code+t.currency.code+t.payment_center.name]=t.amount}))})),this.buildPrice(d),n.reverse(),i.sort(),this.onBookOverviewChanged.next([o,n,i,r])}},{key:"buildPrice",value:function(e){var t=e.filter((function(e){return"VIETNAM"==e.payment_center})),n=e.filter((function(e){return"VIETNAM"!=e.payment_center})),i=["OF","EBS","EFF","RR","BILL","LTHC","SEAL","DO","DTHC","DCIC","VS","AMS","ENS"];t.sort((function(e,t){var n=e.unit_code,i=t.unit_code,o=e.currency,r=t.currency,a=e.code,c=t.code;return n>i?1:n<i?-1:o>r?1:o<r?-1:a>c?1:a<c?-1:0}));var o,r,a=t.filter((function(e){return e.unit_code.includes("20")})),c=t.filter((function(e){return e.unit_code.includes("40")})),s=t.filter((function(e){return!e.unit_code.includes("20")&&!e.unit_code.includes("40")})),b=[],l=[],p=[],u=[],d=[],h=[];i.map((function(e,t){u[t]=a.filter((function(t){return t.code.includes(e)})),u[t].length>0&&u[t].map((function(e){(r=a.indexOf(e))>=0&&(o=a.splice(r,1),b.push(o[0]))})),d[t]=c.filter((function(t){return t.code.includes(e)})),d[t].length>0&&d[t].map((function(e){(r=c.indexOf(e))>=0&&(o=c.splice(r,1),l.push(o[0]))})),h[t]=s.filter((function(t){return t.code.includes(e)})),h[t].length>0&&h[t].map((function(e){(r=s.indexOf(e))>=0&&(o=s.splice(r,1),p.push(o[0]))}))})),n.sort((function(e,t){var n=e.unit_code,i=t.unit_code,o=e.currency,r=t.currency,a=e.code,c=t.code;return n>i?1:n<i?-1:o>r?1:o<r?-1:a>c?1:a<c?-1:0}));var v,f,m=n.filter((function(e){return e.unit_code.includes("20")})),g=n.filter((function(e){return e.unit_code.includes("40")})),w=n.filter((function(e){return!e.unit_code.includes("20")&&!e.unit_code.includes("40")})),y=[],k=[],x=[],W=[],D=[],_=[];i.map((function(e,t){W[t]=m.filter((function(t){return t.code.includes(e)})),W[t].length>0&&W[t].map((function(e){(f=m.indexOf(e))>=0&&(v=m.splice(f,1),y.push(v[0]))})),D[t]=g.filter((function(t){return t.code.includes(e)})),D[t].length>0&&D[t].map((function(e){(f=g.indexOf(e))>=0&&(v=g.splice(f,1),k.push(v[0]))})),_[t]=w.filter((function(t){return t.code.includes(e)})),_[t].length>0&&_[t].map((function(e){(f=w.indexOf(e))>=0&&(v=w.splice(f,1),x.push(v[0]))}))})),this.priceHeader=[].concat(b,_toConsumableArray(a),l,_toConsumableArray(c),p,_toConsumableArray(s),y,_toConsumableArray(m),k,_toConsumableArray(g),x,_toConsumableArray(w))}},{key:"getWeek",value:function(e){e.getDay();var t=e.valueOf();e.setMonth(0,1);var n=2;return 1!=e.getDay()&&(n=1,e.setMonth(0,1+(1-e.getDay()+7)%7)),n+=1+Math.floor((t-e)/6048e5)}}]),e}()).\u0275fac=function(e){return new(e||Le)(P.bc(Fe.a),P.bc(B.a),P.bc(I.f))},Le.\u0275prov=P.Nb({token:Le,factory:Le.\u0275fac}),Le),Je=n("lJxs"),Ae=n("I/3d"),Re=((Me=function(){function e(t,n,i){_classCallCheck(this,e),this.router=t,this.db=n,this.authService=i,this.codeCompany=["DCL","SEG","SEL","SIN","SLO","TWN","REF: "],this.onPermissionChanged=new Pe.a([]),this.onSelDocumentChanged=new Pe.a([]),this.onDataChanged=new Pe.a([]),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"writeDatabaseBooking",value:function(e,t){this.bookingCollection=this.db.collection("pln-booking-draft"),this.bookingCollection.doc(e).set(t)}},{key:"readDatabaseBooking",value:function(){return this.bookingCollection=this.db.collection("pln-booking-draft"),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(Je.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.booking}},{key:"readDatabaseBookingByUser",value:function(e){return this.bookingCollection=this.db.collection("pln-booking-draft",(function(t){return t.where("user","==",e)})),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(Je.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.booking}},{key:"getDatabaseBookingById",value:function(e){return this.bookingCollection=this.db.collection("pln-booking-draft"),this.bookingCollection.doc(e).valueChanges()}},{key:"updateDatabaseBookingById",value:function(e,t){this.bookingCollection=this.db.collection("pln-booking-draft"),this.bookingCollection.doc(e).set(t)}},{key:"deleteDatabaseBookingById",value:function(e){this.bookingDoc=this.db.doc("pln-booking-draft/"+e),this.bookingDoc.delete()}}]),e}()).\u0275fac=function(e){return new(e||Me)(P.bc(i.g),P.bc(Ae.a),P.bc(B.a))},Me.\u0275prov=P.Nb({token:Me,factory:Me.\u0275fac}),Me),Be=n("B9zo"),$e=n("EwFO"),Ne=n("0JVi"),ze=n("znSr"),He=n("rPBI");function Ee(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",12),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.changeScreen(!0)})),P.Xb(1,"mat-icon"),P.Lc(2,"flip_to_front"),P.Wb(),P.Wb()}}function Ue(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",12),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.changeScreen(!1)})),P.Xb(1,"mat-icon"),P.Lc(2,"flip_to_back"),P.Wb(),P.Wb()}}var Ye,qe=((Ye=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=n,this.fullScreen=!1,this.toggleSidebar=new P.o,this.showHideBar=new P.o,this.refreshPage=new P.o,this.searchFilter=new P.o,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||Ye)(P.Rb(B.a),P.Rb(Ne.b))},Ye.\u0275cmp=P.Lb({type:Ye,selectors:[["overview-header"]],inputs:{sidebarName:"sidebarName",searchText:"searchText"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:41,vars:7,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],[3,"searchText","inputValue"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(P.Xb(0,"mat-toolbar",0),P.Xb(1,"div",1),P.Xb(2,"div",2),P.Xb(3,"div",3),P.Xb(4,"button",4),P.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),P.Xb(5,"mat-icon"),P.Lc(6,"menu"),P.Wb(),P.Wb(),P.Xb(7,"button",5),P.fc("click",(function(e){return t.showHideBar.emit()})),P.Xb(8,"mat-icon"),P.Lc(9,"menu"),P.Wb(),P.Wb(),P.Wb(),P.Xb(10,"button",6),P.Xb(11,"span",7),P.Lc(12,"Overview"),P.Wb(),P.Xb(13,"mat-icon",8),P.Lc(14,"equalizer"),P.Wb(),P.Wb(),P.Xb(15,"button",6),P.Xb(16,"span",7),P.Lc(17,"Stock"),P.Wb(),P.Xb(18,"mat-icon",8),P.Lc(19,"equalizer"),P.Wb(),P.Wb(),P.Xb(20,"button",6),P.Xb(21,"span",7),P.Lc(22,"Shipment"),P.Wb(),P.Xb(23,"mat-icon",8),P.Lc(24,"equalizer"),P.Wb(),P.Wb(),P.Xb(25,"button",6),P.Xb(26,"span",7),P.Lc(27,"Vessel"),P.Wb(),P.Xb(28,"mat-icon",8),P.Lc(29,"equalizer"),P.Wb(),P.Wb(),P.Wb(),P.Xb(30,"div",9),P.Sb(31,"div",10),P.Xb(32,"filter-search-bar",11),P.fc("inputValue",(function(e){return t.searchFilter.emit(e)})),P.Wb(),P.Sb(33,"div",10),P.Xb(34,"button",12),P.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),P.Xb(35,"mat-icon",13),P.Lc(36,"refresh"),P.Wb(),P.Wb(),P.Sb(37,"div",10),P.Jc(38,Ee,3,0,"button",14),P.Jc(39,Ue,3,0,"button",14),P.Sb(40,"div",10),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(10),P.pc("routerLink","/apps/pacific-logistics-network/overview/overview"),P.Db(5),P.pc("routerLink","/apps/pacific-logistics-network/overview/stock"),P.Db(5),P.pc("routerLink","/apps/pacific-logistics-network/overview/shipment"),P.Db(5),P.pc("routerLink","/apps/pacific-logistics-network/overview/vessel"),P.Db(7),P.pc("searchText",t.searchText),P.Db(6),P.pc("ngIf",!t.fullScreen),P.Db(1),P.pc("ngIf",t.fullScreen))},directives:[m.a,N.b,N.e,N.d,N.c,c.b,ze.b,l.a,i.i,i.h,He.a,I.t],styles:["overview-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}overview-header.below{z-index:2}overview-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}overview-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}overview-header .logo .logo-icon{width:38px}overview-header .chat-panel-toggle-button,overview-header .language-button,overview-header .quick-panel-toggle-button,overview-header .user-button,overview-header fuse-search-bar{min-width:68px;height:64px}@media screen and (max-width:599px){overview-header .chat-panel-toggle-button,overview-header .language-button,overview-header .quick-panel-toggle-button,overview-header .user-button,overview-header fuse-search-bar{height:56px}}overview-header .navbar-toggle-button{min-width:56px;height:56px}overview-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){overview-header .toolbar-separator{height:56px}}@media print{overview-header{display:none}}"],encapsulation:2}),Ye);function Ge(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Xb(7,"td"),P.Lc(8),P.Wb(),P.Xb(9,"td"),P.Lc(10),P.Wb(),P.Xb(11,"td"),P.Lc(12),P.kc(13,"date"),P.Wb(),P.Wb()),2&e){var n=t.$implicit,i=t.index;P.Db(2),P.Mc(i+1),P.Db(2),P.Mc(n.place_name),P.Db(2),P.Mc(n.container_info.cont_number),P.Db(2),P.Mc(n.container_info.principal_name),P.Db(2),P.Mc(n.move_code),P.Db(2),P.Mc(P.mc(13,6,n.date,"MM/dd/yyyy HH:mm"))}}var Ke,Qe=((Ke=function(){function e(t,n){_classCallCheck(this,e),this.matDialogRef=t,this._data=n,this.data=n.data}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ke)(P.Rb(f.f),P.Rb(f.a))},Ke.\u0275cmp=P.Lb({type:Ke,selectors:[["overview-stock-modal-dialog"]],decls:27,vars:1,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","",1,"p-0","m-0",2,"overflow","auto"],[1,"viewer-panel"],[1,"dashboard-table","simple"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"mat-toolbar",1),P.Xb(2,"mat-toolbar-row",2),P.Xb(3,"span",3),P.Lc(4,"Container List"),P.Wb(),P.Xb(5,"button",4),P.fc("click",(function(e){return t.matDialogRef.close()})),P.Xb(6,"mat-icon"),P.Lc(7,"close"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(8,"div",5),P.Xb(9,"div",6),P.Xb(10,"table",7),P.Xb(11,"thead"),P.Xb(12,"tr"),P.Xb(13,"th"),P.Lc(14,"No"),P.Wb(),P.Xb(15,"th"),P.Lc(16,"Place"),P.Wb(),P.Xb(17,"th"),P.Lc(18,"Container"),P.Wb(),P.Xb(19,"th"),P.Lc(20,"Principal"),P.Wb(),P.Xb(21,"th"),P.Lc(22,"Move"),P.Wb(),P.Xb(23,"th"),P.Lc(24,"Date"),P.Wb(),P.Wb(),P.Wb(),P.Xb(25,"tbody"),P.Jc(26,Ge,14,9,"tr",8),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(26),P.pc("ngForOf",t.data))},directives:[m.a,m.c,N.b,N.d,N.c,c.b,l.a,f.d,I.s],pipes:[I.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.overview-stock-modal-dialog{width:100%}}@media screen and (min-width:960px){.overview-stock-modal-dialog{width:1080px}}.overview-stock-modal-dialog .mat-dialog-container{padding:0}.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel{height:100%}.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table{overflow:auto}.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table td,.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table th{padding:8px;font-size:12px!important;white-space:nowrap}.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table .row-router{background-color:#e0e0e0}.overview-stock-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table .sticky-right-col{min-width:100px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.overview-stock-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.overview-stock-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}.overview-stock-modal-dialog .header-less-tabs.mat-tab-group .mat-tab-header{display:none}"],encapsulation:2}),Ke);function Ze(e,t){if(1&e){var n=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td",10),P.Lc(2),P.Wb(),P.Xb(3,"td",7),P.Lc(4),P.Wb(),P.Xb(5,"td",7),P.Lc(6),P.Wb(),P.Xb(7,"td",7),P.Lc(8),P.Wb(),P.Xb(9,"td",7),P.Xb(10,"a",11),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit,i=P.jc().$implicit;return P.jc(3).openModal(i[t])})),P.Lc(11),P.Wb(),P.Wb(),P.Wb()}if(2&e){var i=P.jc().$implicit,o=P.jc().$implicit;P.Db(1),P.pc("matTooltip",o.place_name)("matTooltipPosition","left"),P.Db(1),P.Mc(o.place_short_name),P.Db(2),P.Mc(o.pol_name),P.Db(2),P.Mc(o.pod_name),P.Db(2),P.Mc(i),P.Db(3),P.Mc(0==o[i].length?"":o[i].length)}}function et(e,t){if(1&e&&(P.Vb(0),P.Jc(1,Ze,12,7,"tr",8),P.Ub()),2&e){var n=t.$implicit,i=P.jc().$implicit;P.Db(1),P.pc("ngIf",i[n])}}function tt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,et,2,1,"ng-container",9),P.Ub()),2&e){var n=P.jc(3);P.Db(1),P.pc("ngForOf",n.headerType)}}function nt(e,t){if(1&e&&(P.Xb(0,"tbody"),P.Jc(1,tt,2,1,"ng-container",9),P.Wb()),2&e){var n=P.jc(2);P.Db(1),P.pc("ngForOf",n.data)}}function it(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"div",3),P.Xb(2,"h2"),P.Xb(3,"span",4),P.Lc(4),P.Wb(),P.Wb(),P.Xb(5,"div",5),P.Xb(6,"table",6),P.Xb(7,"thead"),P.Xb(8,"tr"),P.Xb(9,"th"),P.Lc(10,"Place"),P.Wb(),P.Xb(11,"th",7),P.Lc(12,"Pol"),P.Wb(),P.Xb(13,"th",7),P.Lc(14,"Pod"),P.Wb(),P.Xb(15,"th",7),P.Lc(16,"Type"),P.Wb(),P.Xb(17,"th",7),P.Lc(18,"LOAD"),P.Wb(),P.Wb(),P.Wb(),P.Jc(19,nt,2,1,"tbody",8),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=P.jc();P.Db(4),P.Mc(n.label),P.Db(15),P.pc("ngIf",n.data.length>0)}}function ot(e,t){if(1&e&&(P.Xb(0,"th",17),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit;P.pc("matTooltip",n.place_name),P.Db(1),P.Mc(n.place_short_name)}}function rt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ot,2,2,"th",16),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngIf",2==n.country)}}function at(e,t){if(1&e){var n=P.Yb();P.Xb(0,"td"),P.Xb(1,"a",11),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit,i=P.jc(2).$implicit;return P.jc(3).openModal(t[i])})),P.Lc(2),P.Wb(),P.Wb()}if(2&e){var i=P.jc().$implicit,o=P.jc(2).$implicit;P.Db(2),P.Mc(null==i[o]?null:i[o].length)}}function ct(e,t){if(1&e&&(P.Vb(0),P.Jc(1,at,3,1,"td",8),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngIf",2==n.country)}}function st(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td",18),P.Lc(2),P.Wb(),P.Xb(3,"td",19),P.Lc(4),P.Wb(),P.Jc(5,ct,2,1,"ng-container",9),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc(3);P.Db(2),P.Mc(n),P.Db(2),P.Mc(i.total[n+"VN"]),P.Db(1),P.pc("ngForOf",i.data)}}function bt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,st,6,3,"tr",8),P.Ub()),2&e){var n=t.$implicit,i=P.jc(3);P.Db(1),P.pc("ngIf",i.total[n])}}function lt(e,t){if(1&e&&(P.Xb(0,"table",13),P.Xb(1,"thead"),P.Xb(2,"tr"),P.Xb(3,"th",14),P.Lc(4,"Type"),P.Wb(),P.Xb(5,"th",15),P.Lc(6,"Total"),P.Wb(),P.Jc(7,rt,2,1,"ng-container",9),P.Wb(),P.Wb(),P.Xb(8,"tbody"),P.Jc(9,bt,2,1,"ng-container",9),P.Wb(),P.Wb()),2&e){var n=P.jc(2);P.Db(7),P.pc("ngForOf",n.data),P.Db(2),P.pc("ngForOf",n.headerType)}}function pt(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"div",3),P.Xb(2,"h2"),P.Xb(3,"span",4),P.Lc(4),P.Wb(),P.Wb(),P.Xb(5,"div",5),P.Jc(6,lt,10,2,"table",12),P.Wb(),P.Wb(),P.Ub()),2&e){var n=P.jc();P.Db(4),P.Mc(n.label),P.Db(2),P.pc("ngIf",n.data.length>0)}}function ut(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"th",17),P.Lc(2),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("matTooltip",n.place_name),P.Db(1),P.Mc(n.place_short_name)}}function dt(e,t){if(1&e){var n=P.Yb();P.Vb(0),P.Xb(1,"td"),P.Xb(2,"a",11),P.fc("click",(function(e){P.Bc(n);var i=t.$implicit,o=P.jc(2).$implicit;return P.jc(3).openModal(i[o])})),P.Lc(3),P.Wb(),P.Wb(),P.Ub()}if(2&e){var i=t.$implicit,o=P.jc(2).$implicit;P.Db(3),P.Mc(null==i[o]?null:i[o].length)}}function ht(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td",18),P.Lc(2),P.Wb(),P.Xb(3,"td",19),P.Lc(4),P.Wb(),P.Jc(5,dt,4,1,"ng-container",9),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc(3);P.Db(2),P.Mc(n),P.Db(2),P.Mc(i.total[n]),P.Db(1),P.pc("ngForOf",i.data)}}function vt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ht,6,3,"tr",8),P.Ub()),2&e){var n=t.$implicit,i=P.jc(3);P.Db(1),P.pc("ngIf",i.total[n])}}function ft(e,t){if(1&e&&(P.Xb(0,"table",13),P.Xb(1,"thead"),P.Xb(2,"tr"),P.Xb(3,"th",14),P.Lc(4,"Type"),P.Wb(),P.Xb(5,"th",15),P.Lc(6,"Total"),P.Wb(),P.Jc(7,ut,3,2,"ng-container",9),P.Wb(),P.Wb(),P.Xb(8,"tbody"),P.Jc(9,vt,2,1,"ng-container",9),P.Wb(),P.Wb()),2&e){var n=P.jc(2);P.Db(7),P.pc("ngForOf",n.data),P.Db(2),P.pc("ngForOf",n.headerType)}}function mt(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"div",3),P.Xb(2,"h2"),P.Xb(3,"span",4),P.Lc(4),P.Wb(),P.Wb(),P.Xb(5,"div",5),P.Jc(6,ft,10,2,"table",12),P.Wb(),P.Wb(),P.Ub()),2&e){var n=P.jc();P.Db(4),P.Mc(n.label),P.Db(2),P.pc("ngIf",n.data.length>0)}}var gt,wt=((gt=function(){function e(t){_classCallCheck(this,e),this._matDialog=t,this.dataFulim={},this.arrRoute=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getData()}},{key:"ngOnChanges",value:function(e){e.data&&(e.data.currentValue||null==e.data.currentValue)&&this.getData()}},{key:"getData",value:function(){var e=this;this.total={},this.data?(this.dataFulim={},this.arrRoute=[],this.data.map((function(t){e.headerType.map((function(n){if(e.total[n]||(e.total[n]=0),e.total[n+"VN"]||(e.total[n+"VN"]=0),t[n]&&(e.total[n]+=t[n].length),t[n]&&2==t.country&&(e.total[n+"VN"]+=t[n].length),"FULIM"==e.label){var i=t.pol_name+"-"+t.pod_name;e.arrRoute.includes(i)||e.arrRoute.push(i),e.dataFulim[n]||(e.dataFulim[n]={}),e.dataFulim[n][i]||(e.dataFulim[n][i]={cont:[]}),e.dataFulim[n][i].pol_name=t.pol_name,e.dataFulim[n][i].pod_name=t.pod_name,t[n]&&t[n].map((function(t){e.dataFulim[n][i].cont.push(t)}))}}))}))):this.data=[]}},{key:"openModal",value:function(e){this.dialogRef=this._matDialog.open(Qe,{panelClass:"overview-stock-modal-dialog",data:{data:e,label:this.label}})}}]),e}()).\u0275fac=function(e){return new(e||gt)(P.Rb(f.b))},gt.\u0275cmp=P.Lb({type:gt,selectors:[["overview-stock-movement"]],inputs:{label:"label",headerType:"headerType",data:"data",type:"type"},features:[P.Bb()],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"group","mb-12","mt-12"],[1,"text-bold"],[2,"overflow","auto"],[1,"simple","report-table"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"matTooltip","matTooltipPosition"],[1,"cursor-pointer",3,"click"],["class","simple report-table mr-8",4,"ngIf"],[1,"simple","report-table","mr-8"],[1,"sticky-col1","w-40"],[1,"w-40"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"sticky-col1"],[1,"sticky-col1","text-bold"]],template:function(e,t){1&e&&(P.Vb(0,0),P.Jc(1,it,20,2,"ng-container",1),P.Jc(2,pt,7,2,"ng-container",1),P.Jc(3,mt,7,2,"ng-container",2),P.Ub()),2&e&&(P.pc("ngSwitch",!0),P.Db(1),P.pc("ngSwitchCase","INBOUND ONBOARD"==t.label),P.Db(1),P.pc("ngSwitchCase",t.type))},directives:[I.x,I.y,I.z,I.t,I.s,p.a],styles:["overview-stock-movement .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}overview-stock-movement .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}overview-stock-movement .group .report-table{font-size:12px}overview-stock-movement .group .report-table td,overview-stock-movement .group .report-table th{white-space:nowrap}@media screen and (max-width:599px){overview-stock-movement .group .report-table td,overview-stock-movement .group .report-table th{padding:8px 4px!important}}@media screen and (min-width:600px){overview-stock-movement .group .report-table td,overview-stock-movement .group .report-table th{padding:8px!important}}"],encapsulation:2}),gt),yt=function(e){return{"text-bold":e}};function kt(e,t){if(1&e&&(P.Xb(0,"th",19),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("ngClass",P.rc(2,yt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(n)}}function xt(e,t){if(1&e&&(P.Xb(0,"td",22),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,i=P.jc().$implicit,o=P.jc(2);P.pc("ngClass",P.rc(2,yt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(o.bookData[i][n])}}function Wt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td"),P.Xb(2,"span",20),P.fc("click",(function(e){P.Bc(n);var i=t.$implicit,o=P.jc(2);return o.openModal.emit(o.bookData[i].data)})),P.Lc(3),P.Wb(),P.Wb(),P.Xb(4,"td",15),P.Lc(5),P.Wb(),P.Jc(6,xt,2,4,"td",21),P.Xb(7,"td",16),P.Lc(8),P.Wb(),P.Xb(9,"td",17),P.Lc(10),P.kc(11,"number"),P.Wb(),P.Xb(12,"td",17),P.Lc(13),P.kc(14,"number"),P.Wb(),P.Xb(15,"td",18),P.Lc(16),P.kc(17,"number"),P.Wb(),P.Wb()}if(2&e){var i=t.$implicit,o=P.jc(2);P.Db(3),P.Mc(i),P.Db(2),P.Mc(o.bookData[i].count_book),P.Db(1),P.pc("ngForOf",o.bookType),P.Db(2),P.Mc(o.bookData[i].teu),P.Db(2),P.Mc(P.mc(11,7,o.bookData[i].revenue,"1.0-0")),P.Db(3),P.Mc(P.mc(14,10,o.bookData[i].cost,"1.0-0")),P.Db(3),P.Mc(P.mc(17,13,o.bookData[i].revenue-o.bookData[i].cost,"1.0-0"))}}function Dt(e,t){if(1&e&&(P.Xb(0,"td",22),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc(2);P.pc("ngClass",P.rc(2,yt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(i.bookTotal[n])}}function _t(e,t){if(1&e&&(P.Xb(0,"mat-icon",25),P.Lc(1,"error"),P.Wb()),2&e){var n=P.jc(2).$implicit;P.pc("matTooltip",n+" r\xf4\u0303ng kh\xf4ng \u0111u\u0309 d\xea\u0309 c\xe2\u0301p")}}var Xt=function(e,t){return{"text-bold":e,"red-700-fg text-bold":t}};function St(e,t){if(1&e&&(P.Xb(0,"td",22),P.Jc(1,_t,2,1,"mat-icon",24),P.Lc(2),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc(2);P.pc("ngClass",P.sc(3,Xt,"20DC"==n||"40HC"==n,i.bookTotal[n]>i.total[n])),P.Db(1),P.pc("ngIf",i.bookTotal[n]>i.total[n]),P.Db(1),P.Nc(" ",i.bookTotal[n]," ")}}function Ot(e,t){if(1&e&&(P.Vb(0),P.Jc(1,Dt,2,4,"td",23),P.Jc(2,St,3,6,"td",23),P.Ub()),2&e){var n=P.jc(2);P.Db(1),P.pc("ngIf","workflow"==n.modul),P.Db(1),P.pc("ngIf","workflow"!=n.modul)}}function Ct(e,t){if(1&e&&(P.Xb(0,"table",3),P.Xb(1,"thead"),P.Xb(2,"tr"),P.Xb(3,"th",4),P.Lc(4,"Week"),P.Wb(),P.Xb(5,"th",5),P.Lc(6,"Book"),P.Wb(),P.Xb(7,"th",6),P.Lc(8,"Container"),P.Wb(),P.Xb(9,"th",5),P.Lc(10,"Teu"),P.Wb(),P.Xb(11,"th",7),P.Lc(12,"Revenue"),P.Wb(),P.Xb(13,"th",7),P.Lc(14,"Cost"),P.Wb(),P.Xb(15,"th",8),P.Lc(16,"Net Revenue"),P.Wb(),P.Wb(),P.Xb(17,"tr"),P.Sb(18,"th",9),P.Sb(19,"th",9),P.Jc(20,kt,2,4,"th",10),P.Sb(21,"th",11),P.Sb(22,"th",12),P.Sb(23,"th",12),P.Sb(24,"th",13),P.Wb(),P.Wb(),P.Xb(25,"tbody"),P.Jc(26,Wt,18,16,"tr",14),P.Wb(),P.Xb(27,"tfoot"),P.Xb(28,"tr"),P.Xb(29,"td"),P.Lc(30,"Total"),P.Wb(),P.Xb(31,"td",15),P.Lc(32),P.Wb(),P.Jc(33,Ot,3,2,"ng-container",14),P.Xb(34,"td",16),P.Lc(35),P.Wb(),P.Xb(36,"td",17),P.Lc(37),P.kc(38,"number"),P.Wb(),P.Xb(39,"td",17),P.Lc(40),P.kc(41,"number"),P.Wb(),P.Xb(42,"td",18),P.Lc(43),P.kc(44,"number"),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e){var n=P.jc();P.Db(7),P.Eb("colspan",n.bookType.length),P.Db(13),P.pc("ngForOf",n.bookType),P.Db(6),P.pc("ngForOf",n.bookWeek),P.Db(6),P.Mc(n.bookTotal.book),P.Db(1),P.pc("ngForOf",n.bookType),P.Db(2),P.Mc(n.bookTotal.teu),P.Db(2),P.Mc(P.mc(38,9,n.bookTotal.revenue,"1.0-0")),P.Db(3),P.Mc(P.mc(41,12,n.bookTotal.cost,"1.0-0")),P.Db(3),P.Mc(P.mc(44,15,n.bookTotal.revenue-n.bookTotal.cost,"1.0-0"))}}var Lt,Mt=((Lt=function(){function e(){_classCallCheck(this,e),this.openModal=new P.o,this.total={}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t=this;e.bookWeek&&e.bookWeek.currentValue&&(this.bookWeek=e.bookWeek.currentValue,this.bookWeek&&(this.total={},this.empty&&this.empty.map((function(e){t.bookType.map((function(n){t.total[n]||(t.total[n]=0),e[n]&&(t.total[n]+=e[n].length)}))}))))}}]),e}()).\u0275fac=function(e){return new(e||Lt)},Lt.\u0275cmp=P.Lb({type:Lt,selectors:[["overview-view-book"]],inputs:{bookWeek:"bookWeek",bookType:"bookType",bookData:"bookData",bookTotal:"bookTotal",empty:"empty",modul:"modul"},outputs:{openModal:"openModal"},features:[P.Bb()],decls:6,vars:1,consts:[[1,"group","mb-12","mt-12"],[1,"viewer-content"],["class","simple total-table mr-8",4,"ngIf"],[1,"simple","total-table","mr-8"],[1,"sticky-header-1"],[1,"sticky-header-1","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-1","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-1","text-right"],[1,"sticky-header-1","text-right"],[1,"sticky-header-2"],["class","sticky-header-2 text-right","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],[1,"sticky-header-2","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right"],[1,"sticky-header-2","text-right"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"text-center","text-bold"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8"],[1,"text-right","mr-8"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right",3,"ngClass"],[1,"accent","p-4","cursor-pointer",3,"click"],["class","text-right mr-8","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8",3,"ngClass"],["class","text-right mr-8","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngIf"],["class","cursor-pointer","color","warn",3,"matTooltip",4,"ngIf"],["color","warn",1,"cursor-pointer",3,"matTooltip"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"h2"),P.Xb(2,"span"),P.Lc(3,"Booking"),P.Wb(),P.Wb(),P.Xb(4,"div",1),P.Jc(5,Ct,45,18,"table",2),P.Wb(),P.Wb()),2&e&&(P.Db(5),P.pc("ngIf",t.bookWeek))},directives:[I.t,ze.b,I.s,I.q,ze.a,l.a,p.a],pipes:[I.g],styles:["overview-view-book .group{margin-left:0;margin-right:4px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000;z-index:100}overview-view-book .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa}overview-view-book .group .viewer-content{overflow:auto;width:100%}overview-view-book .group .viewer-content .total-table{font-size:12px}overview-view-book .group .viewer-content .total-table .border-right{border-right:1px solid rgba(0,0,0,.12)}overview-view-book .group .viewer-content .total-table td,overview-view-book .group .viewer-content .total-table th{padding:8px!important;white-space:nowrap}overview-view-book .group .viewer-content .total-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}overview-view-book .group .viewer-content .total-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}overview-view-book .group .viewer-content .total-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}overview-view-book .group .viewer-content .total-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}overview-view-book .group .viewer-content .total-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}overview-view-book .group .viewer-content .total-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}overview-view-book .group .viewer-content .total-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2}),Lt);function Tt(e,t){1&e&&(P.Xb(0,"mat-icon",27),P.Lc(1,"add"),P.Wb())}function jt(e,t){1&e&&(P.Xb(0,"mat-icon",28),P.Lc(1,"removed"),P.Wb())}function Pt(e,t){1&e&&(P.Xb(0,"th",29),P.Lc(1,"SPT complete"),P.Wb())}function It(e,t){1&e&&(P.Xb(0,"th",30),P.Lc(1,"Complete %"),P.Wb())}function Ft(e,t){1&e&&(P.Xb(0,"th",29),P.Lc(1,"Pay Date"),P.Wb())}function Vt(e,t){1&e&&(P.Xb(0,"th",30),P.Lc(1,"Pay Date %"),P.Wb())}function Jt(e,t){1&e&&(P.Xb(0,"mat-icon",27),P.Lc(1,"add"),P.Wb())}function At(e,t){1&e&&(P.Xb(0,"mat-icon",28),P.Lc(1,"removed"),P.Wb())}function Rt(e,t){1&e&&(P.Xb(0,"th",29),P.Lc(1,"SPT complete"),P.Wb())}function Bt(e,t){1&e&&(P.Xb(0,"th",30),P.Lc(1,"Complete %"),P.Wb())}function $t(e,t){1&e&&(P.Xb(0,"th",29),P.Lc(1,"Pay Date"),P.Wb())}function Nt(e,t){1&e&&(P.Xb(0,"th",30),P.Lc(1,"Pay Date %"),P.Wb())}var zt=function(e){return{"text-bold":e}};function Ht(e,t){if(1&e&&(P.Xb(0,"th",31),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("ngClass",P.rc(2,zt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(n)}}function Et(e,t){if(1&e&&(P.Xb(0,"th",31),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("ngClass",P.rc(2,zt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(n)}}function Ut(e,t){if(1&e&&(P.Xb(0,"td",35),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,i=P.jc().$implicit,o=P.jc();P.pc("ngClass",P.rc(2,zt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(o.totalMonth[i.name][n])}}function Yt(e,t){if(1&e&&(P.Xb(0,"td",36),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,i=P.jc().$implicit,o=P.jc();P.Db(1),P.Mc(o.totalMonth[i.name]["load_"+n])}}function qt(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].revenueComplete,"1.0-0"))}}function Gt(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].revenueComplete/i.totalMonth[n.name].count_shipment,"1.0-2"))}}function Kt(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].revenuePaydate,"1.2-2"))}}function Qt(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].revenuePaydate/i.totalMonth[n.name].revenue,"1.0-2"))}}function Zt(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].costComplete,"1.0-0"))}}function en(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].costComplete/i.totalMonth[n.name].count_shipment,"1.0-2"))}}function tn(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].costPaydate,"1.2-2"))}}function nn(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Db(1),P.Mc(P.mc(2,1,i.totalMonth[n.name].costPaydate/i.totalMonth[n.name].cost,"1.0-2"))}}var on=function(e,t){return{accent:e,"red-400-bg fuse-white-fg":t}};function rn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td",32),P.fc("click",(function(e){P.Bc(n);var i=t.$implicit,o=P.jc();return e.stopPropagation(),o.filterMonth.emit(i)})),P.Xb(2,"span",33),P.Lc(3),P.Wb(),P.Wb(),P.Xb(4,"td",18),P.Lc(5),P.Wb(),P.Jc(6,Ut,2,4,"td",19),P.Xb(7,"td",20),P.Lc(8),P.Wb(),P.Xb(9,"td",21),P.Lc(10),P.Wb(),P.Jc(11,Yt,2,1,"td",22),P.Xb(12,"td",34),P.Lc(13),P.Wb(),P.Xb(14,"td",23),P.Lc(15),P.kc(16,"number"),P.Wb(),P.Jc(17,qt,3,4,"td",24),P.Jc(18,Gt,3,4,"td",25),P.Jc(19,Kt,3,4,"td",24),P.Jc(20,Qt,3,4,"td",25),P.Xb(21,"td",23),P.Lc(22),P.kc(23,"number"),P.Wb(),P.Jc(24,Zt,3,4,"td",24),P.Jc(25,en,3,4,"td",25),P.Jc(26,tn,3,4,"td",24),P.Jc(27,nn,3,4,"td",25),P.Xb(28,"td",26),P.Lc(29),P.kc(30,"number"),P.Wb(),P.Wb()}if(2&e){var i=t.$implicit,o=P.jc();P.Db(2),P.pc("ngClass",P.sc(29,on,o.totalMonth[i.name].teu==o.totalMonth[i.name].load_teu,o.totalMonth[i.name].teu!=o.totalMonth[i.name].load_teu)),P.Db(1),P.Oc("",o.totalMonth[i.name].month,"/",o.totalMonth[i.name].year,""),P.Db(2),P.Mc(o.totalMonth[i.name].count_shipment),P.Db(1),P.pc("ngForOf",o.arrType),P.Db(2),P.Mc(o.totalMonth[i.name].teu),P.Db(2),P.Mc(o.totalMonth[i.name].count_load_shipment),P.Db(1),P.pc("ngForOf",o.arrType),P.Db(2),P.Mc(o.totalMonth[i.name].load_teu),P.Db(2),P.Mc(P.mc(16,20,o.totalMonth[i.name].revenue,"1.0-0")),P.Db(2),P.pc("ngIf",o.revenueOpen),P.Db(1),P.pc("ngIf",o.revenueOpen),P.Db(1),P.pc("ngIf",o.revenueOpen),P.Db(1),P.pc("ngIf",o.revenueOpen),P.Db(2),P.Mc(P.mc(23,23,o.totalMonth[i.name].cost,"1.0-0")),P.Db(2),P.pc("ngIf",o.costOpen),P.Db(1),P.pc("ngIf",o.costOpen),P.Db(1),P.pc("ngIf",o.costOpen),P.Db(1),P.pc("ngIf",o.costOpen),P.Db(2),P.Mc(P.mc(30,26,o.totalMonth[i.name].revenue-o.totalMonth[i.name].cost,"1.0-0"))}}function an(e,t){if(1&e&&(P.Xb(0,"td",35),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,i=P.jc();P.pc("ngClass",P.rc(2,zt,"20DC"==n||"40HC"==n)),P.Db(1),P.Mc(i.shipmentTotal[n])}}function cn(e,t){if(1&e&&(P.Xb(0,"td",36),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,i=P.jc();P.Db(1),P.Mc(i.shipmentTotal["load_"+n])}}function sn(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.revenueComplete,"1.0-0"))}}function bn(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.revenueComplete/n.shipmentTotal.shipment,"0.3-5"))}}function ln(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.revenuePaydate,"1.2-2"))}}function pn(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.revenuePaydate/n.shipmentTotal.revenue,"0.3-5"))}}function un(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.costComplete,"1.0-0"))}}function dn(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.costComplete/n.shipmentTotal.shipment,"0.3-5"))}}function hn(e,t){if(1&e&&(P.Xb(0,"td",37),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.costPaydate,"1.2-2"))}}function vn(e,t){if(1&e&&(P.Xb(0,"td",38),P.Lc(1),P.kc(2,"percent"),P.Wb()),2&e){var n=P.jc();P.Db(1),P.Mc(P.mc(2,1,n.shipmentTotal.costPaydate/n.shipmentTotal.cost,"0.3-5"))}}function fn(e,t){1&e&&P.Sb(0,"td",37)}var mn,gn=((mn=function(){function e(t){_classCallCheck(this,e),this.authService=t,this.filterMonth=new P.o,this.revenueOpen=!1,this.costOpen=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.viewProfit=[1,15].includes(this.authService.user)}}]),e}()).\u0275fac=function(e){return new(e||mn)(P.Rb(B.a))},mn.\u0275cmp=P.Lb({type:mn,selectors:[["overview-view-shipment"]],inputs:{arrType:"arrType",arrMonth:"arrMonth",totalMonth:"totalMonth",shipmentTotal:"shipmentTotal"},outputs:{filterMonth:"filterMonth"},decls:85,vars:44,consts:[[1,"group","mb-12","mt-12"],[1,"viewer-content"],[1,"simple","total-table","mr-8"],[1,"sticky-header-1"],[1,"sticky-header-1","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-1","text-right","cursor-pointer",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",4,"ngIf"],["class","cursor-pointer","color","warn",4,"ngIf"],["class","sticky-header-1 text-right accent-200-bg",4,"ngIf"],["class","sticky-header-1 text-center accent-200-bg",4,"ngIf"],[1,"sticky-header-1","text-right"],[1,"sticky-header-2"],["class","sticky-header-2 text-right","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],[1,"sticky-header-2","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right"],[1,"sticky-header-2","text-right"],[4,"ngFor","ngForOf"],[1,"text-center"],["class","text-right mr-8","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-center","text-bold"],[1,"text-center","accent-400-fg","text-bold"],["class","text-right mr-8 accent-400-fg text-bold","fxHide","","fxShow.gt-sm","",4,"ngFor","ngForOf"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8"],["class","text-right accent-200-bg",4,"ngIf"],["class","text-center accent-200-bg",4,"ngIf"],[1,"text-right","mr-8"],["color","accent",1,"cursor-pointer"],["color","warn",1,"cursor-pointer"],[1,"sticky-header-1","text-right","accent-200-bg"],[1,"sticky-header-1","text-center","accent-200-bg"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right",3,"ngClass"],[1,"cursor-pointer",3,"click"],[1,"p-4",3,"ngClass"],[1,"text-center","text-bold","accent-400-fg"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8",3,"ngClass"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8","accent-400-fg","text-bold"],[1,"text-right","accent-200-bg"],[1,"text-center","accent-200-bg"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"h2"),P.Xb(2,"span"),P.Lc(3,"Shipment"),P.Wb(),P.Wb(),P.Xb(4,"div",1),P.Xb(5,"table",2),P.Xb(6,"thead"),P.Xb(7,"tr"),P.Xb(8,"th",3),P.Lc(9,"Time"),P.Wb(),P.Xb(10,"th",4),P.Lc(11,"Booking Shipment"),P.Wb(),P.Xb(12,"th",4),P.Lc(13,"Shipment Load Container"),P.Wb(),P.Xb(14,"th",5),P.fc("click",(function(e){return e.stopPropagation(),t.revenueOpen=!t.revenueOpen})),P.Xb(15,"div",6),P.Xb(16,"span"),P.Lc(17,"Revenue"),P.Wb(),P.Jc(18,Tt,2,0,"mat-icon",7),P.Jc(19,jt,2,0,"mat-icon",8),P.Wb(),P.Wb(),P.Jc(20,Pt,2,0,"th",9),P.Jc(21,It,2,0,"th",10),P.Jc(22,Ft,2,0,"th",9),P.Jc(23,Vt,2,0,"th",10),P.Xb(24,"th",5),P.fc("click",(function(e){return e.stopPropagation(),t.costOpen=!t.costOpen})),P.Xb(25,"div",6),P.Xb(26,"span"),P.Lc(27,"Cost"),P.Wb(),P.Jc(28,Jt,2,0,"mat-icon",7),P.Jc(29,At,2,0,"mat-icon",8),P.Wb(),P.Wb(),P.Jc(30,Rt,2,0,"th",9),P.Jc(31,Bt,2,0,"th",10),P.Jc(32,$t,2,0,"th",9),P.Jc(33,Nt,2,0,"th",10),P.Xb(34,"th",11),P.Lc(35,"Net revenue"),P.Wb(),P.Wb(),P.Xb(36,"tr"),P.Sb(37,"th",12),P.Xb(38,"th",12),P.Lc(39,"Total"),P.Wb(),P.Jc(40,Ht,2,4,"th",13),P.Xb(41,"th",14),P.Lc(42,"Teu"),P.Wb(),P.Xb(43,"th",14),P.Lc(44,"Total"),P.Wb(),P.Jc(45,Et,2,4,"th",13),P.Xb(46,"th",4),P.Lc(47,"Teu"),P.Wb(),P.Sb(48,"th",15),P.Sb(49,"th",15),P.Sb(50,"th",16),P.Wb(),P.Wb(),P.Xb(51,"tbody"),P.Jc(52,rn,31,32,"tr",17),P.Wb(),P.Xb(53,"tfoot"),P.Xb(54,"tr"),P.Xb(55,"td"),P.Lc(56,"Total"),P.Wb(),P.Xb(57,"td",18),P.Lc(58),P.Wb(),P.Jc(59,an,2,4,"td",19),P.Xb(60,"td",20),P.Lc(61),P.Wb(),P.Xb(62,"td",21),P.Lc(63),P.Wb(),P.Jc(64,cn,2,1,"td",22),P.Xb(65,"td",21),P.Lc(66),P.Wb(),P.Xb(67,"td",23),P.Lc(68),P.kc(69,"number"),P.Wb(),P.Jc(70,sn,3,4,"td",24),P.Jc(71,bn,3,4,"td",25),P.Jc(72,ln,3,4,"td",24),P.Jc(73,pn,3,4,"td",25),P.Xb(74,"td",23),P.Lc(75),P.kc(76,"number"),P.Wb(),P.Jc(77,un,3,4,"td",24),P.Jc(78,dn,3,4,"td",25),P.Jc(79,hn,3,4,"td",24),P.Jc(80,vn,3,4,"td",25),P.Jc(81,fn,1,0,"td",24),P.Xb(82,"td",26),P.Lc(83),P.kc(84,"number"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(10),P.Eb("colspan",2+t.arrType.length),P.Db(2),P.Eb("colspan",2+t.arrType.length),P.Db(6),P.pc("ngIf",!t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(5),P.pc("ngIf",!t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(7),P.pc("ngForOf",t.arrType),P.Db(5),P.pc("ngForOf",t.arrType),P.Db(7),P.pc("ngForOf",t.arrMonth),P.Db(6),P.Mc(t.shipmentTotal.shipment),P.Db(1),P.pc("ngForOf",t.arrType),P.Db(2),P.Mc(t.shipmentTotal.teu),P.Db(2),P.Mc(t.shipmentTotal.load_shipment),P.Db(1),P.pc("ngForOf",t.arrType),P.Db(2),P.Mc(t.shipmentTotal.load_teu),P.Db(2),P.Mc(P.mc(69,35,t.shipmentTotal.revenue,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(1),P.pc("ngIf",t.revenueOpen),P.Db(2),P.Mc(P.mc(76,38,t.shipmentTotal.cost,"1.0-0")),P.Db(2),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(1),P.pc("ngIf",t.costOpen),P.Db(2),P.Mc(P.mc(84,41,t.shipmentTotal.revenue-t.shipmentTotal.cost,"1.0-0")))},directives:[ze.b,N.d,N.c,I.t,I.s,l.a,I.q,ze.a],pipes:[I.g,I.C],styles:["overview-view-shipment .group{margin-left:0;margin-right:4px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000;z-index:100}overview-view-shipment .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa}overview-view-shipment .group .viewer-content{overflow:auto;width:100%}overview-view-shipment .group .viewer-content .total-table{font-size:12px}overview-view-shipment .group .viewer-content .total-table .border-right{border-right:1px solid rgba(0,0,0,.12)}overview-view-shipment .group .viewer-content .total-table td,overview-view-shipment .group .viewer-content .total-table th{padding:8px!important;white-space:nowrap}overview-view-shipment .group .viewer-content .total-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}overview-view-shipment .group .viewer-content .total-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}overview-view-shipment .group .viewer-content .total-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}overview-view-shipment .group .viewer-content .total-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}overview-view-shipment .group .viewer-content .total-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}overview-view-shipment .group .viewer-content .total-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}overview-view-shipment .group .viewer-content .total-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2}),mn),wn=n("fE3o"),yn=n("JX91"),kn=["formDirective"];function xn(e,t){if(1&e&&(P.Xb(0,"mat-option",42),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id)("matTooltip",n.full_name),P.Db(1),P.Nc(" ",n.short_name," ")}}function Wn(e,t){if(1&e&&(P.Xb(0,"mat-option",42),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id)("matTooltip",n.full_name),P.Db(1),P.Nc(" ",n.short_name," ")}}function Dn(e,t){if(1&e&&(P.Xb(0,"mat-option",42),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id)("matTooltip",n.full_name),P.Db(1),P.Nc(" ",n.short_name," ")}}function _n(e,t){if(1&e&&(P.Xb(0,"mat-option",37),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Mc(n.name)}}function Xn(e,t){if(1&e&&(P.Xb(0,"mat-option",37),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.name," ")}}function Sn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",43),P.fc("click",(function(e){P.Bc(n);var i=t.$implicit;return P.jc().getPort(i)})),P.Lc(1),P.Wb()}if(2&e){var i=t.$implicit;P.Db(1),P.Nc(" ",i.name," ")}}function On(e,t){if(1&e&&(P.Xb(0,"mat-option",37),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.name," ")}}function Cn(e,t){if(1&e&&(P.Xb(0,"mat-option",37),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n),P.Db(1),P.Mc(n)}}var Ln,Mn=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]},Tn=((Ln=function(){function e(t,n,i){_classCallCheck(this,e),this.formBuilder=t,this.commonService=n,this.datePipe=i,this.fitlerShipment=new P.o,this.year=(new Date).getFullYear(),this.monthList=[],this.monthView={},this.form=this.formBuilder.group({customer:[null],principal:[null],agent:[null],owner:[null],pol:[null],pod:[null],month:[null],year:[null],date_from:[null],date_to:[null],button:[null]}),this.searchChange=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.filterBy){if(this.filterBy.date_from){var t=this.filterBy.date_from.split("-");this.filterBy.date_from=new Date(t[0],t[1]-1,t[2])}if(this.filterBy.date_to){var n=this.filterBy.date_to.split("-");this.filterBy.date_to=new Date(n[0],n[1]-1,n[2])}this.form.patchValue(this.filterBy)}this.filteredCustomer=this.form.controls.customer.valueChanges.pipe(Object(yn.a)(""),Object(Je.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(Je.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredPrincipal=this.form.controls.principal.valueChanges.pipe(Object(yn.a)(""),Object(Je.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(Je.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(yn.a)(""),Object(Je.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(Je.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredSeaport1=this.form.controls.pol.valueChanges.pipe(Object(yn.a)(""),Object(Je.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(Je.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredSeaport2=this.form.controls.pod.valueChanges.pipe(Object(yn.a)(""),Object(Je.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(Je.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.form.controls.button.valueChanges.subscribe((function(t){t&&e.getMonthTime(t)}))}},{key:"getMonthTime",value:function(e){var t,n,i=this.form.controls.year.value,o=this.form.controls.month.value,r=new Date,a=r.getMonth(),c=r.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,a,1),n=new Date(c,a+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):i&&(t=new Date(i,o?o-1:0,1),n=new Date(i,o||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}},{key:"clearForm",value:function(){this.searchNgForm.resetForm();var e=new Date;e.setFullYear(e.getFullYear()-1,e.getMonth(),1),this.form.controls.date_from.setValue(e)}},{key:"onSearchFormSubmit",value:function(e){var t=JSON.parse(JSON.stringify(e.value));"string"==typeof e.customer&&(this.form.controls.customer.setValue(null),t.customer=null),"string"==typeof e.supplier&&(this.form.controls.supplier.setValue(null),t.supplier=null),"string"==typeof e.owner&&(this.form.controls.owner.setValue(null),t.owner=null),"string"==typeof e.pol&&(this.form.controls.pol.setValue(null),t.pol=null),"string"==typeof e.pod&&(this.form.controls.pod.setValue(null),t.pod=null),t.date_from=t.date_from?this.datePipe.transform(t.date_from,"yyyy-MM-dd"):null,t.date_to=t.date_to?this.datePipe.transform(t.date_to,"yyyy-MM-dd"):null,console.log(t),this.fitlerShipment.emit(t)}},{key:"getPort",value:function(e){this.form.controls.pol.setValue(e.pol),this.form.controls.pod.setValue(e.pod)}},{key:"setData",value:function(e){this.form.patchValue(e)}},{key:"setMonth",value:function(e){var t=this;this.form.controls.month.setValue(parseInt(e.month)+1),this.form.controls.year.setValue(e.year),this.getMonthTime("M"),setTimeout((function(){t.onSearchFormSubmit(t.form)}),100)}}]),e}()).\u0275fac=function(e){return new(e||Ln)(P.Rb(z.d),P.Rb($.a),P.Rb(I.f))},Ln.\u0275cmp=P.Lb({type:Ln,selectors:[["overview-sidebar"]],viewQuery:function(e,t){var n;1&e&&P.Sc(kn,!0),2&e&&P.wc(n=P.gc())&&(t.searchNgForm=n.first)},inputs:{height:"height",partner:"partner",seaport:"seaport",users:"users",portPair:"portPair",filterBy:"filterBy"},outputs:{fitlerShipment:"fitlerShipment"},decls:115,vars:49,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete"],[3,"displayWith"],["autoCus","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","principal","matInput","","formControlName","principal",3,"matAutocomplete"],["autoPrincipal","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent",3,"matAutocomplete"],["autoAgent","matAutocomplete"],["formControlName","owner"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","aria-label","pol","matInput","","formControlName","pol",3,"matAutocomplete"],["matSuffix","",1,"cursor-pointer",3,"matMenuTriggerFor"],["autoSeaport1","matAutocomplete"],["moreMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["inputCheck","","aria-label","pod","matInput","","formControlName","pod",3,"matAutocomplete"],["autoSeaport2","matAutocomplete"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","button"],["value","TM",1,"mb-12"],["value","TY",1,"mb-12"],[3,"value","matTooltip"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(P.Xb(0,"form",0,1),P.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form)})),P.Xb(2,"div",2),P.Xb(3,"div",3),P.Xb(4,"button",4),P.Lc(5," Submit "),P.Wb(),P.Xb(6,"button",5),P.fc("click",(function(e){return t.clearForm()})),P.Lc(7," Clear "),P.Wb(),P.Wb(),P.Wb(),P.Xb(8,"div",6),P.Xb(9,"div",7),P.Xb(10,"div",8),P.Xb(11,"div",9),P.Xb(12,"div",10),P.Xb(13,"mat-form-field",11),P.Xb(14,"mat-label"),P.Lc(15,"Customer"),P.Wb(),P.Sb(16,"input",12),P.Xb(17,"mat-autocomplete",13,14),P.Jc(19,xn,2,3,"mat-option",15),P.kc(20,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(21,"div",16),P.Xb(22,"mat-form-field",11),P.Xb(23,"mat-label"),P.Lc(24,"Principal"),P.Wb(),P.Sb(25,"input",17),P.Xb(26,"mat-autocomplete",13,18),P.Jc(28,Wn,2,3,"mat-option",15),P.kc(29,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(30,"div",16),P.Xb(31,"mat-form-field",11),P.Xb(32,"mat-label"),P.Lc(33,"Agent"),P.Wb(),P.Sb(34,"input",19),P.Xb(35,"mat-autocomplete",13,20),P.Jc(37,Dn,2,3,"mat-option",15),P.kc(38,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(39,"div",16),P.Xb(40,"mat-form-field",11),P.Xb(41,"mat-label"),P.Lc(42,"Owner"),P.Wb(),P.Xb(43,"mat-select",21),P.Jc(44,_n,2,2,"mat-option",22),P.Wb(),P.Wb(),P.Wb(),P.Xb(45,"div",16),P.Xb(46,"mat-form-field",11),P.Xb(47,"mat-label"),P.Lc(48,"POL"),P.Wb(),P.Sb(49,"input",23),P.Xb(50,"mat-icon",24),P.Lc(51,"import_export"),P.Wb(),P.Xb(52,"mat-autocomplete",13,25),P.Jc(54,Xn,2,2,"mat-option",22),P.kc(55,"async"),P.Wb(),P.Wb(),P.Xb(56,"mat-menu",null,26),P.Jc(58,Sn,2,1,"button",27),P.Wb(),P.Wb(),P.Xb(59,"div",16),P.Xb(60,"mat-form-field",11),P.Xb(61,"mat-label"),P.Lc(62,"POD"),P.Wb(),P.Sb(63,"input",28),P.Xb(64,"mat-autocomplete",13,29),P.Jc(66,On,2,2,"mat-option",22),P.kc(67,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(68,"div",16),P.Xb(69,"mat-form-field",11),P.Xb(70,"mat-label"),P.Lc(71,"ETD from"),P.Wb(),P.Xb(72,"input",30),P.fc("change",(function(e){return t.commonService.setDateStr(e)})),P.Wb(),P.Sb(73,"mat-datepicker-toggle",31),P.Sb(74,"mat-datepicker",null,32),P.Wb(),P.Wb(),P.Xb(76,"div",16),P.Xb(77,"mat-form-field",11),P.Xb(78,"mat-label"),P.Lc(79,"ETD to"),P.Wb(),P.Xb(80,"input",33),P.fc("change",(function(e){return t.commonService.setDateStr(e)})),P.Wb(),P.Sb(81,"mat-datepicker-toggle",31),P.Sb(82,"mat-datepicker",null,34),P.Wb(),P.Wb(),P.Xb(84,"div",16),P.Xb(85,"mat-form-field",11),P.Xb(86,"mat-label"),P.Lc(87,"Month"),P.Wb(),P.Xb(88,"mat-select",35),P.fc("selectionChange",(function(e){return t.getMonthTime("M")})),P.Jc(89,Cn,2,2,"mat-option",22),P.Wb(),P.Wb(),P.Wb(),P.Xb(90,"div",16),P.Xb(91,"mat-form-field",11),P.Xb(92,"mat-label"),P.Lc(93,"Year"),P.Wb(),P.Xb(94,"mat-select",36),P.fc("selectionChange",(function(e){return t.getMonthTime("Y")})),P.Xb(95,"mat-option",37),P.Lc(96),P.Wb(),P.Xb(97,"mat-option",37),P.Lc(98),P.Wb(),P.Xb(99,"mat-option",37),P.Lc(100),P.Wb(),P.Xb(101,"mat-option",37),P.Lc(102),P.Wb(),P.Xb(103,"mat-option",37),P.Lc(104),P.Wb(),P.Xb(105,"mat-option",37),P.Lc(106),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(107,"div",38),P.Xb(108,"h2"),P.Lc(109,"Time option"),P.Wb(),P.Xb(110,"mat-radio-group",39),P.Xb(111,"mat-radio-button",40),P.Lc(112,"This month"),P.Wb(),P.Xb(113,"mat-radio-button",41),P.Lc(114,"This year"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e){var n=P.xc(18),i=P.xc(27),o=P.xc(36),r=P.xc(53),a=P.xc(57),c=P.xc(65),s=P.xc(75),b=P.xc(83);P.pc("formGroup",t.form),P.Db(8),P.Ic("height",t.height,"px"),P.Db(8),P.pc("matAutocomplete",n),P.Db(1),P.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.partner)),P.Db(2),P.pc("ngForOf",P.lc(20,38,t.filteredCustomer)),P.Db(6),P.pc("matAutocomplete",i),P.Db(1),P.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.partner)),P.Db(2),P.pc("ngForOf",P.lc(29,40,t.filteredPrincipal)),P.Db(6),P.pc("matAutocomplete",o),P.Db(1),P.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.partner)),P.Db(2),P.pc("ngForOf",P.lc(38,42,t.filteredAgent)),P.Db(7),P.pc("ngForOf",t.users),P.Db(5),P.pc("matAutocomplete",r),P.Db(1),P.pc("matMenuTriggerFor",a),P.Db(2),P.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),P.Db(2),P.pc("ngForOf",P.lc(55,44,t.filteredSeaport1)),P.Db(4),P.pc("ngForOf",t.portPair),P.Db(5),P.pc("matAutocomplete",c),P.Db(1),P.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),P.Db(2),P.pc("ngForOf",P.lc(67,46,t.filteredSeaport2)),P.Db(6),P.pc("matDatepicker",s),P.Db(1),P.pc("for",s),P.Db(7),P.pc("matDatepicker",b),P.Db(1),P.pc("for",b),P.Db(8),P.pc("ngForOf",P.qc(48,Mn)),P.Db(6),P.pc("value",t.year-4),P.Db(1),P.Mc(t.year-4),P.Db(1),P.pc("value",t.year-3),P.Db(1),P.Mc(t.year-3),P.Db(1),P.pc("value",t.year-2),P.Db(1),P.Mc(t.year-2),P.Db(1),P.pc("value",t.year-1),P.Db(1),P.Mc(t.year-1),P.Db(1),P.pc("value",t.year),P.Db(1),P.Mc(t.year),P.Db(1),P.pc("value",t.year+1),P.Db(1),P.Mc(t.year+1)}},directives:[z.A,z.q,z.h,N.d,N.c,c.b,N.b,$e.a,b.c,b.f,u.b,z.b,r.c,z.p,z.g,r.a,I.s,h.a,l.a,b.h,o.c,o.d,a.b,a.d,a.a,D.n,v.b,v.a,p.a,o.a],pipes:[I.b],styles:["overview-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}overview-sidebar .navbar-scroll-container{background:#fff!important}overview-sidebar .navbar-scroll-container .navbar-content{padding-top:0}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}overview-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Ln);function jn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"fuse-sidebar",8),P.Xb(1,"div",9),P.Xb(2,"overview-sidebar",10),P.fc("fitlerShipment",(function(e){return P.Bc(n),P.jc().getFilterShipment(e)})),P.Wb(),P.Wb(),P.Wb()}if(2&e){var i=P.jc();P.Db(2),P.pc("height",i.height)("filterBy",i.filterBy)("partner",i.partner)("seaport",i.seaport)("users",i.users)("portPair",i.portPair)}}var Pn,In=((Pn=function(){function e(t,n,i,o,r,a,c){var s=this;_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.overviewService=i,this.commonService=o,this.bookFirebaseService=r,this._matDialog=a,this.router=c,this.sidebarPanel=!0,this.invoice=[],this.height=560,this.fullScreen=!1,this.portPair=[],this._unsubscribeAll=new A.a,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this.permission&&!this.permission.data?this.overviewService.getPermissionById(this.permission.id).then((function(e){s.permission=e,s.bookFirebaseService.readDatabaseBooking().subscribe((function(e){e.map((function(e){e.voyage.depart_time=new Date(e.voyage.depart_time).getTime()})),e.sort((function(e,t){return e.voyage.depart_time<t.voyage.depart_time?1:t.voyage.depart_time<e.voyage.depart_time?-1:0})),s.overviewService.book=e.filter((function(e){return s.permission.owner.includes(e.user)||(e.book.create_by?s.permission.owner.includes(e.book.create_by.id):null)||!!e.share&&e.share.map((function(e){return e.id})).includes(s.authService.user)})),s.overviewService.buildBookOverview()}))})):this.bookFirebaseService.readDatabaseBooking().subscribe((function(e){e.map((function(e){e.voyage.depart_time=new Date(e.voyage.depart_time).getTime()})),e.sort((function(e,t){return e.voyage.depart_time<t.voyage.depart_time?1:t.voyage.depart_time<e.voyage.depart_time?-1:0})),s.overviewService.book=e,s.overviewService.buildBookOverview()}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.overviewService.searchText?this.overviewService.searchText:null,this.filterBy=this.overviewService.currenSearch.formSearch,this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.overviewService.onOverviewChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.totalMonth=e.overviewService.totalMonth,e.arrMonth=e.overviewService.arrMonth,e.arrType=e.overviewService.arrType,e.shipmentTotal=e.overviewService.total,e.filterData=e.overviewService.currenSearch.formSearch,e.portPair=e.overviewService.portPair})),this.overviewService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.partner=e.overviewService.partner,e.seaport=e.overviewService.seaport,e.users=e.overviewService.users,e.country=e.overviewService.country,e.seaTerminal=e.overviewService.seaTerminal})),this.overviewService.onBookOverviewChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){t.length>0&&(e.bookData=t[0],e.bookWeek=t[1],e.bookType=t[2],e.bookTotal=t[3],e.priceHeader=e.overviewService.priceHeader,e.priceObj=e.overviewService.priceObj),e.arrYear=e.overviewService.arrYear})),this.overviewService.onContainersMovementChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.headerType=e.overviewService.headerType,e.containerMovement=e.overviewService.containerMovement}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.overviewService)}},{key:"searchFilter",value:function(e){this.overviewService.onSearchTextChanged.next(e)}},{key:"getFilterShipment",value:function(e){var t=this;this.filterBy=e,this.authService.onRequestChanged.next(!0),this.overviewService.getShipment(e).then((function(n){t.overviewService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"filterMonth",value:function(e){}},{key:"openModal",value:function(e){this.dialogRef=this._matDialog.open(Te,{panelClass:"overview-view-modal-dialog",data:{label:"Book list",data:e,contType:this.bookType,priceHeader:this.priceHeader,priceObj:this.priceObj,height:this.height,modul:"pacific-logistics-network",bookFirebaseService:this.bookFirebaseService}}),this.dialogRef.afterClosed().subscribe((function(e){}))}}]),e}()).\u0275fac=function(e){return new(e||Pn)(P.Rb(je.a),P.Rb(B.a),P.Rb(Ve),P.Rb($.a),P.Rb(Re),P.Rb(f.b),P.Rb(i.g))},Pn.\u0275cmp=P.Lb({type:Pn,selectors:[["overview-view"]],decls:8,vars:15,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","overview-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"label","headerType","data","type"],[3,"bookWeek","bookType","bookData","bookTotal","openModal"],[3,"arrType","arrMonth","totalMonth","shipmentTotal","filterMonth"],["name","overview-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","filterBy","partner","seaport","users","portPair","fitlerShipment"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Jc(1,jn,3,6,"fuse-sidebar",1),P.Xb(2,"div",2),P.Xb(3,"overview-header",3),P.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),P.Wb(),P.Xb(4,"div",4),P.Sb(5,"overview-stock-movement",5),P.Xb(6,"overview-view-book",6),P.fc("openModal",(function(e){return t.openModal(e)})),P.Wb(),P.Xb(7,"overview-view-shipment",7),P.fc("filterMonth",(function(e){return t.filterMonth(e)})),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(1),P.pc("ngIf",t.sidebarPanel),P.Db(2),P.pc("searchText",t.searchText)("sidebarName","overview-sidebar"),P.Db(2),P.pc("label","EMPTY")("headerType",t.headerType)("data",t.containerMovement.EMPTY)("type",!0),P.Db(1),P.pc("bookWeek",t.bookWeek)("bookType",t.bookType)("bookData",t.bookData)("bookTotal",t.bookTotal),P.Db(1),P.pc("arrType",t.arrType)("arrMonth",t.arrMonth)("totalMonth",t.totalMonth)("shipmentTotal",t.shipmentTotal))},directives:[Be.a,I.t,$e.a,qe,wt,Mt,gn,wn.a,Tn],styles:["overview-view{width:100%}"],encapsulation:2}),Pn),Fn=n("PVWW");function Vn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",11),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.vesselOpen=!t.vesselOpen})),P.Lc(1,"add"),P.Wb()}}function Jn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",12),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.vesselOpen=!t.vesselOpen})),P.Lc(1,"removed"),P.Wb()}}function An(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"POL"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Rn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"POD"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Bn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"ETD"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function $n(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"ETA"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Nn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",11),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.shipmentOpen=!t.shipmentOpen})),P.Lc(1,"add"),P.Wb()}}function zn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",12),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.shipmentOpen=!t.shipmentOpen})),P.Lc(1,"removed"),P.Wb()}}function Hn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"BL"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function En(e,t){if(1&e&&(P.Xb(0,"td"),P.Lc(1),P.Wb()),2&e){var n=P.jc(4).$implicit,i=P.jc();P.Eb("rowspan",i.objVessel[n].row),P.Db(1),P.Mc(i.objVessel[n].pol_name)}}function Un(e,t){if(1&e&&(P.Xb(0,"td"),P.Lc(1),P.Wb()),2&e){var n=P.jc(4).$implicit,i=P.jc();P.Eb("rowspan",i.objVessel[n].row),P.Db(1),P.Mc(i.objVessel[n].pod_name)}}function Yn(e,t){if(1&e&&(P.Xb(0,"td"),P.Lc(1),P.kc(2,"date"),P.Wb()),2&e){var n=P.jc(4).$implicit,i=P.jc();P.Eb("rowspan",i.objVessel[n].row),P.Db(1),P.Mc(P.mc(2,2,i.objVessel[n].depart_time,"MM/dd/yyyy HH:mm"))}}function qn(e,t){if(1&e&&(P.Xb(0,"td"),P.Lc(1),P.kc(2,"date"),P.Wb()),2&e){var n=P.jc(4).$implicit,i=P.jc();P.Eb("rowspan",i.objVessel[n].row),P.Db(1),P.Mc(P.mc(2,2,i.objVessel[n].arrive_time,"MM/dd/yyyy HH:mm"))}}function Gn(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Lc(4),P.Wb(),P.Jc(5,En,2,2,"td",16),P.Jc(6,Un,2,2,"td",16),P.Jc(7,Yn,3,5,"td",16),P.Jc(8,qn,3,5,"td",16),P.Ub()),2&e){var n=P.jc(3),i=n.$implicit,o=n.index,r=P.jc();P.Db(1),P.Eb("rowspan",r.objVessel[i].row),P.Db(1),P.Mc(o+1),P.Db(1),P.Eb("rowspan",r.objVessel[i].row),P.Db(1),P.Mc(r.objVessel[i].vessel_full_name),P.Db(1),P.pc("ngIf",r.vesselOpen),P.Db(1),P.pc("ngIf",r.vesselOpen),P.Db(1),P.pc("ngIf",r.vesselOpen),P.Db(1),P.pc("ngIf",r.vesselOpen)}}function Kn(e,t){if(1&e&&(P.Xb(0,"td"),P.Lc(1),P.Wb()),2&e){var n=P.jc(3).$implicit,i=P.jc().$implicit,o=P.jc();P.Eb("rowspan",o.objVessel[i].objShipment[n].container.length),P.Db(1),P.Mc(o.objVessel[i].objShipment[n].bill)}}function Qn(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",20),P.Xb(2,"a",18),P.Lc(3),P.Wb(),P.Wb(),P.Jc(4,Kn,2,2,"td",16),P.Ub()),2&e){var n=P.jc(2).$implicit,i=P.jc().$implicit,o=P.jc();P.Db(1),P.Eb("rowspan",o.objVessel[i].objShipment[n].container.length),P.Db(1),P.pc("routerLink","/apps/pacific-logistics-network/shipment/detail/"+o.objVessel[i].objShipment[n].id+"/overview"),P.Db(1),P.Mc(o.objVessel[i].objShipment[n].code),P.Db(1),P.pc("ngIf",o.shipmentOpen)}}var Zn=function(e){return{"grey-100-bg":e}};function ei(e,t){if(1&e&&(P.Xb(0,"tr",15),P.Jc(1,Gn,9,8,"ng-container",16),P.Jc(2,Qn,5,4,"ng-container",16),P.Xb(3,"td",17),P.Xb(4,"a",18),P.Lc(5),P.Wb(),P.Wb(),P.Xb(6,"td",19),P.Lc(7),P.Wb(),P.Wb()),2&e){var n=t.$implicit,i=t.index,o=P.jc(),r=o.index,a=o.$implicit,c=P.jc(),s=c.index,b=c.$implicit,l=P.jc();P.pc("ngClass",P.rc(6,Zn,s%2==0)),P.Db(1),P.pc("ngIf",0==r&&0==i),P.Db(1),P.pc("ngIf",0==i),P.Db(2),P.pc("routerLink","/apps/pacific-logistics-network/container-details/"+n),P.Db(1),P.Mc(l.objVessel[b].objShipment[a].objContainer[n].cont_number),P.Db(2),P.Mc(l.objVessel[b].objShipment[a].objContainer[n].cont_type_code)}}function ti(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ei,8,8,"tr",14),P.Ub()),2&e){var n=t.$implicit,i=P.jc().$implicit,o=P.jc();P.Db(1),P.pc("ngForOf",o.objVessel[i].objShipment[n].container)}}function ni(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ti,2,1,"ng-container",13),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(1),P.pc("ngForOf",i.objVessel[n].shipment)}}var ii,oi=((ii=function(){function e(t,n,i,o,r){_classCallCheck(this,e),this.router=t,this.route=n,this._activatedRoute=i,this.authService=o,this.datePipe=r,this.exportExcel=new P.o,this.vesselOpen=!1,this.shipmentOpen=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||ii)(P.Rb(i.g),P.Rb(i.a),P.Rb(i.a),P.Rb(B.a),P.Rb(I.f))},ii.\u0275cmp=P.Lb({type:ii,selectors:[["overview-vessel-table"]],viewQuery:function(e,t){var n;1&e&&P.Sc(T.e,!0),2&e&&P.wc(n=P.gc())&&(t.viewPort=n.first)},inputs:{arrVoyage:"arrVoyage",objVessel:"objVessel",arrType:"arrType",total:"total",height:"height"},outputs:{exportExcel:"exportExcel"},decls:30,vars:24,consts:[[2,"overflow","auto"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-table"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-col",2,"z-index","30"],[1,"sticky-right-col2",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],[4,"cdkVirtualFor","cdkVirtualForOf"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf"],[1,"sticky-right-col2"],[1,"cursor-pointer",3,"routerLink"],[1,"sticky-right-col1"],[1,"sticky-col"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"cdk-virtual-scroll-viewport",1),P.Xb(2,"table",2),P.Xb(3,"thead"),P.Xb(4,"tr"),P.Xb(5,"th"),P.Lc(6,"No"),P.Wb(),P.Xb(7,"th"),P.Xb(8,"div",3),P.Xb(9,"span"),P.Lc(10,"Vessel Voyage"),P.Wb(),P.Jc(11,Vn,2,0,"mat-icon",4),P.Jc(12,Jn,2,0,"mat-icon",5),P.Wb(),P.Wb(),P.Jc(13,An,2,2,"th",6),P.Jc(14,Rn,2,2,"th",6),P.Jc(15,Bn,2,2,"th",6),P.Jc(16,$n,2,2,"th",6),P.Xb(17,"th",7),P.Xb(18,"div",3),P.Xb(19,"span"),P.Lc(20,"Shipment"),P.Wb(),P.Jc(21,Nn,2,0,"mat-icon",4),P.Jc(22,zn,2,0,"mat-icon",5),P.Wb(),P.Wb(),P.Jc(23,Hn,2,2,"th",6),P.Xb(24,"th",8),P.Lc(25,"Container"),P.Wb(),P.Xb(26,"th",9),P.Lc(27,"Type"),P.Wb(),P.Wb(),P.Wb(),P.Xb(28,"tbody"),P.Jc(29,ni,2,1,"ng-container",10),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Ic("height",t.height,"px"),P.Db(1),P.Ic("height",t.height,"px"),P.Db(4),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(3),P.pc("cdkVirtualForOf",t.arrVoyage))},directives:[T.e,j.a,N.d,N.c,I.t,T.d,l.a,I.s,I.q,ze.a,i.j],pipes:[I.f],styles:["overview-vessel-table .no-shipments-text{font-size:24px;font-weight:300}overview-vessel-table cdk-virtual-scroll-viewport{width:100%}overview-vessel-table .overview-vessel{font-size:12px!important;border:1px solid #b3e5fc;margin-bottom:4px;background:#b3e5fc}overview-vessel-table .overview-vessel td,overview-vessel-table .overview-vessel th{padding:8px!important;white-space:nowrap}overview-vessel-table .mat-expansion-panel-body{padding:0!important}overview-vessel-table .shipment-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}overview-vessel-table .shipment-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}overview-vessel-table .shipment-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}overview-vessel-table .shipment-table td,overview-vessel-table .shipment-table th{padding:8px!important;white-space:nowrap;border:1px solid #e0e0e0}overview-vessel-table .shipment-table td .mat-standard-chip,overview-vessel-table .shipment-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}overview-vessel-table .shipment-table .paid{background:#fff;color:#000}overview-vessel-table .shipment-table .cost-paid{background:#ffe1c2;color:#000}overview-vessel-table .shipment-table .sticky-col{width:100px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}overview-vessel-table .shipment-table .sticky-col2{width:50px;position:sticky;position:-webkit-sticky;background:#fff;left:98px;z-index:20}overview-vessel-table .shipment-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}overview-vessel-table .shipment-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}overview-vessel-table .shipment-table .border-vessel td{border-bottom:1px solid #000!important}overview-vessel-table .shipment-table .row-even{background-color:#e0e0e0!important}"],encapsulation:2,data:{animation:Fn.a}}),ii);function ri(e,t){if(1&e){var n=P.Yb();P.Xb(0,"fuse-sidebar",6),P.Xb(1,"div",7),P.Xb(2,"overview-sidebar",8),P.fc("fitlerShipment",(function(e){return P.Bc(n),P.jc().getFilterShipment(e)})),P.Wb(),P.Wb(),P.Wb()}if(2&e){var i=P.jc();P.Db(2),P.pc("height",i.height)("partner",i.partner)("seaport",i.seaport)("users",i.users)("portPair",i.portPair)}}var ai,ci=((ai=function(){function e(t,n,i,o){_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.overviewService=i,this.commonService=o,this.sidebarPanel=!0,this.invoice=[],this.height=560,this.fullScreen=!1,this.portPair=[],this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.overviewService.searchText?this.overviewService.searchText:null,this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.overviewService.onOverviewChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.arrVoyage=t[0],e.objVessel=t[1]})),this.overviewService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.partner=e.overviewService.partner,e.seaport=e.overviewService.seaport,e.users=e.overviewService.users,e.country=e.overviewService.country,e.seaTerminal=e.overviewService.seaTerminal}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.overviewService)}},{key:"searchFilter",value:function(e){this.overviewService.onSearchTextChanged.next(e)}},{key:"getFilterShipment",value:function(e){var t=this;this.authService.onRequestChanged.next(!0),this.overviewService.getShipment(e).then((function(n){t.overviewService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}}]),e}()).\u0275fac=function(e){return new(e||ai)(P.Rb(je.a),P.Rb(B.a),P.Rb(Ve),P.Rb($.a))},ai.\u0275cmp=P.Lb({type:ai,selectors:[["overview-vessel"]],decls:6,vars:6,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","overview-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"arrVoyage","objVessel","height"],["name","overview-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","partner","seaport","users","portPair","fitlerShipment"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Jc(1,ri,3,5,"fuse-sidebar",1),P.Xb(2,"div",2),P.Xb(3,"overview-header",3),P.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),P.Wb(),P.Xb(4,"div",4),P.Sb(5,"overview-vessel-table",5),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(1),P.pc("ngIf",t.sidebarPanel),P.Db(2),P.pc("searchText",t.searchText)("sidebarName","overview-sidebar"),P.Db(2),P.pc("arrVoyage",t.arrVoyage)("objVessel",t.objVessel)("height",t.height))},directives:[Be.a,I.t,$e.a,qe,oi,wn.a,Tn],styles:["overview-vessel{width:100%}"],encapsulation:2}),ai);function si(e,t){if(1&e&&(P.Xb(0,"th",10),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Ic("top",i.inverseOfTranslation),P.Db(1),P.Mc(n)}}function bi(e,t){if(1&e&&(P.Vb(0),P.Jc(1,si,2,3,"th",9),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(1),P.pc("ngIf",i.total[n]>0)}}var li=function(e){return{"red-400-bg":e}};function pi(e,t){if(1&e&&(P.Xb(0,"td",14),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc().$implicit;P.pc("ngClass",P.rc(2,li,i.process>0&&i[n]!=i["move"+n])),P.Db(1),P.Mc(i[n])}}function ui(e,t){if(1&e&&(P.Vb(0),P.Jc(1,pi,2,4,"td",13),P.Ub()),2&e){var n=t.$implicit,i=P.jc(2);P.Db(1),P.pc("ngIf",i.total[n]>0)}}function di(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Xb(4,"a",11),P.Lc(5),P.Wb(),P.Wb(),P.Xb(6,"td"),P.Lc(7),P.Wb(),P.Xb(8,"td"),P.Lc(9),P.Wb(),P.Jc(10,ui,2,1,"ng-container",3),P.Xb(11,"td",12),P.Lc(12),P.Wb(),P.Xb(13,"td",12),P.Lc(14),P.Wb(),P.Xb(15,"td",12),P.Lc(16),P.Wb(),P.Xb(17,"td"),P.Lc(18),P.Wb(),P.Xb(19,"td"),P.Lc(20),P.Wb(),P.Xb(21,"td"),P.Lc(22),P.kc(23,"date"),P.Wb(),P.Xb(24,"td",4),P.Lc(25),P.kc(26,"number"),P.Wb(),P.Xb(27,"td",4),P.Lc(28),P.kc(29,"number"),P.Wb(),P.Xb(30,"td"),P.Lc(31),P.Wb(),P.Xb(32,"td"),P.Lc(33),P.Wb(),P.Wb()),2&e){var n=t.$implicit,i=t.index,o=P.jc();P.Db(2),P.Mc(i+1),P.Db(2),P.pc("routerLink","/apps/pacific-logistics-network/shipment/detail/"+n.id+"/soa"),P.Db(1),P.Mc(n.code),P.Db(2),P.Mc(n.bill),P.Db(2),P.Mc(n.vessel_full_name),P.Db(1),P.pc("ngForOf",o.package),P.Db(1),P.pc("matTooltip",n.customer_name),P.Db(1),P.Mc(n.customer_short_name),P.Db(1),P.pc("matTooltip",n.principal_name),P.Db(1),P.Mc(n.principal_short_name),P.Db(1),P.pc("matTooltip",n.agent_name),P.Db(1),P.Mc(n.agent_short_name),P.Db(2),P.Mc(n.pol_name),P.Db(2),P.Mc(n.pod_name),P.Db(2),P.Mc(P.mc(23,19,n.depart_time,"MM/dd/yyyy HH:mm")),P.Db(3),P.Mc(P.mc(26,22,n.revenueTotal,"1.0-0")),P.Db(3),P.Mc(P.mc(29,25,n.costTotal,"1.0-0")),P.Db(3),P.Mc(n.owner_name),P.Db(2),P.Mc(n.create_by_name)}}function hi(e,t){if(1&e&&(P.Xb(0,"td",16),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit,i=P.jc();P.Ic("bottom",i.inverseOfTranslation2),P.Db(1),P.Mc(i.total[n])}}function vi(e,t){if(1&e&&(P.Vb(0),P.Jc(1,hi,2,3,"td",15),P.Ub()),2&e){var n=t.$implicit,i=P.jc();P.Db(1),P.pc("ngIf",i.total[n]>0)}}var fi,mi=((fi=function(){function e(t){_classCallCheck(this,e),this.authService=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){e.shipment&&(e.shipment.currentValue||null==e.shipment.currentValue)&&(this.shipment=e.shipment.currentValue)}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||fi)(P.Rb(B.a))},fi.\u0275cmp=P.Lb({type:fi,selectors:[["overview-shipment-list"]],viewQuery:function(e,t){var n;1&e&&P.Sc(T.e,!0),2&e&&P.wc(n=P.gc())&&(t.viewPort=n.first)},inputs:{shipment:"shipment",total:"total",package:"package",permission:"permission",height:"height"},features:[P.Bb()],decls:59,vars:72,consts:[["fxLayout","column"],["itemSize","43",1,"h-100-p"],[1,"simple","overview-table"],[4,"ngFor","ngForOf"],[1,"text-right"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"text-bold"],["colspan","2",1,"text-bold"],[1,"text-right","text-bold"],["class","text-center",3,"top",4,"ngIf"],[1,"text-center"],[1,"cursor-pointer",3,"routerLink"],[3,"matTooltip"],["class","text-center",3,"ngClass",4,"ngIf"],[1,"text-center",3,"ngClass"],["class","text-bold text-center",3,"bottom",4,"ngIf"],[1,"text-bold","text-center"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"cdk-virtual-scroll-viewport",1),P.Xb(2,"table",2),P.Xb(3,"thead"),P.Xb(4,"tr"),P.Xb(5,"th"),P.Lc(6,"No"),P.Wb(),P.Xb(7,"th"),P.Lc(8,"Code"),P.Wb(),P.Xb(9,"th"),P.Lc(10,"Bill"),P.Wb(),P.Xb(11,"th"),P.Lc(12,"Voyage"),P.Wb(),P.Jc(13,bi,2,1,"ng-container",3),P.Xb(14,"th"),P.Lc(15,"Customer"),P.Wb(),P.Xb(16,"th"),P.Lc(17,"Principal"),P.Wb(),P.Xb(18,"th"),P.Lc(19,"Agent"),P.Wb(),P.Xb(20,"th"),P.Lc(21,"POL"),P.Wb(),P.Xb(22,"th"),P.Lc(23,"POD"),P.Wb(),P.Xb(24,"th"),P.Lc(25,"ETD"),P.Wb(),P.Xb(26,"th",4),P.Lc(27,"Revenue"),P.Wb(),P.Xb(28,"th",4),P.Lc(29,"Cost"),P.Wb(),P.Xb(30,"th"),P.Lc(31,"Owner"),P.Wb(),P.Xb(32,"th"),P.Lc(33,"Create by"),P.Wb(),P.Wb(),P.Wb(),P.Xb(34,"tbody"),P.Jc(35,di,34,28,"tr",5),P.Wb(),P.Xb(36,"tfoot"),P.Xb(37,"tr"),P.Xb(38,"td",6),P.Lc(39,"Total"),P.Wb(),P.Xb(40,"td",7),P.Lc(41),P.Wb(),P.Sb(42,"td"),P.Jc(43,vi,2,1,"ng-container",3),P.Sb(44,"td"),P.Sb(45,"td"),P.Sb(46,"td"),P.Sb(47,"td"),P.Sb(48,"td"),P.Sb(49,"td"),P.Xb(50,"td",8),P.Lc(51),P.kc(52,"number"),P.Wb(),P.Xb(53,"td",8),P.Lc(54),P.kc(55,"number"),P.Wb(),P.Sb(56,"td"),P.Sb(57,"td"),P.Sb(58,"td"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Ic("height",t.height,"px"),P.Db(5),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.pc("ngForOf",t.package),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(3),P.pc("cdkVirtualForOf",t.shipment),P.Db(3),P.Ic("bottom",t.inverseOfTranslation2),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Pc("",t.total.teu," Teus of ",t.shipment.length," Shipment",t.shipment.length>0?"s":"",""),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.pc("ngForOf",t.package),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(52,66,t.total.revenue,"1.0-0")),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(55,69,t.total.cost,"1.0-0")),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2))},directives:[N.d,T.e,T.a,I.s,T.d,I.t,i.j,p.a,I.q,ze.a],pipes:[I.g,I.f],styles:["overview-shipment-list .overview-table{font-size:12px}overview-shipment-list .overview-table td,overview-shipment-list .overview-table th{padding:8px!important;white-space:nowrap}overview-shipment-list .overview-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}overview-shipment-list .overview-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}overview-shipment-list .overview-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}overview-shipment-list .overview-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}overview-shipment-list .overview-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}overview-shipment-list .overview-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:Fn.a}}),fi);function gi(e,t){if(1&e){var n=P.Yb();P.Xb(0,"fuse-sidebar",6),P.Xb(1,"div",7),P.Xb(2,"overview-sidebar",8),P.fc("fitlerShipment",(function(e){return P.Bc(n),P.jc().getFilterShipment(e)})),P.Wb(),P.Wb(),P.Wb()}if(2&e){var i=P.jc();P.Db(2),P.pc("height",i.height)("partner",i.partner)("seaport",i.seaport)("users",i.users)("portPair",i.portPair)}}var wi,yi=((wi=function(){function e(t,n,i,o,r){_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.overviewService=i,this.commonService=o,this.router=r,this.sidebarPanel=!0,this.invoice=[],this.height=560,this.fullScreen=!1,this.portPair=[],this._unsubscribeAll=new A.a,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.overviewService.searchText?this.overviewService.searchText:null,this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.overviewService.onOverviewChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.totalMonth=e.overviewService.totalMonth,e.arrMonth=e.overviewService.arrMonth,e.arrType=e.overviewService.arrType,e.shipmentTotal=e.overviewService.total,e.filterData=e.overviewService.currenSearch.formSearch,e.portPair=e.overviewService.portPair})),this.overviewService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.partner=e.overviewService.partner,e.seaport=e.overviewService.seaport,e.users=e.overviewService.users,e.country=e.overviewService.country,e.seaTerminal=e.overviewService.seaTerminal})),this.overviewService.onShipmentChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.shipment=t.shipment,e.total=t.total,e.package=e.shipment.length>0?e.shipment[0].package:[]}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.overviewService)}},{key:"searchFilter",value:function(e){this.overviewService.onSearchTextChanged.next(e)}},{key:"getFilterShipment",value:function(e){var t=this;console.log(e),this.authService.onRequestChanged.next(!0),this.overviewService.getShipment(e).then((function(n){t.overviewService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"filterMonth",value:function(e){}},{key:"openModal",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||wi)(P.Rb(je.a),P.Rb(B.a),P.Rb(Ve),P.Rb($.a),P.Rb(i.g))},wi.\u0275cmp=P.Lb({type:wi,selectors:[["overview-shipment"]],decls:6,vars:8,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","overview-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],[3,"shipment","total","package","permission","height"],["name","overview-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","partner","seaport","users","portPair","fitlerShipment"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Jc(1,gi,3,5,"fuse-sidebar",1),P.Xb(2,"div",2),P.Xb(3,"overview-header",3),P.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),P.Wb(),P.Xb(4,"div",4),P.Sb(5,"overview-shipment-list",5),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(1),P.pc("ngIf",t.sidebarPanel),P.Db(2),P.pc("searchText",t.searchText)("sidebarName","overview-sidebar"),P.Db(2),P.pc("shipment",t.shipment)("total",t.total)("package",t.package)("permission",t.permission)("height",t.height))},directives:[Be.a,I.t,$e.a,qe,mi,wn.a,Tn],styles:["overview-shipment{width:100%}"],encapsulation:2}),wi);function ki(e,t){if(1&e){var n=P.Yb();P.Xb(0,"fuse-sidebar",8),P.Xb(1,"div",9),P.Xb(2,"overview-sidebar",10),P.fc("fitlerShipment",(function(e){return P.Bc(n),P.jc().getFilterShipment(e)})),P.Wb(),P.Wb(),P.Wb()}if(2&e){var i=P.jc();P.Db(2),P.pc("height",i.height)("partner",i.partner)("seaport",i.seaport)("users",i.users)("portPair",i.portPair)}}var xi,Wi=((xi=function(){function e(t,n,i,o,r){_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=n,this.overviewService=i,this.commonService=o,this.router=r,this.sidebarPanel=!0,this.invoice=[],this.height=560,this.fullScreen=!1,this._unsubscribeAll=new A.a,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.overviewService.searchText?this.overviewService.searchText:null,this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-56})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-56:e.authService.screenHeight-64-12-12-56})),this.overviewService.onContainersMovementChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.headerType=e.overviewService.headerType,e.containerMovement=e.overviewService.containerMovement})),this.overviewService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.partner=e.overviewService.partner,e.seaport=e.overviewService.seaport,e.users=e.overviewService.users})),this.overviewService.onOverviewChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.portPair=e.overviewService.portPair}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.overviewService)}},{key:"searchFilter",value:function(e){this.overviewService.onSearchTextChanged.next(e)}},{key:"getFilterShipment",value:function(e){var t=this;this.authService.onRequestChanged.next(!0),this.overviewService.getShipment(e).then((function(n){t.overviewService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}}]),e}()).\u0275fac=function(e){return new(e||xi)(P.Rb(je.a),P.Rb(B.a),P.Rb(Ve),P.Rb($.a),P.Rb(i.g))},xi.\u0275cmp=P.Lb({type:xi,selectors:[["overview-stock"]],decls:13,vars:23,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","overview-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content","p-8"],["fxLayout","column",1,"w-100-p"],["fusePerfectScrollbar","",2,"overflow","auto"],[3,"label","headerType","data"],["name","overview-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"height","partner","seaport","users","portPair","fitlerShipment"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Jc(1,ki,3,5,"fuse-sidebar",1),P.Xb(2,"div",2),P.Xb(3,"overview-header",3),P.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),P.Wb(),P.Xb(4,"div",4),P.Xb(5,"div",5),P.Xb(6,"div",6),P.Sb(7,"overview-stock-movement",7),P.Sb(8,"overview-stock-movement",7),P.Sb(9,"overview-stock-movement",7),P.Sb(10,"overview-stock-movement",7),P.Sb(11,"overview-stock-movement",7),P.Sb(12,"overview-stock-movement",7),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(1),P.pc("ngIf",t.sidebarPanel),P.Db(2),P.pc("searchText",t.searchText)("sidebarName","overview-sidebar"),P.Db(3),P.Ic("height",t.height,"px"),P.Db(1),P.pc("label","INBOUND ONBOARD")("headerType",t.headerType)("data",t.containerMovement.LOAD),P.Db(1),P.pc("label","FULIM")("headerType",t.headerType)("data",t.containerMovement.FULIM),P.Db(1),P.pc("label","TRIM")("headerType",t.headerType)("data",t.containerMovement.TRIMP),P.Db(1),P.pc("label","EMPTY")("headerType",t.headerType)("data",t.containerMovement.EMPTY),P.Db(1),P.pc("label","TREXP")("headerType",t.headerType)("data",t.containerMovement.TREXP),P.Db(1),P.pc("label","FULEX")("headerType",t.headerType)("data",t.containerMovement.FULEX))},directives:[Be.a,I.t,$e.a,qe,N.d,wt,wn.a,Tn],styles:["overview-stock{width:100%}"],encapsulation:2}),xi);n.d(t,"OverviewModule",(function(){return Xi}));var Di,_i=[{path:"",component:J,resolve:{data:Ve},children:[{path:"overview",component:In},{path:"shipment",component:yi},{path:"vessel",component:ci},{path:"stock",component:Wi}]}],Xi=((Di=function e(){_classCallCheck(this,e)}).\u0275mod=P.Pb({type:Di}),Di.\u0275inj=P.Ob({factory:function(e){return new(e||Di)},providers:[Ve,Re],imports:[[i.k.forChild(_i),o.b,r.b,a.c,c.c,s.b,b.e,l.b,p.b,u.c,d.c,h.b,v.c,f.e,m.b,g.b,w.b,y.d,k.e,x.b,W.b,_.b,X.k,S.c,D.t,O.a,C.a,L.a,M.f,T.g,j.b]]}),Di)},IOBc:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("5HBU"),o=n("bTqV"),r=n("kmnG"),a=n("NFeN"),c=n("qFsG"),s=n("wZkO"),b=n("/t3+"),l=n("bSwM"),p=n("+0xr"),u=n("FKr1"),d=n("MutI"),h=n("fXoL"),v=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},imports:[[i.a,o.c,r.e,a.b,c.c,s.c,b.b,l.b,u.t,d.c,p.k]]}),e}()},cfqv:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p}));var i=n("8LU1"),o=n("vxfF"),r=n("fXoL"),a=n("HDdC"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;_classCallCheck(this,e),this._totalWeight=0,this._defaultItemSize=t,this._averageItemSize=t}return _createClass(e,[{key:"getAverageItemSize",value:function(){return this._averageItemSize}},{key:"addSample",value:function(e,t){var n=this._totalWeight+e.end-e.start;if(n){var i=(t+this._averageItemSize*this._totalWeight)/n;i&&(this._averageItemSize=i,this._totalWeight=n)}}},{key:"reset",value:function(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}]),e}(),s=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c;_classCallCheck(this,e),this.scrolledIndexChange=new a.a((function(){throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")})),this._viewport=null,this._removalFailures=0,this._minBufferPx=t,this._maxBufferPx=n,this._averager=i}return _createClass(e,[{key:"attach",value:function(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}},{key:"detach",value:function(){this._viewport=null}},{key:"onContentScrolled",value:function(){this._viewport&&this._updateRenderedContentAfterScroll()}},{key:"onDataLengthChanged",value:function(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}},{key:"onContentRendered",value:function(){this._viewport&&this._checkRenderedContentSize()}},{key:"onRenderedOffsetChanged",value:function(){this._viewport&&this._checkRenderedContentOffset()}},{key:"scrollToIndex",value:function(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}},{key:"updateBufferSize",value:function(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}},{key:"_updateRenderedContentAfterScroll",value:function(){var e=this._viewport,t=e.measureScrollOffset(),n=t-this._lastScrollOffset,i=Math.abs(n),o=e.getRenderedRange(),r=0;if(n<0){var a=o.start*this._averager.getAverageItemSize();n-=r=Math.round((a-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,i/(t+i)))),i=Math.abs(n)}var c=this._lastScrollOffset-this._lastRenderedContentOffset,s=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),b=i+this._minBufferPx-(n<0?c:s);if(b>0)if(i>=e.getViewportSize())this._renderContentForCurrentOffset();else{var l,p,u=Math.max(0,Math.ceil((b-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),d=(n<0?s:c)-this._minBufferPx+i,h=Math.floor(d/this._averager.getAverageItemSize()/(this._removalFailures+1)),v=Math.min(o.end-o.start,Math.max(0,h)),f=this._expandRange(o,n<0?u:0,n>0?u:0);if(n<0?f.end=Math.max(f.start+1,f.end-v):f.start=Math.min(f.end-1,f.start+v),n<0){var m=e.measureRangeSize({start:f.end,end:o.end});m<=d?(l=this._lastRenderedContentOffset+this._lastRenderedContentSize-m,this._removalFailures=0):(f.end=o.end,l=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),p="to-end"}else{var g=e.measureRangeSize({start:o.start,end:f.start});g<=d?(l=this._lastRenderedContentOffset+g,this._removalFailures=0):(f.start=o.start,l=this._lastRenderedContentOffset,this._removalFailures++),p="to-start"}e.setRenderedRange(f),e.setRenderedContentOffset(l+r,p)}else r&&e.setRenderedContentOffset(this._lastRenderedContentOffset+r);this._lastScrollOffset=t}},{key:"_checkRenderedContentSize",value:function(){var e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}},{key:"_checkRenderedContentOffset",value:function(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}},{key:"_renderContentForCurrentOffset",value:function(){var e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;var n=this._averager.getAverageItemSize(),i=Math.min(e.getDataLength()-1,Math.floor(t/n)),o=Math.ceil(this._maxBufferPx/n),r=this._expandRange(this._getVisibleRangeForIndex(i),o,o);e.setRenderedRange(r),e.setRenderedContentOffset(n*r.start)}},{key:"_getVisibleRangeForIndex",value:function(e){var t=this._viewport,n={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},i=n.end-t.getDataLength();return i>0&&(n.start=Math.max(0,n.start-i)),n}},{key:"_expandRange",value:function(e,t,n){var i=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(i.getDataLength(),e.end+n)}}},{key:"_updateTotalContentSize",value:function(e){var t=this._viewport,n=t.getRenderedRange(),i=e+(t.getDataLength()-(n.end-n.start))*this._averager.getAverageItemSize();t.setTotalContentSize(i)}}]),e}();function b(e){return e._scrollStrategy}var l=function(){var e=function(){function e(){_classCallCheck(this,e),this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new s(this.minBufferPx,this.maxBufferPx)}return _createClass(e,[{key:"ngOnChanges",value:function(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=Object(i.f)(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=Object(i.f)(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.Cb([{provide:o.h,useFactory:b,deps:[Object(r.V)((function(){return e}))]}]),r.Bb()]}),e}(),p=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)}}),e}()},jD4G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"filterArrayByString",value:function(e,t){var n=this;return""===t?e:(t=t.toLowerCase(),e.filter((function(e){return n.searchInObj(e,t)})))}},{key:"searchInObj",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if("string"==typeof i){if(this.searchInString(i,t))return!0}else if(Array.isArray(i)&&this.searchInArray(i,t))return!0;if("object"==typeof i&&this.searchInObj(i,t))return!0}}},{key:"searchInArray",value:function(e,t){var n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;if("string"==typeof c&&this.searchInString(c,t))return!0;if("object"==typeof c&&this.searchInObj(c,t))return!0}}catch(s){i=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}}},{key:"searchInString",value:function(e,t){return e.toLowerCase().includes(t)}},{key:"generateGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}},{key:"toggleInArray",value:function(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}},{key:"handleize",value:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}]),e}()},rPBI:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("fXoL"),o=n("XNiG"),r=n("1G5W"),a=n("3Pt+"),c=n("Kj3r"),s=n("/uUt"),b=n("0JVi"),l=n("ofXK"),p=n("znSr"),u=n("XiUz"),d=n("bTqV"),h=n("NFeN");function v(e,t){if(1&e){var n=i.Yb();i.Xb(0,"button",7),i.fc("click",(function(e){return i.Bc(n),i.jc().expand()})),i.Xb(1,"mat-icon",8),i.Lc(2,"search"),i.Wb(),i.Wb()}if(2&e){var o=i.jc();i.Db(1),i.pc("color",o.searchText&&""!==o.searchText?"accent":"")}}var f=function(e){return{expanded:e}},m=function(){var e=function(){function e(t){_classCallCheck(this,e),this._fuseConfigService=t,this.inputValue=new i.o,this.collapsed=!0,this.searchInput=new a.e(""),this._unsubscribeAll=new o.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._fuseConfigService.config.pipe(Object(r.a)(this._unsubscribeAll)).subscribe((function(t){e.fuseConfig=t})),this.searchInput.valueChanges.pipe(Object(r.a)(this._unsubscribeAll),Object(c.a)(300),Object(s.a)()).subscribe((function(t){e.searchText=t,e.inputValue.emit(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.searchText&&(e.searchText.currentValue||null==e.searchText.currentValue)&&(this.searchText=e.searchText.currentValue,this.searchInput.setValue(this.searchText))}},{key:"collapse",value:function(){this.collapsed=!0}},{key:"expand",value:function(){this.collapsed=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Rb(b.b))},e.\u0275cmp=i.Lb({type:e,selectors:[["filter-search-bar"]],inputs:{searchText:"searchText"},outputs:{inputValue:"inputValue"},features:[i.Bb()],decls:8,vars:5,consts:[[1,"filter-search-bar",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",1,"filter-search-bar-content"],["for","filter-search-bar-input"],["mat-icon-button","","class","filter-search-bar-expander","aria-label","Expand Search Bar",3,"click",4,"ngIf"],["id","filter-search-bar-input","type","text","placeholder","Search","fxFlex","",1,"ml-24",3,"formControl"],["mat-icon-button","","aria-label","Collapse Search Bar",1,"filter-search-bar-collapser",3,"click"],[1,"s-24","secondary-text"],["mat-icon-button","","aria-label","Expand Search Bar",1,"filter-search-bar-expander",3,"click"],[1,"s-24","secondary-text",3,"color"]],template:function(e,t){1&e&&(i.Xb(0,"div",0),i.Xb(1,"div",1),i.Xb(2,"label",2),i.Jc(3,v,3,1,"button",3),i.Wb(),i.Sb(4,"input",4),i.Xb(5,"button",5),i.fc("click",(function(e){return t.collapse()})),i.Xb(6,"mat-icon",6),i.Lc(7,"close"),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&e&&(i.pc("ngClass",i.rc(3,f,!t.collapsed)),i.Db(3),i.pc("ngIf",t.collapsed),i.Db(1),i.pc("formControl",t.searchInput))},directives:[l.q,p.a,u.d,u.c,l.t,a.b,u.b,a.p,a.f,d.b,h.a],styles:["[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{height:56px}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:block}"]}),e}()}}]);