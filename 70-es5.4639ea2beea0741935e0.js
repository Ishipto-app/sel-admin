function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(s){a=!0,r=s}finally{try{i||null==c.return||c.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{EE7s:function(e,t,n){"use strict";n.r(t);var i=n("tyNb"),a=n("5HBU"),r=n("STbY"),o=n("/1cH"),c=n("iadO"),s=n("bTqV"),l=n("7EHt"),u=n("kmnG"),b=n("NFeN"),m=n("Qu3c"),p=n("qFsG"),d=n("wZkO"),f=n("d3UM"),h=n("QibW"),g=n("0IaG"),v=n("/t3+"),y=n("bSwM"),x=n("M9IT"),k=n("xHqg"),w=n("A5z7"),S=n("bv9b"),C=n("XhcP"),_=n("FKr1"),W=n("1jcm"),X=n("+0xr"),D=n("Dh3D"),L=n("IOBc"),I=n("212X"),F=n("LPQX"),O=n("3Pt+"),A=n("XNiG"),M=n("1G5W"),R=n("PVWW"),P=n("JX91"),T=n("lJxs"),j=n("fXoL"),z=n("qXBG"),B=n("XiUz"),V=n("EwFO"),J=n("ofXK");function q(e,t){if(1&e&&(j.Xb(0,"mat-option",32),j.Lc(1),j.Wb()),2&e){var n=t.$implicit;j.pc("value",n),j.Db(1),j.Nc(" ",n.cont_number," ")}}function N(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," container is required "),j.Wb())}function E(e,t){if(1&e&&(j.Xb(0,"mat-option",32),j.Lc(1),j.Wb()),2&e){var n=t.$implicit;j.pc("value",n),j.Db(1),j.Mc(n.code)}}function H(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Move type is required "),j.Wb())}function G(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Date is required "),j.Wb())}function U(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Time is required "),j.Wb())}function $(e,t){if(1&e&&(j.Xb(0,"mat-option",32),j.Lc(1),j.Wb()),2&e){var n=t.$implicit;j.pc("value",n),j.Db(1),j.Nc(" ",n.short_name," ")}}function Y(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," place is required "),j.Wb())}var Q,K,Z,ee=((Q=function(){function e(t,n,i,a,r){if(_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=i,this._formBuilder=a,this.authService=r,this.timeMax=new Date,this.form=this._formBuilder.group({container:[null,[O.y.required]],move:[null,O.y.required],date:[null,O.y.required],time:[null,O.y.required],place:[null,O.y.required],voyage:[null,O.y.required],load:[null],document:[null],info:[null],update_by:[this.authService.user,O.y.required]}),this.errorMessage="",console.log(i),this.container=i.container,this.moveType=[{id:9,code:"LOAD"},{id:3,code:"FULIM"}],this.place=i.place,this.name=this.authService.name,this.dialogTitle=i.label+" Movement","Edit"==i.label){var o=JSON.parse(JSON.stringify(i.movement));o.move&&(o.move=this.moveType.find((function(e){return e.id==o.move.id}))),o.place&&(o.place=this.place.find((function(e){return e.id==o.place.id}))),o.container&&(o.container=this.container.find((function(e){return e.id==o.container.id}))),o.update_by=this.authService.user,console.log(o),this.errorMessage=o.error,this.form.patchValue(o)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.valueChanges.subscribe((function(t){e.errorMessage=""})),this.filteredCont=this.form.controls.container.valueChanges.pipe(Object(P.a)(""),Object(T.a)((function(e){return e?"string"==typeof e?e:e.cont_number:null})),Object(T.a)((function(t){return t?e._filterCont(t):[]}))),this.filteredPlace=this.form.controls.place.valueChanges.pipe(Object(P.a)(""),Object(T.a)((function(e){return e?"string"==typeof e?e:e.supplier_name:null})),Object(T.a)((function(t){return t?e._filterPlace(t):[]})))}},{key:"setDateStr",value:function(e){e.target.value=""==e.target.value?null:new Date(e.target.value)}},{key:"displayFnCont",value:function(e){return e?e.cont_number:void 0}},{key:"displayFnPlace",value:function(e){return e?e.short_name:void 0}},{key:"_filterCont",value:function(e){var t=e.toLowerCase();return this.container.filter((function(e){return e.cont_number.toLowerCase().includes(t)}))}},{key:"_filterPlace",value:function(e){var t=e.toLowerCase();return this.place.filter((function(e){return e.supplier_name.toLowerCase().includes(t)}))}},{key:"onSubmitForm",value:function(e){e.valid&&(e.value.error="",this.matDialogRef.close(e.value))}}]),e}()).\u0275fac=function(e){return new(e||Q)(j.Rb(i.g),j.Rb(g.f),j.Rb(g.a),j.Rb(O.d),j.Rb(z.a))},Q.\u0275cmp=j.Lb({type:Q,selectors:[["container-import-modal-dialog"]],decls:70,vars:23,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-16","pb-0","m-0"],["name","form","fxLayout","column","fxFlex","",1,"w-100-p",3,"formGroup","keydown.enter","ngSubmit"],[1,"hide"],["formControlName","voyage"],["formControlName","load"],["fxFlex","1 0 auto","fxLayout","row wrap"],["appearance","outline","fxFlex","50","fxFlex.gt-sm","25",1,"pr-8"],["inputCheck","","type","text","matInput","","formControlName","container","required","",3,"matAutocomplete"],[3,"displayWith"],["autoCont","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","move","required",""],["inputCheck","","matInput","","name","date","formControlName","date","required","",3,"matDatepicker","max","change"],["matSuffix","",3,"for"],["imDatePicker",""],["inputCheck","","matInput","","formControlName","time","type","time","required",""],["inputCheck","","type","text","matInput","","formControlName","place","required","",3,"matAutocomplete"],["autoPlace","matAutocomplete"],["inputCheck","","matInput","","formControlName","document"],["inputCheck","","matInput","","formControlName","info"],["inputCheck","","matInput","","readonly","true",3,"value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","end center",1,"m-0","p-16"],["type","submit","mat-raised-button","","color","accent","aria-label","SAVE",1,"save-button"],[3,"value"]],template:function(e,t){if(1&e&&(j.Xb(0,"div",0),j.Xb(1,"mat-toolbar",1),j.Xb(2,"mat-toolbar-row",2),j.Xb(3,"span",3),j.Lc(4),j.Wb(),j.Xb(5,"button",4),j.fc("click",(function(e){return t.matDialogRef.close()})),j.Xb(6,"mat-icon"),j.Lc(7,"close"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(8,"div",5),j.Xb(9,"form",6),j.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSubmitForm(t.form)})),j.Xb(10,"div",7),j.Sb(11,"input",8),j.Sb(12,"input",9),j.Wb(),j.Xb(13,"div",10),j.Xb(14,"mat-form-field",11),j.Xb(15,"mat-label"),j.Lc(16,"Container"),j.Wb(),j.Sb(17,"input",12),j.Xb(18,"mat-autocomplete",13,14),j.Jc(20,q,2,2,"mat-option",15),j.kc(21,"async"),j.Wb(),j.Jc(22,N,2,0,"mat-error",16),j.Wb(),j.Xb(23,"mat-form-field",11),j.Xb(24,"mat-label"),j.Lc(25,"Move type"),j.Wb(),j.Xb(26,"mat-select",17),j.Jc(27,E,2,2,"mat-option",15),j.Wb(),j.Jc(28,H,2,0,"mat-error",16),j.Wb(),j.Xb(29,"mat-form-field",11),j.Xb(30,"mat-label"),j.Lc(31,"Date"),j.Wb(),j.Xb(32,"input",18),j.fc("change",(function(e){return t.setDateStr(e)})),j.Wb(),j.Sb(33,"mat-datepicker-toggle",19),j.Sb(34,"mat-datepicker",null,20),j.Jc(36,G,2,0,"mat-error",16),j.Wb(),j.Xb(37,"mat-form-field",11),j.Xb(38,"mat-label"),j.Lc(39,"Time"),j.Wb(),j.Sb(40,"input",21),j.Jc(41,U,2,0,"mat-error",16),j.Wb(),j.Xb(42,"mat-form-field",11),j.Xb(43,"mat-label"),j.Lc(44,"Place"),j.Wb(),j.Sb(45,"input",22),j.Xb(46,"mat-autocomplete",13,23),j.Jc(48,$,2,2,"mat-option",15),j.kc(49,"async"),j.Wb(),j.Jc(50,Y,2,0,"mat-error",16),j.Wb(),j.Xb(51,"mat-form-field",11),j.Xb(52,"mat-label"),j.Lc(53,"Document"),j.Wb(),j.Sb(54,"input",24),j.Wb(),j.Xb(55,"mat-form-field",11),j.Xb(56,"mat-label"),j.Lc(57,"Info"),j.Wb(),j.Sb(58,"input",25),j.Wb(),j.Xb(59,"mat-form-field",11),j.Xb(60,"mat-label"),j.Lc(61,"Update by"),j.Wb(),j.Sb(62,"input",26),j.Sb(63,"input",27),j.Wb(),j.Wb(),j.Xb(64,"div",28),j.Xb(65,"div",29),j.Lc(66),j.Wb(),j.Wb(),j.Xb(67,"div",30),j.Xb(68,"button",31),j.Lc(69," SAVE "),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var n=j.xc(19),i=j.xc(35),a=j.xc(47);j.Db(4),j.Mc(t.dialogTitle),j.Db(5),j.pc("formGroup",t.form),j.Db(8),j.pc("matAutocomplete",n),j.Db(1),j.pc("displayWith",t.displayFnCont),j.Db(2),j.pc("ngForOf",j.lc(21,19,t.filteredCont)),j.Db(2),j.pc("ngIf",t.form.get("container").hasError("required")),j.Db(5),j.pc("ngForOf",t.moveType),j.Db(1),j.pc("ngIf",t.form.get("move").hasError("required")),j.Db(4),j.pc("matDatepicker",i)("max",t.timeMax),j.Db(1),j.pc("for",i),j.Db(3),j.pc("ngIf",t.form.get("date").hasError("required")),j.Db(5),j.pc("ngIf",t.form.get("time").hasError("required")),j.Db(4),j.pc("matAutocomplete",a),j.Db(1),j.pc("displayWith",t.displayFnPlace),j.Db(2),j.pc("ngForOf",j.lc(49,21,t.filteredPlace)),j.Db(2),j.pc("ngIf",t.form.get("place").hasError("required")),j.Db(12),j.pc("value",t.name),j.Db(4),j.Mc(t.errorMessage)}},directives:[v.a,v.c,B.b,B.d,B.c,s.b,b.a,g.d,V.a,O.A,O.q,O.h,O.b,O.p,O.g,u.c,u.f,p.b,o.c,O.w,o.a,J.s,J.t,f.a,c.b,c.d,u.h,c.a,g.c,_.n,u.b],pipes:[J.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-import-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-import-modal-dialog{width:1080px}}.container-import-modal-dialog .mat-dialog-container{padding:0}.container-import-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-import-modal-dialog .mat-form-field-wrapper{margin:0 0 5px}.container-import-modal-dialog .primary-color-input,.container-import-modal-dialog .secondary-color-input{padding:6px 8px}"],encapsulation:2}),Q),te=n("HX77"),ne=n("2Vo4"),ie=n("tk/3"),ae=n("0Zc1"),re=((K=function(){function e(t,n,i,a){_classCallCheck(this,e),this._httpClient=t,this.authService=n,this.commonService=i,this.datePipe=a,this.selectedItem=[],this.onDataChanged=new ne.a([]),this.onDataMovementChanged=new ne.a([]),this.onVoyageChanged=new ne.a([])}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.authService.routerData=e,new Promise((function(e,n){Promise.all([t.getData(),t.getMovement(),t.getVoyageList()]).then((function(t){_slicedToArray(t,1)[0],e()}),n)}))}},{key:"getData",value:function(){var e=this,t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/sel/container/vessel-data",t).subscribe((function(t){e.container=t[0],e.supplier=t[1],e.place=t[2],e.moveType=t[3],e.containerInfo=t[4],e.columnType=t[5],e.dateType=t[6],e.supplierPort=t[10],e.supplierCarrier=t[11],e.onDataChanged.next(t),n(t)}),i)}))}},{key:"getMovement",value:function(){var e=this,t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/sel/container/data-movement",t).subscribe((function(t){e.movementInfo=t[0],e.movementLoadInfo=t[9],e.onDataMovementChanged.next(t),n(t)}),i)}))}},{key:"getVoyageList",value:function(){var e=this,t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){e._httpClient.get(e.authService.apiUrl+"/sel/container/vessel",t).subscribe((function(t){e.voyage=t,e.getFilterVoyage(),n(e.filterVoyage)}),i)}))}},{key:"createMovementLoad",value:function(e){var t=this,n={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,a){t._httpClient.post(t.authService.apiUrl+"/sel/container/movement-load",e,n).subscribe((function(e){i(e)}),a)}))}},{key:"createMovementFulim",value:function(e){var t=this,n={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,a){t._httpClient.post(t.authService.apiUrl+"/sel/container/movement-fulim",e,n).subscribe((function(e){i(e)}),a)}))}},{key:"deleteMovement",value:function(e){var t=this,n={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,a){t._httpClient.delete(t.authService.apiUrl+"/sel/container/movement/"+e,n).subscribe((function(e){i(e)}),a)}))}},{key:"deleteMovementFulim",value:function(e){var t=this,n={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,a){t._httpClient.delete(t.authService.apiUrl+"/sel/container/fulim/"+e,n).subscribe((function(e){i(e)}),a)}))}},{key:"getFilterVoyage",value:function(){var e=JSON.parse(JSON.stringify(this.voyage));if(this.placeForm&&this.placeForm.vessel_date)e=this.commonService.filterDate(e,this.placeForm.vessel_date,"depart_time",10);else{var t=(new Date).setDate((new Date).getDate()-30);e=this.commonService.filterDate(e,t,"depart_time",10)}this.filterVoyage=e,this.onVoyageChanged.next(this.filterVoyage)}},{key:"getDateTime",value:function(e){if("string"==typeof e){var t,n,i=null,a=null;if(this.dateForm.time?(i=(t=_slicedToArray(e.trim().split(" "),2))[0],a=t[1]):i=e,a){var r=a.trim().split(":");r[0]=parseInt(r[0])<10&&parseInt(r[0])>0?"0"+parseInt(r[0]):0==parseInt(r[0])?"00":r[0],r[1]=parseInt(r[1])<10&&parseInt(r[1])>0?"0"+parseInt(r[1]):0==parseInt(r[1])?"00":r[1],a=r[0]+":"+r[1]}var o=this.dateForm.type,c=this.dateForm.year;switch(!0){case 1==o.id&&c:case 2==o.id&&c:n=i.match(/^\d{1,2}[./-]\d{1,2}[./-]\d{4}$/g);break;case 3==o.id&&c:case 4==o.id&&c:n=i.match(/^\d{4}[./-]\d{1,2}[./-]\d{1,2}$/g);break;case 1==o.id&&!c:case 2==o.id&&!c:n=i.match(/^\d{1,2}[./-]\d{1,2}[./-]\d{2}$/g);break;case 3==o.id&&!c:case 4==o.id&&!c:n=i.match(/^\d{2}[./-]\d{1,2}[./-]\d{1,2}$/g)}if(n){var s=i.split(/[./-]+/);c||(s[o.year]=2e3+parseInt(s[o.year])),i=new Date(s[o.year],s[o.month]-1,s[o.day])}else i=null;return[i,a]}if(e>25569&&e<365*((new Date).getFullYear()-1970+1)+25569){var l=new Date(86400*(e-25569)*1e3+6e4*(new Date).getTimezoneOffset()+500);return[l,this.datePipe.transform(l,"HH:mm")]}return[null,null]}},{key:"createData",value:function(){var e=this,t=[],n={};return this.columnType.map((function(t){e.columnForm.map((function(e,i){e[i]&&e[i].value==t.value&&(n[t.value]=i+1)}))})),this.selectedItem.map((function(i,a){var r=_slicedToArray(e.getDateTime(i[n.date-1]),2),o=r[0],c=r[1],s="",l=[],u=e.containerInfo[i[n.cont_number-1]];u||l.push("invalid container");var b=e.moveType.find((function(t){return t.code==e.placeForm.move})),m=null;b?"FULIM"==b.code&&((m=e.movementLoadInfo[i[n.cont_number-1]+"-LOAD-"+e.placeForm.voyage.id])||l.push("error not load")):l.push("error move");var p=i[n.cont_number-1]+"-"+(b?b.code:"")+"-"+e.datePipe.transform(o,"M/d/yyyy"),d=e.movementInfo[p];d&&l.push("error duplicate move"),l.length>0&&(s=l.join(",")),t.push({container:u,date:o,time:c,document:i[n.document-1]?i[n.document-1]:null,info:null,move:b,voyage:e.placeForm.voyage,place:e.placeForm.place,error:s,duplicate:d||null,load:m,select:!1})})),this.dataView=t,t}}]),e}()).\u0275fac=function(e){return new(e||K)(j.bc(ie.a),j.bc(z.a),j.bc(ae.a),j.bc(J.f))},K.\u0275prov=j.Nb({token:K,factory:K.\u0275fac}),K),oe=n("vI/F"),ce=n("B9zo"),se=n("fE3o"),le=((Z=function(){function e(t,n){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.height=560,this.changeSetting=new j.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"initForm",value:function(){return this.formBuilder.group({column:this.formBuilder.array([])})}},{key:"addColumn",value:function(e){var t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}},{key:"checkAll",value:function(){var e=this;this.displayedColumns.map((function(t,n){e.form.controls.column.controls[n].controls[t].setValue(!0)}))}},{key:"toggleCardCover",value:function(){}},{key:"toggleSubscription",value:function(){}},{key:"columnAdd",get:function(){return this.form.get("column")}}]),e}()).\u0275fac=function(e){return new(e||Z)(j.Rb(O.d),j.Rb(z.a))},Z.\u0275cmp=j.Lb({type:Z,selectors:[["container-import-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(j.Xb(0,"div",0),j.Xb(1,"div",1),j.Xb(2,"div",2),j.Xb(3,"div"),j.Lc(4,"Settings"),j.Wb(),j.Wb(),j.Wb(),j.Xb(5,"div",3),j.Xb(6,"form",4),j.Xb(7,"div",5),j.Xb(8,"h2"),j.Lc(9,"Column"),j.Wb(),j.Xb(10,"div",6),j.Xb(11,"button",7),j.fc("click",(function(e){return t.checkAll()})),j.Lc(12,"All column"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.Db(5),j.Ic("height",t.height,"px"),j.Db(1),j.pc("formGroup",t.form))},directives:[B.d,B.c,V.a,O.A,O.q,O.h,s.b],styles:["container-import-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-import-setting .navbar-scroll-container{background:#fff!important}container-import-setting .navbar-scroll-container .navbar-content{padding-top:0}container-import-setting .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-import-setting .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-import-setting .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:R.a}}),Z),ue=n("0JVi"),be=n("znSr"),me=["googleSheet"];function pe(e,t){if(1&e){var n=j.Yb();j.Xb(0,"button",17),j.fc("click",(function(e){return j.Bc(n),j.jc().openPicker()})),j.Xb(1,"span"),j.Lc(2,"Get file2"),j.Wb(),j.Wb()}}function de(e,t){if(1&e){var n=j.Yb();j.Xb(0,"button",14),j.fc("click",(function(e){j.Bc(n);var t=j.jc();return e.stopPropagation(),t.changeScreen(!0)})),j.Xb(1,"mat-icon"),j.Lc(2,"flip_to_front"),j.Wb(),j.Wb()}}function fe(e,t){if(1&e){var n=j.Yb();j.Xb(0,"button",14),j.fc("click",(function(e){j.Bc(n);var t=j.jc();return e.stopPropagation(),t.changeScreen(!1)})),j.Xb(1,"mat-icon"),j.Lc(2,"flip_to_back"),j.Wb(),j.Wb()}}var he,ge=function(e){return{"accent-600-fg":e}},ve=function(e){return{hide:e}},ye=((he=function(){function e(t,n,i){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=n,this.googleApiService=i,this.fullScreen=!1,this.changeType=new j.o,this.toggleSidebar=new j.o,this.showHideBar=new j.o,this.refreshPage=new j.o,this.selectVoyage=new j.o,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.googleApiService.onFormChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.validForm=e.googleApiService.validForm}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewInit",value:function(){var e=this;this.googleApiService.onGapiChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.auth=t,e.attachSignin()})),this.googleApiService.onFileDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(e){}))}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}},{key:"attachSignin",value:function(){var e=this;this.auth.attachClickHandler(this.googleSheet._elementRef.nativeElement,{},(function(t){e.token=e.googleApiService.token=t.getAuthResponse().access_token,e.googleApiService.createPicker()}),(function(e){alert("ERROR"),console.error(e)}))}},{key:"openPicker",value:function(){this.googleApiService.createPicker()}},{key:"checkForm",value:function(){this.googleApiService.onValidateForm.next(!0)}}]),e}()).\u0275fac=function(e){return new(e||he)(j.Rb(z.a),j.Rb(ue.b),j.Rb(oe.a))},he.\u0275cmp=j.Lb({type:he,selectors:[["container-import-header"]],viewQuery:function(e,t){var n;1&e&&j.Sc(me,!0),2&e&&j.wc(n=j.gc())&&(t.googleSheet=n.first)},inputs:{type:"type",sidebarName:"sidebarName",currentVoyage:"currentVoyage"},outputs:{changeType:"changeType",toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",selectVoyage:"selectVoyage"},decls:44,vars:24,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","",1,"quick-panel-toggle-button",3,"click"],["fxHide","","fxShow.gt-sm","",3,"ngClass"],["fxShow","","fxHide.gt-sm","",3,"ngClass"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["type","button","mat-raised-button","","color","accent","id","googleSheet",1,"m-8",3,"ngClass"],["googleSheet",""],["type","button","mat-raised-button","","color","accent","class","m-8","id","googleSheet2",3,"click",4,"ngIf"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"],["type","button","mat-raised-button","","color","accent","id","googleSheet2",1,"m-8",3,"click"]],template:function(e,t){1&e&&(j.Xb(0,"mat-toolbar",0),j.Xb(1,"div",1),j.Xb(2,"div",2),j.Xb(3,"div",3),j.Xb(4,"button",4),j.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),j.Xb(5,"mat-icon"),j.Lc(6,"menu"),j.Wb(),j.Wb(),j.Xb(7,"button",5),j.fc("click",(function(e){return t.showHideBar.emit()})),j.Xb(8,"mat-icon"),j.Lc(9,"menu"),j.Wb(),j.Wb(),j.Wb(),j.Xb(10,"button",6),j.fc("click",(function(e){return t.changeType.emit("sheet")})),j.Xb(11,"span",7),j.Lc(12,"Sheet"),j.Wb(),j.Xb(13,"mat-icon",8),j.Lc(14,"view_carousel"),j.Wb(),j.Wb(),j.Xb(15,"button",6),j.fc("click",(function(e){return t.changeType.emit("import")})),j.Xb(16,"span",7),j.Lc(17,"Import"),j.Wb(),j.Xb(18,"mat-icon",8),j.Lc(19,"equalizer"),j.Wb(),j.Wb(),j.Xb(20,"button",6),j.fc("click",(function(e){return t.changeType.emit("created")})),j.Xb(21,"span",7),j.Lc(22,"Created"),j.Wb(),j.Xb(23,"mat-icon",8),j.Lc(24,"save"),j.Wb(),j.Wb(),j.Wb(),j.Xb(25,"div",9),j.Sb(26,"div",10),j.Xb(27,"button",11,12),j.Xb(29,"span"),j.Lc(30,"Get file1"),j.Wb(),j.Wb(),j.Jc(31,pe,3,0,"button",13),j.Sb(32,"div",10),j.Xb(33,"button",14),j.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),j.Xb(34,"mat-icon",15),j.Lc(35,"refresh"),j.Wb(),j.Wb(),j.Sb(36,"div",10),j.Jc(37,de,3,0,"button",16),j.Jc(38,fe,3,0,"button",16),j.Sb(39,"div",10),j.Xb(40,"button",14),j.fc("click",(function(e){return t.toggleSidebar.emit("container-import-setting")})),j.Xb(41,"mat-icon"),j.Lc(42,"settings"),j.Wb(),j.Wb(),j.Sb(43,"div",10),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.Db(11),j.pc("ngClass",j.rc(10,ge,"sheet"==t.type)),j.Db(2),j.pc("ngClass",j.rc(12,ge,"sheet"==t.type)),j.Db(3),j.pc("ngClass",j.rc(14,ge,"import"==t.type)),j.Db(2),j.pc("ngClass",j.rc(16,ge,"import"==t.type)),j.Db(3),j.pc("ngClass",j.rc(18,ge,"created"==t.type)),j.Db(2),j.pc("ngClass",j.rc(20,ge,"created"==t.type)),j.Db(4),j.pc("ngClass",j.rc(22,ve,t.token)),j.Db(4),j.pc("ngIf",t.token),j.Db(6),j.pc("ngIf",!t.fullScreen),j.Db(1),j.pc("ngIf",t.fullScreen))},directives:[v.a,B.b,B.e,B.d,B.c,s.b,be.b,b.a,J.q,be.a,J.t],styles:["container-import-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}container-import-header.below{z-index:2}container-import-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}container-import-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}container-import-header .logo .logo-icon{width:38px}container-import-header .chat-panel-toggle-button,container-import-header .language-button,container-import-header .quick-panel-toggle-button,container-import-header .user-button,container-import-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){container-import-header .chat-panel-toggle-button,container-import-header .language-button,container-import-header .quick-panel-toggle-button,container-import-header .user-button,container-import-header fuse-search-bar{height:56px}}container-import-header .navbar-toggle-button{min-width:56px;height:56px}container-import-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){container-import-header .toolbar-separator{height:56px}}"],encapsulation:2}),he),xe=["formDirective"];function ke(e,t){if(1&e&&(j.Xb(0,"mat-option",28),j.Lc(1),j.Wb()),2&e){var n=t.$implicit;j.pc("value",n)("matTooltip",n.full_name)("matTooltipPosition","left"),j.Db(1),j.Nc(" ",n.short_name," ")}}function we(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Place is required "),j.Wb())}function Se(e,t){if(1&e&&(j.Xb(0,"mat-option",28),j.Lc(1),j.Wb()),2&e){var n=t.$implicit;j.pc("value",n)("matTooltip",n.load_port_name+" / "+n.load_terminal_name+" - "+n.discharge_port_name+" / "+n.discharge_terminal_name)("matTooltipPosition","right"),j.Db(1),j.Nc(" ",n.vessel_name," ")}}function Ce(e,t){1&e&&(j.Xb(0,"mat-error"),j.Lc(1," Vessel is required "),j.Wb())}var _e,We=((_e=function(){function e(t,n,i){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.commonService=i,this.buildData=new j.o,this.form=this.formBuilder.group({vessel_date:[new Date((new Date).setDate((new Date).getDate()-30))],place:[null,O.y.required],move:["LOAD",O.y.required],voyage:[null,O.y.required]}),this.now=new Date,this.timeMax=new Date,this.height=560,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12})),this.filteredSupplier=this.form.controls.place.valueChanges.pipe(Object(P.a)(""),Object(T.a)((function(e){return e?"string"==typeof e?e:e.supplier_name:null})),Object(T.a)((function(t){return t?e.commonService.filterData(t,"supplier_name",e.place):[]}))),this.filteredVessel=this.form.controls.voyage.valueChanges.pipe(Object(P.a)(""),Object(T.a)((function(e){return e?"string"==typeof e?e:e.vessel_name:null})),Object(T.a)((function(t){return t?e.commonService.filterData(t,"vessel_name",e.voyage):[]})))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"checkPlace",value:function(){var e=this;setTimeout((function(){var t=e.form.value.place;if(t&&t.short_name){var n=e.form.value.voyage;n&&n.load_terminal_code&&(console.log(t),console.log(n),t.short_name!=n.load_terminal_code&&alert("Load terminal and Place are not same"))}}),1)}},{key:"resetForm",value:function(){this.searchNgForm.resetForm()}},{key:"onSearchFormSubmit",value:function(e){e.valid&&this.buildData.emit(e.value)}}]),e}()).\u0275fac=function(e){return new(e||_e)(j.Rb(O.d),j.Rb(z.a),j.Rb(ae.a))},_e.\u0275cmp=j.Lb({type:_e,selectors:[["container-import-sidebar"]],viewQuery:function(e,t){var n;1&e&&j.Sc(xe,!0),2&e&&j.wc(n=j.gc())&&(t.searchNgForm=n.first)},inputs:{place:"place",voyage:"voyage",checkColumn:"checkColumn"},outputs:{buildData:"buildData"},decls:50,vars:20,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"disabled"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","place","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnPlace","matAutocomplete"],["style","font-size: 12px",3,"value","matTooltip","matTooltipPosition",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100",1,"info-line"],[1,"group"],[1,"item"],["formControlName","move","fxLayout","row","fxLayoutAlign","start"],[3,"value"],[1,"ml-4",3,"value"],["inputCheck","","matInput","","formControlName","voyage","required","",3,"matAutocomplete"],["vesselVoyage","matAutocomplete"],["inputCheck","","matInput","","name","vessel_date","formControlName","vessel_date","readonly","true",3,"matDatepicker","change"],["matSuffix","",3,"for"],["vessel_date",""],[2,"font-size","12px",3,"value","matTooltip","matTooltipPosition"]],template:function(e,t){if(1&e&&(j.Xb(0,"form",0,1),j.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form)})),j.Xb(2,"div",2),j.Xb(3,"div",3),j.Xb(4,"button",4),j.Lc(5," Build Data "),j.Wb(),j.Xb(6,"button",5),j.fc("click",(function(e){return t.resetForm()})),j.Lc(7," Reset "),j.Wb(),j.Wb(),j.Wb(),j.Xb(8,"div",6),j.Xb(9,"div",7),j.Xb(10,"div",8),j.Xb(11,"div",9),j.Xb(12,"div",10),j.Xb(13,"mat-form-field",11),j.Xb(14,"mat-label"),j.Lc(15,"Place"),j.Wb(),j.Sb(16,"input",12),j.Xb(17,"mat-autocomplete",13,14),j.Jc(19,ke,2,4,"mat-option",15),j.kc(20,"async"),j.Wb(),j.Jc(21,we,2,0,"mat-error",16),j.Wb(),j.Wb(),j.Xb(22,"div",17),j.Xb(23,"div",18),j.Xb(24,"h2"),j.Lc(25,"Move"),j.Wb(),j.Xb(26,"div",19),j.Xb(27,"mat-radio-group",20),j.Xb(28,"mat-radio-button",21),j.Lc(29,"LOAD"),j.Wb(),j.Xb(30,"mat-radio-button",22),j.Lc(31,"FULIM"),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Xb(32,"div",10),j.Xb(33,"mat-form-field",11),j.Xb(34,"mat-label"),j.Lc(35,"Vessel"),j.Wb(),j.Sb(36,"input",23),j.Xb(37,"mat-autocomplete",13,24),j.Jc(39,Se,2,4,"mat-option",15),j.kc(40,"async"),j.Wb(),j.Jc(41,Ce,2,0,"mat-error",16),j.Wb(),j.Wb(),j.Xb(42,"div",17),j.Xb(43,"mat-form-field",11),j.Xb(44,"mat-label"),j.Lc(45,"Filter vessel date"),j.Wb(),j.Xb(46,"input",25),j.fc("change",(function(e){return t.commonService.setDateStr(e)})),j.Wb(),j.Sb(47,"mat-datepicker-toggle",26),j.Sb(48,"mat-datepicker",null,27),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e){var n=j.xc(18),i=j.xc(38),a=j.xc(49);j.pc("formGroup",t.form),j.Db(4),j.pc("disabled",!t.checkColumn),j.Db(4),j.Ic("height",t.height,"px"),j.Db(8),j.pc("matAutocomplete",n),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"short_name")),j.Db(2),j.pc("ngForOf",j.lc(20,16,t.filteredSupplier)),j.Db(2),j.pc("ngIf",t.form.get("place").hasError("required")),j.Db(7),j.pc("value","LOAD"),j.Db(2),j.pc("value","FULIM"),j.Db(6),j.pc("matAutocomplete",i),j.Db(1),j.pc("displayWith",t.commonService.displayObjFn.bind(t,"vessel_name")),j.Db(2),j.pc("ngForOf",j.lc(40,18,t.filteredVessel)),j.Db(2),j.pc("ngIf",t.form.get("voyage").hasError("required")),j.Db(5),j.pc("matDatepicker",a),j.Db(1),j.pc("for",a)}},directives:[O.A,O.q,O.h,B.d,B.c,s.b,B.b,V.a,u.c,u.f,p.b,O.b,o.c,O.p,O.g,O.w,o.a,J.s,J.t,h.b,h.a,c.b,c.d,u.h,c.a,_.n,m.a,u.b],pipes:[J.b],styles:["container-import-sidebar{border-right:1px solid #a3a3a3}container-import-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-import-sidebar .navbar-scroll-container{background:#fff!important}container-import-sidebar .navbar-scroll-container .navbar-content{padding-top:0}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:16px}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 8px 0 0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}container-import-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),_e),Xe=n("vxfF");function De(e,t){1&e&&(j.Xb(0,"div",2),j.Xb(1,"span",3),j.Lc(2,"No data"),j.Wb(),j.Wb())}function Le(e,t){if(1&e&&(j.Xb(0,"mat-option",19),j.Lc(1),j.Wb()),2&e){var n=t.$implicit,i=j.jc(3);j.pc("value",n)("disabled",i.selectedColumn.includes(n.name)),j.Db(1),j.Nc("",n.name," ")}}function Ie(e,t){if(1&e&&(j.Xb(0,"th",13),j.Xb(1,"span",14),j.Lc(2),j.Wb(),j.Xb(3,"mat-form-field",15),j.Xb(4,"mat-select",16),j.Sb(5,"mat-option",17),j.Jc(6,Le,2,3,"mat-option",18),j.Wb(),j.Wb(),j.Wb()),2&e){var n=t.$implicit,i=t.index,a=j.jc(2);j.pc("formGroupName",i),j.Db(2),j.Mc(a.nameCol[n]),j.Db(2),j.pc("formControlName",n),j.Db(2),j.pc("ngForOf",a.columnType)}}function Fe(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,":\xa0"),j.Wb())}function Oe(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"yyyy/"),j.Wb())}function Ae(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"yy/"),j.Wb())}function Me(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"/yyyy"),j.Wb())}function Re(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"/yy"),j.Wb())}function Pe(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"\xa0hh:mm"),j.Wb())}function Te(e,t){if(1&e){var n=j.Yb();j.Xb(0,"a",28),j.fc("click",(function(e){return j.Bc(n),e.stopPropagation()})),j.Jc(1,Oe,2,0,"span",21),j.Jc(2,Ae,2,0,"span",21),j.Xb(3,"span"),j.Lc(4),j.Wb(),j.Jc(5,Me,2,0,"span",21),j.Jc(6,Re,2,0,"span",21),j.Jc(7,Pe,2,0,"span",21),j.Wb()}if(2&e){j.jc();var i=j.xc(6),a=j.jc(2);j.pc("matMenuTriggerFor",i),j.Db(1),j.pc("ngIf",a.date.year&&a.date.type.yearFirst),j.Db(1),j.pc("ngIf",!a.date.year&&a.date.type.yearFirst),j.Db(2),j.Mc(a.date.type.code),j.Db(1),j.pc("ngIf",a.date.year&&!a.date.type.yearFirst),j.Db(1),j.pc("ngIf",!a.date.year&&!a.date.type.yearFirst),j.Db(1),j.pc("ngIf",a.date.time)}}function je(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"yyyy/"),j.Wb())}function ze(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"yy/"),j.Wb())}function Be(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"/yyyy"),j.Wb())}function Ve(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"/yy"),j.Wb())}function Je(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"\xa0hh:mm"),j.Wb())}function qe(e,t){1&e&&(j.Xb(0,"mat-icon",30),j.Lc(1,"done"),j.Wb())}function Ne(e,t){if(1&e){var n=j.Yb();j.Xb(0,"button",29),j.fc("click",(function(e){j.Bc(n);var i=t.$implicit;return j.jc(3).getDate(i)})),j.Jc(1,je,2,0,"span",21),j.Jc(2,ze,2,0,"span",21),j.Xb(3,"span"),j.Lc(4),j.Wb(),j.Jc(5,Be,2,0,"span",21),j.Jc(6,Ve,2,0,"span",21),j.Jc(7,Je,2,0,"span",21),j.Lc(8," \xa0 "),j.Jc(9,qe,2,0,"mat-icon",27),j.Wb()}if(2&e){var i=t.$implicit,a=j.jc(3);j.Db(1),j.pc("ngIf",a.form.value.year&&i.yearFirst),j.Db(1),j.pc("ngIf",!a.form.value.year&&i.yearFirst),j.Db(2),j.Mc(i.code),j.Db(1),j.pc("ngIf",a.form.value.year&&!i.yearFirst),j.Db(1),j.pc("ngIf",!a.form.value.year&&!i.yearFirst),j.Db(1),j.pc("ngIf",a.form.value.time),j.Db(2),j.pc("ngIf",a.date.type.id==i.id)}}function Ee(e,t){1&e&&(j.Xb(0,"mat-icon",31),j.Lc(1,"close"),j.Wb())}function He(e,t){1&e&&(j.Xb(0,"mat-icon",30),j.Lc(1,"done"),j.Wb())}function Ge(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"\xa0\xa0yy"),j.Wb())}function Ue(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"yyyy"),j.Wb())}function $e(e,t){1&e&&(j.Xb(0,"mat-icon",31),j.Lc(1,"close"),j.Wb())}function Ye(e,t){1&e&&(j.Xb(0,"mat-icon",30),j.Lc(1,"done"),j.Wb())}function Qe(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"_"),j.Wb())}function Ke(e,t){1&e&&(j.Xb(0,"span"),j.Lc(1,"hh:mm"),j.Wb())}function Ze(e,t){if(1&e){var n=j.Yb();j.Xb(0,"td",20),j.Xb(1,"span"),j.Lc(2),j.Wb(),j.Jc(3,Fe,2,0,"span",21),j.Jc(4,Te,8,7,"a",22),j.Xb(5,"mat-menu",null,23),j.Jc(7,Ne,10,7,"button",24),j.Xb(8,"button",25),j.fc("click",(function(e){j.Bc(n);var t=j.jc(2);return e.stopPropagation(),t.setYear()})),j.Jc(9,Ee,2,0,"mat-icon",26),j.Jc(10,He,2,0,"mat-icon",27),j.Xb(11,"span"),j.Lc(12,"year:\xa0"),j.Wb(),j.Jc(13,Ge,2,0,"span",21),j.Jc(14,Ue,2,0,"span",21),j.Wb(),j.Xb(15,"button",25),j.fc("click",(function(e){j.Bc(n);var t=j.jc(2);return e.stopPropagation(),t.setTime()})),j.Jc(16,$e,2,0,"mat-icon",26),j.Jc(17,Ye,2,0,"mat-icon",27),j.Xb(18,"span"),j.Lc(19,"time:\xa0"),j.Wb(),j.Jc(20,Qe,2,0,"span",21),j.Jc(21,Ke,2,0,"span",21),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit,a=j.jc(2);j.Db(2),j.Mc(null==a.form.value.column[i][i]?null:a.form.value.column[i][i].type),j.Db(1),j.pc("ngIf",a.form.value.column[i][i]&&"date"==a.form.value.column[i][i].type),j.Db(1),j.pc("ngIf",a.form.value.column[i][i]&&"date"==a.form.value.column[i][i].type),j.Db(3),j.pc("ngForOf",a.dateType),j.Db(2),j.pc("ngIf",!a.form.value.year),j.Db(1),j.pc("ngIf",a.form.value.year),j.Db(3),j.pc("ngIf",!a.form.value.year),j.Db(1),j.pc("ngIf",a.form.value.year),j.Db(2),j.pc("ngIf",!a.form.value.time),j.Db(1),j.pc("ngIf",a.form.value.time),j.Db(3),j.pc("ngIf",!a.form.value.time),j.Db(1),j.pc("ngIf",a.form.value.time)}}var et=function(e,t){return{"border-bottom":e,"border-right":t}};function tt(e,t){if(1&e&&(j.Xb(0,"td",35),j.Lc(1),j.Wb()),2&e){var n=t.$implicit,i=t.index,a=j.jc(),r=a.index,o=a.$implicit,c=j.jc(2);j.pc("ngClass",j.sc(2,et,r==c.data.length-1,i==c.column.length-1)),j.Db(1),j.Mc(o[n])}}function nt(e,t){if(1&e){var n=j.Yb();j.Xb(0,"tr"),j.Xb(1,"td",32),j.Xb(2,"mat-checkbox",33),j.fc("click",(function(e){return j.Bc(n),e.stopPropagation()}))("change",(function(e){j.Bc(n);var i=t.$implicit,a=j.jc(2);return e?a.getSelectItem(i):null})),j.Wb(),j.Xb(3,"span"),j.Lc(4),j.Wb(),j.Wb(),j.Jc(5,tt,2,5,"td",34),j.Wb()}if(2&e){var i=t.$implicit,a=t.index,r=j.jc(2);j.Db(2),j.pc("checked",r.selectedItem.includes(i)),j.Db(2),j.Nc("\xa0",a+1,""),j.Db(1),j.pc("ngForOf",r.column)}}function it(e,t){if(1&e){var n=j.Yb();j.Xb(0,"form",4),j.Xb(1,"cdk-virtual-scroll-viewport",5),j.Xb(2,"table",6),j.Xb(3,"thead"),j.Xb(4,"tr",7),j.Xb(5,"th",8),j.Xb(6,"mat-checkbox",9),j.fc("change",(function(e){return j.Bc(n),j.jc().checkAll()})),j.Wb(),j.Wb(),j.Jc(7,Ie,7,4,"th",10),j.Wb(),j.Wb(),j.Xb(8,"tbody"),j.Xb(9,"tr"),j.Xb(10,"td",8),j.Lc(11,"Type"),j.Wb(),j.Jc(12,Ze,22,12,"td",11),j.Wb(),j.Jc(13,nt,6,3,"tr",12),j.Wb(),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=j.jc();j.Ic("height",i.height,"px"),j.pc("formGroup",i.form),j.Db(1),j.pc("itemSize",39),j.Db(5),j.pc("checked",i.itemCheck)("indeterminate",i.selectedItem.length>0&&!i.itemCheck),j.Db(1),j.pc("ngForOf",i.column),j.Db(5),j.pc("ngForOf",i.column),j.Db(1),j.pc("cdkVirtualForOf",i.data)}}var at,rt=((at=function(){function e(t,n,i,a,r){_classCallCheck(this,e),this.formBuilder=t,this._activatedRoute=n,this.changeDetector=i,this.authService=a,this.containerImportService=r,this.changeCheckColumn=new j.o,this.itemCheck=!1,this.selectedItem=[],this.objColumn=[],this.column=[],this.selectedColumn=[],this.date={type:null,year:!1,time:!0},this.nameCol={0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",10:"K",11:"L",12:"M",13:"N",14:"O",15:"P",16:"Q",17:"R",18:"S",19:"T",20:"U",21:"V",22:"W",23:"X",24:"Y",25:"Z"},this.height=560,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.selectedColumn=[],this.data=[["GLDU9826062","01/26/21 18:00:00","123"],["SEGU5183773","01/26/21 19:00:00"]],this.data.length>0){var t=0;this.column=[],this.data.map((function(e){t<e.length&&(t=e.length)}));for(var n=0;n<t;++n)this.column.push(n);this.date.type=this.dateType[0],this.form=this.initForm(),this.column.map((function(t){var n={};n[t]=null,e.addColumn(n)})),this.containerImportService.columnForm&&(this.containerImportService.columnForm.map((function(t,n){var i=e.columnType.indexOf(e.columnType.find((function(e){return e.name==t[n].name})));e.form.controls.column.controls[n].controls[n].setValue(e.columnType[i])})),this.selectedColumn=[],this.containerImportService.columnForm.map((function(t,n){t[n]&&e.selectedColumn.push(t[n].name)}))),this.form.controls.column.valueChanges.subscribe((function(t){e.selectedColumn=[],t.map((function(t,n){t[n]&&e.selectedColumn.push(t[n].name)})),e.checkColumn(t)})),this.containerImportService.dateForm=this.date}else this.column=[];this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-54-8})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-54-8:e.authService.screenHeight-64-12-12-54-8})),console.log(this.selectedColumn)}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"ngOnChanges",value:function(e){var t=this;if(e.data&&e.data.currentValue)if(this.data=e.data.currentValue,this.data.length>0){var n=0;this.column=[],this.data.map((function(e){n<e.length&&(n=e.length)}));for(var i=0;i<n;++i)this.column.push(i);this.date.type=this.dateType[0],this.form=this.initForm(),this.column.map((function(e){var n={};n[e]=null,t.addColumn(n)})),this.form.controls.column.valueChanges.subscribe((function(e){t.selectedColumn=[],e.map((function(e,n){e[n]&&t.selectedColumn.push(e[n].name)})),t.checkColumn(e)})),this.containerImportService.dateForm=this.date}else this.column=[]}},{key:"checkAll",value:function(){var e=this;this.selectedItem=[],this.itemCheck?this.itemCheck=!1:(this.data.map((function(t){e.getSelectItem(t)})),this.itemCheck=!0),this.checkColumn(this.form.value.column)}},{key:"getSelectItem",value:function(e){var t=this.selectedItem.indexOf(e);t>=0?this.selectedItem.splice(t,1):this.selectedItem.push(e),this.checkColumn(this.form.value.column)}},{key:"initForm",value:function(){return this.formBuilder.group({year:[!1],time:[!0],column:this.formBuilder.array([])})}},{key:"addColumn",value:function(e){this.columnAdd.push(this.formBuilder.group(e))}},{key:"setYear",value:function(){var e=this.form.value.year;this.form.controls.year.setValue(!e),this.date.year=!e}},{key:"setTime",value:function(){var e=this.form.value.time;this.form.controls.time.setValue(!e),this.date.time=!e}},{key:"getDate",value:function(e){this.date={type:e,year:this.form.value.year,time:this.form.value.time},this.containerImportService.dateForm=this.date}},{key:"checkColumn",value:function(e){this.selectedColumn.length==this.columnType.length&&this.selectedItem.length>0?(this.changeCheckColumn.emit(!0),this.containerImportService.columnForm=e,this.containerImportService.selectedItem=this.selectedItem):this.changeCheckColumn.emit(!1)}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"columnAdd",get:function(){return this.form.get("column")}}]),e}()).\u0275fac=function(e){return new(e||at)(j.Rb(O.d),j.Rb(i.a),j.Rb(j.h),j.Rb(z.a),j.Rb(re))},at.\u0275cmp=j.Lb({type:at,selectors:[["container-import-content"]],viewQuery:function(e,t){var n;1&e&&j.Sc(Xe.e,!0),2&e&&j.wc(n=j.gc())&&(t.viewPort=n.first)},inputs:{data:"data",columnType:"columnType",dateType:"dateType"},outputs:{changeCheckColumn:"changeCheckColumn"},features:[j.Bb()],decls:2,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],["fxLayout","column",3,"formGroup","height",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],["fxLayout","column",3,"formGroup"],[1,"h-100-p",3,"itemSize"],[1,"simple","table-sheet"],["formArrayName","column"],[1,"w-80"],[3,"checked","indeterminate","change"],["style","border-bottom: 1px solid",3,"formGroupName",4,"ngFor","ngForOf"],["class","border-bottom",4,"ngFor","ngForOf"],[4,"cdkVirtualFor","cdkVirtualForOf"],[2,"border-bottom","1px solid",3,"formGroupName"],[1,"pr-8"],[1,"w-80-p","my-form-field",2,"min-width","40px","max-width","120px"],[1,"font-size-12",3,"formControlName"],["value","",1,"font-size-12"],["class","font-size-12",3,"value","disabled",4,"ngFor","ngForOf"],[1,"font-size-12",3,"value","disabled"],[1,"border-bottom"],[4,"ngIf"],["class","cursor-pointer",3,"matMenuTriggerFor","click",4,"ngIf"],["dateMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["color","warn",4,"ngIf"],["color","accent",4,"ngIf"],[1,"cursor-pointer",3,"matMenuTriggerFor","click"],["mat-menu-item","","aria-label","remove",3,"click"],["color","accent"],["color","warn"],[1,"w-80","border-right"],[3,"checked","click","change"],["style","max-width: 200px",3,"ngClass",4,"ngFor","ngForOf"],[2,"max-width","200px",3,"ngClass"]],template:function(e,t){1&e&&(j.Jc(0,De,3,0,"div",0),j.Jc(1,it,14,9,"form",1)),2&e&&(j.pc("ngIf",0==t.data.length),j.Db(1),j.pc("ngIf",t.data.length>0))},directives:[J.t,B.d,B.c,B.e,O.A,O.q,O.h,Xe.e,Xe.a,O.c,y.a,J.s,Xe.d,O.i,u.c,f.a,O.p,O.g,_.n,r.d,r.a,r.c,b.a,J.q,be.a],styles:["container-import-content .no-messages-text{font-size:24px;font-weight:300}container-import-content .table-sheet{font-size:12px}container-import-content .table-sheet .border-bottom{border-bottom:1px solid!important}container-import-content .table-sheet .border-right{border-right:1px solid}container-import-content .table-sheet .border-left{border-left:1px solid}container-import-content .table-sheet th{padding:8px!important;white-space:nowrap}container-import-content .table-sheet th .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}container-import-content .table-sheet th .my-form-field .mat-form-field-infix{border-top:none}container-import-content .table-sheet td{padding:8px!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}container-import-content .table-sheet thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-import-content .table-sheet tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}container-import-content .table-sheet .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}container-import-content .table-sheet .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}container-import-content .table-sheet .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}container-import-content .table-sheet .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2,data:{animation:R.a}}),at);function ot(e,t){1&e&&(j.Xb(0,"div",3),j.Xb(1,"span",4),j.Lc(2,"No data"),j.Wb(),j.Wb())}function ct(e,t){if(1&e){var n=j.Yb();j.Xb(0,"mat-icon",12),j.fc("click",(function(e){j.Bc(n);var t=j.jc(),i=t.index,a=t.$implicit,r=j.jc(2);return e.stopPropagation(),r.editMovement([i,a])})),j.Lc(1,"edit"),j.Wb()}}function st(e,t){if(1&e){var n=j.Yb();j.Xb(0,"mat-icon",13),j.fc("click",(function(e){j.Bc(n);var t=j.jc().$implicit,i=j.jc(2);return e.stopPropagation(),i.deleteItem(t)})),j.Lc(1,"delete"),j.Wb()}}var lt=function(e,t){return{"red-100-bg":e,"green-200-bg":t}};function ut(e,t){if(1&e){var n=j.Yb();j.Xb(0,"tr",7),j.Xb(1,"td"),j.Xb(2,"button",8),j.fc("click",(function(e){j.Bc(n);var i=t.index,a=j.jc(2);return e.stopPropagation(),a.createMovement.emit(i)})),j.Xb(3,"mat-icon"),j.Lc(4,"save"),j.Wb(),j.Wb(),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.Wb(),j.Xb(7,"td"),j.Lc(8),j.Wb(),j.Xb(9,"td"),j.Lc(10),j.kc(11,"date"),j.Wb(),j.Xb(12,"td"),j.Lc(13),j.Wb(),j.Xb(14,"td"),j.Lc(15),j.Wb(),j.Xb(16,"td"),j.Lc(17),j.Wb(),j.Xb(18,"td"),j.Lc(19),j.Wb(),j.Xb(20,"td"),j.Lc(21),j.Wb(),j.Xb(22,"td"),j.Lc(23),j.Wb(),j.Xb(24,"td",9),j.Jc(25,ct,2,0,"mat-icon",10),j.Jc(26,st,2,0,"mat-icon",11),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit,a=j.jc(2);j.pc("ngClass",j.sc(16,lt,i.error.includes("error"),i.error.includes("success"))),j.Db(2),j.pc("disabled",""!=i.error),j.Db(4),j.Mc(null==i.container?null:i.container.cont_number),j.Db(2),j.Mc(null==i.move?null:i.move.code),j.Db(2),j.Mc(j.mc(11,13,i.date,"MM/dd/yyyy")),j.Db(3),j.Mc(i.time),j.Db(2),j.Mc(null==i.voyage?null:i.voyage.vessel_name),j.Db(2),j.Mc(null==i.place?null:i.place.short_name),j.Db(2),j.Mc(i.document),j.Db(2),j.Mc(i.info),j.Db(2),j.Mc(i.error),j.Db(2),j.pc("ngIf",""!=i.error&&!i.duplicate&&"FULIM"==i.move.code&&i.load&&a.permission.edit),j.Db(1),j.pc("ngIf",!i.id&&a.permission.edit)}}function bt(e,t){if(1&e&&(j.Xb(0,"table",5),j.Xb(1,"thead"),j.Xb(2,"tr"),j.Sb(3,"th"),j.Xb(4,"th"),j.Lc(5,"Cont number"),j.Wb(),j.Xb(6,"th"),j.Lc(7,"Move"),j.Wb(),j.Xb(8,"th"),j.Lc(9,"Date"),j.Wb(),j.Xb(10,"th"),j.Lc(11,"Time"),j.Wb(),j.Xb(12,"th"),j.Lc(13,"Voyage"),j.Wb(),j.Xb(14,"th"),j.Lc(15,"Place"),j.Wb(),j.Xb(16,"th"),j.Lc(17,"Document"),j.Wb(),j.Xb(18,"th"),j.Lc(19,"Info"),j.Wb(),j.Xb(20,"th"),j.Lc(21,"Error"),j.Wb(),j.Sb(22,"th"),j.Wb(),j.Wb(),j.Xb(23,"tbody"),j.Jc(24,ut,27,19,"tr",6),j.Wb(),j.Wb()),2&e){var n=j.jc();j.Db(24),j.pc("ngForOf",n.data)}}var mt,pt=function(){return{value:"50"}},dt=((mt=function(){function e(t,n,i,a,r){_classCallCheck(this,e),this.formBuilder=t,this._activatedRoute=n,this.changeDetector=i,this.authService=a,this.containerImportService=r,this.editMovement=new j.o,this.createMovement=new j.o,this.check=!1,this.height=560,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-54-8})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-54-8:e.authService.screenHeight-64-12-12-54-8})),this.name=this.authService.name,console.log(this.data)}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"ngOnChanges",value:function(e){var t=this;e.data&&e.data.currentValue&&(this.data=e.data.currentValue,this.check=!1,this.data.map((function(e,n){(e.error||e.duplicate)&&(t.check=!0)})))}},{key:"deleteItem",value:function(e){var t=this,n=this.data.indexOf(e);this.data.splice(n,1),this.check=!1,this.data.map((function(e,n){(e.error||e.duplicate)&&(t.check=!0)}))}},{key:"saveData",value:function(){this.createMovement.emit(this.data)}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedImportOffset?"-".concat(this.viewPort._renderedImportOffset,"px"):"-0px"}}]),e}()).\u0275fac=function(e){return new(e||mt)(j.Rb(O.d),j.Rb(i.a),j.Rb(j.h),j.Rb(z.a),j.Rb(re))},mt.\u0275cmp=j.Lb({type:mt,selectors:[["container-import-table"]],viewQuery:function(e,t){var n;1&e&&j.Sc(Xe.e,!0),2&e&&j.wc(n=j.gc())&&(t.viewPort=n.first)},inputs:{data:"data",container:"container",supplier:"supplier",permission:"permission"},outputs:{editMovement:"editMovement",createMovement:"createMovement"},features:[j.Bb()],decls:3,vars:6,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],[1,"w-100-p","table-content"],["class","simple container-list-table",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],[1,"simple","container-list-table"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["mat-icon-button","","color","accent",3,"disabled","click"],[1,"w-80","p-0","text-right"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(j.Jc(0,ot,3,0,"div",0),j.Xb(1,"div",1),j.Jc(2,bt,25,1,"table",2),j.Wb()),2&e&&(j.pc("ngIf",0==t.data.length),j.Db(1),j.Ic("height",t.height,"px"),j.pc("@animateStagger",j.qc(5,pt)),j.Db(1),j.pc("ngIf",t.data.length>0))},directives:[J.t,B.d,B.c,B.e,J.s,J.q,be.a,s.b,b.a],pipes:[J.f],styles:["container-import-table .no-messages-text{font-size:24px;font-weight:300}container-import-table .table-content{overflow:auto}container-import-table .table-content .container-list-table{width:100%}container-import-table .table-content .container-list-table td,container-import-table .table-content .container-list-table th{padding:8px;font-size:12px}container-import-table .table-content .container-list-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-import-table .table-content .container-list-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}container-import-table .table-content .container-list-table tr:hover{background:#e1f5fe}container-import-table .table-content .container-list-table tr:active{background:#81d4fa}"],encapsulation:2,data:{animation:R.a}}),mt);function ft(e,t){1&e&&(j.Xb(0,"div",3),j.Xb(1,"span",4),j.Lc(2,"No data"),j.Wb(),j.Wb())}function ht(e,t){if(1&e){var n=j.Yb();j.Xb(0,"tr"),j.Xb(1,"td"),j.Lc(2),j.Wb(),j.Xb(3,"td"),j.Lc(4),j.Wb(),j.Xb(5,"td"),j.Lc(6),j.Wb(),j.Xb(7,"td"),j.Lc(8),j.kc(9,"date"),j.Wb(),j.Xb(10,"td"),j.Lc(11),j.Wb(),j.Xb(12,"td"),j.Lc(13),j.Wb(),j.Xb(14,"td"),j.Lc(15),j.Wb(),j.Xb(16,"td"),j.Lc(17),j.Wb(),j.Xb(18,"td"),j.Lc(19),j.Wb(),j.Xb(20,"td",7),j.Xb(21,"mat-icon",8),j.fc("click",(function(e){j.Bc(n);var i=t.index,a=t.$implicit,r=j.jc(2);return e.stopPropagation(),r.deleteMovement.emit([i,a])})),j.Lc(22,"delete"),j.Wb(),j.Wb(),j.Wb()}if(2&e){var i=t.$implicit,a=t.index;j.Db(2),j.Mc(a+1),j.Db(2),j.Mc(null==i.container?null:i.container.cont_number),j.Db(2),j.Mc(null==i.move?null:i.move.code),j.Db(2),j.Mc(j.mc(9,9,i.date,"MM/dd/yyyy")),j.Db(3),j.Mc(i.time),j.Db(2),j.Mc(null==i.voyage?null:i.voyage.vessel_name),j.Db(2),j.Mc(null==i.place?null:i.place.short_name),j.Db(2),j.Mc(i.document),j.Db(2),j.Mc(i.info)}}function gt(e,t){if(1&e&&(j.Xb(0,"table",5),j.Xb(1,"thead"),j.Xb(2,"tr"),j.Sb(3,"th"),j.Xb(4,"th"),j.Lc(5,"Cont number"),j.Wb(),j.Xb(6,"th"),j.Lc(7,"Move"),j.Wb(),j.Xb(8,"th"),j.Lc(9,"Date"),j.Wb(),j.Xb(10,"th"),j.Lc(11,"Time"),j.Wb(),j.Xb(12,"th"),j.Lc(13,"Voyage"),j.Wb(),j.Xb(14,"th"),j.Lc(15,"Place"),j.Wb(),j.Xb(16,"th"),j.Lc(17,"Document"),j.Wb(),j.Xb(18,"th"),j.Lc(19,"Info"),j.Wb(),j.Sb(20,"th"),j.Wb(),j.Wb(),j.Xb(21,"tbody"),j.Jc(22,ht,23,12,"tr",6),j.Wb(),j.Wb()),2&e){var n=j.jc();j.Db(22),j.pc("ngForOf",n.data)}}var vt,yt=function(){return{value:"50"}},xt=((vt=function(){function e(t,n,i,a){_classCallCheck(this,e),this.formBuilder=t,this._activatedRoute=n,this.changeDetector=i,this.authService=a,this.deleteMovement=new j.o,this.height=560,this._unsubscribeAll=new A.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-54-8})),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-54-8:e.authService.screenHeight-64-12-12-54-8}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"ngOnChanges",value:function(e){e.data&&e.data.currentValue&&(this.data=e.data.currentValue)}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedImportOffset?"-".concat(this.viewPort._renderedImportOffset,"px"):"-0px"}}]),e}()).\u0275fac=function(e){return new(e||vt)(j.Rb(O.d),j.Rb(i.a),j.Rb(j.h),j.Rb(z.a))},vt.\u0275cmp=j.Lb({type:vt,selectors:[["container-import-created"]],viewQuery:function(e,t){var n;1&e&&j.Sc(Xe.e,!0),2&e&&j.wc(n=j.gc())&&(t.viewPort=n.first)},inputs:{data:"data"},outputs:{deleteMovement:"deleteMovement"},features:[j.Bb()],decls:3,vars:6,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],[1,"w-100-p","table-content"],["class","simple container-list-created",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],[1,"simple","container-list-created"],[4,"ngFor","ngForOf"],[1,"w-80","p-0","text-right"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(j.Jc(0,ft,3,0,"div",0),j.Xb(1,"div",1),j.Jc(2,gt,23,1,"table",2),j.Wb()),2&e&&(j.pc("ngIf",0==t.data.length),j.Db(1),j.Ic("height",t.height,"px"),j.pc("@animateStagger",j.qc(5,yt)),j.Db(1),j.pc("ngIf",t.data.length>0))},directives:[J.t,B.d,B.c,B.e,J.s,b.a],pipes:[J.f],styles:["container-import-created .no-messages-text{font-size:24px;font-weight:300}container-import-created .table-content{overflow:auto}container-import-created .table-content .container-list-created{width:100%}container-import-created .table-content .container-list-created td,container-import-created .table-content .container-list-created th{padding:8px;font-size:12px}container-import-created .table-content .container-list-created thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-import-created .table-content .container-list-created tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}container-import-created .table-content .container-list-created tr:hover{background:#e1f5fe}container-import-created .table-content .container-list-created tr:active{background:#81d4fa}"],encapsulation:2,data:{animation:R.a}}),vt);function kt(e,t){if(1&e){var n=j.Yb();j.Xb(0,"fuse-sidebar",12),j.Xb(1,"container-import-sidebar",13),j.fc("buildData",(function(e){return j.Bc(n),j.jc().buildData(e)})),j.Wb(),j.Wb()}if(2&e){var i=j.jc();j.Db(1),j.pc("place",i.place)("voyage",i.voyage)("checkColumn",i.checkColumn)}}function wt(e,t){if(1&e){var n=j.Yb();j.Xb(0,"container-import-content",14),j.fc("changeCheckColumn",(function(e){return j.Bc(n),j.jc().changeCheckColumn(e)})),j.Wb()}if(2&e){var i=j.jc();j.pc("data",i.data)("columnType",i.columnType)("dateType",i.dateType)}}function St(e,t){if(1&e){var n=j.Yb();j.Xb(0,"container-import-table",15),j.fc("createMovement",(function(e){return j.Bc(n),j.jc().createMovement(e)}))("editMovement",(function(e){return j.Bc(n),j.jc().editMovement(e)})),j.Wb()}if(2&e){var i=j.jc();j.pc("data",i.dataView)("container",i.container)("supplier",i.supplier)("permission",i.permission)}}function Ct(e,t){if(1&e){var n=j.Yb();j.Xb(0,"container-import-created",16),j.fc("deleteMovement",(function(e){return j.Bc(n),j.jc().deleteMovement(e)})),j.Wb()}if(2&e){var i=j.jc();j.pc("data",i.dataCreated)}}var _t,Wt=((_t=function(){function e(t,n,i,a,r,o,c){_classCallCheck(this,e),this._fuseSidebarService=t,this._matDialog=n,this.datePipe=i,this.containerImportService=a,this.googleApiService=r,this.router=o,this.authService=c,this.type="sheet",this.company="SEL",this.checkColumn=!1,this.data=[],this.dataView=[],this.dataCreated=[],this.sidebarPanel=!0,this.searchInput=new O.e(""),this._unsubscribeAll=new A.a,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.containerImportService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.container=e.containerImportService.container,e.supplier=e.containerImportService.supplierPort,e.place=e.containerImportService.place,e.columnType=e.containerImportService.columnType,e.dateType=e.containerImportService.dateType})),this.containerImportService.onVoyageChanged.subscribe((function(t){e.voyage=t})),this.googleApiService.onFileChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe((function(t){e.data=_toConsumableArray(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.containerImportService)}},{key:"newContainer",value:function(e){this.router.navigate(["/apps/container/container-import/form/0"])}},{key:"changeType",value:function(e){this.type=e}},{key:"changeCheckColumn",value:function(e){this.checkColumn=e}},{key:"buildData",value:function(e){this.containerImportService.placeForm=e,this.dataView=this.containerImportService.createData(),this.type="import"}},{key:"createMovement",value:function(e){var t=this,n=this.dataView[e],i={movement:{container:n.container.id,place:n.place.id,move:n.move.id,date:this.datePipe.transform(n.date,"yyyy-MM-dd")+" "+n.time,document:n.document?n.document:null,update_by:this.authService.user},voyage:n.voyage,vesselLoad:n.load?n.load.vessel_load_id:null};"LOAD"==n.move.code?this.containerImportService.createMovementLoad(i).then((function(n){t.authService.onRequestChanged.next(!1),console.log(n),n.insertId>0?(t.dataView[e].id=n.insertId,t.dataView[e].error="Save success!",t.updateMovement(t.dataView[e])):t.dataView[e].error="Save error!"})).catch((function(n){t.authService.onRequestChanged.next(!1),t.dataView[e].error="Save error!",alert("ERROR"),console.error(n)})):"FULIM"==n.move.code&&i.vesselLoad?this.containerImportService.createMovementFulim(i).then((function(n){t.authService.onRequestChanged.next(!1),n.insertId>0?(t.dataView[e].id=n.insertId,t.dataView[e].error="Save success!",t.updateMovement(t.dataView[e])):t.dataView[e].error="Save error!"})).catch((function(n){t.authService.onRequestChanged.next(!1),t.dataView[e].error="Save error!",alert("ERROR"),console.error(n)})):alert("error load container")}},{key:"editMovement",value:function(e){var t=this,n=e[0];this.dialogRef=this._matDialog.open(ee,{panelClass:"container-import-modal-dialog",data:{label:"Edit",movement:e[1],container:this.container,place:this.supplier}}),this.dialogRef.afterClosed().subscribe((function(e){e&&(t.dataView[n]=e,t.dataView=_toConsumableArray(t.dataView))}))}},{key:"updateMovement",value:function(e){var t=e.container.cont_number+"-"+e.move.code+"-"+this.datePipe.transform(e.date,"M/d/yyyy");this.containerImportService.movementInfo[t]=e,"LOAD"==e.move.code&&(this.containerImportService.movementLoadInfo[e.container.cont_number+"-"+e.move.code+"-"+e.voyage.Vid]=e),this.dataCreated.push(e)}},{key:"deleteMovement",value:function(e){var t=this,n=e[0],i=e[1];confirm("Do you want to delete this movement?")&&(this.authService.onRequestChanged.next(!0),"FULIM"!=i.move.code?this.containerImportService.deleteMovement(i.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.updateMovementCreated(n,i):(alert("ERROR"),console.error(e))})).catch((function(e){t.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)})):this.containerImportService.deleteMovementFulim(i.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.updateMovementCreated(n,i):(alert("ERROR"),console.error(e))})).catch((function(e){t.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)})))}},{key:"updateMovementCreated",value:function(e,t){var n=t.container.cont_number+"-"+t.move.code+"-"+this.datePipe.transform(t.date,"M/d/yyyy");delete this.containerImportService.movementInfo[n],"LOAD"==t.move.code&&delete this.containerImportService.movementLoadInfo[t.container.cont_number+"-"+t.move.code+"-"+t.voyage.Vid],this.dataCreated.splice(e,1),0==this.dataCreated.length&&(this.type="sheet")}}]),e}()).\u0275fac=function(e){return new(e||_t)(j.Rb(te.a),j.Rb(g.b),j.Rb(J.f),j.Rb(re),j.Rb(oe.a),j.Rb(i.g),j.Rb(z.a))},_t.\u0275cmp=j.Lb({type:_t,selectors:[["container-import"]],decls:12,vars:7,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-import-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-import-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"type","sidebarName","showHideBar","refreshPage","toggleSidebar","newContainer","changeType"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[3,"data","columnType","dateType","changeCheckColumn",4,"ngIf"],[3,"data","container","supplier","permission","createMovement","editMovement",4,"ngIf"],[3,"data","deleteMovement",4,"ngIf"],["name","container-import-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"place","voyage","checkColumn","buildData"],[3,"data","columnType","dateType","changeCheckColumn"],[3,"data","container","supplier","permission","createMovement","editMovement"],[3,"data","deleteMovement"]],template:function(e,t){1&e&&(j.Xb(0,"div",0),j.Jc(1,kt,2,3,"fuse-sidebar",1),j.Xb(2,"fuse-sidebar",2),j.Xb(3,"div",3),j.Sb(4,"container-import-setting",4),j.Wb(),j.Wb(),j.Xb(5,"div",5),j.Xb(6,"container-import-header",6),j.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newContainer",(function(e){return t.newContainer(e)}))("changeType",(function(e){return t.changeType(e)})),j.Wb(),j.Xb(7,"div",7),j.Xb(8,"div",8),j.Jc(9,wt,1,3,"container-import-content",9),j.Jc(10,St,1,4,"container-import-table",10),j.Jc(11,Ct,1,1,"container-import-created",11),j.Wb(),j.Wb(),j.Wb(),j.Wb()),2&e&&(j.Db(1),j.pc("ngIf",t.sidebarPanel),j.Db(3),j.pc("displayObject",t.displayObject),j.Db(2),j.pc("type",t.type)("sidebarName","container-import-sidebar"),j.Db(3),j.pc("ngIf","sheet"==t.type),j.Db(1),j.pc("ngIf","import"==t.type),j.Db(1),j.pc("ngIf","created"==t.type))},directives:[ce.a,J.t,se.a,le,ye,B.a,We,rt,dt,xt],styles:["container-import{width:100%}container-import .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-import .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-import .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-import .center .content-card container-import{border-right:0}container-import .center .content-card container-import,container-import .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-import .center .content-card shipment-details{display:none!important}container-import .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-import .center .content-card.current-shipment-selected .content container-import,container-import .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-import .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:R.a}}),_t),Xt=n("cfqv");n.d(t,"ContainerImportModule",(function(){return It}));var Dt,Lt=[{path:"",component:Wt,resolve:{data:re,google:oe.a}}],It=((Dt=function e(){_classCallCheck(this,e)}).\u0275mod=j.Pb({type:Dt}),Dt.\u0275inj=j.Ob({factory:function(e){return new(e||Dt)},providers:[re],imports:[[i.k.forChild(Lt),r.b,a.a,o.b,c.c,s.c,l.b,u.e,b.b,m.b,p.c,d.c,f.b,h.c,g.e,v.b,y.b,x.b,k.d,w.e,S.b,C.b,W.b,X.k,D.c,_.t,L.a,I.a,F.f,Xe.g,Xt.b]]}),Dt)},IOBc:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("5HBU"),a=n("bTqV"),r=n("kmnG"),o=n("NFeN"),c=n("qFsG"),s=n("wZkO"),l=n("/t3+"),u=n("bSwM"),b=n("+0xr"),m=n("FKr1"),p=n("MutI"),d=n("fXoL"),f=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},imports:[[i.a,a.c,r.e,o.b,c.c,s.c,l.b,u.b,m.t,p.c,b.k]]}),e}()},cfqv:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var i=n("8LU1"),a=n("vxfF"),r=n("fXoL"),o=n("HDdC"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;_classCallCheck(this,e),this._totalWeight=0,this._defaultItemSize=t,this._averageItemSize=t}return _createClass(e,[{key:"getAverageItemSize",value:function(){return this._averageItemSize}},{key:"addSample",value:function(e,t){var n=this._totalWeight+e.end-e.start;if(n){var i=(t+this._averageItemSize*this._totalWeight)/n;i&&(this._averageItemSize=i,this._totalWeight=n)}}},{key:"reset",value:function(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}]),e}(),s=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c;_classCallCheck(this,e),this.scrolledIndexChange=new o.a((function(){throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")})),this._viewport=null,this._removalFailures=0,this._minBufferPx=t,this._maxBufferPx=n,this._averager=i}return _createClass(e,[{key:"attach",value:function(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}},{key:"detach",value:function(){this._viewport=null}},{key:"onContentScrolled",value:function(){this._viewport&&this._updateRenderedContentAfterScroll()}},{key:"onDataLengthChanged",value:function(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}},{key:"onContentRendered",value:function(){this._viewport&&this._checkRenderedContentSize()}},{key:"onRenderedOffsetChanged",value:function(){this._viewport&&this._checkRenderedContentOffset()}},{key:"scrollToIndex",value:function(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}},{key:"updateBufferSize",value:function(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}},{key:"_updateRenderedContentAfterScroll",value:function(){var e=this._viewport,t=e.measureScrollOffset(),n=t-this._lastScrollOffset,i=Math.abs(n),a=e.getRenderedRange(),r=0;if(n<0){var o=a.start*this._averager.getAverageItemSize();n-=r=Math.round((o-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,i/(t+i)))),i=Math.abs(n)}var c=this._lastScrollOffset-this._lastRenderedContentOffset,s=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),l=i+this._minBufferPx-(n<0?c:s);if(l>0)if(i>=e.getViewportSize())this._renderContentForCurrentOffset();else{var u,b,m=Math.max(0,Math.ceil((l-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),p=(n<0?s:c)-this._minBufferPx+i,d=Math.floor(p/this._averager.getAverageItemSize()/(this._removalFailures+1)),f=Math.min(a.end-a.start,Math.max(0,d)),h=this._expandRange(a,n<0?m:0,n>0?m:0);if(n<0?h.end=Math.max(h.start+1,h.end-f):h.start=Math.min(h.end-1,h.start+f),n<0){var g=e.measureRangeSize({start:h.end,end:a.end});g<=p?(u=this._lastRenderedContentOffset+this._lastRenderedContentSize-g,this._removalFailures=0):(h.end=a.end,u=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),b="to-end"}else{var v=e.measureRangeSize({start:a.start,end:h.start});v<=p?(u=this._lastRenderedContentOffset+v,this._removalFailures=0):(h.start=a.start,u=this._lastRenderedContentOffset,this._removalFailures++),b="to-start"}e.setRenderedRange(h),e.setRenderedContentOffset(u+r,b)}else r&&e.setRenderedContentOffset(this._lastRenderedContentOffset+r);this._lastScrollOffset=t}},{key:"_checkRenderedContentSize",value:function(){var e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}},{key:"_checkRenderedContentOffset",value:function(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}},{key:"_renderContentForCurrentOffset",value:function(){var e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;var n=this._averager.getAverageItemSize(),i=Math.min(e.getDataLength()-1,Math.floor(t/n)),a=Math.ceil(this._maxBufferPx/n),r=this._expandRange(this._getVisibleRangeForIndex(i),a,a);e.setRenderedRange(r),e.setRenderedContentOffset(n*r.start)}},{key:"_getVisibleRangeForIndex",value:function(e){var t=this._viewport,n={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},i=n.end-t.getDataLength();return i>0&&(n.start=Math.max(0,n.start-i)),n}},{key:"_expandRange",value:function(e,t,n){var i=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(i.getDataLength(),e.end+n)}}},{key:"_updateTotalContentSize",value:function(e){var t=this._viewport,n=t.getRenderedRange(),i=e+(t.getDataLength()-(n.end-n.start))*this._averager.getAverageItemSize();t.setTotalContentSize(i)}}]),e}();function l(e){return e._scrollStrategy}var u=function(){var e=function(){function e(){_classCallCheck(this,e),this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new s(this.minBufferPx,this.maxBufferPx)}return _createClass(e,[{key:"ngOnChanges",value:function(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=Object(i.f)(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=Object(i.f)(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.Cb([{provide:a.h,useFactory:l,deps:[Object(r.V)((function(){return e}))]}]),r.Bb()]}),e}(),b=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)}}),e}()}}]);