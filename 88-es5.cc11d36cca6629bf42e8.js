function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],a=!0,n=!1,r=void 0;try{for(var c,o=e[Symbol.iterator]();!(a=(c=o.next()).done)&&(i.push(c.value),!t||i.length!==t);a=!0);}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"8IR7":function(e,t,i){"use strict";i.r(t);var a,n,r=i("tyNb"),c=i("5HBU"),o=i("STbY"),l=i("/1cH"),s=i("iadO"),u=i("bTqV"),b=i("7EHt"),d=i("kmnG"),f=i("NFeN"),p=i("Qu3c"),h=i("qFsG"),m=i("wZkO"),g=i("d3UM"),v=i("QibW"),y=i("0IaG"),x=i("/t3+"),k=i("bSwM"),S=i("M9IT"),w=i("xHqg"),_=i("A5z7"),W=i("bv9b"),X=i("XhcP"),C=i("FKr1"),D=i("1jcm"),L=i("+0xr"),P=i("Dh3D"),R=i("IOBc"),O=i("212X"),A=i("LPQX"),F=i("XNiG"),I=i("1G5W"),q=i("PVWW"),M=i("fXoL"),j=i("HX77"),z=i("2Vo4"),E=i("tk/3"),B=i("qXBG"),V=((a=function(){function e(t,i){_classCallCheck(this,e),this._httpClient=t,this.authService=i,this.onFclChanged=new z.a([]),this.onVoyageChanged=new z.a([]),this.onDataChanged=new z.a([]),this.onDataItemChanged=new z.a([])}return _createClass(e,[{key:"resolve",value:function(e){var t=this;this.authService.routerData=e;var i=e.params.id;return new Promise((function(e,a){Promise.all([t.getFclById(i),t.getData(),t.getDataItem()]).then((function(t){_slicedToArray(t,1)[0],e()}),a)}))}},{key:"getFclById",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.get(t.authService.apiUrl+"/sel/fcl/id/"+e,i).subscribe((function(e){t.fcl=e[0],t.onFclChanged.next(e),a(e)}),n)}))}},{key:"getVoyage",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.post(t.authService.apiUrl+"/sel/fcl/voyage/",e,i).subscribe((function(i){console.log(t.voyage),console.log(e),t.voyage=i,t.onVoyageChanged.next(i),a(i)}),n)}))}},{key:"getData",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,a){e._httpClient.get(e.authService.apiUrl+"/sel/fcl/data",t).subscribe((function(t){e.seaport=t[0],e.country=t[1],e.supplier=t[2],e.priceUnit=t[3],e.onDataChanged.next(t),i(t)}),a)}))}},{key:"getDataItem",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,a){e._httpClient.get(e.authService.apiUrl+"/sel/fcl/item-data",t).subscribe((function(t){e.price=t[0],e.unit=t[1],e.currency=t[2],e.country=t[3],e.user=t[4],e.onDataItemChanged.next(t),i(t)}),a)}))}},{key:"updateFcl",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.put(t.authService.apiUrl+"/fcl",e,i).subscribe((function(e){a(e)}),n)}))}},{key:"createFclPrice",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.post(t.authService.apiUrl+"/sel/fcl/price",e,i).subscribe((function(e){a(e)}),n)}))}},{key:"updateFclPrice",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.put(t.authService.apiUrl+"/sel/fcl/price",e,i).subscribe((function(e){a(e)}),n)}))}},{key:"deleteFclPrice",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.delete(t.authService.apiUrl+"/sel/fcl/price/"+e,i).subscribe((function(e){a(e)}),n)}))}},{key:"deleteAllFclVoyageList",value:function(e,t){var i=this,a={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){i._httpClient.delete(i.authService.apiUrl+"/voyage-list/all/"+e+"/"+t,a).subscribe((function(e){n(e)}),r)}))}},{key:"createMultipleVoyageList",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.post(t.authService.apiUrl+"/voyage-list/multiple",e,i).subscribe((function(e){a(e)}),n)}))}},{key:"createVoyageList",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.post(t.authService.apiUrl+"/voyage-list",e,i).subscribe((function(e){a(e)}),n)}))}},{key:"deleteFclVoyageList",value:function(e){var t=this,i={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){t._httpClient.delete(t.authService.apiUrl+"/voyage-list/id/"+e,i).subscribe((function(e){a(e)}),n)}))}}]),e}()).\u0275fac=function(e){return new(e||a)(M.bc(E.a),M.bc(B.a))},a.\u0275prov=M.Nb({token:a,factory:a.\u0275fac}),a),T=i("ofXK"),N=i("B9zo"),H=i("fE3o"),J=i("3Pt+"),U=i("XiUz"),G=i("EwFO"),$=((n=function(){function e(t,i){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this.height=560,this.changeSetting=new M.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new F.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"initForm",value:function(){return this.formBuilder.group({column:this.formBuilder.array([])})}},{key:"addColumn",value:function(e){var t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}},{key:"checkAll",value:function(){var e=this;this.displayedColumns.map((function(t,i){e.form.controls.column.controls[i].controls[t].setValue(!0)}))}},{key:"toggleCardCover",value:function(){}},{key:"toggleSubscription",value:function(){}},{key:"columnAdd",get:function(){return this.form.get("column")}}]),e}()).\u0275fac=function(e){return new(e||n)(M.Rb(J.d),M.Rb(B.a))},n.\u0275cmp=M.Lb({type:n,selectors:[["fcl-details-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"div",2),M.Xb(3,"div"),M.Lc(4,"Settings"),M.Wb(),M.Wb(),M.Wb(),M.Xb(5,"div",3),M.Xb(6,"form",4),M.Xb(7,"div",5),M.Xb(8,"h2"),M.Lc(9,"Column"),M.Wb(),M.Xb(10,"div",6),M.Xb(11,"button",7),M.fc("click",(function(e){return t.checkAll()})),M.Lc(12,"All column"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(5),M.Ic("height",t.height,"px"),M.Db(1),M.pc("formGroup",t.form))},directives:[U.d,U.c,G.a,J.A,J.q,J.h,u.b],styles:["fcl-details-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}fcl-details-setting .navbar-scroll-container{background:#fff!important}fcl-details-setting .navbar-scroll-container .navbar-content{padding-top:0}fcl-details-setting .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}fcl-details-setting .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}fcl-details-setting .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:q.a}}),n),Y=i("pLZG"),K=i("0JVi"),Q=i("znSr");function Z(e,t){if(1&e){var i=M.Yb();M.Xb(0,"button",11),M.fc("click",(function(e){M.Bc(i);var t=M.jc();return e.stopPropagation(),t.changeScreen(!0)})),M.Xb(1,"mat-icon"),M.Lc(2,"flip_to_front"),M.Wb(),M.Wb()}}function ee(e,t){if(1&e){var i=M.Yb();M.Xb(0,"button",11),M.fc("click",(function(e){M.Bc(i);var t=M.jc();return e.stopPropagation(),t.changeScreen(!1)})),M.Xb(1,"mat-icon"),M.Lc(2,"flip_to_back"),M.Wb(),M.Wb()}}var te,ie=function(e){return{"accent-600-fg":e}},ae=((te=function(){function e(t,i,a,n){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=i,this.router=a,this.route=n,this.url="voyage",this.fullScreen=!1,this.toggleSidebar=new M.o,this.showHideBar=new M.o,this.refreshPage=new M.o,this._unsubscribeAll=new F.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.router.events.pipe(Object(Y.a)((function(e){return e instanceof r.c}))).subscribe((function(t){var i=t.url.split("/");e.url=i[6]}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||te)(M.Rb(B.a),M.Rb(K.b),M.Rb(r.g),M.Rb(r.a))},te.\u0275cmp=M.Lb({type:te,selectors:[["fcl-details-header"]],inputs:{fcl:"fcl",sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:33,vars:16,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm","",3,"ngClass"],["fxShow","","fxHide.gt-sm","",3,"ngClass"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(M.Xb(0,"mat-toolbar",0),M.Xb(1,"div",1),M.Xb(2,"div",2),M.Xb(3,"div",3),M.Xb(4,"button",4),M.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),M.Xb(5,"mat-icon"),M.Lc(6,"menu"),M.Wb(),M.Wb(),M.Xb(7,"button",5),M.fc("click",(function(e){return t.showHideBar.emit()})),M.Xb(8,"mat-icon"),M.Lc(9,"menu"),M.Wb(),M.Wb(),M.Wb(),M.Xb(10,"button",6),M.Xb(11,"span",7),M.Lc(12,"Voyage"),M.Wb(),M.Xb(13,"mat-icon",8),M.Lc(14,"dashboard"),M.Wb(),M.Wb(),M.Xb(15,"button",6),M.Xb(16,"span",7),M.Lc(17,"Price"),M.Wb(),M.Xb(18,"mat-icon",8),M.Lc(19,"equalizer"),M.Wb(),M.Wb(),M.Wb(),M.Xb(20,"div",9),M.Sb(21,"div",10),M.Xb(22,"button",11),M.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),M.Xb(23,"mat-icon",12),M.Lc(24,"refresh"),M.Wb(),M.Wb(),M.Sb(25,"div",10),M.Jc(26,Z,3,0,"button",13),M.Jc(27,ee,3,0,"button",13),M.Sb(28,"div",10),M.Xb(29,"button",11),M.fc("click",(function(e){return t.toggleSidebar.emit("fcl-details-setting")})),M.Xb(30,"mat-icon"),M.Lc(31,"settings"),M.Wb(),M.Wb(),M.Sb(32,"div",10),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(10),M.pc("routerLink","/apps/vessel/fcl/fcl-details/"+t.fcl.id+"/voyage"),M.Db(1),M.pc("ngClass",M.rc(8,ie,"voyage"==t.url)),M.Db(2),M.pc("ngClass",M.rc(10,ie,"voyage"==t.url)),M.Db(2),M.pc("routerLink","/apps/vessel/fcl/fcl-details/"+t.fcl.id+"/price"),M.Db(1),M.pc("ngClass",M.rc(12,ie,"price"==t.url)),M.Db(2),M.pc("ngClass",M.rc(14,ie,"price"==t.url)),M.Db(8),M.pc("ngIf",!t.fullScreen),M.Db(1),M.pc("ngIf",t.fullScreen))},directives:[x.a,U.b,U.e,U.d,U.c,u.b,Q.b,f.a,r.h,T.q,Q.a,T.t],styles:["fcl-details-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}fcl-details-header.below{z-index:2}fcl-details-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}fcl-details-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}fcl-details-header .logo .logo-icon{width:38px}fcl-details-header .chat-panel-toggle-button,fcl-details-header .language-button,fcl-details-header .quick-panel-toggle-button,fcl-details-header .user-button,fcl-details-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){fcl-details-header .chat-panel-toggle-button,fcl-details-header .language-button,fcl-details-header .quick-panel-toggle-button,fcl-details-header .user-button,fcl-details-header fuse-search-bar{height:56px}}fcl-details-header .navbar-toggle-button{min-width:56px;height:56px}fcl-details-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){fcl-details-header .toolbar-separator{height:56px}}"],encapsulation:2}),te),ne=i("0Zc1"),re=["formDirective"],ce=["sidebarPerfectScroll"],oe=function(e){return{"mt-32":e}};function le(e,t){if(1&e&&(M.Xb(0,"div",10),M.Xb(1,"h2"),M.Lc(2),M.Wb(),M.Xb(3,"div",11),M.Lc(4),M.Wb(),M.Wb()),2&e){var i=M.jc(),a=i.$implicit;M.pc("ngClass",M.rc(3,oe,0==i.index)),M.Db(2),M.Mc(a.name),M.Db(2),M.Mc(a.value)}}function se(e,t){if(1&e&&(M.Xb(0,"div"),M.Jc(1,le,5,5,"div",9),M.Wb()),2&e){var i=t.$implicit;M.Db(1),M.pc("ngIf",i.value)}}var ue,be=((ue=function(){function e(t,i,a,n,r){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this._fuseSidebarService=a,this.commonService=n,this.datePipe=r,this.sidebarPage=new M.o,this.height=560,this.form=[{name:"Code",value:null},{name:"Supplier",value:null},{name:"Pol",value:null},{name:"Pod",value:null},{name:"Status",value:null},{name:"Validity",value:null},{name:"Info",value:null},{name:"Type",value:null},{name:"Pot",value:null},{name:"Update by",value:null}],this._unsubscribeAll=new F.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;console.log(this.fcl),this.form=[{name:"Code",value:this.fcl.code},{name:"Supplier",value:this.fcl.short_name},{name:"Pol",value:this.fcl.pol_name},{name:"Pod",value:this.fcl.pod_name},{name:"Status",value:1==this.fcl.status?"Valid":"Invalid"},{name:"Validity",value:this.datePipe.transform(new Date(this.fcl.validity),"MM/dd/yyyy")},{name:"Info",value:this.fcl.info},{name:"Type",value:1==this.fcl.direct?"Trans shippment":"Direct"},{name:"Pot",value:this.fcl.pot_name},{name:"Update by",value:this.fcl.update_by}],this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.fcl&&e.fcl.currentValue&&(this.fcl=e.fcl.currentValue,this.form=[{name:"Code",value:this.fcl.code},{name:"Supplier",value:this.fcl.short_name},{name:"Pol",value:this.fcl.pol_name},{name:"Pod",value:this.fcl.pod_name},{name:"Status",value:1==this.fcl.status?"Valid":"Invalid"},{name:"Validity",value:this.datePipe.transform(new Date(this.fcl.validity),"MM/dd/yyyy")},{name:"Info",value:this.fcl.info},{name:"Type",value:1==this.fcl.direct?"Trans shippment":"Direct"},{name:"Pot",value:this.fcl.pot_name},{name:"Update by",value:this.fcl.update_by}])}},{key:"ngAfterViewInit",value:function(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}}]),e}()).\u0275fac=function(e){return new(e||ue)(M.Rb(J.d),M.Rb(B.a),M.Rb(j.a),M.Rb(ne.a),M.Rb(T.f))},ue.\u0275cmp=M.Lb({type:ue,selectors:[["fcl-details-sidebar-view"]],viewQuery:function(e,t){var i;1&e&&(M.Sc(re,!0),M.Sc(ce,!0)),2&e&&(M.wc(i=M.gc())&&(t.searchNgForm=i.first),M.wc(i=M.gc())&&(t.sidebarPerfectScroll=i.first))},inputs:{fcl:"fcl"},outputs:{sidebarPage:"sidebarPage"},features:[M.Bb()],decls:10,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","45",1,"ml-8","mr-8"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-fcl"],["sidebarPerfectScroll",""],[1,"navbar-content"],[4,"ngFor","ngForOf"],["class","group",3,"ngClass",4,"ngIf"],[1,"group",3,"ngClass"],[1,"item"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"div",2),M.Sb(3,"div",3),M.Xb(4,"button",4),M.fc("click",(function(e){return t.sidebarPage.emit("form")})),M.Lc(5," Edit "),M.Wb(),M.Wb(),M.Wb(),M.Xb(6,"div",5,6),M.Xb(8,"div",7),M.Jc(9,se,2,1,"div",8),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(6),M.Ic("height",t.height,"px"),M.Db(3),M.pc("ngForOf",t.form))},directives:[U.d,U.c,U.b,u.b,G.a,T.s,T.t,T.q,Q.a],styles:["fcl-details-sidebar-view{-webkit-user-drag:auto}fcl-details-sidebar-view .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}fcl-details-sidebar-view .navbar-scroll-fcl{background:#fff!important}fcl-details-sidebar-view .navbar-scroll-fcl .navbar-content{padding-top:0}fcl-details-sidebar-view .navbar-scroll-fcl .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12)}fcl-details-sidebar-view .navbar-scroll-fcl .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}fcl-details-sidebar-view .navbar-scroll-fcl .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-fcl{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-fcl .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),ue),de=i("JX91"),fe=i("lJxs"),pe=i("FtGj"),he=["unitInput"],me=["auto"],ge=["formDirective"],ve=["sidebarPerfectScroll"];function ye(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Code is required "),M.Wb())}function xe(e,t){if(1&e&&(M.Xb(0,"mat-option",27),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i.id),M.Db(1),M.Nc(" ",i.short_name," ")}}function ke(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Supplier is required "),M.Wb())}function Se(e,t){if(1&e&&(M.Xb(0,"mat-option",27),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i.id),M.Db(1),M.Nc(" ",i.name," ")}}function we(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1,"Port of loading is required!"),M.Wb())}function _e(e,t){if(1&e&&(M.Xb(0,"mat-option",27),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i.id),M.Db(1),M.Nc(" ",i.name," ")}}function We(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1,"Port of discharge is required!"),M.Wb())}function Xe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Status is required "),M.Wb())}function Ce(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Validity is required "),M.Wb())}function De(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Date is too early! "),M.Wb())}function Le(e,t){if(1&e){var i=M.Yb();M.Xb(0,"mat-chip",44),M.fc("removed",(function(e){M.Bc(i);var a=t.$implicit;return M.jc().remove(a)})),M.Lc(1),M.Xb(2,"mat-icon",45),M.Lc(3,"cancel"),M.Wb(),M.Wb()}if(2&e){var a=t.$implicit;M.pc("selectable",!0)("removable",!0),M.Db(1),M.Nc(" ",a," ")}}function Pe(e,t){if(1&e&&(M.Xb(0,"mat-option",27),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i),M.Db(1),M.Nc(" ",i," ")}}function Re(e,t){if(1&e&&(M.Xb(0,"mat-option",27),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i.id),M.Db(1),M.Nc(" ",i.name," ")}}function Oe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Port of trans shipment is required "),M.Wb())}var Ae,Fe=((Ae=function(){function e(t,i,a,n,r){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this._fuseSidebarService=a,this.commonService=n,this.datePipe=r,this.sidebarPage=new M.o,this.editFcl=new M.o,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[pe.g,pe.c],this.units=[],this.allUnits=[],this.form=this.formBuilder.group({id:[null],code:[null,J.y.required],supplier_id:[null],pol:[null],pod:[null],status:["1",J.y.required],validity:[null,J.y.required],info:[null],update_by:[this.authService.email,J.y.required],direct:[0],pot:[null]}),this.now=new Date,this.height=560,this._unsubscribeAll=new F.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.fcl));t.validity=this.minDate=new Date(t.validity),this.name=t.create_by_name,0==this.fcl.direct&&this.form.controls.pot.disable(),this.form.patchValue(t),this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18})),this.filteredSupplier=this.form.controls.supplier_id.valueChanges.pipe(Object(de.a)(""),Object(fe.a)((function(e){return e?"string"==typeof e?e:e.supplier_name:null})),Object(fe.a)((function(t){return t?e.commonService.filterData(t,"supplier_name",e.supplier):[]}))),this.filteredPol=this.form.controls.pol.valueChanges.pipe(Object(de.a)(""),Object(fe.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(fe.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredPod=this.form.controls.pod.valueChanges.pipe(Object(de.a)(""),Object(fe.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(fe.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredPot=this.form.controls.pot.valueChanges.pipe(Object(de.a)(""),Object(fe.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(fe.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredUnits=this.form.controls.info.valueChanges.pipe(Object(de.a)(null),Object(fe.a)((function(t){return t?e._filter(t):[]}))),this.form.controls.direct.valueChanges.subscribe((function(t){0==t?e.form.controls.pot.disable():e.form.controls.pot.enable()}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewInit",value:function(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}},{key:"setCheck",value:function(e){e.check=!e.check}},{key:"resetForm",value:function(){this.fclNgForm.resetForm()}},{key:"onFormSubmit",value:function(e){if(e.valid){var t=JSON.parse(JSON.stringify(e.value));if("string"==typeof t.supplier_id)return void this.form.controls.supplier_id.setValue(null);if("string"==typeof t.pol)return void this.form.controls.pol.setValue(null);if("string"==typeof t.pod)return void this.form.controls.pod.setValue(null);if(1==t.direct&&"string"==typeof t.pot)return void this.form.controls.pot.setValue(null);t.validity=this.datePipe.transform(new Date(t.validity),"yyyy/MM/dd"),this.editFcl.emit(t)}}},{key:"add",value:function(e){if(!this.matAutocomplete.isOpen){var t=e.input,i=e.value;(i||"").trim()&&this.units.push(i.trim()),t&&(t.value=""),this.form.controls.info.setValue(null)}}},{key:"remove",value:function(e){var t=this.units.indexOf(e);t>=0&&this.units.splice(t,1)}},{key:"selected",value:function(e){this.units.includes(e.option.viewValue)?alert("Unit exist"):this.units.push(e.option.viewValue),this.unitInput.nativeElement.value="",this.form.controls.info.setValue(null)}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.unit.filter((function(e){return 0===e.toLowerCase().indexOf(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ae)(M.Rb(J.d),M.Rb(B.a),M.Rb(j.a),M.Rb(ne.a),M.Rb(T.f))},Ae.\u0275cmp=M.Lb({type:Ae,selectors:[["fcl-details-sidebar-form"]],viewQuery:function(e,t){var i;1&e&&(M.Sc(he,!0),M.Sc(me,!0),M.Sc(ge,!0),M.Sc(ve,!0)),2&e&&(M.wc(i=M.gc())&&(t.unitInput=i.first),M.wc(i=M.gc())&&(t.matAutocomplete=i.first),M.wc(i=M.gc())&&(t.fclNgForm=i.first),M.wc(i=M.gc())&&(t.sidebarPerfectScroll=i.first))},inputs:{fcl:"fcl",supplier:"supplier",seaport:"seaport",unit:"unit"},outputs:{sidebarPage:"sidebarPage",editFcl:"editFcl"},decls:105,vars:47,consts:[["name","form",2,"border-right","1px solid #E6E6E6",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-fcl"],["sidebarPerfectScroll",""],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],[2,"display","none"],["inputCheck","","type","number","formControlName","id"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","code","required",""],[4,"ngIf"],["fxFlex","100",1,"info-line"],["inputCheck","","matInput","","formControlName","supplier_id","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnSup","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","aria-label","Port of Loading","matInput","","formControlName","pol","required","",3,"matAutocomplete"],["autoPOL","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of discharge","matInput","","formControlName","pod","required","",3,"matAutocomplete"],["autoPOD","matAutocomplete"],["formControlName","status","required",""],[3,"value"],["inputCheck","","matInput","","name","validity","formControlName","validity","required","",3,"min","matDatepicker"],["matSuffix","",3,"for"],["validityPicker",""],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Add more unit...","formControlName","info",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["unitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],["fxFlex","100",1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","direct"],[1,"mr-8","mb-12",3,"value"],[1,"mr-8",3,"value"],["inputCheck","","type","text","aria-label","Port of trans shipment","matInput","","formControlName","pot","required","",3,"matAutocomplete"],["autoPOT","matAutocomplete"],["inputCheck","","matInput","","formControlName","update_by",3,"readonly"],[3,"selectable","removable","removed"],["matChipRemove",""]],template:function(e,t){if(1&e&&(M.Xb(0,"form",0,1),M.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),M.Xb(2,"div",2),M.Xb(3,"div",3),M.Xb(4,"button",4),M.Lc(5," Submit "),M.Wb(),M.Xb(6,"button",5),M.fc("click",(function(e){return t.sidebarPage.emit("view")})),M.Lc(7," Cancel "),M.Wb(),M.Wb(),M.Wb(),M.Xb(8,"div",6,7),M.Xb(10,"div",8),M.Xb(11,"div",9),M.Xb(12,"div",10),M.Xb(13,"div",11),M.Sb(14,"input",12),M.Wb(),M.Xb(15,"div",13),M.Xb(16,"mat-form-field",14),M.Xb(17,"mat-label"),M.Lc(18,"Code"),M.Wb(),M.Sb(19,"input",15),M.Jc(20,ye,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(21,"div",17),M.Xb(22,"mat-form-field",14),M.Xb(23,"mat-label"),M.Lc(24,"Supplier"),M.Wb(),M.Sb(25,"input",18),M.Xb(26,"mat-autocomplete",19,20),M.Jc(28,xe,2,2,"mat-option",21),M.kc(29,"async"),M.Wb(),M.Jc(30,ke,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(31,"div",17),M.Xb(32,"mat-form-field",14),M.Xb(33,"mat-label"),M.Lc(34,"Port of loading"),M.Wb(),M.Sb(35,"input",22),M.Xb(36,"mat-autocomplete",19,23),M.Jc(38,Se,2,2,"mat-option",21),M.kc(39,"async"),M.Wb(),M.Jc(40,we,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(41,"div",17),M.Xb(42,"mat-form-field",14),M.Xb(43,"mat-label"),M.Lc(44,"Port of discharge"),M.Wb(),M.Sb(45,"input",24),M.Xb(46,"mat-autocomplete",19,25),M.Jc(48,_e,2,2,"mat-option",21),M.kc(49,"async"),M.Wb(),M.Jc(50,We,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(51,"div",17),M.Xb(52,"mat-form-field",14),M.Xb(53,"mat-label"),M.Lc(54,"Status"),M.Wb(),M.Xb(55,"mat-select",26),M.Xb(56,"mat-option",27),M.Lc(57,"Inactive"),M.Wb(),M.Xb(58,"mat-option",27),M.Lc(59,"Active"),M.Wb(),M.Wb(),M.Jc(60,Xe,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(61,"div",17),M.Xb(62,"mat-form-field",14),M.Xb(63,"mat-label"),M.Lc(64,"Validity"),M.Wb(),M.Sb(65,"input",28),M.Sb(66,"mat-datepicker-toggle",29),M.Sb(67,"mat-datepicker",null,30),M.Jc(69,Ce,2,0,"mat-error",16),M.Jc(70,De,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(71,"div",17),M.Xb(72,"mat-form-field",14),M.Xb(73,"mat-chip-list",null,31),M.Jc(75,Le,4,3,"mat-chip",32),M.Xb(76,"input",33,34),M.fc("matChipInputTokenEnd",(function(e){return t.add(e)})),M.Wb(),M.Wb(),M.Xb(78,"mat-autocomplete",35,36),M.fc("optionSelected",(function(e){return t.selected(e)})),M.Jc(80,Pe,2,2,"mat-option",21),M.kc(81,"async"),M.Wb(),M.Wb(),M.Wb(),M.Xb(82,"div",37),M.Xb(83,"h2"),M.Lc(84,"Type"),M.Wb(),M.Xb(85,"mat-radio-group",38),M.Xb(86,"mat-radio-button",39),M.Lc(87,"Direct"),M.Wb(),M.Xb(88,"mat-radio-button",40),M.Lc(89,"Trans shipment"),M.Wb(),M.Wb(),M.Wb(),M.Xb(90,"div",17),M.Xb(91,"mat-form-field",14),M.Xb(92,"mat-label"),M.Lc(93,"Port of trans shipment"),M.Wb(),M.Sb(94,"input",41),M.Xb(95,"mat-autocomplete",19,42),M.Jc(97,Re,2,2,"mat-option",21),M.kc(98,"async"),M.Wb(),M.Jc(99,Oe,2,0,"mat-error",16),M.Wb(),M.Wb(),M.Xb(100,"div",17),M.Xb(101,"mat-form-field",14),M.Xb(102,"mat-label"),M.Lc(103,"Update by"),M.Wb(),M.Sb(104,"input",43),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e){var i=M.xc(27),a=M.xc(37),n=M.xc(47),r=M.xc(68),c=M.xc(74),o=M.xc(79),l=M.xc(96);M.pc("formGroup",t.form),M.Db(8),M.Ic("height",t.height,"px"),M.Db(12),M.pc("ngIf",t.form.get("code").hasError("required")),M.Db(5),M.pc("matAutocomplete",i),M.Db(1),M.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.supplier)),M.Db(2),M.pc("ngForOf",M.lc(29,37,t.filteredSupplier)),M.Db(2),M.pc("ngIf",t.form.get("supplier_id").hasError("required")),M.Db(5),M.pc("matAutocomplete",a),M.Db(1),M.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),M.Db(2),M.pc("ngForOf",M.lc(39,39,t.filteredPol)),M.Db(2),M.pc("ngIf",t.form.get("pol").hasError("required")),M.Db(5),M.pc("matAutocomplete",n),M.Db(1),M.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),M.Db(2),M.pc("ngForOf",M.lc(49,41,t.filteredPod)),M.Db(2),M.pc("ngIf",t.form.get("pod").hasError("required")),M.Db(6),M.pc("value","0"),M.Db(2),M.pc("value","1"),M.Db(2),M.pc("ngIf",t.form.get("status").hasError("required")),M.Db(5),M.pc("min",t.minDate)("matDatepicker",r),M.Db(1),M.pc("for",r),M.Db(3),M.pc("ngIf",t.form.get("validity").hasError("required")),M.Db(1),M.pc("ngIf",!t.form.get("validity").hasError("required")&&"INVALID"==t.form.get("validity").status),M.Db(5),M.pc("ngForOf",t.units),M.Db(1),M.pc("matAutocomplete",o)("matChipInputFor",c)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",t.addOnBlur),M.Db(4),M.pc("ngForOf",M.lc(81,43,t.filteredUnits)),M.Db(6),M.pc("value",0),M.Db(2),M.pc("value",1),M.Db(6),M.pc("matAutocomplete",l),M.Db(1),M.pc("displayWith",t.commonService.displayFn.bind(t,"name",t.seaport)),M.Db(2),M.pc("ngForOf",M.lc(98,45,t.filteredPot)),M.Db(2),M.pc("ngIf",t.form.get("pot").hasError("required")),M.Db(5),M.pc("readonly",!0)}},directives:[J.A,J.q,J.h,U.d,U.c,u.b,U.b,G.a,J.u,J.b,J.p,J.g,d.c,d.f,h.b,J.w,T.t,l.c,l.a,T.s,g.a,C.n,s.b,s.d,d.h,s.a,_.c,_.b,v.b,v.a,d.b,_.a,f.a,_.d],pipes:[T.b],styles:["fcl-details-sidebar-form{-webkit-user-drag:auto}fcl-details-sidebar-form .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}fcl-details-sidebar-form .navbar-scroll-fcl{background:#fff!important}fcl-details-sidebar-form .navbar-scroll-fcl .navbar-content{padding-top:0}fcl-details-sidebar-form .navbar-scroll-fcl .navbar-content .nav.material2{overflow:hidden}fcl-details-sidebar-form .navbar-scroll-fcl .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}fcl-details-sidebar-form .navbar-scroll-fcl .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}fcl-details-sidebar-form .navbar-scroll-fcl .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}fcl-details-sidebar-form .navbar-scroll-fcl .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-fcl{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-fcl .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Ae);function Ie(e,t){if(1&e){var i=M.Yb();M.Xb(0,"fcl-details-sidebar-view",3),M.fc("sidebarPage",(function(e){return M.Bc(i),M.jc().sidebarPage.emit(e)})),M.Wb()}if(2&e){var a=M.jc();M.pc("fcl",a.fcl)}}function qe(e,t){if(1&e){var i=M.Yb();M.Xb(0,"fcl-details-sidebar-form",4),M.fc("sidebarPage",(function(e){return M.Bc(i),M.jc().sidebarPage.emit(e)}))("editFcl",(function(e){return M.Bc(i),M.jc().editFcl.emit(e)})),M.Wb()}if(2&e){var a=M.jc();M.pc("fcl",a.fcl)("supplier",a.supplier)("seaport",a.seaport)("unit",a.unit)}}var Me,je=((Me=function(){function e(t,i,a){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this.commonService=a,this.sidebarPage=new M.o,this.editFcl=new M.o,this.height=560,this._unsubscribeAll=new F.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||Me)(M.Rb(J.d),M.Rb(B.a),M.Rb(ne.a))},Me.\u0275cmp=M.Lb({type:Me,selectors:[["fcl-details-sidebar"]],inputs:{type:"type",fcl:"fcl",supplier:"supplier",seaport:"seaport",unit:"unit"},outputs:{sidebarPage:"sidebarPage",editFcl:"editFcl"},decls:3,vars:3,consts:[[1,"sidebar-content",3,"ngSwitch"],[3,"fcl","sidebarPage",4,"ngSwitchCase"],[3,"fcl","supplier","seaport","unit","sidebarPage","editFcl",4,"ngSwitchCase"],[3,"fcl","sidebarPage"],[3,"fcl","supplier","seaport","unit","sidebarPage","editFcl"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Jc(1,Ie,1,1,"fcl-details-sidebar-view",1),M.Jc(2,qe,1,4,"fcl-details-sidebar-form",2),M.Wb()),2&e&&(M.pc("ngSwitch",!0),M.Db(1),M.pc("ngSwitchCase","view"==t.type),M.Db(1),M.pc("ngSwitchCase","form"==t.type))},directives:[T.x,T.y,be,Fe],styles:[""],encapsulation:2}),Me);function ze(e,t){if(1&e){var i=M.Yb();M.Xb(0,"fuse-sidebar",10),M.Xb(1,"fcl-details-sidebar",11),M.fc("sidebarPage",(function(e){return M.Bc(i),M.jc().getTypeSidebar(e)}))("editFcl",(function(e){return M.Bc(i),M.jc().editFcl(e)})),M.Wb(),M.Wb()}if(2&e){var a=M.jc();M.Db(1),M.pc("type",a.type)("fcl",a.fcl)("seaport",a.seaport)("supplier",a.supplier)("unit",a.unit)}}function Ee(e,t){1&e&&M.Sb(0,"router-outlet")}var Be,Ve=((Be=function(){function e(t,i,a,n,r){_classCallCheck(this,e),this._fuseSidebarService=t,this.fclDetailsService=i,this.router=a,this.datePipe=n,this.authService=r,this.type="view",this.sidebarPanel=!0,this._unsubscribeAll=new F.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.fclDetailsService.onFclChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.fcl=e.fclDetailsService.fcl,console.log(e.fcl)})),this.fclDetailsService.onDataChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.seaport=e.fclDetailsService.seaport,e.country=e.fclDetailsService.country,e.supplier=e.fclDetailsService.supplier;for(var i=e.fclDetailsService.unit.map((function(e){return e.code})),a=i.length-1;a>=0;a--)"BOX"==i[a]&&i.splice(a,1),"CBM"==i[a]&&i.splice(a,1),"KGS"==i[a]&&i.splice(a,1),"SPT"==i[a]&&i.splice(a,1),"DAY"==i[a]&&i.splice(a,1),"PCS"==i[a]&&i.splice(a,1);e.unit=i}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.fclDetailsService)}},{key:"editFcl",value:function(e){var t=this;e.update_at=this.datePipe.transform(new Date,"yyyy/MM/dd HH:mm:ss")+".0",this.authService.onRequestChanged.next(!0),this.fclDetailsService.updateFcl(e).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows||(console.error(e),alert("error edit"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("error edit")}))}},{key:"getTypeSidebar",value:function(e){this.type=e}}]),e}()).\u0275fac=function(e){return new(e||Be)(M.Rb(j.a),M.Rb(V),M.Rb(r.g),M.Rb(T.f),M.Rb(B.a))},Be.\u0275cmp=M.Lb({type:Be,selectors:[["fcl-details"]],decls:10,vars:5,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","fcl-details-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","fcl-details-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"fcl","sidebarName","showHideBar","refreshPage","toggleSidebar"],[1,"content-card",2,"border","none","border-radius","0"],[1,"content","p-8"],[4,"ngIf"],["name","fcl-details-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"type","fcl","seaport","supplier","unit","sidebarPage","editFcl"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Jc(1,ze,2,5,"fuse-sidebar",1),M.Xb(2,"fuse-sidebar",2),M.Xb(3,"div",3),M.Sb(4,"fcl-details-setting",4),M.Wb(),M.Wb(),M.Xb(5,"div",5),M.Xb(6,"fcl-details-header",6),M.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)})),M.Wb(),M.Xb(7,"div",7),M.Xb(8,"div",8),M.Jc(9,Ee,1,0,"router-outlet",9),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(1),M.pc("ngIf",t.sidebarPanel),M.Db(3),M.pc("displayObject",t.displayObject),M.Db(2),M.pc("fcl",t.fcl)("sidebarName","fcl-details-sidebar"),M.Db(3),M.pc("ngIf",!0))},directives:[N.a,T.t,H.a,$,ae,je,r.l],styles:["fcl-details{width:100%}fcl-details .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){fcl-details .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}fcl-details .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){fcl-details .center .content-card fcl-details{border-right:0}fcl-details .center .content-card fcl-details,fcl-details .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}fcl-details .center .content-card shipment-details{display:none!important}fcl-details .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}fcl-details .center .content-card.current-shipment-selected .content fcl-details,fcl-details .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}fcl-details .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:q.a}}),Be),Te=i("vxfF");function Ne(e,t){if(1&e&&(M.Xb(0,"mat-option",35),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i),M.Db(1),M.Nc(" ",i.name," ")}}function He(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Price is required "),M.Wb())}function Je(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Amount is required "),M.Wb())}function Ue(e,t){if(1&e&&(M.Xb(0,"mat-option",21),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i.id),M.Db(1),M.Nc(" ",i.code," ")}}function Ge(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Currency is required "),M.Wb())}function $e(e,t){if(1&e&&(M.Xb(0,"mat-option",21),M.Lc(1),M.Wb()),2&e){var i=t.$implicit;M.pc("value",i.id),M.Db(1),M.Nc(" ",i.name," ")}}function Ye(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Payment center is required "),M.Wb())}function Ke(e,t){if(1&e){var i=M.Yb();M.Xb(0,"div"),M.Xb(1,"form",7),M.fc("keydown.enter",(function(e){return M.Bc(i),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){M.Bc(i);var t=M.jc();return t.onFclPriceFormSubmit(t.form)})),M.Xb(2,"div",8),M.Sb(3,"input",9),M.Sb(4,"input",10),M.Wb(),M.Xb(5,"div",11),M.Xb(6,"mat-form-field",12),M.Xb(7,"mat-label"),M.Lc(8,"Price"),M.Wb(),M.Sb(9,"input",13),M.Xb(10,"mat-autocomplete",14,15),M.Jc(12,Ne,2,2,"mat-option",16),M.kc(13,"async"),M.Wb(),M.Jc(14,He,2,0,"mat-error",6),M.Wb(),M.Xb(15,"mat-form-field",17),M.Xb(16,"mat-label"),M.Lc(17,"Unit"),M.Wb(),M.Sb(18,"input",18),M.Wb(),M.Xb(19,"mat-form-field",17),M.Xb(20,"mat-label"),M.Lc(21,"Amount"),M.Wb(),M.Sb(22,"input",19),M.Jc(23,Je,2,0,"mat-error",6),M.Wb(),M.Xb(24,"mat-form-field",17),M.Xb(25,"mat-label"),M.Lc(26,"Tax(%)"),M.Wb(),M.Xb(27,"mat-select",20),M.Xb(28,"mat-option",21),M.Lc(29,"0"),M.Wb(),M.Xb(30,"mat-option",21),M.Lc(31,"5"),M.Wb(),M.Xb(32,"mat-option",21),M.Lc(33,"5.26"),M.Wb(),M.Xb(34,"mat-option",21),M.Lc(35,"7"),M.Wb(),M.Xb(36,"mat-option",21),M.Lc(37,"8"),M.Wb(),M.Xb(38,"mat-option",21),M.Lc(39,"10"),M.Wb(),M.Wb(),M.Wb(),M.Xb(40,"mat-form-field",17),M.Xb(41,"mat-label"),M.Lc(42,"Currency"),M.Wb(),M.Xb(43,"mat-select",22),M.Jc(44,Ue,2,2,"mat-option",23),M.Wb(),M.Jc(45,Ge,2,0,"mat-error",6),M.Wb(),M.Xb(46,"mat-form-field",17),M.Xb(47,"mat-label"),M.Lc(48,"Payment center"),M.Wb(),M.Sb(49,"input",24),M.Xb(50,"mat-autocomplete",14,25),M.Jc(52,$e,2,2,"mat-option",23),M.kc(53,"async"),M.Wb(),M.Jc(54,Ye,2,0,"mat-error",6),M.Wb(),M.Xb(55,"mat-form-field",26),M.Xb(56,"mat-label"),M.Lc(57,"Update by"),M.Wb(),M.Sb(58,"input",27),M.Wb(),M.Xb(59,"mat-form-field",28),M.Xb(60,"mat-label"),M.Lc(61,"Info"),M.Wb(),M.Sb(62,"input",29),M.Wb(),M.Wb(),M.Xb(63,"div",30),M.Xb(64,"div",31),M.Lc(65),M.Wb(),M.Wb(),M.Xb(66,"div",32),M.Xb(67,"button",33),M.Lc(68,"Submit"),M.Wb(),M.Xb(69,"button",34),M.fc("click",(function(e){return M.Bc(i),M.jc().matDialogRef.close()})),M.Lc(70,"Cancel"),M.Wb(),M.Wb(),M.Wb(),M.Wb()}if(2&e){var a=M.xc(11),n=M.xc(51),r=M.jc();M.Db(1),M.pc("formGroup",r.form),M.Db(8),M.pc("matAutocomplete",a),M.Db(1),M.pc("displayWith",r.commonService.displayObjFn.bind(r,"name")),M.Db(2),M.pc("ngForOf",M.lc(13,22,r.filteredPrice)),M.Db(2),M.pc("ngIf",r.form.get("price").hasError("required")),M.Db(4),M.pc("value",null==r.form.value.price?null:r.form.value.price.unit_code)("readonly",!0),M.Db(5),M.pc("ngIf",r.form.get("amount").hasError("required")),M.Db(5),M.pc("value",0),M.Db(2),M.pc("value",5),M.Db(2),M.pc("value",5.26),M.Db(2),M.pc("value",7),M.Db(2),M.pc("value",8),M.Db(2),M.pc("value",10),M.Db(6),M.pc("ngForOf",r.currency),M.Db(1),M.pc("ngIf",r.form.get("currency").hasError("required")),M.Db(4),M.pc("matAutocomplete",n),M.Db(1),M.pc("displayWith",r.commonService.displayFn.bind(r,"name",r.country)),M.Db(2),M.pc("ngForOf",M.lc(53,24,r.filteredCountry)),M.Db(2),M.pc("ngIf",r.form.get("payment_center").hasError("required")),M.Db(4),M.pc("readonly",!0),M.Db(7),M.Mc(r.errorMessage)}}var Qe,Ze=((Qe=function(){function e(t,i,a,n,r,c,o){var l=this;_classCallCheck(this,e),this.matDialogRef=t,this._data=i,this.authService=a,this._formBuilder=n,this.commonService=r,this.fclDetailsService=c,this.datePipe=o,this.form=this._formBuilder.group({id:[null,J.y.required],fcl_id:[null,J.y.required],price:[null,J.y.required],amount:[0,J.y.required],tax:[0,J.y.required],currency:[null,J.y.required],payment_center:[null,J.y.required],info:[null],update_by:[this.authService.email,J.y.required]}),this.label=i.label,this.id=i.id,this.price=i.price,this.currency=i.currency,this.country=i.country,"Add price"==this.label&&(this.form.controls.id.disable(),this.form.controls.fcl_id.setValue(this.id),this.form.controls.price.setValue(i.id)),"Edit price"==this.label&&(this.data=JSON.parse(JSON.stringify(i.data)),this.data.price=this.price.find((function(e){return e.id==l.data.price})),this.data.payment_center=parseInt(this.data.payment_center),this.form.patchValue(this.data)),this.form.controls.update_by.setValue(this.authService.email),this.name=this.authService.name,this.permission=i.permission}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(de.a)(""),Object(fe.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(fe.a)((function(t){return t?e.commonService.filterData(t,"name",e.price):[]}))),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(de.a)(""),Object(fe.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(fe.a)((function(t){return t?e.commonService.filterData(t,"name",e.country):[]}))),this.form.valueChanges.subscribe((function(t){e.errorMessage=""}))}},{key:"onFclPriceFormSubmit",value:function(e){var t=this;if(e.valid){if("string"==typeof e.value.price)return void this.form.controls.price.setValue(null);if("string"==typeof e.value.payment_center)return void this.form.controls.payment_center.setValue(null);var i=JSON.parse(JSON.stringify(e.value));i.unit=i.price.unit,i.price=i.price.id,"Add price"==this.label?(this.authService.onRequestChanged.next(!0),this.fclDetailsService.createFclPrice(i).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error create")})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.errorMessage="Error create"}))):(this.authService.onRequestChanged.next(!0),this.fclDetailsService.updateFclPrice(i).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error edit priceDetail")})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.errorMessage="Error edit priceDetail"})))}}}]),e}()).\u0275fac=function(e){return new(e||Qe)(M.Rb(y.f),M.Rb(y.a),M.Rb(B.a),M.Rb(J.d),M.Rb(ne.a),M.Rb(V),M.Rb(T.f))},Qe.\u0275cmp=M.Lb({type:Qe,selectors:[["fcl-details-price-modal-dialog"]],decls:10,vars:2,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","fcl-detail-price-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id","required",""],["inputCheck","","formControlName","fcl_id","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],[3,"displayWith"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","",3,"value","readonly"],["inputCheck","","matInput","","formControlName","amount","type","number"],["formControlName","tax"],[3,"value"],["formControlName","currency","required",""],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center","required","",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","","formControlName","update_by",3,"readonly"],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","info"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[2,"font-size","12px","overflow","visible","display","block",3,"value"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"mat-toolbar",1),M.Xb(2,"mat-toolbar-row",2),M.Xb(3,"span",3),M.Lc(4),M.Wb(),M.Xb(5,"button",4),M.fc("click",(function(e){return t.matDialogRef.close()})),M.Xb(6,"mat-icon"),M.Lc(7,"close"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(8,"div",5),M.Jc(9,Ke,71,26,"div",6),M.Wb(),M.Wb()),2&e&&(M.Db(4),M.Mc(t.label),M.Db(5),M.pc("ngIf","Add price"==t.label||"Edit price"==t.label))},directives:[x.a,x.c,U.b,U.d,U.c,u.b,f.a,y.d,G.a,T.t,J.A,J.q,J.h,J.b,J.p,J.g,J.w,d.c,d.f,h.b,l.c,l.a,T.s,J.u,g.a,C.n,d.b],pipes:[T.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.fcl-details-price-modal-dialog{width:100%}}@media screen and (min-width:960px){.fcl-details-price-modal-dialog{width:1080px}}.fcl-details-price-modal-dialog .mat-dialog-container{padding:0}.fcl-details-price-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.fcl-details-price-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.fcl-details-price-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),Qe);function et(e,t){if(1&e){var i=M.Yb();M.Xb(0,"tr"),M.Xb(1,"td"),M.Lc(2),M.Wb(),M.Xb(3,"td"),M.Lc(4),M.Wb(),M.Xb(5,"td"),M.Lc(6),M.Wb(),M.Xb(7,"td"),M.Lc(8),M.kc(9,"number"),M.Wb(),M.Xb(10,"td"),M.Lc(11),M.Wb(),M.Xb(12,"td"),M.Lc(13),M.Wb(),M.Xb(14,"td"),M.Lc(15),M.Wb(),M.Xb(16,"td",8),M.Xb(17,"mat-icon",6),M.fc("click",(function(e){M.Bc(i);var a=t.$implicit,n=M.jc();return e.stopPropagation(),n.updateItem(a)})),M.Lc(18,"edit"),M.Wb(),M.Xb(19,"mat-icon",9),M.fc("click",(function(e){M.Bc(i);var a=t.$implicit,n=M.jc();return e.stopPropagation(),n.deleteItem(a)})),M.Lc(20,"delete"),M.Wb(),M.Wb(),M.Wb()}if(2&e){var a=t.$implicit,n=t.index;M.Db(2),M.Mc(n+1),M.Db(2),M.Mc(a.price_name),M.Db(2),M.Mc(a.unit_code),M.Db(2),M.Mc(M.mc(9,7,a.amount,"VND"==a.currency_code?"1.0-0":"1.2-2")),M.Db(3),M.Mc(a.tax),M.Db(2),M.Mc(a.currency_code),M.Db(2),M.Mc(a.country_name)}}var tt,it=((tt=function(){function e(t,i,a,n,r,c,o){_classCallCheck(this,e),this.router=t,this.route=i,this._activatedRoute=a,this.authService=n,this.changeDetector=r,this.fclDetailsService=c,this._matDialog=o,this.height=560,this.contType=[],this.total={},this._unsubscribeAll=new F.a,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4})),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4:e.authService.screenHeight-64-64-16-4})),this.fclDetailsService.onFclChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.fcl=e.fclDetailsService.fcl,e.id=e.fcl.id,console.log(e.fcl)})),this.fclDetailsService.onDataItemChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.price=e.fclDetailsService.price,e.unit=e.fclDetailsService.priceUnit,e.currency=e.fclDetailsService.currency,e.country=e.fclDetailsService.country}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"createItem",value:function(){var e=this;this.dialogRef=this._matDialog.open(Ze,{panelClass:"fcl-details-price-modal-dialog",data:{label:"Add price",id:this.id,price:this.price,currency:this.currency,country:this.country,unit:this.unit}}),this.dialogRef.afterClosed().subscribe((function(t){t&&e.getFclPrice()}))}},{key:"updateItem",value:function(e){var t=this;this.dialogRef=this._matDialog.open(Ze,{panelClass:"fcl-details-price-modal-dialog",data:{label:"Edit price",data:e,id:this.id,price:this.price,currency:this.currency,country:this.country,unit:this.unit}}),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getFclPrice()}))}},{key:"getFclPrice",value:function(){var e=this;setTimeout((function(){e.authService.onRequestChanged.next(!0),e.fclDetailsService.getFclById(e.id).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error load data")}))}))}},{key:"deleteItem",value:function(e){var t=this;confirm("Do you want to delete this price?")&&this.fclDetailsService.deleteFclPrice(e.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.getFclPrice():(console.error(e),alert("Error: No change"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")}))}}]),e}()).\u0275fac=function(e){return new(e||tt)(M.Rb(r.g),M.Rb(r.a),M.Rb(r.a),M.Rb(B.a),M.Rb(M.h),M.Rb(V),M.Rb(y.b))},tt.\u0275cmp=M.Lb({type:tt,selectors:[["fcl-details-price"]],viewQuery:function(e,t){var i;1&e&&M.Sc(Te.e,!0),2&e&&M.wc(i=M.gc())&&(t.viewPort=i.first)},decls:23,vars:3,consts:[[2,"overflow","auto"],[1,"simple","price-table"],[1,"w-60"],[1,"w-120"],[1,"w-100"],[1,"sticky-right-col"],["color","accent",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"w-64","p-0","sticky-right-col"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"table",1),M.Xb(2,"thead"),M.Xb(3,"tr"),M.Xb(4,"th",2),M.Lc(5,"No"),M.Wb(),M.Xb(6,"th"),M.Lc(7,"Price"),M.Wb(),M.Xb(8,"th",3),M.Lc(9,"Unit"),M.Wb(),M.Xb(10,"th",4),M.Lc(11,"Amount"),M.Wb(),M.Xb(12,"th",2),M.Lc(13,"Tax"),M.Wb(),M.Xb(14,"th",4),M.Lc(15,"Currency"),M.Wb(),M.Xb(16,"th",3),M.Lc(17,"Payment Center"),M.Wb(),M.Xb(18,"th",5),M.Xb(19,"mat-icon",6),M.fc("click",(function(e){return e.stopPropagation(),t.createItem()})),M.Lc(20,"add"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(21,"tbody"),M.Jc(22,et,21,10,"tr",7),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Ic("height",t.height,"px"),M.Db(22),M.pc("ngForOf",t.fcl.price))},directives:[f.a,T.s],pipes:[T.g],styles:["fcl-details-price .price-table{font-size:12px}fcl-details-price .price-table td,fcl-details-price .price-table th{padding:8px!important;white-space:nowrap}fcl-details-price .price-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}fcl-details-price .price-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}fcl-details-price .price-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}fcl-details-price .price-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}fcl-details-price .price-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}fcl-details-price .price-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:q.a}}),tt);function at(e,t){if(1&e){var i=M.Yb();M.Xb(0,"tr"),M.Xb(1,"td"),M.Xb(2,"mat-checkbox",20),M.fc("click",(function(e){return M.Bc(i),e.stopPropagation()}))("change",(function(e){M.Bc(i);var a=t.$implicit,n=M.jc();return e?n.getCheck(a):null})),M.Wb(),M.Wb(),M.Xb(3,"td"),M.Lc(4),M.Wb(),M.Xb(5,"td"),M.Lc(6),M.Wb(),M.Xb(7,"td"),M.Lc(8),M.Wb(),M.Xb(9,"td"),M.Lc(10),M.Wb(),M.Xb(11,"td"),M.Lc(12),M.kc(13,"date"),M.Wb(),M.Xb(14,"td"),M.Lc(15),M.kc(16,"date"),M.Wb(),M.Xb(17,"td"),M.Lc(18),M.Wb(),M.Xb(19,"td"),M.Lc(20),M.Wb(),M.Xb(21,"td"),M.Lc(22),M.kc(23,"number"),M.Wb(),M.Wb()}if(2&e){var a=t.$implicit;M.Db(2),M.pc("checked",a.check),M.Db(2),M.Mc(a.short_name),M.Db(2),M.Oc("",a.vessel_name," ",a.voyage_name,""),M.Db(2),M.Mc(a.load_port_name),M.Db(2),M.Mc(a.load_terminal_name),M.Db(2),M.Mc(M.mc(13,11,a.depart_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(M.mc(16,14,a.arrive_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(a.discharge_port_name),M.Db(2),M.Mc(a.discharge_terminal_name),M.Db(2),M.Mc(M.mc(23,17,(a.arrive_time-a.depart_time)/36e5/24,"1.0-0"))}}var nt,rt=((nt=function(){function e(t,i,a,n,r,c,o){var l=this;_classCallCheck(this,e),this.matDialogRef=t,this._data=i,this.authService=a,this._formBuilder=n,this.commonService=r,this.fclDetailsService=c,this.datePipe=o,this.sq=0,this.formSearch=this._formBuilder.group({timeSearch:[new Date]}),this.checkAll=!0,this.isCheck=!1,this.label=i.label,this.id=i.id,this.fcl=i.fcl,this.voyage=i.voyage,this.data=i.data,this.voyage.map((function(e){1==e.check&&(l.isCheck=!0),0==e.check&&(l.checkAll=!1)})),this.checkAll&&(this.isCheck=!1)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getFclVoyage",value:function(){var e=this;setTimeout((function(){e.authService.onRequestChanged.next(!0),e.fclDetailsService.getVoyage(e.data).then((function(t){e.voyage=t.filter((function(t){return t.supplier_id==e.fcl.supplier_id})),e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error load data")}))}))}},{key:"onformSearchSubmit",value:function(e){this.data.from_time=this.datePipe.transform(e.value.timeSearch,"yyyy-MM-dd"),this.getFclVoyage()}},{key:"changeStatus",value:function(){var e=this;if(this.checkAll)this.checkAll=!1,this.isCheck=!1,this.authService.onRequestChanged.next(!0),console.log(this.sq),this.fclDetailsService.deleteAllFclVoyageList(this.id,this.sq).then((function(t){e.authService.onRequestChanged.next(!1),e.voyage.map((function(e){e.check=!1,e.VLid=0}))})).catch((function(t){alert("ERROR"),console.error(t),e.authService.onRequestChanged.next(!1),alert}));else{this.checkAll=!0,this.isCheck=!1,this.authService.onRequestChanged.next(!0);var t=[];this.voyage.map((function(e){e.check||t.push(e.id)})),this.fclDetailsService.createMultipleVoyageList({fcl:this.id,voyage:t,sq:this.sq,update_by:this.authService.email}).then((function(t){e.getFclVoyage()})).catch((function(t){alert("ERROR"),console.error(t),e.authService.onRequestChanged.next(!1)}))}}},{key:"getCheck",value:function(e){var t=this;if(e.voyageList)this.authService.onRequestChanged.next(!0),this.fclDetailsService.deleteFclVoyageList(e.voyageList.VLid).then((function(i){e.voyageList=null,e.check=!1,t.authService.onRequestChanged.next(!1),t.checkAll=!0,t.isCheck=!1,t.voyage.map((function(e){1==e.check&&(t.isCheck=!0),0==e.check&&(t.checkAll=!1)})),t.checkAll&&(t.isCheck=!1)})).catch((function(e){alert("ERROR"),console.error(e),t.authService.onRequestChanged.next(!1)}));else{var i={fcl:this.id,voyage:e.id,sq:this.sq,update_by:this.authService.email};this.authService.onRequestChanged.next(!0),this.fclDetailsService.createVoyageList(i).then((function(i){e.voyageList={VLid:i.insertId},e.check=!0,t.authService.onRequestChanged.next(!1),t.checkAll=!0,t.isCheck=!1,t.voyage.map((function(e){1==e.check&&(t.isCheck=!0),0==e.check&&(t.checkAll=!1)})),t.checkAll&&(t.isCheck=!1)})).catch((function(e){alert("ERROR"),console.error(e),t.authService.onRequestChanged.next(!1)}))}}}]),e}()).\u0275fac=function(e){return new(e||nt)(M.Rb(y.f),M.Rb(y.a),M.Rb(B.a),M.Rb(J.d),M.Rb(ne.a),M.Rb(V),M.Rb(T.f))},nt.\u0275cmp=M.Lb({type:nt,selectors:[["fcl-details-voyage-modal-dialog"]],decls:53,vars:8,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","fcl-detail-voyage-modal","fxLayout","column",1,"p-16","pb-0","m-0"],["name","formSearch",3,"formGroup","keydown.enter","ngSubmit"],["fxLayout","row wrap","fxLayoutAlign","center",1,"courses"],["fxFlex","100","fxFlex.gt-md","50",1,"p-4"],["fxLayout","column","fxFlex","1 1 auto",1,""],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 1 auto",1,"mt-16"],["inputCheck","","matInput","","name","timeSearch","formControlName","timeSearch","required","",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["timeSearchPicker",""],["fxLayout","column","fxLayoutAlign","center start","fxFlex","1 1 auto",1,"mt-16"],["mat-mini-fab","","type","submit","color","accent"],[1,"w-100-p",2,"overflow","auto"],[1,"simple","voyage-table"],[3,"checked","indeterminate","change"],[4,"ngFor","ngForOf"],[3,"checked","click","change"]],template:function(e,t){if(1&e&&(M.Xb(0,"div",0),M.Xb(1,"mat-toolbar",1),M.Xb(2,"mat-toolbar-row",2),M.Xb(3,"span",3),M.Lc(4),M.Wb(),M.Xb(5,"button",4),M.fc("click",(function(e){return t.matDialogRef.close()})),M.Xb(6,"mat-icon"),M.Lc(7,"close"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(8,"div",5),M.Xb(9,"form",6),M.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onformSearchSubmit(t.formSearch)})),M.Xb(10,"div",7),M.Xb(11,"div",8),M.Xb(12,"div",9),M.Xb(13,"div",10),M.Xb(14,"mat-form-field"),M.Xb(15,"mat-label"),M.Lc(16,"Time search"),M.Wb(),M.Sb(17,"input",11),M.Sb(18,"mat-datepicker-toggle",12),M.Sb(19,"mat-datepicker",null,13),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(21,"div",8),M.Xb(22,"div",9),M.Xb(23,"div",14),M.Xb(24,"button",15),M.Xb(25,"mat-icon"),M.Lc(26,"refresh"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(27,"div",16),M.Xb(28,"table",17),M.Xb(29,"thead"),M.Xb(30,"tr"),M.Xb(31,"th"),M.Xb(32,"mat-checkbox",18),M.fc("change",(function(e){return t.changeStatus()})),M.Wb(),M.Wb(),M.Xb(33,"th"),M.Lc(34,"Supplier"),M.Wb(),M.Xb(35,"th"),M.Lc(36,"Vessel voyage"),M.Wb(),M.Xb(37,"th"),M.Lc(38,"Port of loading"),M.Wb(),M.Xb(39,"th"),M.Lc(40,"Load terminal"),M.Wb(),M.Xb(41,"th"),M.Lc(42,"Etd"),M.Wb(),M.Xb(43,"th"),M.Lc(44,"Eta"),M.Wb(),M.Xb(45,"th"),M.Lc(46,"Port of discharge"),M.Wb(),M.Xb(47,"th"),M.Lc(48,"Discharge terminal"),M.Wb(),M.Xb(49,"th"),M.Lc(50,"Transit time"),M.Wb(),M.Wb(),M.Wb(),M.Xb(51,"tbody"),M.Jc(52,at,24,20,"tr",19),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e){var i=M.xc(20);M.Db(4),M.Mc(t.label),M.Db(5),M.pc("formGroup",t.formSearch),M.Db(8),M.pc("matDatepicker",i)("readonly",!0),M.Db(1),M.pc("for",i),M.Db(14),M.pc("checked",t.checkAll)("indeterminate",t.isCheck),M.Db(20),M.pc("ngForOf",t.voyage)}},directives:[x.a,x.c,U.b,U.d,U.c,u.b,f.a,y.d,G.a,J.A,J.q,J.h,d.c,d.f,h.b,J.b,s.b,J.p,J.g,J.w,s.d,d.h,s.a,k.a,T.s],pipes:[T.f,T.g],styles:[".fcl-details-price-modal-dialog .voyage-table{font-size:12px}.fcl-details-price-modal-dialog .voyage-table td,.fcl-details-price-modal-dialog .voyage-table th{padding:8px!important;white-space:nowrap}.fcl-details-price-modal-dialog .voyage-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.fcl-details-price-modal-dialog .voyage-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}.fcl-details-price-modal-dialog .voyage-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}.fcl-details-price-modal-dialog .voyage-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}.fcl-details-price-modal-dialog .voyage-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.fcl-details-price-modal-dialog .voyage-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}@media screen and (min-width:600px)and (max-width:959px){.fcl-details-price-modal-dialog{width:100%}}@media screen and (min-width:960px){.fcl-details-price-modal-dialog{width:1080px}}.fcl-details-price-modal-dialog .mat-dialog-container{padding:0}.fcl-details-price-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.fcl-details-price-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.fcl-details-price-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),nt);function ct(e,t){if(1&e){var i=M.Yb();M.Xb(0,"tr"),M.Xb(1,"td"),M.Lc(2),M.Wb(),M.Xb(3,"td"),M.Lc(4),M.Wb(),M.Xb(5,"td"),M.Lc(6),M.Wb(),M.Xb(7,"td"),M.Lc(8),M.Wb(),M.Xb(9,"td"),M.Lc(10),M.Wb(),M.Xb(11,"td"),M.Lc(12),M.kc(13,"date"),M.Wb(),M.Xb(14,"td"),M.Lc(15),M.kc(16,"date"),M.Wb(),M.Xb(17,"td"),M.Lc(18),M.Wb(),M.Xb(19,"td"),M.Lc(20),M.Wb(),M.Xb(21,"td"),M.Lc(22),M.kc(23,"number"),M.Wb(),M.Xb(24,"td",6),M.Xb(25,"mat-icon",7),M.fc("click",(function(e){M.Bc(i);var a=t.$implicit,n=M.jc(2);return e.stopPropagation(),n.deleteItem(a)})),M.Lc(26,"delete"),M.Wb(),M.Wb(),M.Wb()}if(2&e){var a=t.$implicit,n=t.index;M.Db(2),M.Mc(n+1),M.Db(2),M.Mc(a.short_name),M.Db(2),M.Oc("",a.vessel_name," ",a.voyage_name,""),M.Db(2),M.Mc(a.load_port_name),M.Db(2),M.Mc(a.load_terminal_name),M.Db(2),M.Mc(M.mc(13,11,a.depart_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(M.mc(16,14,a.arrive_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(a.discharge_port_name),M.Db(2),M.Mc(a.discharge_terminal_name),M.Db(2),M.Mc(M.mc(23,17,(a.arrive_time-a.depart_time)/36e5/24,"1.0-0"))}}function ot(e,t){if(1&e){var i=M.Yb();M.Xb(0,"table",2),M.Xb(1,"thead"),M.Xb(2,"tr"),M.Xb(3,"th"),M.Lc(4,"No"),M.Wb(),M.Xb(5,"th"),M.Lc(6,"Supplier"),M.Wb(),M.Xb(7,"th"),M.Lc(8,"Vessel voyage"),M.Wb(),M.Xb(9,"th"),M.Lc(10,"Port of loading"),M.Wb(),M.Xb(11,"th"),M.Lc(12,"Load terminal"),M.Wb(),M.Xb(13,"th"),M.Lc(14,"Etd"),M.Wb(),M.Xb(15,"th"),M.Lc(16,"Eta"),M.Wb(),M.Xb(17,"th"),M.Lc(18,"Port of discharge"),M.Wb(),M.Xb(19,"th"),M.Lc(20,"Discharge terminal"),M.Wb(),M.Xb(21,"th"),M.Lc(22,"Transit time"),M.Wb(),M.Xb(23,"th",3),M.Xb(24,"mat-icon",4),M.fc("click",(function(e){M.Bc(i);var t=M.jc();return e.stopPropagation(),t.createItem()})),M.Lc(25,"add"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(26,"tbody"),M.Jc(27,ct,27,20,"tr",5),M.Wb(),M.Wb()}if(2&e){var a=M.jc();M.Db(27),M.pc("ngForOf",a.fcl.voyageList)}}function lt(e,t){if(1&e){var i=M.Yb();M.Xb(0,"mat-icon",4),M.fc("click",(function(e){M.Bc(i);var t=M.jc(3);return e.stopPropagation(),t.createItemSq(1)})),M.Lc(1,"add"),M.Wb()}}function st(e,t){if(1&e){var i=M.Yb();M.Xb(0,"tr"),M.Xb(1,"td"),M.Lc(2),M.Wb(),M.Xb(3,"td"),M.Lc(4),M.Wb(),M.Xb(5,"td"),M.Lc(6),M.Wb(),M.Xb(7,"td"),M.Lc(8),M.Wb(),M.Xb(9,"td"),M.Lc(10),M.kc(11,"date"),M.Wb(),M.Xb(12,"td"),M.Lc(13),M.kc(14,"date"),M.Wb(),M.Xb(15,"td"),M.Lc(16),M.Wb(),M.Xb(17,"td"),M.Lc(18),M.Wb(),M.Xb(19,"td"),M.Lc(20),M.kc(21,"date"),M.Wb(),M.Xb(22,"td"),M.Lc(23),M.Wb(),M.Xb(24,"td"),M.Lc(25),M.kc(26,"date"),M.Wb(),M.Xb(27,"td"),M.Lc(28),M.kc(29,"number"),M.Wb(),M.Xb(30,"td",6),M.Jc(31,lt,2,0,"mat-icon",10),M.Xb(32,"mat-icon",7),M.fc("click",(function(e){M.Bc(i);var a=t.$implicit,n=M.jc(2);return e.stopPropagation(),n.deleteItem(a.connect?a.connect:a.feeder)})),M.Lc(33,"delete"),M.Wb(),M.Wb(),M.Wb()}if(2&e){var a=t.$implicit,n=t.index,r=M.jc(2);M.Db(2),M.Mc(n+1),M.Db(2),M.Mc(r.fcl.short_name),M.Db(2),M.Oc("",a.feeder.vessel_name," ",a.feeder.voyage_name,""),M.Db(2),M.Mc(a.feeder.load_terminal_name),M.Db(2),M.Mc(M.mc(11,15,a.feeder.depart_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(M.mc(14,18,a.feeder.arrive_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Oc("",null==a.connect?null:a.connect.vessel_name," ",null==a.connect?null:a.connect.voyage_name,""),M.Db(2),M.Mc(null==a.connect?null:a.connect.short_name),M.Db(2),M.Mc(M.mc(21,21,null==a.connect?null:a.connect.depart_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(null==a.connect?null:a.connect.discharge_terminal_name),M.Db(2),M.Mc(M.mc(26,24,null==a.connect?null:a.connect.arrive_time,"EEE MMM dd/yyyy HH:mm")),M.Db(3),M.Mc(a.connect?M.mc(29,27,(a.connect.arrive_time-a.feeder.depart_time)/36e5/24,"1.0-0"):""),M.Db(3),M.pc("ngIf",!a.connect)}}function ut(e,t){if(1&e){var i=M.Yb();M.Xb(0,"table",2),M.Xb(1,"thead"),M.Xb(2,"tr"),M.Sb(3,"th"),M.Xb(4,"th",8),M.Lc(5),M.Wb(),M.Xb(6,"th",9),M.Lc(7),M.Wb(),M.Xb(8,"th",8),M.Lc(9),M.Wb(),M.Sb(10,"th",3),M.Wb(),M.Xb(11,"tr"),M.Xb(12,"th"),M.Lc(13,"No"),M.Wb(),M.Xb(14,"th"),M.Lc(15,"Supplier"),M.Wb(),M.Xb(16,"th"),M.Lc(17,"Vessel voyage"),M.Wb(),M.Xb(18,"th"),M.Lc(19,"Load terminal"),M.Wb(),M.Xb(20,"th"),M.Lc(21,"Etd"),M.Wb(),M.Xb(22,"th"),M.Lc(23,"Eta"),M.Wb(),M.Xb(24,"th"),M.Lc(25,"Connecting Vessel"),M.Wb(),M.Xb(26,"th"),M.Lc(27,"Supplier"),M.Wb(),M.Xb(28,"th"),M.Lc(29,"Etd"),M.Wb(),M.Xb(30,"th"),M.Lc(31,"Discharge terminal"),M.Wb(),M.Xb(32,"th"),M.Lc(33,"Eta"),M.Wb(),M.Xb(34,"th"),M.Lc(35,"Transit time"),M.Wb(),M.Xb(36,"th",3),M.Xb(37,"mat-icon",4),M.fc("click",(function(e){M.Bc(i);var t=M.jc();return e.stopPropagation(),t.createItemSq(0)})),M.Lc(38,"add"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(39,"tbody"),M.Jc(40,st,34,30,"tr",5),M.Wb(),M.Wb()}if(2&e){var a=M.jc();M.Db(5),M.Nc("PORT OF LOADING ",a.fcl.pol_name,""),M.Db(2),M.Nc("TRANS SHIPMENT PORT ",a.fcl.pot_name,""),M.Db(2),M.Nc("PORT OF DISCHARGE ",a.fcl.pod_name,""),M.Db(31),M.pc("ngForOf",a.fcl.voyageList)}}var bt,dt=((bt=function(){function e(t,i,a,n,r,c,o,l){_classCallCheck(this,e),this.router=t,this.route=i,this._activatedRoute=a,this.authService=n,this.changeDetector=r,this.fclDetailsService=c,this._matDialog=o,this.datePipe=l,this.height=560,this.contType=[],this.total={},this._unsubscribeAll=new F.a,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4})),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4:e.authService.screenHeight-64-64-16-4})),this.fclDetailsService.onFclChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.fcl=e.fclDetailsService.fcl,e.id=e.fcl.id,e.data={fcl:e.id,pol:e.fcl.pol,pod:e.fcl.pod,sq:e.fcl.direct,from_time:e.datePipe.transform(new Date,"yyyy-MM-dd"),validity:e.datePipe.transform(e.fcl.validity,"yyyy-MM-dd")}})),this.fclDetailsService.onDataItemChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe((function(t){e.price=e.fclDetailsService.price,e.unit=e.fclDetailsService.priceUnit,e.currency=e.fclDetailsService.currency,e.country=e.fclDetailsService.country}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"createItem",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.fclDetailsService.getVoyage(this.data).then((function(t){e.authService.onRequestChanged.next(!1);var i=t.filter((function(t){return t.supplier_id==e.fcl.supplier_id}));e.dialogRef=e._matDialog.open(rt,{panelClass:"fcl-details-price-modal-dialog",data:{label:"Fcl Vessel Voyage from "+e.fcl.pol_name+" to "+e.fcl.pod_name,id:e.id,sq:e.fcl.sq,fcl:e.fcl,voyage:i,data:e.data}}),e.dialogRef.afterClosed().subscribe((function(t){e.getFclVoyage()}))}))}},{key:"createItemSq",value:function(e){var t=this;0==e&&(this.data.pod=this.fcl.pot),1==e&&(this.data.pol=this.fcl.pot),this.authService.onRequestChanged.next(!0),this.fclDetailsService.getVoyage(this.data).then((function(i){t.authService.onRequestChanged.next(!1),t.dialogRef=t._matDialog.open(rt,{panelClass:"fcl-details-price-modal-dialog",data:{label:"Fcl Vessel Voyage from "+(0==e?t.fcl.pol_name:t.fcl.pot_name)+" to "+(0==e?t.fcl.pot_name:t.fcl.pod_name),id:t.id,sq:e,fcl:t.fcl,voyage:i,data:t.data}}),t.dialogRef.afterClosed().subscribe((function(e){t.getFclVoyage()}))}))}},{key:"getFclVoyage",value:function(){var e=this;setTimeout((function(){e.authService.onRequestChanged.next(!0),e.fclDetailsService.getFclById(e.id).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error load data")}))}))}},{key:"deleteItem",value:function(e){var t=this;confirm("Do you want to delete this voyage list?")&&this.fclDetailsService.deleteFclVoyageList(e.VLid).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?t.getFclVoyage():(console.error(e),alert("Error: No change"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")}))}}]),e}()).\u0275fac=function(e){return new(e||bt)(M.Rb(r.g),M.Rb(r.a),M.Rb(r.a),M.Rb(B.a),M.Rb(M.h),M.Rb(V),M.Rb(y.b),M.Rb(T.f))},bt.\u0275cmp=M.Lb({type:bt,selectors:[["fcl-details-voyage"]],viewQuery:function(e,t){var i;1&e&&M.Sc(Te.e,!0),2&e&&M.wc(i=M.gc())&&(t.viewPort=i.first)},decls:3,vars:4,consts:[[2,"overflow","auto"],["class","simple voyage-table",4,"ngIf"],[1,"simple","voyage-table"],[1,"sticky-right-col"],["color","accent",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"w-64","p-0","sticky-right-col"],["color","warn",1,"cursor-pointer",3,"click"],["colspan","4"],["colspan","3"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Jc(1,ot,28,1,"table",1),M.Jc(2,ut,41,4,"table",1),M.Wb()),2&e&&(M.Ic("height",t.height,"px"),M.Db(1),M.pc("ngIf",0==t.fcl.direct),M.Db(1),M.pc("ngIf",1==t.fcl.direct))},directives:[T.t,f.a,T.s],pipes:[T.f,T.g],styles:["fcl-details-voyage .voyage-table{font-size:12px}fcl-details-voyage .voyage-table td,fcl-details-voyage .voyage-table th{padding:8px!important;white-space:nowrap}fcl-details-voyage .voyage-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}fcl-details-voyage .voyage-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}fcl-details-voyage .voyage-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}fcl-details-voyage .voyage-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}fcl-details-voyage .voyage-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}fcl-details-voyage .voyage-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:q.a}}),bt),ft=i("cfqv");i.d(t,"FclDetailsModule",(function(){return mt}));var pt,ht=[{path:":id",component:Ve,resolve:{data:V},children:[{path:"price",component:it},{path:"voyage",component:dt}]}],mt=((pt=function e(){_classCallCheck(this,e)}).\u0275mod=M.Pb({type:pt}),pt.\u0275inj=M.Ob({factory:function(e){return new(e||pt)},providers:[V],imports:[[r.k.forChild(ht),o.b,c.a,l.b,s.c,u.c,b.b,d.e,f.b,p.b,h.c,m.c,g.b,v.c,y.e,x.b,k.b,S.b,w.d,_.e,W.b,X.b,D.b,L.k,P.c,C.t,R.a,O.a,A.f,Te.g,ft.b]]}),pt)},IOBc:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var a=i("5HBU"),n=i("bTqV"),r=i("kmnG"),c=i("NFeN"),o=i("qFsG"),l=i("wZkO"),s=i("/t3+"),u=i("bSwM"),b=i("+0xr"),d=i("FKr1"),f=i("MutI"),p=i("fXoL"),h=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=p.Pb({type:e}),e.\u0275inj=p.Ob({factory:function(t){return new(t||e)},imports:[[a.a,n.c,r.e,c.b,o.c,l.c,s.b,u.b,d.t,f.c,b.k]]}),e}()},cfqv:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return b}));var a=i("8LU1"),n=i("vxfF"),r=i("fXoL"),c=i("HDdC"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;_classCallCheck(this,e),this._totalWeight=0,this._defaultItemSize=t,this._averageItemSize=t}return _createClass(e,[{key:"getAverageItemSize",value:function(){return this._averageItemSize}},{key:"addSample",value:function(e,t){var i=this._totalWeight+e.end-e.start;if(i){var a=(t+this._averageItemSize*this._totalWeight)/i;a&&(this._averageItemSize=a,this._totalWeight=i)}}},{key:"reset",value:function(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}]),e}(),l=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o;_classCallCheck(this,e),this.scrolledIndexChange=new c.a((function(){throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")})),this._viewport=null,this._removalFailures=0,this._minBufferPx=t,this._maxBufferPx=i,this._averager=a}return _createClass(e,[{key:"attach",value:function(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}},{key:"detach",value:function(){this._viewport=null}},{key:"onContentScrolled",value:function(){this._viewport&&this._updateRenderedContentAfterScroll()}},{key:"onDataLengthChanged",value:function(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}},{key:"onContentRendered",value:function(){this._viewport&&this._checkRenderedContentSize()}},{key:"onRenderedOffsetChanged",value:function(){this._viewport&&this._checkRenderedContentOffset()}},{key:"scrollToIndex",value:function(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}},{key:"updateBufferSize",value:function(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}},{key:"_updateRenderedContentAfterScroll",value:function(){var e=this._viewport,t=e.measureScrollOffset(),i=t-this._lastScrollOffset,a=Math.abs(i),n=e.getRenderedRange(),r=0;if(i<0){var c=n.start*this._averager.getAverageItemSize();i-=r=Math.round((c-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,a/(t+a)))),a=Math.abs(i)}var o=this._lastScrollOffset-this._lastRenderedContentOffset,l=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),s=a+this._minBufferPx-(i<0?o:l);if(s>0)if(a>=e.getViewportSize())this._renderContentForCurrentOffset();else{var u,b,d=Math.max(0,Math.ceil((s-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),f=(i<0?l:o)-this._minBufferPx+a,p=Math.floor(f/this._averager.getAverageItemSize()/(this._removalFailures+1)),h=Math.min(n.end-n.start,Math.max(0,p)),m=this._expandRange(n,i<0?d:0,i>0?d:0);if(i<0?m.end=Math.max(m.start+1,m.end-h):m.start=Math.min(m.end-1,m.start+h),i<0){var g=e.measureRangeSize({start:m.end,end:n.end});g<=f?(u=this._lastRenderedContentOffset+this._lastRenderedContentSize-g,this._removalFailures=0):(m.end=n.end,u=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),b="to-end"}else{var v=e.measureRangeSize({start:n.start,end:m.start});v<=f?(u=this._lastRenderedContentOffset+v,this._removalFailures=0):(m.start=n.start,u=this._lastRenderedContentOffset,this._removalFailures++),b="to-start"}e.setRenderedRange(m),e.setRenderedContentOffset(u+r,b)}else r&&e.setRenderedContentOffset(this._lastRenderedContentOffset+r);this._lastScrollOffset=t}},{key:"_checkRenderedContentSize",value:function(){var e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}},{key:"_checkRenderedContentOffset",value:function(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}},{key:"_renderContentForCurrentOffset",value:function(){var e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;var i=this._averager.getAverageItemSize(),a=Math.min(e.getDataLength()-1,Math.floor(t/i)),n=Math.ceil(this._maxBufferPx/i),r=this._expandRange(this._getVisibleRangeForIndex(a),n,n);e.setRenderedRange(r),e.setRenderedContentOffset(i*r.start)}},{key:"_getVisibleRangeForIndex",value:function(e){var t=this._viewport,i={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},a=i.end-t.getDataLength();return a>0&&(i.start=Math.max(0,i.start-a)),i}},{key:"_expandRange",value:function(e,t,i){var a=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(a.getDataLength(),e.end+i)}}},{key:"_updateTotalContentSize",value:function(e){var t=this._viewport,i=t.getRenderedRange(),a=e+(t.getDataLength()-(i.end-i.start))*this._averager.getAverageItemSize();t.setTotalContentSize(a)}}]),e}();function s(e){return e._scrollStrategy}var u=function(){var e=function(){function e(){_classCallCheck(this,e),this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new l(this.minBufferPx,this.maxBufferPx)}return _createClass(e,[{key:"ngOnChanges",value:function(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=Object(a.f)(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=Object(a.f)(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.Cb([{provide:n.h,useFactory:s,deps:[Object(r.V)((function(){return e}))]}]),r.Bb()]}),e}(),b=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)}}),e}()}}]);