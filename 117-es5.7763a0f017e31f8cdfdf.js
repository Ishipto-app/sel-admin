function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,i=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(s){i=!0,r=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw r}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{"5Rfp":function(e,t,a){"use strict";a.r(t);var n,i=a("tyNb"),r=a("ofXK"),o=a("nmyD"),c=a("STbY"),s=a("/1cH"),b=a("iadO"),l=a("bTqV"),u=a("jaxi"),p=a("7EHt"),h=a("kmnG"),d=a("NFeN"),m=a("Qu3c"),f=a("qFsG"),g=a("wZkO"),k=a("d3UM"),v=a("QibW"),x=a("0IaG"),y=a("/t3+"),w=a("bSwM"),S=a("M9IT"),I=a("xHqg"),X=a("A5z7"),W=a("bv9b"),C=a("XhcP"),A=a("1jcm"),L=a("+0xr"),_=a("vxfF"),D=a("cfqv"),O=a("dNgK"),F=a("5HBU"),j=a("LPQX"),B=a("yrbL"),T=a("XNiG"),R=a("fXoL"),P=a("HX77"),N=a("qXBG"),z=a("2Vo4"),M=a("tk/3"),H=((n=function(){function e(t,a,n){_classCallCheck(this,e),this._httpClient=t,this.authService=a,this.datePipe=n,this.objContainer={},this.onDataChanged=new z.a([]),this.onDataBankChanged=new z.a({}),this.onDataBank2Changed=new z.a({}),this.onDataViewChanged=new z.a([]),this.onBankImportChanged=new z.a([]),this.onFileSearchChanged=new z.a({}),this.onRequestProcessingChanged=new z.a(!1),this.onMovementChanged=new z.a([])}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.authService.routerData=e,new Promise((function(e,a){Promise.all([t.getData(),t.getBank(),t.getBank2()]).then((function(){e()}),a)}))}},{key:"getBankImportById",value:function(e){var t=this,a={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){t._httpClient.get(t.authService.apiUrl+"/sel/fileImport/id/"+e,a).subscribe((function(e){t.fileImport=e,t.onBankImportChanged.next(e),n(e)}),i)}))}},{key:"getData",value:function(){var e=this,t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){e._httpClient.get(e.authService.apiUrl+"/sel/bank-import/data",t).subscribe((function(t){e.account=t.account,e.customer=t.customer,e.type=t.dateType,e.bankType=t.bankType,e.onDataChanged.next(t),a(t)}),n)}))}},{key:"getBank",value:function(){var e=this,t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){e._httpClient.get(e.authService.apiUrl+"/sel/bank-import/sel-bank",t).subscribe((function(t){e.selBank=t,console.log(e.selBank),e.onDataBankChanged.next(t),a(t)}),n)}))}},{key:"getBank2",value:function(){var e=this,t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(a,n){e._httpClient.get(e.authService.apiUrl+"/sel/bank-import/sel-bank2",t).subscribe((function(t){e.onDataBank2Changed.next(t),a(t)}),n)}))}},{key:"saveSelImport",value:function(e){var t=this,a={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,i){t._httpClient.post(t.authService.apiUrl+"/sel/bank-import/save-import",e,a).subscribe((function(e){n(e)}),i)}))}},{key:"updateSelBank",value:function(e,t){var a=this,n={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,r){a._httpClient.put(a.authService.apiUrl+"/sel/connect/bank/"+t,e,n).subscribe((function(e){i(e)}),r)}))}},{key:"getDateTime",value:function(e,t){if("string"==typeof e){var a,n,i=null,r=null;if(t.time?(i=(a=_slicedToArray(e.trim().split(" "),2))[0],r=a[1]):i=e,r){var o=r.trim().split(":");o[0]=parseInt(o[0])<10?"0"+o[0]:o[0],o[1]=parseInt(o[1])<10?"0"+o[1]:o[1],r=o[0]+":"+o[1]}var c=this.type.find((function(e){return e.id==t.dateType})),s=t.year;switch(!0){case 1==c.id&&s:case 2==c.id&&s:n=i.match(/^\d{1,2}[./-]\d{1,2}[./-]\d{4}$/g);break;case 3==c.id&&s:case 4==c.id&&s:n=i.match(/^\d{4}[./-]\d{1,2}[./-]\d{1,2}$/g);break;case 1==c.id&&!s:case 2==c.id&&!s:n=i.match(/^\d{1,2}[./-]\d{1,2}[./-]\d{2}$/g);break;case 3==c.id&&!s:case 4==c.id&&!s:n=i.match(/^\d{2}[./-]\d{1,2}[./-]\d{1,2}$/g)}if(n){var b=i.split(/[./-]+/);s||(b[c.year]=2e3+parseInt(b[c.year])),i=new Date(b[c.year],b[c.month]-1,b[c.day])}else i=null;return[i,r]}if(e>25569&&e<365*((new Date).getFullYear()-1970+1)+25569){var l=new Date(86400*(e-25569)*1e3+6e4*(new Date).getTimezoneOffset()+500);return[l,this.datePipe.transform(l,"HH:mm")]}return[null,null]}},{key:"createData",value:function(e,t,a){var n=this,i=[];return e.map((function(e,r){if(n.checkHeader(r,t)){var o=e[t.column.out-1]?"string"==typeof e[t.column.out-1]?Number(e[t.column.out-1].replace(/\./g,"").replace(",",".")):e[t.column.out-1]:null,c=e[t.column.in-1]?"string"==typeof e[t.column.in-1]?Number(e[t.column.in-1].replace(/\./g,"").replace(",",".")):e[t.column.in-1]:null,s=a[t.account.id+"-"+e[t.column.transaction-1]+"-"+(c?c+"-in":o+"-out")],b=_slicedToArray(n.getDateTime(e[t.column.date-1],t),2),l=b[0],u=(b[1],""),p=[];l||p.push("date"),p.length>0&&(u=p.join(",")),i.push({bank_account_info:t.account,bank_account:t.account.id,date:l,transaction:e[t.column.transaction-1],content:e[t.column.content-1],out:o,in:c,exrate:1,status:1,error:u,duplicate:s||null,select:!1,sheet:e})}})),this.dataView=i,i}},{key:"checkHeader",value:function(e,t){return!t.header||e>0}}]),e}()).\u0275fac=function(e){return new(e||n)(R.bc(M.a),R.bc(N.a),R.bc(r.f))},n.\u0275prov=R.Nb({token:n,factory:n.\u0275fac}),n),q=a("B9zo"),V=a("EwFO"),E=a("3Pt+"),J=a("1G5W"),G=a("Kj3r"),U=a("/uUt"),$=a("0JVi"),Y=a("vI/F"),Q=a("XiUz"),Z=a("znSr"),K=["googleSheet"];function ee(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"Error:\xa0"),R.Wb())}function te(e,t){if(1&e&&(R.Xb(0,"span",18),R.Lc(1,"Error\xa0"),R.Wb()),2&e){var a=R.jc();R.pc("matTooltip",a.errorMessage.value)("matTooltipPosition","left")}}function ae(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"Success\xa0"),R.Wb())}function ne(e,t){if(1&e){var a=R.Yb();R.Xb(0,"button",19),R.fc("click",(function(e){return R.Bc(a),R.jc().openPicker()})),R.Xb(1,"span"),R.Lc(2,"Get file3"),R.Wb(),R.Wb()}}function ie(e,t){if(1&e){var a=R.Yb();R.Xb(0,"button",20),R.fc("click",(function(e){R.Bc(a);var t=R.jc();return e.stopPropagation(),t.changeScreen(!0)})),R.Xb(1,"mat-icon"),R.Lc(2,"flip_to_front"),R.Wb(),R.Wb()}}function re(e,t){if(1&e){var a=R.Yb();R.Xb(0,"button",20),R.fc("click",(function(e){R.Bc(a);var t=R.jc();return e.stopPropagation(),t.changeScreen(!1)})),R.Xb(1,"mat-icon"),R.Lc(2,"flip_to_back"),R.Wb(),R.Wb()}}var oe,ce=function(e,t){return{"red-600-fg":e,"green-600-fg":t}},se=function(e){return{hide:e}},be=((oe=function(){function e(t,a,n){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=a,this.googleApiService=n,this.collapsed=!0,this.fullScreen=!1,this.toggleSidebar=new R.o,this.showHideBar=new R.o,this.refreshPage=new R.o,this.input=new R.o,this.sheetProperties=[],this._unsubscribeAll=new T.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchInput=new E.e(""),this.searchInput.valueChanges.pipe(Object(J.a)(this._unsubscribeAll),Object(G.a)(300),Object(U.a)()).subscribe((function(t){e.input.emit(t)})),this.googleApiService.onFormChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.validForm=e.googleApiService.validForm})),this.googleApiService.stepChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.step=t}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewInit",value:function(){var e=this;this.googleApiService.onGapiChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.auth=t,e.attachSignin()})),this.googleApiService.onFileDataChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(e){}))}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}},{key:"collapse",value:function(){this.collapsed=!0}},{key:"expand",value:function(){this.collapsed=!1}},{key:"attachSignin",value:function(){var e=this;this.auth.attachClickHandler(this.googleSheet._elementRef.nativeElement,{},(function(t){e.token=e.googleApiService.token=t.getAuthResponse().access_token,e.googleApiService.createPicker()}),(function(e){alert("ERROR"),console.error(e)}))}},{key:"openPicker",value:function(){this.googleApiService.createPicker()}},{key:"checkForm",value:function(){this.googleApiService.onValidateForm.next(!0)}}]),e}()).\u0275fac=function(e){return new(e||oe)(R.Rb(N.a),R.Rb($.b),R.Rb(Y.a))},oe.\u0275cmp=R.Lb({type:oe,selectors:[["bank-import-header"]],viewQuery:function(e,t){var a;1&e&&R.Sc(K,!0),2&e&&R.wc(a=R.gc())&&(t.googleSheet=a.first)},inputs:{sidebarName:"sidebarName",errorMessage:"errorMessage",spreadsheetId:"spreadsheetId"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",input:"input"},decls:31,vars:21,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","mr-12",3,"click"],["fxHide","","fxShow.gt-sm","",1,"m-8","font-size-12",3,"ngClass"],[4,"ngIf"],["fxHide.gt-sm","",1,"m-8","font-size-12",3,"ngClass"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["type","button","mat-raised-button","","color","accent","id","googleSheet",1,"m-8",3,"ngClass"],["googleSheet",""],["type","button","mat-raised-button","","color","accent","id","googleSheet2",1,"m-8",3,"ngClass","click"],["type","button","mat-raised-button","","color","accent","class","m-8","id","googleSheet3",3,"click",4,"ngIf"],["mat-icon-button","","class","ml-8",3,"click",4,"ngIf"],["fxHide","","fxShow.gt-xs","",1,"toolbar-separator"],[3,"matTooltip","matTooltipPosition"],["type","button","mat-raised-button","","color","accent","id","googleSheet3",1,"m-8",3,"click"],["mat-icon-button","",1,"ml-8",3,"click"]],template:function(e,t){1&e&&(R.Xb(0,"mat-toolbar",0),R.Xb(1,"div",1),R.Xb(2,"div",2),R.Xb(3,"div",3),R.Xb(4,"button",4),R.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),R.Xb(5,"mat-icon"),R.Lc(6,"menu"),R.Wb(),R.Wb(),R.Xb(7,"button",5),R.fc("click",(function(e){return t.showHideBar.emit()})),R.Xb(8,"mat-icon"),R.Lc(9,"menu"),R.Wb(),R.Wb(),R.Wb(),R.Xb(10,"div",6),R.Jc(11,ee,2,0,"span",7),R.Xb(12,"span"),R.Lc(13),R.Wb(),R.Wb(),R.Xb(14,"div",8),R.Jc(15,te,2,2,"span",9),R.Jc(16,ae,2,0,"span",7),R.Wb(),R.Wb(),R.Xb(17,"div",10),R.Sb(18,"div",11),R.Xb(19,"button",12,13),R.Xb(21,"span"),R.Lc(22,"Get file1"),R.Wb(),R.Wb(),R.Xb(23,"button",14),R.fc("click",(function(e){return t.checkForm()})),R.Xb(24,"span"),R.Lc(25,"Get file2"),R.Wb(),R.Wb(),R.Jc(26,ne,3,0,"button",15),R.Sb(27,"div",11),R.Jc(28,ie,3,0,"button",16),R.Jc(29,re,3,0,"button",16),R.Sb(30,"div",17),R.Wb(),R.Wb(),R.Wb()),2&e&&(R.Db(10),R.pc("ngClass",R.sc(11,ce,t.errorMessage.status,!t.errorMessage.status)),R.Db(1),R.pc("ngIf",t.errorMessage.status),R.Db(2),R.Mc(t.errorMessage.value),R.Db(1),R.pc("ngClass",R.sc(14,ce,t.errorMessage.status,!t.errorMessage.status)),R.Db(1),R.pc("ngIf",t.errorMessage.status),R.Db(1),R.pc("ngIf",!t.errorMessage.status&&t.errorMessage.value),R.Db(3),R.pc("ngClass",R.rc(17,se,t.token||!t.validForm)),R.Db(4),R.pc("ngClass",R.rc(19,se,t.validForm||0!=t.step)),R.Db(3),R.pc("ngIf",t.validForm&&t.token&&0==t.step),R.Db(2),R.pc("ngIf",!t.fullScreen),R.Db(1),R.pc("ngIf",t.fullScreen))},directives:[y.a,Q.b,Q.e,Q.d,Q.c,l.b,Z.b,d.a,r.q,Z.a,r.t,m.a],styles:["bank-import-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}bank-import-header.below{z-index:2}bank-import-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}bank-import-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}bank-import-header .logo .logo-icon{width:38px}bank-import-header .chat-panel-toggle-button,bank-import-header .language-button,bank-import-header .quick-panel-toggle-button,bank-import-header .user-button,bank-import-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){bank-import-header .chat-panel-toggle-button,bank-import-header .language-button,bank-import-header .quick-panel-toggle-button,bank-import-header .user-button,bank-import-header fuse-search-bar{height:56px}}bank-import-header .navbar-toggle-button{min-width:56px;height:56px}bank-import-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){bank-import-header .toolbar-separator{height:56px}}bank-import-header #fileImport-detail-search-bar{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){bank-import-header #fileImport-detail-search-bar{height:56px}}bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-collapser,bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-expander{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-collapser,bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-expander{height:56px!important;line-height:56px!important}}bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-loader{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-loader{height:56px!important;line-height:56px!important}}bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content .fileImport-detail-search-bar-collapser{display:none}bank-import-header #fileImport-detail-search-bar .fileImport-detail-search-bar-content #fileImport-detail-search-bar-input{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}bank-import-header #fileImport-detail-search-bar.expanded{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}bank-import-header #fileImport-detail-search-bar.expanded .fileImport-detail-search-bar-content #fileImport-detail-search-bar-input{display:-webkit-box;display:flex}bank-import-header #fileImport-detail-search-bar.expanded .fileImport-detail-search-bar-content .fileImport-detail-search-bar-collapser{display:block}"],encapsulation:2}),oe),le=a("fE3o"),ue=a("0Zc1"),pe=function(e,t,a,n){return{current:e,completed:t,last:a,first:n}};function he(e,t){if(1&e){var a=R.Yb();R.Xb(0,"div",5),R.fc("click",(function(e){R.Bc(a);var n=t.index;return R.jc().gotoStep(n)})),R.Xb(1,"div",6),R.Xb(2,"span"),R.Lc(3),R.Wb(),R.Wb(),R.Xb(4,"div",7),R.Lc(5),R.Wb(),R.Wb()}if(2&e){var n=t.$implicit,i=t.index,r=t.last,o=t.first,c=R.jc();R.pc("ngClass",R.uc(3,pe,c.currentStep===i,c.currentStep>i,r,o)),R.Db(3),R.Mc(i+1),R.Db(2),R.Mc(n.title)}}var de,me=((de=function(){function e(t,a,n,i,r){_classCallCheck(this,e),this.formBuilder=t,this.authService=a,this.router=n,this.commonService=i,this.googleApiService=r,this.getUpdate=new R.o,this.viewChanged=new R.o,this.height=560,this.steps=[{title:"Set info import",url:"/apps/sel-admin/bank-import/view"},{title:"Import to server",url:"/apps/sel-admin/bank-import/table"}],this._unsubscribeAll=new T.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.currentStep=0,this.authService.windowSizeChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12})),this.googleApiService.stepChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.changeStep(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"gotoStep",value:function(e){0==e&&this.googleApiService.stepChanged.next(e)}},{key:"changeStep",value:function(e){this.currentStep!=e&&this.router.navigate([this.steps[e].url]),this.currentStep=e}}]),e}()).\u0275fac=function(e){return new(e||de)(R.Rb(E.d),R.Rb(N.a),R.Rb(i.g),R.Rb(ue.a),R.Rb(Y.a))},de.\u0275cmp=R.Lb({type:de,selectors:[["bank-import-sidebar"]],inputs:{view:"view",column:"column",supplier:"supplier",moveType:"moveType"},outputs:{getUpdate:"getUpdate",viewChanged:"viewChanged"},decls:5,vars:3,consts:[[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fusePerfectScrollbar","",1,"navbar-scroll-fileImport"],[1,"steps"],["class","step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"step",3,"ngClass","click"],[1,"index"],[1,"title"]],template:function(e,t){1&e&&(R.Xb(0,"div",0),R.Sb(1,"div",1),R.Wb(),R.Xb(2,"div",2),R.Xb(3,"div",3),R.Jc(4,he,6,8,"div",4),R.Wb(),R.Wb()),2&e&&(R.Db(2),R.Ic("height",t.height,"px"),R.Db(2),R.pc("ngForOf",t.steps))},directives:[Q.d,Q.c,V.a,r.s,r.q,Z.a],styles:['bank-import-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}bank-import-sidebar .navbar-scroll-fileImport{background:#fff!important}bank-import-sidebar .navbar-scroll-fileImport .steps{padding:16px 0}bank-import-sidebar .navbar-scroll-fileImport .steps .step{position:relative;display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;padding:16px;cursor:pointer}bank-import-sidebar .navbar-scroll-fileImport .steps .step.current .index span{border:2px solid}bank-import-sidebar .navbar-scroll-fileImport .steps .step.current .title{font-weight:700}bank-import-sidebar .navbar-scroll-fileImport .steps .step.completed .index span{border:2px solid}bank-import-sidebar .navbar-scroll-fileImport .steps .step.first .index:before,bank-import-sidebar .navbar-scroll-fileImport .steps .step.last .index:after{display:none}bank-import-sidebar .navbar-scroll-fileImport .steps .step .index{display:-webkit-box;display:flex;margin-right:12px}bank-import-sidebar .navbar-scroll-fileImport .steps .step .index:after,bank-import-sidebar .navbar-scroll-fileImport .steps .step .index:before{position:absolute;display:block;content:" ";border-left:1px solid;width:1px;height:50%;left:29px;z-index:8}bank-import-sidebar .navbar-scroll-fileImport .steps .step .index:before{top:0}bank-import-sidebar .navbar-scroll-fileImport .steps .step .index:after{bottom:0}bank-import-sidebar .navbar-scroll-fileImport .steps .step .index span{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;width:28px;min-width:28px;max-width:28px;height:28px;border-radius:100%;border:2px solid;font-weight:700;font-size:12px;z-index:10}bank-import-sidebar .navbar-scroll-fileImport .steps .step .title,navbar .navbar-top{display:-webkit-box;display:flex}navbar .navbar-top{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-fileImport{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-fileImport .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}'],encapsulation:2}),de);function fe(e,t){1&e&&(R.Xb(0,"fuse-sidebar",6),R.Xb(1,"div",7),R.Sb(2,"bank-import-sidebar"),R.Wb(),R.Wb())}function ge(e,t){1&e&&R.Sb(0,"router-outlet")}var ke,ve=((ke=function(){function e(t,a,n,i,r,o){_classCallCheck(this,e),this._fuseSidebarService=t,this.authService=a,this.bankImportService=n,this.router=i,this.route=r,this.datePipe=o,this.height=560,this.sidebarPanel=!0,this.errorMessage={status:!1,value:""},this._unsubscribeAll=new T.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.id="test",this.authService.windowSizeChanged.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-54-62})),this.authService.changeScreen.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-54-62:e.authService.screenHeight-64-12-12-54-62}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.bankImportService)}}]),e}()).\u0275fac=function(e){return new(e||ke)(R.Rb(P.a),R.Rb(N.a),R.Rb(H),R.Rb(i.g),R.Rb(i.a),R.Rb(r.f))},ke.\u0275cmp=R.Lb({type:ke,selectors:[["bank-import"]],decls:6,vars:5,consts:[["id","bank-import",1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","bank-import-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"sidebarName","spreadsheetId","errorMessage","showHideBar","refreshPage","toggleSidebar"],[1,"content","p-8",2,"background","white"],[4,"ngIf"],["name","bank-import-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"]],template:function(e,t){1&e&&(R.Xb(0,"div",0),R.Jc(1,fe,3,0,"fuse-sidebar",1),R.Xb(2,"div",2),R.Xb(3,"bank-import-header",3),R.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)})),R.Wb(),R.Xb(4,"div",4),R.Jc(5,ge,1,0,"router-outlet",5),R.Wb(),R.Wb(),R.Wb()),2&e&&(R.Db(1),R.pc("ngIf",t.sidebarPanel),R.Db(2),R.pc("sidebarName","bank-import-sidebar")("spreadsheetId",t.id)("errorMessage",t.errorMessage),R.Db(2),R.pc("ngIf",!0))},directives:[q.a,r.t,V.a,be,le.a,me,i.l],styles:[""]}),ke),xe=a("PVWW");function ye(e){var t=e.value;return""!=t&&t?t&&t.match(/^[A-Z]\d{1,}[:][A-Z]\d{1,}$/g)?null:{validRange:!0}:null}var we=a("FKr1"),Se=["formDirective"],Ie=["googleSheet"];function Xe(e,t){if(1&e&&(R.Xb(0,"mat-option",36),R.Lc(1),R.Wb()),2&e){var a=t.$implicit;R.pc("value",a),R.Db(1),R.Nc(" ",a.account," ")}}function We(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"yyyy/"),R.Wb())}function Ce(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"yy/"),R.Wb())}function Ae(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"/yyyy"),R.Wb())}function Le(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"/yy"),R.Wb())}function _e(e,t){1&e&&(R.Xb(0,"span"),R.Lc(1,"hh:mm"),R.Wb())}function De(e,t){if(1&e&&(R.Xb(0,"mat-radio-button",6),R.Jc(1,We,2,0,"span",37),R.Jc(2,Ce,2,0,"span",37),R.Xb(3,"span"),R.Lc(4),R.Wb(),R.Jc(5,Ae,2,0,"span",37),R.Jc(6,Le,2,0,"span",37),R.Lc(7," \xa0 "),R.Jc(8,_e,2,0,"span",37),R.Wb()),2&e){var a=t.$implicit,n=R.jc();R.pc("value",a.id)("checked",n.form.value.dateType==a.id),R.Db(1),R.pc("ngIf",n.form.value.year&&!a.yearFirst),R.Db(1),R.pc("ngIf",!n.form.value.year&&!a.yearFirst),R.Db(2),R.Mc(a.code),R.Db(1),R.pc("ngIf",n.form.value.year&&a.yearFirst),R.Db(1),R.pc("ngIf",!n.form.value.year&&a.yearFirst),R.Db(2),R.pc("ngIf",n.form.value.time)}}var Oe,Fe=function(){return{value:"50"}},je=((Oe=function(){function e(t,a,n,i,r,o,c,s,b){_classCallCheck(this,e),this.router=t,this.route=a,this.authService=n,this.bankImportService=i,this.googleApiService=r,this.datePipe=o,this.formBuilder=c,this.commonService=s,this.ngZone=b,this.data=[],this.height=560,this.spreadsheetId=null,this.form=this.formBuilder.group({bank:["ACB",E.y.required],account:[null,E.y.required],range:["",ye],header:[!0],dateType:[2],time:[!1],year:[!1],column:this.formBuilder.group({date:[1,E.y.required],transaction:[2,E.y.required],content:[3,E.y.required],in:[5,E.y.required],out:[4,E.y.required]})}),this.sheetProperties=[],this.company="SEL",this.selBank={},this.selBank2=[],this._unsubscribeAll=new T.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-54-8})),this.authService.changeScreen.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-54-8:e.authService.screenHeight-64-12-12-54-8})),this.bankImportService.onDataChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){switch(e.company){case"DNL":e.account=e.bankImportService.account.filter((function(e){return[2,3].includes(e.owner)&&"ACB"==e.bank_info.code}));break;case"SEL":e.account=e.bankImportService.account.filter((function(e){return[1].includes(e.owner)}));break;default:e.account=[]}console.log(e.account),e.type=e.bankImportService.type,e.bankType=e.bankImportService.bankType,e.customer=e.bankImportService.customer})),this.bankImportService.onDataBankChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.selBank=t})),this.bankImportService.onDataBank2Changed.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.selBank2=t})),this.googleApiService.onFileChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){if("INFO"==e.form.value.bank){var a={},n=e.form.value.account.id;t.map((function(e){e[6]&&(a[n+"-"+e[2]+"-in"]=e[6],a[n+"-"+e[3]+"-in"]=e[6])})),e.selBank2.map((function(t,n){var i=t.bank_account+"-"+t.amount+"-"+e.datePipe.transform(t.date,"MM/dd/yyyy")+"-in";if(a[i]){var r={id:t.id,info:a[i]};t.info||e.bankImportService.updateSelBank(r,"in")}}))}else t&&t.length>0&&e.form.valid?e.ngZone.run((function(){e.data=e.bankImportService.createData(t,e.form.value,e.selBank),e.googleApiService.onFileDataChanged.next(e.data),e.googleApiService.stepChanged.next(1)})):e.data=[]})),this.googleApiService.onValidateForm.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){t&&e.validateFormDetail(!0)})),this.form.controls.bank.valueChanges.subscribe((function(t){var a=e.bankType.find((function(e){return e.bank==t}));switch(e.company){case"DNL":e.account=e.bankImportService.account.filter((function(e){return[2,3].includes(e.owner)&&e.bank_info.code==t}));break;case"SEL":e.account=e.bankImportService.account.filter((function(e){return[1].includes(e.owner)}));break;default:e.account=[]}1==e.account.length&&e.form.controls.account.setValue(e.account[0]),a&&(e.form.controls.header.setValue(a.header),e.form.controls.range.setValue(a.range),e.form.controls.dateType.setValue(a.dateType),e.form.controls.year.setValue(a.year),e.form.controls.time.setValue(a.time),e.form.get("column.date").setValue(a.column[0]),e.form.get("column.transaction").setValue(a.column[1]),e.form.get("column.content").setValue(a.column[2]),e.form.get("column.out").setValue(a.column[3]),e.form.get("column.in").setValue(a.column[4]),e.googleApiService.form=a,e.googleApiService.validForm=e.form.valid,e.googleApiService.onFormChanged.next(e.form.valid))})),this.form.valueChanges.subscribe((function(t){e.form.valid&&"string"!=typeof t.place?(e.googleApiService.form=t,e.googleApiService.validForm=e.form.valid,e.googleApiService.onFormChanged.next(!0)):e.googleApiService.onFormChanged.next(!1)})),this.form.get("column.date").valueChanges.pipe(Object(J.a)(this._unsubscribeAll),Object(G.a)(300),Object(U.a)()).subscribe((function(t){e.checkColumn("date",t)})),this.form.get("column.transaction").valueChanges.pipe(Object(J.a)(this._unsubscribeAll),Object(G.a)(300),Object(U.a)()).subscribe((function(t){e.checkColumn("transaction",t)})),this.form.get("column.content").valueChanges.pipe(Object(J.a)(this._unsubscribeAll),Object(G.a)(300),Object(U.a)()).subscribe((function(t){e.checkColumn("content",t)})),this.form.get("column.in").valueChanges.pipe(Object(J.a)(this._unsubscribeAll),Object(G.a)(300),Object(U.a)()).subscribe((function(t){e.checkColumn("in",t)})),this.form.get("column.out").valueChanges.pipe(Object(J.a)(this._unsubscribeAll),Object(G.a)(300),Object(U.a)()).subscribe((function(t){e.checkColumn("out",t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewInit",value:function(){var e=this;this.googleApiService.form&&setTimeout((function(){console.log(e.googleApiService.form),e.form.patchValue(e.googleApiService.form)}))}},{key:"validateFormDetail",value:function(e){!0===e&&("string"==typeof this.form.value.place&&this.form.controls.place.setValue(null),this.markFormGroupTouched(this.form),this.googleApiService.validForm=!1,!0===this.form.valid&&(this.googleApiService.form=this.form.value,this.googleApiService.validForm=!0,this.googleApiService.onFormChanged.next(!0)))}},{key:"markFormGroupTouched",value:function(e){var t=this;Object.values(e.controls).forEach((function(e){e.markAsTouched(),e.controls&&t.markFormGroupTouched(e)}))}},{key:"checkColumn",value:function(e,t){var a=this.form.value.column;a.date==t&&"date"!=e&&this.form.get("column.date").setValue(null),a.transaction==t&&"transaction"!=e&&this.form.get("column.transaction").setValue(null),a.content==t&&"content"!=e&&this.form.get("column.content").setValue(null),a.in==t&&"in"!=e&&this.form.get("column.in").setValue(null),a.out==t&&"out"!=e&&this.form.get("column.out").setValue(null)}}]),e}()).\u0275fac=function(e){return new(e||Oe)(R.Rb(i.g),R.Rb(i.a),R.Rb(N.a),R.Rb(H),R.Rb(Y.a),R.Rb(r.f),R.Rb(E.d),R.Rb(ue.a),R.Rb(R.A))},Oe.\u0275cmp=R.Lb({type:Oe,selectors:[["bank-import-view"]],viewQuery:function(e,t){var a;1&e&&(R.Sc(Se,!0),R.Sc(Ie,!0)),2&e&&(R.wc(a=R.gc())&&(t.templaceNgForm=a.first),R.wc(a=R.gc())&&(t.googleSheet=a.first))},decls:126,vars:24,consts:[["fxLayout","column","fxLayoutAlign","start start"],["name","form",1,"w-100-p",2,"overflow","auto",3,"formGroup","keydown.enter"],["formDirective","ngForm"],[1,"simple","table-format","w-100-p"],[1,"h-60"],["formControlName","bank"],[1,"font-size-12","mb-4",3,"value","checked"],["colspan","5"],["appearance","outline",1,"my-form-field"],["formControlName","account"],["style","font-size:12px",3,"value",4,"ngFor","ngForOf"],[1,"w-240"],["formGroupName","column"],["appearance","outline",1,"my-form-field",2,"width","110px"],["type","number","inputCheck","","aria-label","container","matInput","","formControlName","date","required","",2,"font-size","12px"],["type","number","inputCheck","","aria-label","date","matInput","","formControlName","transaction","required","",2,"font-size","12px"],["type","number","inputCheck","","aria-label","info","matInput","","formControlName","content","required","",2,"font-size","12px"],["type","number","inputCheck","","aria-label","info","matInput","","formControlName","in","required","",2,"font-size","12px"],["type","number","inputCheck","","aria-label","info","matInput","","formControlName","out","required","",2,"font-size","12px"],["fxLayout","row","fxLayoutAlign","start start"],["fxFlex","20",1,"p-4"],["fxFlex","80","formControlName","dateType","fxLayout","column","fxLayoutAlign","start"],["class","font-size-12 mb-4",3,"value","checked",4,"ngFor","ngForOf"],["fxFlex","80","formControlName","year","fxLayout","row","fxLayoutAlign","start"],[1,"font-size-12","mb-4",3,"value"],[1,"font-size-12","mb-4","ml-8",3,"value"],["fxFlex","80","formControlName","time",3,"checked"],[1,"font-size-12"],["appearance","outline","floatLabel","never",1,"my-form-field",2,"width","230px"],["matInput","","inputCheck","","formControlName","range","placeholder","Example: A1:C10 OR None","maxlength","11"],[1,"text-right"],[1,"mr-16"],["colspan","3"],["formControlName","header","fxLayout","row","fxLayoutAlign","start"],[3,"value","checked"],[1,"ml-4",3,"value"],[2,"font-size","12px",3,"value"],[4,"ngIf"]],template:function(e,t){1&e&&(R.Xb(0,"div",0),R.Xb(1,"form",1,2),R.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),R.Xb(3,"table",3),R.Xb(4,"thead"),R.Xb(5,"tr",4),R.Xb(6,"th"),R.Lc(7,"Bank"),R.Wb(),R.Xb(8,"th"),R.Xb(9,"mat-radio-group",5),R.Xb(10,"mat-radio-button",6),R.Lc(11,"ACB"),R.Wb(),R.Wb(),R.Wb(),R.Xb(12,"th"),R.Xb(13,"mat-radio-group",5),R.Xb(14,"mat-radio-button",6),R.Lc(15,"SCB"),R.Wb(),R.Wb(),R.Wb(),R.Xb(16,"th"),R.Xb(17,"mat-radio-group",5),R.Xb(18,"mat-radio-button",6),R.Lc(19,"SHB"),R.Wb(),R.Wb(),R.Wb(),R.Xb(20,"th"),R.Xb(21,"mat-radio-group",5),R.Xb(22,"mat-radio-button",6),R.Lc(23,"INFO"),R.Wb(),R.Wb(),R.Wb(),R.Sb(24,"th"),R.Sb(25,"th"),R.Wb(),R.Xb(26,"tr"),R.Xb(27,"th"),R.Lc(28,"ACCOUNT"),R.Wb(),R.Xb(29,"th",7),R.Xb(30,"mat-form-field",8),R.Xb(31,"mat-select",9),R.Jc(32,Xe,2,2,"mat-option",10),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(33,"tr",4),R.Xb(34,"th"),R.Lc(35,"SHEET"),R.Wb(),R.Xb(36,"th",11),R.Lc(37,"Column 1"),R.Wb(),R.Xb(38,"th"),R.Lc(39,"Column 2"),R.Wb(),R.Xb(40,"th"),R.Lc(41,"Column 3"),R.Wb(),R.Xb(42,"th"),R.Lc(43,"Column 4"),R.Wb(),R.Xb(44,"th"),R.Lc(45,"Column 5"),R.Wb(),R.Wb(),R.Wb(),R.Xb(46,"tbody"),R.Xb(47,"tr",4),R.Xb(48,"td"),R.Lc(49,"NAME"),R.Wb(),R.Xb(50,"td",11),R.Lc(51,"Date"),R.Wb(),R.Xb(52,"td"),R.Lc(53,"Transaction"),R.Wb(),R.Xb(54,"td"),R.Lc(55,"Content"),R.Wb(),R.Xb(56,"td"),R.Lc(57,"Out"),R.Wb(),R.Xb(58,"td"),R.Lc(59,"In"),R.Wb(),R.Wb(),R.Xb(60,"tr",12),R.Xb(61,"td"),R.Lc(62,"COLUMN"),R.Wb(),R.Xb(63,"td"),R.Xb(64,"mat-form-field",13),R.Sb(65,"input",14),R.Wb(),R.Wb(),R.Xb(66,"td"),R.Xb(67,"mat-form-field",13),R.Sb(68,"input",15),R.Wb(),R.Wb(),R.Xb(69,"td"),R.Xb(70,"mat-form-field",13),R.Sb(71,"input",16),R.Wb(),R.Wb(),R.Xb(72,"td"),R.Xb(73,"mat-form-field",13),R.Sb(74,"input",17),R.Wb(),R.Wb(),R.Xb(75,"td"),R.Xb(76,"mat-form-field",13),R.Sb(77,"input",18),R.Wb(),R.Wb(),R.Wb(),R.Xb(78,"tr"),R.Xb(79,"td"),R.Lc(80,"FORMAT"),R.Wb(),R.Xb(81,"td",11),R.Xb(82,"div",19),R.Xb(83,"span",20),R.Lc(84,"DATE:"),R.Wb(),R.Xb(85,"mat-radio-group",21),R.Jc(86,De,9,8,"mat-radio-button",22),R.Wb(),R.Wb(),R.Xb(87,"div",19),R.Xb(88,"span",20),R.Lc(89,"YEAR:"),R.Wb(),R.Xb(90,"mat-radio-group",23),R.Xb(91,"mat-radio-button",24),R.Lc(92,"yyyy"),R.Wb(),R.Xb(93,"mat-radio-button",25),R.Lc(94,"yy"),R.Wb(),R.Wb(),R.Wb(),R.Xb(95,"div",19),R.Xb(96,"span",20),R.Lc(97,"TIME:"),R.Wb(),R.Xb(98,"mat-checkbox",26),R.Xb(99,"span",27),R.Lc(100,"hh:mm"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(101,"td"),R.Lc(102,"Text value"),R.Wb(),R.Xb(103,"td"),R.Lc(104,"Text value"),R.Wb(),R.Xb(105,"td"),R.Lc(106,"Number"),R.Wb(),R.Xb(107,"td"),R.Lc(108,"Number"),R.Wb(),R.Wb(),R.Xb(109,"tr"),R.Xb(110,"td"),R.Lc(111,"RANGE"),R.Wb(),R.Xb(112,"td"),R.Xb(113,"mat-form-field",28),R.Sb(114,"input",29),R.Wb(),R.Wb(),R.Xb(115,"td",30),R.Xb(116,"span",31),R.Lc(117,"HEADER"),R.Wb(),R.Wb(),R.Xb(118,"td",32),R.Xb(119,"mat-radio-group",33),R.Xb(120,"mat-radio-button",34),R.Lc(121,"None"),R.Wb(),R.Xb(122,"mat-radio-button",35),R.Lc(123,"First row"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Lc(124),R.kc(125,"json"),R.Wb()),2&e&&(R.pc("@animateStagger",R.qc(23,Fe)),R.Db(1),R.Ic("height",t.height,"px"),R.pc("formGroup",t.form),R.Db(9),R.pc("value","ACB")("checked","ACB"==t.form.value.bank),R.Db(4),R.pc("value","SCB")("checked","SCB"==t.form.value.bank),R.Db(4),R.pc("value","SHB")("checked","SHB"==t.form.value.bank),R.Db(4),R.pc("value","INFO")("checked","INFO"==t.form.value.bank),R.Db(10),R.pc("ngForOf",t.account),R.Db(54),R.pc("ngForOf",t.type),R.Db(5),R.pc("value",!0),R.Db(2),R.pc("value",!1),R.Db(5),R.pc("checked",t.form.value.time),R.Db(22),R.pc("value",!1)("checked",!t.form.value.header),R.Db(2),R.pc("value",!0),R.Db(2),R.Nc(" ",R.lc(125,21,t.form.value),"\n"))},directives:[Q.d,Q.c,E.A,E.q,E.h,v.b,E.p,E.g,v.a,h.c,k.a,r.s,E.i,E.u,f.b,E.b,E.w,Q.b,w.a,E.k,we.n,r.t],pipes:[r.k],styles:["bank-import-view .table-format{font-size:12px}bank-import-view .table-format td,bank-import-view .table-format th{padding:4px!important}bank-import-view .table-format .my-form-field{width:100%}bank-import-view .table-format .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}bank-import-view .table-format .my-form-field .mat-form-field-infix{margin-top:-.75em}bank-import-view .table-format .my-form-field .mat-select-value-text{font-size:12px}bank-import-view cdk-virtual-scroll-viewport{width:100%}bank-import-view cdk-virtual-scroll-viewport .bank-import-table{font-size:12px}bank-import-view cdk-virtual-scroll-viewport .bank-import-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}bank-import-view cdk-virtual-scroll-viewport .bank-import-table td,bank-import-view cdk-virtual-scroll-viewport .bank-import-table th{padding:8px!important;font-size:12px}"],encapsulation:2,data:{animation:xe.a}}),Oe),Be=function(e){return{"red-100-bg":e}};function Te(e,t){if(1&e){var a=R.Yb();R.Xb(0,"tr",5),R.fc("click",(function(e){R.Bc(a);var n=t.$implicit;return R.jc().openFormBank.emit(n)})),R.Xb(1,"td"),R.Lc(2),R.Wb(),R.Xb(3,"td"),R.Lc(4),R.kc(5,"date"),R.Wb(),R.Xb(6,"td"),R.Lc(7),R.Wb(),R.Xb(8,"td",6),R.Lc(9),R.kc(10,"number"),R.Wb(),R.Xb(11,"td",6),R.Lc(12),R.kc(13,"number"),R.Wb(),R.Xb(14,"td"),R.Lc(15),R.Wb(),R.Xb(16,"td"),R.Lc(17),R.Wb(),R.Xb(18,"td",7),R.Lc(19),R.Wb(),R.Xb(20,"td"),R.Lc(21),R.Wb(),R.Xb(22,"td",8),R.Xb(23,"mat-icon",9),R.fc("click",(function(e){R.Bc(a);var n=t.$implicit,i=R.jc();return e.stopPropagation(),i.deleteItem(n)})),R.Lc(24,"delete"),R.Wb(),R.Wb(),R.Wb()}if(2&e){var n=t.$implicit,i=t.index;R.pc("ngClass",R.rc(22,Be,""!=n.error||n.duplicate)),R.Db(2),R.Mc(i+1),R.Db(2),R.Mc(R.mc(5,13,n.date,"MM/dd/yyyy")),R.Db(3),R.Mc(n.transaction),R.Db(2),R.Mc(R.mc(10,16,n.in,"VND"==n.bank_account_info.currency_info.code?"1.0-0":"1.2-2")),R.Db(3),R.Mc(R.mc(13,19,n.out,"VND"==n.bank_account_info.currency_info.code?"1.0-0":"1.2-2")),R.Db(3),R.Mc(n.content),R.Db(2),R.Mc(1==n.status?"Valid":"Invalid"),R.Db(2),R.Pc("",n.bank_account_info.account," (",n.bank_account_info.bank_info.code,"-",n.bank_account_info.currency_info.code,")"),R.Db(2),R.Oc("",n.error,"",n.duplicate?"Error duplicate":"","")}}function Re(e,t){if(1&e&&(R.Xb(0,"mat-option",19),R.Lc(1),R.Wb()),2&e){var a=t.$implicit,n=R.jc(2);R.pc("value",a),R.Db(1),R.Pc("",50*a+1," - ",50*(a+1)<n.bankImport.length?50*(a+1):n.bankImport.length," / ",n.bankImport.length,"")}}function Pe(e,t){if(1&e){var a=R.Yb();R.Xb(0,"div"),R.Xb(1,"mat-button-toggle-group",10),R.Xb(2,"mat-button-toggle",11),R.fc("change",(function(e){return R.Bc(a),R.jc().changeItem(e)})),R.Xb(3,"mat-icon",12),R.Lc(4,"fast_rewind"),R.Wb(),R.Wb(),R.Xb(5,"mat-button-toggle"),R.Xb(6,"div",13),R.Xb(7,"mat-select",14),R.fc("ngModelChange",(function(e){return R.Bc(a),R.jc().onChangeSelect(e)})),R.Jc(8,Re,2,4,"mat-option",15),R.Wb(),R.Wb(),R.Wb(),R.Xb(9,"mat-button-toggle",16),R.fc("change",(function(e){return R.Bc(a),R.jc().changeItem(e)})),R.Xb(10,"mat-icon",12),R.Lc(11,"fast_forward"),R.Wb(),R.Wb(),R.Wb(),R.Xb(12,"button",17),R.fc("click",(function(e){R.Bc(a);var t=R.jc();return t.saveImport(t.bankFilter)})),R.Lc(13,"Save"),R.Wb(),R.Xb(14,"button",18),R.fc("click",(function(e){return R.Bc(a),R.jc().goBack(!0)})),R.Xb(15,"span"),R.Lc(16,"New Import"),R.Wb(),R.Wb(),R.Xb(17,"button",18),R.fc("click",(function(e){return R.Bc(a),R.jc().goBack()})),R.Xb(18,"span"),R.Lc(19,"Back"),R.Wb(),R.Wb(),R.Wb()}if(2&e){var n=R.jc();R.Db(2),R.pc("disabled",0==n.selectedItem),R.Db(5),R.pc("ngModel",n.selectedItem),R.Db(1),R.pc("ngForOf",n.arrSelect),R.Db(1),R.pc("disabled",n.selectedItem==n.arrSelect.length-1),R.Db(3),R.pc("disabled",0==n.bankImport||n.check)}}var Ne,ze=function(){return{value:"50"}},Me=((Ne=function(){function e(t,a,n,i,r,o,c,s){_classCallCheck(this,e),this._formBuilder=t,this.router=a,this.route=n,this.authService=i,this.datePipe=r,this.bankImportService=o,this.googleApiService=c,this._matDialog=s,this.height=560,this.selectedItem=0,this.bankFilter=[],this.arrSelect=[],this.formBankImport=this._formBuilder.group({bank_account:[null,E.y.required]}),this.check=!1,this._unsubscribeAll=new T.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-54-8-72})),this.authService.changeScreen.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-54-8-72:e.authService.screenHeight-64-12-12-54-8-72})),this.googleApiService.onFileDataChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.bankImport=t,e.arrSelect=[];for(var a=Math.round(e.bankImport.length/50),n=0;n<=a;++n)e.arrSelect.push(n);e.bankFilter=[],e.selectedItem=0,e.check=!1,e.bankImport.map((function(t,a){a>=50*e.selectedItem&&a<=50*(e.selectedItem+1)-1&&(e.bankFilter.push(t),(t.error||t.duplicate)&&(e.check=!0))}))})),this.bankImportService.onDataChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.type=e.bankImportService.type,e.bankType=e.bankImportService.bankType})),this.bankImportService.onDataBankChanged.pipe(Object(J.a)(this._unsubscribeAll)).subscribe((function(t){e.selBank=t}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"onChangeSelect",value:function(e){var t=this;this.selectedItem=e,this.bankFilter=[],this.check=!1,this.bankImport.map((function(e,a){a>=50*t.selectedItem&&a<=50*(t.selectedItem+1)-1&&(t.bankFilter.push(e),e.error&&(t.check=!0))}))}},{key:"changeItem",value:function(e){var t=this;this.selectedItem=this.selectedItem+parseInt(e.value),this.bankFilter=[],this.check=!1,this.bankImport.map((function(e,a){a>=50*t.selectedItem&&a<=50*(t.selectedItem+1)-1&&(t.bankFilter.push(e),e.error&&(t.check=!0))}))}},{key:"saveImport",value:function(e){var t=this,a=JSON.parse(JSON.stringify(e)),n="";a.map((function(e){switch(e.date=t.datePipe.transform(e.date,"yyyy-MM-dd"),e.update_by=t.authService.user,n){case"in":e.out&&(n="all");break;case"out":e.in&&(n="all");break;case"":e.in&&(n="in"),e.out&&(n="out")}})),this.authService.onRequestChanged.next(!0),this.bankImportService.saveSelImport(a).then((function(a){t.authService.onRequestChanged.next(!1),console.log(a),("in"==n||"out"==n)&&a.insertId>0?(e.map((function(e){return e.error="save success"})),t.check=!0,t.bankImportService.getBank()):"all"==n&&a.bankIn.insertId>0&&a.bankOut.insertId>0?(e.map((function(e){return e.error="save success"})),t.check=!0,t.bankImportService.getBank()):(alert("ERROR"),console.error(a))})).catch((function(e){t.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}},{key:"resetTable",value:function(){this.googleApiService.onFileDataChanged.next([])}},{key:"deleteItem",value:function(e){var t=this.bankImport.indexOf(e);this.bankImport.splice(t,1),this.googleApiService.onFileDataChanged.next(this.bankImport)}},{key:"getCheck",value:function(){var e=!1;return this.bankImport.map((function(t){(t.error||t.duplicate)&&(e=!0)})),e}},{key:"goBack",value:function(e){e&&(this.googleApiService.form=null),this.googleApiService.stepChanged.next(0)}}]),e}()).\u0275fac=function(e){return new(e||Ne)(R.Rb(E.d),R.Rb(i.g),R.Rb(i.a),R.Rb(N.a),R.Rb(r.f),R.Rb(H),R.Rb(Y.a),R.Rb(x.b))},Ne.\u0275cmp=R.Lb({type:Ne,selectors:[["bank-import-table"]],viewQuery:function(e,t){var a;1&e&&R.Sc(_.e,!0),2&e&&R.wc(a=R.gc())&&(t.viewPort=a.first)},decls:27,vars:6,consts:[[1,"w-100-p","table-content"],[1,"simple","bankImport-list-table"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"p-8","w-100-p","mt-8"],[4,"ngIf"],[3,"ngClass","click"],[1,"text-right","pr-8"],[1,"w-80"],[1,"w-40","p-0"],["color","warn",1,"cursor-pointer",3,"click"],[1,"mr-8"],["value","-1",3,"disabled","change"],["color","accent"],[1,"w-140"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","1",3,"disabled","change"],["mat-raised-button","","type","button","color","accent",1,"mt-8","mr-8",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",1,"ml-8",3,"click"],[3,"value"]],template:function(e,t){1&e&&(R.Xb(0,"div",0),R.Xb(1,"table",1),R.Xb(2,"thead"),R.Xb(3,"tr"),R.Xb(4,"th"),R.Lc(5,"No"),R.Wb(),R.Xb(6,"th"),R.Lc(7,"Date"),R.Wb(),R.Xb(8,"th"),R.Lc(9,"Transaction"),R.Wb(),R.Xb(10,"th"),R.Lc(11,"Amount In"),R.Wb(),R.Xb(12,"th"),R.Lc(13,"Amount Out"),R.Wb(),R.Xb(14,"th"),R.Lc(15,"Content"),R.Wb(),R.Xb(16,"th"),R.Lc(17,"Status"),R.Wb(),R.Xb(18,"th"),R.Lc(19,"Account"),R.Wb(),R.Xb(20,"th"),R.Lc(21,"Error"),R.Wb(),R.Sb(22,"th"),R.Wb(),R.Wb(),R.Xb(23,"tbody"),R.Jc(24,Te,25,24,"tr",2),R.Wb(),R.Wb(),R.Wb(),R.Xb(25,"div",3),R.Jc(26,Pe,20,5,"div",4),R.Wb()),2&e&&(R.Ic("height",t.height,"px"),R.pc("@animateStagger",R.qc(5,ze)),R.Db(24),R.pc("ngForOf",t.bankFilter),R.Db(2),R.pc("ngIf",t.bankImport.length>0))},directives:[r.s,r.t,r.q,Z.a,d.a,u.b,u.a,k.a,E.w,E.p,E.s,l.b,we.n],pipes:[r.f,r.g],styles:["bank-import-table .table-content{overflow:auto}bank-import-table .table-content .bankImport-list-table{width:100%}bank-import-table .table-content .bankImport-list-table td,bank-import-table .table-content .bankImport-list-table th{padding:8px;font-size:12px}bank-import-table .table-content .bankImport-list-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}bank-import-table .table-content .bankImport-list-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}bank-import-table .table-content .bankImport-list-table tr:hover{background:#e1f5fe}bank-import-table .table-content .bankImport-list-table tr:active{background:#81d4fa}"],encapsulation:2,data:{animation:xe.a}}),Ne);a.d(t,"BankImportModule",(function(){return Ve}));var He,qe=[{path:"",component:ve,resolve:{data:H,google:Y.a},children:[{path:"view",component:je},{path:"table",component:Me}]}],Ve=((He=function e(){_classCallCheck(this,e)}).\u0275mod=R.Pb({type:He}),He.\u0275inj=R.Ob({factory:function(e){return new(e||He)},providers:[H],imports:[[i.k.forChild(qe),r.c,c.b,s.b,b.c,l.c,u.c,p.b,h.e,d.b,m.b,f.c,g.c,k.b,v.c,x.e,y.b,w.b,S.b,I.d,X.e,W.b,C.b,A.b,L.k,_.g,D.b,O.c,F.a,j.f,o.a]]}),He)}}]);