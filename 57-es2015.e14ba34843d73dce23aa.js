(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{IOBc:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var r=i("5HBU"),a=i("bTqV"),n=i("kmnG"),o=i("NFeN"),c=i("qFsG"),s=i("wZkO"),l=i("/t3+"),h=i("bSwM"),b=i("+0xr"),u=i("FKr1"),p=i("MutI"),m=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},imports:[[r.a,a.c,n.e,o.b,c.c,s.c,l.b,h.b,u.t,p.c,b.k]]}),e})()},ZVYM:function(e,t,i){"use strict";i.r(t);var r=i("tyNb"),a=i("STbY"),n=i("/1cH"),o=i("iadO"),c=i("bTqV"),s=i("7EHt"),l=i("kmnG"),h=i("NFeN"),b=i("Qu3c"),u=i("qFsG"),p=i("wZkO"),m=i("d3UM"),d=i("QibW"),f=i("0IaG"),g=i("/t3+"),v=i("bSwM"),x=i("M9IT"),S=i("xHqg"),y=i("A5z7"),_=i("bv9b"),w=i("XhcP"),C=i("FKr1"),k=i("1jcm"),D=i("+0xr"),W=i("Dh3D"),A=i("IOBc"),P=i("212X"),X=i("5HBU"),I=i("LPQX"),L=i("fXoL"),O=i("ofXK");function R(e,t){1&e&&L.Sb(0,"router-outlet")}let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=L.Lb({type:e,selectors:[["simba"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&L.Jc(0,R,1,0,"router-outlet",0),2&e&&L.pc("ngIf",!0)},directives:[O.t,r.l],styles:[""]}),e})();var N=i("XNiG"),j=i("1G5W"),F=i("HX77"),B=i("2Vo4"),V=i("jD4G"),M=i("tk/3"),H=i("qXBG");let z=(()=>{class e{constructor(e,t,i){this._httpClient=e,this.authService=t,this.datePipe=i,this.defaultSearch={formSearch:{pay_party:null,issue_party:null,customer:null,agent:113,voyage:null,payment_center:null,date_from:"11/01/2022",date_to:"11/30/2022"}},this.headerImp=["No","Vessel & Voyage","Eta","Owner","Daily","BL","20","40","OF PP","OF CL","Total","Com 20","Com 40","Total Com","Total USD","CL SGD","Paid SGD","Total SGD"],this.headerExp=["No","Vessel & Voyage","Etd","Owner","Exrate","BL","20","40","OF PP","OF CL","BAF","ECRS","LSS","DG","Total","Paid OF","Paid BAF","Com 20","Com 40","Total Com","Total USD","CL SGD","Paid SGD","Total SGD"],this.onDataChanged=new B.a([]),this.onDataItemChanged=new B.a([]),this.onShipmentChanged=new B.a({}),this.onSearchTextChanged=new N.a}resolve(e){return e&&(this.authService.routerData=e),this.currenSearch||(this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch))),new Promise((e,t)=>{Promise.all([this.getData(),this.getItemData(),this.getSelShipmentSimba(this.currenSearch.formSearch)]).then(([t])=>{this.onSearchTextChanged.subscribe(e=>{this.searchText=e;let t=this.shipmentAddInfo.slice();this.searchText&&""!==this.searchText&&(t=V.a.filterArrayByString(t,this.searchText));let i=this.shipmentImpAddInfo.slice();this.searchText&&""!==this.searchText&&(i=V.a.filterArrayByString(i,this.searchText)),this.onShipmentChanged.next({import:i,export:t})}),e()},t)})}getData(){let e={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/data",e).subscribe(e=>{this.dataCustomer=e[0],this.dataSupplier=e[1],this.users=e[3],this.onDataChanged.next(e),t(e)},i)})}getItemData(){let e={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel/book/book",e).subscribe(e=>{this.agent=e.agent,this.commodity=e.commodity,this.packageType=e.packageType,this.price=e.price,this.currency=e.currency,this.country=e.country,this.depot=e.depot,this.onDataItemChanged.next(e),t(e)},i)})}getSelShipmentSimba(e){this.dateFrom=e.date_from?e.date_from:null,this.dateTo=e.date_to?e.date_to:null;let t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/shipment/soa-agent",e,t).subscribe(e=>{console.log(e),this.shipment=e.export.shipment,this.shipmentAddInfo=e.export.shipmentAddInfo,this.sptPrice=e.export.price,this.sptVoyage=e.export.voyage;let t=this.shipmentAddInfo.slice();this.searchText&&""!==this.searchText&&(t=V.a.filterArrayByString(t,this.searchText)),this.shipmentImp=e.import.shipment,this.shipmentImpAddInfo=e.import.shipmentAddInfo,this.sptPriceImp=e.import.price,this.sptVoyageImp=e.import.voyage;let r=this.shipmentImpAddInfo.slice();this.searchText&&""!==this.searchText&&(r=V.a.filterArrayByString(r,this.searchText)),this.onShipmentChanged.next({import:r,export:t}),i(e)},r)})}createSelRevenue(e){let t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/revenue",e,t).subscribe(e=>{i(e)},r)})}createSelCost(e){let t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/cost",e,t).subscribe(e=>{i(e)},r)})}updateSelRevenue(e){let t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/revenue",e,t).subscribe(e=>{i(e)},r)})}updateSelCost(e){let t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/cost",e,t).subscribe(e=>{i(e)},r)})}updateMultiShipmentItem(e){let t={headers:new M.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/shipment/multi-item",e,t).subscribe(e=>{i(e)},r)})}}return e.\u0275fac=function(t){return new(t||e)(L.bc(M.a),L.bc(H.a),L.bc(O.f))},e.\u0275prov=L.Nb({token:e,factory:e.\u0275fac}),e})();var E=i("vI/F"),G=i("B9zo"),q=i("0JVi"),J=i("XiUz"),U=i("znSr");function K(e,t){if(1&e){const e=L.Yb();L.Xb(0,"button",12),L.fc("click",(function(t){L.Bc(e);const i=L.jc();return t.stopPropagation(),i.changeScreen(!0)})),L.Xb(1,"mat-icon"),L.Lc(2,"flip_to_front"),L.Wb(),L.Wb()}}function $(e,t){if(1&e){const e=L.Yb();L.Xb(0,"button",12),L.fc("click",(function(t){L.Bc(e);const i=L.jc();return t.stopPropagation(),i.changeScreen(!1)})),L.Xb(1,"mat-icon"),L.Lc(2,"flip_to_back"),L.Wb(),L.Wb()}}let Y=(()=>{class e{constructor(e,t){this.authService=e,this._fuseConfigService=t,this.fullScreen=!1,this.toggleSidebar=new L.o,this.showHideBar=new L.o,this.refreshPage=new L.o,this.searchFilter=new L.o,this._unsubscribeAll=new N.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(q.b))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-header"]],inputs:{sidebarName:"sidebarName",searchText:"searchText"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:29,vars:4,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"]],template:function(e,t){1&e&&(L.Xb(0,"mat-toolbar",0),L.Xb(1,"div",1),L.Xb(2,"div",2),L.Xb(3,"div",3),L.Xb(4,"button",4),L.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),L.Xb(5,"mat-icon"),L.Lc(6,"menu"),L.Wb(),L.Wb(),L.Xb(7,"button",5),L.fc("click",(function(e){return t.showHideBar.emit()})),L.Xb(8,"mat-icon"),L.Lc(9,"menu"),L.Wb(),L.Wb(),L.Wb(),L.Xb(10,"button",6),L.Xb(11,"span",7),L.Lc(12,"Inward"),L.Wb(),L.Xb(13,"mat-icon",8),L.Lc(14,"equalizer"),L.Wb(),L.Wb(),L.Xb(15,"button",6),L.Xb(16,"span",7),L.Lc(17,"Outward"),L.Wb(),L.Xb(18,"mat-icon",8),L.Lc(19,"equalizer"),L.Wb(),L.Wb(),L.Wb(),L.Xb(20,"div",9),L.Sb(21,"div",10),L.Jc(22,K,3,0,"button",11),L.Jc(23,$,3,0,"button",11),L.Sb(24,"div",10),L.Xb(25,"button",12),L.fc("click",(function(e){return t.toggleSidebar.emit("simba-setting")})),L.Xb(26,"mat-icon"),L.Lc(27,"settings"),L.Wb(),L.Wb(),L.Sb(28,"div",10),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Db(10),L.pc("routerLink","/apps/sel-admin/simba/import"),L.Db(5),L.pc("routerLink","/apps/sel-admin/simba/export"),L.Db(7),L.pc("ngIf",!t.fullScreen),L.Db(1),L.pc("ngIf",t.fullScreen))},directives:[g.a,J.b,J.e,J.d,J.c,c.b,U.b,h.a,r.i,r.h,O.t],styles:["simba-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}simba-header.below{z-index:2}simba-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}simba-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}simba-header .logo .logo-icon{width:38px}simba-header .chat-panel-toggle-button,simba-header .language-button,simba-header .quick-panel-toggle-button,simba-header .user-button,simba-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){simba-header .chat-panel-toggle-button,simba-header .language-button,simba-header .quick-panel-toggle-button,simba-header .user-button,simba-header fuse-search-bar{height:56px}}simba-header .navbar-toggle-button{min-width:56px;height:56px}simba-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){simba-header .toolbar-separator{height:56px}}"],encapsulation:2}),e})();var Q=i("3Pt+"),Z=i("0Zc1"),ee=i("vxfF");function te(e,t){if(1&e&&(L.Xb(0,"th",7),L.Xb(1,"mat-form-field",8),L.Sb(2,"input",9),L.Wb(),L.Wb()),2&e){const e=t.index,i=L.jc();L.Ic("top",i.inverseOfTranslation),L.Db(2),L.pc("formControlName",e)}}function ie(e,t){if(1&e&&(L.Vb(0),L.Xb(1,"td",7),L.Lc(2),L.Wb(),L.Ub()),2&e){const e=t.$implicit;L.Db(2),L.Mc(e)}}function re(e,t){if(1&e&&(L.Vb(0),L.Xb(1,"tr"),L.Jc(2,ie,3,1,"ng-container",10),L.Wb(),L.Ub()),2&e){const e=t.$implicit;L.Db(2),L.pc("ngForOf",e)}}let ae=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.datePipe=t,this.formBuilder=i,this.commonService=r,this.form=this.formBuilder.group({header:this.formBuilder.array([])})}ngOnInit(){this.getHeader()}ngOnChanges(e){e.data&&(e.data.currentValue||null==e.data.currentValue)&&(this.data=e.data.currentValue)}get headerAdd(){return this.form.get("header")}addHeader(){this.headerAdd.push(new Q.e(""))}removeHeader(e){this.headerAdd.removeAt(e)}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}getHeader(){this.data[0]&&this.data[0].length==this.header.length&&this.header.map(e=>{this.headerAdd.push(new Q.e(e))})}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(O.f),L.Rb(Q.d),L.Rb(Z.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-import-excel-table"]],viewQuery:function(e,t){var i;1&e&&L.Sc(ee.e,!0),2&e&&L.wc(i=L.gc())&&(t.viewPort=i.first)},inputs:{height:"height",data:"data",header:"header"},features:[L.Bb()],decls:10,vars:5,consts:[["name","form","fxLayout","column",1,"content-view",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["itemSize","34",1,"h-100-p"],[1,"simple","simba-excel-table"],["formArrayName","header"],["class","",3,"top",4,"ngFor","ngForOf"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,""],[1,"my-form-field"],["matInput","","inputCheck","","type","text",2,"font-size","12px",3,"formControlName"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(L.Xb(0,"form",0,1),L.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),L.Xb(2,"cdk-virtual-scroll-viewport",2),L.Xb(3,"table",3),L.Xb(4,"thead"),L.Xb(5,"tr"),L.Vb(6,4),L.Jc(7,te,3,3,"th",5),L.Ub(),L.Wb(),L.Wb(),L.Xb(8,"tbody"),L.Jc(9,re,3,1,"ng-container",6),L.Wb(),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Ic("height",t.height-136,"px"),L.pc("formGroup",t.form),L.Db(7),L.pc("ngForOf",t.form.value.header),L.Db(2),L.pc("cdkVirtualForOf",t.data))},directives:[Q.A,Q.q,J.d,Q.h,ee.e,ee.a,Q.c,O.s,ee.d,l.c,u.b,Q.b,Q.p,Q.g],styles:["simba-import-excel-table .content-view{overflow:auto}simba-import-excel-table .content-view .width-form{width:1400px}@media screen and (min-width:960px)and (max-width:1279px){simba-import-excel-table .content-view .width-form{width:100%}}simba-import-excel-table .content-view .rev-color{background-color:#b3e5fc}simba-import-excel-table .content-view .cost-color{background-color:#ffcf9c}simba-import-excel-table .content-view .simba-excel-table{font-size:12px}simba-import-excel-table .content-view .simba-excel-table .border-right{border-right:1px solid rgba(0,0,0,.12)}simba-import-excel-table .content-view .simba-excel-table td,simba-import-excel-table .content-view .simba-excel-table th{padding:8px!important;white-space:nowrap}simba-import-excel-table .content-view .simba-excel-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}simba-import-excel-table .content-view .simba-excel-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}simba-import-excel-table .content-view .simba-excel-table .sticky-left-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}simba-import-excel-table .content-view .simba-excel-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:40px;background-color:#fff;z-index:20}simba-import-excel-table .content-view .simba-excel-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}simba-import-excel-table .content-view .simba-excel-table .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}simba-import-excel-table .content-view .simba-excel-table .my-form-field .mat-form-field-infix{margin-top:-1.25em;width:100%!important}"],encapsulation:2}),e})();function ne(e,t){if(1&e&&(L.Xb(0,"span"),L.Lc(1),L.kc(2,"number"),L.Wb()),2&e){const e=L.jc().$implicit;L.Db(1),L.Mc(L.mc(2,1,e.volume*(e.amount+e.tax_amount)*e.ex_rate,"1.0-0"))}}function oe(e,t){if(1&e&&(L.Xb(0,"span"),L.Lc(1),L.kc(2,"number"),L.Wb()),2&e){const e=L.jc().$implicit;L.Db(1),L.Mc(L.mc(2,1,e.volume*(e.amount+e.tax_amount)*e.ex_rate,"1.0-0"))}}function ce(e,t){if(1&e){const e=L.Yb();L.Xb(0,"mat-icon",13),L.fc("click",(function(t){L.Bc(e);const i=L.jc().$implicit,r=L.jc();return t.stopPropagation(),r.savePrice.emit(i)})),L.Lc(1,"save"),L.Wb()}}const se=function(e){return{"red-A100-bg":e}},le=function(e){return{"red-A700-fg":e}},he=function(e,t){return{"red-A700-fg":e,"rev-color":t}},be=function(e,t){return{"red-A700-fg":e,"cost-color":t}},ue=function(e,t){return{"rev-color":e,"cost-color":t}};function pe(e,t){if(1&e){const e=L.Yb();L.Vb(0),L.Xb(1,"tr",15),L.Xb(2,"td",16),L.Lc(3),L.Wb(),L.Xb(4,"td",17),L.Lc(5),L.Wb(),L.Xb(6,"td",18),L.fc("click",(function(i){L.Bc(e);const r=t.$implicit;return L.jc().filterBy("bill",r.bill)})),L.Lc(7),L.Wb(),L.Xb(8,"td",19),L.fc("click",(function(i){L.Bc(e);const r=t.$implicit;return L.jc().filterBy("party",r.partner_short_name)})),L.Lc(9),L.Wb(),L.Xb(10,"td",20),L.fc("click",(function(i){L.Bc(e);const r=t.$implicit;return L.jc().filterBy("price",r.price_code)})),L.Lc(11),L.Wb(),L.Xb(12,"td",21),L.Lc(13),L.Wb(),L.Xb(14,"td",21),L.Lc(15),L.Wb(),L.Xb(16,"td",22),L.Lc(17),L.kc(18,"number"),L.Wb(),L.Xb(19,"td",23),L.Lc(20),L.Wb(),L.Xb(21,"td",24),L.Lc(22),L.kc(23,"number"),L.Wb(),L.Xb(24,"td",21),L.Lc(25),L.Wb(),L.Xb(26,"td",21),L.Lc(27),L.kc(28,"number"),L.Wb(),L.Xb(29,"td",22),L.Jc(30,ne,3,4,"span",25),L.Wb(),L.Xb(31,"td",22),L.Jc(32,oe,3,4,"span",25),L.Wb(),L.Xb(33,"td",26),L.Lc(34),L.Wb(),L.Xb(35,"td",27),L.Lc(36),L.Wb(),L.Xb(37,"td",28),L.Lc(38),L.Wb(),L.Xb(39,"td",29),L.Jc(40,ce,2,0,"mat-icon",30),L.Wb(),L.Wb(),L.Ub()}if(2&e){const e=t.$implicit,i=t.index;L.Db(1),L.pc("ngClass",L.rc(36,se,e.amount_shipment&&e.amount!=e.amount_shipment.amount)),L.Db(2),L.Mc(i+1),L.Db(2),L.Mc(e.code),L.Db(2),L.Mc(e.bill),L.Db(1),L.pc("matTooltip",e.partner_name)("matTooltipPosition","right"),L.Db(1),L.Mc(e.partner_short_name),L.Db(1),L.pc("matTooltip",e.price_name)("matTooltipPosition","right"),L.Db(1),L.Mc(e.price_code),L.Db(2),L.Mc(e.unit_code),L.Db(2),L.Mc(e.volume),L.Db(1),L.pc("ngClass",L.rc(38,le,e.amount<0)),L.Db(1),L.Mc(L.mc(18,27,e.amount,"1.2-2")),L.Db(3),L.Mc(e.tax),L.Db(2),L.Mc(L.mc(23,30,e.tax_amount,"1.2-2")),L.Db(3),L.Mc(e.currency_code),L.Db(2),L.Mc(L.mc(28,33,e.ex_rate,"1.0-0")),L.Db(2),L.pc("ngClass",L.sc(40,he,e.amount<0,"Revenue"==e.type_name)),L.Db(1),L.pc("ngIf","Revenue"==e.type_name),L.Db(1),L.pc("ngClass",L.sc(43,be,e.amount<0,"Cost"==e.type_name)),L.Db(1),L.pc("ngIf","Cost"==e.type_name),L.Db(2),L.Mc(e.country_name),L.Db(2),L.Mc(null==e.amount_shipment?null:e.amount_shipment.amount),L.Db(1),L.pc("ngClass",L.sc(46,ue,"Revenue"==e.type_name,"Cost"==e.type_name)),L.Db(1),L.Mc(e.type_name),L.Db(2),L.pc("ngIf",e.code&&!e.amount_shipment)}}let me=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.datePipe=t,this.formBuilder=i,this.commonService=r,this.savePrice=new L.o,this.saveAllPrice=new L.o}ngOnInit(){}get inverseOfTranslation1(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(O.f),L.Rb(Q.d),L.Rb(Z.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-import-price-table"]],viewQuery:function(e,t){var i;1&e&&L.Sc(ee.e,!0),2&e&&L.wc(i=L.gc())&&(t.viewPort=i.first)},inputs:{height:"height",dataPrice:"dataPrice"},outputs:{savePrice:"savePrice",saveAllPrice:"saveAllPrice"},decls:44,vars:39,consts:[["fxLayout","column",1,"content-view"],["itemSize","34",1,"h-100-p"],[1,"simple","simba-price-table"],[1,"sticky-header-1","w-40","text-left","sticky-left-col1",2,"z-index","25"],[1,"sticky-header-1","w-160","sticky-left-col2",2,"z-index","25"],[1,"sticky-header-1","w-160"],[1,"sticky-header-1","w-100"],[1,"sticky-header-1","w-140"],[1,"sticky-header-1","w-60"],[1,"sticky-header-1","w-120","text-right"],[1,"sticky-header-1","w-120","text-right","rev-color"],[1,"sticky-header-1","w-120","text-right","cost-color"],[1,"sticky-header-1","w-40","sticky-right-col"],["color","accent",1,"cursor-pointer",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"ngClass"],[1,"w-40","text-center","sticky-left-col1"],[1,"w-160","sticky-left-col2"],[1,"w-160",3,"click"],[1,"w-100",3,"matTooltip","matTooltipPosition","click"],[1,"w-140",3,"matTooltip","matTooltipPosition","click"],[1,"w-60"],[1,"w-120","text-right",3,"ngClass"],[1,"w-60","text-center"],[1,"w-100","text-right"],[4,"ngIf"],[1,"w-140"],[1,"w-120","text-right"],[1,"w-100",3,"ngClass"],[1,"sticky-right-col"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(L.Xb(0,"div",0),L.Xb(1,"cdk-virtual-scroll-viewport",1),L.Xb(2,"table",2),L.Xb(3,"thead"),L.Xb(4,"tr"),L.Xb(5,"th",3),L.Lc(6," No "),L.Wb(),L.Xb(7,"th",4),L.Lc(8,"Code"),L.Wb(),L.Xb(9,"th",5),L.Lc(10,"Bill"),L.Wb(),L.Xb(11,"th",6),L.Lc(12,"Party"),L.Wb(),L.Xb(13,"th",7),L.Lc(14,"Price"),L.Wb(),L.Xb(15,"th",8),L.Lc(16,"Unit"),L.Wb(),L.Xb(17,"th",8),L.Lc(18,"Volume"),L.Wb(),L.Xb(19,"th",9),L.Lc(20,"Amount"),L.Wb(),L.Xb(21,"th",8),L.Lc(22,"Tax"),L.Wb(),L.Xb(23,"th",6),L.Lc(24,"Tax Amount"),L.Wb(),L.Xb(25,"th",8),L.Lc(26,"Currency"),L.Wb(),L.Xb(27,"th",8),L.Lc(28,"Ex rate"),L.Wb(),L.Xb(29,"th",10),L.Lc(30,"Total Revenue"),L.Wb(),L.Xb(31,"th",11),L.Lc(32,"Total Cost"),L.Wb(),L.Xb(33,"th",7),L.Lc(34,"Payment center"),L.Wb(),L.Xb(35,"th",9),L.Lc(36,"Spt Amount"),L.Wb(),L.Xb(37,"th",6),L.Lc(38,"Type"),L.Wb(),L.Xb(39,"th",12),L.Xb(40,"mat-icon",13),L.fc("click",(function(e){return e.stopPropagation(),t.saveAllPrice.emit()})),L.Lc(41,"save"),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Xb(42,"tbody"),L.Jc(43,pe,41,49,"ng-container",14),L.Wb(),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Ic("height",t.height-136,"px"),L.Db(5),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(4),L.pc("cdkVirtualForOf",t.dataPrice))},directives:[J.d,ee.e,ee.a,h.a,ee.d,O.q,U.a,b.a,O.t],pipes:[O.g],styles:["simba-import-price-table .content-view{overflow:auto}simba-import-price-table .content-view .width-form{width:1400px}@media screen and (min-width:960px)and (max-width:1279px){simba-import-price-table .content-view .width-form{width:100%}}simba-import-price-table .content-view .rev-color{background-color:#b3e5fc}simba-import-price-table .content-view .cost-color{background-color:#ffcf9c}simba-import-price-table .content-view .simba-price-table{font-size:12px}simba-import-price-table .content-view .simba-price-table .border-right{border-right:1px solid rgba(0,0,0,.12)}simba-import-price-table .content-view .simba-price-table td,simba-import-price-table .content-view .simba-price-table th{padding:8px!important;white-space:nowrap}simba-import-price-table .content-view .simba-price-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}simba-import-price-table .content-view .simba-price-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}simba-import-price-table .content-view .simba-price-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}simba-import-price-table .content-view .simba-price-table .sticky-left-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}simba-import-price-table .content-view .simba-price-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:40px;background-color:#fff;z-index:20}simba-import-price-table .content-view .simba-price-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}simba-import-price-table .content-view .simba-price-table .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}simba-import-price-table .content-view .simba-price-table .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2}),e})();const de=["googleSheet"];function fe(e,t){1&e&&L.Lc(0,"Get data")}function ge(e,t){if(1&e){const e=L.Yb();L.Xb(0,"button",11),L.fc("click",(function(t){return L.Bc(e),L.jc().getHeader()})),L.Lc(1," Get Header "),L.Wb()}}function ve(e,t){1&e&&L.Lc(0,"Price")}const xe=function(e){return{hide:e}};let Se=(()=>{class e{constructor(e,t,i,r,a){this.authService=e,this.datePipe=t,this.formBuilder=i,this.googleApiService=r,this.commonService=a,this.getPrice=new L.o,this.savePrice=new L.o,this.saveAllPrice=new L.o,this._unsubscribeAll=new N.a}ngOnInit(){}ngAfterViewInit(){this.googleApiService.onGapiChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.auth=e,this.attachSignin()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}attachSignin(){this.auth.attachClickHandler(this.googleSheet._elementRef.nativeElement,{},e=>{this.token=this.googleApiService.token=e.getAuthResponse().access_token,this.googleApiService.createPicker()},(function(e){alert("ERROR"),console.error(e)}))}openPicker(){this.googleApiService.createPicker()}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(O.f),L.Rb(Q.d),L.Rb(E.a),L.Rb(Z.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-import-data"]],viewQuery:function(e,t){var i;1&e&&L.Sc(de,!0),2&e&&L.wc(i=L.gc())&&(t.googleSheet=i.first)},inputs:{height:"height",data:"data",dataPrice:"dataPrice",header:"header"},outputs:{getPrice:"getPrice",savePrice:"savePrice",saveAllPrice:"saveAllPrice"},decls:22,vars:13,consts:[["fxLayout","column"],["fxLayout","row wrap"],["fxFlex","100",3,"linear"],["stepper",""],["matStepLabel",""],[3,"height","data","header"],["fxLayout","row"],["mat-raised-button","","type","button","color","accent","id","googleSheet",1,"mr-8",3,"ngClass"],["googleSheet",""],["mat-raised-button","","type","button","color","accent","id","googleSheet2",1,"mr-8",3,"ngClass","click"],["class","mr-8","mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",1,"mr-8",3,"click"],[3,"height","dataPrice","savePrice","saveAllPrice"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent",1,"mr-8"]],template:function(e,t){if(1&e){const e=L.Yb();L.Xb(0,"div",0),L.Xb(1,"div",1),L.Xb(2,"mat-horizontal-stepper",2,3),L.Xb(4,"mat-step"),L.Jc(5,fe,1,0,"ng-template",4),L.Sb(6,"simba-import-excel-table",5),L.Xb(7,"div",6),L.Xb(8,"button",7,8),L.Lc(10," Get Data "),L.Wb(),L.Xb(11,"button",9),L.fc("click",(function(e){return t.openPicker()})),L.Lc(12," Get Data "),L.Wb(),L.Jc(13,ge,2,0,"button",10),L.Xb(14,"button",11),L.fc("click",(function(i){L.Bc(e);const r=L.xc(3);return t.getPrice.emit(r)})),L.Lc(15," Get Price "),L.Wb(),L.Wb(),L.Wb(),L.Xb(16,"mat-step"),L.Jc(17,ve,1,0,"ng-template",4),L.Xb(18,"simba-import-price-table",12),L.fc("savePrice",(function(e){return t.savePrice.emit(e)}))("saveAllPrice",(function(e){return t.saveAllPrice.emit(e)})),L.Wb(),L.Xb(19,"div",6),L.Xb(20,"button",13),L.Lc(21," Previous "),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb()}2&e&&(L.Db(2),L.pc("linear",!0),L.Db(4),L.pc("height",t.height)("data",t.data)("header",t.header),L.Db(2),L.pc("ngClass",L.rc(9,xe,t.token)),L.Db(3),L.pc("ngClass",L.rc(11,xe,!t.token)),L.Db(2),L.pc("ngIf",t.data.length>0),L.Db(5),L.pc("height",t.height)("dataPrice",t.dataPrice))},directives:[J.d,S.a,J.b,S.b,S.c,ae,c.b,O.q,U.a,O.t,me,S.f],styles:[""],encapsulation:2}),e})();var ye=i("fE3o"),_e=i("JX91"),we=i("lJxs"),Ce=i("EwFO");const ke=["formDirective"],De=["allSelected"];function We(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Nc(" ",e.short_name," ")}}function Ae(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Nc(" ",e.short_name," ")}}function Pe(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Nc(" ",e.short_name," ")}}function Xe(e,t){if(1&e&&(L.Xb(0,"mat-option",45),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id)("matTooltip",e.full_name),L.Db(1),L.Nc(" ",e.short_name," ")}}function Ie(e,t){1&e&&(L.Xb(0,"mat-error"),L.Lc(1,"Agent is required!"),L.Wb())}function Le(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Nc(" ",e.name," ")}}function Oe(e,t){if(1&e){const e=L.Yb();L.Xb(0,"mat-option",31),L.fc("click",(function(t){L.Bc(e),L.jc();const i=L.xc(68);return L.jc().tosslePerOne(i.viewValue)})),L.Lc(1),L.Wb()}if(2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Mc(e.code)}}function Re(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Nc(" ",e.code," ")}}function Te(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e.id),L.Db(1),L.Nc(" ",e.name," ")}}function Ne(e,t){if(1&e&&(L.Xb(0,"mat-option",44),L.Lc(1),L.Wb()),2&e){const e=t.$implicit;L.pc("value",e),L.Db(1),L.Mc(e)}}const je=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};function Fe(e,t){if(1&e){const e=L.Yb();L.Xb(0,"form",2,3),L.fc("keydown.enter",(function(t){return L.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){L.Bc(e);const i=L.jc();return i.onSearchFormSubmit(i.form)})),L.Xb(2,"div",4),L.Xb(3,"div",5),L.Xb(4,"button",6),L.Lc(5," Submit "),L.Wb(),L.Xb(6,"button",7),L.fc("click",(function(t){return L.Bc(e),L.jc().clearForm()})),L.Xb(7,"mat-icon"),L.Lc(8,"delete"),L.Wb(),L.Wb(),L.Xb(9,"button",8),L.fc("click",(function(t){return L.Bc(e),L.jc().typeChange.emit("edit")})),L.Xb(10,"mat-icon"),L.Lc(11,"edit"),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Xb(12,"div",9),L.Xb(13,"div",10),L.Xb(14,"div",11),L.Xb(15,"div",12),L.Xb(16,"div",13),L.Xb(17,"mat-form-field",14),L.Xb(18,"mat-label"),L.Lc(19,"Pay party"),L.Wb(),L.Sb(20,"input",15),L.Xb(21,"mat-autocomplete",16,17),L.Jc(23,We,2,2,"mat-option",18),L.kc(24,"async"),L.Wb(),L.Wb(),L.Wb(),L.Xb(25,"div",19),L.Xb(26,"mat-form-field",14),L.Xb(27,"mat-label"),L.Lc(28,"Issue Party"),L.Wb(),L.Sb(29,"input",20),L.Xb(30,"mat-autocomplete",16,21),L.Jc(32,Ae,2,2,"mat-option",18),L.kc(33,"async"),L.Wb(),L.Wb(),L.Wb(),L.Xb(34,"div",19),L.Xb(35,"mat-form-field",14),L.Xb(36,"mat-label"),L.Lc(37,"Customer"),L.Wb(),L.Sb(38,"input",22),L.Xb(39,"mat-autocomplete",16,23),L.Jc(41,Pe,2,2,"mat-option",18),L.kc(42,"async"),L.Wb(),L.Wb(),L.Wb(),L.Xb(43,"div",19),L.Xb(44,"mat-form-field",14),L.Xb(45,"mat-label"),L.Lc(46,"Agent"),L.Wb(),L.Sb(47,"input",24),L.Xb(48,"mat-autocomplete",16,25),L.Jc(50,Xe,2,3,"mat-option",26),L.kc(51,"async"),L.Wb(),L.Jc(52,Ie,2,0,"mat-error",27),L.Wb(),L.Wb(),L.Xb(53,"div",19),L.Xb(54,"mat-form-field",14),L.Xb(55,"mat-label"),L.Lc(56,"Voyage"),L.Wb(),L.Sb(57,"input",28),L.Xb(58,"mat-autocomplete",16,29),L.Jc(60,Le,2,2,"mat-option",18),L.kc(61,"async"),L.Wb(),L.Wb(),L.Wb(),L.Xb(62,"div",19),L.Xb(63,"mat-form-field",14),L.Xb(64,"mat-label"),L.Lc(65,"Price"),L.Wb(),L.Xb(66,"mat-select",30),L.Xb(67,"mat-option",31,32),L.fc("click",(function(t){return L.Bc(e),L.jc().toggleAllSelection()})),L.Lc(69),L.Wb(),L.Jc(70,Oe,2,2,"mat-option",33),L.Wb(),L.Wb(),L.Wb(),L.Xb(71,"div",19),L.Xb(72,"mat-form-field",14),L.Xb(73,"mat-label"),L.Lc(74,"Currency"),L.Wb(),L.Xb(75,"mat-select",34),L.Jc(76,Re,2,2,"mat-option",18),L.Wb(),L.Wb(),L.Wb(),L.Xb(77,"div",19),L.Xb(78,"mat-form-field",14),L.Xb(79,"mat-label"),L.Lc(80,"Payment center"),L.Wb(),L.Sb(81,"input",35),L.Xb(82,"mat-autocomplete",16,36),L.Jc(84,Te,2,2,"mat-option",18),L.kc(85,"async"),L.Wb(),L.Wb(),L.Wb(),L.Xb(86,"div",19),L.Xb(87,"mat-form-field",14),L.Xb(88,"mat-label"),L.Lc(89,"Date from"),L.Wb(),L.Xb(90,"input",37),L.fc("change",(function(t){return L.Bc(e),L.jc().commonService.setDateStr(t)})),L.Wb(),L.Sb(91,"mat-datepicker-toggle",38),L.Sb(92,"mat-datepicker",null,39),L.Wb(),L.Wb(),L.Xb(94,"div",19),L.Xb(95,"mat-form-field",14),L.Xb(96,"mat-label"),L.Lc(97,"Date to"),L.Wb(),L.Xb(98,"input",40),L.fc("change",(function(t){return L.Bc(e),L.jc().commonService.setDateStr(t)})),L.Wb(),L.Sb(99,"mat-datepicker-toggle",38),L.Sb(100,"mat-datepicker",null,41),L.Wb(),L.Wb(),L.Xb(102,"div",19),L.Xb(103,"mat-form-field",14),L.Xb(104,"mat-label"),L.Lc(105,"Month"),L.Wb(),L.Xb(106,"mat-select",42),L.fc("selectionChange",(function(t){return L.Bc(e),L.jc().getMonthTime("M")})),L.Jc(107,Ne,2,2,"mat-option",18),L.Wb(),L.Wb(),L.Wb(),L.Xb(108,"div",19),L.Xb(109,"mat-form-field",14),L.Xb(110,"mat-label"),L.Lc(111,"Year"),L.Wb(),L.Xb(112,"mat-select",43),L.fc("selectionChange",(function(t){return L.Bc(e),L.jc().getMonthTime("Y")})),L.Xb(113,"mat-option",44),L.Lc(114),L.Wb(),L.Xb(115,"mat-option",44),L.Lc(116),L.Wb(),L.Xb(117,"mat-option",44),L.Lc(118),L.Wb(),L.Xb(119,"mat-option",44),L.Lc(120),L.Wb(),L.Xb(121,"mat-option",44),L.Lc(122),L.Wb(),L.Xb(123,"mat-option",44),L.Lc(124),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb()}if(2&e){const e=L.xc(22),t=L.xc(31),i=L.xc(40),r=L.xc(49),a=L.xc(59),n=L.xc(83),o=L.xc(93),c=L.xc(101),s=L.jc();L.pc("formGroup",s.form),L.Db(12),L.Ic("height",s.height,"px"),L.Db(8),L.pc("matAutocomplete",e),L.Db(1),L.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.customer)),L.Db(2),L.pc("ngForOf",L.lc(24,43,s.filteredCustomer)),L.Db(6),L.pc("matAutocomplete",t),L.Db(1),L.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.supplier)),L.Db(2),L.pc("ngForOf",L.lc(33,45,s.filteredSupplier)),L.Db(6),L.pc("matAutocomplete",i),L.Db(1),L.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.customer)),L.Db(2),L.pc("ngForOf",L.lc(42,47,s.filteredCustomer2)),L.Db(6),L.pc("matAutocomplete",r),L.Db(1),L.pc("displayWith",s.commonService.displayFn.bind(s,"short_name",s.agent)),L.Db(2),L.pc("ngForOf",L.lc(51,49,s.filteredAgent)),L.Db(2),L.pc("ngIf",s.form.get("agent").hasError("required")),L.Db(5),L.pc("matAutocomplete",a),L.Db(1),L.pc("displayWith",s.commonService.displayFn.bind(s,"name",s.voyage)),L.Db(2),L.pc("ngForOf",L.lc(61,51,s.filteredVoyage)),L.Db(7),L.pc("value",0),L.Db(2),L.Nc("All of ",s.price.length," price"),L.Db(1),L.pc("ngForOf",s.price),L.Db(6),L.pc("ngForOf",s.currency),L.Db(5),L.pc("matAutocomplete",n),L.Db(1),L.pc("displayWith",s.commonService.displayFn.bind(s,"name",s.country)),L.Db(2),L.pc("ngForOf",L.lc(85,53,s.filteredCountry)),L.Db(6),L.pc("matDatepicker",o),L.Db(1),L.pc("for",o),L.Db(7),L.pc("matDatepicker",c),L.Db(1),L.pc("for",c),L.Db(8),L.pc("ngForOf",L.qc(55,je)),L.Db(6),L.pc("value",s.year-4),L.Db(1),L.Mc(s.year-4),L.Db(1),L.pc("value",s.year-3),L.Db(1),L.Mc(s.year-3),L.Db(1),L.pc("value",s.year-2),L.Db(1),L.Mc(s.year-2),L.Db(1),L.pc("value",s.year-1),L.Db(1),L.Mc(s.year-1),L.Db(1),L.pc("value",s.year),L.Db(1),L.Mc(s.year),L.Db(1),L.pc("value",s.year+1),L.Db(1),L.Mc(s.year+1)}}const Be=function(e){return{"mt-8":e}},Ve=function(e){return{"red-600-fg":e}};function Me(e,t){if(1&e&&(L.Xb(0,"div",64),L.Xb(1,"div",54),L.Lc(2),L.kc(3,"number"),L.Wb(),L.Wb()),2&e){const e=t.$implicit,i=t.index,r=L.jc(2);L.pc("ngClass",L.rc(7,Be,0==i)),L.Db(1),L.pc("ngClass",L.rc(9,Ve,r.total.revenue[e]-r.total.cost[e]<0)),L.Db(1),L.Oc(" ",L.mc(3,4,r.total.revenue[e]-r.total.cost[e],"VND"!=e?"1.2-2":"1.0-0")," ",e," ")}}function He(e,t){1&e&&L.Sb(0,"div",65)}function ze(e,t){if(1&e){const e=L.Yb();L.Xb(0,"form",46),L.fc("keydown.enter",(function(t){return L.Bc(e),"TEXTAREA"==t.target.tagName})),L.Xb(1,"div",4),L.Xb(2,"div",5),L.Xb(3,"button",47),L.fc("click",(function(t){L.Bc(e);const i=L.jc();return i.updateSelectItem.emit(i.formEdit.value)})),L.Lc(4," Save "),L.Wb(),L.Xb(5,"button",48),L.fc("click",(function(t){return L.Bc(e),L.jc().typeChange.emit("form")})),L.Lc(6," Search "),L.Wb(),L.Wb(),L.Wb(),L.Xb(7,"div",9),L.Xb(8,"div",10),L.Xb(9,"div",49),L.Xb(10,"div",12),L.Xb(11,"div",50),L.Xb(12,"h2"),L.Lc(13,"Total"),L.Wb(),L.Jc(14,Me,4,11,"div",51),L.Jc(15,He,1,0,"div",52),L.Xb(16,"div",53),L.Xb(17,"div",54),L.Lc(18),L.kc(19,"number"),L.Wb(),L.Wb(),L.Wb(),L.Xb(20,"div",19),L.Xb(21,"mat-form-field",55),L.Xb(22,"mat-label"),L.Lc(23,"Debit"),L.Wb(),L.Sb(24,"input",56),L.Xb(25,"mat-checkbox",57),L.fc("change",(function(t){return L.Bc(e),L.jc().setDisabled("debit")})),L.Wb(),L.Wb(),L.Wb(),L.Xb(26,"div",19),L.Xb(27,"mat-form-field",55),L.Xb(28,"mat-label"),L.Lc(29,"Issue date"),L.Wb(),L.Xb(30,"input",58),L.fc("change",(function(t){return L.Bc(e),L.jc().commonService.setDateStr(t)})),L.Wb(),L.Sb(31,"mat-datepicker-toggle",38),L.Sb(32,"mat-datepicker",null,59),L.Xb(34,"mat-checkbox",57),L.fc("change",(function(t){return L.Bc(e),L.jc().setDisabled("issue_date")})),L.Wb(),L.Wb(),L.Wb(),L.Xb(35,"div",19),L.Xb(36,"mat-form-field",55),L.Xb(37,"mat-label"),L.Lc(38,"Pay date"),L.Wb(),L.Xb(39,"input",60),L.fc("change",(function(t){return L.Bc(e),L.jc().commonService.setDateStr(t)})),L.Wb(),L.Sb(40,"mat-datepicker-toggle",38),L.Sb(41,"mat-datepicker",null,61),L.Xb(43,"mat-checkbox",57),L.fc("change",(function(t){return L.Bc(e),L.jc().setDisabled("pay_date")})),L.Wb(),L.Wb(),L.Wb(),L.Xb(44,"div",19),L.Xb(45,"mat-form-field",55),L.Xb(46,"mat-label"),L.Lc(47,"Exrate"),L.Wb(),L.Sb(48,"input",62),L.Xb(49,"mat-checkbox",57),L.fc("change",(function(t){return L.Bc(e),L.jc().setDisabled("ex_rate")})),L.Wb(),L.Wb(),L.Wb(),L.Xb(50,"div",19),L.Xb(51,"mat-form-field",55),L.Xb(52,"mat-label"),L.Lc(53,"Info"),L.Wb(),L.Sb(54,"input",63),L.Xb(55,"mat-checkbox",57),L.fc("change",(function(t){return L.Bc(e),L.jc().setDisabled("info")})),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb()}if(2&e){const e=L.xc(33),t=L.xc(42),i=L.jc();L.pc("formGroup",i.formEdit),L.Db(3),L.pc("disabled",0==i.selected.length),L.Db(4),L.Ic("height",i.height,"px"),L.Db(7),L.pc("ngForOf",i.total.currency),L.Db(1),L.pc("ngIf",i.total.currency.length>0),L.Db(1),L.pc("ngClass",L.rc(21,Be,0==i.total.currency.length)),L.Db(1),L.pc("ngClass",L.rc(23,Ve,i.total.VND<0)),L.Db(1),L.Nc(" ",L.mc(19,18,i.total.VND,"1.0-0")," Ex VND "),L.Db(7),L.pc("checked",i.check.debit),L.Db(5),L.pc("matDatepicker",e),L.Db(1),L.pc("for",e),L.Db(3),L.pc("checked",i.check.issue_date),L.Db(5),L.pc("matDatepicker",t),L.Db(1),L.pc("for",t),L.Db(3),L.pc("checked",i.check.pay_date),L.Db(6),L.pc("checked",i.check.ex_rate),L.Db(6),L.pc("checked",i.check.info)}}let Ee=(()=>{class e{constructor(e,t,i,r,a,n){this.formBuilder=e,this.authService=t,this.commonService=i,this.router=r,this.datePipe=a,this.route=n,this.fitlerShipment=new L.o,this.typeChange=new L.o,this.updateSelectItem=new L.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({pay_party:[null],issue_party:[null],customer:[null],agent:[null,Q.y.required],voyage:[null],price:[null],currency:[null],payment_center:[null],date_from:[null],date_to:[null],month:[null],year:[null]}),this.formEdit=this.formBuilder.group({debit:[{value:null,disabled:!0}],issue_date:[{value:null,disabled:!0}],pay_date:[{value:null,disabled:!0}],ex_rate:[{value:null,disabled:!0}],info:[{value:null,disabled:!0}]}),this.check={debit:!1,issue_date:!1,pay_date:!1,ex_rate:!1,info:!1},this.now=new Date,this.height=560,this._unsubscribeAll=new N.a}ngOnInit(){this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.authService.windowSizeChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12}),this.filteredCustomer=this.form.controls.pay_party.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(we.a)(e=>e?this.commonService.filterData(e,"partner_name",this.customer):[])),this.filteredSupplier=this.form.controls.issue_party.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(we.a)(e=>e?this.commonService.filterData(e,"partner_name",this.supplier):[])),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(we.a)(e=>e?this.commonService.filterData(e,"partner_name",this.customer):[])),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.short_name:null),Object(we.a)(e=>e?this.commonService.filterData(e,"short_name",this.agent):[])),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.name:null),Object(we.a)(e=>e?this.commonService.filterData(e,"name",this.voyage):[])),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.code:null),Object(we.a)(e=>e?this.commonService.filterData(e,"code",this.price):[])),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(_e.a)(""),Object(we.a)(e=>e?"string"==typeof e?e:e.name:null),Object(we.a)(e=>e?this.commonService.filterData(e,"name",this.country):[])),this.form.valueChanges.subscribe(e=>{console.log(e)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleAllSelection(){this.form.controls.price.patchValue(this.allSelected.selected?[...this.price.map(e=>e.id),0]:[])}tosslePerOne(e){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.price.value&&this.form.controls.price.value.length==this.price.length&&this.allSelected.select()}getMonthTime(e){let t,i,r=this.form.controls.year.value,a=this.form.controls.month.value,n=new Date,o=n.getMonth(),c=n.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(r,a?a-1:0,1),i=new Date(r,a||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,o,1),i=new Date(c,o+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),i=new Date(c,12,0)):r&&(t=new Date(r,a?a-1:0,1),i=new Date(r,a||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(i)}clearForm(){this.searchNgForm.resetForm()}onSearchFormSubmit(e){if(e.valid){"string"==typeof e.value.pay_party&&this.form.controls.pay_party.setValue(null),"string"==typeof e.value.issue_party&&this.form.controls.issue_party.setValue(null),"string"==typeof e.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof e.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof e.value.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof e.value.price&&this.form.controls.price.setValue(null);let t=JSON.parse(JSON.stringify(e.value));t.date_from&&(t.date_from=this.datePipe.transform(new Date(t.date_from),"MM/dd/yyyy")),t.date_to&&(t.date_to=this.datePipe.transform(new Date(t.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(t)}}setCheck(e){e.check=!e.check}setDisabled(e){this.check[e]?this.formEdit.controls[e].disable():this.formEdit.controls[e].enable(),this.check[e]=!this.check[e]}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(Q.d),L.Rb(H.a),L.Rb(Z.a),L.Rb(r.g),L.Rb(O.f),L.Rb(r.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-sidebar"]],viewQuery:function(e,t){var i;1&e&&(L.Sc(ke,!0),L.Sc(De,!0)),2&e&&(L.wc(i=L.gc())&&(t.searchNgForm=i.first),L.wc(i=L.gc())&&(t.allSelected=i.first))},inputs:{formSearch:"formSearch",customer:"customer",supplier:"supplier",agent:"agent",voyage:"voyage",price:"price",currency:"currency",country:"country",type:"type",selected:"selected",total:"total"},outputs:{fitlerShipment:"fitlerShipment",typeChange:"typeChange",updateSelectItem:"updateSelectItem"},decls:2,vars:2,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit",4,"ngIf"],["name","form",3,"formGroup","keydown.enter",4,"ngIf"],["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-icon-button","","type","button","fxFlex","20",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["mat-icon-button","","type","button","fxFlex","20",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","pay_party","matInput","","formControlName","pay_party",3,"matAutocomplete"],[3,"displayWith"],["autoCus1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","issue_party","matInput","","formControlName","issue_party",3,"matAutocomplete"],["autoSup1","matAutocomplete"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete"],["autoCus2","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent","required","",3,"matAutocomplete"],["autoSup2","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],[4,"ngIf"],["inputCheck","","aria-label","voyage","matInput","","formControlName","voyage",3,"matAutocomplete"],["autoVoyage","matAutocomplete"],["formControlName","price","multiple",""],[3,"value","click"],["allSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","currency"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],[3,"value","matTooltip"],["name","form",3,"formGroup","keydown.enter"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"disabled","click"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],[1,"nav","material2"],["fxFlex","100",1,"group","mt-24"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],["class","item-divider",4,"ngIf"],[1,"item","mb-8",3,"ngClass"],[1,"font-size-16","text-bold",3,"ngClass"],["appearance","outline",1,"padding-item","w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","debit"],["matPrefix","",3,"checked","change"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["issue_date",""],["inputCheck","","matInput","","name","pay_date","formControlName","pay_date",3,"matDatepicker","change"],["pay_date",""],["type","number","inputCheck","","matInput","","formControlName","ex_rate"],["inputCheck","","matInput","","formControlName","info"],[1,"item",3,"ngClass"],[1,"item-divider"]],template:function(e,t){1&e&&(L.Jc(0,Fe,125,56,"form",0),L.Jc(1,ze,56,25,"form",1)),2&e&&(L.pc("ngIf","form"==t.type),L.Db(1),L.pc("ngIf","edit"==t.type))},directives:[O.t,Q.A,Q.q,Q.h,J.d,J.c,c.b,J.b,h.a,Ce.a,l.c,l.f,u.b,Q.b,n.c,Q.p,Q.g,n.a,O.s,Q.w,m.a,C.n,o.b,o.d,l.h,o.a,b.a,l.b,O.q,U.a,v.a,l.g,Q.u],pipes:[O.b,O.g],styles:["simba-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}simba-sidebar .navbar-scroll-container{background:#fff!important}simba-sidebar .navbar-scroll-container .navbar-content{padding-top:0}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:8px 16px 8px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}simba-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();const Ge=["googleSheet"];function qe(e,t){if(1&e){const e=L.Yb();L.Xb(0,"fuse-sidebar",9),L.Xb(1,"simba-sidebar",10),L.fc("fitlerShipment",(function(t){return L.Bc(e),L.jc().fitlerShipment(t)}))("typeChange",(function(t){return L.Bc(e),L.jc().typeChange(t)}))("updateSelectItem",(function(t){return L.Bc(e),L.jc().updateSelectItem(t)})),L.Wb(),L.Wb()}if(2&e){const e=L.jc();L.Db(1),L.pc("type",e.type)("selected",e.selected)("total",e.total)("formSearch",e.formSearch)("customer",e.customer)("supplier",e.supplier)("agent",e.agent)("voyage",e.voyage)("price",e.price)("currency",e.currency)("country",e.country)}}let Je=(()=>{class e{constructor(e,t,i,r,a,n,o,c){this._fuseSidebarService=e,this.simbaService=t,this.router=i,this.authService=r,this.route=a,this.datePipe=n,this._matDialog=o,this.googleApiService=c,this.sidebarPanel=!1,this.height=560,this.type="form",this.objShipment={},this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.totalAll={VND:0,revenue:{},cost:{},currency:[]},this.checkAll=!1,this.importData=[["1","KAI HE ZHI CHENG V. 162S","04.11.2022","XPRESS","14,456","SEHCMSIN221029-1","","1","","0","","0","7.5","7.5","-7.5","350","","307"],["2","KOTA RATNA V. 0097S","08.11.2022","PIL","14,496","SEHCMSIN221106-1","1","","","0","","5","0","5","-5","240","","240"],["3","KOTA RATNA V. 0097S","08.11.2022","PIL","14,496","SEHCMSIN221106-2","","1","","0","","0","7.5","7.5","-7.5","350","","350"],["4","WAN HAI 351 V. S002","09.11.2022","WANHAI","14,363","HKGSIN2211021","","4","","0","","0","30","30","-30","1400","","1400"],["5","WAN HAI 351 V. S002","09.11.2022","WANHAI","14,363","HKGSIN2211022","1","","185","185","","5","0","5","180","","","0"],["6","WAN HAI 351 V. S002","09.11.2022","WANHAI","14,363","HKGSIN2211023","1","","185","185","","5","0","5","180","","","0"],["7","WAN HAI 351 V. S002","09.11.2022","WANHAI","14,363","HKGSIN2211024","1","","","0","","5","0","5","-5","240","","240"],["8","WAN HAI 351 V. S002","09.11.2022","WANHAI","14,363","HKGSIN2211025","1","","","0","","5","0","5","-5","240","","240"],["9","BRIDGE V. 0255S","10.11.2022","PIL","14,363","SIHSIN221101-01","1","","","0","","5","0","5","-5","240","","240"],["10","WAN HAI 506 V. S212","11.11.2022","WANHAI","14,363","HKGSIN22110081","","1","270","270","","0","7.5","7.5","262.5","","","0"],["11","WAN HAI 506 V. S212","11.11.2022","WANHAI","14,363","HKGSIN22110082","1","","185","185","","5","0","5","180","","","0"],["12","WAN HAI 506 V. S212","11.11.2022","WANHAI","14,363","HKGSIN22110083","","1","270","270","","0","7.5","7.5","262.5","","","0"],["13","LORRAINE V. 004S","12.11.2022","WANHAI","14,363","HKGSIN22110091","","3","","0","","0","22.5","22.5","-22.5","1050","","1050"],["14","PIRA BHUM V. 552S","13.11.2022","RCL","14,446","SEHCMSIN221110-1","1","","","0","","5","0","5","-5","240","","145"],["15","MAERSK DHAKA V. 244S","14.11.2022","MCC","14,363","SEHPHSIN221107-1","1","","","0","","5","0","5","-5","240","","240"],["16","KOTA RATNA V. 0098S","15.11.2022","PIL","14,299","SEHCMSIN221112-1","1","","","0","","5","0","5","-5","240","","240"],["17","KOTA RATNA V. 0098S","15.11.2022","PIL","14,299","SEHCMSIN221113-1","1","","","0","","5","0","5","-5","240","","240"],["18","MAERSK KWANGYANG V. 245S","20.11.2022","MCC","14,015","SEHPHSIN221113-1","","1","","0","","0","7.5","7.5","-7.5","350","","350"],["19","MAERSK KWANGYANG V. 245S","20.11.2022","MCC","14,015","SEHPHSIN221113-2","1","","","0","","5","0","5","-5","240","","240"],["20","MAERSK KWANGYANG V. 245S","20.11.2022","MCC","14,015","SEHPHSIN221113-3","1","","","0","","5","0","5","-5","240","","240"],["21","PIRA BHUM V. 553S","20.11.2022","RCL","14,301","SEHCMSIN221117-1","1","","","0","","5","0","5","-5","240","","145"],["22","KOTA RATNA V. 0099S","22.11.2022","PIL","14,015","SEHCMSIN221119-1","1","","","0","","5","0","5","-5","240","","240"],["23","GREEN HOPE V. 004S","25.11.2022","VASI SHIPPING","14,102","SEHCMSIN221121-1","","1","","0","","0","7.5","7.5","-7.5","350","","350"],["24","GSL ELIZABETH V. 031S","26.11.2022","WANHAI","14,102","HKGSIN2211211","1","","","0","","5","0","5","-5","240","","240"],["25","PIRA BHUM V. 554S","27.11.2022","RCL","14,102","SEHCMSIN221124-1","2","","","0","","10","0","10","-10","480","","290"]],this.header=[],this.dataPrice=[],this._unsubscribeAll=new N.a}ngOnInit(){this.searchText=this.simbaService.searchText,this.formSearch=this.simbaService.currenSearch?this.simbaService.currenSearch.formSearch:this.simbaService.defaultSearch.formSearch,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this.authService.windowSizeChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-20}),this.authService.changeScreen.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-20:this.authService.screenHeight-64-64-20}),this.simbaService.onDataChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.simbaService.dataCustomer,this.supplier=this.simbaService.dataSupplier,this.users=this.simbaService.users}),this.simbaService.onDataItemChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.simbaService.agent,this.commodity=this.simbaService.commodity,this.packageType=this.simbaService.packageType,this.currency=this.simbaService.currency,this.country=this.simbaService.country,this.depot=this.simbaService.depot,this.price=this.simbaService.price}),this.simbaService.onShipmentChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.shipment=e.import,this.objShipment={},this.shipment.length>0&&(this.shipment.map(e=>{this.objShipment[e.code+"-"+e.price_code+"-"+e.country_name]=e}),this.header=this.simbaService.headerImp),this.filterChange()}),this.googleApiService.onFileChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{e.length>0&&(this.importData=e)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.simbaService)}searchFilter(e){this.simbaService.onSearchTextChanged.next(e)}fitlerShipment(e){this.formSearch=e,this.authService.onRequestChanged.next(!0),Promise.all([this.simbaService.getSelShipmentSimba(e)]).then(e=>{this.authService.onRequestChanged.next(!1)},e=>{this.authService.onRequestChanged.next(!1),alert("Submit fail")})}getShipment(){this.authService.onRequestChanged.next(!0),this.simbaService.getSelShipmentSimba(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getReportData(){this.authService.onRequestChanged.next(!0),this.simbaService.getSelShipmentSimba(this.formSearch).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}typeChange(e){this.type=e}getCheckAll(e){this.checkAll=!0,this.selected.length==this.filterData.length&&(this.checkAll=!1),this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map(e=>{e.select=this.checkAll,e.select&&(this.total.currency.includes(e.currency_code)||(this.total.currency.push(e.currency_code),this.total.revenue[e.currency_code]=0,this.total.cost[e.currency_code]=0),this.selected.push(e),"Revenue"==e.type_name?(this.total.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(this.total.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate))})}getSelectItem(e){e.select=!e.select,this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map(e=>{e.select&&(this.total.currency.includes(e.currency_code)||(this.total.currency.push(e.currency_code),this.total.revenue[e.currency_code]=0,this.total.cost[e.currency_code]=0),this.selected.push(e),"Revenue"==e.type_name?(this.total.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(this.total.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate))}),this.checkAll=!1,this.selected.length==this.filterData.length&&(this.checkAll=!0)}updateServer([e,t,i]){switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":t.pay_party=parseInt(i[1].partner),delete t.partner,this.simbaService.updateSelRevenue(t).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.getShipment():(console.error(e),alert("Error update item"),this.getShipment())}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("update item error")});break;case"Cost":t.issue_party=parseInt(i[1].partner),delete t.partner,this.simbaService.updateSelCost(t).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.getShipment():(console.error(e),alert("Error update item"),this.getShipment())}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("update item error")})}}filterChange(e){this.filterContent=e||null;let t=this.shipment.slice();t.map(e=>{e.issue_date&&(e.issue_date=new Date(e.issue_date).setDate(new Date(e.issue_date).getDate())),e.pay_date&&(e.pay_date=new Date(e.pay_date).setDate(new Date(e.pay_date).getDate()))}),this.filterContent&&(this.filterContent.code&&(t=t.filter(e=>e.code.toLowerCase().includes(this.filterContent.code.toLowerCase()))),this.filterContent.bill&&(t=t.filter(e=>e.bill&&e.bill.toLowerCase().includes(this.filterContent.bill.toLowerCase()))),this.filterContent.party&&(t=t.filter(e=>e.partner_short_name.toLowerCase().includes(this.filterContent.party.toLowerCase()))),this.filterContent.price&&(t=t.filter(e=>e.price_code.toLowerCase().includes(this.filterContent.price.toLowerCase()))),this.filterContent.unit&&(t=t.filter(e=>e.unit_code.toLowerCase().includes(this.filterContent.unit.toLowerCase()))),this.filterContent.debit&&(t=t.filter(e=>e.debit&&e.debit.toLowerCase().includes(this.filterContent.debit.toLowerCase()))),this.filterContent.issue_date&&(t=t.filter(e=>e.issue_date&&e.issue_date==new Date(this.filterContent.issue_date).getTime())),"All"!=this.filterContent.pay_date&&(1==this.filterContent.pay_date?t=t.filter(e=>e.pay_date):0==this.filterContent.pay_date&&(t=t.filter(e=>!e.pay_date))),this.filterContent.inv_number&&(t=t.filter(e=>e.inv_number&&e.inv_number.toLowerCase().includes(this.filterContent.inv_number.toLowerCase()))),this.filterContent.bank_ref&&(t=t.filter(e=>e.bank_ref&&e.bank_ref.toLowerCase().includes(this.filterContent.bank_ref.toLowerCase()))),this.filterContent.amount&&(t=t.filter(e=>e.amount==this.filterContent.amount)),this.filterContent.tax&&(t=t.filter(e=>e.tax==this.filterContent.tax)),this.filterContent.tax_amount&&(t=t.filter(e=>e.tax_amount==this.filterContent.tax_amount)),this.filterContent.currency&&(t=t.filter(e=>e.currency_code.toLowerCase().includes(this.filterContent.currency.toLowerCase()))),this.filterContent.payment_center&&(t=t.filter(e=>e.country_name.toLowerCase().includes(this.filterContent.payment_center.toLowerCase()))),this.filterContent.info&&(t=t.filter(e=>e.info.toLowerCase().includes(this.filterContent.info.toLowerCase()))),"All"!=this.filterContent.type_name&&(t=t.filter(e=>e.type_name==this.filterContent.type_name))),this.totalAll={VND:0,revenue:{},cost:{},currency:[]},t.map(e=>{this.totalAll.currency.includes(e.currency_code)||(this.totalAll.currency.push(e.currency_code),this.totalAll.revenue[e.currency_code]=0,this.totalAll.cost[e.currency_code]=0),"Revenue"==e.type_name?(this.totalAll.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.totalAll.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(this.totalAll.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.totalAll.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate)}),this.filterData=t}updateSelectItem(e){let t=[];this.selected.map(e=>{t.push({id:e.id,type:e.type_name})}),e.issue_date&&(e.issue_date=this.datePipe.transform(e.issue_date,"yyyy-MM-dd")),e.pay_date&&(e.pay_date=this.datePipe.transform(e.pay_date,"yyyy-MM-dd")),this.authService.onRequestChanged.next(!0),this.simbaService.updateMultiShipmentItem([e,t]).then(e=>{this.getShipment(),this.selected=[]}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error load data")})}getPrice(e){this.dataPrice=[];let t={},i={};function r(e,t,i,r){let a=e[6]?20:40,n={shipment:t.id,code:t.code,bill:t.bill,owner:e[3],volume:20==a?e[6]:e[7],amount:20==a?e[9]/e[6]:e[9]/e[7],tax:0,tax_amount:0,price:20==a?{id:1,unit:3}:{id:90,unit:4},price_code:20==a?"OF20":"OF40",unit_code:20==a?"20DC":"40HC",currency:4,currency_code:"USD",partner:i.id,partner_short_name:i.short_name,partner_name:i.full_name,payment_center:i.country,country_name:i.country_name,ex_rate:23500,type_name:"Revenue"};if(n.shipment){let e=n.code+"-"+n.price_code+"-"+n.country_name;n.amount_shipment=r[e]?r[e]:null}return n}function a(e,t,i,r){let a=e[6]?20:40,n={shipment:t.id,code:t.code,bill:t.bill,owner:e[3],volume:20==a?e[6]:e[7],amount:20==a?e[11]/e[6]:e[12]/e[7],tax:0,tax_amount:0,price:20==a?{id:67,unit:3}:{id:121,unit:4},price_code:20==a?"ADF20":"ADF40",unit_code:20==a?"20DC":"40HC",currency:4,currency_code:"USD",partner:i.id,partner_short_name:i.short_name,partner_name:i.full_name,payment_center:i.country,country_name:i.country_name,ex_rate:23500,type_name:"Cost"};if(n.shipment){let e=n.code+"-"+n.price_code+"-"+n.country_name;n.amount_shipment=r[e]?r[e]:null}return n}function n(e,t,i,r){let a=e[6]?20:40,n={shipment:t.id,code:t.code,bill:t.bill,owner:e[3],volume:20==a?e[6]:e[7],amount:20==a?e[15]/e[6]:e[15]/e[7],tax:0,tax_amount:0,price:20==a?{id:10,unit:3}:{id:96,unit:4},price_code:20==a?"DTHC20":"DTHC40",unit_code:20==a?"20DC":"40HC",currency:173,currency_code:"SGD",partner:i.id,partner_short_name:i.short_name,partner_name:i.full_name,payment_center:i.country,country_name:i.country_name,ex_rate:17e3,type_name:"Revenue"};if(n.shipment){let e=n.code+"-"+n.price_code+"-"+n.country_name;n.amount_shipment=r[e]?r[e]:null}return n}function o(e,t,i,r){let a=e[6]?20:40,n={shipment:t.id,code:t.code,bill:t.bill,owner:e[3],volume:20==a?e[6]:e[7],amount:20==a?e[16]/e[6]:e[16]/e[7],tax:0,tax_amount:0,price:20==a?{id:53,unit:3}:{id:113,unit:4},price_code:20==a?"DIS20":"DIS40",unit_code:20==a?"20DC":"40HC",currency:173,currency_code:"SGD",partner:i.id,partner_short_name:i.short_name,partner_name:i.full_name,payment_center:i.country,country_name:i.country_name,ex_rate:17e3,type_name:"Cost"};if(n.shipment){let e=n.code+"-"+n.price_code+"-"+n.country_name;n.amount_shipment=r[e]?r[e]:null}return n}this.filterData.map(e=>{t[e.code]||(t[e.code]={id:e.shipment,code:e.code,bill:e.bill}),e.bill&&!i[e.bill]&&(i[e.bill]={id:e.shipment,code:e.code,bill:e.bill})});let c=this.supplier.find(e=>e.id==this.formSearch.agent),s=this.customer.find(e=>e.short_name==c.short_name),l=this.header.indexOf("BL"),h=this.header.indexOf("OF CL"),b=this.header.indexOf("Com 20"),u=this.header.indexOf("Com 40"),p=this.header.indexOf("CL SGD"),m=this.header.indexOf("Paid SGD"),d=[];this.importData.map(e=>{if(e[6]&&e[7]){let t=0,i=0;parseInt(e[15])==225*parseInt(e[6])+335*parseInt(e[7])&&(t=225,i=335);let r=0,a=0;parseInt(e[16])==35*parseInt(e[6])+40*parseInt(e[7])&&(r=35,a=40),parseInt(e[16])==90*parseInt(e[6])+120*parseInt(e[7])&&(r=90,a=120),d.push([e[0],e[1],e[2],e[3],e[4],e[5],e[6],"",e[8],e[9],e[10],e[11],"",e[13],e[14],parseInt(e[6])*t,parseInt(e[6])*r,e[17]]),d.push([e[0],e[1],e[2],e[3],e[4],e[5],"",e[7],e[8],e[9],e[10],"",e[12],e[13],e[14],parseInt(e[7])*i,parseInt(e[7])*a,e[17]])}else d.push(e)}),d.map(e=>{if(t[e[l]]){if(e[h]){let i=r(e,t[e[l]],s,this.objShipment);i.amount>0&&this.dataPrice.push(i)}(e[b]||e[u])&&this.dataPrice.push(a(e,t[e[l]],c,this.objShipment)),e[p]&&this.dataPrice.push(n(e,t[e[l]],s,this.objShipment)),e[m]&&this.dataPrice.push(o(e,t[e[l]],c,this.objShipment))}else if(i[e[l]]){if(e[h]){let t=r(e,i[e[l]],s,this.objShipment);t.amount>0&&this.dataPrice.push(t)}(e[b]||e[u])&&this.dataPrice.push(a(e,i[e[l]],c,this.objShipment)),e[p]&&this.dataPrice.push(n(e,i[e[l]],s,this.objShipment)),e[m]&&this.dataPrice.push(o(e,i[e[l]],c,this.objShipment))}else{let t={id:null,code:null,bill:e[l]};if(e[h]){let i=r(e,t,s,this.objShipment);i.amount>0&&this.dataPrice.push(i)}(e[b]||e[u])&&this.dataPrice.push(a(e,t,c,this.objShipment)),e[p]&&this.dataPrice.push(n(e,t,s,this.objShipment)),e[m]&&this.dataPrice.push(o(e,t,c,this.objShipment))}}),e.next()}savePrice(e){let t={shipment:e.shipment,price:e.price,volume:e.volume,amount:e.amount,tax:e.tax,tax_amount:e.tax_amount,currency:e.currency,ex_rate:e.ex_rate,payment_center:e.payment_center,update_by:this.authService.user,create_by:this.authService.user};switch(this.authService.onRequestChanged.next(!0),e.type_name){case"Revenue":t.pay_party=e.partner,this.simbaService.createSelRevenue(t).then(i=>{this.authService.onRequestChanged.next(!1),t.id=i.insertId;let r=JSON.parse(JSON.stringify(e));r.id=t.id,e.amount_shipment=t,this.shipment.push(r),this.objShipment[r.code+"-"+r.price_code+"-"+r.country_name]=r}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e.type_name+" error")});break;case"Cost":t.issue_party=e.partner,this.simbaService.createSelCost(t).then(i=>{this.authService.onRequestChanged.next(!1),t.id=i.insertId;let r=JSON.parse(JSON.stringify(e));r.id=t.id,e.amount_shipment=t,this.shipment.push(r),this.objShipment[r.code+"-"+r.price_code+"-"+r.country_name]=r}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e.type_name+" error")})}}saveAllPrice(e){this.dataPrice.map(e=>{e.code&&!e.amount_shipment&&this.savePrice(e)})}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(F.a),L.Rb(z),L.Rb(r.g),L.Rb(H.a),L.Rb(r.a),L.Rb(O.f),L.Rb(f.b),L.Rb(E.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-import"]],viewQuery:function(e,t){var i;1&e&&L.Sc(Ge,!0),2&e&&L.wc(i=L.gc())&&(t.googleSheet=i.first)},decls:9,vars:9,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","simba-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],[1,"center","mr-0","ml-0"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content"],["fxLayout","column",1,"pl-8","pt-8",2,"overflow","auto"],["fxLayout","row wrap"],["fxFlex","100",1,"mb-4"],[3,"height","data","dataPrice","header","getPrice","savePrice","saveAllPrice"],["name","simba-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange","updateSelectItem"]],template:function(e,t){1&e&&(L.Xb(0,"div",0),L.Jc(1,qe,2,11,"fuse-sidebar",1),L.Xb(2,"div",2),L.Xb(3,"simba-header",3),L.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),L.Wb(),L.Xb(4,"div",4),L.Xb(5,"div",5),L.Xb(6,"div",6),L.Xb(7,"div",7),L.Xb(8,"simba-import-data",8),L.fc("getPrice",(function(e){return t.getPrice(e)}))("savePrice",(function(e){return t.savePrice(e)}))("saveAllPrice",(function(e){return t.saveAllPrice(e)})),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Db(1),L.pc("ngIf",t.sidebarPanel),L.Db(2),L.pc("searchText",t.searchText)("sidebarName","simba-sidebar"),L.Db(2),L.Ic("height",t.height+8,"px"),L.Db(3),L.pc("height",t.height)("data",t.importData)("dataPrice",t.dataPrice)("header",t.header))},directives:[G.a,O.t,Y,J.d,J.b,Se,ye.a,Ee],styles:["simba-import{width:100%}"],encapsulation:2}),e})();function Ue(e,t){if(1&e&&(L.Xb(0,"th",7),L.Xb(1,"mat-form-field",8),L.Sb(2,"input",9),L.Wb(),L.Wb()),2&e){const e=t.index,i=L.jc();L.Ic("top",i.inverseOfTranslation),L.Db(2),L.pc("formControlName",e)}}function Ke(e,t){if(1&e&&(L.Vb(0),L.Xb(1,"td",7),L.Lc(2),L.Wb(),L.Ub()),2&e){const e=t.$implicit;L.Db(2),L.Mc(e)}}function $e(e,t){if(1&e&&(L.Vb(0),L.Xb(1,"tr"),L.Jc(2,Ke,3,1,"ng-container",10),L.Wb(),L.Ub()),2&e){const e=t.$implicit;L.Db(2),L.pc("ngForOf",e)}}let Ye=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.datePipe=t,this.formBuilder=i,this.commonService=r,this.form=this.formBuilder.group({header:this.formBuilder.array([])})}ngOnInit(){this.getHeader()}ngOnChanges(e){e.data&&(e.data.currentValue||null==e.data.currentValue)&&(this.data=e.data.currentValue)}get headerAdd(){return this.form.get("header")}addHeader(){this.headerAdd.push(new Q.e(""))}removeHeader(e){this.headerAdd.removeAt(e)}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}getHeader(){this.data[0]&&this.data[0].length==this.header.length&&this.header.map(e=>{this.headerAdd.push(new Q.e(e))})}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(O.f),L.Rb(Q.d),L.Rb(Z.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-export-excel-table"]],viewQuery:function(e,t){var i;1&e&&L.Sc(ee.e,!0),2&e&&L.wc(i=L.gc())&&(t.viewPort=i.first)},inputs:{height:"height",data:"data",header:"header"},features:[L.Bb()],decls:10,vars:5,consts:[["name","form","fxLayout","column",1,"content-view",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["itemSize","34",1,"h-100-p"],[1,"simple","simba-excel-table"],["formArrayName","header"],["class","",3,"top",4,"ngFor","ngForOf"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,""],[1,"my-form-field"],["matInput","","inputCheck","","type","text",2,"font-size","12px",3,"formControlName"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(L.Xb(0,"form",0,1),L.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),L.Xb(2,"cdk-virtual-scroll-viewport",2),L.Xb(3,"table",3),L.Xb(4,"thead"),L.Xb(5,"tr"),L.Vb(6,4),L.Jc(7,Ue,3,3,"th",5),L.Ub(),L.Wb(),L.Wb(),L.Xb(8,"tbody"),L.Jc(9,$e,3,1,"ng-container",6),L.Wb(),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Ic("height",t.height-136,"px"),L.pc("formGroup",t.form),L.Db(7),L.pc("ngForOf",t.form.value.header),L.Db(2),L.pc("cdkVirtualForOf",t.data))},directives:[Q.A,Q.q,J.d,Q.h,ee.e,ee.a,Q.c,O.s,ee.d,l.c,u.b,Q.b,Q.p,Q.g],styles:["simba-export-excel-table .content-view{overflow:auto}simba-export-excel-table .content-view .width-form{width:1400px}@media screen and (min-width:960px)and (max-width:1279px){simba-export-excel-table .content-view .width-form{width:100%}}simba-export-excel-table .content-view .rev-color{background-color:#b3e5fc}simba-export-excel-table .content-view .cost-color{background-color:#ffcf9c}simba-export-excel-table .content-view .simba-excel-table{font-size:12px}simba-export-excel-table .content-view .simba-excel-table .border-right{border-right:1px solid rgba(0,0,0,.12)}simba-export-excel-table .content-view .simba-excel-table td,simba-export-excel-table .content-view .simba-excel-table th{padding:8px!important;white-space:nowrap}simba-export-excel-table .content-view .simba-excel-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}simba-export-excel-table .content-view .simba-excel-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}simba-export-excel-table .content-view .simba-excel-table .sticky-left-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}simba-export-excel-table .content-view .simba-excel-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:40px;background-color:#fff;z-index:20}simba-export-excel-table .content-view .simba-excel-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}simba-export-excel-table .content-view .simba-excel-table .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}simba-export-excel-table .content-view .simba-excel-table .my-form-field .mat-form-field-infix{margin-top:-1.25em;width:100%!important}"],encapsulation:2}),e})();function Qe(e,t){if(1&e&&(L.Xb(0,"span"),L.Lc(1),L.kc(2,"number"),L.Wb()),2&e){const e=L.jc().$implicit;L.Db(1),L.Mc(L.mc(2,1,e.volume*(e.amount+e.tax_amount)*e.ex_rate,"1.0-0"))}}function Ze(e,t){if(1&e&&(L.Xb(0,"span"),L.Lc(1),L.kc(2,"number"),L.Wb()),2&e){const e=L.jc().$implicit;L.Db(1),L.Mc(L.mc(2,1,e.volume*(e.amount+e.tax_amount)*e.ex_rate,"1.0-0"))}}function et(e,t){if(1&e){const e=L.Yb();L.Xb(0,"mat-icon",13),L.fc("click",(function(t){L.Bc(e);const i=L.jc().$implicit,r=L.jc();return t.stopPropagation(),r.savePrice.emit(i)})),L.Lc(1,"save"),L.Wb()}}const tt=function(e){return{"red-A100-bg":e}},it=function(e){return{"red-A700-fg":e}},rt=function(e,t){return{"red-A700-fg":e,"rev-color":t}},at=function(e,t){return{"red-A700-fg":e,"cost-color":t}},nt=function(e,t){return{"rev-color":e,"cost-color":t}};function ot(e,t){if(1&e&&(L.Vb(0),L.Xb(1,"tr",15),L.Xb(2,"td",16),L.Lc(3),L.Wb(),L.Xb(4,"td",17),L.Lc(5),L.Wb(),L.Xb(6,"td",18),L.Lc(7),L.Wb(),L.Xb(8,"td",18),L.Lc(9),L.Wb(),L.Xb(10,"td",19),L.Lc(11),L.Wb(),L.Xb(12,"td",20),L.Lc(13),L.Wb(),L.Xb(14,"td",21),L.Lc(15),L.Wb(),L.Xb(16,"td",21),L.Lc(17),L.Wb(),L.Xb(18,"td",22),L.Lc(19),L.kc(20,"number"),L.Wb(),L.Xb(21,"td",23),L.Lc(22),L.Wb(),L.Xb(23,"td",24),L.Lc(24),L.kc(25,"number"),L.Wb(),L.Xb(26,"td",21),L.Lc(27),L.Wb(),L.Xb(28,"td",21),L.Lc(29),L.kc(30,"number"),L.Wb(),L.Xb(31,"td",22),L.Jc(32,Qe,3,4,"span",25),L.Wb(),L.Xb(33,"td",22),L.Jc(34,Ze,3,4,"span",25),L.Wb(),L.Xb(35,"td",26),L.Lc(36),L.Wb(),L.Xb(37,"td",27),L.Lc(38),L.Wb(),L.Xb(39,"td",28),L.Lc(40),L.Wb(),L.Xb(41,"td",29),L.Jc(42,et,2,0,"mat-icon",30),L.Wb(),L.Wb(),L.Ub()),2&e){const e=t.$implicit,i=t.index;L.Db(1),L.pc("ngClass",L.rc(37,tt,e.amount_shipment&&e.amount!=e.amount_shipment.amount)),L.Db(2),L.Mc(i+1),L.Db(2),L.Mc(e.code),L.Db(2),L.Mc(e.bill),L.Db(2),L.Mc(e.owner),L.Db(1),L.pc("matTooltip",e.partner_name)("matTooltipPosition","right"),L.Db(1),L.Mc(e.partner_short_name),L.Db(1),L.pc("matTooltip",e.price_name)("matTooltipPosition","right"),L.Db(1),L.Mc(e.price_code),L.Db(2),L.Mc(e.unit_code),L.Db(2),L.Mc(e.volume),L.Db(1),L.pc("ngClass",L.rc(39,it,e.amount<0)),L.Db(1),L.Mc(L.mc(20,28,e.amount,"1.2-2")),L.Db(3),L.Mc(e.tax),L.Db(2),L.Mc(L.mc(25,31,e.tax_amount,"1.2-2")),L.Db(3),L.Mc(e.currency_code),L.Db(2),L.Mc(L.mc(30,34,e.ex_rate,"1.0-0")),L.Db(2),L.pc("ngClass",L.sc(41,rt,e.amount<0,"Revenue"==e.type_name)),L.Db(1),L.pc("ngIf","Revenue"==e.type_name),L.Db(1),L.pc("ngClass",L.sc(44,at,e.amount<0,"Cost"==e.type_name)),L.Db(1),L.pc("ngIf","Cost"==e.type_name),L.Db(2),L.Mc(e.country_name),L.Db(2),L.Mc(null==e.amount_shipment?null:e.amount_shipment.amount),L.Db(1),L.pc("ngClass",L.sc(47,nt,"Revenue"==e.type_name,"Cost"==e.type_name)),L.Db(1),L.Mc(e.type_name),L.Db(2),L.pc("ngIf",e.code&&!e.amount_shipment&&"OTHER"!=e.price_code)}}let ct=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.datePipe=t,this.formBuilder=i,this.commonService=r,this.savePrice=new L.o,this.saveAllPrice=new L.o}ngOnInit(){}get inverseOfTranslation1(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(O.f),L.Rb(Q.d),L.Rb(Z.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-export-price-table"]],viewQuery:function(e,t){var i;1&e&&L.Sc(ee.e,!0),2&e&&L.wc(i=L.gc())&&(t.viewPort=i.first)},inputs:{height:"height",dataPrice:"dataPrice"},outputs:{savePrice:"savePrice",saveAllPrice:"saveAllPrice"},decls:46,vars:41,consts:[["fxLayout","column",1,"content-view"],["itemSize","34",1,"h-100-p"],[1,"simple","simba-price-table"],[1,"sticky-header-1","w-40","text-left","sticky-left-col1",2,"z-index","25"],[1,"sticky-header-1","w-160","sticky-left-col2",2,"z-index","25"],[1,"sticky-header-1","w-160"],[1,"sticky-header-1","w-100"],[1,"sticky-header-1","w-140"],[1,"sticky-header-1","w-60"],[1,"sticky-header-1","w-120","text-right"],[1,"sticky-header-1","w-120","text-right","rev-color"],[1,"sticky-header-1","w-120","text-right","cost-color"],[1,"sticky-header-1","w-40","sticky-right-col"],["color","accent",1,"cursor-pointer",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"ngClass"],[1,"w-40","text-center","sticky-left-col1"],[1,"w-160","sticky-left-col2"],[1,"w-160"],[1,"w-100",3,"matTooltip","matTooltipPosition"],[1,"w-140",3,"matTooltip","matTooltipPosition"],[1,"w-60"],[1,"w-120","text-right",3,"ngClass"],[1,"w-60","text-center"],[1,"w-100","text-right"],[4,"ngIf"],[1,"w-140"],[1,"w-120","text-right"],[1,"w-100",3,"ngClass"],[1,"sticky-right-col"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(L.Xb(0,"div",0),L.Xb(1,"cdk-virtual-scroll-viewport",1),L.Xb(2,"table",2),L.Xb(3,"thead"),L.Xb(4,"tr"),L.Xb(5,"th",3),L.Lc(6," No "),L.Wb(),L.Xb(7,"th",4),L.Lc(8,"Code"),L.Wb(),L.Xb(9,"th",5),L.Lc(10,"Bill"),L.Wb(),L.Xb(11,"th",5),L.Lc(12,"Owner"),L.Wb(),L.Xb(13,"th",6),L.Lc(14,"Party"),L.Wb(),L.Xb(15,"th",7),L.Lc(16,"Price"),L.Wb(),L.Xb(17,"th",8),L.Lc(18,"Unit"),L.Wb(),L.Xb(19,"th",8),L.Lc(20,"Volume"),L.Wb(),L.Xb(21,"th",9),L.Lc(22,"Amount"),L.Wb(),L.Xb(23,"th",8),L.Lc(24,"Tax"),L.Wb(),L.Xb(25,"th",6),L.Lc(26,"Tax Amount"),L.Wb(),L.Xb(27,"th",8),L.Lc(28,"Currency"),L.Wb(),L.Xb(29,"th",8),L.Lc(30,"Ex rate"),L.Wb(),L.Xb(31,"th",10),L.Lc(32,"Total Revenue"),L.Wb(),L.Xb(33,"th",11),L.Lc(34,"Total Cost"),L.Wb(),L.Xb(35,"th",7),L.Lc(36,"Payment center"),L.Wb(),L.Xb(37,"th",9),L.Lc(38,"Spt Amount"),L.Wb(),L.Xb(39,"th",6),L.Lc(40,"Type"),L.Wb(),L.Xb(41,"th",12),L.Xb(42,"mat-icon",13),L.fc("click",(function(e){return e.stopPropagation(),t.saveAllPrice.emit()})),L.Lc(43,"save"),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Xb(44,"tbody"),L.Jc(45,ot,43,50,"ng-container",14),L.Wb(),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Ic("height",t.height-136,"px"),L.Db(5),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(2),L.Ic("top",t.inverseOfTranslation1),L.Db(4),L.pc("cdkVirtualForOf",t.dataPrice))},directives:[J.d,ee.e,ee.a,h.a,ee.d,O.q,U.a,b.a,O.t],pipes:[O.g],styles:["simba-export-price-table .content-view{overflow:auto}simba-export-price-table .content-view .width-form{width:1400px}@media screen and (min-width:960px)and (max-width:1279px){simba-export-price-table .content-view .width-form{width:100%}}simba-export-price-table .content-view .rev-color{background-color:#b3e5fc}simba-export-price-table .content-view .cost-color{background-color:#ffcf9c}simba-export-price-table .content-view .simba-price-table{font-size:12px}simba-export-price-table .content-view .simba-price-table .border-right{border-right:1px solid rgba(0,0,0,.12)}simba-export-price-table .content-view .simba-price-table td,simba-export-price-table .content-view .simba-price-table th{padding:8px!important;white-space:nowrap}simba-export-price-table .content-view .simba-price-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}simba-export-price-table .content-view .simba-price-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}simba-export-price-table .content-view .simba-price-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}simba-export-price-table .content-view .simba-price-table .sticky-left-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}simba-export-price-table .content-view .simba-price-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:40px;background-color:#fff;z-index:20}simba-export-price-table .content-view .simba-price-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}simba-export-price-table .content-view .simba-price-table .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}simba-export-price-table .content-view .simba-price-table .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2}),e})();const st=["googleSheet"];function lt(e,t){1&e&&L.Lc(0,"Get data")}function ht(e,t){if(1&e){const e=L.Yb();L.Xb(0,"button",11),L.fc("click",(function(t){return L.Bc(e),L.jc().getHeader()})),L.Lc(1," Get Header "),L.Wb()}}function bt(e,t){1&e&&L.Lc(0,"Price")}const ut=function(e){return{hide:e}};let pt=(()=>{class e{constructor(e,t,i,r,a){this.authService=e,this.datePipe=t,this.formBuilder=i,this.googleApiService=r,this.commonService=a,this.getPrice=new L.o,this.savePrice=new L.o,this.saveAllPrice=new L.o,this._unsubscribeAll=new N.a}ngOnInit(){}ngAfterViewInit(){this.googleApiService.onGapiChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.auth=e,this.attachSignin()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}attachSignin(){this.auth.attachClickHandler(this.googleSheet._elementRef.nativeElement,{},e=>{this.token=this.googleApiService.token=e.getAuthResponse().access_token,this.googleApiService.createPicker()},(function(e){alert("ERROR"),console.error(e)}))}openPicker(){this.googleApiService.createPicker()}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(H.a),L.Rb(O.f),L.Rb(Q.d),L.Rb(E.a),L.Rb(Z.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-export-data"]],viewQuery:function(e,t){var i;1&e&&L.Sc(st,!0),2&e&&L.wc(i=L.gc())&&(t.googleSheet=i.first)},inputs:{height:"height",data:"data",dataPrice:"dataPrice",header:"header"},outputs:{getPrice:"getPrice",savePrice:"savePrice",saveAllPrice:"saveAllPrice"},decls:22,vars:13,consts:[["fxLayout","column"],["fxLayout","row wrap"],["fxFlex","100",3,"linear"],["stepper",""],["matStepLabel",""],[3,"height","data","header"],["fxLayout","row"],["mat-raised-button","","type","button","color","accent","id","googleSheet",1,"mr-8",3,"ngClass"],["googleSheet",""],["mat-raised-button","","type","button","color","accent","id","googleSheet2",1,"mr-8",3,"ngClass","click"],["class","mr-8","mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",1,"mr-8",3,"click"],[3,"height","dataPrice","savePrice","saveAllPrice"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent",1,"mr-8"]],template:function(e,t){if(1&e){const e=L.Yb();L.Xb(0,"div",0),L.Xb(1,"div",1),L.Xb(2,"mat-horizontal-stepper",2,3),L.Xb(4,"mat-step"),L.Jc(5,lt,1,0,"ng-template",4),L.Sb(6,"simba-export-excel-table",5),L.Xb(7,"div",6),L.Xb(8,"button",7,8),L.Lc(10," Get Data "),L.Wb(),L.Xb(11,"button",9),L.fc("click",(function(e){return t.openPicker()})),L.Lc(12," Get Data "),L.Wb(),L.Jc(13,ht,2,0,"button",10),L.Xb(14,"button",11),L.fc("click",(function(i){L.Bc(e);const r=L.xc(3);return t.getPrice.emit(r)})),L.Lc(15," Get Price "),L.Wb(),L.Wb(),L.Wb(),L.Xb(16,"mat-step"),L.Jc(17,bt,1,0,"ng-template",4),L.Xb(18,"simba-export-price-table",12),L.fc("savePrice",(function(e){return t.savePrice.emit(e)}))("saveAllPrice",(function(e){return t.saveAllPrice.emit(e)})),L.Wb(),L.Xb(19,"div",6),L.Xb(20,"button",13),L.Lc(21," Previous "),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb()}2&e&&(L.Db(2),L.pc("linear",!0),L.Db(4),L.pc("height",t.height)("data",t.data)("header",t.header),L.Db(2),L.pc("ngClass",L.rc(9,ut,t.token)),L.Db(3),L.pc("ngClass",L.rc(11,ut,!t.token)),L.Db(2),L.pc("ngIf",t.data.length>0),L.Db(5),L.pc("height",t.height)("dataPrice",t.dataPrice))},directives:[J.d,S.a,J.b,S.b,S.c,Ye,c.b,O.q,U.a,O.t,ct,S.f],styles:[""],encapsulation:2}),e})();const mt=["googleSheet"];function dt(e,t){if(1&e){const e=L.Yb();L.Xb(0,"fuse-sidebar",9),L.Xb(1,"simba-sidebar",10),L.fc("fitlerShipment",(function(t){return L.Bc(e),L.jc().fitlerShipment(t)}))("typeChange",(function(t){return L.Bc(e),L.jc().typeChange(t)}))("updateSelectItem",(function(t){return L.Bc(e),L.jc().updateSelectItem(t)})),L.Wb(),L.Wb()}if(2&e){const e=L.jc();L.Db(1),L.pc("type",e.type)("selected",e.selected)("total",e.total)("formSearch",e.formSearch)("customer",e.customer)("supplier",e.supplier)("agent",e.agent)("voyage",e.voyage)("price",e.price)("currency",e.currency)("country",e.country)}}let ft=(()=>{class e{constructor(e,t,i,r,a,n,o,c){this._fuseSidebarService=e,this.simbaService=t,this.router=i,this.authService=r,this.route=a,this.datePipe=n,this._matDialog=o,this.googleApiService=c,this.sidebarPanel=!1,this.height=560,this.type="form",this.priceObj={},this.objShipment={},this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.totalAll={VND:0,revenue:{},cost:{},currency:[]},this.checkAll=!1,this.importData=[["1","KOTA JAYA V. 0229N","05.11.2022","PIL","14,121","SELSINHP2211051","1","","350","","","48","76","300","774","560","56.25","17.5","0","17.5","140.25","","","0"],["2","PIRA BHUM V. 552N","07.11.2022","RCL","14,342","SELSINSG2211071","","1","430","","","60","40","835","1365","570","181","0","21.5","21.5","592.5","","125","-125"],["3","KOTA RATNA V. 0098N","09.11.2022","PIL","14,134","SELSINPG2211091","1","","400","","","100","","","500","360","15.5","20","0","20","104.5","","","0"],["4","KOTA RATNA V. 0098N","09.11.2022","PIL","14,134","SELSINSG2211091","1","","300","","","100","","","400","360","15.5","15","0","15","9.5","","","0"],["5","PIRA BHUM V. 553N","13.11.2022","RCL","14,446","SELSINSG2211131","","1","430","","","60","40","835","1365","570","181","0","21.5","21.5","592.5","","125","-125"],["6","KOTA RATNA V. 0099N","16.11.2022","PIL","14,017","SELSINSG2211161","1","","300","","","100","","","400","","","15","0","15","385","","","0"],["7","KOTA JAYA V. 0230N","20.11.2022","BGP","14,013","SELSINHP2211191","1","","450","","","100","50","","600","400","","22.5","0","22.5","177.5","","37.75","-37.75"],["8","PIRA BHUM V. 554N","21.11.2022","RCL","14,301","SELSINSG2211211","","1","430","","","60","40","835","1365","570","181","0","21.5","21.5","592.5","","125","-125"],["9","KOTA RATNA V. 0100N","23.11.2022","PIL","13,703","SELSINPG2211231","","1","800","","","200","","","1000","","","0","40","40","960","","","0"],["10","PIRA BHUM V. 555N","28.11.2022","RCL","13,998","SELSINSG2211281","1","","215","","","30","20","417.5","682.5","300","90.5","10.75","0","10.75","281.25","","95","-95"],["11","PIRA BHUM V. 555N","28.11.2022","RCL","13,998","SELSINSG2211282","","1","600","","","100","100","","800","570","31","0","30","30","169","","125","-125"],["12","PIRA BHUM V. 555N","28.11.2022","RCL","13,998","SELSINSG2211283","1","","215","","","30","20","337.5","602.5","300","15.5","10.75","0","10.75","276.25","","95","-95"],["13","KOTA NABIL V. 0218N","29.11.2022","BGP","14,102","SELSINHP2211291","","1","700","","","96","152","600","1548","800","","0","35","35","713","","43","-43"]],this.dataPrice=[],this.header=[],this._unsubscribeAll=new N.a}ngOnInit(){this.searchText=this.simbaService.searchText,this.formSearch=this.simbaService.currenSearch?this.simbaService.currenSearch.formSearch:this.simbaService.defaultSearch.formSearch,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this.authService.windowSizeChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-20}),this.authService.changeScreen.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-20:this.authService.screenHeight-64-64-20}),this.simbaService.onDataChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.customer=this.simbaService.dataCustomer,this.supplier=this.simbaService.dataSupplier,this.users=this.simbaService.users}),this.simbaService.onDataItemChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.agent=this.simbaService.agent,this.commodity=this.simbaService.commodity,this.packageType=this.simbaService.packageType,this.currency=this.simbaService.currency,this.country=this.simbaService.country,this.depot=this.simbaService.depot,this.price=this.simbaService.price,this.priceObj={},this.price.map(e=>{this.priceObj[e.code]=e}),console.log(this.priceObj.DG20),console.log(this.priceObj.DG40)}),this.simbaService.onShipmentChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{this.shipment=e.export,this.objShipment={},this.shipment.length>0&&(this.shipment.map(e=>{this.objShipment[e.code+"-"+e.price_code+"-"+e.country_name+"-"+e.type_name]=e}),this.header=this.simbaService.headerExp),this.filterChange()}),this.googleApiService.onFileChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe(e=>{e.length>0&&(this.importData=e)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.simbaService)}searchFilter(e){this.simbaService.onSearchTextChanged.next(e)}fitlerShipment(e){this.formSearch=e,this.authService.onRequestChanged.next(!0),Promise.all([this.simbaService.getSelShipmentSimba(e)]).then(e=>{this.authService.onRequestChanged.next(!1)},e=>{this.authService.onRequestChanged.next(!1),alert("Submit fail")})}getShipment(){this.authService.onRequestChanged.next(!0),this.simbaService.getSelShipmentSimba(this.formSearch).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}getReportData(){this.authService.onRequestChanged.next(!0),this.simbaService.getSelShipmentSimba(this.formSearch).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")})}typeChange(e){this.type=e}getCheckAll(e){this.checkAll=!0,this.selected.length==this.filterData.length&&(this.checkAll=!1),this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map(e=>{e.select=this.checkAll,e.select&&(this.total.currency.includes(e.currency_code)||(this.total.currency.push(e.currency_code),this.total.revenue[e.currency_code]=0,this.total.cost[e.currency_code]=0),this.selected.push(e),"Revenue"==e.type_name?(this.total.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(this.total.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate))})}getSelectItem(e){e.select=!e.select,this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map(e=>{e.select&&(this.total.currency.includes(e.currency_code)||(this.total.currency.push(e.currency_code),this.total.revenue[e.currency_code]=0,this.total.cost[e.currency_code]=0),this.selected.push(e),"Revenue"==e.type_name?(this.total.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(this.total.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.total.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate))}),this.checkAll=!1,this.selected.length==this.filterData.length&&(this.checkAll=!0)}updateServer([e,t,i]){switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":t.pay_party=parseInt(i[1].partner),delete t.partner,this.simbaService.updateSelRevenue(t).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.getShipment():(console.error(e),alert("Error update item"),this.getShipment())}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("update item error")});break;case"Cost":t.issue_party=parseInt(i[1].partner),delete t.partner,this.simbaService.updateSelCost(t).then(e=>{this.authService.onRequestChanged.next(!1),e.affectedRows>0?this.getShipment():(console.error(e),alert("Error update item"),this.getShipment())}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("update item error")})}}filterChange(e){this.filterContent=e||null;let t=this.shipment.slice();t.map(e=>{e.issue_date&&(e.issue_date=new Date(e.issue_date).setDate(new Date(e.issue_date).getDate())),e.pay_date&&(e.pay_date=new Date(e.pay_date).setDate(new Date(e.pay_date).getDate()))}),this.filterContent&&(this.filterContent.code&&(t=t.filter(e=>e.code.toLowerCase().includes(this.filterContent.code.toLowerCase()))),this.filterContent.bill&&(t=t.filter(e=>e.bill&&e.bill.toLowerCase().includes(this.filterContent.bill.toLowerCase()))),this.filterContent.party&&(t=t.filter(e=>e.partner_short_name.toLowerCase().includes(this.filterContent.party.toLowerCase()))),this.filterContent.price&&(t=t.filter(e=>e.price_code.toLowerCase().includes(this.filterContent.price.toLowerCase()))),this.filterContent.unit&&(t=t.filter(e=>e.unit_code.toLowerCase().includes(this.filterContent.unit.toLowerCase()))),this.filterContent.debit&&(t=t.filter(e=>e.debit&&e.debit.toLowerCase().includes(this.filterContent.debit.toLowerCase()))),this.filterContent.issue_date&&(t=t.filter(e=>e.issue_date&&e.issue_date==new Date(this.filterContent.issue_date).getTime())),"All"!=this.filterContent.pay_date&&(1==this.filterContent.pay_date?t=t.filter(e=>e.pay_date):0==this.filterContent.pay_date&&(t=t.filter(e=>!e.pay_date))),this.filterContent.inv_number&&(t=t.filter(e=>e.inv_number&&e.inv_number.toLowerCase().includes(this.filterContent.inv_number.toLowerCase()))),this.filterContent.bank_ref&&(t=t.filter(e=>e.bank_ref&&e.bank_ref.toLowerCase().includes(this.filterContent.bank_ref.toLowerCase()))),this.filterContent.amount&&(t=t.filter(e=>e.amount==this.filterContent.amount)),this.filterContent.tax&&(t=t.filter(e=>e.tax==this.filterContent.tax)),this.filterContent.tax_amount&&(t=t.filter(e=>e.tax_amount==this.filterContent.tax_amount)),this.filterContent.currency&&(t=t.filter(e=>e.currency_code.toLowerCase().includes(this.filterContent.currency.toLowerCase()))),this.filterContent.payment_center&&(t=t.filter(e=>e.country_name.toLowerCase().includes(this.filterContent.payment_center.toLowerCase()))),this.filterContent.info&&(t=t.filter(e=>e.info.toLowerCase().includes(this.filterContent.info.toLowerCase()))),"All"!=this.filterContent.type_name&&(t=t.filter(e=>e.type_name==this.filterContent.type_name))),this.totalAll={VND:0,revenue:{},cost:{},currency:[]},t.map(e=>{this.totalAll.currency.includes(e.currency_code)||(this.totalAll.currency.push(e.currency_code),this.totalAll.revenue[e.currency_code]=0,this.totalAll.cost[e.currency_code]=0),"Revenue"==e.type_name?(this.totalAll.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.totalAll.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(this.totalAll.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),this.totalAll.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate)}),this.filterData=t}updateSelectItem(e){let t=[];this.selected.map(e=>{t.push({id:e.id,type:e.type_name})}),e.issue_date&&(e.issue_date=this.datePipe.transform(e.issue_date,"yyyy-MM-dd")),e.pay_date&&(e.pay_date=this.datePipe.transform(e.pay_date,"yyyy-MM-dd")),this.authService.onRequestChanged.next(!0),this.simbaService.updateMultiShipmentItem([e,t]).then(e=>{this.getShipment(),this.selected=[]}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error load data")})}getPrice(e){this.dataPrice=[];let t={},i={};function r(e,t,i,r,a,n,o,c,s,l){let h={shipment:o.id,code:o.code,bill:o.bill,owner:r,volume:t,amount:i/t,tax:0,tax_amount:0,price:a,price_code:a.code,unit_code:a.unit_code,currency:n.id,currency_code:n.code,partner:c.id,partner_short_name:c.short_name,partner_name:c.full_name,payment_center:c.country,country_name:c.country_name,ex_rate:n.exrate,type_name:l};if(h.shipment){let e=h.code+"-"+h.price_code+"-"+h.country_name+"-"+h.type_name;h.amount_shipment=s[e]?s[e]:null}return h}this.filterData.map(e=>{t[e.code]||(t[e.code]={id:e.shipment,code:e.code,bill:e.bill}),e.bill&&!i[e.bill]&&(i[e.bill]={id:e.shipment,code:e.code,bill:e.bill}),"SELSINPH2210061"==e.code&&console.log(i.SELSINPH2210061)}),console.log(i.SELSINPH2210061);let a=this.supplier.find(e=>e.id==this.formSearch.agent),n=this.customer.find(e=>e.short_name==a.short_name),o=this.header.indexOf("BL"),c=this.header.indexOf("OF PP"),s=this.header.indexOf("BAF"),l=this.header.indexOf("ECRS"),h=this.header.indexOf("LSS"),b=this.header.indexOf("DG"),u=this.header.indexOf("Paid OF"),p=this.header.indexOf("Paid BAF"),m=this.header.indexOf("Total Com"),d=this.header.indexOf("CL SGD"),f=this.header.indexOf("Paid SGD"),g=this.currency.find(e=>"USD"==e.code),v=this.currency.find(e=>"SGD"==e.code);this.importData.map(e=>{let x=e[6]?20:40,S=20==x?e[6]:e[7],y=e[3],_={id:null,code:null,bill:e[o]};t[e[o]]?(_.id=t[e[o]].id,_.code=t[e[o]].code):i[e[o]]&&(_.id=i[e[o]].id,_.code=i[e[o]].code);let w=!1;if(e[c]){let t="Revenue",i=r(0,S,e[c],y,this.priceObj[20==x?"OF20":"OF40"],g,_,"Revenue"==t?n:a,this.objShipment,t),o=parseFloat(e[8])/parseInt(S)+parseFloat(e[11])/parseInt(S)+parseFloat(e[12])/parseInt(S);i.amount_shipment&&i.amount_shipment.amount==o&&(w=!0),o+=parseFloat(e[13])/parseInt(S),i.amount_shipment&&i.amount_shipment.amount==o&&(w=!0),w&&(i.code=null),this.dataPrice.push(i)}if(e[s]){let t="Revenue",i=r(0,S,e[s],y,this.priceObj[20==x?"BAF20":"BAF40"],g,_,"Revenue"==t?n:a,this.objShipment,t);w&&(i.code=null),this.dataPrice.push(i)}if(e[l]){let t="Revenue",i=r(0,S,e[l],y,this.priceObj[20==x?"ECRS20":"ECRS40"],g,_,"Revenue"==t?n:a,this.objShipment,t);w&&(i.code=null),this.dataPrice.push(i)}if(e[h]){let t="Revenue",i=r(0,S,e[h],y,this.priceObj[20==x?"LSS20":"LSS40"],g,_,"Revenue"==t?n:a,this.objShipment,t);w&&(i.code=null),this.dataPrice.push(i)}if(e[b]){let t="Revenue";this.dataPrice.push(r(0,1,e[b],y,this.priceObj[20==x?"DG20":"DG40"],g,_,"Revenue"==t?n:a,this.objShipment,t))}if(e[u]){let t="Cost";this.dataPrice.push(r(0,S,e[u],y,this.priceObj[20==x?"OF20":"OF40"],g,_,"Revenue"==t?n:a,this.objShipment,t))}if(e[p]){let t="Cost";this.dataPrice.push(r(0,S,e[p],y,this.priceObj[20==x?"BAF20":"BAF40"],g,_,"Revenue"==t?n:a,this.objShipment,t))}if(e[m]){let t="Cost";this.dataPrice.push(r(0,S,e[m],y,this.priceObj[20==x?"ADF20":"ADF40"],g,_,"Revenue"==t?n:a,this.objShipment,t))}if(e[d]){let t="Revenue";this.dataPrice.push(r(0,S,e[d],y,this.priceObj[20==x?"LTHC20":"LTHC40"],v,_,"Revenue"==t?n:a,this.objShipment,t))}if(e[f]){let t="Cost";this.dataPrice.push(r(0,S,e[f],y,this.priceObj[20==x?"DIS20":"DIS40"],v,_,"Revenue"==t?n:a,this.objShipment,t))}}),e.next()}savePrice(e){let t={shipment:e.shipment,price:e.price,volume:e.volume,amount:e.amount,tax:e.tax,tax_amount:e.tax_amount,currency:e.currency,ex_rate:e.ex_rate,payment_center:e.payment_center,update_by:this.authService.user,create_by:this.authService.user};switch(console.log(e),this.authService.onRequestChanged.next(!0),e.type_name){case"Revenue":t.pay_party=e.partner,this.simbaService.createSelRevenue(t).then(i=>{this.authService.onRequestChanged.next(!1),t.id=i.insertId;let r=JSON.parse(JSON.stringify(e));r.id=t.id,e.amount_shipment=t,this.shipment.push(r),this.objShipment[r.code+"-"+r.price_code+"-"+r.country_name]=r}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e.type_name+" error")});break;case"Cost":t.issue_party=e.partner,this.simbaService.createSelCost(t).then(i=>{this.authService.onRequestChanged.next(!1),t.id=i.insertId;let r=JSON.parse(JSON.stringify(e));r.id=t.id,e.amount_shipment=t,this.shipment.push(r),this.objShipment[r.code+"-"+r.price_code+"-"+r.country_name]=r}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e.type_name+" error")})}}saveAllPrice(e){this.dataPrice.map(e=>{e.code&&!e.amount_shipment&&"DG"!=e.price_code&&this.savePrice(e)})}}return e.\u0275fac=function(t){return new(t||e)(L.Rb(F.a),L.Rb(z),L.Rb(r.g),L.Rb(H.a),L.Rb(r.a),L.Rb(O.f),L.Rb(f.b),L.Rb(E.a))},e.\u0275cmp=L.Lb({type:e,selectors:[["simba-export"]],viewQuery:function(e,t){var i;1&e&&L.Sc(mt,!0),2&e&&L.wc(i=L.gc())&&(t.googleSheet=i.first)},decls:9,vars:9,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","simba-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],[1,"center","mr-0","ml-0"],[3,"searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content"],["fxLayout","column",1,"pl-8","pt-8",2,"overflow","auto"],["fxLayout","row wrap"],["fxFlex","100",1,"mb-4"],[3,"height","data","dataPrice","header","getPrice","savePrice","saveAllPrice"],["name","simba-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange","updateSelectItem"]],template:function(e,t){1&e&&(L.Xb(0,"div",0),L.Jc(1,dt,2,11,"fuse-sidebar",1),L.Xb(2,"div",2),L.Xb(3,"simba-header",3),L.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),L.Wb(),L.Xb(4,"div",4),L.Xb(5,"div",5),L.Xb(6,"div",6),L.Xb(7,"div",7),L.Xb(8,"simba-export-data",8),L.fc("getPrice",(function(e){return t.getPrice(e)}))("savePrice",(function(e){return t.savePrice(e)}))("saveAllPrice",(function(e){return t.saveAllPrice(e)})),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb(),L.Wb()),2&e&&(L.Db(1),L.pc("ngIf",t.sidebarPanel),L.Db(2),L.pc("searchText",t.searchText)("sidebarName","simba-sidebar"),L.Db(2),L.Ic("height",t.height+8,"px"),L.Db(3),L.pc("height",t.height)("data",t.importData)("dataPrice",t.dataPrice)("header",t.header))},directives:[G.a,O.t,Y,J.d,J.b,pt,ye.a,Ee],styles:["simba-export{width:100%}"],encapsulation:2}),e})();var gt=i("cfqv");i.d(t,"SimbaModule",(function(){return xt}));const vt=[{path:"",component:T,resolve:{data:z,google:E.a},children:[{path:"import",component:Je},{path:"export",component:ft}]}];let xt=(()=>{class e{}return e.\u0275mod=L.Pb({type:e}),e.\u0275inj=L.Ob({factory:function(t){return new(t||e)},providers:[z],imports:[[r.k.forChild(vt),a.b,n.b,o.c,c.c,s.b,l.e,h.b,b.b,u.c,p.c,m.b,d.c,f.e,g.b,v.b,x.b,S.d,y.e,_.b,w.b,k.b,D.k,W.c,C.t,A.a,P.a,X.a,I.f,ee.g,gt.b]]}),e})()},cfqv:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return b}));var r=i("8LU1"),a=i("vxfF"),n=i("fXoL"),o=i("HDdC");class c{constructor(e=50){this._totalWeight=0,this._defaultItemSize=e,this._averageItemSize=e}getAverageItemSize(){return this._averageItemSize}addSample(e,t){const i=this._totalWeight+e.end-e.start;if(i){const e=(t+this._averageItemSize*this._totalWeight)/i;e&&(this._averageItemSize=e,this._totalWeight=i)}}reset(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}class s{constructor(e,t,i=new c){this.scrolledIndexChange=new o.a(()=>{throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")}),this._viewport=null,this._removalFailures=0,this._minBufferPx=e,this._maxBufferPx=t,this._averager=i}attach(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}detach(){this._viewport=null}onContentScrolled(){this._viewport&&this._updateRenderedContentAfterScroll()}onDataLengthChanged(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}onContentRendered(){this._viewport&&this._checkRenderedContentSize()}onRenderedOffsetChanged(){this._viewport&&this._checkRenderedContentOffset()}scrollToIndex(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}updateBufferSize(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}_updateRenderedContentAfterScroll(){const e=this._viewport,t=e.measureScrollOffset();let i=t-this._lastScrollOffset,r=Math.abs(i);const a=e.getRenderedRange();let n=0;if(i<0){const e=a.start*this._averager.getAverageItemSize();n=Math.round((e-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,r/(t+r)))),i-=n,r=Math.abs(i)}const o=this._lastScrollOffset-this._lastRenderedContentOffset,c=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),s=r+this._minBufferPx-(i<0?o:c);if(s>0)if(r>=e.getViewportSize())this._renderContentForCurrentOffset();else{const t=Math.max(0,Math.ceil((s-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),l=(i<0?c:o)-this._minBufferPx+r,h=Math.floor(l/this._averager.getAverageItemSize()/(this._removalFailures+1)),b=Math.min(a.end-a.start,Math.max(0,h)),u=this._expandRange(a,i<0?t:0,i>0?t:0);let p,m;if(i<0?u.end=Math.max(u.start+1,u.end-b):u.start=Math.min(u.end-1,u.start+b),i<0){let t=e.measureRangeSize({start:u.end,end:a.end});t<=l?(p=this._lastRenderedContentOffset+this._lastRenderedContentSize-t,this._removalFailures=0):(u.end=a.end,p=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),m="to-end"}else{const t=e.measureRangeSize({start:a.start,end:u.start});t<=l?(p=this._lastRenderedContentOffset+t,this._removalFailures=0):(u.start=a.start,p=this._lastRenderedContentOffset,this._removalFailures++),m="to-start"}e.setRenderedRange(u),e.setRenderedContentOffset(p+n,m)}else n&&e.setRenderedContentOffset(this._lastRenderedContentOffset+n);this._lastScrollOffset=t}_checkRenderedContentSize(){const e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}_checkRenderedContentOffset(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}_renderContentForCurrentOffset(){const e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;const i=this._averager.getAverageItemSize(),r=Math.min(e.getDataLength()-1,Math.floor(t/i)),a=Math.ceil(this._maxBufferPx/i),n=this._expandRange(this._getVisibleRangeForIndex(r),a,a);e.setRenderedRange(n),e.setRenderedContentOffset(i*n.start)}_getVisibleRangeForIndex(e){const t=this._viewport,i={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},r=i.end-t.getDataLength();return r>0&&(i.start=Math.max(0,i.start-r)),i}_expandRange(e,t,i){const r=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(r.getDataLength(),e.end+i)}}_updateTotalContentSize(e){const t=this._viewport,i=t.getRenderedRange(),r=e+(t.getDataLength()-(i.end-i.start))*this._averager.getAverageItemSize();t.setTotalContentSize(r)}}function l(e){return e._scrollStrategy}let h=(()=>{class e{constructor(){this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new s(this.minBufferPx,this.maxBufferPx)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Object(r.f)(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Object(r.f)(e)}ngOnChanges(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[n.Cb([{provide:a.h,useFactory:l,deps:[Object(n.V)(()=>e)]}]),n.Bb()]}),e})(),b=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},jD4G:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{static filterArrayByString(e,t){return""===t?e:(t=t.toLowerCase(),e.filter(e=>this.searchInObj(e,t)))}static searchInObj(e,t){for(const i in e){if(!e.hasOwnProperty(i))continue;const r=e[i];if("string"==typeof r){if(this.searchInString(r,t))return!0}else if(Array.isArray(r)&&this.searchInArray(r,t))return!0;if("object"==typeof r&&this.searchInObj(r,t))return!0}}static searchInArray(e,t){for(const i of e){if("string"==typeof i&&this.searchInString(i,t))return!0;if("object"==typeof i&&this.searchInObj(i,t))return!0}}static searchInString(e,t){return e.toLowerCase().includes(t)}static generateGUID(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}static toggleInArray(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}static handleize(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}}}]);