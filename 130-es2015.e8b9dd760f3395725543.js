(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{XfhF:function(t,e,o){"use strict";o.r(e);var i=o("tyNb"),n=o("5HBU"),a=o("STbY"),r=o("/1cH"),c=o("iadO"),b=o("bTqV"),l=o("7EHt"),s=o("kmnG"),m=o("NFeN"),d=o("Qu3c"),p=o("qFsG"),u=o("wZkO"),h=o("d3UM"),f=o("QibW"),g=o("0IaG"),v=o("/t3+"),k=o("bSwM"),y=o("M9IT"),x=o("xHqg"),X=o("A5z7"),W=o("bv9b"),w=o("XhcP"),D=o("FKr1"),_=o("1jcm"),L=o("+0xr"),S=o("Dh3D"),C=o("IOBc"),O=o("212X"),A=o("vxfF"),q=o("cfqv"),N=o("LPQX"),I=o("XNiG"),B=o("1G5W"),M=o("PVWW"),P=o("fXoL"),j=o("HX77"),J=o("qXBG"),F=o("lJxs"),T=o("2Vo4"),E=o("tk/3"),H=o("I/3d");let R=(()=>{class t{constructor(t,e,o,i){if(this.router=t,this.db=e,this.authService=o,this._httpClient=i,this.codeCompany=["DCL","SEG","SEL","SIN","SLO","TWN","REF: "],this.onVoyageChanged=new T.a([]),this.onQuoteChanged=new T.a([]),this.onShipmentChanged=new T.a(null),this.onDataChanged=new T.a([]),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}resolve(t){return this.modul=t.params.modul,this.authService.routerData=t,new Promise((t,e)=>{Promise.all([this.getItemData(),this.getVoyage(),this.getQuote()]).then(([])=>{t()},e)})}getItemData(){let t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel/book/book",t).subscribe(t=>{this.customer=t.customer,this.agent=t.agent,this.seaport=t.seaport,this.user=t.user,this.commodity=t.commodity,this.packageType=t.packageType,this.price=t.price,this.currency=t.currency,this.country=t.country,this.depot=t.depot,this.onDataChanged.next(t),e(t)},o)})}getVoyage(t){let e={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})},o="/sel/book/voyage/"+(t?1:0);return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+o,e).subscribe(e=>{this.voyage=e,this.onVoyageChanged.next(e),t(e)},i)})}getQuote(t){let e={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})},o="/sel/book/quote/"+(t?1:0);return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+o,e).subscribe(e=>{this.quote=e.quote,this.tarrif=e.tarrif,this.onQuoteChanged.next(e),t(e)},i)})}writeDatabaseBooking(t,e){this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(t).set(e)}readDatabaseBooking(){return this.bookingCollection=this.db.collection("booking-draft"),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(F.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)}))),this.booking}readDatabaseBookingByUser(t){return this.bookingCollection=this.db.collection("booking-draft",e=>e.where("user","==",t)),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(F.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)}))),this.booking}getDatabaseBookingById(t){return this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(t).valueChanges()}updateDatabaseBookingById(t,e){this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(t).set(e)}deleteDatabaseBookingById(t){this.bookingDoc=this.db.doc("booking-draft/"+t),this.bookingDoc.delete()}updateBookingConfirm(t,e){let o=e.book,i=e.voyage,n=o.volume.map(t=>t.commodity.name);n=n.filter((t,e,o)=>o.indexOf(t)===e);let a,r,c=n.join(",");i.closing_time||(i.closing_time=i.depart_time-864e5),"HAIPHONG"==i.load_port_name||"DA NANG"==i.load_port_name?(a=null,r="CAP CONT NANG, SACH, TOT"):(a="DUY\u1ec6T L\u1ec6NH QUA EMAIL",r="Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container");let b="";o.volume.map(t=>{b+=this.calculateTotal(t.cont_type.code,o.volume)+"x"+t.cont_type.code+" "});let l={book_number:o.code,shipper:o.customer,agent:o.agent?o.agent:null,volume:o.volume,commodity:c,empty_pick_up_depot:o.empty_pick_up_depot?o.empty_pick_up_depot:null,place_of_stuffing:o.place_of_stuffing?o.place_of_stuffing:null,closing_time_vgm:o.closing_time_vgm?o.closing_time_vgm:null,return_laden_cont:i.load_terminal_name,clcv:o.clcv?o.clcv:a,note:o.note?o.note:r,contact_note:o.contact_note?o.contact_note:"HOCHIMINH"==i.pol?"Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container":"For picking-up container, handing over custom clearance sheet, pls contact with our branch as follows",voyage:{pol:i.load_port_name,pod:i.discharge_port_name,load_terminal:i.load_terminal_name,discharge_terminal:i.discharge_terminal_name,vessel:i.vessel_name.replace(i.name,"").trim(),voyage:i.name,closing_time:i.closing_time,etd:i.depart_time,eta:i.arrive_time},lcv_volume:b,lcv_note:o.lcv_note?o.lcv_note:null,truck_name:o.truck_name?o.truck_name:null,truck_number:o.truck_number?o.truck_number:null,valid:o.valid?o.valid:null,valid_time:o.valid_time?o.valid_time:null,code_company:o.code_company?o.code_company:""};e.bookConfirm=l,this.updateDatabaseBookingById(t,e)}calculateTotal(t,e){let o=0;return e.map(e=>{e.cont_type.code==t&&(o+=e.quantity)}),o}getCustomer(){let t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel-book/customer",t).subscribe(t=>{e(t)},o)})}getDepotByPortId(t){let e={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel-book/depot/"+t,e).subscribe(t=>{this.depot=t,o(t)},i)})}updateSelDocument(t){let e={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel-document",t,e).subscribe(t=>{o(t)},i)})}}return t.\u0275fac=function(e){return new(e||t)(P.bc(i.g),P.bc(H.a),P.bc(J.a),P.bc(E.a))},t.\u0275prov=P.Nb({token:t,factory:t.\u0275fac}),t})();var V=o("B9zo"),G=o("ofXK"),U=o("fE3o"),$=o("0JVi"),z=o("XiUz"),Q=o("znSr");function Y(t,e){if(1&t){const t=P.Yb();P.Xb(0,"button",8),P.fc("click",(function(e){P.Bc(t);const o=P.jc();return e.stopPropagation(),o.changeScreen(!0)})),P.Xb(1,"mat-icon"),P.Lc(2,"flip_to_front"),P.Wb(),P.Wb()}}function K(t,e){if(1&t){const t=P.Yb();P.Xb(0,"button",8),P.fc("click",(function(e){P.Bc(t);const o=P.jc();return e.stopPropagation(),o.changeScreen(!1)})),P.Xb(1,"mat-icon"),P.Lc(2,"flip_to_back"),P.Wb(),P.Wb()}}let Z=(()=>{class t{constructor(t,e){this.authService=t,this._fuseConfigService=e,this.fullScreen=!1,this.toggleSidebar=new P.o,this.showHideBar=new P.o,this.refreshPage=new P.o,this._unsubscribeAll=new I.a}ngOnInit(){}changeScreen(t){this.fullScreen=t,this.authService.changeScreen.next(t),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return t.\u0275fac=function(e){return new(e||t)(P.Rb(J.a),P.Rb($.b))},t.\u0275cmp=P.Lb({type:t,selectors:[["bookings-form-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(P.Xb(0,"mat-toolbar",0),P.Xb(1,"div",1),P.Xb(2,"div",2),P.Xb(3,"div",3),P.Xb(4,"button",4),P.fc("click",(function(t){return e.toggleSidebar.emit(e.sidebarName)})),P.Xb(5,"mat-icon"),P.Lc(6,"menu"),P.Wb(),P.Wb(),P.Xb(7,"button",5),P.fc("click",(function(t){return e.showHideBar.emit()})),P.Xb(8,"mat-icon"),P.Lc(9,"menu"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(10,"div",6),P.Sb(11,"div",7),P.Xb(12,"button",8),P.fc("click",(function(t){return t.stopPropagation(),e.refreshPage.emit()})),P.Xb(13,"mat-icon",9),P.Lc(14,"refresh"),P.Wb(),P.Wb(),P.Sb(15,"div",7),P.Jc(16,Y,3,0,"button",10),P.Jc(17,K,3,0,"button",10),P.Sb(18,"div",7),P.Xb(19,"button",8),P.fc("click",(function(t){return e.toggleSidebar.emit("bookings-form-setting")})),P.Xb(20,"mat-icon"),P.Lc(21,"settings"),P.Wb(),P.Wb(),P.Sb(22,"div",7),P.Wb(),P.Wb(),P.Wb()),2&t&&(P.Db(16),P.pc("ngIf",!e.fullScreen),P.Db(1),P.pc("ngIf",e.fullScreen))},directives:[v.a,z.b,z.e,z.d,z.c,b.b,Q.b,m.a,G.t],styles:["bookings-form-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}bookings-form-header.below{z-index:2}bookings-form-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}bookings-form-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}bookings-form-header .logo .logo-icon{width:38px}bookings-form-header .chat-panel-toggle-button,bookings-form-header .language-button,bookings-form-header .quick-panel-toggle-button,bookings-form-header .user-button,bookings-form-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){bookings-form-header .chat-panel-toggle-button,bookings-form-header .language-button,bookings-form-header .quick-panel-toggle-button,bookings-form-header .user-button,bookings-form-header fuse-search-bar{height:56px}}bookings-form-header .navbar-toggle-button{min-width:56px;height:56px}bookings-form-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){bookings-form-header .toolbar-separator{height:56px}}"],encapsulation:2}),t})();var tt=o("3Pt+"),et=o("EwFO");const ot=["formDirective"];let it=(()=>{class t{constructor(t){this.formBuilder=t,this.form=this.formBuilder.group({valid:[null]})}ngOnInit(){}resetForm(){this.searchNgForm.resetForm()}onSearchFormSubmit(t){}}return t.\u0275fac=function(e){return new(e||t)(P.Rb(tt.d))},t.\u0275cmp=P.Lb({type:t,selectors:[["bookings-form-sidebar"]],viewQuery:function(t,e){var o;1&t&&P.Sc(ot,!0),2&t&&P.wc(o=P.gc())&&(e.searchNgForm=o.first)},inputs:{height:"height"},decls:19,vars:5,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["formControlName","valid"],[3,"value"]],template:function(t,e){1&t&&(P.Xb(0,"form",0,1),P.fc("keydown.enter",(function(t){return"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){return e.onSearchFormSubmit(e.form.value)})),P.Xb(2,"div",2),P.Xb(3,"div",3),P.Xb(4,"button",4),P.fc("click",(function(t){return e.resetForm()})),P.Lc(5," Reset "),P.Wb(),P.Wb(),P.Wb(),P.Xb(6,"div",5),P.Xb(7,"div",6),P.Xb(8,"div",7),P.Xb(9,"div",8),P.Xb(10,"div",9),P.Xb(11,"mat-form-field",10),P.Xb(12,"mat-label"),P.Lc(13,"Valid"),P.Wb(),P.Xb(14,"mat-select",11),P.Xb(15,"mat-option",12),P.Lc(16,"Invalid"),P.Wb(),P.Xb(17,"mat-option",12),P.Lc(18,"Valid"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t&&(P.pc("formGroup",e.form),P.Db(6),P.Ic("height",e.height,"px"),P.Db(9),P.pc("value",0),P.Db(2),P.pc("value",0))},directives:[tt.A,tt.q,tt.h,z.d,z.c,b.b,z.b,et.a,s.c,s.f,h.a,tt.p,tt.g,D.n],styles:["bookings-form-sidebar{border-right:1px solid #a3a3a3}bookings-form-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}bookings-form-sidebar .navbar-scroll-container{background:#fff!important}bookings-form-sidebar .navbar-scroll-container .navbar-content{padding-top:0}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}bookings-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),t})();function nt(t,e){if(1&t&&(P.Xb(0,"fuse-sidebar",8),P.Sb(1,"bookings-form-sidebar",9),P.Wb()),2&t){const t=P.jc();P.Db(1),P.pc("height",t.height)}}function at(t,e){1&t&&P.Sb(0,"router-outlet")}let rt=(()=>{class t{constructor(t,e,o,i,n){this._fuseSidebarService=t,this.route=e,this.router=o,this.authService=i,this.shipmentService=n,this.sidebarPanel=!1,this.height=560,this._unsubscribeAll=new I.a,this.bookId=this.shipmentService.bookId=this.route.snapshot.params.bookId,this._unsubscribeAll=new I.a,this.shipmentService.readDatabaseBooking().subscribe(t=>{this.bookingfb=t.slice(),0==this.bookId?this.shipmentService.onShipmentChanged.next(null):(this.data=this.bookingfb.find(t=>t.id==this.bookId),this.shipmentService.onShipmentChanged.next(this.data))})}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-12}),this.authService.changeScreen.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(t){this._fuseSidebarService.getSidebar(t).toggleOpen()}showHideBar(t){this.sidebarPanel=!this.sidebarPanel}refreshPage(t){this.authService.refreshData(this.shipmentService)}newContainer(t){this.router.navigate(["/apps/news/shipment-book-form/form/0"])}}return t.\u0275fac=function(e){return new(e||t)(P.Rb(j.a),P.Rb(i.a),P.Rb(i.g),P.Rb(J.a),P.Rb(R))},t.\u0275cmp=P.Lb({type:t,selectors:[["shipment-book-form"]],decls:9,vars:3,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","bookings-form-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","bookings-form-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar"],[1,"content-card",2,"border","none","border-radius","0"],[4,"ngIf"],["name","bookings-form-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"height"]],template:function(t,e){1&t&&(P.Xb(0,"div",0),P.Jc(1,nt,2,1,"fuse-sidebar",1),P.Xb(2,"fuse-sidebar",2),P.Sb(3,"div",3),P.Wb(),P.Xb(4,"div",4),P.Xb(5,"bookings-form-header",5),P.fc("showHideBar",(function(t){return e.showHideBar(t)}))("refreshPage",(function(t){return e.refreshPage(t)}))("toggleSidebar",(function(t){return e.toggleSidebar(t)})),P.Wb(),P.Xb(6,"div",6),P.Xb(7,"div",3),P.Jc(8,at,1,0,"router-outlet",7),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t&&(P.Db(1),P.pc("ngIf",e.sidebarPanel),P.Db(4),P.pc("sidebarName","bookings-form-sidebar"),P.Db(3),P.pc("ngIf",!0))},directives:[V.a,G.t,U.a,Z,it,i.l],styles:["shipment-book-form{width:100%}shipment-book-form .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){shipment-book-form .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}shipment-book-form .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){shipment-book-form .center .content-card shipment-book-form{border-right:0}shipment-book-form .center .content-card shipment-book-form,shipment-book-form .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}shipment-book-form .center .content-card shipment-details{display:none!important}shipment-book-form .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}shipment-book-form .center .content-card.current-shipment-selected .content shipment-book-form,shipment-book-form .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}shipment-book-form .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:M.a}}),t})();var ct=o("JX91"),bt=o("R0Ic"),lt=o("0Zc1");function st(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," No "),P.Wb())}function mt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit,o=P.jc(2);P.Db(1),P.Mc(o.quote.indexOf(t)+1)}}function dt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Code "),P.Wb())}function pt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",t.code," ")}}function ut(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Customer "),P.Wb())}function ht(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",t.customer_short_name," ")}}function ft(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Load port "),P.Wb())}function gt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",t.load_port_name," ")}}function vt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Discharge "),P.Wb())}function kt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",t.discharge_port_name," ")}}function yt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Quote from "),P.Wb())}function xt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.kc(2,"date"),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",P.mc(2,1,t.quote_from,"MM/dd/yyyy")," ")}}function Xt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Quote to "),P.Wb())}function Wt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.kc(2,"date"),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",P.mc(2,1,t.quote_to,"MM/dd/yyyy")," ")}}function wt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Validity "),P.Wb())}function Dt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",1==t.valididty?"Valid":"Invalid"," ")}}function _t(t,e){1&t&&P.Sb(0,"th",25)}function Lt(t,e){if(1&t){const t=P.Yb();P.Xb(0,"td",26),P.Xb(1,"button",27),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit,n=P.jc(2);return o.stopPropagation(),n.getAllPrice(i)})),P.Lc(2,"Add All"),P.Wb(),P.Wb()}}function St(t,e){if(1&t){const t=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Xb(8,"td"),P.Lc(9),P.kc(10,"number"),P.Wb(),P.Xb(11,"td"),P.Lc(12),P.Wb(),P.Xb(13,"td"),P.Lc(14),P.Wb(),P.Xb(15,"td"),P.Lc(16),P.Wb(),P.Xb(17,"td"),P.Lc(18),P.Wb(),P.Xb(19,"td"),P.Lc(20),P.Wb(),P.Xb(21,"td"),P.Xb(22,"mat-icon",31),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit;return P.jc(3).getPrice(i)})),P.Lc(23,"add"),P.Wb(),P.Wb(),P.Wb()}if(2&t){const t=e.$implicit,o=e.index;P.Db(2),P.Mc(o+1),P.Db(2),P.Mc(t.price_name),P.Db(2),P.Mc(P.mc(7,9,t.amount,"1.2-2")),P.Db(3),P.Mc(P.mc(10,12,t.tax,"1.2-2")),P.Db(3),P.Mc(t.volume),P.Db(2),P.Mc(t.unit_code),P.Db(2),P.Mc(t.currency_code),P.Db(2),P.Mc(t.country_name),P.Db(2),P.Mc(t.partner_short_name)}}function Ct(t,e){if(1&t&&(P.Xb(0,"td",26),P.Xb(1,"div",28),P.Xb(2,"table",29),P.Xb(3,"thead"),P.Xb(4,"tr"),P.Xb(5,"th"),P.Lc(6,"No"),P.Wb(),P.Xb(7,"th"),P.Lc(8,"Price"),P.Wb(),P.Xb(9,"th"),P.Lc(10,"Amount"),P.Wb(),P.Xb(11,"th"),P.Lc(12,"Tax(%)"),P.Wb(),P.Xb(13,"th"),P.Lc(14,"Volume"),P.Wb(),P.Xb(15,"th"),P.Lc(16,"Unit"),P.Wb(),P.Xb(17,"th"),P.Lc(18,"Currency"),P.Wb(),P.Xb(19,"th"),P.Lc(20,"Payment center"),P.Wb(),P.Xb(21,"th"),P.Lc(22,"Pay party"),P.Wb(),P.Sb(23,"th"),P.Wb(),P.Wb(),P.Xb(24,"tbody"),P.Jc(25,St,24,15,"tr",30),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t){const t=e.$implicit,o=P.jc(2);P.Eb("colspan",8),P.Db(1),P.pc("@detailExpand",t==o.expandedElement?"expanded":"collapsed"),P.Db(24),P.pc("ngForOf",t.detail)}}function Ot(t,e){1&t&&P.Sb(0,"tr",32)}function At(t,e){if(1&t){const t=P.Yb();P.Xb(0,"tr",33),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit,n=P.jc(2);return n.expandedElement=n.expandedElement===i?null:i})),P.Wb()}if(2&t){const t=e.$implicit,o=P.jc(2);P.Hb("example-expanded-row",o.expandedElement===t)}}function qt(t,e){if(1&t&&P.Sb(0,"tr",34),2&t){const t=e.$implicit,o=P.jc(2);P.Hb("example-expanded-row",o.expandedElement===t)}}const Nt=function(){return["no","code","customer","load_port","discharge_port","quote_from","quote_to","validity","button"]},It=function(){return["expandedDetail"]};function Bt(t,e){if(1&t&&(P.Xb(0,"table",9),P.Vb(1,10),P.Jc(2,st,2,0,"th",11),P.Jc(3,mt,2,1,"td",12),P.Ub(),P.Vb(4,13),P.Jc(5,dt,2,0,"th",11),P.Jc(6,pt,2,1,"td",12),P.Ub(),P.Vb(7,14),P.Jc(8,ut,2,0,"th",11),P.Jc(9,ht,2,1,"td",12),P.Ub(),P.Vb(10,15),P.Jc(11,ft,2,0,"th",11),P.Jc(12,gt,2,1,"td",12),P.Ub(),P.Vb(13,16),P.Jc(14,vt,2,0,"th",11),P.Jc(15,kt,2,1,"td",12),P.Ub(),P.Vb(16,17),P.Jc(17,yt,2,0,"th",11),P.Jc(18,xt,3,4,"td",12),P.Ub(),P.Vb(19,18),P.Jc(20,Xt,2,0,"th",11),P.Jc(21,Wt,3,4,"td",12),P.Ub(),P.Vb(22,19),P.Jc(23,wt,2,0,"th",11),P.Jc(24,Dt,2,1,"td",12),P.Ub(),P.Vb(25,20),P.Jc(26,_t,1,0,"th",11),P.Jc(27,Lt,3,0,"td",12),P.Ub(),P.Vb(28,21),P.Jc(29,Ct,26,3,"td",12),P.Ub(),P.Jc(30,Ot,1,0,"tr",22),P.Jc(31,At,1,2,"tr",23),P.Jc(32,qt,1,2,"tr",24),P.Wb()),2&t){const t=P.jc();P.pc("dataSource",t.quote),P.Db(30),P.pc("matHeaderRowDef",P.qc(4,Nt)),P.Db(1),P.pc("matRowDefColumns",P.qc(5,Nt)),P.Db(1),P.pc("matRowDefColumns",P.qc(6,It))}}function Mt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," No "),P.Wb())}function Pt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit,o=P.jc(2);P.Db(1),P.Mc(o.tarrif.indexOf(t)+1)}}function jt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Code "),P.Wb())}function Jt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",t.code," ")}}function Ft(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Type "),P.Wb())}function Tt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",0==t.type?"Export":"Import"," ")}}function Et(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Port "),P.Wb())}function Ht(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",t.port_name," ")}}function Rt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Tarrif from "),P.Wb())}function Vt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.kc(2,"date"),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",P.mc(2,1,t.tarrif_from,"MM/dd/yyyy")," ")}}function Gt(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Tarrif to "),P.Wb())}function Ut(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.kc(2,"date"),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",P.mc(2,1,t.tarrif_to,"MM/dd/yyyy")," ")}}function $t(t,e){1&t&&(P.Xb(0,"th",25),P.Lc(1," Validity "),P.Wb())}function zt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.Db(1),P.Nc(" ",1==t.validity?"Valid":"Invalid"," ")}}function Qt(t,e){if(1&t){const t=P.Yb();P.Xb(0,"th",25),P.Xb(1,"mat-icon",41),P.fc("click",(function(e){return P.Bc(t),P.jc(2).tarrifPanel.close()})),P.Lc(2,"close"),P.Wb(),P.Wb()}}function Yt(t,e){if(1&t){const t=P.Yb();P.Xb(0,"td",26),P.Xb(1,"button",27),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit,n=P.jc(2);return o.stopPropagation(),n.getAllPrice(i)})),P.Lc(2,"Add all"),P.Wb(),P.Wb()}}function Kt(t,e){if(1&t){const t=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td"),P.Xb(2,"mat-icon",31),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit;return P.jc(3).getPrice(i)})),P.Lc(3,"add"),P.Wb(),P.Wb(),P.Xb(4,"td"),P.Lc(5),P.Wb(),P.Xb(6,"td"),P.Lc(7),P.kc(8,"number"),P.Wb(),P.Xb(9,"td"),P.Lc(10),P.kc(11,"number"),P.Wb(),P.Xb(12,"td"),P.Lc(13),P.Wb(),P.Xb(14,"td"),P.Lc(15),P.Wb(),P.Xb(16,"td"),P.Lc(17),P.Wb(),P.Xb(18,"td"),P.Lc(19),P.Wb(),P.Wb()}if(2&t){const t=e.$implicit;P.Db(5),P.Mc(t.price_name),P.Db(2),P.Mc(P.mc(8,7,t.amount,"1.2-2")),P.Db(3),P.Mc(P.mc(11,10,t.tax,"1.2-2")),P.Db(3),P.Mc(t.volume),P.Db(2),P.Mc(t.unit_code),P.Db(2),P.Mc(t.currency_code),P.Db(2),P.Mc(t.payment_center_name)}}function Zt(t,e){if(1&t&&(P.Xb(0,"td",26),P.Xb(1,"div",28),P.Xb(2,"table",29),P.Xb(3,"thead"),P.Xb(4,"tr"),P.Sb(5,"th"),P.Xb(6,"th"),P.Lc(7,"Price"),P.Wb(),P.Xb(8,"th"),P.Lc(9,"Amount"),P.Wb(),P.Xb(10,"th"),P.Lc(11,"Tax(%)"),P.Wb(),P.Xb(12,"th"),P.Lc(13,"Volume"),P.Wb(),P.Xb(14,"th"),P.Lc(15,"Unit"),P.Wb(),P.Xb(16,"th"),P.Lc(17,"Currency"),P.Wb(),P.Xb(18,"th"),P.Lc(19,"Payment_center"),P.Wb(),P.Wb(),P.Wb(),P.Xb(20,"tbody"),P.Jc(21,Kt,20,13,"tr",30),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t){const t=e.$implicit,o=P.jc(2);P.Eb("colspan",8),P.Db(1),P.pc("@detailExpand",t==o.expandedElement?"expanded":"collapsed"),P.Db(20),P.pc("ngForOf",t.detail)}}function te(t,e){1&t&&P.Sb(0,"tr",32)}function ee(t,e){if(1&t){const t=P.Yb();P.Xb(0,"tr",33),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit,n=P.jc(2);return n.expandedElement=n.expandedElement===i?null:i})),P.Wb()}if(2&t){const t=e.$implicit,o=P.jc(2);P.Hb("example-expanded-row",o.expandedElement===t)}}function oe(t,e){1&t&&P.Sb(0,"tr",34)}const ie=function(){return["no","code","type","port","tarrif_from","tarrif_to","validity","button"]};function ne(t,e){if(1&t&&(P.Xb(0,"table",35),P.Vb(1,10),P.Jc(2,Mt,2,0,"th",11),P.Jc(3,Pt,2,1,"td",12),P.Ub(),P.Vb(4,13),P.Jc(5,jt,2,0,"th",11),P.Jc(6,Jt,2,1,"td",12),P.Ub(),P.Vb(7,36),P.Jc(8,Ft,2,0,"th",11),P.Jc(9,Tt,2,1,"td",12),P.Ub(),P.Vb(10,37),P.Jc(11,Et,2,0,"th",11),P.Jc(12,Ht,2,1,"td",12),P.Ub(),P.Vb(13,38),P.Jc(14,Rt,2,0,"th",11),P.Jc(15,Vt,3,4,"td",12),P.Ub(),P.Vb(16,39),P.Jc(17,Gt,2,0,"th",11),P.Jc(18,Ut,3,4,"td",12),P.Ub(),P.Vb(19,19),P.Jc(20,$t,2,0,"th",11),P.Jc(21,zt,2,1,"td",12),P.Ub(),P.Vb(22,20),P.Jc(23,Qt,3,0,"th",11),P.Jc(24,Yt,3,0,"td",12),P.Ub(),P.Vb(25,21),P.Jc(26,Zt,22,3,"td",12),P.Ub(),P.Jc(27,te,1,0,"tr",22),P.Jc(28,ee,1,2,"tr",23),P.Jc(29,oe,1,0,"tr",40),P.Wb()),2&t){const t=P.jc();P.pc("dataSource",t.tarrif),P.Db(27),P.pc("matHeaderRowDef",P.qc(4,ie)),P.Db(1),P.pc("matRowDefColumns",P.qc(5,ie)),P.Db(1),P.pc("matRowDefColumns",P.qc(6,It))}}let ae=(()=>{class t{constructor(t,e,o,i,n,a,r){this.router=t,this.matDialogRef=e,this._data=o,this.authService=i,this.commonService=n,this.datePipe=a,this._formBuilder=r,this.label=o.label,this.shipmentId=o.shipmentId,this.quote=o.quote,this.tarrif=o.tarrif,this.booking=o.booking,this.price=o.price,this.currency=o.currency,this.country=o.country,this.customer=o.customer}ngOnInit(){this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}getPrice(t){if(t){let e=this.currency.find(e=>e.id==t.currency),o={price:this.price.find(e=>e.id==t.price),amount:t.amount,tax:t.tax,volume:0,currency:e,ex_rate:e.exrate,payment_center:this.country.find(e=>e.id==t.payment_center),info:t.info};o.volume=this.booking.vol[o.price.unit_code]?this.booking.vol[o.price.unit_code]:t.volume,this.booking.revenue.sell.push(o)}}getAllPrice(t){t.detail.map(t=>{this.getPrice(t)}),this.matDialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(P.Rb(i.g),P.Rb(g.f),P.Rb(g.a),P.Rb(J.a),P.Rb(lt.a),P.Rb(G.f),P.Rb(tt.d))},t.\u0275cmp=P.Lb({type:t,selectors:[["bookings-form-quote-modal-dialog"]],decls:12,vars:3,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","dnl-new-shipment-revenue-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],[1,"viewer-panel"],["mat-table","","multiTemplateDataRows","","class","simple quote-table",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","","class","simple tarrif-table",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",1,"simple","quote-table",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","customer"],["matColumnDef","load_port"],["matColumnDef","discharge_port"],["matColumnDef","quote_from"],["matColumnDef","quote_to"],["matColumnDef","validity"],["matColumnDef","button"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"example-element-detail"],[1,"simple"],[4,"ngFor","ngForOf"],["color","accent",1,"cursor-pointer",3,"click"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"],["mat-table","","multiTemplateDataRows","",1,"simple","tarrif-table",3,"dataSource"],["matColumnDef","type"],["matColumnDef","port"],["matColumnDef","tarrif_from"],["matColumnDef","tarrif_to"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[2,"float","right","cursor","pointer",3,"click"]],template:function(t,e){1&t&&(P.Xb(0,"div",0),P.Xb(1,"mat-toolbar",1),P.Xb(2,"mat-toolbar-row",2),P.Xb(3,"span",3),P.Lc(4),P.Wb(),P.Xb(5,"button",4),P.fc("click",(function(t){return e.matDialogRef.close()})),P.Xb(6,"mat-icon"),P.Lc(7,"close"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(8,"div",5),P.Xb(9,"div",6),P.Jc(10,Bt,33,7,"table",7),P.Jc(11,ne,30,7,"table",8),P.Wb(),P.Wb(),P.Wb()),2&t&&(P.Db(4),P.Mc(e.label),P.Db(6),P.pc("ngIf",e.quote.length>0),P.Db(1),P.pc("ngIf",e.tarrif.length>0))},directives:[v.a,v.c,z.b,z.d,z.c,b.b,m.a,g.d,et.a,G.t,L.j,L.c,L.e,L.b,L.g,L.i,L.d,L.a,G.s,L.f,L.h],pipes:[G.f,G.g],styles:["@media screen and (min-width:600px)and (max-width:959px){.bookings-form-quote-modal-dialog{width:100%}}@media screen and (min-width:960px){.bookings-form-quote-modal-dialog{width:1080px}}.bookings-form-quote-modal-dialog .mat-dialog-container{padding:0}.bookings-form-quote-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table th{padding:8px;font-size:12px!important}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-detail-row td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-detail-row td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-detail-row td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-detail-row td{padding:0}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-detail-row td .simple th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-detail-row td .simple th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-detail-row td .simple th,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-detail-row td .simple td,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-detail-row td .simple th{padding:8px!important}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-detail-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-detail-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-detail-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-detail-row{height:0!important}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-element-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-element-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-element-row,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-element-row{background:#b3e5fc}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-element-row:not(.example-expanded-row):hover,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-element-row:not(.example-expanded-row):hover,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-element-row:not(.example-expanded-row):hover,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-element-row:not(.example-expanded-row):hover{background:#e1f5fe}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table tr.example-element-row:not(.example-expanded-row):active,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table tr.example-element-row:not(.example-expanded-row):active,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table tr.example-element-row:not(.example-expanded-row):active,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table tr.example-element-row:not(.example-expanded-row):active{background:#81d4fa}.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .contract-table .example-element-detail,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .quote-table .example-element-detail,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .tarrif-table .example-element-detail,.bookings-form-quote-modal-dialog .dialog-content-wrapper .viewer-panel .vendor-table .example-element-detail{overflow:hidden;display:-webkit-box;display:flex}.bookings-form-quote-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.bookings-form-quote-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2,data:{animation:[Object(bt.p)("detailExpand",[Object(bt.m)("collapsed",Object(bt.n)({height:"0px",minHeight:"0"})),Object(bt.m)("expanded",Object(bt.n)({height:"*"})),Object(bt.o)("expanded <=> collapsed",Object(bt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();var re=o("z0wS");const ce=["formDirective"];function be(t,e){1&t&&P.Lc(0,"Fill your info")}function le(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1,"Booking number is required!"),P.Wb())}function se(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Mc(t)}}function me(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc(" ",t.name," ")}}function de(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1," Owner is required "),P.Wb())}function pe(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc(" ",t.name," ")}}function ue(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1," Create by by is required "),P.Wb())}function he(t,e){if(1&t&&(P.Xb(0,"mat-option",51),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc("",t.full_name," ")}}function fe(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1,"Booking party is required!"),P.Wb())}function ge(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc(" ",t.name," ")}}function ve(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1,"Port of loading is required!"),P.Wb())}function ke(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc(" ",t.name," ")}}function ye(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1,"Port of discharge is required!"),P.Wb())}function xe(t,e){if(1&t&&(P.Xb(0,"mat-option",51),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc("",t.full_name," ")}}function Xe(t,e){if(1&t&&(P.Xb(0,"mat-option",51),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc("",t.full_name," ")}}function We(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1,"Dest Agent is required!"),P.Wb())}function we(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1," From Date is required "),P.Wb())}function De(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1," To Date is required "),P.Wb())}function _e(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Nc(" ",t.name," ")}}function Le(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1," Commodity is required "),P.Wb())}function Se(t,e){if(1&t&&(P.Xb(0,"mat-option",50),P.Lc(1),P.Wb()),2&t){const t=e.$implicit;P.pc("value",t),P.Db(1),P.Mc(t.code)}}function Ce(t,e){1&t&&(P.Xb(0,"mat-error"),P.Lc(1," Container type is required "),P.Wb())}function Oe(t,e){if(1&t){const t=P.Yb();P.Xb(0,"button",60),P.fc("click",(function(e){P.Bc(t);const o=P.jc().index;return P.jc().removeVolume(o)})),P.Xb(1,"mat-icon"),P.Lc(2,"delete"),P.Wb(),P.Wb()}}function Ae(t,e){if(1&t){const t=P.Yb();P.Xb(0,"button",61),P.fc("click",(function(e){return P.Bc(t),P.jc(2).addVolume()})),P.Xb(1,"mat-icon"),P.Lc(2,"add"),P.Wb(),P.Wb()}}function qe(t,e){if(1&t&&(P.Xb(0,"div",52),P.Xb(1,"mat-form-field",21),P.Xb(2,"mat-label"),P.Lc(3,"Commodity"),P.Wb(),P.Sb(4,"input",53),P.Xb(5,"mat-autocomplete",17,54),P.Jc(7,_e,2,2,"mat-option",15),P.kc(8,"async"),P.Wb(),P.Jc(9,Le,2,0,"mat-error",12),P.Wb(),P.Xb(10,"mat-form-field",34),P.Xb(11,"mat-label"),P.Lc(12,"Qty"),P.Wb(),P.Sb(13,"input",55),P.Wb(),P.Xb(14,"mat-form-field",34),P.Xb(15,"mat-label"),P.Lc(16,"Container type"),P.Wb(),P.Xb(17,"mat-select",56),P.Jc(18,Se,2,2,"mat-option",15),P.Wb(),P.Jc(19,Ce,2,0,"mat-error",12),P.Wb(),P.Xb(20,"div",57),P.Jc(21,Oe,3,0,"button",58),P.Jc(22,Ae,3,0,"button",59),P.Wb(),P.Wb()),2&t){const t=e.index,o=P.xc(6),i=P.jc();P.pc("formGroupName",t),P.Db(4),P.pc("matAutocomplete",o),P.Db(1),P.pc("displayWith",i.commonService.displayObjFn.bind(i,"name")),P.Db(2),P.pc("ngForOf",P.lc(8,9,i.filteredCommodity[t])),P.Db(2),P.pc("ngIf",i.formBook.controls.volume.controls[t].get("commodity").hasError("required")),P.Db(9),P.pc("ngForOf",i.packageType),P.Db(1),P.pc("ngIf",i.formBook.controls.volume.controls[t].get("cont_type").hasError("required")),P.Db(2),P.pc("ngIf",t>0),P.Db(1),P.pc("ngIf",i.formBook.controls.volume.value.length==t+1)}}function Ne(t,e){1&t&&P.Lc(0,"Voyage")}function Ie(t,e){if(1&t){const t=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td",68),P.Lc(2),P.Wb(),P.Xb(3,"td",69),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Xb(7,"td"),P.Lc(8),P.kc(9,"date"),P.Wb(),P.Xb(10,"td"),P.Lc(11),P.kc(12,"date"),P.Wb(),P.Xb(13,"td"),P.Lc(14),P.Wb(),P.Xb(15,"td"),P.Lc(16),P.Wb(),P.Xb(17,"td"),P.Lc(18),P.kc(19,"date"),P.Wb(),P.Xb(20,"td"),P.Lc(21),P.Wb(),P.Xb(22,"td"),P.Lc(23),P.Wb(),P.Xb(24,"td"),P.Lc(25),P.Wb(),P.Xb(26,"td",66),P.Xb(27,"button",49),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit,n=P.jc(2),a=P.xc(3);return n.getBook(a,i)})),P.Lc(28," Book "),P.Wb(),P.Wb(),P.Wb()}if(2&t){const t=e.$implicit,o=e.index;P.Db(2),P.Mc(o+1),P.Db(2),P.Oc("",t.vessel_name," ",t.name,""),P.Db(2),P.Mc(t.partner_short_name),P.Db(2),P.Mc(P.mc(9,12,t.closing_time,"MMM/dd HH:mm")),P.Db(3),P.Mc(P.mc(12,15,t.depart_time,"EEE MMM/dd/yyyy HH:mm")),P.Db(3),P.Mc(t.load_port_name),P.Db(2),P.Mc(t.load_terminal_name),P.Db(2),P.Mc(P.mc(19,18,t.arrive_time,"EEE MMM/dd/yyyy HH:mm")),P.Db(3),P.Mc(t.discharge_port_name),P.Db(2),P.Mc(t.discharge_terminal_name),P.Db(2),P.Mc(t.transit_time)}}function Be(t,e){if(1&t&&(P.Xb(0,"div",62),P.Xb(1,"table",63),P.Xb(2,"thead"),P.Xb(3,"tr"),P.Xb(4,"th",64),P.Lc(5,"No"),P.Wb(),P.Xb(6,"th",65),P.Lc(7,"Vessel/Voyage"),P.Wb(),P.Xb(8,"th"),P.Lc(9,"Supplier"),P.Wb(),P.Xb(10,"th"),P.Lc(11,"Closing time"),P.Wb(),P.Xb(12,"th"),P.Lc(13,"Depart time"),P.Wb(),P.Xb(14,"th"),P.Lc(15,"Port of Loading"),P.Wb(),P.Xb(16,"th"),P.Lc(17,"Load Terminal"),P.Wb(),P.Xb(18,"th"),P.Lc(19,"Arrive time"),P.Wb(),P.Xb(20,"th"),P.Lc(21,"Port of discharge"),P.Wb(),P.Xb(22,"th"),P.Lc(23,"Discharge terminal"),P.Wb(),P.Xb(24,"th"),P.Lc(25,"Transit time"),P.Wb(),P.Sb(26,"th",66),P.Wb(),P.Wb(),P.Xb(27,"tbody"),P.Jc(28,Ie,29,21,"tr",67),P.Wb(),P.Wb(),P.Wb()),2&t){const t=P.jc();P.Db(28),P.pc("ngForOf",t.filterVoyage)}}function Me(t,e){1&t&&P.Lc(0,"Selling rate")}function Pe(t,e){if(1&t){const t=P.Yb();P.Xb(0,"tr"),P.Xb(1,"td",68),P.Lc(2),P.Wb(),P.Xb(3,"td",69),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Xb(7,"td"),P.Lc(8),P.Wb(),P.Xb(9,"td"),P.Lc(10),P.kc(11,"number"),P.Wb(),P.Xb(12,"td"),P.Lc(13),P.Wb(),P.Xb(14,"td"),P.Lc(15),P.Wb(),P.Xb(16,"td"),P.Lc(17),P.kc(18,"number"),P.Wb(),P.Xb(19,"td"),P.Lc(20),P.Wb(),P.Xb(21,"td",66),P.Xb(22,"mat-icon",70),P.fc("click",(function(o){P.Bc(t);const i=e.$implicit,n=e.index;return P.jc(2).openModal([i,n])})),P.Lc(23,"edit"),P.Wb(),P.Xb(24,"mat-icon",71),P.fc("click",(function(o){P.Bc(t);const i=e.index;return P.jc(2).deleteRevenue(i)})),P.Lc(25,"delete"),P.Wb(),P.Wb(),P.Wb()}if(2&t){const t=e.$implicit,o=e.index;P.Db(2),P.Mc(o+1),P.Db(2),P.Mc(null==t.price?null:t.price.name),P.Db(2),P.Mc(null==t.price?null:t.price.unit_code),P.Db(2),P.Mc(t.volume),P.Db(2),P.Mc(P.mc(11,9,t.amount,"VND"!=t.currency.code?"1.2-2":"1.0-0")),P.Db(3),P.Mc(t.tax),P.Db(2),P.Mc(null==t.currency?null:t.currency.code),P.Db(2),P.Mc(P.mc(18,12,t.ex_rate,"1.2-2")),P.Db(3),P.Mc(null==t.payment_center?null:t.payment_center.name)}}function je(t,e){if(1&t){const t=P.Yb();P.Xb(0,"div",62),P.Xb(1,"table",63),P.Xb(2,"thead"),P.Xb(3,"tr"),P.Xb(4,"th",68),P.Lc(5,"No"),P.Wb(),P.Xb(6,"th",69),P.Lc(7,"Price"),P.Wb(),P.Xb(8,"th"),P.Lc(9,"Unit"),P.Wb(),P.Xb(10,"th"),P.Lc(11,"Volume"),P.Wb(),P.Xb(12,"th"),P.Lc(13,"Amount"),P.Wb(),P.Xb(14,"th"),P.Lc(15,"Tax(%)"),P.Wb(),P.Xb(16,"th"),P.Lc(17,"Currency"),P.Wb(),P.Xb(18,"th"),P.Lc(19,"Ex rate"),P.Wb(),P.Xb(20,"th"),P.Lc(21,"Payment_center"),P.Wb(),P.Xb(22,"th",66),P.Xb(23,"mat-icon",70),P.fc("click",(function(e){return P.Bc(t),P.jc().openQuoteModal()})),P.Lc(24,"file_copy"),P.Wb(),P.Xb(25,"mat-icon",70),P.fc("click",(function(e){return P.Bc(t),P.jc().openModal()})),P.Lc(26,"add"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(27,"tbody"),P.Jc(28,Pe,26,15,"tr",67),P.Wb(),P.Wb(),P.Wb()}if(2&t){const t=P.jc();P.Db(28),P.pc("ngForOf",t.booking.revenue.sell)}}function Je(t,e){1&t&&P.Lc(0,"Save booking")}function Fe(t,e){if(1&t&&(P.Xb(0,"div",72),P.Xb(1,"h2"),P.Lc(2,"Book info"),P.Wb(),P.Xb(3,"div",73),P.Xb(4,"div",74),P.Xb(5,"div",75),P.Xb(6,"div",76),P.Lc(7,"Booking number"),P.Wb(),P.Xb(8,"div",77),P.Lc(9),P.Wb(),P.Wb(),P.Wb(),P.Xb(10,"div",74),P.Xb(11,"div",75),P.Xb(12,"div",76),P.Lc(13,"Status"),P.Wb(),P.Xb(14,"div",77),P.Lc(15),P.Wb(),P.Wb(),P.Wb(),P.Xb(16,"div",78),P.Xb(17,"div",75),P.Xb(18,"div",76),P.Lc(19,"Booking party"),P.Wb(),P.Xb(20,"div",77),P.Lc(21),P.Wb(),P.Wb(),P.Wb(),P.Xb(22,"div",78),P.Xb(23,"div",75),P.Xb(24,"div",76),P.Lc(25,"Load Agent"),P.Wb(),P.Xb(26,"div",77),P.Lc(27),P.Wb(),P.Wb(),P.Wb(),P.Xb(28,"div",78),P.Xb(29,"div",75),P.Xb(30,"div",76),P.Lc(31,"Dest Agent"),P.Wb(),P.Xb(32,"div",77),P.Lc(33),P.Wb(),P.Wb(),P.Wb(),P.Xb(34,"div",78),P.Xb(35,"div",75),P.Xb(36,"div",76),P.Lc(37,"Owner"),P.Wb(),P.Xb(38,"div",77),P.Lc(39),P.Wb(),P.Wb(),P.Wb(),P.Xb(40,"div",78),P.Xb(41,"div",75),P.Xb(42,"div",76),P.Lc(43,"Create_by"),P.Wb(),P.Xb(44,"div",77),P.Lc(45),P.Wb(),P.Wb(),P.Wb(),P.Xb(46,"div",78),P.Xb(47,"div",75),P.Xb(48,"div",76),P.Lc(49,"Port of loading"),P.Wb(),P.Xb(50,"div",77),P.Lc(51),P.Wb(),P.Wb(),P.Wb(),P.Xb(52,"div",78),P.Xb(53,"div",75),P.Xb(54,"div",76),P.Lc(55,"Port of discharge"),P.Wb(),P.Xb(56,"div",77),P.Lc(57),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t){const t=P.jc();P.Db(9),P.Mc(t.booking.book.code),P.Db(6),P.Mc(0==t.booking.book.status?"Invalid":"Valid"),P.Db(6),P.Mc(t.booking.book.customer.full_name),P.Db(6),P.Mc(t.booking.book.load_agent?t.booking.book.load_agent.full_name:""),P.Db(6),P.Mc(t.booking.book.agent?t.booking.book.agent.full_name:""),P.Db(6),P.Mc(t.booking.name?t.booking.name:t.booking.user),P.Db(6),P.Mc(t.booking.book.create_by?t.booking.book.create_by.name:""),P.Db(6),P.Mc(t.booking.voyage.load_port_name),P.Db(6),P.Mc(t.booking.voyage.discharge_port_name)}}function Te(t,e){if(1&t&&(P.Xb(0,"div",72),P.Xb(1,"h2"),P.Lc(2,"Voyage"),P.Wb(),P.Xb(3,"div",73),P.Xb(4,"div",79),P.Xb(5,"div",75),P.Xb(6,"div",76),P.Lc(7,"Supplier"),P.Wb(),P.Xb(8,"div",77),P.Lc(9),P.Wb(),P.Wb(),P.Wb(),P.Xb(10,"div",80),P.Xb(11,"div",75),P.Xb(12,"div",76),P.Lc(13,"Vessel/Voyage"),P.Wb(),P.Xb(14,"div",77),P.Lc(15),P.Wb(),P.Wb(),P.Wb(),P.Xb(16,"div",80),P.Xb(17,"div",75),P.Xb(18,"div",76),P.Lc(19,"Load port"),P.Wb(),P.Xb(20,"div",77),P.Lc(21),P.Wb(),P.Wb(),P.Wb(),P.Xb(22,"div",80),P.Xb(23,"div",75),P.Xb(24,"div",76),P.Lc(25,"Load terminal"),P.Wb(),P.Xb(26,"div",77),P.Lc(27),P.Wb(),P.Wb(),P.Wb(),P.Xb(28,"div",80),P.Xb(29,"div",75),P.Xb(30,"div",76),P.Lc(31,"Depart time"),P.Wb(),P.Xb(32,"div",77),P.Lc(33),P.kc(34,"date"),P.Wb(),P.Wb(),P.Wb(),P.Xb(35,"div",80),P.Xb(36,"div",75),P.Xb(37,"div",76),P.Lc(38,"Arrive time"),P.Wb(),P.Xb(39,"div",77),P.Lc(40),P.kc(41,"date"),P.Wb(),P.Wb(),P.Wb(),P.Xb(42,"div",80),P.Xb(43,"div",75),P.Xb(44,"div",76),P.Lc(45,"Discharge port"),P.Wb(),P.Xb(46,"div",77),P.Lc(47),P.Wb(),P.Wb(),P.Wb(),P.Xb(48,"div",80),P.Xb(49,"div",75),P.Xb(50,"div",76),P.Lc(51,"Discharge terminal"),P.Wb(),P.Xb(52,"div",77),P.Lc(53),P.Wb(),P.Wb(),P.Wb(),P.Xb(54,"div",80),P.Xb(55,"div",75),P.Xb(56,"div",76),P.Lc(57,"Closing time"),P.Wb(),P.Xb(58,"div",77),P.Lc(59),P.kc(60,"date"),P.Wb(),P.Wb(),P.Wb(),P.Xb(61,"div",80),P.Xb(62,"div",75),P.Xb(63,"div",76),P.Lc(64,"Transit time"),P.Wb(),P.Xb(65,"div",77),P.Lc(66),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t){const t=P.jc();P.Db(9),P.Mc(t.booking.voyage.supplier_name),P.Db(6),P.Mc(t.booking.voyage.vessel_full_name),P.Db(6),P.Mc(t.booking.voyage.load_port_name),P.Db(6),P.Mc(t.booking.voyage.load_terminal_name),P.Db(6),P.Mc(P.mc(34,10,t.booking.voyage.depart_time,"EEE MMM/dd/yyyy HH:mm")),P.Db(7),P.Mc(P.mc(41,13,t.booking.voyage.arrive_time,"EEE MMM/dd/yyyy HH:mm")),P.Db(7),P.Mc(t.booking.voyage.discharge_port_name),P.Db(6),P.Mc(t.booking.voyage.discharge_terminal_name),P.Db(6),P.Mc(P.mc(60,16,t.booking.voyage.closing_time,"MMM/dd HH:mm")),P.Db(7),P.Nc("",t.booking.voyage.transit_time," days")}}function Ee(t,e){if(1&t&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td"),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Xb(7,"td"),P.Lc(8),P.Wb(),P.Wb()),2&t){const t=e.$implicit,o=e.index;P.Db(2),P.Mc(o+1),P.Db(2),P.Mc(t.commodity.name),P.Db(2),P.Mc(t.quantity),P.Db(2),P.Mc(t.cont_type.code)}}function He(t,e){if(1&t&&(P.Xb(0,"div",72),P.Xb(1,"h2"),P.Lc(2,"Volume"),P.Wb(),P.Xb(3,"div",8),P.Xb(4,"table",63),P.Xb(5,"thead"),P.Xb(6,"tr"),P.Xb(7,"th"),P.Lc(8,"No"),P.Wb(),P.Xb(9,"th"),P.Lc(10,"Commodity"),P.Wb(),P.Xb(11,"th"),P.Lc(12,"Quantity"),P.Wb(),P.Xb(13,"th"),P.Lc(14,"Container type"),P.Wb(),P.Wb(),P.Wb(),P.Xb(15,"tbody"),P.Jc(16,Ee,9,4,"tr",67),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t){const t=P.jc();P.Db(16),P.pc("ngForOf",t.booking.book.volume)}}function Re(t,e){if(1&t&&(P.Xb(0,"tr"),P.Xb(1,"td",68),P.Lc(2),P.Wb(),P.Xb(3,"td",69),P.Lc(4),P.Wb(),P.Xb(5,"td"),P.Lc(6),P.Wb(),P.Xb(7,"td"),P.Lc(8),P.Wb(),P.Xb(9,"td",81),P.Lc(10),P.kc(11,"number"),P.Wb(),P.Xb(12,"td"),P.Lc(13),P.Wb(),P.Xb(14,"td"),P.Lc(15),P.Wb(),P.Xb(16,"td"),P.Lc(17),P.kc(18,"number"),P.Wb(),P.Xb(19,"td",81),P.Lc(20),P.kc(21,"number"),P.Wb(),P.Xb(22,"td"),P.Lc(23),P.Wb(),P.Wb()),2&t){const t=e.$implicit,o=e.index;P.Db(2),P.Mc(o+1),P.Db(2),P.Mc(t.price.name),P.Db(2),P.Mc(t.price.unit_code),P.Db(2),P.Mc(t.volume),P.Db(2),P.Mc(P.mc(11,10,t.amount,"VND"!=t.currency.code?"1.2-2":"1.0-0")),P.Db(3),P.Mc(t.tax),P.Db(2),P.Mc(t.currency.code),P.Db(2),P.Mc(t.ex_rate?P.mc(18,13,t.ex_rate,"1.2-2"):1),P.Db(3),P.Mc(P.mc(21,16,t.volume*(t.amount+t.amount*t.tax/100)*(t.ex_rate?t.ex_rate:1),"1.0-0")),P.Db(3),P.Mc(t.payment_center.name)}}function Ve(t,e){if(1&t&&(P.Xb(0,"div",72),P.Xb(1,"h2"),P.Lc(2,"Selling rate"),P.Wb(),P.Xb(3,"div",8),P.Xb(4,"table",63),P.Xb(5,"thead"),P.Xb(6,"tr"),P.Xb(7,"th",68),P.Lc(8,"No"),P.Wb(),P.Xb(9,"th",69),P.Lc(10,"Price"),P.Wb(),P.Xb(11,"th"),P.Lc(12,"Unit"),P.Wb(),P.Xb(13,"th"),P.Lc(14,"Volume"),P.Wb(),P.Xb(15,"th",81),P.Lc(16,"Amount"),P.Wb(),P.Xb(17,"th"),P.Lc(18,"Tax(%)"),P.Wb(),P.Xb(19,"th"),P.Lc(20,"Currency"),P.Wb(),P.Xb(21,"th"),P.Lc(22,"Ex rate"),P.Wb(),P.Xb(23,"th",81),P.Lc(24,"Total"),P.Wb(),P.Xb(25,"th"),P.Lc(26,"Payment center"),P.Wb(),P.Wb(),P.Wb(),P.Xb(27,"tbody"),P.Jc(28,Re,24,19,"tr",67),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&t){const t=P.jc();P.Db(28),P.pc("ngForOf",t.booking.revenue.sell)}}let Ge=(()=>{class t{constructor(t,e,o,i,n,a,r,c){if(this.shipmentService=t,this.router=e,this.authService=o,this.route=i,this.datePipe=n,this._matDialog=a,this._formBuilder=r,this.commonService=c,this.date=new Date,this.minDate=new Date((new Date).setMonth((new Date).getMonth()-1)),this.maxDate=new Date((new Date).setMonth((new Date).getMonth()+1)),this.filterVoyage=[],this.filterQuote=[],this.filterTarrif=[],this.codeCompany=[],this.formBook=this._formBuilder.group({code:[null,tt.y.required],code_company:[""],owner:[null,tt.y.required],create_by:[null,tt.y.required],customer:[null,tt.y.required],load_agent:[null],agent:[null,tt.y.required],pol:[null,tt.y.required],pod:[null,tt.y.required],from_date:[this.date,tt.y.required],to_date:[this.maxDate,tt.y.required],volume:this._formBuilder.array([this._formBuilder.group({commodity:[null,tt.y.required],quantity:[1,tt.y.required],cont_type:[null,tt.y.required]})])}),this.height=560,this.check=!1,this.filteredCommodity=[],this.filteredPrice=[],this.filteredCountry=[],this.objAgent={3:{port:"HAIPHONG",agent:278,name:"C\xd4NG TY C\u1ed4 PH\u1ea6N SE GLOBAL LINES - HAIPHONG BRANCH"},4:{port:"HOCHIMINH",agent:223,name:"C\xd4NG TY C\u1ed4 PH\u1ea6N SE GLOBAL LINES - HOCHIMINH"},5:{port:"DANANG",agent:212,name:"C\xd4NG TY C\u1ed4 PH\u1ea6N SE GLOBAL LINES"},6:{port:"KEELUNG",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},7:{port:"KAOHSIUNG",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},11:{port:"HONG KONG",agent:123,name:"MARINE CONNECTIONS (H.K) LTD"},10:{port:"TAICHUNG",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},12:{port:"SINGAPORE",agent:113,name:"SIMBA LOGISTICS PTE LTD"},100:{port:"TAIPEI",agent:137,name:"GLOBAL TRANSPORTATION CORPORATION"},103:{port:"PORT KLANG",agent:136,name:"BEN LINES AGENCY (MALAYSIA) - PORT KLANG OFFICE"},142:{port:"SIHANOUKVILLE",agent:135,name:"BEN LINE AGENCIES (CAMBODIA) - PHNOMPENH OFFICE"},143:{port:"PHNOMPENH PORT",agent:135,name:"BEN LINE AGENCIES (CAMBODIA) - PHNOMPENH OFFICE"}},this._unsubscribeAll=new I.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.authService.urlChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.shipmentService.onDataChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.codeCompany=this.shipmentService.codeCompany,this.customer=this.shipmentService.customer,this.agent=this.shipmentService.agent,this.seaport=this.shipmentService.seaport,this.user=this.shipmentService.user,this.commodity=this.shipmentService.commodity,this.packageType=this.shipmentService.packageType,this.price=this.shipmentService.price,this.currency=this.shipmentService.currency,this.country=this.shipmentService.country;let e=this.user.find(t=>t.id==this.authService.user);if(e&&(this.formBook.controls.owner.setValue(e),this.formBook.controls.create_by.setValue(e)),this.modul.includes("hochiminh")){let t=this.seaport.find(t=>4==t.id),e=this.agent.find(e=>e.id==this.objAgent[t.id].agent);this.formBook.controls.pol.setValue(t),e&&this.formBook.controls.load_agent.setValue(e)}}),this.shipmentService.onVoyageChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.voyage=this.shipmentService.voyage}),this.shipmentService.onQuoteChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.quote=this.shipmentService.quote,this.tarrif=this.shipmentService.tarrif}),this.authService.windowSizeChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-12-12-64-72}),this.authService.changeScreen.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-12-12-64-72:this.authService.screenHeight-64-12-12-64-72}),this.shipmentService.onShipmentChanged.pipe(Object(B.a)(this._unsubscribeAll)).subscribe(t=>{if(this.oldData=t,this.oldData){this.draftId=this.oldData.id;let t=this.oldData.book.volume.length;for(let e=0;e<t;e++)e>0&&this.addVolume(),this.oldData.book.volume[e].commodity=this.commodity.find(t=>t.id==this.oldData.book.volume[e].commodity.id),this.oldData.book.volume[e].cont_type=this.packageType.find(t=>t.id==this.oldData.book.volume[e].cont_type.id);this.formBook.patchValue(this.oldData.book),this.minDate=new Date(this.oldData.book.from_date)}else this.booking=null,this.draftId=null}),this.filteredPol=this.formBook.controls.pol.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"name",this.seaport):[])),this.filteredPod=this.formBook.controls.pod.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"name",this.seaport):[])),this.filteredCustomer=this.formBook.controls.customer.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.customer_name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"customer_name",this.customer):[])),this.filteredAgent=this.formBook.controls.agent.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.supplier_name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"supplier_name",this.agent):[])),this.filteredAgent2=this.formBook.controls.load_agent.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.supplier_name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"supplier_name",this.agent):[])),this.filteredUser=this.formBook.controls.owner.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"name",this.user):[])),this.filteredUser2=this.formBook.controls.create_by.valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"name",this.user):[])),this.commodityControl(0),this.formBook.controls.pol.valueChanges.subscribe(t=>{if(t&&"string"!=typeof t&&t.id){let e=this.agent.find(e=>e.id==this.objAgent[t.id].agent);e&&this.formBook.controls.load_agent.setValue(e)}}),this.formBook.controls.pod.valueChanges.subscribe(t=>{if(t&&"string"!=typeof t&&t.id){let e=this.agent.find(e=>e.id==this.objAgent[t.id].agent);e&&this.formBook.controls.agent.setValue(e)}}),this.formBook.valueChanges.subscribe(t=>{})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}get volumeAdd(){return this.formBook.get("volume")}addVolume(){this.volumeAdd.push(this._formBuilder.group({commodity:[null,tt.y.required],quantity:[1,tt.y.required],cont_type:[null,tt.y.required]})),this.commodityControl(this.volumeAdd.length-1)}removeVolume(t){this.volumeAdd.removeAt(t)}commodityControl(t){this.filteredCommodity[t]=this.volumeAdd.at(t).get("commodity").valueChanges.pipe(Object(ct.a)(""),Object(F.a)(t=>t?"string"==typeof t?t:t.name:null),Object(F.a)(t=>t?this.commonService.filterData(t,"name",this.commodity):[]))}checkVolume(){let t=this.booking.book.volume,e=this.booking.container;if(t&&e){let o=t.map(t=>t.cont_type.id);o=o.filter((t,e,o)=>o.indexOf(t)==e);for(let i=0;i<o.length;i++){let n=o[i];if(t.filter(t=>t.cont_type.id==n).reduce((t,e)=>t+e.quantity,0)!=e.filter(t=>t.cont_type.id==n).length)return void(this.check=!1)}this.check=!0}else this.check=!1}updateBook(t){this.shipmentService.updateDatabaseBookingById(this.draftId,t)}onFormBookSubmit(t,e){if(this.filterVoyage=[],this.filterQuote=[],t.valid){let o=JSON.parse(JSON.stringify(t.value));if("string"==typeof o.customer)return void this.formBook.controls.customer.setValue(null);if("string"==typeof o.pol)return void this.formBook.controls.pol.setValue(null);if("string"==typeof o.pod)return void this.formBook.controls.pod.setValue(null);if("string"==typeof o.agent)return void this.formBook.controls.agent.setValue(null);"string"==typeof o.load_agent&&this.formBook.controls.load_agent.setValue(null),o.volume.map((t,e)=>{"string"!=typeof t.commodity||this.formBook.controls.volume.controls[e].controls.commodity.setValue(null)});let i=new Date(o.from_date).getTime()-864e5,n=new Date(o.to_date).getTime();this.filterVoyage=this.voyage.filter(t=>t.load_port==o.pol.id&&t.discharge_port==o.pod.id&&t.depart_time>=i&&t.depart_time<=n),e.next()}}getBook(t,e){e.supplier_name=e.partner_name;let o=JSON.parse(JSON.stringify(this.formBook.value)),i=new Date(e.depart_time).getTime()-864e5,n=(new Date(e.arrive_time).getTime(),o.volume.length),a=[],r={};for(let c=0;c<n;c++)o[o.volume[c].cont_type.code]?o[o.volume[c].cont_type.code]+=o.volume[c].quantity:o[o.volume[c].cont_type.code]=o.volume[c].quantity,a.includes(o.volume[c].commodity.name)||a.push(o.volume[c].commodity.name),r[o.volume[c].cont_type.code]||(r[o.volume[c].cont_type.code]=0),r.PCS||(r.PCS=0),r.SPT||(r.SPT=1),r[o.volume[c].cont_type.code]+=o.volume[c].quantity,r.PCS+=o.volume[c].quantity;if(o.commodity=a.join(", "),this.booking={user:o.owner.id,name:o.owner.name,book:o,voyage:e,vol:r},this.draftId){for(let t in this.oldData.book)this.booking.book[t]||(this.booking.book[t]=this.oldData.book[t]);this.booking.revenue=this.oldData.revenue,this.booking.party=this.oldData.party}else this.booking.revenue={sell:[]},this.booking.party=[];this.quote.find(t=>"VINALINK_HAN_0026 (CONSOL)"==t.code),this.filterQuote=this.quote.filter(t=>t.customer==o.customer.id&&t.supplier==e.supplier_id&&t.load_port==o.pol.id&&t.discharge_port==o.pod.id&&t.quote_from<=i&&t.quote_to>=i),this.filterTarrif=this.tarrif.filter(t=>(t.port==o.pol.id||t.port==o.pod.id)&&t.tarrif_from<=i&&t.tarrif_to>=i),t.next()}openQuoteModal(){this.filterQuote.length+this.filterTarrif.length>0?(this.dialogRef=this._matDialog.open(ae,{panelClass:"bookings-form-quote-modal-dialog",data:{label:"Quote & tarrif",quote:this.filterQuote,tarrif:this.filterTarrif,booking:this.booking,price:this.price,currency:this.currency,country:this.country,customer:this.formBook.value.customer}}),this.dialogRef.afterClosed().subscribe(t=>{})):alert("No quotation or tarrif to add selling rate!")}openModal(t){this.dialogRef=this._matDialog.open(re.a,{panelClass:"bookings-details-revenue-modal-dialog",data:{label:t?"Edit selling rate":"Create selling rate",price:this.price,currency:this.currency,partner:this.customer,customer:this.formBook.value.customer,country:this.country,data:t?t[0]:null}}),this.dialogRef.afterClosed().subscribe(e=>{e&&(t?this.booking.revenue.sell[t[1]]=e:this.booking.revenue.sell.push(e))})}deleteRevenue(t){this.booking.revenue.sell.splice(t,1)}saveBook(){let t;this.booking.book.code_company||(this.booking.book.code_company=""),this.updateBookingConfirm(this.booking.book,this.booking.voyage),this.draftId?this.shipmentService.updateDatabaseBookingById(this.draftId,this.booking):(t=Date.now().toString(),this.shipmentService.writeDatabaseBooking(t,this.booking)),setTimeout(()=>{this.draftId=this.draftId?this.draftId:t,this.router.navigate(["/apps/workflow/shipment/book-detail/id/"+this.draftId+"/overview"])},3e3)}updateBookingConfirm(t,e){let o,i;"HAIPHONG"==e.load_port_name||"DA NANG"==e.load_port_name?(o=null,i="CAP CONT NANG, SACH, TOT"):(o="DUY\u1ec6T L\u1ec6NH QUA EMAIL",i="Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container");let n=t.volume.map(t=>t.commodity.name);n=n.filter((t,e,o)=>o.indexOf(t)===e);let a=n.join(","),r="";t.volume.map(e=>{r+=this.shipmentService.calculateTotal(e.cont_type.code,t.volume)+"x"+e.cont_type.code+" "}),e.closing_time||(e.closing_time=e.depart_time-864e5),this.booking.bookConfirm={book_number:t.code,shipper:t.customer,agent:t.agent?t.agent:null,volume:t.volume,commodity:a,empty_pick_up_depot:this.oldData?this.oldData.bookConfirm.empty_pick_up_depot:null,place_of_stuffing:this.oldData?this.oldData.bookConfirm.place_of_stuffing:null,closing_time_vgm:this.oldData?this.oldData.bookConfirm.closing_time_vgm:null,return_laden_cont:e.load_terminal_name,clcv:this.oldData?this.oldData.bookConfirm.clcv:o,note:this.oldData?this.oldData.bookConfirm.note:i,contact_note:this.oldData?this.oldData.bookConfirm.contact_note:"HOCHIMINH"==e.pol?"Li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail dochcm@sel.vn v\xe0 support2@sel.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container":"For picking-up container, handing over custom clearance sheet, pls contact with our branch as follows",voyage:{pol:e.load_port_name,pod:e.discharge_port_name,load_terminal:e.load_terminal_name,discharge_terminal:e.discharge_terminal_name,vessel:e.vessel_name,voyage:e.name,closing_time:e.closing_time,etd:e.depart_time,eta:e.arrive_time},lcv_note:this.oldData?this.oldData.bookConfirm.lcv_note:null,lcv_volume:r,truck_name:this.oldData?this.oldData.bookConfirm.truck_name:null,truck_number:this.oldData?this.oldData.bookConfirm.truck_number:null,valid:this.oldData?this.oldData.bookConfirm.valid:null,valid_time:this.oldData?this.oldData.bookConfirm.valid_time:null,code_company:this.oldData?this.oldData.bookConfirm.code_company:""}}goBookList(){}}return t.\u0275fac=function(e){return new(e||t)(P.Rb(R),P.Rb(i.g),P.Rb(J.a),P.Rb(i.a),P.Rb(G.f),P.Rb(g.b),P.Rb(tt.d),P.Rb(lt.a))},t.\u0275cmp=P.Lb({type:t,selectors:[["shipment-book-form-overview"]],viewQuery:function(t,e){var o;1&t&&P.Sc(ce,!0),2&t&&P.wc(o=P.gc())&&(e.bookNgForm=o.first)},decls:136,vars:71,consts:[["fxLayout","column"],["fxLayout","row wrap"],["fxFlex","100",3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[2,"overflow","auto"],["fxFlex","1 0 auto","fxLayout","row wrap"],["fxFlex","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","code","required",""],[4,"ngIf"],["inputCheck","","type","text","matInput","","formControlName","code_company",3,"matAutocomplete"],["autoCode","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","matInput","","formControlName","owner","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOwner","matAutocomplete"],["inputCheck","","type","text","matInput","","formControlName","create_by","required","",3,"matAutocomplete"],["autoCreateby","matAutocomplete"],["fxFlex","50",1,"pr-8"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer","required","",3,"matAutocomplete"],["autoCus","matAutocomplete"],["style","font-size: 12px",3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","aria-label","Port of Loading","matInput","","formControlName","pol","required","",3,"matAutocomplete","readonly"],["autoPOL","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of discharge","matInput","","formControlName","pod","required","",3,"matAutocomplete"],["autoPOD","matAutocomplete"],["fxFlex","30",1,"pr-8"],["inputCheck","","matInput","","formControlName","load_agent",3,"matAutocomplete","readonly"],["autoAgent2","matAutocomplete"],["inputCheck","","matInput","","formControlName","agent","required","",3,"matAutocomplete"],["autoAgent","matAutocomplete"],["fxFlex","20",1,"pr-8"],["inputCheck","","matInput","","name","date","formControlName","from_date","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["fromDatePicker",""],["inputCheck","","matInput","","name","date","formControlName","to_date","required","",3,"matDatepicker","change"],["toDatePicker",""],["formArrayName","volume","fxFlex","1 0 auto","fxLayout","column"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","type","ngSubmit","color","accent"],["fxFlex","100",4,"ngIf"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent"],["fxLayout","row"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent",1,"mr-8"],["mat-raised-button","","matStepperNext","","type","button","color","accent",3,"disabled"],["class","group mb-12 mt-12",4,"ngIf"],["mat-raised-button","","type","button","color","accent",1,"mr-8",3,"click"],[3,"value"],[2,"font-size","12px",3,"value"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName"],["inputCheck","","aria-label","commodity","matInput","","formControlName","commodity","required","",3,"matAutocomplete"],["autoCommodity","matAutocomplete"],["inputCheck","","matInput","","type","number","formControlName","quantity"],["formControlName","cont_type","required",""],["fxFlex","10",1,"pr-8"],["mat-mini-fab","","color","warn","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn","type","button",3,"click"],["mat-mini-fab","","color","accent","type","button",3,"click"],["fxFlex","100"],[1,"simple","book-table"],[1,"sticky-left-col1",2,"z-index","30"],[1,"sticky-left-col2",2,"z-index","30"],[1,"sticky-right-col"],[4,"ngFor","ngForOf"],[1,"sticky-left-col1"],[1,"sticky-left-col2"],["color","accent",1,"cursor-pointer","mr-8",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"group","mb-12","mt-12"],["fxLayout","row wrap","fxLayoutAlign","start",1,"p-16"],["fxFlex","25",1,"pb-8"],["fxLayout","column","fxLayoutAlign","start"],[1,"text-bold"],[1,"mt-8"],["fxFlex","50",1,"pb-8"],["fxFlex","50","fxFlex.gt-xs","75",1,"pb-8"],["fxFlex","50","fxFlex.gt-xs","25",1,"pb-8"],[1,"text-right"]],template:function(t,e){if(1&t){const t=P.Yb();P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"mat-horizontal-stepper",2,3),P.Xb(4,"mat-step",4),P.Jc(5,be,1,0,"ng-template",5),P.Xb(6,"form",6,7),P.fc("keydown.enter",(function(t){return"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(o){P.Bc(t);const i=P.xc(3);return e.onFormBookSubmit(e.formBook,i)})),P.Xb(8,"div",8),P.Xb(9,"div",0),P.Xb(10,"div",9),P.Xb(11,"mat-form-field",10),P.Xb(12,"mat-label"),P.Lc(13,"Booking number"),P.Wb(),P.Sb(14,"input",11),P.Jc(15,le,2,0,"mat-error",12),P.Wb(),P.Xb(16,"mat-form-field",10),P.Xb(17,"mat-label"),P.Lc(18,"Code"),P.Wb(),P.Sb(19,"input",13),P.Xb(20,"mat-autocomplete",null,14),P.Jc(22,se,2,2,"mat-option",15),P.Wb(),P.Wb(),P.Xb(23,"mat-form-field",10),P.Xb(24,"mat-label"),P.Lc(25,"Owner"),P.Wb(),P.Sb(26,"input",16),P.Xb(27,"mat-autocomplete",17,18),P.Jc(29,me,2,2,"mat-option",15),P.kc(30,"async"),P.Wb(),P.Jc(31,de,2,0,"mat-error",12),P.Wb(),P.Xb(32,"mat-form-field",10),P.Xb(33,"mat-label"),P.Lc(34,"Create by"),P.Wb(),P.Sb(35,"input",19),P.Xb(36,"mat-autocomplete",17,20),P.Jc(38,pe,2,2,"mat-option",15),P.kc(39,"async"),P.Wb(),P.Jc(40,ue,2,0,"mat-error",12),P.Wb(),P.Xb(41,"mat-form-field",21),P.Xb(42,"mat-label"),P.Lc(43,"Booking party"),P.Wb(),P.Sb(44,"input",22),P.Xb(45,"mat-autocomplete",17,23),P.Jc(47,he,2,2,"mat-option",24),P.kc(48,"async"),P.Wb(),P.Jc(49,fe,2,0,"mat-error",12),P.Wb(),P.Xb(50,"mat-form-field",10),P.Xb(51,"mat-label"),P.Lc(52,"Port of loading"),P.Wb(),P.Sb(53,"input",25),P.Xb(54,"mat-autocomplete",17,26),P.Jc(56,ge,2,2,"mat-option",15),P.kc(57,"async"),P.Wb(),P.Jc(58,ve,2,0,"mat-error",12),P.Wb(),P.Xb(59,"mat-form-field",10),P.Xb(60,"mat-label"),P.Lc(61,"Port of discharge"),P.Wb(),P.Sb(62,"input",27),P.Xb(63,"mat-autocomplete",17,28),P.Jc(65,ke,2,2,"mat-option",15),P.kc(66,"async"),P.Wb(),P.Jc(67,ye,2,0,"mat-error",12),P.Wb(),P.Xb(68,"mat-form-field",29),P.Xb(69,"mat-label"),P.Lc(70,"Load Agent"),P.Wb(),P.Sb(71,"input",30),P.Xb(72,"mat-autocomplete",17,31),P.Jc(74,xe,2,2,"mat-option",24),P.kc(75,"async"),P.Wb(),P.Wb(),P.Xb(76,"mat-form-field",29),P.Xb(77,"mat-label"),P.Lc(78,"Dest Agent"),P.Wb(),P.Sb(79,"input",32),P.Xb(80,"mat-autocomplete",17,33),P.Jc(82,Xe,2,2,"mat-option",24),P.kc(83,"async"),P.Wb(),P.Jc(84,We,2,0,"mat-error",12),P.Wb(),P.Xb(85,"mat-form-field",34),P.Xb(86,"mat-label"),P.Lc(87,"From Date"),P.Wb(),P.Xb(88,"input",35),P.fc("change",(function(t){return e.commonService.setDateStr(t)})),P.Wb(),P.Sb(89,"mat-datepicker-toggle",36),P.Sb(90,"mat-datepicker",null,37),P.Jc(92,we,2,0,"mat-error",12),P.Wb(),P.Xb(93,"mat-form-field",34),P.Xb(94,"mat-label"),P.Lc(95,"To Date"),P.Wb(),P.Xb(96,"input",38),P.fc("change",(function(t){return e.commonService.setDateStr(t)})),P.Wb(),P.Sb(97,"mat-datepicker-toggle",36),P.Sb(98,"mat-datepicker",null,39),P.Jc(100,De,2,0,"mat-error",12),P.Wb(),P.Xb(101,"div",40),P.Jc(102,qe,23,11,"div",41),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(103,"div"),P.Xb(104,"button",42),P.Lc(105," Next "),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(106,"mat-step"),P.Jc(107,Ne,1,0,"ng-template",5),P.Xb(108,"div",8),P.Xb(109,"div",1),P.Jc(110,Be,29,1,"div",43),P.Wb(),P.Wb(),P.Xb(111,"div"),P.Xb(112,"button",44),P.Lc(113," Back "),P.Wb(),P.Wb(),P.Wb(),P.Xb(114,"mat-step"),P.Jc(115,Me,1,0,"ng-template",5),P.Xb(116,"div",8),P.Xb(117,"div",1),P.Jc(118,je,29,1,"div",43),P.Wb(),P.Wb(),P.Xb(119,"div",45),P.Xb(120,"button",46),P.Lc(121," Back "),P.Wb(),P.Xb(122,"button",47),P.Lc(123," Next "),P.Wb(),P.Wb(),P.Wb(),P.Xb(124,"mat-step"),P.Jc(125,Je,1,0,"ng-template",5),P.Xb(126,"div",8),P.Jc(127,Fe,58,9,"div",48),P.Jc(128,Te,67,19,"div",48),P.Jc(129,He,17,1,"div",48),P.Jc(130,Ve,29,1,"div",48),P.Wb(),P.Xb(131,"div",45),P.Xb(132,"button",46),P.Lc(133," Previous "),P.Wb(),P.Xb(134,"button",49),P.fc("click",(function(t){return e.saveBook()})),P.Lc(135," Save "),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()}if(2&t){const t=P.xc(21),o=P.xc(28),i=P.xc(37),n=P.xc(46),a=P.xc(55),r=P.xc(64),c=P.xc(73),b=P.xc(81),l=P.xc(91),s=P.xc(99);P.Db(2),P.pc("linear",!0),P.Db(2),P.pc("stepControl",e.formBook),P.Db(2),P.pc("formGroup",e.formBook),P.Db(2),P.Ic("height",e.height-48,"px"),P.Db(7),P.pc("ngIf",e.formBook.get("code").hasError("required")),P.Db(4),P.pc("matAutocomplete",t),P.Db(3),P.pc("ngForOf",e.codeCompany),P.Db(4),P.pc("matAutocomplete",o),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"name")),P.Db(2),P.pc("ngForOf",P.lc(30,57,e.filteredUser)),P.Db(2),P.pc("ngIf",e.formBook.get("owner").hasError("required")),P.Db(4),P.pc("matAutocomplete",i),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"name")),P.Db(2),P.pc("ngForOf",P.lc(39,59,e.filteredUser2)),P.Db(2),P.pc("ngIf",e.formBook.get("create_by").hasError("required")),P.Db(4),P.pc("matAutocomplete",n),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"full_name")),P.Db(2),P.pc("ngForOf",P.lc(48,61,e.filteredCustomer)),P.Db(2),P.pc("ngIf",e.formBook.get("customer").hasError("required")),P.Db(4),P.pc("matAutocomplete",a)("readonly",e.modul.includes("hochiminh")),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"name")),P.Db(2),P.pc("ngForOf",P.lc(57,63,e.filteredPol)),P.Db(2),P.pc("ngIf",e.formBook.get("pol").hasError("required")),P.Db(4),P.pc("matAutocomplete",r),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"name")),P.Db(2),P.pc("ngForOf",P.lc(66,65,e.filteredPod)),P.Db(2),P.pc("ngIf",e.formBook.get("pod").hasError("required")),P.Db(4),P.pc("matAutocomplete",c)("readonly",e.modul.includes("hochiminh")),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"full_name")),P.Db(2),P.pc("ngForOf",P.lc(75,67,e.filteredAgent2)),P.Db(5),P.pc("matAutocomplete",b),P.Db(1),P.pc("displayWith",e.commonService.displayObjFn.bind(e,"full_name")),P.Db(2),P.pc("ngForOf",P.lc(83,69,e.filteredAgent)),P.Db(2),P.pc("ngIf",e.formBook.get("agent").hasError("required")),P.Db(4),P.pc("matDatepicker",l),P.Db(1),P.pc("for",l),P.Db(3),P.pc("ngIf",e.formBook.get("from_date").hasError("required")),P.Db(4),P.pc("matDatepicker",s),P.Db(1),P.pc("for",s),P.Db(3),P.pc("ngIf",e.formBook.get("to_date").hasError("required")),P.Db(2),P.pc("ngForOf",e.volumeAdd.controls),P.Db(6),P.Ic("height",e.height-48,"px"),P.Db(2),P.pc("ngIf",e.formBook.valid),P.Db(6),P.Ic("height",e.height-48,"px"),P.Db(2),P.pc("ngIf",e.formBook.valid&&e.booking&&e.booking.revenue),P.Db(4),P.pc("disabled",!e.booking||!e.booking.revenue||0==e.booking.revenue.length),P.Db(4),P.Ic("height",e.height-48,"px"),P.Db(1),P.pc("ngIf",e.booking&&e.booking.book),P.Db(1),P.pc("ngIf",e.booking&&e.booking.voyage),P.Db(1),P.pc("ngIf",e.booking&&e.booking.book),P.Db(1),P.pc("ngIf",e.booking&&e.booking.revenue)}},directives:[z.d,x.a,z.b,x.b,x.c,tt.A,tt.q,tt.h,s.c,s.f,p.b,tt.b,tt.p,tt.g,tt.w,G.t,r.c,r.a,G.s,c.b,c.d,s.h,c.a,tt.c,b.b,x.f,x.e,s.b,D.n,tt.i,tt.u,h.a,m.a,z.c],pipes:[G.b,G.f,G.g],styles:["shipment-book-form-overview .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:16px 0 8px}shipment-book-form-overview .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}shipment-book-form-overview .border-black{border:1px solid #000!important}shipment-book-form-overview .book-table{font-size:12px}shipment-book-form-overview .book-table td,shipment-book-form-overview .book-table th{padding:8px;font-size:12px;white-space:nowrap}shipment-book-form-overview .book-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}shipment-book-form-overview .book-table tfoot td{font-weight:600}shipment-book-form-overview .book-table .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}shipment-book-form-overview .book-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}shipment-book-form-overview .book-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background:#fff}shipment-book-form-overview .book-table tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}shipment-book-form-overview .book-table tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:M.a}}),t})();var Ue=o("MutI"),$e=o("f0Cb");let ze=(()=>{class t{}return t.\u0275mod=P.Pb({type:t}),t.\u0275inj=P.Ob({factory:function(e){return new(e||t)},imports:[[i.k,a.b,n.a,r.b,c.c,b.c,l.b,s.e,m.b,d.b,p.c,u.c,h.b,f.c,g.e,v.b,k.b,y.b,x.d,X.e,W.b,w.b,_.b,L.k,Ue.c,$e.b,D.t,C.a]]}),t})(),Qe=(()=>{class t{}return t.\u0275mod=P.Pb({type:t}),t.\u0275inj=P.Ob({factory:function(e){return new(e||t)},imports:[[i.k,a.b,n.a,r.b,c.c,b.c,l.b,s.e,m.b,d.b,p.c,u.c,h.b,f.c,g.e,v.b,k.b,y.b,x.d,X.e,W.b,w.b,_.b,L.k,Ue.c,$e.b,D.t]]}),t})(),Ye=(()=>{class t{}return t.\u0275mod=P.Pb({type:t}),t.\u0275inj=P.Ob({factory:function(e){return new(e||t)},imports:[[i.k,a.b,n.a,r.b,c.c,b.c,l.b,s.e,m.b,d.b,p.c,u.c,h.b,f.c,g.e,v.b,k.b,y.b,x.d,X.e,W.b,w.b,_.b,L.k,Ue.c,$e.b,D.t]]}),t})();var Ke=o("v9+L");o.d(e,"ShipmentBookFormModule",(function(){return to}));const Ze=[{path:"form/:bookId",component:rt,resolve:{data:R},children:[{path:"overview",component:Ge}]}];let to=(()=>{class t{}return t.\u0275mod=P.Pb({type:t}),t.\u0275inj=P.Ob({factory:function(e){return new(e||t)},providers:[R],imports:[[i.k.forChild(Ze),a.b,n.a,r.b,c.c,b.c,l.b,s.e,m.b,d.b,p.c,u.c,h.b,f.c,g.e,v.b,k.b,y.b,x.d,X.e,W.b,w.b,_.b,L.k,S.c,D.t,C.a,O.a,N.f,A.g,q.b,ze,Qe,Ye,Ke.a]]}),t})()}}]);