(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{"8/VP":function(e,t,i){"use strict";i.r(t);var n=i("tyNb"),o=i("STbY"),r=i("/1cH"),a=i("iadO"),c=i("bTqV"),s=i("7EHt"),l=i("kmnG"),b=i("NFeN"),p=i("Qu3c"),d=i("qFsG"),h=i("wZkO"),u=i("d3UM"),m=i("QibW"),f=i("0IaG"),g=i("/t3+"),v=i("bSwM"),x=i("M9IT"),y=i("xHqg"),w=i("A5z7"),S=i("bv9b"),L=i("XhcP"),C=i("FKr1"),k=i("1jcm"),_=i("+0xr"),X=i("Dh3D"),W=i("IOBc"),R=i("212X"),D=i("5HBU"),T=i("LPQX"),O=i("XNiG"),A=i("1G5W"),I=i("PVWW"),F=i("3Pt+"),P=i("dCBQ"),q=i("JX91"),j=i("lJxs"),N=i("fXoL"),J=i("qXBG"),z=i("0Zc1"),B=i("2Vo4"),M=i("jD4G"),H=i("tk/3");let E=(()=>{class e{constructor(e,t){this._httpClient=e,this.authService=t,this.filterBy={},this.countryR=[],this.cityR=[],this.placeR=[],this.contTypeR=[],this.moveR=[],this.onContainerListChanged=new B.a([]),this.onContainersInfoChanged=new B.a([]),this.onDataChanged=new B.a([]),this.onSearchTextChanged=new O.a,this.onFilterChanged=new O.a}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getContainerList(),this.getContainerInfo(),this.getData()]).then(([t])=>{this.onSearchTextChanged.subscribe(e=>{this.searchText=e,this.getFilterContainerList(),this.getFilterContainer()}),this.onFilterChanged.subscribe(e=>{this.filterBy=e,this.getFilterContainerList()}),e()},t)})}getContainerList(){let e={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/all",e).subscribe(e=>{this.container=e,this.getFilterContainerList(),t(e)},i)})}getContainerInfo(){let e={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/info",e).subscribe(e=>{this.containers=e.container,this.countryR=e.country,this.cityR=e.city,this.placeR=e.place,this.contTypeR=e.contType,this.moveR=e.move,this.getFilterContainer(),t(e)},i)})}getData(){let e={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/data",e).subscribe(e=>{this.partner=e[0],this.seaport=e[1],this.contType=e[2],this.moveType=e[3],this.onDataChanged.next(e),t(e)},i)})}createContainerList(e){let t={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.post(this.authService.apiUrl+"/pln/container",e,t).subscribe(e=>{i(e)},n)})}updateContainerList(e){let t={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.put(this.authService.apiUrl+"/pln/container",e,t).subscribe(e=>{i(e)},n)})}deleteContainerList(e){let t={headers:new H.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.delete(this.authService.apiUrl+"/pln/container/"+e,t).subscribe(e=>{i(e)},n)})}getFilterContainerList(){let e=JSON.parse(JSON.stringify(this.container));this.searchText&&""!==this.searchText&&(e=M.a.filterArrayByString(e,this.searchText)),this.filterBy.cont_number&&(e=e.filter(e=>e.cont_number.toLowerCase().includes(this.filterBy.cont_number.toLowerCase()))),this.filterBy.move_type&&(e=e.filter(e=>e.move==this.filterBy.move)),this.filterData=e,this.onContainerListChanged.next(this.filterData)}getFilterContainer(){let e=JSON.parse(JSON.stringify(this.containers));this.searchText&&""!==this.searchText&&(e=M.a.filterArrayByString(e,this.searchText)),this.filterContainer=e;let t={port:{},depot:{},carrier:{},noscope:{},city:{}},i={port:{total:{}},depot:{total:{}},carrier:{total:{}},noscope:{total:{}},city:{total:{}},all:{total:{}}};function n(e){return e||0}function o(e){return e||{}}function r(e){return e||[]}function a(e,t,i,n,o){e[n][o][i.movement.move_code].push(i),e[n][o].total++,t[n][i.cont_type_code][i.movement.move_code]++,t[n].total[i.movement.move_code]++}function c(e,t,i,n){let o={id:e.id,name:e.name,code:e.code,country:e.country,country_name:e.country_name,country_code:e.country_code,pol:e.pol,pol_name:e.pol_name,pol_code:e.pol_code,pod:e.pod,pod_name:e.pod_name,pod_code:e.pod_code,city:"partner"==e.type?e.city:null,move_code:i,typePlace:e.type,total:0,type:t};return n.map(e=>{o[e.code]=[]}),o[t]={},o}let s=[];this.moveR.map(e=>{s.push(e.code)}),this.placeR.map(e=>{this.contTypeR.map(r=>{if("LOAD"==e.move_code){let a=e.id+"-"+r.code;t.carrier[a]||(t.carrier[a]=c(e,r.code,"LOAD",this.moveR)),i.carrier[r.code]=o(i.carrier[r.code]),i.carrier[r.code].LOAD=n(i.carrier[r.code].LOAD),i.carrier[r.code].total=n(i.carrier[r.code].total),i.carrier.total.LOAD=n(i.carrier.total.LOAD)}else{let s=e.id+"-"+r.code;for(var a in i)"carrier"!=a&&(i[a][r.code]=o(i[a][r.code]));this.moveR.map(e=>{for(var t in i)"carrier"!=t&&(i[t].total[e.code]=n(i[t].total[e.code]),i[t][r.code][e.code]=n(i[t][r.code][e.code]),i[t][r.code].total=n(i[t][r.code].total))}),"seaport"!=e.type&&(e.scope.includes("P")&&(t.port[s]=c(e,r.code,null,this.moveR)),e.scope.includes("D")&&!e.scope.includes("P")&&(t.depot[s]=c(e,r.code,null,this.moveR)),e.scope.includes("P")||e.scope.includes("D")||e.scope.includes("C")||(t.noscope[s]=c(e,r.code,null,this.moveR)))}})}),this.cityReport=[];let l=[];e.map(e=>{if(e.movement){if("LOAD"==e.movement.move_code){let n=e.movement.place+"-"+e.cont_type_code;this.placeR.find(t=>t.id==e.movement.place),t.carrier[n].LOAD=r(t.carrier[n].LOAD),a(t,i,e,"carrier",n)}else{let n=e.movement.place+"-"+e.cont_type_code,o=this.placeR.find(t=>t.id==e.movement.place&&t.scope.includes("P")),s=this.placeR.find(t=>t.id==e.movement.place&&t.scope.includes("D")&&!t.scope.includes("P"));switch(!0){case!!o:t.port[n]||(t.port[n]=c(o,e.cont_type_code,e.movement.move_code,this.moveR)),t.port[n][e.movement.move_code]=r(t.port[n][e.movement.move_code]),a(t,i,e,"port",n);break;case!!s:t.depot[n]||(t.depot[n]=c(s,e.cont_type_code,e.movement.move_code,this.moveR)),t.depot[n][e.movement.move_code]=r(t.depot[n][e.movement.move_code]),a(t,i,e,"depot",n);break;default:if(!t.noscope[n]){let i=this.placeR.find(t=>t.id==e.movement.place);t.noscope[n]=c(i,e.cont_type_code,e.movement.move_code,this.moveR)}t.noscope[n][e.movement.move_code]=r(t.noscope[n][e.movement.move_code]),a(t,i,e,"noscope",n)}i.all[e.cont_type_code][e.movement.move_code]++,i.all.total[e.movement.move_code]++}let o=e.movement.city+"-"+e.cont_type_code;try{JSON.parse(JSON.stringify(this.cityR.find(t=>t.name==e.movement.city)))}catch(n){console.error("city is Null"),console.error(e)}let s=this.cityR.find(t=>t.name==e.movement.city),b=JSON.parse(JSON.stringify(s));l.includes(o)||(l.push(o),b.type=e.cont_type_code,b.key=o,this.moveR.map(e=>{b[e.code]=[]}),this.cityReport.push(b)),this.cityReport.find(e=>e.key==o)[e.movement.move_code].push(e),i.city.total[e.movement.move_code]++,i.city[e.cont_type_code][e.movement.move_code]++,i.city[e.cont_type_code].total++}});for(let h in t){let e=t[h];for(let t in e){let i=e[t];i.total||(i.total=0),this.moveR.map(e=>{"LOAD"==i.move_code&&"LOAD"!=e.code&&(i[e.code]=[]),i.total+=i[e.code].length})}}this.contTypeR.map(e=>{this.moveR.map(t=>{i.port[e.code].total+=i.port[e.code][t.code],i.port.total.total=n(i.port.total.total),i.port.total.total+=i.port[e.code][t.code],i.depot[e.code].total+=i.depot[e.code][t.code],i.depot.total.total=n(i.depot.total.total),i.depot.total.total+=i.depot[e.code][t.code],"LOAD"==t.code&&(i.carrier[e.code]=o(i.carrier[e.code]),i.carrier[e.code].LOAD=n(i.carrier[e.code].LOAD),i.carrier[e.code].total+=i.carrier[e.code][t.code],i.carrier.total.total=n(i.carrier.total.total),i.carrier.total.total+=i.carrier[e.code][t.code]),i.noscope[e.code].total+=i.noscope[e.code][t.code],i.noscope.total.total=n(i.noscope.total.total),i.noscope.total.total+=i.noscope[e.code][t.code]})}),this.cityReport.sort((e,t)=>{var i=e.country_code,n=t.country_code,o=e.name,r=t.name,a=e.type,c=t.type;return i<n?1:i>n?-1:o>r?1:o<r?-1:a>c?1:a<c?-1:0});let b=[],p=[],d={country:[]};this.cityReport.map(e=>{let t=e.country_name+"-"+e.name,i=e.country_name+"-"+e.name+"-"+e.type;b.includes(e.country_name)||(b.push(e.country_name),d.country.push({name:e.country_name,row:0,city:[]}));let n=d.country.find(t=>t.name==e.country_name);p.includes(t)||(p.push(t),n.city.push({name:e.name,row:0,type:[],lat:e.lat,lng:e.lng}));let o=n.city.find(t=>t.name==e.name);o.type.push(e.type),n.row++,o.row++,d[i]=e}),d.country.map(e=>{e.city.map(t=>{t.type.map(i=>{let n=e.name+"-"+t.name+"-"+i;this.moveR.map(e=>{d[n][e.code].sort((e,t)=>e.movement.maxDate<t.movement.maxDate?1:t.movement.maxDate<e.movement.maxDate?-1:0)})})})}),this.moveReport={header:s,data:t,place:this.placeR,contType:this.contTypeR,total:i,city:d},this.onContainersInfoChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(N.bc(H.a),N.bc(J.a))},e.\u0275prov=N.Nb({token:e,factory:e.\u0275fac}),e})();var G=i("XiUz"),U=i("EwFO"),V=i("ofXK");const Y=["formDirective"];function Q(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Cont number is required "),N.Wb())}function $(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Cont number is too long (max length = 11); "),N.Wb())}function K(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Invalid container-list- number "),N.Wb())}function Z(e,t){if(1&e&&(N.Xb(0,"mat-option",20),N.Lc(1),N.Wb()),2&e){const e=t.$implicit;N.pc("value",e.id),N.Db(1),N.Mc(e.code)}}function ee(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Cont type is required "),N.Wb())}function te(e,t){if(1&e&&(N.Xb(0,"mat-option",20),N.Lc(1),N.Wb()),2&e){const e=t.$implicit;N.pc("value",e.id),N.Db(1),N.Nc(" ",e.full_name," ")}}function ie(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Principal is required "),N.Wb())}function ne(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Status is required "),N.Wb())}function oe(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Grade is required "),N.Wb())}let re=(()=>{class e{constructor(e,t,i,n,o,r){this.matDialogRef=e,this._data=t,this.authService=i,this.commonService=n,this.containerService=o,this._formBuilder=r,this.length=0,this.check=!0,this.contType=[],this.partner=[],this.errorMessage="",this.formContainerList=this._formBuilder.group({id:[null],cont_number:["",[F.y.required,P.a]],cont_type:["",F.y.required],principal:["",F.y.required],status:[1,F.y.required],grade:["U",F.y.required],info:[""],update_by:[this.authService.user,F.y.required]}),this.label=t.label,this.contType=t.contType,this.partner=t.partner,t.data?this.formContainerList.patchValue(t.data):this.formContainerList.controls.id.disable()}ngOnInit(){this.name=this.authService.name,this.filteredPartner=this.formContainerList.controls.principal.valueChanges.pipe(Object(q.a)(""),Object(j.a)(e=>e?"string"==typeof e?e:e.full_name:null),Object(j.a)(e=>e?this.commonService.filterData(e,"full_name",this.partner):[]))}onFormSubmit(e){if(e.valid){let t=JSON.parse(JSON.stringify(e.value));if("string"==typeof t.principal)return void this.formContainerList.controls.principal.setValue(null);switch(this.authService.onRequestChanged.next(!0),this.label){case"Edit container":this.containerService.updateContainerList(t).then(e=>{this.authService.onRequestChanged.next(!1),this.matDialogRef.close(e)}).catch(e=>{this.authService.onRequestChanged.next(!1),e.error&&e.error.sqlMessage&&(this.errorMessage=e.error.sqlMessage),console.error(e)});break;default:this.containerService.createContainerList(t).then(e=>{this.authService.onRequestChanged.next(!1),this.matDialogRef.close(e)}).catch(e=>{this.authService.onRequestChanged.next(!1),e.error&&e.error.sqlMessage&&(this.errorMessage=e.error.sqlMessage),console.error(e)})}}}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(f.f),N.Rb(f.a),N.Rb(J.a),N.Rb(z.a),N.Rb(E),N.Rb(F.d))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list-modal-dialog"]],viewQuery:function(e,t){var i;1&e&&N.Sc(Y,!0),2&e&&N.wc(i=N.gc())&&(t.containerNgForm=i.first)},decls:73,vars:25,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-cost-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","50",1,"pr-8"],["inputCheck","","matInput","","maxlength","11","formControlName","cont_number","required",""],[4,"ngIf"],["formControlName","cont_type","required",""],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","aria-label","principal","matInput","","formControlName","principal",3,"matAutocomplete"],[3,"displayWith"],["autoCus","matAutocomplete"],["appearance","outline","fxFlex","25",1,"pr-8"],["formControlName","status","required",""],[3,"value"],["formControlName","grade","required",""],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","",3,"readonly","value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"]],template:function(e,t){if(1&e&&(N.Xb(0,"div",0),N.Xb(1,"mat-toolbar",1),N.Xb(2,"mat-toolbar-row",2),N.Xb(3,"span",3),N.Lc(4),N.Wb(),N.Xb(5,"button",4),N.fc("click",(function(e){return t.matDialogRef.close()})),N.Xb(6,"mat-icon"),N.Lc(7,"close"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Xb(8,"div",5),N.Xb(9,"div"),N.Xb(10,"form",6),N.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.formContainerList)})),N.Xb(11,"div",7),N.Sb(12,"input",8),N.Wb(),N.Xb(13,"div",9),N.Xb(14,"mat-form-field",10),N.Xb(15,"mat-label"),N.Lc(16,"Cont number"),N.Wb(),N.Sb(17,"input",11),N.Jc(18,Q,2,0,"mat-error",12),N.Jc(19,$,2,0,"mat-error",12),N.Jc(20,K,2,0,"mat-error",12),N.Wb(),N.Xb(21,"mat-form-field",10),N.Xb(22,"mat-label"),N.Lc(23,"Cont type"),N.Wb(),N.Xb(24,"mat-select",13),N.Jc(25,Z,2,2,"mat-option",14),N.Wb(),N.Jc(26,ee,2,0,"mat-error",12),N.Wb(),N.Xb(27,"mat-form-field",10),N.Xb(28,"mat-label"),N.Lc(29,"Principal"),N.Wb(),N.Sb(30,"input",15),N.Xb(31,"mat-autocomplete",16,17),N.Jc(33,te,2,2,"mat-option",14),N.kc(34,"async"),N.Wb(),N.Jc(35,ie,2,0,"mat-error",12),N.Wb(),N.Xb(36,"mat-form-field",18),N.Xb(37,"mat-label"),N.Lc(38,"Status"),N.Wb(),N.Xb(39,"mat-select",19),N.Xb(40,"mat-option",20),N.Lc(41,"Invalid"),N.Wb(),N.Xb(42,"mat-option",20),N.Lc(43,"Valid"),N.Wb(),N.Wb(),N.Jc(44,ne,2,0,"mat-error",12),N.Wb(),N.Xb(45,"mat-form-field",18),N.Xb(46,"mat-label"),N.Lc(47,"Grade"),N.Wb(),N.Xb(48,"mat-select",21),N.Xb(49,"mat-option",20),N.Lc(50,"A"),N.Wb(),N.Xb(51,"mat-option",20),N.Lc(52,"B"),N.Wb(),N.Xb(53,"mat-option",20),N.Lc(54,"C"),N.Wb(),N.Xb(55,"mat-option",20),N.Lc(56,"D"),N.Wb(),N.Xb(57,"mat-option",20),N.Lc(58,"U"),N.Wb(),N.Wb(),N.Jc(59,oe,2,0,"mat-error",12),N.Wb(),N.Xb(60,"mat-form-field",22),N.Xb(61,"mat-label"),N.Lc(62,"Update by"),N.Wb(),N.Sb(63,"input",23),N.Sb(64,"input",24),N.Wb(),N.Wb(),N.Xb(65,"div",25),N.Xb(66,"div",26),N.Lc(67),N.Wb(),N.Wb(),N.Xb(68,"div",27),N.Xb(69,"button",28),N.Lc(70,"Submit"),N.Wb(),N.Xb(71,"button",29),N.fc("click",(function(e){return t.matDialogRef.close()})),N.Lc(72,"Cancel"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e){const e=N.xc(32);N.Db(4),N.Mc(t.label),N.Db(6),N.pc("formGroup",t.formContainerList),N.Db(8),N.pc("ngIf",t.formContainerList.get("cont_number").hasError("required")),N.Db(1),N.pc("ngIf",!t.formContainerList.get("cont_number").hasError("required")&&t.formContainerList.get("cont_number").hasError("maxLength")),N.Db(1),N.pc("ngIf",t.formContainerList.get("cont_number").errors&&t.formContainerList.get("cont_number").dirty&&t.formContainerList.get("cont_number").errors.validConNum),N.Db(5),N.pc("ngForOf",t.contType),N.Db(1),N.pc("ngIf",t.formContainerList.get("cont_type").hasError("required")),N.Db(4),N.pc("matAutocomplete",e),N.Db(1),N.pc("displayWith",t.commonService.displayFn.bind(t,"full_name",t.partner)),N.Db(2),N.pc("ngForOf",N.lc(34,23,t.filteredPartner)),N.Db(2),N.pc("ngIf",t.formContainerList.get("principal").hasError("required")),N.Db(5),N.pc("value",0),N.Db(2),N.pc("value",1),N.Db(2),N.pc("ngIf",t.formContainerList.get("status").hasError("required")),N.Db(5),N.pc("value","A"),N.Db(2),N.pc("value","B"),N.Db(2),N.pc("value","C"),N.Db(2),N.pc("value","D"),N.Db(2),N.pc("value","U"),N.Db(2),N.pc("ngIf",t.formContainerList.get("grade").hasError("required")),N.Db(4),N.pc("readonly",!0)("value",t.name),N.Db(4),N.Mc(t.errorMessage)}},directives:[g.a,g.c,G.b,G.d,G.c,c.b,b.a,f.d,U.a,F.A,F.q,F.h,F.b,F.p,F.g,l.c,l.f,d.b,F.k,F.w,V.t,u.a,V.s,r.c,r.a,C.n,l.b],pipes:[V.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-list-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-list-modal-dialog{width:1080px}}.container-list-modal-dialog .mat-dialog-container{padding:0}.container-list-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-list-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-list-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();var ae=i("HX77"),ce=i("0JVi"),se=i("B9zo"),le=i("fE3o"),be=i("znSr"),pe=i("rPBI");function de(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",16),N.fc("click",(function(t){return N.Bc(e),N.jc().newContainerList.emit()})),N.Xb(1,"mat-icon",17),N.Lc(2,"add"),N.Wb(),N.Xb(3,"span",18),N.Lc(4,"Container"),N.Wb(),N.Wb()}}function he(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",13),N.fc("click",(function(t){N.Bc(e);const i=N.jc();return t.stopPropagation(),i.changeScreen(!0)})),N.Xb(1,"mat-icon"),N.Lc(2,"flip_to_front"),N.Wb(),N.Wb()}}function ue(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",13),N.fc("click",(function(t){N.Bc(e);const i=N.jc();return t.stopPropagation(),i.changeScreen(!1)})),N.Xb(1,"mat-icon"),N.Lc(2,"flip_to_back"),N.Wb(),N.Wb()}}let me=(()=>{class e{constructor(e){this.authService=e,this.changeScreen=new N.o,this.toggleSidebar=new N.o,this.showHideBar=new N.o,this.refreshPage=new N.o,this.newContainerList=new N.o,this.searchFilter=new N.o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(J.a))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list-header"]],inputs:{fullScreen:"fullScreen",sidebarName:"sidebarName",searchText:"searchText",permission:"permission"},outputs:{changeScreen:"changeScreen",toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",newContainerList:"newContainerList",searchFilter:"searchFilter"},decls:42,vars:7,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],[3,"searchText","inputValue"],["mat-icon-button","","class","quick-panel-toggle-button","aria-label","Toggle quick panel",3,"click",4,"ngIf"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Toggle quick panel",1,"quick-panel-toggle-button",3,"click"],[1,"secondary-text","accent-600-fg"],["fxHide","","fxShow.gt-sm","",1,"accent-600-fg"]],template:function(e,t){1&e&&(N.Xb(0,"mat-toolbar",0),N.Xb(1,"div",1),N.Xb(2,"div",2),N.Xb(3,"div",3),N.Xb(4,"button",4),N.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),N.Xb(5,"mat-icon"),N.Lc(6,"menu"),N.Wb(),N.Wb(),N.Xb(7,"button",5),N.fc("click",(function(e){return t.showHideBar.emit()})),N.Xb(8,"mat-icon"),N.Lc(9,"menu"),N.Wb(),N.Wb(),N.Wb(),N.Xb(10,"button",6),N.Xb(11,"span",7),N.Lc(12,"List"),N.Wb(),N.Xb(13,"mat-icon",8),N.Lc(14,"equalizer"),N.Wb(),N.Wb(),N.Xb(15,"button",6),N.Xb(16,"span",7),N.Lc(17,"City"),N.Wb(),N.Xb(18,"mat-icon",8),N.Lc(19,"equalizer"),N.Wb(),N.Wb(),N.Xb(20,"button",6),N.Xb(21,"span",7),N.Lc(22,"Place"),N.Wb(),N.Xb(23,"mat-icon",8),N.Lc(24,"equalizer"),N.Wb(),N.Wb(),N.Wb(),N.Xb(25,"div",9),N.Sb(26,"div",10),N.Xb(27,"filter-search-bar",11),N.fc("inputValue",(function(e){return t.searchFilter.emit(e)})),N.Wb(),N.Sb(28,"div",10),N.Jc(29,de,5,0,"button",12),N.Sb(30,"div",10),N.Xb(31,"button",13),N.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),N.Xb(32,"mat-icon",14),N.Lc(33,"refresh"),N.Wb(),N.Wb(),N.Sb(34,"div",10),N.Jc(35,he,3,0,"button",15),N.Jc(36,ue,3,0,"button",15),N.Sb(37,"div",10),N.Xb(38,"button",13),N.fc("click",(function(e){return t.toggleSidebar.emit("container-list-setting")})),N.Xb(39,"mat-icon"),N.Lc(40,"settings"),N.Wb(),N.Wb(),N.Sb(41,"div",10),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(10),N.pc("routerLink","/apps/pacific-logistics-network/container/list"),N.Db(5),N.pc("routerLink","/apps/pacific-logistics-network/container/city"),N.Db(5),N.pc("routerLink","/apps/pacific-logistics-network/container/place"),N.Db(7),N.pc("searchText",t.searchText),N.Db(2),N.pc("ngIf",t.permission.create),N.Db(6),N.pc("ngIf",!t.fullScreen),N.Db(1),N.pc("ngIf",t.fullScreen))},directives:[g.a,G.b,G.e,G.d,G.c,c.b,be.b,b.a,n.i,n.h,pe.a,V.t],styles:["container-list-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}container-list-header.below{z-index:2}container-list-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}container-list-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}container-list-header .logo .logo-icon{width:38px}container-list-header .chat-panel-toggle-button,container-list-header .language-button,container-list-header .quick-panel-toggle-button,container-list-header .user-button,container-list-header fuse-search-bar{min-width:64px;height:64px;width:128px}@media screen and (max-width:599px){container-list-header .chat-panel-toggle-button,container-list-header .language-button,container-list-header .quick-panel-toggle-button,container-list-header .user-button,container-list-header fuse-search-bar{height:56px;width:auto}}container-list-header .navbar-toggle-button{min-width:56px;height:56px}container-list-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){container-list-header .toolbar-separator{height:56px}}"],encapsulation:2}),e})();const fe=["formDirective"];function ge(e,t){if(1&e&&(N.Xb(0,"mat-option",15),N.Lc(1),N.Wb()),2&e){const e=t.$implicit;N.pc("value",e.id),N.Db(1),N.Nc(" ",e.code," ")}}let ve=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.authService=t,this.commonService=i,this.filterChange=new N.o,this.form=this.formBuilder.group({cont_number:[null],move_type:[null]}),this.now=new Date,this.height=560,this._unsubscribeAll=new O.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12}),this.form.valueChanges.subscribe(e=>{this.filterChange.emit(e)})}resetForm(){this.searchNgForm.resetForm()}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(F.d),N.Rb(J.a),N.Rb(z.a))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list-sidebar"]],viewQuery:function(e,t){var i;1&e&&N.Sc(fe,!0),2&e&&N.wc(i=N.gc())&&(t.searchNgForm=i.first)},inputs:{moveType:"moveType"},outputs:{filterChange:"filterChange"},decls:21,vars:4,consts:[["name","form",3,"formGroup","keydown.enter"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container-list-"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","container-list-","matInput","","formControlName","cont_number"],["fxFlex","100",1,"info-line"],["formControlName","move_type"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(N.Xb(0,"form",0,1),N.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),N.Xb(2,"div",2),N.Xb(3,"div",3),N.Xb(4,"button",4),N.fc("click",(function(e){return t.resetForm()})),N.Lc(5," Reset "),N.Wb(),N.Wb(),N.Wb(),N.Xb(6,"div",5),N.Xb(7,"div",6),N.Xb(8,"div",7),N.Xb(9,"div",8),N.Xb(10,"div",9),N.Xb(11,"mat-form-field",10),N.Xb(12,"mat-label"),N.Lc(13,"Container"),N.Wb(),N.Sb(14,"input",11),N.Wb(),N.Wb(),N.Xb(15,"div",12),N.Xb(16,"mat-form-field",10),N.Xb(17,"mat-label"),N.Lc(18,"Move type"),N.Wb(),N.Xb(19,"mat-select",13),N.Jc(20,ge,2,2,"mat-option",14),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.pc("formGroup",t.form),N.Db(6),N.Ic("height",t.height,"px"),N.Db(14),N.pc("ngForOf",t.moveType))},directives:[F.A,F.q,F.h,G.d,G.c,c.b,G.b,U.a,l.c,l.f,d.b,F.b,F.p,F.g,u.a,V.s,C.n],styles:["container-list-sidebar{border-right:1px solid #a3a3a3}container-list-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-list-sidebar .navbar-scroll-container-list-{background:#fff!important}container-list-sidebar .navbar-scroll-container-list- .navbar-content{padding-top:0}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2{overflow:hidden}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .info-line .mat-radio-container-list-{-webkit-transform:scale(.6);transform:scale(.6)}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}container-list-sidebar .navbar-scroll-container-list- .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container-list-{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container-list- .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container-list- .user .avatar-container-list-{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container-list- .user .avatar-container-list- .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container-list- .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function xe(e,t){if(1&e){const e=N.Yb();N.Xb(0,"fuse-sidebar",9),N.Xb(1,"container-list-sidebar",10),N.fc("filterChange",(function(t){return N.Bc(e),N.jc().filterChange(t)})),N.Wb(),N.Wb()}if(2&e){const e=N.jc();N.Db(1),N.pc("moveType",e.moveType)}}function ye(e,t){1&e&&N.Sb(0,"router-outlet")}let we=(()=>{class e{constructor(e,t,i,n,o,r){this._fuseSidebarService=e,this.containerService=t,this._fuseConfigService=i,this.router=n,this._matDialog=o,this.authService=r,this.sidebarPanel=!1,this.fullScreen=!1,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this._unsubscribeAll=new O.a}ngOnInit(){this.searchText=this.containerService.searchText,this.containerService.onDataChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.partner=this.containerService.partner,this.seaport=this.containerService.seaport,this.contType=this.containerService.contType})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}refreshPage(e){this.authService.refreshData(this.containerService)}createItem(e){this.dialogRef=this._matDialog.open(re,{panelClass:"container-list-modal-dialog",data:{label:"Add container",contType:this.contType,partner:this.partner}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainerList()})}getContainerList(){setTimeout(()=>{this.authService.onRequestChanged.next(!0),this.containerService.getContainerList().then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error load data")})})}searchFilter(e){this.containerService.onSearchTextChanged.next(e)}filterChange(e){this.containerService.onFilterChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(ae.a),N.Rb(E),N.Rb(ce.b),N.Rb(n.g),N.Rb(f.b),N.Rb(J.a))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list"]],decls:9,vars:6,consts:[["id","container-list-",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-list-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-list-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"sidebarName","fullScreen","permission","searchText","changeScreen","showHideBar","refreshPage","toggleSidebar","newContainerList","searchFilter"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[4,"ngIf"],["name","container-list-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"moveType","filterChange"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Jc(1,xe,2,1,"fuse-sidebar",1),N.Xb(2,"fuse-sidebar",2),N.Sb(3,"div",3),N.Wb(),N.Xb(4,"div",4),N.Xb(5,"container-list-header",5),N.fc("changeScreen",(function(e){return t.changeScreen(e)}))("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newContainerList",(function(e){return t.createItem(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),N.Wb(),N.Xb(6,"div",6),N.Xb(7,"div",7),N.Jc(8,ye,1,0,"router-outlet",8),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(1),N.pc("ngIf",t.sidebarPanel),N.Db(4),N.pc("sidebarName","container-list-sidebar")("fullScreen",t.fullScreen)("permission",t.permission)("searchText",t.searchText),N.Db(3),N.pc("ngIf",!0))},directives:[se.a,V.t,le.a,me,G.a,ve,n.l],styles:["container-list{width:100%}container-list .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-list .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-list .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-list .center .content-card container-list-{border-right:0}container-list .center .content-card container-list-,container-list .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-list .center .content-card shipment-details{display:none!important}container-list .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-list .center .content-card.current-shipment-selected .content container-list-,container-list .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-list .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:I.a}}),e})();var Se=i("vxfF");function Le(e,t){1&e&&(N.Xb(0,"mat-icon",11),N.Lc(1,"check"),N.Wb())}function Ce(e,t){1&e&&(N.Xb(0,"mat-icon",12),N.Lc(1,"close"),N.Wb())}function ke(e,t){if(1&e){const e=N.Yb();N.Xb(0,"mat-icon",13),N.fc("click",(function(t){N.Bc(e);const i=N.jc().$implicit,n=N.jc();return t.stopPropagation(),n.updateItem(i)})),N.Lc(1,"edit"),N.Wb()}}function _e(e,t){if(1&e){const e=N.Yb();N.Xb(0,"mat-icon",14),N.fc("click",(function(t){N.Bc(e);const i=N.jc().$implicit,n=N.jc();return t.stopPropagation(),n.deleteItem(i)})),N.Lc(1,"delete"),N.Wb()}}function Xe(e,t){if(1&e&&(N.Xb(0,"tr"),N.Xb(1,"td"),N.Lc(2),N.Wb(),N.Xb(3,"td"),N.Xb(4,"a",4),N.Lc(5),N.Wb(),N.Wb(),N.Xb(6,"td"),N.Lc(7),N.Wb(),N.Xb(8,"td",5),N.Lc(9),N.Wb(),N.Xb(10,"td"),N.Jc(11,Le,2,0,"mat-icon",6),N.Jc(12,Ce,2,0,"mat-icon",7),N.Wb(),N.Xb(13,"td"),N.Lc(14),N.Wb(),N.Xb(15,"td"),N.Lc(16),N.Wb(),N.Xb(17,"td"),N.Lc(18),N.Wb(),N.Xb(19,"td",8),N.Jc(20,ke,2,0,"mat-icon",9),N.Jc(21,_e,2,0,"mat-icon",10),N.Wb(),N.Wb()),2&e){const e=t.$implicit,i=t.index,n=N.jc();N.Db(2),N.Mc(i+1),N.Db(2),N.pc("routerLink","/apps/pacific-logistics-network/container-details/"+e.id),N.Db(1),N.Mc(e.cont_number),N.Db(2),N.Mc(e.cont_code),N.Db(1),N.pc("matTooltip",e.partner_full_name),N.Db(1),N.Mc(e.partner_short_name),N.Db(2),N.pc("ngIf",1==e.status),N.Db(1),N.pc("ngIf",0==e.status),N.Db(2),N.Mc(e.grade),N.Db(2),N.Mc(e.info),N.Db(2),N.Mc(e.update_by_name),N.Db(2),N.pc("ngIf",n.permission.edit),N.Db(1),N.pc("ngIf",n.permission.delete)}}let We=(()=>{class e{constructor(e,t,i,n,o){this._activatedRoute=e,this.authService=t,this.containerService=i,this.router=n,this._matDialog=o,this.height=560,this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this._unsubscribeAll=new O.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.containerService.onContainerListChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.container=e}),this.containerService.onDataChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.partner=this.containerService.partner,this.seaport=this.containerService.seaport,this.contType=this.containerService.contType})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}updateItem(e){this.dialogRef=this._matDialog.open(re,{panelClass:"container-list-modal-dialog",data:{label:"Edit container",data:e,contType:this.contType,partner:this.partner}}),this.dialogRef.afterClosed().subscribe(e=>{e&&(console.log(e),this.getContainerList())})}getContainerList(){setTimeout(()=>{this.authService.onRequestChanged.next(!0),this.containerService.getContainerList().then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error load data")})})}deleteItem(e){confirm("Do you want to delete this container?")&&this.containerService.deleteContainerList(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(alert("delete container-list- success"),this.getContainerList()):(console.error(e),alert("Error: No change"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(n.a),N.Rb(J.a),N.Rb(E),N.Rb(n.g),N.Rb(f.b))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list-table"]],viewQuery:function(e,t){var i;1&e&&N.Sc(Se.e,!0),2&e&&N.wc(i=N.gc())&&(t.viewPort=i.first)},decls:24,vars:21,consts:[["fxLayout","column"],["itemSize","43",1,"h-100-p"],[1,"simple","container-table"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"cursor-pointer",3,"routerLink"],[3,"matTooltip"],["class","green-fg ",4,"ngIf"],["class","red-fg ",4,"ngIf"],[1,"w-64","p-0","sticky-right-col"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[1,"green-fg"],[1,"red-fg"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"cdk-virtual-scroll-viewport",1),N.Xb(2,"table",2),N.Xb(3,"thead"),N.Xb(4,"tr"),N.Xb(5,"th"),N.Lc(6,"No"),N.Wb(),N.Xb(7,"th"),N.Lc(8,"Cont number"),N.Wb(),N.Xb(9,"th"),N.Lc(10,"Type"),N.Wb(),N.Xb(11,"th"),N.Lc(12,"Principal"),N.Wb(),N.Xb(13,"th"),N.Lc(14,"Status"),N.Wb(),N.Xb(15,"th"),N.Lc(16,"Grade"),N.Wb(),N.Xb(17,"th"),N.Lc(18,"Info"),N.Wb(),N.Xb(19,"th"),N.Lc(20,"Update by"),N.Wb(),N.Sb(21,"th"),N.Wb(),N.Wb(),N.Xb(22,"tbody"),N.Jc(23,Xe,22,13,"tr",3),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Ic("height",t.height,"px"),N.Db(5),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.Ic("top",t.inverseOfTranslation),N.Db(2),N.pc("cdkVirtualForOf",t.container))},directives:[G.d,Se.e,Se.a,Se.d,n.j,p.a,V.t,b.a],styles:["container-list-table .container-table{font-size:12px}container-list-table .container-table td,container-list-table .container-table th{padding:8px!important;white-space:nowrap}container-list-table .container-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}container-list-table .container-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}container-list-table .container-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}container-list-table .container-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}container-list-table .container-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}container-list-table .container-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2,data:{animation:I.a}}),e})();var Re=i("1kfr"),De=i("7fRk");let Te=(()=>{class e{constructor(e,t,i){this.containerService=e,this.authService=t,this._matDialog=i,this.height=560,this._unsubscribeAll=new O.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.containerService.onContainersInfoChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.moveReport=this.containerService.moveReport,console.log(this.moveReport)}),this.containerService.onDataChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.seaport=e[4]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(e){this.containerService.onFilterChanged.next(e)}openList([e,t]){this.dialogRef=this._matDialog.open(Re.a,{panelClass:"container-list-city-modal-dialog",data:{label:t,data:e}}),this.dialogRef.afterClosed().subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(E),N.Rb(J.a),N.Rb(f.b))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list-city"]],decls:2,vars:8,consts:[["fxLayout","column"],[3,"label","seaport","header","contType","data","total","setFilter","openList"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"container-overview-city-list",1),N.fc("setFilter",(function(e){return t.setFilter(e)}))("openList",(function(e){return t.openList(e)})),N.Wb(),N.Wb()),2&e&&(N.Ic("height",t.height,"px"),N.Db(1),N.pc("label","CITY")("seaport",t.seaport)("header",t.moveReport.header)("contType",t.moveReport.contType)("data",t.moveReport.city)("total",t.moveReport.total.city))},directives:[G.d,De.a],styles:[""],encapsulation:2}),e})();var Oe=i("W91O");let Ae=(()=>{class e{constructor(e,t,i,n){this._activatedRoute=e,this.authService=t,this.containerService=i,this._matDialog=n,this.height=560,this._unsubscribeAll=new O.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.width<600?e.height-16-4:e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{let t=e?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16-4+t:this.authService.screenHeight-64-64-16-4+t}),this.containerService.onContainersInfoChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.moveReport=this.containerService.moveReport,this.portReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("P")),this.depotReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("D")&&!e.scope.includes("P")),this.carrierReport=this.moveReport.place.filter(e=>e.scope&&e.scope.includes("C")),this.noscopeReport=this.moveReport.place.filter(e=>e.scope&&!e.scope.includes("C")&&!e.scope.includes("P")&&!e.scope.includes("D"))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(e){this.containerService.onFilterChanged.next(e)}openModal(e){this.dialogRef=this._matDialog.open(Re.a,{panelClass:"container-list-city-modal-dialog",data:{label:"Container List",data:e}}),this.dialogRef.afterClosed().subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(n.a),N.Rb(J.a),N.Rb(E),N.Rb(f.b))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-list-place"]],decls:4,vars:20,consts:[["fxLayout","column"],[3,"label","header","places","contType","data","total","openModal"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"container-list-place-table",1),N.fc("openModal",(function(e){return t.openModal(e)})),N.Wb(),N.Xb(2,"container-list-place-table",1),N.fc("openModal",(function(e){return t.openModal(e)})),N.Wb(),N.Xb(3,"container-list-place-table",1),N.fc("openModal",(function(e){return t.openModal(e)})),N.Wb(),N.Wb()),2&e&&(N.Ic("height",t.height,"px"),N.Db(1),N.pc("label","PORT")("header",t.moveReport.header)("places",t.portReport)("contType",t.moveReport.contType)("data",t.moveReport.data.port)("total",t.moveReport.total.port),N.Db(1),N.pc("label","DEPOT")("header",t.moveReport.header)("places",t.depotReport)("contType",t.moveReport.contType)("data",t.moveReport.data.depot)("total",t.moveReport.total.depot),N.Db(1),N.pc("label","CARRIER")("header",t.moveReport.header)("places",t.carrierReport)("contType",t.moveReport.contType)("data",t.moveReport.data.carrier)("total",t.moveReport.total.carrier))},directives:[G.d,Oe.a],styles:[""],encapsulation:2,data:{animation:I.a}}),e})();var Ie=i("cfqv"),Fe=i("xVYC"),Pe=i("Pbok"),qe=i("0mUG"),je=i("vju0");i.d(t,"ContainerListModule",(function(){return Je}));const Ne=[{path:"",component:we,resolve:{data:E},children:[{path:"list",component:We},{path:"city",component:Te},{path:"place",component:Ae}]}];let Je=(()=>{class e{}return e.\u0275mod=N.Pb({type:e}),e.\u0275inj=N.Ob({factory:function(t){return new(t||e)},providers:[E],imports:[[n.k.forChild(Ne),o.b,r.b,a.c,c.c,s.b,l.e,b.b,p.b,d.c,h.c,u.b,m.c,f.e,g.b,v.b,x.b,y.d,w.e,S.b,L.b,k.b,_.k,X.c,C.t,W.a,R.a,D.a,T.f,Se.g,Ie.b,Fe.a,Pe.a,qe.a,je.a]]}),e})()}}]);