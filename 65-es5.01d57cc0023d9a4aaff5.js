function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{BINB:function(e,t,n){"use strict";n.r(t);var r,i,o=n("tyNb"),a=n("5HBU"),c=n("STbY"),l=n("/1cH"),s=n("iadO"),b=n("bTqV"),p=n("7EHt"),u=n("kmnG"),d=n("NFeN"),f=n("Qu3c"),h=n("qFsG"),m=n("wZkO"),g=n("d3UM"),v=n("QibW"),y=n("0IaG"),x=n("/t3+"),k=n("bSwM"),w=n("M9IT"),D=n("xHqg"),C=n("A5z7"),S=n("bv9b"),_=n("XhcP"),W=n("FKr1"),X=n("1jcm"),O=n("+0xr"),N=n("Dh3D"),L=n("f0Cb"),I=n("LPYB"),T=n("zQsl"),V=n("IOBc"),A=n("212X"),j=n("LPQX"),M=n("XNiG"),R=n("1G5W"),F=n("PVWW"),P=n("fXoL"),J=n("HX77"),B=n("2Vo4"),z=n("jD4G"),E=n("tk/3"),$=n("UsMi"),Y=n("6K47"),H=n("Iab2"),q=n("0Zc1"),U=n("ofXK"),G=n("qXBG"),Q=((r=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this._httpClient=t,this.commonService=n,this.datePipe=r,this.route=i,this.authService=o,this.defaultSearch={formSearch:{pay_party:null,issue_party:null,customer:null,load_agent:null,agent:null,voyage:null,payment_center:null,type:"ETA",date_from:null,date_to:null}},this.total={revenue:0,cost:0},this.total2={revenueVN:{ALL:0},revenueNN:{ALL:0},costVN:{ALL:0},costNN:{ALL:0},revenueBalance:{},costBalance:{},currency:[]},this.dataBill=[],this.onVoyageChanged=new M.a,this.onCustomerChanged=new M.a,this.onDataChanged=new B.a([]),this.onTypeChanged=new B.a("form"),this.onSoaChanged=new B.a([]),this.onDataItemChanged=new B.a([]),this.onVesselChanged=new B.a([]),this.onUpdateAddInfoChanged=new B.a([]),this.onSearchTextChanged=new M.a}return _createClass(e,[{key:"resolve",value:function(e){var t=this;if(this.authService.routerData=e,this.authService.back&&(this.authService.back=!1),!this.currenSearch||this.currenSearch&&!this.currenSearch.formSearch){var n=new Date,r=n.getMonth()-1,i=n.getFullYear();this.defaultSearch.formSearch.date_from=new Date(i,r-1,1),this.defaultSearch.formSearch.date_to=new Date(i,r+2,0),this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch))}return this.voyageId=this.currenSearch.formSearch.voyage=e.params.id?e.params.id:null,this.customerId=this.currenSearch.formSearch.customer=e.params.customer?e.params.customer:null,new Promise((function(e,n){Promise.all([t.getSelShipmentFilterSoa(t.currenSearch.formSearch),t.getData(),t.getItemData()]).then((function(n){_slicedToArray(n,1)[0],t.onSearchTextChanged.subscribe((function(e){t.searchText=e;var n=JSON.parse(JSON.stringify(t.shipment));t.searchText&&""!==t.searchText&&(n=z.a.filterArrayByString(n,t.searchText)),t.buildReport(n),t.buildVessel(n)})),e()}),n)}))}},{key:"getSelShipmentFilterSoa",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,i){t._httpClient.post(t.authService.apiUrl+"/sel/shipment/filter-soa2",e,n).subscribe((function(e){t.shipment=e.shipment,t.shipmentAddInfo=e.shipmentAddInfo,t.sptPrice=e.price,t.sptVoyage=e.voyage;var n=JSON.parse(JSON.stringify(t.shipment));t.searchText&&""!==t.searchText&&(n=z.a.filterArrayByString(n,t.searchText)),t.buildReport(n),t.buildVessel(n),r(e)}),i)}))}},{key:"getData",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/sel/shipment/data",t).subscribe((function(t){e.dataCustomer=t[0],e.dataSupplier=t[1],e.users=t[3],e.onDataChanged.next(t),n(t)}),r)}))}},{key:"getItemData",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(n,r){e._httpClient.get(e.authService.apiUrl+"/sel/book/book",t).subscribe((function(t){e.agent=t.agent,e.commodity=t.commodity,e.packageType=t.packageType,e.price=t.price,e.currency=t.currency,e.country=t.country,e.depot=t.depot,e.onDataItemChanged.next(t),n(t)}),r)}))}},{key:"createSelRevenue",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,i){t._httpClient.post(t.authService.apiUrl+"/sel/revenue",e,n).subscribe((function(e){r(e)}),i)}))}},{key:"createSelCost",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,i){t._httpClient.post(t.authService.apiUrl+"/sel/cost",e,n).subscribe((function(e){r(e)}),i)}))}},{key:"buildReport",value:function(e){var t=this,n=[],r=[],i=[],o={},a={};function c(e,t,n){e[t][n]||(e[t][n]=0)}function l(e,t,l,s){var b;e[l]+=s.total_vnd,"revenue"==l?r.includes(s.partner)||(r.push((b=s).partner),o[b.partner]={id:b.partner,type:"revenue",full_name:b.partner_name,short_name:b.partner_short_name,revenue:{},last_paydate:null,last_pay:null,paydate_revenue:{},balance_paydate:{},data:{revenue:[]}}):i.includes(s.partner)||function(e){i.push(e.partner),a[e.partner]={id:e.partner,type:"cost",full_name:e.partner_name,short_name:e.partner_short_name,cost:{},last_paydate:null,last_pay:null,paydate_cost:{},balance_paydate:{},data:{cost:[]}}}(s);var p=s.volume*(s.amount+s.tax_amount),u="revenue"==l?o[s.partner]:a[s.partner],d=s.currency_code;if(n.includes(d)||n.push(d),c(u,l,d),u[l][d]+=p,s.pay_date){var f=new Date(s.pay_date).getTime(),h=(new Date).getTime();(!u.last_paydate||u.last_paydate&&u.last_paydate<f)&&(u.last_paydate=f,u.last_pay=Math.round((h-f)/864e5)),c(u,"paydate_"+l,d),u["paydate_"+l][d]+=p}u.data[l].push(s)}e.map((function(e){e.dataRevenue.map((function(e){l(t.total,0,"revenue",e)})),e.dataCost.map((function(e){l(t.total,0,"cost",e)}))})),r.map((function(e,t){r[t]=o[e]})),i.map((function(e,t){i[t]=a[e]})),this.customer=r.sort((function(e,t){return e.full_name>t.full_name?1:t.full_name>e.full_name?-1:0})),this.supplier=i.sort((function(e,t){return e.full_name>t.full_name?1:t.full_name>e.full_name?-1:0})),this.currencies=n.sort(),this.filterShipmentBoard=e,this.filterShipmentBalance=[{name:"Credit",data:[],totalSoa:{}},{name:"Debit",data:[],totalSoa:{}},{name:"Balance",data:[],totalSoa:{}},{name:"Mix",data:[],totalSoa:{}}],this.customer.map((function(e){var n=[];t.currencies.map((function(t){c(e,"revenue",t),c(e,"paydate_revenue",t),c(e,"balance_paydate",t),e.balance_paydate[t]=e.revenue[t]-e.paydate_revenue[t],n.push(function(e){return e*e<.001?0:e>0?1:e<0?-1:void 0}(e.balance_paydate[t]))}));var r,i,o=(r=Math.min.apply(null,n),i=Math.max.apply(null,n),r>=0&&1==i?0:-1==r&&i<=0?1:0==r&&0==i?2:-1==r&&1==i?3:void 0);t.filterShipmentBalance[o].data.push(e),t.currencies.map((function(n){t.filterShipmentBalance[o].totalSoa[n]||(t.filterShipmentBalance[o].totalSoa[n]=0),t.filterShipmentBalance[o].totalSoa[n]+=e.balance_paydate[n]}))})),this.supplier.map((function(e){var n=[];t.currencies.map((function(t){c(e,"cost",t),c(e,"paydate_cost",t),c(e,"balance_paydate",t),e.balance_paydate[t]=-e.cost[t]+e.paydate_cost[t],n.push(function(e){return e*e<.001?0:e>0?1:e<0?-1:void 0}(e.balance_paydate[t]))}));var r,i,o=(r=Math.min.apply(null,n),i=Math.max.apply(null,n),r>=0&&1==i?0:-1==r&&i<=0?1:0==r&&0==i?2:-1==r&&1==i?3:void 0);t.filterShipmentBalance[o].data.push(e),t.currencies.map((function(n){t.filterShipmentBalance[o].totalSoa[n]||(t.filterShipmentBalance[o].totalSoa[n]=0),t.filterShipmentBalance[o].totalSoa[n]+=e.balance_paydate[n]}))})),this.onSoaChanged.next([this.filterShipmentBalance,this.customer,this.supplier])}},{key:"buildVessel",value:function(e){var t=this;function n(e,t,n,r){e.currency.includes(n)||e.currency.push(n),e[t][n]||(e[t][n]=0),e[t][n]+=r}this.arrType=[],this.voyage=[],this.shipmentVessel={},this.dataBill=[],this.total2={revenueVN:{ALL:0},revenueNN:{ALL:0},costVN:{ALL:0},costNN:{ALL:0},revenueBalance:{},costBalance:{},currency:[]},e.map((function(e){var r={};r.vessel_full_name=e.vessel_full_name,r.pol_name=e.pol_name,r.pod_name=e.pod_name,r.depart_time=e.depart_time,r.arrive_time=e.arrive_time,r.date=e.date,r.id=e.id,r.code=e.code,r.bill=e.bill,r.customer_name=e.customer_name,r.customer_short_name=e.customer_short_name,r.agent_name=e.agent_name,r.agent_short_name=e.agent_short_name,r.process=e.process,r.profit=e.profit,r.revenueVN=e.revenueVN,r.revenueNN=e.revenueNN,r.costVN=e.costVN,r.costNN=e.costNN,r.voyage=e.voyage,r.customer=e.customer;var i=e.date+"-"+e.vessel_name+"-"+e.voyage;r.key=i,t.shipmentVessel[i]||(t.shipmentVessel[i]={voyage_name:e.voyage_name,vessel_full_name:e.vessel_full_name,pol_name:e.pol_name,pod_name:e.pod_name,load_country:e.load_country,discharge_country:e.discharge_country,depart_time:e.depart_time,arrive_time:e.arrive_time,closing_time:e.closing_time,shipment:[]},t.voyage.push({key:i,vessel:e.vessel_name,voyage_id:e.voyage,voyage_name:e.voyage_name,depart_time:e.depart_time})),e.volume.map((function(n){e[n.cont_type_code]?(e[n.cont_type_code]+=n.volume,r[n.cont_type_code]+=n.volume):(e[n.cont_type_code]=n.volume,r[n.cont_type_code]=n.volume),t.shipmentVessel[i][n.cont_type_code]?t.shipmentVessel[i][n.cont_type_code]+=n.volume:t.shipmentVessel[i][n.cont_type_code]=n.volume,t.arrType.includes(n.cont_type_code)||t.arrType.push(n.cont_type_code),t.total2[n.cont_type_code]||(t.total2[n.cont_type_code]=0),t.total2[n.cont_type_code]+=n.volume})),e.dataRevenue.map((function(e){var r=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(n(t.total2,"revenueVN",e.currency_code,r),t.total2.revenueVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(n(t.total2,"revenueNN",e.currency_code,r),t.total2.revenueNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),n(t.total2,"revenueBalance",e.currency_code,r)})),e.dataCost.map((function(e){var r=e.volume*(e.amount+e.tax_amount);"VIETNAM"==e.country_name?(n(t.total2,"costVN",e.currency_code,r),t.total2.costVN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(n(t.total2,"costNN",e.currency_code,r),t.total2.costNN.ALL+=e.volume*(e.amount+e.tax_amount)*e.ex_rate),n(t.total2,"costBalance",e.currency_code,r)})),t.shipmentVessel[i].shipment.push(e),t.dataBill.push(r)})),this.total2.currency.map((function(e){n(t.total2,"revenueBalance",e,0),n(t.total2,"costBalance",e,0)})),this.arrType.sort(),this.voyage.sort((function(e,t){return e.key<t.key?1:t.key<e.key?-1:0})),this.dataBill.sort((function(e,t){var n=e.date,r=t.date,i=e.vessel_full_name,o=t.vessel_full_name,a=e.bill,c=t.bill;return n>r?-1:n<r?1:i>o?1:i<o?-1:a>c?1:a<c?-1:0})),this.onVesselChanged.next([this.shipmentVessel,this.voyage,this.arrType,this.total2])}},{key:"updateMultiShipmentItem",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,i){t._httpClient.put(t.authService.apiUrl+"/sel/shipment/multi-item",e,n).subscribe((function(e){r(e)}),i)}))}},{key:"updateSelRevenue",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,i){t._httpClient.put(t.authService.apiUrl+"/sel/revenue",e,n).subscribe((function(e){r(e)}),i)}))}},{key:"updateSelCost",value:function(e){var t=this,n={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,i){t._httpClient.put(t.authService.apiUrl+"/sel/cost",e,n).subscribe((function(e){r(e)}),i)}))}},{key:"getCostExcel",value:function(e,t){var n=this,r=new Y.Workbook,i=r.addWorksheet("COM");i.addRow([" "]),i.getRow(1).font={name:"Arial Narrow",size:10,bold:!1,italic:!1},i.addRow([null,null,null,"Address : Room 506B, V.E.T Building, 98 Hoang Quoc Viet Street, Nghia Do Ward, Cau Giay District, Ha Noi, Viet Nam"]),i.getRow(2).font={bold:!0,italic:!0},i.addRow([null,null,null,"Tel: (84-4) 32121246"]),i.getRow(3).font={bold:!0,italic:!0},i.addRow([]),i.addRow([]),i.addRow(["From","SE GLOBAL LINES",null,null,"Attn",t.short_name]),i.getRow(6).font={size:11,bold:!1,italic:!0},i.addRow([]),i.addRow(["RE: PAYMENT FOR CARGOES FROM HAIPHONG TO SINGAPORE"]),i.getRow(8).font={size:10,bold:!0,italic:!1},i.addRow([]),i.addRow(["We would like to thanks for your valued support so far. Please see the below credit note for your reference as follows:"]),i.getRow(10).font={size:12,bold:!1,italic:!1};var o=r.addImage({base64:$.a,extension:"png"});i.addImage(o,"A2:C3"),i.addRow([]);var a=i.addRow(["SQ","MONTH","B/L","VESSEL & VOYAGE","DATE","VOLUME",null,"INVOICE RATE","ACTUAL RATE","AMOUNT (USD)","PAYMENT DATE"]),c=i.addRow([null,null,null,null,null,"20'","40'",null,null,null,null]);a.eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),c.eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),i.mergeCells("A12:A13"),i.mergeCells("B12:B13"),i.mergeCells("C12:C13"),i.mergeCells("D12:D13"),i.mergeCells("E12:E13"),i.mergeCells("F12:G12"),i.mergeCells("H12:H13"),i.mergeCells("I12:I13"),i.mergeCells("J12:J13"),i.mergeCells("K12:K13"),e.map((function(e){e[1]&&(e[1]=(new Date(e[1]).getTime()+252e5)/864e5+25569),e[4]&&(e[4]=(new Date(e[4]).getTime()+252e5)/864e5+25569),e[10]&&(e[10]=(new Date(e[10]).getTime()+252e5)/864e5+25569);for(var t=i.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!0},2==r&&(t.getCell(r).numFmt="mmm yyyy"),5!=r&&11!=r||(t.getCell(r).numFmt="dd mmm yyyy",t.getCell(r).alignment={horizontal:"right"}),6!=r&&7!=r&&9!=r&&10!=r&&11!=r||(t.getCell(r).alignment={horizontal:"center"}),8!=r&&9!=r&&10!=r||(t.getCell(r).numFmt="0.00")}));var l=i.addRow([null,"TOTAL",null,null,null,this.calculateTotal(e,5),this.calculateTotal(e,6),null,null,this.calculateTotal(e,9),null]);l.getCell(1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(1).font={size:8,bold:!0},l.getCell(2).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(2).font={size:8,bold:!0},l.getCell(3).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(3).font={size:8,bold:!0},l.getCell(4).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(4).font={size:8,bold:!0},l.getCell(5).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(5).font={size:8,bold:!0},l.getCell(6).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(6).font={size:8,bold:!0},l.getCell(6).alignment={horizontal:"center"},l.getCell(7).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(7).font={size:8,bold:!0},l.getCell(7).alignment={horizontal:"center"},l.getCell(8).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(8).font={size:8,bold:!0},l.getCell(9).numFmt="0.00",l.getCell(9).alignment={horizontal:"center"},l.getCell(9).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(9).font={size:8,bold:!0},l.getCell(10).numFmt="0.00",l.getCell(10).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(10).font={size:8,bold:!0},l.getCell(10).alignment={horizontal:"center"},l.getCell(11).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(11).font={size:8,bold:!0},i.addRow([]),i.addRow([null,"USD",this.calculateTotal(e,9)]).eachCell((function(e,t){e.font={size:8,bold:!0},e.numFmt="#,##0.00_);(#,##0.00)"})),i.addRow([null,"Ex-rate",21e3]).eachCell((function(e,t){e.font={size:8,bold:!0},e.numFmt="#,##0_);(#,##0)"})),i.addRow([null,"VND",21e3*this.calculateTotal(e,9),"In word: "+this.commonService.inWords(23e3*this.calculateTotal(e,9))]).eachCell((function(e,t){e.font={size:8,bold:!0},e.numFmt="#,##0_);(#,##0)"})),i.getColumn(1).width=5,i.getColumn(2).width=9,i.getColumn(3).width=17,i.getColumn(4).width=25,i.getColumn(5).width=11,i.getColumn(6).width=8,i.getColumn(7).width=8,i.getColumn(8).width=12,i.getColumn(9).width=12,i.getColumn(10).width=12,i.getColumn(11).width=11,r.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(H.saveAs)(t,"soa_"+n.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")}))}},{key:"getInvoiceRateExcel",value:function(e,t){var n=this,r=new Y.Workbook,i=r.addWorksheet("INVOICE RATE");i.addRow([" "]),i.getRow(1).font={name:"Arial Narrow",size:10,bold:!1,italic:!1},i.addRow([null,null,null,"Address : Room 506B, V.E.T Building, 98 Hoang Quoc Viet Street, Nghia Do Ward, Cau Giay District, Ha Noi, Viet Nam"]),i.getRow(2).font={bold:!0,italic:!0},i.addRow([null,null,null,"Tel: (84-4) 32121246"]),i.getRow(3).font={bold:!0,italic:!0},i.addRow([]),i.addRow([]),i.addRow(["From","SE GLOBAL LINES",null,null,"Attn",t.short_name]),i.getRow(6).font={size:11,bold:!1,italic:!0},i.addRow([]),i.addRow(["RE: PAYMENT FOR CARGOES FROM HAIPHONG TO SINGAPORE"]),i.getRow(8).font={size:10,bold:!0,italic:!1},i.addRow([]),i.addRow(["We would like to thanks for your valued support so far. Please see the below credit note for your reference as follows:"]),i.getRow(10).font={size:12,bold:!1,italic:!1};var o=r.addImage({base64:$.a,extension:"png"});i.addImage(o,"A2:C3"),i.addRow([]);var a=i.addRow(["SQ","MONTH","B/L","VESSEL & VOYAGE","DATE","VOLUME",null,"OF","RR","ECRS","INVOICE RATE",null,"PAYMENT DATE"]),c=i.addRow([null,null,null,null,null,"20'","40'",null,null,null,"Total","COM",null]);a.eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),c.eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),i.mergeCells("A12:A13"),i.mergeCells("B12:B13"),i.mergeCells("C12:C13"),i.mergeCells("D12:D13"),i.mergeCells("E12:E13"),i.mergeCells("F12:G12"),i.mergeCells("H12:H13"),i.mergeCells("I12:I13"),i.mergeCells("J12:J13"),i.mergeCells("K12:L12"),i.mergeCells("M12:M13"),e.map((function(e){e[1]&&(e[1]=(new Date(e[1]).getTime()+252e5)/864e5+25569),e[4]&&(e[4]=(new Date(e[4]).getTime()+252e5)/864e5+25569);for(var t=i.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!0},2==r&&(t.getCell(r).numFmt="mmm yyyy"),5==r&&(t.getCell(r).numFmt="dd mmm yyyy",t.getCell(r).alignment={horizontal:"right"}),6!=r&&7!=r&&8!=r&&9!=r&&10!=r&&11!=r&&12!=r||(t.getCell(r).alignment={horizontal:"center"}),8!=r&&9!=r&&10!=r&&11!=r&&12!=r||(t.getCell(r).numFmt="0.00")}));var l=i.addRow([null,"TOTAL",null,null,null,this.calculateTotal(e,5),this.calculateTotal(e,6),this.calculateTotal(e,7),this.calculateTotal(e,8),this.calculateTotal(e,9),this.calculateTotal(e,10),this.calculateTotal(e,11)]);l.getCell(1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(1).font={size:8,bold:!0},l.getCell(2).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(2).font={size:8,bold:!0},l.getCell(3).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(3).font={size:8,bold:!0},l.getCell(4).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(4).font={size:8,bold:!0},l.getCell(5).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(5).font={size:8,bold:!0},l.getCell(6).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(6).font={size:8,bold:!0},l.getCell(6).alignment={horizontal:"center"},l.getCell(7).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(7).font={size:8,bold:!0},l.getCell(7).alignment={horizontal:"center"},l.getCell(8).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(8).font={size:8,bold:!0},l.getCell(8).numFmt="0.00",l.getCell(9).alignment={horizontal:"center"},l.getCell(9).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(9).font={size:8,bold:!0},l.getCell(9).numFmt="0.00",l.getCell(10).alignment={horizontal:"center"},l.getCell(10).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(10).font={size:8,bold:!0},l.getCell(10).numFmt="0.00",l.getCell(11).alignment={horizontal:"center"},l.getCell(11).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(11).font={size:8,bold:!0},l.getCell(11).numFmt="0.00",l.getCell(12).alignment={horizontal:"center"},l.getCell(12).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(12).font={size:8,bold:!0},l.getCell(12).numFmt="0.00",l.getCell(13).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},l.getCell(13).font={size:8,bold:!0},i.addRow([]),i.addRow([null,"USD",this.calculateTotal(e,11)]).eachCell((function(e,t){e.font={size:8,bold:!0},e.numFmt="#,##0.00_);(#,##0.00)"})),i.addRow([null,"Ex-rate",21e3]).eachCell((function(e,t){e.font={size:8,bold:!0},e.numFmt="#,##0_);(#,##0)"})),i.addRow([null,"VND",21e3*this.calculateTotal(e,9),"In word: "+this.commonService.inWords(23e3*this.calculateTotal(e,9))]).eachCell((function(e,t){e.font={size:8,bold:!0},e.numFmt="#,##0_);(#,##0)"})),i.getColumn(1).width=5,i.getColumn(2).width=9,i.getColumn(3).width=17,i.getColumn(4).width=25,i.getColumn(5).width=11,i.getColumn(6).width=8,i.getColumn(7).width=8,i.getColumn(8).width=12,i.getColumn(9).width=12,i.getColumn(10).width=12,i.getColumn(11).width=12,i.getColumn(12).width=12,i.getColumn(13).width=11,r.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(H.saveAs)(t,"soa_"+n.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")}))}},{key:"calculateTotal",value:function(e,t){return e.map((function(e){return e[t]})).reduce((function(e,t){return e+(t||0)}),0)}},{key:"buildExcelData",value:function(e){var t=this,n=[],r=[];e.map((function(e,i){["20DC","40HC","Spt"].map((function(i){if(e[i]||"Spt"==i){var o=[],a=e.bill+(i.includes("20")?"-20'":i.includes("40")?"-40'":"Spt")+"-"+(e[i]?e[i]:"");o.push(a),0==n.length&&r.push({header:"KEY",width:24}),o.push(e.vessel_full_name),0==n.length&&r.push({header:"VOY NO.",width:24}),o.push(t.datePipe.transform(e.depart_time,"MM/dd/yyyy")),0==n.length&&r.push({header:"ETD",width:24}),o.push(e.bill),0==n.length&&r.push({header:"BILL",width:18}),t.arrType.map((function(t){o.push(i==t?e[t]:null),0==n.length&&r.push({header:t,width:6})}));var c=0,l=i.includes("20")?"20":i.includes("40")?"40":i,s=e.revenueNN.find((function(e){return e.price_code=="OF"+l}));s?(c+=s.amount*s.volume,o.push(s.amount*s.volume)):o.push(null),0==n.length&&r.push({header:"PP OF",width:12}),(s=e.revenueVN.find((function(e){return e.price_code=="OF"+l})))?(c+=s.amount*s.volume,o.push(s.amount*s.volume)):o.push(null),0==n.length&&r.push({header:"CL OF",width:12}),(s=e.revenueNN.find((function(e){return e.price_code=="LTHC"+l})))?(c+=s.amount*s.volume,o.push(s.amount*s.volume)):o.push(null),0==n.length&&r.push({header:"LTHC",width:12}),(s=e.revenueNN.find((function(e){return e.price_code=="RRC"+l})))?(c+=s.amount*s.volume,o.push(s.amount*s.volume)):o.push(null),0==n.length&&r.push({header:"RRC",width:12}),(s=e.revenueNN.find((function(e){return e.price_code=="ARC"+l})))?(c+=s.amount*s.volume,o.push(s.amount*s.volume)):o.push(null),0==n.length&&r.push({header:"ARC",width:12});var b=0;"Spt"==l?(e.revenueNN.map((function(e){e.unit_code.includes("20")||e.unit_code.includes("40")||(b+=e.amount*e.volume)})),o.push(b)):o.push(null),0==n.length&&r.push({header:"OTHER",width:12}),o.push(c+b),0==n.length&&r.push({header:"TOTAL REV",width:12}),n.push(o)}}))})),this.exportExcel(n,r)}},{key:"exportExcel",value:function(e,t){var n=this,r=new Y.Workbook,i=r.addWorksheet("BILL");i.addRow([" "]),i.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},i.addRow(["EXPORT "+this.datePipe.transform(new Date(this.currenSearch.formSearch.date_from),"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),i.getRow(2).font={size:18,bold:!0,italic:!1},i.addRow([]);var o=t.map((function(e){return e.header}));i.addRow(o).eachCell((function(e,t){e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.font={size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})),e.map((function(e){for(var t=i.addRow(e),n=e.length,r=1;r<=n;r++)t.getCell(r).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.getCell(r).font={size:8,bold:!1},t.getCell(r).alignment={vertical:"middle",horizontal:"center",wrapText:!0}}));for(var a=t.map((function(e){return e.width})),c=0;c<a.length;c++)i.getColumn(c+1).width=a[c];r.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(H.saveAs)(t,"soa_"+n.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")}))}}]),e}()).\u0275fac=function(e){return new(e||r)(P.bc(E.a),P.bc(q.a),P.bc(U.f),P.bc(o.a),P.bc(G.a))},r.\u0275prov=P.Nb({token:r,factory:r.\u0275fac}),r),K=n("B9zo"),Z=n("fE3o"),ee=n("3Pt+"),te=n("XiUz"),ne=n("EwFO"),re=((i=function(){function e(t,n){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.height=560,this.changeSetting=new P.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"initForm",value:function(){return this.formBuilder.group({column:this.formBuilder.array([])})}},{key:"addColumn",value:function(e){var t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}},{key:"checkAll",value:function(){var e=this;this.displayedColumns.map((function(t,n){e.form.controls.column.controls[n].controls[t].setValue(!0)}))}},{key:"toggleCardCover",value:function(){}},{key:"toggleSubscription",value:function(){}},{key:"columnAdd",get:function(){return this.form.get("column")}}]),e}()).\u0275fac=function(e){return new(e||i)(P.Rb(ee.d),P.Rb(G.a))},i.\u0275cmp=P.Lb({type:i,selectors:[["report-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"div",2),P.Xb(3,"div"),P.Lc(4,"Settings"),P.Wb(),P.Wb(),P.Wb(),P.Xb(5,"div",3),P.Xb(6,"form",4),P.Xb(7,"div",5),P.Xb(8,"h2"),P.Lc(9,"Column"),P.Wb(),P.Xb(10,"div",6),P.Xb(11,"button",7),P.fc("click",(function(e){return t.checkAll()})),P.Lc(12,"All column"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(5),P.Ic("height",t.height,"px"),P.Db(1),P.pc("formGroup",t.form))},directives:[te.d,te.c,ne.a,ee.A,ee.q,ee.h,b.b],styles:["report-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}report-setting .navbar-scroll-container{background:#fff!important}report-setting .navbar-scroll-container .navbar-content{padding-top:0}report-setting .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}report-setting .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}report-setting .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:F.a}}),i),ie=n("0JVi"),oe=n("znSr"),ae=n("rPBI");function ce(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",12),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.changeScreen(!0)})),P.Xb(1,"mat-icon"),P.Lc(2,"flip_to_front"),P.Wb(),P.Wb()}}function le(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",12),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.changeScreen(!1)})),P.Xb(1,"mat-icon"),P.Lc(2,"flip_to_back"),P.Wb(),P.Wb()}}var se,be=((se=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=n,this.fullScreen=!1,this.toggleSidebar=new P.o,this.showHideBar=new P.o,this.refreshPage=new P.o,this.searchFilter=new P.o,this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||se)(P.Rb(G.a),P.Rb(ie.b))},se.\u0275cmp=P.Lb({type:se,selectors:[["report-header"]],inputs:{voyageId:"voyageId",customerId:"customerId",sidebarName:"sidebarName",searchText:"searchText"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:49,vars:8,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[3,"searchText","inputValue"],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(P.Xb(0,"mat-toolbar",0),P.Xb(1,"div",1),P.Xb(2,"div",2),P.Xb(3,"div",3),P.Xb(4,"button",4),P.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),P.Xb(5,"mat-icon"),P.Lc(6,"menu"),P.Wb(),P.Wb(),P.Xb(7,"button",5),P.fc("click",(function(e){return t.showHideBar.emit()})),P.Xb(8,"mat-icon"),P.Lc(9,"menu"),P.Wb(),P.Wb(),P.Wb(),P.Xb(10,"button",6),P.Xb(11,"span",7),P.Lc(12,"SOA"),P.Wb(),P.Xb(13,"mat-icon",8),P.Lc(14,"equalizer"),P.Wb(),P.Wb(),P.Xb(15,"button",6),P.Xb(16,"span",7),P.Lc(17,"Vessel"),P.Wb(),P.Xb(18,"mat-icon",8),P.Lc(19,"dashboard"),P.Wb(),P.Wb(),P.Xb(20,"button",6),P.Xb(21,"span",7),P.Lc(22,"Add info"),P.Wb(),P.Xb(23,"mat-icon",8),P.Lc(24,"equalizer"),P.Wb(),P.Wb(),P.Xb(25,"button",6),P.Xb(26,"span",7),P.Lc(27,"Bill"),P.Wb(),P.Xb(28,"mat-icon",8),P.Lc(29,"dashboard"),P.Wb(),P.Wb(),P.Xb(30,"button",6),P.Xb(31,"span",7),P.Lc(32,"Chart"),P.Wb(),P.Xb(33,"mat-icon",8),P.Lc(34,"equalizer"),P.Wb(),P.Wb(),P.Wb(),P.Xb(35,"div",9),P.Xb(36,"filter-search-bar",10),P.fc("inputValue",(function(e){return t.searchFilter.emit(e)})),P.Wb(),P.Sb(37,"div",11),P.Xb(38,"button",12),P.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),P.Xb(39,"mat-icon",13),P.Lc(40,"refresh"),P.Wb(),P.Wb(),P.Sb(41,"div",11),P.Jc(42,ce,3,0,"button",14),P.Jc(43,le,3,0,"button",14),P.Sb(44,"div",11),P.Xb(45,"button",12),P.fc("click",(function(e){return t.toggleSidebar.emit("report-setting")})),P.Xb(46,"mat-icon"),P.Lc(47,"settings"),P.Wb(),P.Wb(),P.Sb(48,"div",11),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(10),P.pc("routerLink","/apps/workflow/report/soa/"+(t.voyageId?"voyage/"+t.voyageId+"/":"")+(t.customerId?"customer/"+t.customerId+"/":"")+"paydate"),P.Db(5),P.pc("routerLink","/apps/workflow/report/soa/"+(t.voyageId?"voyage/"+t.voyageId+"/":"")+(t.customerId?"customer/"+t.customerId+"/":"")+"vessel"),P.Db(5),P.pc("routerLink","/apps/workflow/report/soa/"+(t.voyageId?"voyage/"+t.voyageId+"/":"")+(t.customerId?"customer/"+t.customerId+"/":"")+"add-info"),P.Db(5),P.pc("routerLink","/apps/workflow/report/soa/"+(t.voyageId?"voyage/"+t.voyageId+"/":"")+(t.customerId?"customer/"+t.customerId+"/":"")+"bill"),P.Db(5),P.pc("routerLink","/apps/workflow/report/soa/"+(t.voyageId?"voyage/"+t.voyageId+"/":"")+(t.customerId?"customer/"+t.customerId+"/":"")+"chart"),P.Db(6),P.pc("searchText",t.searchText),P.Db(6),P.pc("ngIf",!t.fullScreen),P.Db(1),P.pc("ngIf",t.fullScreen))},directives:[x.a,te.b,te.e,te.d,te.c,b.b,oe.b,d.a,o.i,o.h,ae.a,U.t],styles:["report-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}report-header.below{z-index:2}report-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}report-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}report-header .logo .logo-icon{width:38px}report-header .chat-panel-toggle-button,report-header .language-button,report-header .quick-panel-toggle-button,report-header .user-button,report-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){report-header .chat-panel-toggle-button,report-header .language-button,report-header .quick-panel-toggle-button,report-header .user-button,report-header fuse-search-bar{height:56px}}report-header .navbar-toggle-button{min-width:56px;height:56px}report-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){report-header .toolbar-separator{height:56px}}"],encapsulation:2}),se),pe=n("JX91"),ue=n("lJxs"),de=["formDirective"],fe=["allSelected"];function he(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.short_name," ")}}function me(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.short_name," ")}}function ge(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.short_name," ")}}function ve(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.short_name," ")}}function ye(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.short_name," ")}}function xe(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.name," ")}}function ke(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-option",31),P.fc("click",(function(e){P.Bc(n),P.jc();var t=P.xc(72);return P.jc().tosslePerOne(t.viewValue)})),P.Lc(1),P.Wb()}if(2&e){var r=t.$implicit;P.pc("value",r.id),P.Db(1),P.Mc(r.code)}}function we(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.code," ")}}function De(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n.id),P.Db(1),P.Nc(" ",n.name," ")}}function Ce(e,t){if(1&e&&(P.Xb(0,"mat-option",47),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.pc("value",n),P.Db(1),P.Mc(n)}}var Se=function(e){return{"accent-600-fg":e}},_e=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};function We(e,t){if(1&e){var n=P.Yb();P.Xb(0,"form",2,3),P.fc("keydown.enter",(function(e){return P.Bc(n),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){P.Bc(n);var t=P.jc();return t.onSearchFormSubmit(t.form)})),P.Xb(2,"div",4),P.Xb(3,"div",5),P.Xb(4,"button",6),P.Lc(5," Submit "),P.Wb(),P.Xb(6,"button",7),P.fc("click",(function(e){return P.Bc(n),P.jc().clearForm()})),P.Lc(7," Clear "),P.Wb(),P.Wb(),P.Wb(),P.Xb(8,"div",8),P.Xb(9,"div",9),P.Xb(10,"div",10),P.Xb(11,"div",11),P.Xb(12,"div",12),P.Xb(13,"mat-form-field",13),P.Xb(14,"mat-label"),P.Lc(15,"Pay party"),P.Wb(),P.Sb(16,"input",14),P.Xb(17,"mat-autocomplete",15,16),P.Jc(19,he,2,2,"mat-option",17),P.kc(20,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(21,"div",18),P.Xb(22,"mat-form-field",13),P.Xb(23,"mat-label"),P.Lc(24,"Issue Party"),P.Wb(),P.Sb(25,"input",19),P.Xb(26,"mat-autocomplete",15,20),P.Jc(28,me,2,2,"mat-option",17),P.kc(29,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(30,"div",18),P.Xb(31,"mat-form-field",13),P.Xb(32,"mat-label",21),P.Lc(33,"Customer"),P.Wb(),P.Sb(34,"input",22),P.Xb(35,"mat-autocomplete",15,23),P.Jc(37,ge,2,2,"mat-option",17),P.kc(38,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(39,"div",18),P.Xb(40,"mat-form-field",13),P.Xb(41,"mat-label"),P.Lc(42,"Load Agent"),P.Wb(),P.Sb(43,"input",24),P.Xb(44,"mat-autocomplete",15,25),P.Jc(46,ve,2,2,"mat-option",17),P.kc(47,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(48,"div",18),P.Xb(49,"mat-form-field",13),P.Xb(50,"mat-label"),P.Lc(51,"Dest Agent"),P.Wb(),P.Sb(52,"input",26),P.Xb(53,"mat-autocomplete",15,27),P.Jc(55,ye,2,2,"mat-option",17),P.kc(56,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(57,"div",18),P.Xb(58,"mat-form-field",13),P.Xb(59,"mat-label",21),P.Lc(60,"Voyage"),P.Wb(),P.Sb(61,"input",28),P.Xb(62,"mat-autocomplete",15,29),P.Jc(64,xe,2,2,"mat-option",17),P.kc(65,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(66,"div",18),P.Xb(67,"mat-form-field",13),P.Xb(68,"mat-label"),P.Lc(69,"Price"),P.Wb(),P.Xb(70,"mat-select",30),P.Xb(71,"mat-option",31,32),P.fc("click",(function(e){return P.Bc(n),P.jc().toggleAllSelection()})),P.Lc(73),P.Wb(),P.Jc(74,ke,2,2,"mat-option",33),P.Wb(),P.Wb(),P.Wb(),P.Xb(75,"div",18),P.Xb(76,"mat-form-field",13),P.Xb(77,"mat-label"),P.Lc(78,"Currency"),P.Wb(),P.Xb(79,"mat-select",34),P.Jc(80,we,2,2,"mat-option",17),P.Wb(),P.Wb(),P.Wb(),P.Xb(81,"div",18),P.Xb(82,"mat-form-field",13),P.Xb(83,"mat-label"),P.Lc(84,"Payment center"),P.Wb(),P.Sb(85,"input",35),P.Xb(86,"mat-autocomplete",15,36),P.Jc(88,De,2,2,"mat-option",17),P.kc(89,"async"),P.Wb(),P.Wb(),P.Wb(),P.Xb(90,"div",37),P.Xb(91,"h2"),P.Lc(92,"Time type"),P.Wb(),P.Xb(93,"mat-radio-group",38),P.Xb(94,"mat-radio-button",39),P.Lc(95,"ETD"),P.Wb(),P.Xb(96,"mat-radio-button",39),P.Lc(97,"ETA"),P.Wb(),P.Wb(),P.Wb(),P.Xb(98,"div",18),P.Xb(99,"mat-form-field",13),P.Xb(100,"mat-label"),P.Lc(101),P.Wb(),P.Xb(102,"input",40),P.fc("change",(function(e){return P.Bc(n),P.jc().commonService.setDateStr(e)})),P.Wb(),P.Sb(103,"mat-datepicker-toggle",41),P.Sb(104,"mat-datepicker",null,42),P.Wb(),P.Wb(),P.Xb(106,"div",18),P.Xb(107,"mat-form-field",13),P.Xb(108,"mat-label"),P.Lc(109),P.Wb(),P.Xb(110,"input",43),P.fc("change",(function(e){return P.Bc(n),P.jc().commonService.setDateStr(e)})),P.Wb(),P.Sb(111,"mat-datepicker-toggle",41),P.Sb(112,"mat-datepicker",null,44),P.Wb(),P.Wb(),P.Xb(114,"div",18),P.Xb(115,"mat-form-field",13),P.Xb(116,"mat-label"),P.Lc(117,"Month"),P.Wb(),P.Xb(118,"mat-select",45),P.fc("selectionChange",(function(e){return P.Bc(n),P.jc().getMonthTime("M")})),P.Jc(119,Ce,2,2,"mat-option",17),P.Wb(),P.Wb(),P.Wb(),P.Xb(120,"div",18),P.Xb(121,"mat-form-field",13),P.Xb(122,"mat-label"),P.Lc(123,"Year"),P.Wb(),P.Xb(124,"mat-select",46),P.fc("selectionChange",(function(e){return P.Bc(n),P.jc().getMonthTime("Y")})),P.Xb(125,"mat-option",47),P.Lc(126),P.Wb(),P.Xb(127,"mat-option",47),P.Lc(128),P.Wb(),P.Xb(129,"mat-option",47),P.Lc(130),P.Wb(),P.Xb(131,"mat-option",47),P.Lc(132),P.Wb(),P.Xb(133,"mat-option",47),P.Lc(134),P.Wb(),P.Xb(135,"mat-option",47),P.Lc(136),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()}if(2&e){var r=P.xc(18),i=P.xc(27),o=P.xc(36),a=P.xc(45),c=P.xc(54),l=P.xc(63),s=P.xc(87),b=P.xc(105),p=P.xc(113),u=P.jc();P.pc("formGroup",u.form),P.Db(8),P.Ic("height",u.height,"px"),P.Db(8),P.pc("matAutocomplete",r),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.customer)),P.Db(2),P.pc("ngForOf",P.lc(20,53,u.filteredCustomer)),P.Db(6),P.pc("matAutocomplete",i),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.supplier)),P.Db(2),P.pc("ngForOf",P.lc(29,55,u.filteredSupplier)),P.Db(4),P.pc("ngClass",P.rc(67,Se,u.customerId)),P.Db(2),P.pc("matAutocomplete",o)("readonly",!!u.customerId),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.customer)),P.Db(2),P.pc("ngForOf",P.lc(38,57,u.filteredCustomer2)),P.Db(6),P.pc("matAutocomplete",a),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.agent)),P.Db(2),P.pc("ngForOf",P.lc(47,59,u.filteredAgent2)),P.Db(6),P.pc("matAutocomplete",c),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"short_name",u.agent)),P.Db(2),P.pc("ngForOf",P.lc(56,61,u.filteredAgent)),P.Db(4),P.pc("ngClass",P.rc(69,Se,u.voyageId)),P.Db(2),P.pc("matAutocomplete",l)("readonly",!!u.voyageId),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"name",u.voyage)),P.Db(2),P.pc("ngForOf",P.lc(65,63,u.filteredVoyage)),P.Db(7),P.pc("value",0),P.Db(2),P.Nc("All of ",u.price.length," price"),P.Db(1),P.pc("ngForOf",u.price),P.Db(6),P.pc("ngForOf",u.currency),P.Db(5),P.pc("matAutocomplete",s),P.Db(1),P.pc("displayWith",u.commonService.displayFn.bind(u,"name",u.country)),P.Db(2),P.pc("ngForOf",P.lc(89,65,u.filteredCountry)),P.Db(6),P.pc("value","ETD"),P.Db(2),P.pc("value","ETA"),P.Db(5),P.Nc("",u.form.value.type," from"),P.Db(1),P.pc("matDatepicker",b),P.Db(1),P.pc("for",b),P.Db(6),P.Nc("",u.form.value.type," to"),P.Db(1),P.pc("matDatepicker",p),P.Db(1),P.pc("for",p),P.Db(8),P.pc("ngForOf",P.qc(71,_e)),P.Db(6),P.pc("value",u.year-4),P.Db(1),P.Mc(u.year-4),P.Db(1),P.pc("value",u.year-3),P.Db(1),P.Mc(u.year-3),P.Db(1),P.pc("value",u.year-2),P.Db(1),P.Mc(u.year-2),P.Db(1),P.pc("value",u.year-1),P.Db(1),P.Mc(u.year-1),P.Db(1),P.pc("value",u.year),P.Db(1),P.Mc(u.year),P.Db(1),P.pc("value",u.year+1),P.Db(1),P.Mc(u.year+1)}}var Xe=function(e){return{"mt-8":e}},Oe=function(e){return{"red-600-fg":e}};function Ne(e,t){if(1&e&&(P.Xb(0,"div",67),P.Xb(1,"div",55),P.Lc(2),P.kc(3,"number"),P.Wb(),P.Wb()),2&e){var n=t.$implicit,r=t.index,i=P.jc(2);P.pc("ngClass",P.rc(7,Xe,0==r)),P.Db(1),P.pc("ngClass",P.rc(9,Oe,i.total.revenue[n]-i.total.cost[n]<0)),P.Db(1),P.Oc(" ",P.mc(3,4,i.total.revenue[n]-i.total.cost[n],"VND"!=n?"1.2-2":"1.0-0")," ",n," ")}}function Le(e,t){1&e&&P.Sb(0,"div",68)}function Ie(e,t){if(1&e){var n=P.Yb();P.Xb(0,"form",48),P.fc("keydown.enter",(function(e){return P.Bc(n),"TEXTAREA"==e.target.tagName})),P.Xb(1,"div",4),P.Xb(2,"div",5),P.Xb(3,"button",49),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return t.updateSelectItem.emit(t.formEdit.value)})),P.Lc(4," Save "),P.Wb(),P.Xb(5,"button",7),P.fc("click",(function(e){return P.Bc(n),P.jc().typeChange.emit("form")})),P.Lc(6," Search "),P.Wb(),P.Wb(),P.Wb(),P.Xb(7,"div",8),P.Xb(8,"div",9),P.Xb(9,"div",50),P.Xb(10,"div",11),P.Xb(11,"div",51),P.Xb(12,"h2"),P.Lc(13,"Total"),P.Wb(),P.Jc(14,Ne,4,11,"div",52),P.Jc(15,Le,1,0,"div",53),P.Xb(16,"div",54),P.Xb(17,"div",55),P.Lc(18),P.kc(19,"number"),P.Wb(),P.Wb(),P.Wb(),P.Xb(20,"div",18),P.Xb(21,"mat-form-field",56),P.Xb(22,"mat-label"),P.Lc(23,"Debit"),P.Wb(),P.Sb(24,"input",57),P.Xb(25,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("debit")})),P.Wb(),P.Wb(),P.Wb(),P.Xb(26,"div",18),P.Xb(27,"mat-form-field",56),P.Xb(28,"mat-label"),P.Lc(29,"Invoice number"),P.Wb(),P.Sb(30,"input",59),P.Xb(31,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("inv_number")})),P.Wb(),P.Wb(),P.Wb(),P.Xb(32,"div",18),P.Xb(33,"mat-form-field",56),P.Xb(34,"mat-label"),P.Lc(35,"Bank ref"),P.Wb(),P.Sb(36,"input",60),P.Xb(37,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("bank_ref")})),P.Wb(),P.Wb(),P.Wb(),P.Xb(38,"div",18),P.Xb(39,"mat-form-field",56),P.Xb(40,"mat-label"),P.Lc(41,"Issue date"),P.Wb(),P.Xb(42,"input",61),P.fc("change",(function(e){return P.Bc(n),P.jc().commonService.setDateStr(e)})),P.Wb(),P.Sb(43,"mat-datepicker-toggle",41),P.Sb(44,"mat-datepicker",null,62),P.Xb(46,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("issue_date")})),P.Wb(),P.Wb(),P.Wb(),P.Xb(47,"div",18),P.Xb(48,"mat-form-field",56),P.Xb(49,"mat-label"),P.Lc(50,"Pay date"),P.Wb(),P.Xb(51,"input",63),P.fc("change",(function(e){return P.Bc(n),P.jc().commonService.setDateStr(e)})),P.Wb(),P.Sb(52,"mat-datepicker-toggle",41),P.Sb(53,"mat-datepicker",null,64),P.Xb(55,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("pay_date")})),P.Wb(),P.Wb(),P.Wb(),P.Xb(56,"div",18),P.Xb(57,"mat-form-field",56),P.Xb(58,"mat-label"),P.Lc(59,"Exrate"),P.Wb(),P.Sb(60,"input",65),P.Xb(61,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("ex_rate")})),P.Wb(),P.Wb(),P.Wb(),P.Xb(62,"div",18),P.Xb(63,"mat-form-field",56),P.Xb(64,"mat-label"),P.Lc(65,"Info"),P.Wb(),P.Sb(66,"input",66),P.Xb(67,"mat-checkbox",58),P.fc("change",(function(e){return P.Bc(n),P.jc().setDisabled("info")})),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()}if(2&e){var r=P.xc(45),i=P.xc(54),o=P.jc();P.pc("formGroup",o.formEdit),P.Db(3),P.pc("disabled",0==o.selected.length),P.Db(4),P.Ic("height",o.height,"px"),P.Db(7),P.pc("ngForOf",o.total.currency),P.Db(1),P.pc("ngIf",o.total.currency.length>0),P.Db(1),P.pc("ngClass",P.rc(23,Xe,0==o.total.currency.length)),P.Db(1),P.pc("ngClass",P.rc(25,Oe,o.total.VND<0)),P.Db(1),P.Nc(" ",P.mc(19,20,o.total.VND,"1.0-0")," Ex VND "),P.Db(7),P.pc("checked",o.check.debit),P.Db(6),P.pc("checked",o.check.inv_number),P.Db(6),P.pc("checked",o.check.bank_ref),P.Db(5),P.pc("matDatepicker",r),P.Db(1),P.pc("for",r),P.Db(3),P.pc("checked",o.check.issue_date),P.Db(5),P.pc("matDatepicker",i),P.Db(1),P.pc("for",i),P.Db(3),P.pc("checked",o.check.pay_date),P.Db(6),P.pc("checked",o.check.ex_rate),P.Db(6),P.pc("checked",o.check.info)}}var Te,Ve=((Te=function(){function e(t,n,r,i,o,a){_classCallCheck(this,e),this.formBuilder=t,this.authService=n,this.commonService=r,this.router=i,this.datePipe=o,this.route=a,this.fitlerShipment=new P.o,this.typeChange=new P.o,this.updateSelectItem=new P.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({pay_party:[null],issue_party:[null],customer:[null],load_agent:[null],agent:[null],voyage:[null],price:[null],currency:[null],payment_center:[null],date_from:[null],date_to:[null],month:[null],year:[null],type:["ETD"]}),this.formEdit=this.formBuilder.group({debit:[{value:null,disabled:!0}],inv_number:[{value:null,disabled:!0}],bank_ref:[{value:null,disabled:!0}],issue_date:[{value:null,disabled:!0}],pay_date:[{value:null,disabled:!0}],ex_rate:[{value:null,disabled:!0}],info:[{value:null,disabled:!0}]}),this.check={debit:!1,inv_number:!1,bank_ref:!1,issue_date:!1,pay_date:!1,ex_rate:!1,info:!1},this.now=new Date,this.height=560,this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12})),this.filteredCustomer=this.form.controls.pay_party.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.customer):[]}))),this.filteredSupplier=this.form.controls.issue_party.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.supplier):[]}))),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.customer):[]}))),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.short_name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"short_name",e.agent):[]}))),this.filteredAgent2=this.form.controls.load_agent.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.short_name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"short_name",e.agent):[]}))),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"name",e.voyage):[]}))),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.code:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"code",e.price):[]}))),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(pe.a)(""),Object(ue.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(ue.a)((function(t){return t?e.commonService.filterData(t,"name",e.country):[]}))),this.form.valueChanges.subscribe((function(e){}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleAllSelection",value:function(){this.form.controls.price.patchValue(this.allSelected.selected?[].concat(_toConsumableArray(this.price.map((function(e){return e.id}))),[0]):[])}},{key:"tosslePerOne",value:function(e){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.price.value&&this.form.controls.price.value.length==this.price.length&&this.allSelected.select()}},{key:"getMonthTime",value:function(e){var t,n,r=this.form.controls.year.value,i=this.form.controls.month.value,o=new Date,a=o.getMonth(),c=o.getFullYear();e&&"M"!=e?"Y"==e?(t=new Date(r,i?i-1:0,1),n=new Date(r,i||12,0)):"TM"==e?(this.form.controls.month.setValue(null),t=new Date(c,a,1),n=new Date(c,a+1,0)):"TY"==e&&(this.form.controls.month.setValue(null),t=new Date(c,0,1),n=new Date(c,12,0)):r&&(t=new Date(r,i?i-1:0,1),n=new Date(r,i||12,0)),this.form.controls.date_from.setValue(t),this.form.controls.date_to.setValue(n)}},{key:"clearForm",value:function(){this.searchNgForm.resetForm(),this.form.controls.type.setValue("ETD"),this.form.controls.customer.setValue(this.customerId),this.form.controls.voyage.setValue(this.voyageId)}},{key:"onSearchFormSubmit",value:function(e){"string"==typeof e.value.pay_party&&this.form.controls.pay_party.setValue(null),"string"==typeof e.value.issue_party&&this.form.controls.issue_party.setValue(null),"string"==typeof e.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof e.value.load_agent&&this.form.controls.load_agent.setValue(null),"string"==typeof e.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof e.value.voyage&&this.form.controls.voyage.setValue(null),"string"==typeof e.value.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof e.value.price&&this.form.controls.price.setValue(null);var t=JSON.parse(JSON.stringify(e.value));t.date_from&&(t.date_from=this.datePipe.transform(new Date(t.date_from),"MM/dd/yyyy")),t.date_to&&(t.date_to=this.datePipe.transform(new Date(t.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(t)}},{key:"setCheck",value:function(e){e.check=!e.check}},{key:"setDisabled",value:function(e){this.check[e]?this.formEdit.controls[e].disable():this.formEdit.controls[e].enable(),this.check[e]=!this.check[e]}}]),e}()).\u0275fac=function(e){return new(e||Te)(P.Rb(ee.d),P.Rb(G.a),P.Rb(q.a),P.Rb(o.g),P.Rb(U.f),P.Rb(o.a))},Te.\u0275cmp=P.Lb({type:Te,selectors:[["report-sidebar"]],viewQuery:function(e,t){var n;1&e&&(P.Sc(de,!0),P.Sc(fe,!0)),2&e&&(P.wc(n=P.gc())&&(t.searchNgForm=n.first),P.wc(n=P.gc())&&(t.allSelected=n.first))},inputs:{formSearch:"formSearch",customer:"customer",supplier:"supplier",agent:"agent",voyage:"voyage",price:"price",currency:"currency",country:"country",type:"type",selected:"selected",total:"total",voyageId:"voyageId",customerId:"customerId"},outputs:{fitlerShipment:"fitlerShipment",typeChange:"typeChange",updateSelectItem:"updateSelectItem"},decls:2,vars:2,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit",4,"ngIf"],["name","form",3,"formGroup","keydown.enter",4,"ngIf"],["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","pay_party","matInput","","formControlName","pay_party",3,"matAutocomplete"],[3,"displayWith"],["autoCus1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","issue_party","matInput","","formControlName","issue_party",3,"matAutocomplete"],["autoSup1","matAutocomplete"],[3,"ngClass"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete","readonly"],["autoCus2","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","load_agent",3,"matAutocomplete"],["autoSup3","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent",3,"matAutocomplete"],["autoSup2","matAutocomplete"],["inputCheck","","aria-label","voyage","matInput","","formControlName","voyage",3,"matAutocomplete","readonly"],["autoVoyage","matAutocomplete"],["formControlName","price","multiple",""],[3,"value","click"],["allSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","currency"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","type"],[1,"mb-12",3,"value"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],["name","form",3,"formGroup","keydown.enter"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"disabled","click"],[1,"nav","material2"],["fxFlex","100",1,"group","mt-24"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],["class","item-divider",4,"ngIf"],[1,"item","mb-8",3,"ngClass"],[1,"font-size-16","text-bold",3,"ngClass"],["appearance","outline",1,"padding-item","w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","debit"],["matPrefix","",3,"checked","change"],["inputCheck","","matInput","","formControlName","inv_number"],["inputCheck","","matInput","","formControlName","bank_ref"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["issue_date",""],["inputCheck","","matInput","","name","pay_date","formControlName","pay_date",3,"matDatepicker","change"],["pay_date",""],["type","number","inputCheck","","matInput","","formControlName","ex_rate"],["inputCheck","","matInput","","formControlName","info"],[1,"item",3,"ngClass"],[1,"item-divider"]],template:function(e,t){1&e&&(P.Jc(0,We,137,72,"form",0),P.Jc(1,Ie,68,27,"form",1)),2&e&&(P.pc("ngIf","form"==t.type),P.Db(1),P.pc("ngIf","edit"==t.type))},directives:[U.t,ee.A,ee.q,ee.h,te.d,te.c,b.b,te.b,ne.a,u.c,u.f,h.b,ee.b,l.c,ee.p,ee.g,l.a,U.s,U.q,oe.a,g.a,W.n,v.b,v.a,s.b,s.d,u.h,s.a,k.a,u.g,ee.u],pipes:[U.b,U.g],styles:["report-sidebar{border-right:1px solid #a3a3a3}report-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}report-sidebar .navbar-scroll-container{background:#fff!important}report-sidebar .navbar-scroll-container .navbar-content{padding-top:0}report-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Te);function Ae(e,t){if(1&e){var n=P.Yb();P.Xb(0,"fuse-sidebar",10),P.Xb(1,"report-sidebar",11),P.fc("fitlerShipment",(function(e){return P.Bc(n),P.jc().fitlerShipment(e)}))("typeChange",(function(e){return P.Bc(n),P.jc().typeChange(e)}))("updateSelectItem",(function(e){return P.Bc(n),P.jc().updateSelectItem(e)})),P.Wb(),P.Wb()}if(2&e){var r=P.jc();P.Db(1),P.pc("voyageId",r.voyageId)("customerId",r.customerId)("type",r.type)("selected",r.selected)("total",r.total)("formSearch",r.formSearch)("customer",r.customer)("supplier",r.supplier)("agent",r.agent)("voyage",r.voyage)("price",r.price)("currency",r.currency)("country",r.country)}}function je(e,t){1&e&&P.Sb(0,"router-outlet")}var Me,Re=((Me=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this._fuseSidebarService=t,this.reportService=n,this.router=r,this.authService=i,this.datePipe=o,this.sidebarPanel=!0,this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.type="form",this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchText=this.reportService.searchText,this.formSearch=this.reportService.currenSearch.formSearch,this.voyageId=this.reportService.voyageId,this.customerId=this.reportService.customerId,this.reportService.onVoyageChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){t?(e.formSearch.voyage=t,e.router.navigate(["/apps/workflow/report/soa/voyage/"+t+"/bill"])):(e.formSearch.voyage=null,e.router.navigate(["/apps/workflow/report/soa/voyage/bill"]))})),this.reportService.onCustomerChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){t?(e.formSearch.customer=t,e.router.navigate(["/apps/workflow/report/soa/customer/"+t+"/bill"])):(e.formSearch.customer=null,e.router.navigate(["/apps/workflow/report/soa/customer/bill"]))})),this.reportService.onSoaChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.voyage=e.reportService.sptVoyage,e.price=e.reportService.sptPrice})),this.reportService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.reportService.dataCustomer,e.supplier=e.reportService.dataSupplier})),this.reportService.onDataItemChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.agent=e.reportService.agent,e.commodity=e.reportService.commodity,e.packageType=e.reportService.packageType,e.currency=e.reportService.currency,e.country=e.reportService.country,e.depot=e.reportService.depot})),this.reportService.onTypeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){setTimeout((function(){e.type=t}),100)})),this.reportService.onUpdateAddInfoChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){t.length>0&&(e.selected=t[0],e.total=t[1])}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.reportService)}},{key:"fitlerShipment",value:function(e){var t=this;this.formSearch=e,this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(e).then((function(n){t.reportService.currenSearch.formSearch=e,t.authService.onRequestChanged.next(!1)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Submit fail")}))}},{key:"getReportData",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.formSearch).then((function(t){console.log(t),e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")}))}},{key:"searchFilter",value:function(e){this.reportService.onSearchTextChanged.next(e)}},{key:"typeChange",value:function(e){this.type=e}},{key:"updateSelectItem",value:function(e){var t=this,n=[];this.selected.map((function(e){n.push({id:e.id,type:e.type_name})})),e.issue_date&&(e.issue_date=this.datePipe.transform(e.issue_date,"yyyy-MM-dd")),e.pay_date&&(e.pay_date=this.datePipe.transform(e.pay_date,"yyyy-MM-dd")),e.update_by=this.authService.user,this.authService.onRequestChanged.next(!0),this.reportService.updateMultiShipmentItem([e,n]).then((function(e){console.log(e),t.getReportData()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Error load data")}))}}]),e}()).\u0275fac=function(e){return new(e||Me)(P.Rb(J.a),P.Rb(Q),P.Rb(o.g),P.Rb(G.a),P.Rb(U.f))},Me.\u0275cmp=P.Lb({type:Me,selectors:[["report"]],decls:10,vars:7,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","report-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","report-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"voyageId","customerId","searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content-card",2,"border","none","border-radius","0"],[1,"content","m-8"],[4,"ngIf"],["name","report-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"voyageId","customerId","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange","updateSelectItem"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Jc(1,Ae,2,13,"fuse-sidebar",1),P.Xb(2,"fuse-sidebar",2),P.Xb(3,"div",3),P.Sb(4,"report-setting",4),P.Wb(),P.Wb(),P.Xb(5,"div",5),P.Xb(6,"report-header",6),P.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("searchFilter",(function(e){return t.searchFilter(e)})),P.Wb(),P.Xb(7,"div",7),P.Xb(8,"div",8),P.Jc(9,je,1,0,"router-outlet",9),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(1),P.pc("ngIf",t.sidebarPanel),P.Db(3),P.pc("displayObject",t.displayObject),P.Db(2),P.pc("voyageId",t.voyageId)("customerId",t.customerId)("searchText",t.searchText)("sidebarName","report-sidebar"),P.Db(3),P.pc("ngIf",!0))},directives:[K.a,U.t,Z.a,re,be,Ve,o.l],styles:["report{width:100%}report .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){report .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}report .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){report .center .content-card report{border-right:0}report .center .content-card report,report .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}report .center .content-card shipment-details{display:none!important}report .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}report .center .content-card.current-shipment-selected .content report,report .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}report .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:F.a}}),Me),Fe=n("vxfF"),Pe=n("cfqv"),Je=function(e){return{hide:e}},Be=function(e,t){return{"total-eur":e,"total-usd":t}};function ze(e,t){if(1&e&&(P.Xb(0,"div",10),P.Xb(1,"span",11),P.Lc(2),P.Wb(),P.Xb(3,"span"),P.Lc(4),P.kc(5,"number"),P.Wb(),P.Wb()),2&e){var n=t.$implicit,r=t.index,i=P.jc();P.pc("ngClass",P.rc(7,Je,0==i.partner.balance_paydate[n])),P.Db(1),P.pc("ngClass",P.sc(9,Be,r%2==0,r%2==1)),P.Db(1),P.Mc(n),P.Db(2),P.Mc(P.mc(5,4,i.partner.balance_paydate[n]>=0?i.partner.balance_paydate[n]:0-i.partner.balance_paydate[n],"VND"==n?"1.0-0":"1.2-2"))}}function Ee(e,t){if(1&e&&(P.Xb(0,"span",12),P.kc(1,"date"),P.Lc(2),P.Wb()),2&e){var n=P.jc();P.pc("matTooltip",P.mc(1,4,n.partner.last_paydate,"MM/dd/yyyy"))("matTooltipPosition","right"),P.Db(2),P.Oc("Last paid : ",n.partner.last_pay," day",n.partner.last_pay>1?"s":"","")}}var $e,Ye=(($e=function(){function e(t,n){_classCallCheck(this,e),this._activatedRoute=t,this.router=n,this.more=!1,this.checkCurrency=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"goReportDetails",value:function(e){this.router.navigate(["/apps/workflow/report/details/"+e.type+"/"+e.id])}}]),e}()).\u0275fac=function(e){return new(e||$e)(P.Rb(o.a),P.Rb(o.g))},$e.\u0275cmp=P.Lb({type:$e,selectors:[["report-paydate-card"]],inputs:{partner:"partner",currency:"currency"},decls:12,vars:3,consts:[[1,"list-card-details"],[1,"list-card-name",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"list-card-badges"],["fxLayout","row wrap",1,"list-card-members"],["fxFlex","50","class","pr-8 pb-4 font-size-12","fxLayout","row","fxLayoutAlign","space-between center",3,"ngClass",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"list-card-footer"],["fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row","fxLayoutAlign","start center",1,"list-card-footer-item"],[1,"s-18"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["fxFlex","50","fxLayout","row","fxLayoutAlign","space-between center",1,"pr-8","pb-4","font-size-12",3,"ngClass"],[3,"ngClass"],[3,"matTooltip","matTooltipPosition"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"div",1),P.fc("click",(function(e){return t.goReportDetails(t.partner)})),P.Lc(2),P.Wb(),P.Sb(3,"div",2),P.Xb(4,"div",3),P.Jc(5,ze,6,12,"div",4),P.Wb(),P.Wb(),P.Xb(6,"div",5),P.Xb(7,"div",6),P.Xb(8,"span",7),P.Xb(9,"mat-icon",8),P.Lc(10,"comment"),P.Wb(),P.Wb(),P.Jc(11,Ee,3,7,"span",9),P.Wb(),P.Wb()),2&e&&(P.Db(2),P.Mc(t.partner.short_name),P.Db(3),P.pc("ngForOf",t.currency),P.Db(6),P.pc("ngIf",t.partner.last_pay))},directives:[te.d,te.c,U.s,d.a,U.t,te.b,U.q,oe.a,f.a],pipes:[U.g,U.f],styles:['report-paydate-card{position:relative;display:block;width:100%;margin:16px 0!important;border-radius:4px;border:1px solid;cursor:pointer}report-paydate-card .list-card-sort-handle{display:none;position:absolute;top:0;right:0;padding:4px;background:hsla(0,0%,100%,.8)}report-paydate-card .list-card-details{padding:16px 16px 0}report-paydate-card .list-card-details .list-card-labels{margin-bottom:6px}report-paydate-card .list-card-details .list-card-labels .list-card-label{width:32px;height:6px;border-radius:6px;margin:0 6px 6px 0}report-paydate-card .list-card-details .list-card-labels .label-chips{box-shadow:none;padding:0}report-paydate-card .list-card-details .list-card-labels .label-chips .label-chip{display:block}report-paydate-card .list-card-details .list-card-labels .label-chips .label-chip .chip-remove{cursor:pointer}report-paydate-card .list-card-details .list-card-labels .label-chips .label-chip.mat-standard-chip{border-radius:1px!important}report-paydate-card .list-card-details .list-card-name{font-size:14px;font-weight:600;margin-bottom:12px}report-paydate-card .list-card-details .list-card-badges{margin-bottom:12px}report-paydate-card .list-card-details .list-card-badges .badge{padding:4px;border-radius:2px}report-paydate-card .list-card-details .list-card-badges .badge mat-icon{margin-right:4px}report-paydate-card .list-card-details .list-card-members{margin-bottom:12px}report-paydate-card .list-card-details .list-card-members .total-eur{padding:0 8px;background:#4caf50;color:#fff}report-paydate-card .list-card-details .list-card-members .total-usd{padding:0 8px;background:#b3e5fc}report-paydate-card .list-card-details .list-card-members .total-vnd{padding:0 8px;background:#ffecb3}report-paydate-card .list-card-details .list-card-members .total-other{padding:0 8px;background:#ef5350;color:#fff}report-paydate-card .list-card-details .list-card-members .table-balance{font-size:12px!important}report-paydate-card .list-card-details .list-card-members .table-balance td,report-paydate-card .list-card-details .list-card-members .table-balance th{padding:4px!important}report-paydate-card .list-card-details .list-card-members .table-balance .sticky-col{width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#ffcf9c;z-index:20}report-paydate-card .list-card-details .list-card-members .list-card-member{margin-right:8px}report-paydate-card .list-card-details .list-card-members .list-card-member .list-card-member-avatar{border-radius:50%;width:32px;height:32px}report-paydate-card .list-card-footer{border-top:1px solid;padding:0 16px}report-paydate-card .list-card-footer .list-card-footer-item{height:48px;margin-right:12px}report-paydate-card .list-card-footer .list-card-footer-item .value{padding-left:8px}report-paydate-card .list-card-footer .list-card-footer-item:last-of-type{margin-right:0}report-paydate-card .ngx-dnd-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}report-paydate-card.gu-mirror{position:fixed!important;margin:0!important;z-index:9999!important;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80);box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}report-paydate-card.gu-hide{display:none!important}report-paydate-card.gu-unselectable{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}report-paydate-card.gu-transit{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}'],encapsulation:2}),$e);function He(e,t){if(1&e&&(P.Xb(0,"div"),P.Sb(1,"report-paydate-card",9),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("partner",n)("currency",r.currency)}}function qe(e,t){if(1&e&&(P.Xb(0,"div",11),P.Xb(1,"span",12),P.Lc(2),P.Wb(),P.Xb(3,"span",13),P.Lc(4),P.kc(5,"number"),P.Wb(),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(2),P.Mc(n),P.Db(2),P.Mc(P.mc(5,2,r.list.totalSoa[n]>0?r.list.totalSoa[n]:0-r.list.totalSoa[n],"VND"!=n?"1.2-2":"1.0-0"))}}function Ue(e,t){if(1&e&&(P.Xb(0,"div"),P.Jc(1,qe,6,5,"div",10),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.list.totalSoa[n]&&0!=r.list.totalSoa[n])}}var Ge,Qe=((Ge=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Ge)},Ge.\u0275cmp=P.Lb({type:Ge,selectors:[["report-paydate-list"]],inputs:{list:"list",type:"type",currency:"currency"},decls:10,vars:4,consts:[["fxLayout","column",1,"list"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center",1,"list-header"],["fxFlex","1 0 auto",1,"list-header-name"],["itemSize","202","fxLayout","column",1,"list-content"],[1,"list-cards"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"list-footer","pt-8","pb-8"],[1,"add-card-button"],[4,"ngFor","ngForOf"],[1,"report-paydate-card",3,"partner","currency"],["fxLayout","row","fxLayoutAlign","space-between start","class","mb-4",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start",1,"mb-4"],["fxFlex","25",1,"total-eur"],["fxFlex","75",1,"text-right"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"div",2),P.Lc(3),P.Wb(),P.Wb(),P.Xb(4,"cdk-virtual-scroll-viewport",3),P.Xb(5,"div",4),P.Jc(6,He,2,2,"div",5),P.Wb(),P.Wb(),P.Xb(7,"div",6),P.Xb(8,"div",7),P.Jc(9,Ue,2,1,"div",8),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(3),P.Oc(" ",t.list.name,"(",t.list.data.length,") "),P.Db(3),P.pc("cdkVirtualForOf",t.list.data),P.Db(3),P.pc("ngForOf",t.currency))},directives:[te.d,te.b,te.c,Fe.e,Fe.a,Fe.d,U.s,Ye,U.t],pipes:[U.g],styles:[".report-paydate-list{width:344px;min-width:344px;max-width:344px;padding-right:24px!important;height:100%}.report-paydate-list .list{max-height:100%;border-radius:2px;-webkit-transition:box-shadow .15s ease;transition:box-shadow .15s ease}.report-paydate-list .list .list-header{height:64px;min-height:64px;padding:0 8px 0 16px;border-bottom:1px solid}.report-paydate-list .list .list-header .list-header-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;cursor:pointer}@media screen and (max-width:959px){.report-paydate-list .list .list-header{height:48px;min-height:48px}}.report-paydate-list .list .list-content{position:relative;height:1010px;overflow:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.report-paydate-list .list .list-content .list-cards{position:relative;min-height:32px}.report-paydate-list .list .list-footer{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 0 auto;border-top:1px solid}.report-paydate-list .list .list-footer .add-card-button{position:relative;height:80px;overflow:auto;padding:0 16px;text-align:left;text-transform:none;font-weight:600;font-size:14px;cursor:pointer;border-radius:2px}.report-paydate-list .list .list-footer .add-card-button .total-eur{padding:0 8px;background:#4caf50;color:#fff}.report-paydate-list .list .list-footer .add-card-button mat-icon{margin-right:8px}.report-paydate-list .list .list-footer .add-card-button .table-balance{font-size:12px!important}.report-paydate-list .list .list-footer .add-card-button .table-balance td,.report-paydate-list .list .list-footer .add-card-button .table-balance th{padding:4px!important}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-eur,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-eur{padding:0 8px;background:#4caf50;color:#fff}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-usd,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-usd{padding:0 8px;background:#b3e5fc}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-vnd,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-vnd{padding:0 8px;background:#ffecb3}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-other,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-other{padding:0 8px;background:#ef5350;color:#fff}.report-paydate-list .list .list-footer .add-card-button .table-balance .sticky-col{width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#ffcf9c;z-index:20}"],encapsulation:2}),Ge),Ke=function(){return{duration:"350ms",x:"100%"}},Ze=function(e){return{value:"*",params:e}};function et(e,t){if(1&e&&P.Sb(0,"report-paydate-list",4),2&e){var n=t.$implicit,r=P.jc();P.pc("list",n)("type","Balance")("currency",r.currencies)("@animate",P.rc(5,Ze,P.qc(4,Ke)))}}var tt,nt=function(){return{value:"50"}},rt=((tt=function(){function e(t,n,r){_classCallCheck(this,e),this._activatedRoute=t,this.reportService=n,this.authService=r,this.height=560,this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.width<600?t.height-16:t.height-64-64-16})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){var n=t?64:0;e.height=e.authService.screenWidth<600?e.authService.screenHeight-16+n:e.authService.screenHeight-64-64-16+n})),this.reportService.onSoaChanged.subscribe((function(t){e.total=e.reportService.total,e.filterShipmentBalance=e.reportService.filterShipmentBalance,e.currencies=e.reportService.currencies,e.customer=e.reportService.customer,e.supplier=e.reportService.supplier}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||tt)(P.Rb(o.a),P.Rb(Q),P.Rb(G.a))},tt.\u0275cmp=P.Lb({type:tt,selectors:[["report-paydate"]],viewQuery:function(e,t){var n;1&e&&P.Sc(ne.a,!0),2&e&&P.wc(n=P.gc())&&(t.listScroll=n.first)},decls:5,vars:5,consts:[["id","board"],["fxFlex","",1,"board-content-wrapper"],["fxLayout","row",1,"board-content","ngx-dnd-container"],["class","report-paydate-list list-wrapper",3,"list","type","currency",4,"ngFor","ngForOf"],[1,"report-paydate-list","list-wrapper",3,"list","type","currency"]],template:function(e,t){1&e&&(P.Xb(0,"mat-sidenav-container"),P.Xb(1,"div",0),P.Xb(2,"div",1),P.Xb(3,"div",2),P.Jc(4,et,1,7,"report-paydate-list",3),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Ic("height",t.height,"px"),P.Db(3),P.pc("@animateStagger",P.qc(4,nt)),P.Db(1),P.pc("ngForOf",t.filterShipmentBalance))},directives:[_.a,te.b,te.d,U.s,Qe],styles:["report-paydate mat-sidenav-container{width:100%}report-paydate mat-sidenav-container #board{display:-webkit-box;display:flex;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;flex-direction:column!important;height:100%;background:#fff}report-paydate mat-sidenav-container #board .board-content-wrapper{position:relative;height:100%}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;overflow-y:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content .list-sortable-placeholder{background:rgba(0,0,0,.06);margin-right:24px}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content .list-wrapper{height:100%}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content .new-list-wrapper{width:344px;min-width:344px;max-width:344px;padding-right:24px}"],encapsulation:2,data:{animation:F.a}}),tt),it=n("Frtq");function ot(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.vesselOpen=!t.vesselOpen})),P.Lc(1,"add"),P.Wb()}}function at(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.vesselOpen=!t.vesselOpen})),P.Lc(1,"removed"),P.Wb()}}function ct(e,t){1&e&&(P.Xb(0,"th",23),P.Lc(1,"POL"),P.Wb())}function lt(e,t){1&e&&(P.Xb(0,"th",23),P.Lc(1,"POD"),P.Wb())}function st(e,t){if(1&e&&(P.Xb(0,"th",25),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.Db(1),P.Mc(n)}}function bt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,st,2,1,"th",24),P.Ub()),2&e){var n=P.jc();P.Db(1),P.pc("ngForOf",n.arrType)}}function pt(e,t){1&e&&(P.Xb(0,"th",26),P.Lc(1,"ETD"),P.Wb())}function ut(e,t){1&e&&(P.Xb(0,"th",26),P.Lc(1,"ETA"),P.Wb())}function dt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.shipmentOpen=!t.shipmentOpen})),P.Lc(1,"add"),P.Wb()}}function ft(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.shipmentOpen=!t.shipmentOpen})),P.Lc(1,"removed"),P.Wb()}}function ht(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Bill"),P.Wb())}function mt(e,t){if(1&e&&(P.Xb(0,"th",25),P.Lc(1),P.Wb()),2&e){var n=t.$implicit;P.Db(1),P.Mc(n)}}function gt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,mt,2,1,"th",24),P.Ub()),2&e){var n=P.jc();P.Db(1),P.pc("ngForOf",n.arrType)}}function vt(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Customer"),P.Wb())}function yt(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Agent"),P.Wb())}function xt(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Process"),P.Wb())}function kt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"add"),P.Wb()}}function wt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"removed"),P.Wb()}}function Dt(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb())}function Ct(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"add"),P.Wb()}}function St(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"removed"),P.Wb()}}function _t(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb())}function Wt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),P.Lc(1,"add"),P.Wb()}}function Xt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),P.Lc(1,"removed"),P.Wb()}}function Ot(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb())}function Nt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),P.Lc(1,"add"),P.Wb()}}function Lt(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),P.Lc(1,"removed"),P.Wb()}}function It(e,t){1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb())}function Tt(e,t){if(1&e&&(P.Xb(0,"td",23),P.Lc(1),P.Wb()),2&e){var n=P.jc(3);P.Eb("rowspan",n.shipments[n.key].shipment.length),P.Db(1),P.Mc(n.shipments[n.key].pol_name)}}function Vt(e,t){if(1&e&&(P.Xb(0,"td",23),P.Lc(1),P.Wb()),2&e){var n=P.jc(3);P.Eb("rowspan",n.shipments[n.key].shipment.length),P.Db(1),P.Mc(n.shipments[n.key].pod_name)}}function At(e,t){if(1&e&&(P.Xb(0,"td",25),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc(4);P.Eb("rowspan",r.shipments[r.key].shipment.length),P.Db(1),P.Mc(r.shipments[r.key][n])}}function jt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,At,2,2,"td",24),P.Ub()),2&e){var n=P.jc(3);P.Db(1),P.pc("ngForOf",n.arrType)}}function Mt(e,t){if(1&e&&(P.Xb(0,"td",26),P.Lc(1),P.kc(2,"date"),P.Wb()),2&e){var n=P.jc(3);P.Eb("rowspan",n.shipments[n.key].shipment.length),P.Db(1),P.Mc(P.mc(2,2,n.shipments[n.key].depart_time,"MM/dd/yyyy HH:mm"))}}function Rt(e,t){if(1&e&&(P.Xb(0,"td",26),P.Lc(1),P.kc(2,"date"),P.Wb()),2&e){var n=P.jc(3);P.Eb("rowspan",n.shipments[n.key].shipment.length),P.Db(1),P.Mc(P.mc(2,2,n.shipments[n.key].arrive_time,"MM/dd/yyyy HH:mm"))}}function Ft(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td"),P.Lc(2,"1"),P.Wb(),P.Xb(3,"td",32),P.Xb(4,"a"),P.Lc(5),P.Wb(),P.Wb(),P.Jc(6,Tt,2,2,"td",11),P.Jc(7,Vt,2,2,"td",11),P.Jc(8,jt,2,1,"ng-container",12),P.Jc(9,Mt,3,5,"td",13),P.Jc(10,Rt,3,5,"td",13),P.Ub()),2&e){var n=P.jc(2);P.Db(1),P.Eb("rowspan",n.shipments[n.key].shipment.length),P.Db(2),P.Eb("rowspan",n.shipments[n.key].shipment.length),P.Db(2),P.Mc(n.shipments[n.key].vessel_full_name),P.Db(1),P.pc("ngIf",n.vesselOpen),P.Db(1),P.pc("ngIf",n.vesselOpen),P.Db(1),P.pc("ngIf",n.vesselOpen),P.Db(1),P.pc("ngIf",n.vesselOpen),P.Db(1),P.pc("ngIf",n.vesselOpen)}}function Pt(e,t){if(1&e&&(P.Xb(0,"td"),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.Mc(n.bill)}}function Jt(e,t){if(1&e&&(P.Xb(0,"td",34),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc(2).$implicit;P.Db(1),P.Mc(r[n])}}function Bt(e,t){if(1&e&&(P.Vb(0),P.Jc(1,Jt,2,1,"td",33),P.Ub()),2&e){var n=P.jc(2);P.Db(1),P.pc("ngForOf",n.arrType)}}function zt(e,t){if(1&e&&(P.Xb(0,"td",35),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit;P.pc("matTooltip",n.customer_name),P.Db(1),P.Mc(n.customer_short_name)}}function Et(e,t){if(1&e&&(P.Xb(0,"td",35),P.Lc(1),P.Wb()),2&e){var n=P.jc().$implicit;P.pc("matTooltip",n.agent_name),P.Db(1),P.Mc(n.agent_short_name)}}function $t(e,t){1&e&&(P.Xb(0,"mat-chip"),P.Lc(1,"Booking"),P.Wb())}function Yt(e,t){1&e&&(P.Xb(0,"mat-chip",41),P.Lc(1,"Stuffing"),P.Wb())}function Ht(e,t){1&e&&(P.Xb(0,"mat-chip",42),P.Lc(1,"Ready to load"),P.Wb())}function qt(e,t){1&e&&(P.Xb(0,"mat-chip",43),P.Lc(1,"Loaded"),P.Wb())}function Ut(e,t){1&e&&(P.Xb(0,"mat-chip",41),P.Lc(1,"Discharge"),P.Wb())}function Gt(e,t){1&e&&(P.Xb(0,"mat-chip",42),P.Lc(1,"Pick up"),P.Wb())}function Qt(e,t){1&e&&(P.Xb(0,"mat-chip",43),P.Lc(1,"Complete"),P.Wb())}function Kt(e,t){if(1&e&&(P.Xb(0,"td"),P.Xb(1,"mat-chip-list",36),P.Jc(2,$t,2,0,"mat-chip",37),P.Jc(3,Yt,2,0,"mat-chip",38),P.Jc(4,Ht,2,0,"mat-chip",39),P.Jc(5,qt,2,0,"mat-chip",40),P.Jc(6,Ut,2,0,"mat-chip",38),P.Jc(7,Gt,2,0,"mat-chip",39),P.Jc(8,Qt,2,0,"mat-chip",40),P.Wb(),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngSwitch",n.process),P.Db(1),P.pc("ngSwitchCase",0),P.Db(1),P.pc("ngSwitchCase",1),P.Db(1),P.pc("ngSwitchCase",2),P.Db(1),P.pc("ngSwitchCase",3),P.Db(1),P.pc("ngSwitchCase",4),P.Db(1),P.pc("ngSwitchCase",5),P.Db(1),P.pc("ngSwitchCase",6)}}var Zt=function(e,t){return{paid:e,"accent-100-bg":t}};function en(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",45),P.Xb(2,"div",46),P.Xb(3,"span",47),P.Lc(4),P.Wb(),P.Xb(5,"span",20),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zt,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function tn(e,t){if(1&e&&(P.Xb(0,"td",44),P.Jc(1,en,8,11,"ng-container",17),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.revenueVN)}}function nn(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",45),P.Xb(2,"div",46),P.Xb(3,"span",47),P.Lc(4),P.Wb(),P.Xb(5,"span",20),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zt,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function rn(e,t){if(1&e&&(P.Xb(0,"td",44),P.Jc(1,nn,8,11,"ng-container",17),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.revenueNN)}}function on(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",45),P.Xb(2,"div",46),P.Xb(3,"span",47),P.Lc(4),P.Wb(),P.Xb(5,"span",20),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zt,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function an(e,t){if(1&e&&(P.Xb(0,"td",44),P.Jc(1,on,8,11,"ng-container",17),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.costVN)}}function cn(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",45),P.Xb(2,"div",46),P.Xb(3,"span",47),P.Lc(4),P.Wb(),P.Xb(5,"span",20),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zt,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function ln(e,t){if(1&e&&(P.Xb(0,"td",44),P.Jc(1,cn,8,11,"ng-container",17),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.costNN)}}var sn=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function bn(e,t){if(1&e){var n=P.Yb();P.Vb(0),P.Xb(1,"tr"),P.Jc(2,Ft,11,8,"ng-container",12),P.Xb(3,"td",19),P.Xb(4,"a",27),P.fc("click",(function(e){return P.Bc(n),P.jc().matDialogRef.close()})),P.Lc(5),P.Wb(),P.Wb(),P.Jc(6,Pt,2,1,"td",12),P.Jc(7,Bt,2,1,"ng-container",12),P.Jc(8,zt,2,2,"td",28),P.Jc(9,Et,2,2,"td",28),P.Jc(10,Kt,9,8,"td",12),P.Xb(11,"td",29),P.Lc(12),P.kc(13,"number"),P.Wb(),P.Jc(14,tn,2,1,"td",30),P.Xb(15,"td",29),P.Lc(16),P.kc(17,"number"),P.Wb(),P.Jc(18,rn,2,1,"td",30),P.Xb(19,"td",29),P.Lc(20),P.kc(21,"number"),P.Wb(),P.Jc(22,an,2,1,"td",30),P.Xb(23,"td",29),P.Lc(24),P.kc(25,"number"),P.Wb(),P.Jc(26,ln,2,1,"td",30),P.Xb(27,"td",31),P.Lc(28),P.kc(29,"number"),P.Wb(),P.Wb(),P.Ub()}if(2&e){var r=t.$implicit,i=t.index,o=P.jc();P.Db(2),P.pc("ngIf",0==i),P.Db(2),P.pc("routerLink","/apps/workflow/shipment/detail/"+r.id+"/soa"),P.Db(1),P.Mc(r.code),P.Db(1),P.pc("ngIf",o.shipmentOpen),P.Db(1),P.pc("ngIf",o.shipmentOpen),P.Db(1),P.pc("ngIf",o.shipmentOpen),P.Db(1),P.pc("ngIf",o.shipmentOpen),P.Db(1),P.pc("ngIf",o.shipmentOpen),P.Db(1),P.pc("ngClass",P.sc(37,sn,r.profit.revenueVN<0,r.profit.revenueVN>=0)),P.Db(1),P.Mc(P.mc(13,22,r.profit.revenueVN,"1.0-0")),P.Db(2),P.pc("ngIf",o.revenueVNOpen),P.Db(1),P.pc("ngClass",P.sc(40,sn,r.profit.revenueNN<0,r.profit.revenueNN>=0)),P.Db(1),P.Mc(P.mc(17,25,r.profit.revenueNN,"1.0-0")),P.Db(2),P.pc("ngIf",o.revenueNNOpen),P.Db(1),P.pc("ngClass",P.sc(43,sn,r.profit.costVN<0,r.profit.costVN>=0)),P.Db(1),P.Mc(P.mc(21,28,r.profit.costVN,"1.0-0")),P.Db(2),P.pc("ngIf",o.costVNOpen),P.Db(1),P.pc("ngClass",P.sc(46,sn,r.profit.costNN<0,r.profit.costNN>=0)),P.Db(1),P.Mc(P.mc(25,31,r.profit.costNN,"1.0-0")),P.Db(2),P.pc("ngIf",o.costNNOpen),P.Db(1),P.pc("ngClass",P.sc(49,sn,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN<0,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN>=0)),P.Db(1),P.Mc(P.mc(29,34,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN,"1.0-0"))}}function pn(e,t){1&e&&P.Sb(0,"td")}function un(e,t){1&e&&P.Sb(0,"td")}function dn(e,t){1&e&&P.Sb(0,"td",25)}function fn(e,t){if(1&e&&(P.Vb(0),P.Jc(1,dn,1,0,"td",24),P.Ub()),2&e){var n=P.jc();P.Db(1),P.pc("ngForOf",n.arrType)}}function hn(e,t){1&e&&P.Sb(0,"td")}function mn(e,t){1&e&&P.Sb(0,"td")}function gn(e,t){1&e&&P.Sb(0,"td")}function vn(e,t){1&e&&P.Sb(0,"td",49)}function yn(e,t){if(1&e&&(P.Vb(0),P.Jc(1,vn,1,0,"td",48),P.Ub()),2&e){var n=P.jc();P.Db(1),P.pc("ngForOf",n.arrType)}}function xn(e,t){1&e&&P.Sb(0,"td")}function kn(e,t){1&e&&P.Sb(0,"td")}function wn(e,t){1&e&&P.Sb(0,"td")}function Dn(e,t){1&e&&P.Sb(0,"td")}function Cn(e,t){1&e&&P.Sb(0,"td")}function Sn(e,t){1&e&&P.Sb(0,"td")}function _n(e,t){1&e&&P.Sb(0,"td")}var Wn,Xn=((Wn=function(){function e(t,n,r,i,o,a,c){_classCallCheck(this,e),this.router=t,this.matDialogRef=n,this._data=r,this.authService=i,this.commonService=o,this.datePipe=a,this._formBuilder=c,this.revenueVNOpen=!0,this.revenueNNOpen=!0,this.costVNOpen=!0,this.costNNOpen=!0,this.vesselOpen=!1,this.shipmentOpen=!1,this.label=r.label,this.shipments=r.shipments,this.key=r.key,this.arrType=r.arrType,this.price=r.price}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.total={revenueVN:0,revenueNN:0,costVN:0,costNN:0},this.shipments[this.key].shipment.map((function(t){e.total.revenueVN+=t.profit.revenueVN,e.total.revenueNN+=t.profit.revenueNN,e.total.costVN+=t.profit.costVN,e.total.costNN+=t.profit.costNN})),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}}]),e}()).\u0275fac=function(e){return new(e||Wn)(P.Rb(o.g),P.Rb(y.f),P.Rb(y.a),P.Rb(G.a),P.Rb(q.a),P.Rb(U.f),P.Rb(ee.d))},Wn.\u0275cmp=P.Lb({type:Wn,selectors:[["report-bill-table-modal-dialog"]],decls:101,vars:62,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","id","report-bill-table-modal-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],[1,"viewer-panel"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["class","w-112",4,"ngIf"],[4,"ngIf"],["class","w-120",4,"ngIf"],[1,"sticky-col2",2,"z-index","30"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"sticky-right-col1",2,"z-index","30"],[4,"ngFor","ngForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],[1,"w-152","sticky-col2"],[1,"text-right","text-bold"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"w-112"],["class","w-52 text-center",4,"ngFor","ngForOf"],[1,"w-52","text-center"],[1,"w-120"],[1,"cursor-pointer",3,"routerLink","click"],[3,"matTooltip",4,"ngIf"],[1,"text-right","text-bold",3,"ngClass"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col1","text-right","text-bold",3,"ngClass"],[1,"w-152","sticky-col"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[2,"padding","0"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],["class","text-center text-bold",4,"ngFor","ngForOf"],[1,"text-center","text-bold"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"mat-toolbar",1),P.Xb(2,"mat-toolbar-row",2),P.Xb(3,"span",3),P.Lc(4),P.Wb(),P.Xb(5,"button",4),P.fc("click",(function(e){return t.matDialogRef.close()})),P.Xb(6,"mat-icon"),P.Lc(7,"close"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(8,"div",5),P.Xb(9,"div",6),P.Xb(10,"table",7),P.Xb(11,"thead"),P.Xb(12,"tr"),P.Xb(13,"th"),P.Lc(14,"No"),P.Wb(),P.Xb(15,"th",8),P.Lc(16,"Voyage "),P.Jc(17,ot,2,0,"mat-icon",9),P.Jc(18,at,2,0,"mat-icon",10),P.Wb(),P.Jc(19,ct,2,0,"th",11),P.Jc(20,lt,2,0,"th",11),P.Jc(21,bt,2,1,"ng-container",12),P.Jc(22,pt,2,0,"th",13),P.Jc(23,ut,2,0,"th",13),P.Xb(24,"th",14),P.Lc(25,"Shipment "),P.Jc(26,dt,2,0,"mat-icon",9),P.Jc(27,ft,2,0,"mat-icon",10),P.Wb(),P.Jc(28,ht,2,0,"th",12),P.Jc(29,gt,2,1,"ng-container",12),P.Jc(30,vt,2,0,"th",12),P.Jc(31,yt,2,0,"th",12),P.Jc(32,xt,2,0,"th",12),P.Xb(33,"th"),P.Xb(34,"div",15),P.Xb(35,"span"),P.Lc(36,"REVENUE VN"),P.Wb(),P.Jc(37,kt,2,0,"mat-icon",9),P.Jc(38,wt,2,0,"mat-icon",10),P.Wb(),P.Wb(),P.Jc(39,Dt,2,0,"th",12),P.Xb(40,"th"),P.Xb(41,"div",15),P.Xb(42,"span"),P.Lc(43,"REVENUE NN"),P.Wb(),P.Jc(44,Ct,2,0,"mat-icon",9),P.Jc(45,St,2,0,"mat-icon",10),P.Wb(),P.Wb(),P.Jc(46,_t,2,0,"th",12),P.Xb(47,"th"),P.Xb(48,"div",15),P.Xb(49,"span"),P.Lc(50,"COST VN"),P.Wb(),P.Jc(51,Wt,2,0,"mat-icon",9),P.Jc(52,Xt,2,0,"mat-icon",10),P.Wb(),P.Wb(),P.Jc(53,Ot,2,0,"th",12),P.Xb(54,"th"),P.Xb(55,"div",15),P.Xb(56,"span"),P.Lc(57,"COST NN"),P.Wb(),P.Jc(58,Nt,2,0,"mat-icon",9),P.Jc(59,Lt,2,0,"mat-icon",10),P.Wb(),P.Wb(),P.Jc(60,It,2,0,"th",12),P.Xb(61,"th",16),P.Lc(62,"PROFIT"),P.Wb(),P.Wb(),P.Wb(),P.Xb(63,"tbody"),P.Jc(64,bn,30,52,"ng-container",17),P.Wb(),P.Xb(65,"tfoot"),P.Xb(66,"tr"),P.Sb(67,"td"),P.Xb(68,"td",18),P.Lc(69,"Total"),P.Wb(),P.Jc(70,pn,1,0,"td",12),P.Jc(71,un,1,0,"td",12),P.Jc(72,fn,2,1,"ng-container",12),P.Jc(73,hn,1,0,"td",12),P.Jc(74,mn,1,0,"td",12),P.Sb(75,"td",19),P.Jc(76,gn,1,0,"td",12),P.Jc(77,yn,2,1,"ng-container",12),P.Jc(78,xn,1,0,"td",12),P.Jc(79,kn,1,0,"td",12),P.Jc(80,wn,1,0,"td",12),P.Xb(81,"td",20),P.Lc(82),P.kc(83,"number"),P.Wb(),P.Jc(84,Dn,1,0,"td",12),P.Xb(85,"td",20),P.Lc(86),P.kc(87,"number"),P.Wb(),P.Jc(88,Cn,1,0,"td",12),P.Xb(89,"td",20),P.Lc(90),P.kc(91,"number"),P.Wb(),P.Jc(92,Sn,1,0,"td",12),P.Xb(93,"td",20),P.Lc(94),P.kc(95,"number"),P.Wb(),P.Jc(96,_n,1,0,"td",12),P.Xb(97,"td",20),P.Lc(98),P.kc(99,"number"),P.Wb(),P.Sb(100,"td"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(4),P.Mc(t.shipments[t.key].vessel_full_name),P.Db(13),P.pc("ngIf",!t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(3),P.pc("ngIf",!t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(5),P.pc("ngIf",!t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(5),P.pc("ngIf",!t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(5),P.pc("ngIf",!t.costVNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(5),P.pc("ngIf",!t.costNNOpen),P.Db(1),P.pc("ngIf",t.costNNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(4),P.pc("ngForOf",t.shipments[t.key].shipment),P.Db(6),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(1),P.pc("ngIf",t.vesselOpen),P.Db(2),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(1),P.pc("ngIf",t.shipmentOpen),P.Db(2),P.Mc(P.mc(83,47,t.total.revenueVN,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueVNOpen),P.Db(2),P.Mc(P.mc(87,50,t.total.revenueNN,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueNNOpen),P.Db(2),P.Mc(P.mc(91,53,t.total.costVN,"1.0-0")),P.Db(2),P.pc("ngIf",t.costVNOpen),P.Db(2),P.Mc(P.mc(95,56,t.total.costNN,"1.0-0")),P.Db(2),P.pc("ngIf",t.costVNOpen),P.Db(2),P.Mc(P.mc(99,59,t.total.revenueVN+t.total.revenueNN-t.total.costVN-t.total.costNN,"1.0-0")))},directives:[x.a,x.c,te.b,te.d,te.c,b.b,d.a,y.d,U.t,U.s,o.j,U.q,oe.a,f.a,C.c,U.x,U.y,C.a],pipes:[U.g,U.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.report-bill-table-modal-dialog{width:100%}}@media screen and (min-width:960px){.report-bill-table-modal-dialog{width:1080px}}.report-bill-table-modal-dialog .mat-dialog-container{padding:0}.report-bill-table-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table{font-size:12px!important;margin-bottom:4px;border-collapse:collapse}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table td,.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table td .mat-standard-chip,.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .paid{background:#fff;color:#000}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .cost-paid{background:#ffe1c2;color:#000}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}.report-bill-table-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.report-bill-table-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),Wn);function On(e,t){if(1&e&&(P.Xb(0,"th",19),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Ic("top",r.inverseOfTranslation),P.Db(1),P.Mc(n)}}function Nn(e,t){if(1&e&&(P.Xb(0,"th",19),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Ic("top",r.inverseOfTranslation),P.Db(1),P.Mc(n)}}function Ln(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",20),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"add"),P.Wb()}}function In(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"removed"),P.Wb()}}function Tn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Vn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",20),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"add"),P.Wb()}}function An(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"removed"),P.Wb()}}function jn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Mn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",20),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),P.Lc(1,"add"),P.Wb()}}function Rn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),P.Lc(1,"removed"),P.Wb()}}function Fn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Pn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",20),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),P.Lc(1,"add"),P.Wb()}}function Jn(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",21),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),P.Lc(1,"removed"),P.Wb()}}function Bn(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function zn(e,t){if(1&e&&(P.Xb(0,"td",19),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc(3).$implicit,i=P.jc();P.Eb("rowspan",i.shipments[r.key].shipment.length),P.Db(1),P.Mc(i.shipments[r.key][n])}}function En(e,t){if(1&e){var n=P.Yb();P.Vb(0),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td",41),P.Xb(4,"a",42),P.fc("click",(function(e){P.Bc(n);var t=P.jc(2).$implicit;return P.jc().openVessel.emit(t.key)})),P.Lc(5),P.Wb(),P.Wb(),P.Xb(6,"td",3),P.Lc(7),P.Wb(),P.Xb(8,"td",3),P.Lc(9),P.Wb(),P.Jc(10,zn,2,2,"td",43),P.Xb(11,"td",5),P.Lc(12),P.kc(13,"date"),P.Wb(),P.Xb(14,"td",5),P.Lc(15),P.kc(16,"date"),P.Wb(),P.Ub()}if(2&e){var r=P.jc(2),i=r.$implicit,o=r.index,a=P.jc();P.Db(1),P.Eb("rowspan",a.shipments[i.key].shipment.length),P.Db(1),P.Mc(o+1),P.Db(1),P.Eb("rowspan",a.shipments[i.key].shipment.length),P.Db(2),P.Mc(a.shipments[i.key].vessel_full_name),P.Db(1),P.Eb("rowspan",a.shipments[i.key].shipment.length),P.Db(1),P.Mc(a.shipments[i.key].pol_name),P.Db(1),P.Eb("rowspan",a.shipments[i.key].shipment.length),P.Db(1),P.Mc(a.shipments[i.key].pod_name),P.Db(1),P.pc("ngForOf",a.arrType),P.Db(1),P.Eb("rowspan",a.shipments[i.key].shipment.length),P.Db(1),P.Mc(P.mc(13,13,a.shipments[i.key].depart_time,"MM/dd/yyyy HH:mm")),P.Db(2),P.Eb("rowspan",a.shipments[i.key].shipment.length),P.Db(1),P.Mc(P.mc(16,16,a.shipments[i.key].arrive_time,"MM/dd/yyyy HH:mm"))}}function $n(e,t){if(1&e&&(P.Xb(0,"td",44),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc().$implicit;P.Db(1),P.Mc(r[n])}}function Yn(e,t){1&e&&(P.Xb(0,"mat-chip"),P.Lc(1,"Booking"),P.Wb())}function Hn(e,t){1&e&&(P.Xb(0,"mat-chip",45),P.Lc(1,"Stuffing"),P.Wb())}function qn(e,t){1&e&&(P.Xb(0,"mat-chip",46),P.Lc(1,"Ready to load"),P.Wb())}function Un(e,t){1&e&&(P.Xb(0,"mat-chip",47),P.Lc(1,"Loaded"),P.Wb())}function Gn(e,t){1&e&&(P.Xb(0,"mat-chip",45),P.Lc(1,"Discharge"),P.Wb())}function Qn(e,t){1&e&&(P.Xb(0,"mat-chip",46),P.Lc(1,"Pick up"),P.Wb())}function Kn(e,t){1&e&&(P.Xb(0,"mat-chip",47),P.Lc(1,"Complete"),P.Wb())}var Zn=function(e,t){return{paid:e,"accent-100-bg":t}};function er(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",49),P.Xb(2,"div",50),P.Xb(3,"span",51),P.Lc(4),P.Wb(),P.Xb(5,"span",52),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zn,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function tr(e,t){if(1&e&&(P.Xb(0,"td",48),P.Jc(1,er,8,11,"ng-container",22),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.revenueVN)}}function nr(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",49),P.Xb(2,"div",50),P.Xb(3,"span",51),P.Lc(4),P.Wb(),P.Xb(5,"span",52),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zn,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function rr(e,t){if(1&e&&(P.Xb(0,"td",48),P.Jc(1,nr,8,11,"ng-container",22),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.revenueNN)}}function ir(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",49),P.Xb(2,"div",50),P.Xb(3,"span",51),P.Lc(4),P.Wb(),P.Xb(5,"span",52),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zn,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function or(e,t){if(1&e&&(P.Xb(0,"td",48),P.Jc(1,ir,8,11,"ng-container",22),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.costVN)}}function ar(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",49),P.Xb(2,"div",50),P.Xb(3,"span",51),P.Lc(4),P.Wb(),P.Xb(5,"span",52),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,Zn,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.amount,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function cr(e,t){if(1&e&&(P.Xb(0,"td",48),P.Jc(1,ar,8,11,"ng-container",22),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.costNN)}}function lr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",53),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit;return P.jc(2).createItem.emit([t,"Revenue"])})),P.Xb(1,"mat-icon",54),P.Lc(2,"add"),P.Wb(),P.Xb(3,"span"),P.Lc(4,"Revenue"),P.Wb(),P.Wb()}}function sr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",53),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit;return P.jc(2).createItem.emit([t,"Cost"])})),P.Xb(1,"mat-icon",54),P.Lc(2,"add"),P.Wb(),P.Xb(3,"span"),P.Lc(4,"Cost"),P.Wb(),P.Wb()}}function br(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",53),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit,r=P.jc(2).$implicit;return P.jc(2).addPrice.emit([r,"Revenue",t,r[t],"DTHC"])})),P.Xb(1,"mat-icon",54),P.Lc(2,"add"),P.Wb(),P.Xb(3,"span"),P.Lc(4),P.Wb(),P.Wb()}if(2&e){var r=P.jc().$implicit;P.Db(4),P.Nc("Revenue DTHC ",r,"")}}function pr(e,t){if(1&e&&(P.Vb(0),P.Jc(1,br,5,1,"button",40),P.Ub()),2&e){var n=t.$implicit,r=P.jc(2).$implicit,i=P.jc(2);P.Db(1),P.pc("ngIf",i.permission.create&&r[n])}}function ur(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",53),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit,r=P.jc(2).$implicit;return P.jc(2).addPrice.emit([r,"Cost",t,r[t],"ADF"])})),P.Xb(1,"mat-icon",54),P.Lc(2,"add"),P.Wb(),P.Xb(3,"span"),P.Lc(4),P.Wb(),P.Wb()}if(2&e){var r=P.jc().$implicit;P.Db(4),P.Nc("Cost ADF ",r,"")}}function dr(e,t){if(1&e&&(P.Vb(0),P.Jc(1,ur,5,1,"button",40),P.Ub()),2&e){var n=t.$implicit,r=P.jc(2).$implicit,i=P.jc(2);P.Db(1),P.pc("ngIf",i.permission.create&&r[n])}}function fr(e,t){if(1&e&&(P.Vb(0),P.Jc(1,pr,2,1,"ng-container",22),P.Jc(2,dr,2,1,"ng-container",22),P.Ub()),2&e){var n=P.jc(3);P.Db(1),P.pc("ngForOf",n.arrType),P.Db(1),P.pc("ngForOf",n.arrType)}}var hr=function(e,t){return{"grey-A200-bg":e,"grey-A100-bg":t}},mr=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function gr(e,t){if(1&e){var n=P.Yb();P.Vb(0),P.Xb(1,"tr",23),P.Jc(2,En,17,19,"ng-container",24),P.Xb(3,"td",25),P.Xb(4,"a",26),P.Lc(5),P.Wb(),P.Wb(),P.Xb(6,"td"),P.Lc(7),P.Wb(),P.Jc(8,$n,2,1,"td",27),P.Xb(9,"td",28),P.Lc(10),P.Wb(),P.Xb(11,"td",28),P.Lc(12),P.Wb(),P.Xb(13,"td"),P.Xb(14,"mat-chip-list",29),P.Jc(15,Yn,2,0,"mat-chip",30),P.Jc(16,Hn,2,0,"mat-chip",31),P.Jc(17,qn,2,0,"mat-chip",32),P.Jc(18,Un,2,0,"mat-chip",33),P.Jc(19,Gn,2,0,"mat-chip",31),P.Jc(20,Qn,2,0,"mat-chip",32),P.Jc(21,Kn,2,0,"mat-chip",33),P.Wb(),P.Wb(),P.Xb(22,"td",34),P.Lc(23),P.kc(24,"number"),P.Wb(),P.Jc(25,tr,2,1,"td",35),P.Xb(26,"td",34),P.Lc(27),P.kc(28,"number"),P.Wb(),P.Jc(29,rr,2,1,"td",35),P.Xb(30,"td",34),P.Lc(31),P.kc(32,"number"),P.Wb(),P.Jc(33,or,2,1,"td",35),P.Xb(34,"td",34),P.Lc(35),P.kc(36,"number"),P.Wb(),P.Jc(37,cr,2,1,"td",35),P.Xb(38,"td",36),P.Lc(39),P.kc(40,"number"),P.Wb(),P.Xb(41,"td",37),P.Xb(42,"mat-icon",38),P.fc("click",(function(e){return P.Bc(n),e.stopPropagation()})),P.Lc(43,"more_vert"),P.Wb(),P.Xb(44,"mat-menu",null,39),P.Jc(46,lr,5,0,"button",40),P.Jc(47,sr,5,0,"button",40),P.Jc(48,fr,3,2,"ng-container",24),P.Wb(),P.Wb(),P.Wb(),P.Ub()}if(2&e){var r=t.$implicit,i=t.index,o=P.xc(45),a=P.jc().index,c=P.jc();P.Db(1),P.pc("ngClass",P.sc(51,hr,a%2==1,a%2==0)),P.Db(1),P.pc("ngIf",0==i),P.Db(2),P.pc("routerLink","/apps/workflow/shipment/detail/"+r.id+"/soa"),P.Db(1),P.Mc(r.code),P.Db(2),P.Mc(r.bill),P.Db(1),P.pc("ngForOf",c.arrType),P.Db(1),P.pc("matTooltip",r.customer_name),P.Db(1),P.Mc(r.customer_short_name),P.Db(1),P.pc("matTooltip",r.agent_name),P.Db(1),P.Mc(r.agent_short_name),P.Db(2),P.pc("ngSwitch",r.process),P.Db(1),P.pc("ngSwitchCase",0),P.Db(1),P.pc("ngSwitchCase",1),P.Db(1),P.pc("ngSwitchCase",2),P.Db(1),P.pc("ngSwitchCase",3),P.Db(1),P.pc("ngSwitchCase",4),P.Db(1),P.pc("ngSwitchCase",5),P.Db(1),P.pc("ngSwitchCase",6),P.Db(1),P.pc("ngClass",P.sc(54,mr,r.profit.revenueVN<0,r.profit.revenueVN>=0)),P.Db(1),P.Mc(P.mc(24,36,r.profit.revenueVN,"1.0-0")),P.Db(2),P.pc("ngIf",c.revenueVNOpen),P.Db(1),P.pc("ngClass",P.sc(57,mr,r.profit.revenueNN<0,r.profit.revenueNN>=0)),P.Db(1),P.Mc(P.mc(28,39,r.profit.revenueNN,"1.0-0")),P.Db(2),P.pc("ngIf",c.revenueNNOpen),P.Db(1),P.pc("ngClass",P.sc(60,mr,r.profit.costVN<0,r.profit.costVN>=0)),P.Db(1),P.Mc(P.mc(32,42,r.profit.costVN,"1.0-0")),P.Db(2),P.pc("ngIf",c.costVNOpen),P.Db(1),P.pc("ngClass",P.sc(63,mr,r.profit.costNN<0,r.profit.costNN>=0)),P.Db(1),P.Mc(P.mc(36,45,r.profit.costNN,"1.0-0")),P.Db(2),P.pc("ngIf",c.costNNOpen),P.Db(1),P.pc("ngClass",P.sc(66,mr,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN<0,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN>=0)),P.Db(1),P.Mc(P.mc(40,48,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN,"1.0-0")),P.Db(3),P.pc("matMenuTriggerFor",o),P.Db(4),P.pc("ngIf",c.permission.create),P.Db(1),P.pc("ngIf",c.permission.create),P.Db(1),P.pc("ngIf",c.formSearch&&113==c.formSearch.agent)}}function vr(e,t){if(1&e&&(P.Vb(0),P.Jc(1,gr,49,69,"ng-container",22),P.Ub()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngForOf",r.shipments[n.key].shipment)}}function yr(e,t){if(1&e&&(P.Xb(0,"td",55),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Ic("bottom",r.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(2,3,r.total[n],"1.0-0"))}}function xr(e,t){if(1&e&&(P.Xb(0,"td",55),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Ic("bottom",r.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(2,3,r.total[n],"1.0-0"))}}function kr(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}function wr(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}function Dr(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}function Cr(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}var Sr,_r=((Sr=function(){function e(t,n){_classCallCheck(this,e),this.commonService=t,this.changeDetector=n,this.createItem=new P.o,this.addPrice=new P.o,this.openVessel=new P.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||Sr)(P.Rb(q.a),P.Rb(P.h))},Sr.\u0275cmp=P.Lb({type:Sr,selectors:[["report-vessel-table"]],viewQuery:function(e,t){var n;1&e&&P.Sc(Fe.e,!0),2&e&&P.wc(n=P.gc())&&(t.viewPort=n.first)},inputs:{shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total",formSearch:"formSearch"},outputs:{createItem:"createItem",addPrice:"addPrice",openVessel:"openVessel"},decls:97,vars:109,consts:[["autosize","",1,"h-100-p"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],[1,"text-bold"],[3,"bottom",4,"ngIf"],[1,"text-bold","sticky-right-col",2,"z-index","30"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf"],[1,"w-152","sticky-col2"],[1,"cursor-pointer",3,"routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],[1,"text-right","text-bold",3,"ngClass"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],[1,"w-152","sticky-col"],[3,"click"],["class","w-52 text-center",4,"ngFor","ngForOf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[2,"padding","0"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],[1,"text-right","text-bold"],["mat-menu-item","","aria-label","remove",3,"click"],["color","accent"],[1,"text-center","text-bold"]],template:function(e,t){1&e&&(P.Xb(0,"cdk-virtual-scroll-viewport",0),P.Xb(1,"table",1),P.Xb(2,"thead"),P.Xb(3,"tr"),P.Xb(4,"th"),P.Lc(5,"No"),P.Wb(),P.Xb(6,"th",2),P.Lc(7,"Voyage"),P.Wb(),P.Xb(8,"th",3),P.Lc(9,"POL"),P.Wb(),P.Xb(10,"th",3),P.Lc(11,"POD"),P.Wb(),P.Jc(12,On,2,3,"th",4),P.Xb(13,"th",5),P.Lc(14,"ETD"),P.Wb(),P.Xb(15,"th",5),P.Lc(16,"ETA"),P.Wb(),P.Xb(17,"th",6),P.Lc(18,"Shipment"),P.Wb(),P.Xb(19,"th"),P.Lc(20,"Bill"),P.Wb(),P.Jc(21,Nn,2,3,"th",4),P.Xb(22,"th"),P.Lc(23,"Customer"),P.Wb(),P.Xb(24,"th"),P.Lc(25,"Agent"),P.Wb(),P.Xb(26,"th"),P.Lc(27,"Process"),P.Wb(),P.Xb(28,"th"),P.Xb(29,"div",7),P.Xb(30,"span"),P.Lc(31,"REVENUE VN"),P.Wb(),P.Jc(32,Ln,2,0,"mat-icon",8),P.Jc(33,In,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(34,Tn,2,2,"th",10),P.Xb(35,"th"),P.Xb(36,"div",7),P.Xb(37,"span"),P.Lc(38,"REVENUE NN"),P.Wb(),P.Jc(39,Vn,2,0,"mat-icon",8),P.Jc(40,An,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(41,jn,2,2,"th",10),P.Xb(42,"th"),P.Xb(43,"div",7),P.Xb(44,"span"),P.Lc(45,"COST VN"),P.Wb(),P.Jc(46,Mn,2,0,"mat-icon",8),P.Jc(47,Rn,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(48,Fn,2,2,"th",10),P.Xb(49,"th"),P.Xb(50,"div",7),P.Xb(51,"span"),P.Lc(52,"COST NN"),P.Wb(),P.Jc(53,Pn,2,0,"mat-icon",8),P.Jc(54,Jn,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(55,Bn,2,2,"th",10),P.Xb(56,"th",11),P.Lc(57,"PROFIT"),P.Wb(),P.Sb(58,"th",12),P.Wb(),P.Wb(),P.Xb(59,"tbody"),P.Jc(60,vr,2,1,"ng-container",13),P.Wb(),P.Xb(61,"tfoot"),P.Xb(62,"tr"),P.Sb(63,"td"),P.Xb(64,"td",14),P.Lc(65,"Total"),P.Wb(),P.Sb(66,"td"),P.Sb(67,"td"),P.Jc(68,yr,3,6,"td",15),P.Sb(69,"td"),P.Sb(70,"td"),P.Sb(71,"td"),P.Sb(72,"td"),P.Jc(73,xr,3,6,"td",15),P.Sb(74,"td"),P.Sb(75,"td"),P.Sb(76,"td"),P.Xb(77,"td",16),P.Lc(78),P.kc(79,"number"),P.Wb(),P.Jc(80,kr,1,2,"td",17),P.Xb(81,"td",16),P.Lc(82),P.kc(83,"number"),P.Wb(),P.Jc(84,wr,1,2,"td",17),P.Xb(85,"td",16),P.Lc(86),P.kc(87,"number"),P.Wb(),P.Jc(88,Dr,1,2,"td",17),P.Xb(89,"td",16),P.Lc(90),P.kc(91,"number"),P.Wb(),P.Jc(92,Cr,1,2,"td",17),P.Xb(93,"td",18),P.Lc(94),P.kc(95,"number"),P.Wb(),P.Sb(96,"td",12),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Db(4),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.pc("ngForOf",t.arrType),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.pc("ngForOf",t.arrType),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.costVNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.costNNOpen),P.Db(1),P.pc("ngIf",t.costNNOpen),P.Db(1),P.pc("ngIf",t.costNNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.pc("cdkVirtualForOf",t.voyage),P.Db(3),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.pc("ngForOf",t.arrType),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.pc("ngForOf",t.arrType),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(79,94,t.total.revenueVN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(83,97,t.total.revenueNN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(87,100,t.total.costVN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.costVNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(91,103,t.total.costNN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.costNNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(95,106,t.total.revenueVN.ALL+t.total.revenueNN.ALL-t.total.costVN.ALL-t.total.costNN.ALL,"1.0-0")),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2))},directives:[Fe.e,Pe.a,U.s,te.d,te.c,U.t,Fe.d,d.a,U.q,oe.a,o.j,f.a,C.c,U.x,U.y,c.c,c.d,C.a,c.a],pipes:[U.g,U.f],styles:["report-vessel-table .report-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}report-vessel-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10}report-vessel-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}report-vessel-table .report-table td,report-vessel-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}report-vessel-table .report-table td .mat-standard-chip,report-vessel-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}report-vessel-table .report-table .paid{background:#fff;color:#000}report-vessel-table .report-table .cost-paid{background:#ffe1c2;color:#000}report-vessel-table .report-table .sticky-col{width:152px;position:-webkit-sticky;position:sticky;background:inherit;left:0;z-index:20}report-vessel-table .report-table .sticky-col2{width:152px;position:-webkit-sticky;position:sticky;background:inherit;left:152px;z-index:20}report-vessel-table .report-table .sticky-right-col{position:-webkit-sticky;position:sticky;background:inherit;right:40px;z-index:20}report-vessel-table .report-table .sticky-right-col1{position:-webkit-sticky;position:sticky;background:inherit;right:0;z-index:20}"],encapsulation:2,data:{animation:F.a}}),Sr);function Wr(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,(r.total.revenueBalance[n]?r.total.revenueBalance[n]:0)-(r.total.costBalance[n]?r.total.costBalance[n]:0),"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Xr(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Wr,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.revenueBalance[n]>=0||r.total.costBalance[n]>=0)}}function Or(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.revenueVN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Nr(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Or,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.revenueVN[n])}}function Lr(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.revenueNN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Ir(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Lr,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.revenueNN[n])}}function Tr(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.costVN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Vr(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Tr,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.costVN[n])}}function Ar(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.costNN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function jr(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Ar,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.costNN[n])}}var Mr,Rr=((Mr=function(){function e(t,n,r,i,o,a,c,l){if(_classCallCheck(this,e),this.router=t,this.route=n,this._activatedRoute=r,this.authService=i,this.changeDetector=o,this.reportService=a,this._location=c,this._matDialog=l,this.voyage=[],this.arrType=[],this.height=560,this.selectItem=0,this.price=[],this.expand=!1,this.priceTarrif={DTHC20:{amount:225,currency:"SGD"},DTHC40:{amount:335,currency:"SGD"},ADF20:{amount:5,currency:"USD"},ADF40:{amount:7.5,currency:"USD"}},this._unsubscribeAll=new M.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var s=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(s)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4:e.authService.screenHeight-64-64-16-4})),this.reportService.onVesselChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.shipments=e.reportService.shipmentVessel,e.voyage=e.reportService.voyage,e.arrType=e.reportService.arrType,e.price=e.reportService.sptPrice,e.total=t[3],e.formSearch=e.reportService.currenSearch.formSearch})),this.reportService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.reportService.dataCustomer,e.supplier=e.reportService.dataSupplier,e.users=e.reportService.users})),this.reportService.onDataItemChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.prices=e.reportService.price,e.currency=e.reportService.currency,e.country=e.reportService.country,e.agent=e.reportService.agent}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.reportService.currenSearch.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")}))}},{key:"createItem",value:function(e){var t=this,n=e[0],r=e[1];"Revenue"==r&&(this.partner=this.customer),"Cost"==r&&(this.partner=this.supplier),this.dialogRef=this._matDialog.open(it.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+r,shipmentId:n.id,price:this.prices,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n}}),this.dialogRef.componentInstance.createItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),r){case"Revenue":t.reportService.createSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+r)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+r}));break;case"Cost":t.reportService.createSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+r)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+r}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getShipment()}))}},{key:"addPrice",value:function(e){var t=this,n=_slicedToArray(e,5),r=n[0],i=n[1],o=n[2],a=n[3],c=n[4];if("Revenue"==i){this.partner=this.customer;var l=this.agent.find((function(e){return e.id==t.formSearch.agent})),s=this.partner.find((function(e){return e.short_name==l.short_name})),b=c+o.substring(0,2);if(r.dataRevenue.map((function(e){return e.price_code})).includes(b))alert("Price exist");else{var p=this.prices.find((function(e){return e.code==b})),u=this.currency.find((function(e){return e.code==t.priceTarrif[p.code].currency}));this.createData(i,{shipment:r.id,price:p,volume:a,amount:this.priceTarrif[p.code].amount,tax:0,tax_amount:0,currency:u.id,ex_rate:u.exrate,payment_center:s.country,pay_party:s.id,update_by:this.authService.user,create_by:this.authService.user})}}else{this.partner=this.supplier;var d=this.agent.find((function(e){return e.id==t.formSearch.agent})),f=this.partner.find((function(e){return e.short_name==d.short_name})),h=c+o.substring(0,2);if(r.dataCost.map((function(e){return e.price_code})).includes(h))alert("Price exist");else{var m=this.prices.find((function(e){return e.code==h}));console.log(m);var g=this.currency.find((function(e){return e.code==t.priceTarrif[m.code].currency}));this.createData(i,{shipment:r.id,price:m,volume:a,amount:this.priceTarrif[m.code].amount,tax:0,tax_amount:0,currency:g.id,ex_rate:g.exrate,payment_center:f.country,issue_party:f.id,update_by:this.authService.user,create_by:this.authService.user})}}}},{key:"createData",value:function(e,t){var n=this;switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":this.reportService.createSelRevenue(t).then((function(e){n.authService.onRequestChanged.next(!1),n.getShipment()})).catch((function(t){n.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}));break;case"Cost":this.reportService.createSelCost(t).then((function(e){n.authService.onRequestChanged.next(!1),n.getShipment()})).catch((function(t){n.authService.onRequestChanged.next(!1),console.error(t),alert("Create "+e+" error")}))}}},{key:"openVessel",value:function(e){this.dialogRef=this._matDialog.open(Xn,{panelClass:"report-bill-table-modal-dialog",data:{label:"Vessel",shipments:this.shipments,key:e,arrType:this.arrType,price:this.price}}),this.dialogRef.afterClosed().subscribe((function(e){}))}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||Mr)(P.Rb(o.g),P.Rb(o.a),P.Rb(o.a),P.Rb(G.a),P.Rb(P.h),P.Rb(Q),P.Rb(U.n),P.Rb(y.b))},Mr.\u0275cmp=P.Lb({type:Mr,selectors:[["report-vessel"]],viewQuery:function(e,t){var n;1&e&&P.Sc(Fe.e,!0),2&e&&P.wc(n=P.gc())&&(t.viewPort=n.first)},decls:40,vars:15,consts:[["fxLayout","column",2,"overflow","auto"],[1,"group","mt-8"],[1,"cursor-pointer",3,"click"],[1,"viewer-content"],[1,"item",3,"expanded"],["itemPanel",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","20"],[1,"group","ml-12","mb-12","mt-16"],[1,"pt-8","pb-8","w-100-p"],["fxLayout","row","fxLayoutAlign","center center",4,"ngFor","ngForOf"],[1,"group","mb-12","mt-16"],[1,"accent-600-fg"],[1,"table-div","mt-8"],[3,"shipments","voyage","arrType","price","permission","total","formSearch","createItem","addPrice","openVessel"],["fxLayout","row","fxLayoutAlign","center center"],["class","font-size-14 text-bold",4,"ngIf"],[1,"font-size-14","text-bold"]],template:function(e,t){if(1&e){var n=P.Yb();P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"h2",2),P.fc("click",(function(e){return P.Bc(n),P.xc(6).toggle()})),P.Lc(3,"Total"),P.Wb(),P.Xb(4,"div",3),P.Xb(5,"mat-expansion-panel",4,5),P.Xb(7,"div",6),P.Xb(8,"div",7),P.Xb(9,"div",8),P.Xb(10,"h2"),P.Lc(11,"Balance"),P.Wb(),P.Xb(12,"div",9),P.Jc(13,Xr,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(14,"div",7),P.Xb(15,"div",11),P.Xb(16,"h2",12),P.Lc(17,"RevenueVN"),P.Wb(),P.Xb(18,"div",9),P.Jc(19,Nr,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(20,"div",7),P.Xb(21,"div",11),P.Xb(22,"h2",12),P.Lc(23,"RevenueNN"),P.Wb(),P.Xb(24,"div",9),P.Jc(25,Ir,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(26,"div",7),P.Xb(27,"div",11),P.Xb(28,"h2",12),P.Lc(29,"CostVN"),P.Wb(),P.Xb(30,"div",9),P.Jc(31,Vr,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(32,"div",7),P.Xb(33,"div",11),P.Xb(34,"h2",12),P.Lc(35,"CostNN"),P.Wb(),P.Xb(36,"div",9),P.Jc(37,jr,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(38,"div",13),P.Xb(39,"report-vessel-table",14),P.fc("createItem",(function(e){return t.createItem(e)}))("addPrice",(function(e){return t.addPrice(e)}))("openVessel",(function(e){return t.openVessel(e)})),P.Wb(),P.Wb(),P.Wb()}2&e&&(P.Ic("height",t.height,"px"),P.Db(5),P.pc("expanded",t.expand),P.Db(8),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(2),P.pc("shipments",t.shipments)("voyage",t.voyage)("arrType",t.arrType)("price",t.price)("permission",t.permission)("total",t.total)("formSearch",t.formSearch))},directives:[te.d,p.c,te.b,U.s,_r,te.c,U.t],pipes:[U.g],styles:["report-vessel .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:0}report-vessel .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-vessel .group .viewer-content{width:100%;overflow:auto}report-vessel .group .viewer-content .mat-expansion-panel-body{padding:0!important}report-vessel .table-div{height:100%;border:1px solid #000!important}@media screen and (max-width:599px){report-vessel .table-div{height:360px!important}}"],encapsulation:2,data:{animation:F.a}}),Mr);function Fr(e,t){if(1&e&&(P.Xb(0,"th",21),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Ic("top",r.inverseOfTranslation),P.Db(1),P.Mc(n)}}function Pr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"add"),P.Wb()}}function Jr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",23),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueVNOpen=!t.revenueVNOpen})),P.Lc(1,"removed"),P.Wb()}}function Br(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function zr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"add"),P.Wb()}}function Er(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",23),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.revenueNNOpen=!t.revenueNNOpen})),P.Lc(1,"removed"),P.Wb()}}function $r(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Yr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),P.Lc(1,"add"),P.Wb()}}function Hr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",23),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costVNOpen=!t.costVNOpen})),P.Lc(1,"removed"),P.Wb()}}function qr(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Ur(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",22),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),P.Lc(1,"add"),P.Wb()}}function Gr(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",23),P.fc("click",(function(e){P.Bc(n);var t=P.jc();return e.stopPropagation(),t.costNNOpen=!t.costNNOpen})),P.Lc(1,"removed"),P.Wb()}}function Qr(e,t){if(1&e&&(P.Xb(0,"th"),P.Lc(1,"Price"),P.Wb()),2&e){var n=P.jc();P.Ic("top",n.inverseOfTranslation)}}function Kr(e,t){if(1&e&&(P.Xb(0,"td",42),P.Lc(1),P.Wb()),2&e){var n=t.$implicit,r=P.jc().$implicit;P.Db(1),P.Mc(r[n])}}function Zr(e,t){1&e&&(P.Xb(0,"mat-chip"),P.Lc(1,"Booking"),P.Wb())}function ei(e,t){1&e&&(P.Xb(0,"mat-chip",43),P.Lc(1,"Stuffing"),P.Wb())}function ti(e,t){1&e&&(P.Xb(0,"mat-chip",44),P.Lc(1,"Ready to load"),P.Wb())}function ni(e,t){1&e&&(P.Xb(0,"mat-chip",45),P.Lc(1,"Loaded"),P.Wb())}function ri(e,t){1&e&&(P.Xb(0,"mat-chip",43),P.Lc(1,"Discharge"),P.Wb())}function ii(e,t){1&e&&(P.Xb(0,"mat-chip",44),P.Lc(1,"Pick up"),P.Wb())}function oi(e,t){1&e&&(P.Xb(0,"mat-chip",45),P.Lc(1,"Complete"),P.Wb())}var ai=function(e,t){return{paid:e,"accent-100-bg":t}};function ci(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",48),P.Xb(2,"div",49),P.Xb(3,"span",50),P.Lc(4),P.Wb(),P.Xb(5,"span",19),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,ai,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.total_amount+n.total_tax,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function li(e,t){if(1&e&&(P.Xb(0,"td",46),P.Jc(1,ci,8,11,"ng-container",47),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.revenueVN)}}function si(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",48),P.Xb(2,"div",49),P.Xb(3,"span",50),P.Lc(4),P.Wb(),P.Xb(5,"span",19),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,ai,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.total_amount+n.total_tax,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function bi(e,t){if(1&e&&(P.Xb(0,"td",46),P.Jc(1,si,8,11,"ng-container",47),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.revenueNN)}}function pi(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",48),P.Xb(2,"div",49),P.Xb(3,"span",50),P.Lc(4),P.Wb(),P.Xb(5,"span",19),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,ai,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.total_amount+n.total_tax,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function ui(e,t){if(1&e&&(P.Xb(0,"td",46),P.Jc(1,pi,8,11,"ng-container",47),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.costVN)}}function di(e,t){if(1&e&&(P.Vb(0),P.Xb(1,"td",48),P.Xb(2,"div",49),P.Xb(3,"span",50),P.Lc(4),P.Wb(),P.Xb(5,"span",19),P.Lc(6),P.kc(7,"number"),P.Wb(),P.Wb(),P.Wb(),P.Ub()),2&e){var n=t.$implicit;P.Db(1),P.pc("ngClass",P.sc(8,ai,!!n.pay_date,!n.pay_date)),P.Db(1),P.pc("matTooltip",n.country_code),P.Db(2),P.Oc("",n.price_code," ",n.currency_code,""),P.Db(2),P.Mc(P.mc(7,5,n.total_amount+n.total_tax,"VND"==n.currency_code?"1.0-0":"1.2-2"))}}function fi(e,t){if(1&e&&(P.Xb(0,"td",46),P.Jc(1,di,8,11,"ng-container",47),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.pc("ngForOf",n.costNN)}}function hi(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",15),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit;return P.jc().createItem.emit([t,"Revenue"])})),P.Xb(1,"mat-icon",51),P.Lc(2,"add"),P.Wb(),P.Xb(3,"span"),P.Lc(4,"Revenue"),P.Wb(),P.Wb()}}function mi(e,t){if(1&e){var n=P.Yb();P.Xb(0,"button",15),P.fc("click",(function(e){P.Bc(n);var t=P.jc().$implicit;return P.jc().createItem.emit([t,"Cost"])})),P.Xb(1,"mat-icon",51),P.Lc(2,"add"),P.Wb(),P.Xb(3,"span"),P.Lc(4,"Cost"),P.Wb(),P.Wb()}}var gi=function(e,t){return{"border-bottom-vessel":e,"border-top-vessel":t}},vi=function(e,t){return{"red-600-fg":e,"teal-200-bg":t}};function yi(e,t){if(1&e){var n=P.Yb();P.Xb(0,"tr",24),P.Xb(1,"td"),P.Lc(2),P.Wb(),P.Xb(3,"td",25),P.Xb(4,"a",26),P.fc("click",(function(e){P.Bc(n);var r=t.$implicit;return P.jc().getVoyageSearch.emit(r.voyage)})),P.Lc(5),P.Wb(),P.Wb(),P.Xb(6,"td",3),P.Lc(7),P.Wb(),P.Xb(8,"td",3),P.Lc(9),P.Wb(),P.Xb(10,"td",4),P.Lc(11),P.kc(12,"date"),P.Wb(),P.Xb(13,"td",4),P.Lc(14),P.kc(15,"date"),P.Wb(),P.Xb(16,"td",27),P.Xb(17,"a",28),P.Lc(18),P.Wb(),P.Wb(),P.Xb(19,"td"),P.Lc(20),P.Wb(),P.Jc(21,Kr,2,1,"td",29),P.Xb(22,"td",30),P.Xb(23,"a",26),P.fc("click",(function(e){P.Bc(n);var r=t.$implicit;return P.jc().getCustomerSearch.emit(r.customer)})),P.Lc(24),P.Wb(),P.Wb(),P.Xb(25,"td",30),P.Lc(26),P.Wb(),P.Xb(27,"td"),P.Xb(28,"mat-chip-list",31),P.Jc(29,Zr,2,0,"mat-chip",32),P.Jc(30,ei,2,0,"mat-chip",33),P.Jc(31,ti,2,0,"mat-chip",34),P.Jc(32,ni,2,0,"mat-chip",35),P.Jc(33,ri,2,0,"mat-chip",33),P.Jc(34,ii,2,0,"mat-chip",34),P.Jc(35,oi,2,0,"mat-chip",35),P.Wb(),P.Wb(),P.Xb(36,"td",36),P.Lc(37),P.kc(38,"number"),P.Wb(),P.Jc(39,li,2,1,"td",37),P.Xb(40,"td",36),P.Lc(41),P.kc(42,"number"),P.Wb(),P.Jc(43,bi,2,1,"td",37),P.Xb(44,"td",36),P.Lc(45),P.kc(46,"number"),P.Wb(),P.Jc(47,ui,2,1,"td",37),P.Xb(48,"td",36),P.Lc(49),P.kc(50,"number"),P.Wb(),P.Jc(51,fi,2,1,"td",37),P.Xb(52,"td",38),P.Lc(53),P.kc(54,"number"),P.Wb(),P.Xb(55,"td",39),P.Xb(56,"mat-icon",13),P.fc("click",(function(e){return P.Bc(n),e.stopPropagation()})),P.Lc(57,"more_vert"),P.Wb(),P.Xb(58,"mat-menu",null,40),P.Jc(60,hi,5,0,"button",41),P.Jc(61,mi,5,0,"button",41),P.Wb(),P.Wb(),P.Wb()}if(2&e){var r=t.$implicit,i=t.index,o=P.xc(59),a=P.jc();P.pc("ngClass",P.sc(61,gi,i<a.data.length-2&&r.voyage!=a.data[i+1].voyage,i>0&&r.voyage!=a.data[i-1].voyage)),P.Db(2),P.Mc(i+1),P.Db(3),P.Mc(r.vessel_full_name),P.Db(2),P.Mc(r.pol_name),P.Db(2),P.Mc(r.pod_name),P.Db(2),P.Mc(P.mc(12,40,r.depart_time,"MM/dd/yyyy HH:mm")),P.Db(3),P.Mc(P.mc(15,43,r.arrive_time,"MM/dd/yyyy HH:mm")),P.Db(3),P.pc("routerLink","/apps/workflow/shipment/detail/"+r.id+"/soa"),P.Db(1),P.Mc(r.code),P.Db(2),P.Mc(r.bill),P.Db(1),P.pc("ngForOf",a.arrType),P.Db(1),P.pc("matTooltip",r.customer_name),P.Db(2),P.Mc(r.customer_short_name),P.Db(1),P.pc("matTooltip",r.agent_name),P.Db(1),P.Mc(r.agent_short_name),P.Db(2),P.pc("ngSwitch",r.process),P.Db(1),P.pc("ngSwitchCase",0),P.Db(1),P.pc("ngSwitchCase",1),P.Db(1),P.pc("ngSwitchCase",2),P.Db(1),P.pc("ngSwitchCase",3),P.Db(1),P.pc("ngSwitchCase",4),P.Db(1),P.pc("ngSwitchCase",5),P.Db(1),P.pc("ngSwitchCase",6),P.Db(1),P.pc("ngClass",P.sc(64,vi,r.profit.revenueVN<0,r.profit.revenueVN>=0)),P.Db(1),P.Mc(P.mc(38,46,r.profit.revenueVN,"1.0-0")),P.Db(2),P.pc("ngIf",a.revenueVNOpen),P.Db(1),P.pc("ngClass",P.sc(67,vi,r.profit.revenueNN<0,r.profit.revenueNN>=0)),P.Db(1),P.Mc(P.mc(42,49,r.profit.revenueNN,"1.0-0")),P.Db(2),P.pc("ngIf",a.revenueNNOpen),P.Db(1),P.pc("ngClass",P.sc(70,vi,r.profit.costVN<0,r.profit.costVN>=0)),P.Db(1),P.Mc(P.mc(46,52,r.profit.costVN,"1.0-0")),P.Db(2),P.pc("ngIf",a.costVNOpen),P.Db(1),P.pc("ngClass",P.sc(73,vi,r.profit.costNN<0,r.profit.costNN>=0)),P.Db(1),P.Mc(P.mc(50,55,r.profit.costNN,"1.0-0")),P.Db(2),P.pc("ngIf",a.costNNOpen),P.Db(1),P.pc("ngClass",P.sc(76,vi,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN<0,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN>=0)),P.Db(1),P.Mc(P.mc(54,58,r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN,"1.0-0")),P.Db(3),P.pc("matMenuTriggerFor",o),P.Db(4),P.pc("ngIf",a.permission.create),P.Db(1),P.pc("ngIf",a.permission.create)}}function xi(e,t){if(1&e&&(P.Xb(0,"td",52),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Ic("bottom",r.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(2,3,r.total[n],"1.0-0"))}}function ki(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}function wi(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}function Di(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}function Ci(e,t){if(1&e&&P.Sb(0,"td"),2&e){var n=P.jc();P.Ic("bottom",n.inverseOfTranslation2)}}var Si,_i=((Si=function(){function e(t,n){_classCallCheck(this,e),this.commonService=t,this.changeDetector=n,this.createItem=new P.o,this.openVessel=new P.o,this.getVoyageSearch=new P.o,this.getCustomerSearch=new P.o,this.exportExcel=new P.o,this.exportInvoiceRateExcel=new P.o,this.exportSoaExcel=new P.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||Si)(P.Rb(q.a),P.Rb(P.h))},Si.\u0275cmp=P.Lb({type:Si,selectors:[["report-bill-table"]],viewQuery:function(e,t){var n;1&e&&P.Sc(Fe.e,!0),2&e&&P.wc(n=P.gc())&&(t.viewPort=n.first)},inputs:{data:"data",shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total"},outputs:{createItem:"createItem",openVessel:"openVessel",getVoyageSearch:"getVoyageSearch",getCustomerSearch:"getCustomerSearch",exportExcel:"exportExcel",exportInvoiceRateExcel:"exportInvoiceRateExcel",exportSoaExcel:"exportSoaExcel"},decls:108,vars:109,consts:[[1,"h-100-p",3,"itemSize"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu2","matMenu"],["mat-menu-item","","aria-label","remove",3,"click"],[3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],[1,"text-right","text-bold"],[3,"bottom",4,"ngIf"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass"],[1,"w-152","sticky-col"],[1,"cursor-pointer",3,"click"],[1,"w-152","sticky-col2"],[1,"cursor-pointer",3,"routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],[1,"text-right","text-bold",3,"ngClass"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[2,"padding","0"],[4,"ngFor","ngForOf"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],["color","accent"],[1,"text-center","text-bold"]],template:function(e,t){if(1&e&&(P.Xb(0,"cdk-virtual-scroll-viewport",0),P.Xb(1,"table",1),P.Xb(2,"thead"),P.Xb(3,"tr"),P.Xb(4,"th"),P.Lc(5,"No"),P.Wb(),P.Xb(6,"th",2),P.Lc(7,"Voyage"),P.Wb(),P.Xb(8,"th",3),P.Lc(9,"POL"),P.Wb(),P.Xb(10,"th",3),P.Lc(11,"POD"),P.Wb(),P.Xb(12,"th",4),P.Lc(13,"ETD"),P.Wb(),P.Xb(14,"th",4),P.Lc(15,"ETA"),P.Wb(),P.Xb(16,"th",5),P.Lc(17,"Shipment"),P.Wb(),P.Xb(18,"th"),P.Lc(19,"Bill"),P.Wb(),P.Jc(20,Fr,2,3,"th",6),P.Xb(21,"th"),P.Lc(22,"Customer"),P.Wb(),P.Xb(23,"th"),P.Lc(24,"Agent"),P.Wb(),P.Xb(25,"th"),P.Lc(26,"Process"),P.Wb(),P.Xb(27,"th"),P.Xb(28,"div",7),P.Xb(29,"span"),P.Lc(30,"REVENUE VN"),P.Wb(),P.Jc(31,Pr,2,0,"mat-icon",8),P.Jc(32,Jr,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(33,Br,2,2,"th",10),P.Xb(34,"th"),P.Xb(35,"div",7),P.Xb(36,"span"),P.Lc(37,"REVENUE NN"),P.Wb(),P.Jc(38,zr,2,0,"mat-icon",8),P.Jc(39,Er,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(40,$r,2,2,"th",10),P.Xb(41,"th"),P.Xb(42,"div",7),P.Xb(43,"span"),P.Lc(44,"COST VN"),P.Wb(),P.Jc(45,Yr,2,0,"mat-icon",8),P.Jc(46,Hr,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(47,qr,2,2,"th",10),P.Xb(48,"th"),P.Xb(49,"div",7),P.Xb(50,"span"),P.Lc(51,"COST NN"),P.Wb(),P.Jc(52,Ur,2,0,"mat-icon",8),P.Jc(53,Gr,2,0,"mat-icon",9),P.Wb(),P.Wb(),P.Jc(54,Qr,2,2,"th",10),P.Xb(55,"th",11),P.Lc(56,"PROFIT"),P.Wb(),P.Xb(57,"th",12),P.Xb(58,"mat-icon",13),P.fc("click",(function(e){return e.stopPropagation()})),P.Lc(59,"print"),P.Wb(),P.Xb(60,"mat-menu",null,14),P.Xb(62,"button",15),P.fc("click",(function(e){return t.exportExcel.emit()})),P.Xb(63,"span"),P.Lc(64,"COM"),P.Wb(),P.Wb(),P.Xb(65,"button",15),P.fc("click",(function(e){return t.exportInvoiceRateExcel.emit()})),P.Xb(66,"span"),P.Lc(67,"Invoice Rate"),P.Wb(),P.Wb(),P.Xb(68,"button",15),P.fc("click",(function(e){return t.exportSoaExcel.emit()})),P.Xb(69,"span"),P.Lc(70,"Soa"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(71,"tbody"),P.Jc(72,yi,62,79,"tr",16),P.Wb(),P.Xb(73,"tfoot"),P.Xb(74,"tr"),P.Sb(75,"td"),P.Xb(76,"td",17),P.Lc(77,"Total"),P.Wb(),P.Sb(78,"td"),P.Sb(79,"td"),P.Sb(80,"td"),P.Sb(81,"td"),P.Sb(82,"td"),P.Sb(83,"td"),P.Jc(84,xi,3,6,"td",18),P.Sb(85,"td"),P.Sb(86,"td"),P.Sb(87,"td"),P.Xb(88,"td",19),P.Lc(89),P.kc(90,"number"),P.Wb(),P.Jc(91,ki,1,2,"td",20),P.Xb(92,"td",19),P.Lc(93),P.kc(94,"number"),P.Wb(),P.Jc(95,wi,1,2,"td",20),P.Xb(96,"td",19),P.Lc(97),P.kc(98,"number"),P.Wb(),P.Jc(99,Di,1,2,"td",20),P.Xb(100,"td",19),P.Lc(101),P.kc(102,"number"),P.Wb(),P.Jc(103,Ci,1,2,"td",20),P.Xb(104,"td",19),P.Lc(105),P.kc(106,"number"),P.Wb(),P.Sb(107,"td"),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e){var n=P.xc(61);P.pc("itemSize",53),P.Db(4),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.pc("ngForOf",t.arrType),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.costVNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(1),P.pc("ngIf",t.costVNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(4),P.pc("ngIf",!t.costNNOpen),P.Db(1),P.pc("ngIf",t.costNNOpen),P.Db(1),P.pc("ngIf",t.costNNOpen),P.Db(1),P.Ic("top",t.inverseOfTranslation),P.Db(2),P.Ic("top",t.inverseOfTranslation),P.Db(1),P.pc("matMenuTriggerFor",n),P.Db(14),P.pc("cdkVirtualForOf",t.data),P.Db(3),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.pc("ngForOf",t.arrType),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(90,94,t.total.revenueVN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueVNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(94,97,t.total.revenueNN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.revenueNNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(98,100,t.total.costVN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.costVNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(102,103,t.total.costNN.ALL,"1.0-0")),P.Db(2),P.pc("ngIf",t.costNNOpen),P.Db(1),P.Ic("bottom",t.inverseOfTranslation2),P.Db(1),P.Mc(P.mc(106,106,t.total.revenueVN.ALL+t.total.revenueNN.ALL-t.total.costVN.ALL-t.total.costNN.ALL,"1.0-0")),P.Db(2),P.Ic("bottom",t.inverseOfTranslation2)}},directives:[Fe.e,Fe.a,U.s,te.d,te.c,U.t,d.a,c.c,c.d,c.a,Fe.d,U.q,oe.a,o.j,f.a,C.c,U.x,U.y,C.a],pipes:[U.g,U.f],styles:["report-bill-table .report-table{font-size:12px!important;margin-bottom:4px;border-collapse:collapse}report-bill-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}report-bill-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}report-bill-table .report-table td,report-bill-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}report-bill-table .report-table td .mat-standard-chip,report-bill-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}report-bill-table .report-table .paid{background:#fff;color:#000}report-bill-table .report-table .cost-paid{background:#ffe1c2;color:#000}report-bill-table .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}report-bill-table .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}report-bill-table .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}report-bill-table .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}report-bill-table .report-table .border-bottom-vessel td{border-bottom:1px solid #000!important}report-bill-table .report-table .border-top-vessel td{border-top:1px solid #000!important}"],encapsulation:2,data:{animation:F.a}}),Si);function Wi(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,(r.total.revenueBalance[n]?r.total.revenueBalance[n]:0)-(r.total.costBalance[n]?r.total.costBalance[n]:0),"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Xi(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Wi,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.revenueBalance[n]>=0||r.total.costBalance[n]>=0)}}function Oi(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.revenueVN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Ni(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Oi,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.revenueVN[n])}}function Li(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.revenueNN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Ii(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Li,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.revenueNN[n])}}function Ti(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.costVN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function Vi(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Ti,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.costVN[n])}}function Ai(e,t){if(1&e&&(P.Xb(0,"div",17),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit,r=P.jc();P.Db(1),P.Oc(" ",P.mc(2,2,r.total.costNN[n],"VND"==n?"1.0-0":"1.2-2")," ",n," ")}}function ji(e,t){if(1&e&&(P.Xb(0,"div",15),P.Jc(1,Ai,3,5,"div",16),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(1),P.pc("ngIf",r.total.costNN[n])}}var Mi,Ri=((Mi=function(){function e(t,n,r,i,o,a,c,l){if(_classCallCheck(this,e),this.router=t,this.route=n,this._activatedRoute=r,this.authService=i,this.changeDetector=o,this.reportService=a,this._location=c,this._matDialog=l,this.voyage=[],this.arrType=[],this.height=560,this.selectItem=0,this.price=[],this.expand=!1,this._unsubscribeAll=new M.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var s=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(s)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4:e.authService.screenHeight-64-64-16-4})),this.reportService.onVesselChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.dataBill=e.reportService.dataBill,e.shipments=e.reportService.shipmentVessel,e.voyage=e.reportService.voyage,e.arrType=e.reportService.arrType,e.price=e.reportService.sptPrice,e.total=t[3],e.formSearch=e.reportService.currenSearch.formSearch})),this.reportService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.reportService.dataCustomer,e.supplier=e.reportService.dataSupplier,e.users=e.reportService.users})),this.reportService.onDataItemChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.prices=e.reportService.price,e.currency=e.reportService.currency,e.country=e.reportService.country}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.reportService.currenSearch.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")}))}},{key:"createItem",value:function(e){var t=this,n=e[0],r=e[1];"Revenue"==r&&(this.partner=this.customer),"Cost"==r&&(this.partner=this.supplier),this.dialogRef=this._matDialog.open(it.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+r,shipmentId:n.id,price:this.prices,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:n}}),this.dialogRef.componentInstance.createItem.subscribe((function(e){switch(t.authService.onRequestChanged.next(!0),r){case"Revenue":t.reportService.createSelRevenue(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+r)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+r}));break;case"Cost":t.reportService.createSelCost(e).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?t.dialogRef.componentInstance.matDialogRef.close(e):(console.error(e),t.dialogRef.componentInstance.errorMessage="Error create "+r)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.dialogRef.componentInstance.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create "+r}))}})),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getShipment()}))}},{key:"openVessel",value:function(e){this.dialogRef=this._matDialog.open(Xn,{panelClass:"report-bill-table-modal-dialog",data:{label:"Vessel",shipments:this.shipments,key:e,arrType:this.arrType,price:this.price}}),this.dialogRef.afterClosed().subscribe((function(e){}))}},{key:"exportExcel",value:function(e){var t=this;if(this.dataBill&&this.dataBill.length>0){var n=[];this.dataBill.map((function(e){e.costVN.map((function(t){n.push([null,null,e.bill,e.vessel_full_name,e.depart_time,e["20DC"],e["40HC"],null,null,t.amount*t.volume,t.pay_date])}))}));var r={};this.formSearch&&this.formSearch.date_from&&(n[0][1]=new Date(n[0][4]).setDate(1)),this.formSearch&&this.formSearch.issue_party&&(r=this.supplier.find((function(e){return e.id==t.formSearch.issue_party}))),this.reportService.getCostExcel(n,r)}}},{key:"exportInvoiceRateExcel",value:function(e){var t=this;if(this.dataBill&&this.dataBill.length>0){var n=[];this.dataBill.map((function(e){var t={of:0,rr:0,ecrs:0,com:0};e.revenueVN.map((function(e){e.price_code.includes("OF")&&(t.of+=e.amount*e.volume),e.price_code.includes("RR")&&(t.rr+=e.amount*e.volume),e.price_code.includes("ECRS")&&(t.ecrs+=e.amount*e.volume)})),e.costVN.map((function(e){e.price_code.includes("COM")&&(t.com+=e.amount*e.volume)})),n.push([null,null,e.bill,e.vessel_full_name,e.depart_time,e["20DC"],e["40HC"],t.of?t.of:null,t.rr?t.rr:null,t.ecrs?t.ecrs:null,t.of+t.rr+t.ecrs,t.com,null])}));var r={};this.formSearch&&this.formSearch.date_from&&(n[0][1]=new Date(n[0][4]).setDate(1)),this.formSearch&&this.formSearch.customer&&(r=this.customer.find((function(e){return e.id==t.formSearch.customer}))),this.reportService.getInvoiceRateExcel(n,r)}}},{key:"exportSoaExcel",value:function(e){this.dataBill&&this.dataBill.length>0&&this.reportService.buildExcelData(this.dataBill)}},{key:"getVoyageSearch",value:function(e){this.reportService.onVoyageChanged.next(e)}},{key:"getCustomerSearch",value:function(e){this.reportService.onCustomerChanged.next(e)}},{key:"inverseOfTranslation",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"".concat(this.viewPort._renderedContentOffset,"px"):"0px"}}]),e}()).\u0275fac=function(e){return new(e||Mi)(P.Rb(o.g),P.Rb(o.a),P.Rb(o.a),P.Rb(G.a),P.Rb(P.h),P.Rb(Q),P.Rb(U.n),P.Rb(y.b))},Mi.\u0275cmp=P.Lb({type:Mi,selectors:[["report-bill"]],viewQuery:function(e,t){var n;1&e&&P.Sc(Fe.e,!0),2&e&&P.wc(n=P.gc())&&(t.viewPort=n.first)},decls:40,vars:15,consts:[["fxLayout","column",2,"overflow","auto"],[1,"group","mt-8"],[1,"cursor-pointer",3,"click"],[1,"viewer-content"],[1,"item",3,"expanded"],["itemPanel",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","20"],[1,"group","ml-12","mb-12","mt-16"],[1,"pt-8","pb-8","w-100-p"],["fxLayout","row","fxLayoutAlign","center center",4,"ngFor","ngForOf"],[1,"group","mb-12","mt-16"],[1,"accent-600-fg"],[1,"table-div","mt-8"],[3,"data","arrType","shipments","voyage","price","permission","total","createItem","openVessel","exportExcel","exportInvoiceRateExcel","exportSoaExcel","getVoyageSearch","getCustomerSearch"],["fxLayout","row","fxLayoutAlign","center center"],["class","font-size-14 text-bold",4,"ngIf"],[1,"font-size-14","text-bold"]],template:function(e,t){if(1&e){var n=P.Yb();P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"h2",2),P.fc("click",(function(e){return P.Bc(n),P.xc(6).toggle()})),P.Lc(3,"Total"),P.Wb(),P.Xb(4,"div",3),P.Xb(5,"mat-expansion-panel",4,5),P.Xb(7,"div",6),P.Xb(8,"div",7),P.Xb(9,"div",8),P.Xb(10,"h2"),P.Lc(11,"Balance"),P.Wb(),P.Xb(12,"div",9),P.Jc(13,Xi,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(14,"div",7),P.Xb(15,"div",11),P.Xb(16,"h2",12),P.Lc(17,"RevenueVN"),P.Wb(),P.Xb(18,"div",9),P.Jc(19,Ni,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(20,"div",7),P.Xb(21,"div",11),P.Xb(22,"h2",12),P.Lc(23,"RevenueNN"),P.Wb(),P.Xb(24,"div",9),P.Jc(25,Ii,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(26,"div",7),P.Xb(27,"div",11),P.Xb(28,"h2",12),P.Lc(29,"CostVN"),P.Wb(),P.Xb(30,"div",9),P.Jc(31,Vi,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Xb(32,"div",7),P.Xb(33,"div",11),P.Xb(34,"h2",12),P.Lc(35,"CostNN"),P.Wb(),P.Xb(36,"div",9),P.Jc(37,ji,2,1,"div",10),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(38,"div",13),P.Xb(39,"report-bill-table",14),P.fc("createItem",(function(e){return t.createItem(e)}))("openVessel",(function(e){return t.openVessel(e)}))("exportExcel",(function(e){return t.exportExcel(e)}))("exportInvoiceRateExcel",(function(e){return t.exportInvoiceRateExcel(e)}))("exportSoaExcel",(function(e){return t.exportSoaExcel(e)}))("getVoyageSearch",(function(e){return t.getVoyageSearch(e)}))("getCustomerSearch",(function(e){return t.getCustomerSearch(e)})),P.Wb(),P.Wb(),P.Wb()}2&e&&(P.Ic("height",t.height,"px"),P.Db(5),P.pc("expanded",t.expand),P.Db(8),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(6),P.pc("ngForOf",t.total.currency),P.Db(2),P.pc("data",t.dataBill)("arrType",t.arrType)("shipments",t.shipments)("voyage",t.voyage)("price",t.price)("permission",t.permission)("total",t.total))},directives:[te.d,p.c,te.b,U.s,_i,te.c,U.t],pipes:[U.g],styles:["report-bill .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:0}report-bill .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-bill .group .viewer-content{width:100%;overflow:auto}report-bill .group .viewer-content .mat-expansion-panel-body{padding:0!important}report-bill .table-div{height:100%;border:1px solid #000!important}@media screen and (max-width:599px){report-bill .table-div{height:360px!important}}"],encapsulation:2,data:{animation:F.a}}),Mi),Fi=["formDirective"];function Pi(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",73),P.fc("click",(function(e){P.Bc(n);var t=P.jc(),r=t.$implicit,i=t.index,o=P.jc();return o.copyItem([r,o.shipment[i-1],"debit",r.type_name])})),P.Lc(1,"file_copy"),P.Wb()}2&e&&P.pc("matTooltipPosition","right")}function Ji(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",74),P.fc("click",(function(e){P.Bc(n);var t=P.jc(),r=t.$implicit,i=t.index,o=P.jc();return o.copyItem([r,o.shipment[i-1],"issue_date",r.type_name])})),P.Lc(1,"file_copy"),P.Wb()}2&e&&P.pc("matTooltipPosition","right")}function Bi(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",75),P.fc("click",(function(e){P.Bc(n);var t=P.jc(),r=t.$implicit,i=t.index,o=P.jc();return o.copyItem([r,o.shipment[i-1],"pay_date",r.type_name])})),P.Lc(1,"file_copy"),P.Wb()}2&e&&P.pc("matTooltipPosition","right")}function zi(e,t){if(1&e&&(P.Xb(0,"span"),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.Mc(P.mc(2,1,n.volume*(n.amount+n.tax_amount)*n.ex_rate,"1.0-0"))}}function Ei(e,t){if(1&e&&(P.Xb(0,"span"),P.Lc(1),P.kc(2,"number"),P.Wb()),2&e){var n=P.jc().$implicit;P.Db(1),P.Mc(P.mc(2,1,n.volume*(n.amount+n.tax_amount)*n.ex_rate,"1.0-0"))}}function $i(e,t){if(1&e){var n=P.Yb();P.Xb(0,"mat-icon",76),P.fc("click",(function(e){P.Bc(n);var t=P.jc(),r=t.$implicit,i=t.index,o=P.jc();return o.copyItem([r,o.shipment[i-1],"info",r.type_name])})),P.Lc(1,"file_copy"),P.Wb()}2&e&&P.pc("matTooltipPosition","right")}var Yi=function(e){return{"red-A700-fg":e}},Hi=function(e,t){return{"red-A700-fg":e,"rev-color":t}},qi=function(e,t){return{"red-A700-fg":e,"cost-color":t}},Ui=function(e,t){return{"rev-color":e,"cost-color":t}};function Gi(e,t){if(1&e){var n=P.Yb();P.Vb(0),P.Xb(1,"tr"),P.Xb(2,"td",53),P.Xb(3,"mat-checkbox",54),P.fc("click",(function(e){return P.Bc(n),e.stopPropagation()}))("change",(function(e){P.Bc(n);var r=t.$implicit,i=P.jc();return e?i.getSelectItem(r):null})),P.Wb(),P.Wb(),P.Xb(4,"td",55),P.Xb(5,"a",56),P.Lc(6),P.Wb(),P.Wb(),P.Xb(7,"td",57),P.Lc(8),P.Wb(),P.Xb(9,"td",58),P.Lc(10),P.Wb(),P.Xb(11,"td",59),P.Lc(12),P.Wb(),P.Xb(13,"td",60),P.Lc(14),P.Wb(),P.Xb(15,"td",61),P.Lc(16),P.Jc(17,Pi,2,1,"mat-icon",62),P.Wb(),P.Xb(18,"td",61),P.Xb(19,"span"),P.Lc(20),P.kc(21,"date"),P.Wb(),P.Jc(22,Ji,2,1,"mat-icon",63),P.Wb(),P.Xb(23,"td",61),P.Xb(24,"span"),P.Lc(25),P.kc(26,"date"),P.Wb(),P.Jc(27,Bi,2,1,"mat-icon",64),P.Wb(),P.Xb(28,"td",61),P.Lc(29),P.Wb(),P.Xb(30,"td",61),P.Lc(31),P.Wb(),P.Xb(32,"td",60),P.Lc(33),P.Wb(),P.Xb(34,"td",65),P.Lc(35),P.kc(36,"number"),P.Wb(),P.Xb(37,"td",66),P.Lc(38),P.Wb(),P.Xb(39,"td",67),P.Lc(40),P.kc(41,"number"),P.Wb(),P.Xb(42,"td",60),P.Lc(43),P.Wb(),P.Xb(44,"td",60),P.Lc(45),P.kc(46,"number"),P.Wb(),P.Xb(47,"td",65),P.Jc(48,zi,3,4,"span",68),P.Wb(),P.Xb(49,"td",65),P.Jc(50,Ei,3,4,"span",68),P.Wb(),P.Xb(51,"td",69),P.Lc(52),P.Wb(),P.Xb(53,"td",70),P.Lc(54),P.Jc(55,$i,2,1,"mat-icon",71),P.Wb(),P.Xb(56,"td",72),P.Lc(57),P.Wb(),P.Wb(),P.Ub()}if(2&e){var r=t.$implicit,i=t.index,o=P.jc();P.Db(3),P.pc("checked",r.select),P.Db(2),P.pc("routerLink","/apps/workflow/shipment/detail/"+r.shipment+"/soa"),P.Db(1),P.Mc(r.code),P.Db(2),P.Mc(r.bill),P.Db(1),P.pc("matTooltip",r.partner_name)("matTooltipPosition","right"),P.Db(1),P.Mc(r.partner_short_name),P.Db(1),P.pc("matTooltip",r.price_name)("matTooltipPosition","right"),P.Db(1),P.Mc(r.price_code),P.Db(2),P.Mc(r.unit_code),P.Db(2),P.Nc("",r.debit," "),P.Db(1),P.pc("ngIf",i>0&&o.shipment[i-1]&&o.shipment[i-1].debit&&!r.debit&&o.shipment[i-1].partner==r.partner),P.Db(3),P.Mc(P.mc(21,35,r.issue_date,"MM/dd/yyyy")),P.Db(2),P.pc("ngIf",i>0&&o.shipment[i-1]&&o.shipment[i-1].issue_date&&!r.issue_date&&o.shipment[i-1].partner==r.partner),P.Db(3),P.Mc(r.pay_date?P.mc(26,38,r.pay_date,"MM/dd/yyyy HH:mm"):""),P.Db(2),P.pc("ngIf",i>0&&o.shipment[i-1]&&o.shipment[i-1].pay_date&&!r.pay_date&&o.shipment[i-1].partner==r.partner),P.Db(2),P.Mc(r.inv_number),P.Db(2),P.Mc(r.bank_ref),P.Db(2),P.Mc(r.volume),P.Db(1),P.pc("ngClass",P.rc(50,Yi,r.amount<0)),P.Db(1),P.Mc(P.mc(36,41,r.amount,"1.2-2")),P.Db(3),P.Mc(r.tax),P.Db(2),P.Mc(P.mc(41,44,r.tax_amount,"1.2-2")),P.Db(3),P.Mc(r.currency_code),P.Db(2),P.Mc(P.mc(46,47,r.ex_rate,"1.0-0")),P.Db(2),P.pc("ngClass",P.sc(52,Hi,r.amount<0,"Revenue"==r.type_name)),P.Db(1),P.pc("ngIf","Revenue"==r.type_name),P.Db(1),P.pc("ngClass",P.sc(55,qi,r.amount<0,"Cost"==r.type_name)),P.Db(1),P.pc("ngIf","Cost"==r.type_name),P.Db(2),P.Mc(r.country_name),P.Db(2),P.Nc(" ",r.info," "),P.Db(1),P.pc("ngIf",i>0&&o.shipment[i-1]&&o.shipment[i-1].info&&!r.info&&o.shipment[i-1].partner==r.partner),P.Db(1),P.pc("ngClass",P.sc(58,Ui,"Revenue"==r.type_name,"Cost"==r.type_name)),P.Db(1),P.Mc(r.type_name)}}function Qi(e,t){if(1&e&&(P.Xb(0,"tr"),P.Sb(1,"td",53),P.Sb(2,"td",55),P.Sb(3,"td",57),P.Sb(4,"td",61),P.Sb(5,"td",69),P.Sb(6,"td",60),P.Sb(7,"td",61),P.Sb(8,"td",61),P.Sb(9,"td",61),P.Sb(10,"td",61),P.Sb(11,"td",61),P.Sb(12,"td",60),P.Sb(13,"td",77),P.Sb(14,"td",60),P.Sb(15,"td",61),P.Xb(16,"td",78),P.Lc(17,"Total"),P.Wb(),P.Xb(18,"td",78),P.Lc(19),P.Wb(),P.Xb(20,"td",79),P.Lc(21),P.kc(22,"number"),P.Wb(),P.Xb(23,"td",80),P.Lc(24),P.kc(25,"number"),P.Wb(),P.Sb(26,"td",69),P.Sb(27,"td",70),P.Sb(28,"td",61),P.Wb()),2&e){var n=t.$implicit,r=P.jc();P.Db(19),P.Mc(n),P.Db(2),P.Mc(P.mc(22,3,r.total.revenue[n],"VND"!=n?"1.2-2":"1.0-0")),P.Db(3),P.Mc(P.mc(25,6,r.total.cost[n],"VND"!=n?"1.2-2":"1.0-0"))}}var Ki,Zi=((Ki=function(){function e(t,n,r,i,o,a,c){_classCallCheck(this,e),this._activatedRoute=t,this.reportService=n,this.authService=r,this.formBuilder=i,this.changeDetector=o,this.datePipe=a,this.commonService=c,this.total={VND:0,revenue:{},cost:{},currency:[]},this.selected=[],this.checkAll=!1,this.height=560,this.form=this.formBuilder.group({code:[null],bill:[null],party:[null],price:[null],unit:[null],debit:[null],issue_date:[null],pay_date:["All"],inv_number:[null],bank_ref:[null],amount:[null],tax:[null],tax_amount:[null],currency:[null],payment_center:[null],info:[null],type_name:["All"]}),this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.reportService.onTypeChanged.next("edit"),this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.width<600?t.height-16:t.height-64-64-16})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){var n=t?64:0;e.height=e.authService.screenWidth<600?e.authService.screenHeight-16+n:e.authService.screenHeight-64-64-16+n})),this.reportService.onSoaChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.shipment=e.reportService.shipmentAddInfo,e.filterChange(),e.selected=[],e.total={VND:0,revenue:{},cost:{},currency:[]}})),this.form.valueChanges.subscribe((function(t){e.shipment.length>0&&e.filterChange(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewChecked",value:function(){this.changeDetector.detectChanges()}},{key:"getShipment",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.reportService.currenSearch.formSearch).then((function(t){e.authService.onRequestChanged.next(!1)})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")}))}},{key:"resetForm",value:function(){this.searchNgForm.reset()}},{key:"getCheckAll",value:function(){var e=this;this.checkAll=!0,this.selected.length==this.filterData.length&&(this.checkAll=!1),this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map((function(t){t.select=e.checkAll,t.select&&(e.total.currency.includes(t.currency_code)||(e.total.currency.push(t.currency_code),e.total.revenue[t.currency_code]=0,e.total.cost[t.currency_code]=0),e.selected.push(t),"Revenue"==t.type_name?(e.total.revenue[t.currency_code]+=t.volume*(t.amount+t.tax_amount),e.total.VND+=t.volume*(t.amount+t.tax_amount)*t.ex_rate):(e.total.cost[t.currency_code]+=t.volume*(t.amount+t.tax_amount),e.total.VND-=t.volume*(t.amount+t.tax_amount)*t.ex_rate))})),this.reportService.onUpdateAddInfoChanged.next([this.selected,this.total])}},{key:"getSelectItem",value:function(e){var t=this;e.select=!e.select,this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map((function(e){e.select&&(t.total.currency.includes(e.currency_code)||(t.total.currency.push(e.currency_code),t.total.revenue[e.currency_code]=0,t.total.cost[e.currency_code]=0),t.selected.push(e),"Revenue"==e.type_name?(t.total.revenue[e.currency_code]+=e.volume*(e.amount+e.tax_amount),t.total.VND+=e.volume*(e.amount+e.tax_amount)*e.ex_rate):(t.total.cost[e.currency_code]+=e.volume*(e.amount+e.tax_amount),t.total.VND-=e.volume*(e.amount+e.tax_amount)*e.ex_rate))})),this.checkAll=!1,this.selected.length==this.filterData.length&&(this.checkAll=!0),this.reportService.onUpdateAddInfoChanged.next([this.selected,this.total])}},{key:"copyItem",value:function(e){var t=e[1],n=e[2],r=e[3],i={};i.id=e[0].id,i[n]=["issue_date","pay_date"].includes(n)?this.datePipe.transform(t[n],"yyyy-MM-dd"):t[n],i.update_by=this.authService.user,this.updateServer(r,i,e)}},{key:"filterChange",value:function(e){var t=this;this.filterContent=e||this.form.value;var n=this.shipment.slice();n.map((function(e){e.issue_date&&(e.issue_date=new Date(e.issue_date).setDate(new Date(e.issue_date).getDate())),e.pay_date&&(e.pay_date=new Date(e.pay_date).setDate(new Date(e.pay_date).getDate()))})),this.filterContent&&(this.filterContent.code&&(n=n.filter((function(e){return e.code.toLowerCase().includes(t.filterContent.code.toLowerCase())}))),this.filterContent.bill&&(n=n.filter((function(e){return e.bill&&e.bill.toLowerCase().includes(t.filterContent.bill.toLowerCase())}))),this.filterContent.party&&(n=n.filter((function(e){return e.partner_short_name.toLowerCase().includes(t.filterContent.party.toLowerCase())}))),this.filterContent.price&&(n=n.filter((function(e){return e.price_code.toLowerCase().includes(t.filterContent.price.toLowerCase())}))),this.filterContent.unit&&(n=n.filter((function(e){return e.unit_code.toLowerCase().includes(t.filterContent.unit.toLowerCase())}))),this.filterContent.debit&&(n=n.filter((function(e){return e.debit&&e.debit.toLowerCase().includes(t.filterContent.debit.toLowerCase())}))),this.filterContent.issue_date&&(n=n.filter((function(e){return e.issue_date&&e.issue_date==new Date(t.filterContent.issue_date).getTime()}))),"All"!=this.filterContent.pay_date&&(1==this.filterContent.pay_date?n=n.filter((function(e){return e.pay_date})):0==this.filterContent.pay_date&&(n=n.filter((function(e){return!e.pay_date})))),this.filterContent.inv_number&&(n=n.filter((function(e){return e.inv_number&&e.inv_number.toLowerCase().includes(t.filterContent.inv_number.toLowerCase())}))),this.filterContent.bank_ref&&(n=n.filter((function(e){return e.bank_ref&&e.bank_ref.toLowerCase().includes(t.filterContent.bank_ref.toLowerCase())}))),this.filterContent.amount&&(n=n.filter((function(e){return e.amount==t.filterContent.amount}))),this.filterContent.tax&&(n=n.filter((function(e){return e.tax==t.filterContent.tax}))),this.filterContent.tax_amount&&(n=n.filter((function(e){return e.tax_amount==t.filterContent.tax_amount}))),this.filterContent.currency&&(n=n.filter((function(e){return e.currency_code.toLowerCase().includes(t.filterContent.currency.toLowerCase())}))),this.filterContent.payment_center&&(n=n.filter((function(e){return e.country_name.toLowerCase().includes(t.filterContent.payment_center.toLowerCase())}))),this.filterContent.info&&(n=n.filter((function(e){return e.info.toLowerCase().includes(t.filterContent.info.toLowerCase())}))),"All"!=this.filterContent.type_name&&(n=n.filter((function(e){return e.type_name==t.filterContent.type_name})))),this.filterData=n,console.log(n)}},{key:"updateServer",value:function(e,t,n){var r=this;switch(this.authService.onRequestChanged.next(!0),e){case"Revenue":t.pay_party=parseInt(n[1].partner),delete t.partner,this.reportService.updateSelRevenue(t).then((function(e){r.authService.onRequestChanged.next(!1),e.affectedRows>0?r.getShipment():(console.error(e),alert("Error update item"),r.getShipment())})).catch((function(e){r.authService.onRequestChanged.next(!1),console.error(e),alert("update item error")}));break;case"Cost":t.issue_party=parseInt(n[1].partner),delete t.partner,this.reportService.updateSelCost(t).then((function(e){r.authService.onRequestChanged.next(!1),e.affectedRows>0?r.getShipment():(console.error(e),alert("Error update item"),r.getShipment())})).catch((function(e){r.authService.onRequestChanged.next(!1),console.error(e),alert("update item error")}))}}},{key:"inverseOfTranslation1",get:function(){return this.viewPort&&this.viewPort._renderedContentOffset?"-".concat(this.viewPort._renderedContentOffset,"px"):"-0px"}},{key:"inverseOfTranslation2",get:function(){if(!this.viewPort||!this.viewPort._renderedContentOffset)return"32px";var e=parseInt(this.viewPort._renderedContentOffset);return"-".concat(e-=32,"px")}}]),e}()).\u0275fac=function(e){return new(e||Ki)(P.Rb(o.a),P.Rb(Q),P.Rb(G.a),P.Rb(ee.d),P.Rb(P.h),P.Rb(U.f),P.Rb(q.a))},Ki.\u0275cmp=P.Lb({type:Ki,selectors:[["report-add-info"]],viewQuery:function(e,t){var n;1&e&&(P.Sc(Fe.e,!0),P.Sc(Fi,!0)),2&e&&(P.wc(n=P.gc())&&(t.viewPort=n.first),P.wc(n=P.gc())&&(t.searchNgForm=n.first))},decls:129,vars:104,consts:[["name","form","fxLayout","column",1,"content-view",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["itemSize","43",1,"h-100-p"],[1,"simple","report-list-table"],[1,"sticky-header-1","w-40","text-left","sticky-left-col1",2,"z-index","25"],[3,"checked","indeterminate","change"],[1,"sticky-header-1","w-160","sticky-left-col2",2,"z-index","25"],[1,"sticky-header-1","w-160"],[1,"sticky-header-1","w-100"],[1,"sticky-header-1","w-140"],[1,"sticky-header-1","w-60"],[1,"sticky-header-1","w-120","text-right"],[1,"sticky-header-1","w-120","text-right","rev-color"],[1,"sticky-header-1","w-120","text-right","cost-color"],[1,"sticky-header-1","w-260"],[1,"sticky-header-1","w-100","sticky-right-col"],[1,"sticky-header-2","w-40","text-left","sticky-left-col1",2,"z-index","25"],[1,"sticky-header-2","sticky-left-col2",2,"z-index","25"],[1,"my-form-field","w-160"],["matInput","","inputCheck","","type","text","formControlName","code",2,"font-size","12px"],[1,"sticky-header-2"],["matInput","","inputCheck","","type","text","formControlName","bill",2,"font-size","12px"],[1,"my-form-field","w-100"],["matInput","","inputCheck","","type","text","formControlName","party",2,"font-size","12px"],[1,"my-form-field","w-140"],["matInput","","inputCheck","","type","text","formControlName","price",2,"font-size","12px"],[1,"my-form-field","w-60"],["matInput","","inputCheck","","type","text","formControlName","unit",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","debit",2,"font-size","12px"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date","readonly","true",2,"font-size","12px",3,"matDatepicker","change"],["matSuffix","",3,"for"],["issueDate",""],[1,"sticky-header-2","w-100"],["formControlName","pay_date",2,"font-size","12px"],[2,"font-size","12px",3,"value"],["matInput","","inputCheck","","type","text","formControlName","inv_number",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","bank_ref",2,"font-size","12px"],[1,"sticky-header-2","w-60"],[1,"sticky-header-2","w-120"],["matInput","","inputCheck","","type","number","formControlName","amount",2,"font-size","12px"],["matInput","","inputCheck","","type","number","formControlName","tax",2,"font-size","12px"],["matInput","","inputCheck","","type","number","formControlName","tax_amount",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","currency",2,"font-size","12px"],[1,"sticky-header-2","w-120","rev-color"],[1,"sticky-header-2","w-120","cost-color"],["matInput","","inputCheck","","type","text","formControlName","payment_center",2,"font-size","12px"],[1,"my-form-field","w-260"],["matInput","","inputCheck","","type","text","formControlName","info",2,"font-size","12px"],["fxLayout","row",1,"sticky-header-2","w-100","sticky-right-col"],["formControlName","type_name",2,"font-size","12px"],["color","warn",1,"cursor-pointer","ml-8",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[4,"ngFor","ngForOf"],[1,"w-40","text-center","sticky-left-col1"],[3,"checked","click","change"],[1,"w-160","sticky-left-col2"],[1,"cursor-pointer",3,"routerLink"],[1,"w-160"],[1,"w-100",3,"matTooltip","matTooltipPosition"],[1,"w-140",3,"matTooltip","matTooltipPosition"],[1,"w-60"],[1,"w-100"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy debit",3,"matTooltipPosition","click",4,"ngIf"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy issue_date date",3,"matTooltipPosition","click",4,"ngIf"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy pay date",3,"matTooltipPosition","click",4,"ngIf"],[1,"w-120","text-right",3,"ngClass"],[1,"w-60","text-center"],[1,"w-100","text-right"],[4,"ngIf"],[1,"w-140"],[1,"w-260"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy info",3,"matTooltipPosition","click",4,"ngIf"],[1,"w-100","sticky-right-col",3,"ngClass"],["color","accent","matTooltip","Copy debit",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],["color","accent","matTooltip","Copy issue_date date",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],["color","accent","matTooltip","Copy pay date",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],["color","accent","matTooltip","Copy info",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],[1,"w-120"],[1,"w-60","text-bold"],[1,"w-120","text-bold","text-right","rev-color"],[1,"w-120","text-bold","text-right","cost-color"]],template:function(e,t){if(1&e&&(P.Xb(0,"form",0,1),P.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName})),P.Xb(2,"cdk-virtual-scroll-viewport",2),P.Xb(3,"table",3),P.Xb(4,"thead"),P.Xb(5,"tr"),P.Xb(6,"th",4),P.Xb(7,"mat-checkbox",5),P.fc("change",(function(e){return t.getCheckAll()})),P.Wb(),P.Lc(8),P.Wb(),P.Xb(9,"th",6),P.Lc(10,"Code"),P.Wb(),P.Xb(11,"th",7),P.Lc(12,"Bill"),P.Wb(),P.Xb(13,"th",8),P.Lc(14,"Party"),P.Wb(),P.Xb(15,"th",9),P.Lc(16,"Price"),P.Wb(),P.Xb(17,"th",10),P.Lc(18,"Unit"),P.Wb(),P.Xb(19,"th",8),P.Lc(20,"Debit"),P.Wb(),P.Xb(21,"th",8),P.Lc(22,"Issue date"),P.Wb(),P.Xb(23,"th",8),P.Lc(24,"Pay date"),P.Wb(),P.Xb(25,"th",8),P.Lc(26,"Invoice number"),P.Wb(),P.Xb(27,"th",8),P.Lc(28,"Bank ref"),P.Wb(),P.Xb(29,"th",10),P.Lc(30,"Volume"),P.Wb(),P.Xb(31,"th",11),P.Lc(32,"Amount"),P.Wb(),P.Xb(33,"th",10),P.Lc(34,"Tax"),P.Wb(),P.Xb(35,"th",8),P.Lc(36,"Tax Amount"),P.Wb(),P.Xb(37,"th",10),P.Lc(38,"Currency"),P.Wb(),P.Xb(39,"th",10),P.Lc(40,"Ex rate"),P.Wb(),P.Xb(41,"th",12),P.Lc(42,"Total Revenue"),P.Wb(),P.Xb(43,"th",13),P.Lc(44,"Total Cost"),P.Wb(),P.Xb(45,"th",9),P.Lc(46,"Payment center"),P.Wb(),P.Xb(47,"th",14),P.Lc(48,"Info"),P.Wb(),P.Xb(49,"th",15),P.Lc(50,"Type"),P.Wb(),P.Wb(),P.Xb(51,"tr"),P.Sb(52,"th",16),P.Xb(53,"th",17),P.Xb(54,"mat-form-field",18),P.Sb(55,"input",19),P.Wb(),P.Wb(),P.Xb(56,"th",20),P.Xb(57,"mat-form-field",18),P.Sb(58,"input",21),P.Wb(),P.Wb(),P.Xb(59,"th",20),P.Xb(60,"mat-form-field",22),P.Sb(61,"input",23),P.Wb(),P.Wb(),P.Xb(62,"th",20),P.Xb(63,"mat-form-field",24),P.Sb(64,"input",25),P.Wb(),P.Wb(),P.Xb(65,"th",20),P.Xb(66,"mat-form-field",26),P.Sb(67,"input",27),P.Wb(),P.Wb(),P.Xb(68,"th",20),P.Xb(69,"mat-form-field",22),P.Sb(70,"input",28),P.Wb(),P.Wb(),P.Xb(71,"th",20),P.Xb(72,"mat-form-field",22),P.Xb(73,"input",29),P.fc("change",(function(e){return t.commonService.setDateStr(e)})),P.Wb(),P.Sb(74,"mat-datepicker-toggle",30),P.Sb(75,"mat-datepicker",null,31),P.Wb(),P.Wb(),P.Xb(77,"th",32),P.Xb(78,"mat-form-field",22),P.Xb(79,"mat-select",33),P.Xb(80,"mat-option",34),P.Lc(81,"All"),P.Wb(),P.Xb(82,"mat-option",34),P.Lc(83,"Yes"),P.Wb(),P.Xb(84,"mat-option",34),P.Lc(85,"No"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(86,"th",20),P.Xb(87,"mat-form-field",22),P.Sb(88,"input",35),P.Wb(),P.Wb(),P.Xb(89,"th",20),P.Xb(90,"mat-form-field",22),P.Sb(91,"input",36),P.Wb(),P.Wb(),P.Sb(92,"th",37),P.Xb(93,"th",38),P.Xb(94,"mat-form-field",22),P.Sb(95,"input",39),P.Wb(),P.Wb(),P.Xb(96,"th",20),P.Xb(97,"mat-form-field",26),P.Sb(98,"input",40),P.Wb(),P.Wb(),P.Xb(99,"th",20),P.Xb(100,"mat-form-field",22),P.Sb(101,"input",41),P.Wb(),P.Wb(),P.Xb(102,"th",20),P.Xb(103,"mat-form-field",26),P.Sb(104,"input",42),P.Wb(),P.Wb(),P.Sb(105,"th",37),P.Sb(106,"th",43),P.Sb(107,"th",44),P.Xb(108,"th",20),P.Xb(109,"mat-form-field",24),P.Sb(110,"input",45),P.Wb(),P.Wb(),P.Xb(111,"th",20),P.Xb(112,"mat-form-field",46),P.Sb(113,"input",47),P.Wb(),P.Wb(),P.Xb(114,"th",48),P.Xb(115,"mat-form-field",26),P.Xb(116,"mat-select",49),P.Xb(117,"mat-option",34),P.Lc(118,"All"),P.Wb(),P.Xb(119,"mat-option",34),P.Lc(120,"Revenue"),P.Wb(),P.Xb(121,"mat-option",34),P.Lc(122,"Cost"),P.Wb(),P.Wb(),P.Wb(),P.Xb(123,"mat-icon",50),P.fc("click",(function(e){return e.stopPropagation(),t.resetForm()})),P.Lc(124,"delete"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(125,"tbody"),P.Jc(126,Gi,58,61,"ng-container",51),P.Wb(),P.Xb(127,"tfoot"),P.Jc(128,Qi,29,9,"tr",52),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e){var n=P.xc(76);P.Ic("height",t.height,"px"),P.pc("formGroup",t.form),P.Db(6),P.Ic("top",t.inverseOfTranslation1),P.Db(1),P.pc("checked",t.checkAll)("indeterminate",t.selected.length>0&&!t.checkAll),P.Db(1),P.Nc(" ",t.selected.length," "),P.Db(1),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(2),P.Ic("top",t.inverseOfTranslation1),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(1),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(2),P.pc("matDatepicker",n),P.Db(1),P.pc("for",n),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.pc("value","All"),P.Db(2),P.pc("value",1),P.Db(2),P.pc("value",0),P.Db(2),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(1),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(1),P.Ic("top",t.inverseOfTranslation2),P.Db(1),P.Ic("top",t.inverseOfTranslation2),P.Db(1),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.Ic("top",t.inverseOfTranslation2),P.Db(3),P.pc("value","All"),P.Db(2),P.pc("value","Revenue"),P.Db(2),P.pc("value","Cost"),P.Db(5),P.pc("cdkVirtualForOf",t.filterData),P.Db(2),P.pc("ngForOf",t.total.currency)}},directives:[ee.A,ee.q,te.d,ee.h,Fe.e,Fe.a,k.a,u.c,h.b,ee.b,ee.p,ee.g,s.b,s.d,u.h,s.a,g.a,W.n,ee.u,d.a,Fe.d,U.s,o.j,f.a,U.t,U.q,oe.a],pipes:[U.f,U.g],styles:["report-add-info .content-view{overflow:auto}report-add-info .content-view .width-form{width:1400px}@media screen and (min-width:960px)and (max-width:1279px){report-add-info .content-view .width-form{width:100%}}report-add-info .content-view .group{margin-right:8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:4px;border:1px solid rgba(0,0,0,.12);min-height:60px;height:60px}report-add-info .content-view .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-add-info .content-view .report-list-table{font-size:12px}report-add-info .content-view .report-list-table .border-right{border-right:1px solid rgba(0,0,0,.12)}report-add-info .content-view .report-list-table td,report-add-info .content-view .report-list-table th{padding:8px!important;white-space:nowrap}report-add-info .content-view .report-list-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}report-add-info .content-view .report-list-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}report-add-info .content-view .report-list-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}report-add-info .content-view .report-list-table .sticky-left-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}report-add-info .content-view .report-list-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:40px;background-color:#fff;z-index:20}report-add-info .content-view .report-list-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}report-add-info .content-view .report-list-table .rev-color{background-color:#b3e5fc}report-add-info .content-view .report-list-table .cost-color{background-color:#ffcf9c}report-add-info .content-view .report-list-table .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}report-add-info .content-view .report-list-table .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2,data:{animation:F.a}}),Ki),eo=function(e){return{"blue-700":e}};function to(e,t){if(1&e){var n=P.Yb();P.Xb(0,"div",4),P.fc("click",(function(e){P.Bc(n);var r=t.$implicit;return P.jc().selectedYear=r})),P.Lc(1),P.Wb()}if(2&e){var r=t.$implicit,i=P.jc();P.pc("ngClass",P.rc(2,eo,i.selectedYear===r)),P.Db(1),P.Nc(" ",r," ")}}var no,ro,io=((ro=function(){function e(){_classCallCheck(this,e),this._registerCustomChartJSPlugin(),this.options={spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,tooltips:{position:"nearest",mode:"index",intersect:!1},layout:{padding:{left:8,right:8}},elements:{point:{radius:4,borderWidth:2,hoverRadius:4,hoverBorderWidth:2}},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"#000000",stepSize:400}}],yAxes:[{gridLines:{tickMarkLength:16},ticks:{stepSize:1e5}}]},plugins:{filler:{propagate:!1}}},this.colors=[{borderColor:"rgba(30, 136, 229, 0.87)",backgroundColor:"rgba(30, 136, 229, 0.87)",pointBackgroundColor:"rgba(30, 136, 229, 0.87)",pointHoverBackgroundColor:"rgba(30, 136, 229, 0.87)",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"},{borderColor:"#3949ab",backgroundColor:"#ffffff",pointBackgroundColor:"#3949ab",pointHoverBackgroundColor:"#3949ab",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"},{borderColor:"#5A00CC",backgroundColor:"#ffffff",pointBackgroundColor:"#5A00CC",pointHoverBackgroundColor:"#5A00CC",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"}]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.selectedYear=(new Date).getFullYear();var t=0;this.arrYear.map((function(n,r){r>0?t<e.labels[n].length&&(e.selectedYear=n,t=e.labels[n].length):t=e.labels[n].length}))}},{key:"_registerCustomChartJSPlugin",value:function(){window.Chart.plugins.register({afterDatasetsDraw:function(e,t){if(e.options.plugins.xLabelsOnTop&&(!e.options.plugins.xLabelsOnTop||!1!==e.options.plugins.xLabelsOnTop.active)){var n=e.ctx;e.data.datasets.forEach((function(t,r){var i=e.getDatasetMeta(r);i.hidden||i.data.forEach((function(e,r){n.fillStyle="rgba(255, 255, 255, 0.7)",n.font=window.Chart.helpers.fontString(13,"normal","Roboto, Helvetica Neue, Arial");var i=Math.round(t.data[r]).toString();n.textAlign="center",n.textBaseline="middle";var o=e.tooltipPosition();n.fillText(i,o.x,24),n.save(),n.beginPath(),n.setLineDash([5,3]),n.moveTo(o.x,39),n.lineTo(o.x,o.y-15),n.strokeStyle="rgba(255,255,255,0.12)",n.stroke(),n.restore()}))}))}}})}}]),e}()).\u0275fac=function(e){return new(e||ro)},ro.\u0275cmp=P.Lb({type:ro,selectors:[["report-chart-view"]],inputs:{height:"height",data:"data",label:"label",labels:"labels",arrYear:"arrYear"},decls:4,vars:7,consts:[["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center"],["class","py-8 px-12 border-radius-2 line-height-1 mr-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],["baseChart","","chartType","line",3,"datasets","labels","colors","options"],[1,"py-8","px-12","border-radius-2","line-height-1","mr-8","cursor-pointer",3,"ngClass","click"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"div",1),P.Jc(2,to,2,4,"div",2),P.Wb(),P.Sb(3,"canvas",3),P.Wb()),2&e&&(P.Ic("height",t.height-40,"px"),P.Db(2),P.pc("ngForOf",t.arrYear),P.Db(1),P.pc("datasets",t.data[t.selectedYear])("labels",t.labels[t.selectedYear])("colors",t.colors)("options",t.options))},directives:[te.d,te.c,U.s,I.a,U.q,oe.a],styles:[""],encapsulation:2}),ro),oo=((no=function(){function e(t,n,r,i,o,a){if(_classCallCheck(this,e),this.router=t,this.route=n,this._activatedRoute=r,this.authService=i,this.changeDetector=o,this.reportService=a,this.height=560,this._unsubscribeAll=new M.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{var c=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(c)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4})),this.authService.changeScreen.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4:e.authService.screenHeight-64-64-16-4})),this.reportService.onVesselChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.dataBill=e.reportService.dataBill,e.shipments=e.reportService.shipmentVessel,e.voyage=e.reportService.voyage,e.arrType=e.reportService.arrType,e.price=e.reportService.sptPrice,e.total=t[3],e.formSearch=e.reportService.currenSearch.formSearch,e.dataBill&&e.dataBill.length>0&&e.buildChart()})),this.reportService.onDataChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.customer=e.reportService.dataCustomer,e.supplier=e.reportService.dataSupplier,e.users=e.reportService.users})),this.reportService.onDataItemChanged.pipe(Object(R.a)(this._unsubscribeAll)).subscribe((function(t){e.prices=e.reportService.price,e.currency=e.reportService.currency,e.country=e.reportService.country}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"buildChart",value:function(){var e={},t={},n=[];this.dataBill.map((function(r){var i=new Date(r.depart_time).getFullYear();n.includes(i)||(n.push(i),e[i]=[],t[i]=[{label:"profit",data:[],fill:"start"},{label:"Revenue",data:[],fill:"start"},{label:"Cost",data:[],fill:"start"}]),e[i].push(r.code),t[i][0].data.push(Math.round(100*(r.profit.revenueVN+r.profit.revenueNN-r.profit.costVN-r.profit.costNN))/100),t[i][1].data.push(Math.round(100*(r.profit.revenueVN+r.profit.revenueNN))/100),t[i][2].data.push(Math.round(100*(r.profit.costVN+r.profit.costNN))/100)})),this.arrYear=n,this.labels=e,this.data=t,console.log(this.data)}}]),e}()).\u0275fac=function(e){return new(e||no)(P.Rb(o.g),P.Rb(o.a),P.Rb(o.a),P.Rb(G.a),P.Rb(P.h),P.Rb(Q))},no.\u0275cmp=P.Lb({type:no,selectors:[["report-chart"]],decls:6,vars:7,consts:[["fxLayout","column",2,"overflow","auto"],[1,"group","mt-8"],[1,"cursor-pointer"],[1,"viewer-content","pt-16"],[3,"arrYear","labels","data","label","height"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"h2",2),P.Lc(3,"Profit Chart"),P.Wb(),P.Xb(4,"div",3),P.Sb(5,"report-chart-view",4),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Ic("height",t.height,"px"),P.Db(5),P.pc("arrYear",t.arrYear)("labels",t.labels)("data",t.data)("label","Profit chart")("height",t.height))},directives:[te.d,io],styles:["report-chart .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:0}report-chart .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-chart .group .viewer-content{width:100%;overflow:auto}report-chart .group .viewer-content .mat-expansion-panel-body{padding:0!important}report-chart .table-div{height:100%;border:1px solid #000!important}@media screen and (max-width:599px){report-chart .table-div{height:360px!important}}"],encapsulation:2,data:{animation:F.a}}),no),ao=n("m4Vh");n.d(t,"ReportSoaModule",(function(){return so}));var co,lo=[{path:"",component:Re,resolve:{data:Q},children:[{path:"paydate",component:rt},{path:"vessel",component:Rr},{path:"add-info",component:Zi},{path:"bill",component:Ri},{path:"chart",component:oo}]},{path:"voyage/:id",component:Re,resolve:{data:Q},children:[{path:"paydate",component:rt},{path:"vessel",component:Rr},{path:"add-info",component:Zi},{path:"bill",component:Ri},{path:"chart",component:oo}]},{path:"customer/:customer",component:Re,resolve:{data:Q},children:[{path:"paydate",component:rt},{path:"vessel",component:Rr},{path:"add-info",component:Zi},{path:"bill",component:Ri},{path:"chart",component:oo}]}],so=((co=function e(){_classCallCheck(this,e)}).\u0275mod=P.Pb({type:co}),co.\u0275inj=P.Ob({factory:function(e){return new(e||co)},providers:[Q],imports:[[o.k.forChild(lo),c.b,a.a,l.b,s.c,b.c,p.b,u.e,d.b,f.b,h.c,m.c,g.b,v.c,y.e,x.b,k.b,w.b,D.d,C.e,S.b,_.b,X.b,O.k,N.c,L.b,I.b,T.b,W.t,V.a,A.a,j.f,Fe.g,Pe.b,ao.a]]}),co)},jD4G:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"filterArrayByString",value:function(e,t){var n=this;return""===t?e:(t=t.toLowerCase(),e.filter((function(e){return n.searchInObj(e,t)})))}},{key:"searchInObj",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if("string"==typeof r){if(this.searchInString(r,t))return!0}else if(Array.isArray(r)&&this.searchInArray(r,t))return!0;if("object"==typeof r&&this.searchInObj(r,t))return!0}}},{key:"searchInArray",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;if("string"==typeof c&&this.searchInString(c,t))return!0;if("object"==typeof c&&this.searchInObj(c,t))return!0}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"searchInString",value:function(e,t){return e.toLowerCase().includes(t)}},{key:"generateGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}},{key:"toggleInArray",value:function(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}},{key:"handleize",value:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}]),e}()},rPBI:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("fXoL"),i=n("XNiG"),o=n("1G5W"),a=n("3Pt+"),c=n("Kj3r"),l=n("/uUt"),s=n("0JVi"),b=n("ofXK"),p=n("znSr"),u=n("XiUz"),d=n("bTqV"),f=n("NFeN");function h(e,t){if(1&e){var n=r.Yb();r.Xb(0,"button",7),r.fc("click",(function(e){return r.Bc(n),r.jc().expand()})),r.Xb(1,"mat-icon",8),r.Lc(2,"search"),r.Wb(),r.Wb()}if(2&e){var i=r.jc();r.Db(1),r.pc("color",i.searchText&&""!==i.searchText?"accent":"")}}var m=function(e){return{expanded:e}},g=function(){var e=function(){function e(t){_classCallCheck(this,e),this._fuseConfigService=t,this.inputValue=new r.o,this.collapsed=!0,this.searchInput=new a.e(""),this._unsubscribeAll=new i.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._fuseConfigService.config.pipe(Object(o.a)(this._unsubscribeAll)).subscribe((function(t){e.fuseConfig=t})),this.searchInput.valueChanges.pipe(Object(o.a)(this._unsubscribeAll),Object(c.a)(300),Object(l.a)()).subscribe((function(t){e.searchText=t,e.inputValue.emit(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngOnChanges",value:function(e){e.searchText&&(e.searchText.currentValue||null==e.searchText.currentValue)&&(this.searchText=e.searchText.currentValue,this.searchInput.setValue(this.searchText))}},{key:"collapse",value:function(){this.collapsed=!0}},{key:"expand",value:function(){this.collapsed=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Rb(s.b))},e.\u0275cmp=r.Lb({type:e,selectors:[["filter-search-bar"]],inputs:{searchText:"searchText"},outputs:{inputValue:"inputValue"},features:[r.Bb()],decls:8,vars:5,consts:[[1,"filter-search-bar",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",1,"filter-search-bar-content"],["for","filter-search-bar-input"],["mat-icon-button","","class","filter-search-bar-expander","aria-label","Expand Search Bar",3,"click",4,"ngIf"],["id","filter-search-bar-input","type","text","placeholder","Search","fxFlex","",1,"ml-24",3,"formControl"],["mat-icon-button","","aria-label","Collapse Search Bar",1,"filter-search-bar-collapser",3,"click"],[1,"s-24","secondary-text"],["mat-icon-button","","aria-label","Expand Search Bar",1,"filter-search-bar-expander",3,"click"],[1,"s-24","secondary-text",3,"color"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"label",2),r.Jc(3,h,3,1,"button",3),r.Wb(),r.Sb(4,"input",4),r.Xb(5,"button",5),r.fc("click",(function(e){return t.collapse()})),r.Xb(6,"mat-icon",6),r.Lc(7,"close"),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.pc("ngClass",r.rc(3,m,!t.collapsed)),r.Db(3),r.pc("ngIf",t.collapsed),r.Db(1),r.pc("formControl",t.searchInput))},directives:[b.q,p.a,u.d,u.c,b.t,a.b,u.b,a.p,a.f,d.b,f.a],styles:["[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{height:56px}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:block}"]}),e}()}}]);