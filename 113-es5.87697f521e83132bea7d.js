function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{fY45:function(e,t,o){"use strict";o.r(t);var i,n=o("tyNb"),r=o("5HBU"),a=o("STbY"),c=o("/1cH"),b=o("iadO"),l=o("bTqV"),m=o("7EHt"),s=o("kmnG"),u=o("NFeN"),d=o("Qu3c"),p=o("qFsG"),f=o("wZkO"),h=o("d3UM"),g=o("QibW"),v=o("0IaG"),k=o("/t3+"),y=o("bSwM"),W=o("M9IT"),X=o("xHqg"),x=o("A5z7"),_=o("bv9b"),D=o("XhcP"),L=o("FKr1"),w=o("1jcm"),S=o("+0xr"),C=o("Dh3D"),B=o("IOBc"),O=o("212X"),A=o("vxfF"),I=o("cfqv"),F=o("LPQX"),M=o("XNiG"),j=o("1G5W"),P=o("PVWW"),q=o("fXoL"),N=o("HX77"),J=o("qXBG"),V=o("lJxs"),T=o("2Vo4"),E=o("tk/3"),H=o("I/3d"),z=((i=function(){function e(t,o,i,n){_classCallCheck(this,e),this.router=t,this.db=o,this.authService=i,this._httpClient=n,this.modul="pacific-logistics-network",this.codeCompany=["DCL","SEG","SEL","SIN","SLO","TWN","REF: "],this.onVoyageChanged=new T.a([]),this.onShipmentChanged=new T.a(null),this.onDataChanged=new T.a([]),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}return _createClass(e,[{key:"resolve",value:function(e){var t=this;return this.authService.routerData=e,new Promise((function(e,o){Promise.all([t.getData(),t.getVoyage()]).then((function(t){_toArray(t),e()}),o)}))}},{key:"getData",value:function(){var e=this,t={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(o,i){e._httpClient.get(e.authService.apiUrl+"/pln/book/data",t).subscribe((function(t){e.partner=t[0],e.seaport=t[1],e.user=t[2],e.commodity=t[3],e.packageType=t[4],e.price=t[5],e.unit=t[6],e.currency=t[7],e.country=t[8],e.seaTerminal=t[9],e.onDataChanged.next(t),o(t)}),i)}))}},{key:"getVoyage",value:function(e){var t=this,o={headers:new E.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})},i="/pln/book/voyage/"+(e?1:0);return new Promise((function(e,n){t._httpClient.get(t.authService.apiUrl+i,o).subscribe((function(o){t.voyage=o,t.onVoyageChanged.next(o),e(o)}),n)}))}},{key:"writeDatabaseBooking",value:function(e,t){this.bookingCollection=this.db.collection("pln-booking-draft"),this.bookingCollection.doc(e).set(t)}},{key:"readDatabaseBooking",value:function(){return this.bookingCollection=this.db.collection("pln-booking-draft"),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(V.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.booking}},{key:"readDatabaseBookingByUser",value:function(e){return this.bookingCollection=this.db.collection("pln-booking-draft",(function(t){return t.where("user","==",e)})),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(V.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))}))),this.booking}},{key:"getDatabaseBookingById",value:function(e){return this.bookingCollection=this.db.collection("pln-booking-draft"),this.bookingCollection.doc(e).valueChanges()}},{key:"updateDatabaseBookingById",value:function(e,t){this.bookingCollection=this.db.collection("pln-booking-draft"),this.bookingCollection.doc(e).set(t)}},{key:"deleteDatabaseBookingById",value:function(e){this.bookingDoc=this.db.doc("pln-booking-draft/"+e),this.bookingDoc.delete()}},{key:"updateBookingConfirm",value:function(e,t){var o=this,i=t.book,n=t.voyage,r=i.volume.map((function(e){return e.commodity.name})),a=(r=r.filter((function(e,t,o){return o.indexOf(e)===t}))).join(",");n.closing_time||(n.closing_time=n.depart_time-864e5);var c="";i.volume.map((function(e){c+=o.calculateTotal(e.cont_type.code,i.volume)+"x"+e.cont_type.code+" "})),n.closing_time||(n.closing_time=n.depart_time-864e5),t.bookConfirm={book_number:i.code,shipper:i.customer,agent:i.agent,volume:i.volume,commodity:a,empty_pick_up_depot:i.empty_pick_up_depot?i.empty_pick_up_depot:null,place_of_stuffing:i.place_of_stuffing?i.place_of_stuffing:null,closing_time_vgm:i.closing_time_vgm?i.closing_time_vgm:null,return_laden_cont:n.load_terminal_name,clcv:i.clcv?i.clcv:null,note:i.note?i.note:"All containers in clean, sound and cargo worthy condition",contact_note:i.contact_note?i.contact_note:"Vui l\xf2ng li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail legend@pln.vn v\xe0 com@pln.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container",pol:i.pol,pot:i.pot?i.pot.name:null,pod:i.pod,voyage:{pol:n.load_port_name,pod:n.discharge_port_name,load_terminal:n.load_terminal_name,discharge_terminal:n.discharge_terminal_name,vessel:n.vessel_name,voyage:n.name,closing_time:n.closing_time,etd:n.depart_time,eta:n.arrive_time},lcv_note:i.lcv_note?i.lcv_note:null,lcv_volume:c,truck_name:i.truck_name?i.truck_name:null,truck_number:i.truck_number?i.truck_number:null,valid:i.valid?i.valid:null,valid_time:i.valid_time?i.valid_time:null,code_company:i.code_company?i.code_company:""},this.updateDatabaseBookingById(e,t)}},{key:"calculateTotal",value:function(e,t){var o=0;return t.map((function(t){t.cont_type.code==e&&(o+=t.quantity)})),o}}]),e}()).\u0275fac=function(e){return new(e||i)(q.bc(n.g),q.bc(H.a),q.bc(J.a),q.bc(E.a))},i.\u0275prov=q.Nb({token:i,factory:i.\u0275fac}),i),R=o("B9zo"),$=o("ofXK"),G=o("fE3o"),U=o("0JVi"),Y=o("XiUz"),Q=o("znSr");function Z(e,t){if(1&e){var o=q.Yb();q.Xb(0,"button",8),q.fc("click",(function(e){q.Bc(o);var t=q.jc();return e.stopPropagation(),t.changeScreen(!0)})),q.Xb(1,"mat-icon"),q.Lc(2,"flip_to_front"),q.Wb(),q.Wb()}}function K(e,t){if(1&e){var o=q.Yb();q.Xb(0,"button",8),q.fc("click",(function(e){q.Bc(o);var t=q.jc();return e.stopPropagation(),t.changeScreen(!1)})),q.Xb(1,"mat-icon"),q.Lc(2,"flip_to_back"),q.Wb(),q.Wb()}}var ee,te,oe=((ee=function(){function e(t,o){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=o,this.fullScreen=!1,this.toggleSidebar=new q.o,this.showHideBar=new q.o,this.refreshPage=new q.o,this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||ee)(q.Rb(J.a),q.Rb(U.b))},ee.\u0275cmp=q.Lb({type:ee,selectors:[["shipment-book-form-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(q.Xb(0,"mat-toolbar",0),q.Xb(1,"div",1),q.Xb(2,"div",2),q.Xb(3,"div",3),q.Xb(4,"button",4),q.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),q.Xb(5,"mat-icon"),q.Lc(6,"menu"),q.Wb(),q.Wb(),q.Xb(7,"button",5),q.fc("click",(function(e){return t.showHideBar.emit()})),q.Xb(8,"mat-icon"),q.Lc(9,"menu"),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Xb(10,"div",6),q.Sb(11,"div",7),q.Xb(12,"button",8),q.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),q.Xb(13,"mat-icon",9),q.Lc(14,"refresh"),q.Wb(),q.Wb(),q.Sb(15,"div",7),q.Jc(16,Z,3,0,"button",10),q.Jc(17,K,3,0,"button",10),q.Sb(18,"div",7),q.Xb(19,"button",8),q.fc("click",(function(e){return t.toggleSidebar.emit("bookings-form-setting")})),q.Xb(20,"mat-icon"),q.Lc(21,"settings"),q.Wb(),q.Wb(),q.Sb(22,"div",7),q.Wb(),q.Wb(),q.Wb()),2&e&&(q.Db(16),q.pc("ngIf",!t.fullScreen),q.Db(1),q.pc("ngIf",t.fullScreen))},directives:[k.a,Y.b,Y.e,Y.d,Y.c,l.b,Q.b,u.a,$.t],styles:["shipment-book-form-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}shipment-book-form-header.below{z-index:2}shipment-book-form-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}shipment-book-form-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}shipment-book-form-header .logo .logo-icon{width:38px}shipment-book-form-header .chat-panel-toggle-button,shipment-book-form-header .language-button,shipment-book-form-header .quick-panel-toggle-button,shipment-book-form-header .user-button,shipment-book-form-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){shipment-book-form-header .chat-panel-toggle-button,shipment-book-form-header .language-button,shipment-book-form-header .quick-panel-toggle-button,shipment-book-form-header .user-button,shipment-book-form-header fuse-search-bar{height:56px}}shipment-book-form-header .navbar-toggle-button{min-width:56px;height:56px}shipment-book-form-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){shipment-book-form-header .toolbar-separator{height:56px}}"],encapsulation:2}),ee),ie=o("3Pt+"),ne=o("EwFO"),re=["formDirective"],ae=((te=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.form=this.formBuilder.group({valid:[null]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"resetForm",value:function(){this.searchNgForm.resetForm()}},{key:"onSearchFormSubmit",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||te)(q.Rb(ie.d))},te.\u0275cmp=q.Lb({type:te,selectors:[["shipment-book-form-sidebar"]],viewQuery:function(e,t){var o;1&e&&q.Sc(re,!0),2&e&&q.wc(o=q.gc())&&(t.searchNgForm=o.first)},inputs:{height:"height"},decls:19,vars:5,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["formControlName","valid"],[3,"value"]],template:function(e,t){1&e&&(q.Xb(0,"form",0,1),q.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form.value)})),q.Xb(2,"div",2),q.Xb(3,"div",3),q.Xb(4,"button",4),q.fc("click",(function(e){return t.resetForm()})),q.Lc(5," Reset "),q.Wb(),q.Wb(),q.Wb(),q.Xb(6,"div",5),q.Xb(7,"div",6),q.Xb(8,"div",7),q.Xb(9,"div",8),q.Xb(10,"div",9),q.Xb(11,"mat-form-field",10),q.Xb(12,"mat-label"),q.Lc(13,"Valid"),q.Wb(),q.Xb(14,"mat-select",11),q.Xb(15,"mat-option",12),q.Lc(16,"Invalid"),q.Wb(),q.Xb(17,"mat-option",12),q.Lc(18,"Valid"),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&e&&(q.pc("formGroup",t.form),q.Db(6),q.Ic("height",t.height,"px"),q.Db(9),q.pc("value",0),q.Db(2),q.pc("value",0))},directives:[ie.A,ie.q,ie.h,Y.d,Y.c,l.b,Y.b,ne.a,s.c,s.f,h.a,ie.p,ie.g,L.n],styles:["shipment-book-form-sidebar{border-right:1px solid #a3a3a3}shipment-book-form-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}shipment-book-form-sidebar .navbar-scroll-container{background:#fff!important}shipment-book-form-sidebar .navbar-scroll-container .navbar-content{padding-top:0}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}shipment-book-form-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),te);function ce(e,t){if(1&e&&(q.Xb(0,"fuse-sidebar",8),q.Sb(1,"shipment-book-form-sidebar",9),q.Wb()),2&e){var o=q.jc();q.Db(1),q.pc("height",o.height)}}function be(e,t){1&e&&q.Sb(0,"router-outlet")}var le,me=((le=function(){function e(t,o,i,n,r){var a=this;_classCallCheck(this,e),this._fuseSidebarService=t,this.route=o,this.router=i,this.authService=n,this.shipmentService=r,this.sidebarPanel=!1,this.height=560,this._unsubscribeAll=new M.a,this.bookId=this.shipmentService.bookId=this.route.snapshot.params.bookId,this._unsubscribeAll=new M.a,this.shipmentService.readDatabaseBooking().subscribe((function(e){a.bookingfb=e.slice(),0==a.bookId?a.shipmentService.onShipmentChanged.next(null):(a.data=a.bookingfb.find((function(e){return e.id==a.bookId})),a.shipmentService.onShipmentChanged.next(a.data))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.shipmentService)}},{key:"newContainer",value:function(e){this.router.navigate(["/apps/news/shipment-book-form/form/0"])}}]),e}()).\u0275fac=function(e){return new(e||le)(q.Rb(N.a),q.Rb(n.a),q.Rb(n.g),q.Rb(J.a),q.Rb(z))},le.\u0275cmp=q.Lb({type:le,selectors:[["shipment-book-form"]],decls:9,vars:3,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","shipment-book-form-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","shipment-book-form-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar"],[1,"content-card",2,"border","none","border-radius","0"],[4,"ngIf"],["name","shipment-book-form-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"height"]],template:function(e,t){1&e&&(q.Xb(0,"div",0),q.Jc(1,ce,2,1,"fuse-sidebar",1),q.Xb(2,"fuse-sidebar",2),q.Sb(3,"div",3),q.Wb(),q.Xb(4,"div",4),q.Xb(5,"shipment-book-form-header",5),q.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)})),q.Wb(),q.Xb(6,"div",6),q.Xb(7,"div",3),q.Jc(8,be,1,0,"router-outlet",7),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&e&&(q.Db(1),q.pc("ngIf",t.sidebarPanel),q.Db(4),q.pc("sidebarName","shipment-book-form-sidebar"),q.Db(3),q.pc("ngIf",!0))},directives:[R.a,$.t,G.a,oe,ae,n.l],styles:["shipment-book-form{width:100%}shipment-book-form .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){shipment-book-form .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}shipment-book-form .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){shipment-book-form .center .content-card shipment-book-form{border-right:0}shipment-book-form .center .content-card shipment-book-form,shipment-book-form .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}shipment-book-form .center .content-card shipment-details{display:none!important}shipment-book-form .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}shipment-book-form .center .content-card.current-shipment-selected .content shipment-book-form,shipment-book-form .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}shipment-book-form .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:P.a}}),le),se=o("JX91"),ue=o("qPk3"),de=o("0Zc1"),pe=["formDirective"];function fe(e,t){1&e&&q.Lc(0,"Fill your info")}function he(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1,"Booking number is required!"),q.Wb())}function ge(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Mc(o)}}function ve(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc(" ",o.name," ")}}function ke(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1," Owner is required "),q.Wb())}function ye(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc(" ",o.name," ")}}function We(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1," Create by by is required "),q.Wb())}function Xe(e,t){if(1&e&&(q.Xb(0,"mat-option",54),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc("",o.full_name," ")}}function xe(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1,"Customer is required!"),q.Wb())}function _e(e,t){if(1&e&&(q.Xb(0,"mat-option",54),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc("",o.full_name," ")}}function De(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1,"Principal is required!"),q.Wb())}function Le(e,t){if(1&e&&(q.Xb(0,"mat-option",54),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc("",o.full_name," ")}}function we(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1,"Agent is required!"),q.Wb())}function Se(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc(" ",o.name," ")}}function Ce(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1,"Port of loading is required!"),q.Wb())}function Be(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc(" ",o.name," ")}}function Oe(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc(" ",o.name," ")}}function Ae(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1,"Port of discharge is required!"),q.Wb())}function Ie(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1," From Date is required "),q.Wb())}function Fe(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1," To Date is required "),q.Wb())}function Me(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Nc(" ",o.name," ")}}function je(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1," Commodity is required "),q.Wb())}function Pe(e,t){if(1&e&&(q.Xb(0,"mat-option",53),q.Lc(1),q.Wb()),2&e){var o=t.$implicit;q.pc("value",o),q.Db(1),q.Mc(o.code)}}function qe(e,t){1&e&&(q.Xb(0,"mat-error"),q.Lc(1," Container type is required "),q.Wb())}function Ne(e,t){if(1&e){var o=q.Yb();q.Xb(0,"button",63),q.fc("click",(function(e){q.Bc(o);var t=q.jc().index;return q.jc().removeVolume(t)})),q.Xb(1,"mat-icon"),q.Lc(2,"delete"),q.Wb(),q.Wb()}}function Je(e,t){if(1&e){var o=q.Yb();q.Xb(0,"button",64),q.fc("click",(function(e){return q.Bc(o),q.jc(2).addVolume()})),q.Xb(1,"mat-icon"),q.Lc(2,"add"),q.Wb(),q.Wb()}}function Ve(e,t){if(1&e&&(q.Xb(0,"div",55),q.Xb(1,"mat-form-field",21),q.Xb(2,"mat-label"),q.Lc(3,"Commodity"),q.Wb(),q.Sb(4,"input",56),q.Xb(5,"mat-autocomplete",17,57),q.Jc(7,Me,2,2,"mat-option",15),q.kc(8,"async"),q.Wb(),q.Jc(9,je,2,0,"mat-error",12),q.Wb(),q.Xb(10,"mat-form-field",30),q.Xb(11,"mat-label"),q.Lc(12,"Qty"),q.Wb(),q.Sb(13,"input",58),q.Wb(),q.Xb(14,"mat-form-field",30),q.Xb(15,"mat-label"),q.Lc(16,"Container type"),q.Wb(),q.Xb(17,"mat-select",59),q.Jc(18,Pe,2,2,"mat-option",15),q.Wb(),q.Jc(19,qe,2,0,"mat-error",12),q.Wb(),q.Xb(20,"div",60),q.Jc(21,Ne,3,0,"button",61),q.Jc(22,Je,3,0,"button",62),q.Wb(),q.Wb()),2&e){var o=t.index,i=q.xc(6),n=q.jc();q.pc("formGroupName",o),q.Db(4),q.pc("matAutocomplete",i),q.Db(1),q.pc("displayWith",n.commonService.displayObjFn.bind(n,"name")),q.Db(2),q.pc("ngForOf",q.lc(8,9,n.filteredCommodity[o])),q.Db(2),q.pc("ngIf",n.formBook.controls.volume.controls[o].get("commodity").hasError("required")),q.Db(9),q.pc("ngForOf",n.packageType),q.Db(1),q.pc("ngIf",n.formBook.controls.volume.controls[o].get("cont_type").hasError("required")),q.Db(2),q.pc("ngIf",o>0),q.Db(1),q.pc("ngIf",n.formBook.controls.volume.value.length==o+1)}}function Te(e,t){1&e&&q.Lc(0,"Voyage")}function Ee(e,t){if(1&e){var o=q.Yb();q.Xb(0,"tr"),q.Xb(1,"td",71),q.Lc(2),q.Wb(),q.Xb(3,"td",72),q.Lc(4),q.Wb(),q.Xb(5,"td"),q.Lc(6),q.Wb(),q.Xb(7,"td"),q.Lc(8),q.kc(9,"date"),q.Wb(),q.Xb(10,"td"),q.Lc(11),q.kc(12,"date"),q.Wb(),q.Xb(13,"td"),q.Lc(14),q.Wb(),q.Xb(15,"td"),q.Lc(16),q.Wb(),q.Xb(17,"td"),q.Lc(18),q.kc(19,"date"),q.Wb(),q.Xb(20,"td"),q.Lc(21),q.Wb(),q.Xb(22,"td"),q.Lc(23),q.Wb(),q.Xb(24,"td"),q.Lc(25),q.Wb(),q.Xb(26,"td",69),q.Xb(27,"button",52),q.fc("click",(function(e){q.Bc(o);var i=t.$implicit,n=q.jc(2),r=q.xc(3);return n.getBook(r,i)})),q.Lc(28," Book "),q.Wb(),q.Wb(),q.Wb()}if(2&e){var i=t.$implicit,n=t.index;q.Db(2),q.Mc(n+1),q.Db(2),q.Oc("",i.vessel_name," ",i.name,""),q.Db(2),q.Mc(i.partner_short_name),q.Db(2),q.Mc(q.mc(9,12,i.closing_time,"MMM/dd HH:mm")),q.Db(3),q.Mc(q.mc(12,15,i.depart_time,"EEE MMM/dd/yyyy HH:mm")),q.Db(3),q.Mc(i.load_port_name),q.Db(2),q.Mc(i.load_terminal_name),q.Db(2),q.Mc(q.mc(19,18,i.arrive_time,"EEE MMM/dd/yyyy HH:mm")),q.Db(3),q.Mc(i.discharge_port_name),q.Db(2),q.Mc(i.discharge_terminal_name),q.Db(2),q.Mc(i.transit_time)}}function He(e,t){if(1&e&&(q.Xb(0,"div",65),q.Xb(1,"table",66),q.Xb(2,"thead"),q.Xb(3,"tr"),q.Xb(4,"th",67),q.Lc(5,"No"),q.Wb(),q.Xb(6,"th",68),q.Lc(7,"Vessel/Voyage"),q.Wb(),q.Xb(8,"th"),q.Lc(9,"Partner"),q.Wb(),q.Xb(10,"th"),q.Lc(11,"Closing time"),q.Wb(),q.Xb(12,"th"),q.Lc(13,"Depart time"),q.Wb(),q.Xb(14,"th"),q.Lc(15,"Port of Loading"),q.Wb(),q.Xb(16,"th"),q.Lc(17,"Load Terminal"),q.Wb(),q.Xb(18,"th"),q.Lc(19,"Arrive time"),q.Wb(),q.Xb(20,"th"),q.Lc(21,"Port of discharge"),q.Wb(),q.Xb(22,"th"),q.Lc(23,"Discharge terminal"),q.Wb(),q.Xb(24,"th"),q.Lc(25,"Transit time"),q.Wb(),q.Sb(26,"th",69),q.Wb(),q.Wb(),q.Xb(27,"tbody"),q.Jc(28,Ee,29,21,"tr",70),q.Wb(),q.Wb(),q.Wb()),2&e){var o=q.jc();q.Db(28),q.pc("ngForOf",o.filterVoyage)}}function ze(e,t){1&e&&q.Lc(0,"Selling rate")}function Re(e,t){if(1&e){var o=q.Yb();q.Xb(0,"tr"),q.Xb(1,"td",71),q.Lc(2),q.Wb(),q.Xb(3,"td",72),q.Lc(4),q.Wb(),q.Xb(5,"td"),q.Lc(6),q.Wb(),q.Xb(7,"td"),q.Lc(8),q.Wb(),q.Xb(9,"td"),q.Lc(10),q.kc(11,"number"),q.Wb(),q.Xb(12,"td"),q.Lc(13),q.Wb(),q.Xb(14,"td"),q.Lc(15),q.Wb(),q.Xb(16,"td"),q.Lc(17),q.kc(18,"number"),q.Wb(),q.Xb(19,"td"),q.Lc(20),q.Wb(),q.Xb(21,"td",69),q.Xb(22,"mat-icon",73),q.fc("click",(function(e){q.Bc(o);var i=t.$implicit,n=t.index;return q.jc(2).openModal([i,n])})),q.Lc(23,"edit"),q.Wb(),q.Xb(24,"mat-icon",74),q.fc("click",(function(e){q.Bc(o);var i=t.index;return q.jc(2).deleteRevenue(i)})),q.Lc(25,"delete"),q.Wb(),q.Wb(),q.Wb()}if(2&e){var i=t.$implicit,n=t.index;q.Db(2),q.Mc(n+1),q.Db(2),q.Mc(null==i.price?null:i.price.name),q.Db(2),q.Mc(null==i.price?null:i.price.unit_code),q.Db(2),q.Mc(i.volume),q.Db(2),q.Mc(q.mc(11,9,i.amount,"VND"!=i.currency.code?"1.2-2":"1.0-0")),q.Db(3),q.Mc(i.tax),q.Db(2),q.Mc(null==i.currency?null:i.currency.code),q.Db(2),q.Mc(q.mc(18,12,i.ex_rate,"1.2-2")),q.Db(3),q.Mc(null==i.payment_center?null:i.payment_center.name)}}function $e(e,t){if(1&e){var o=q.Yb();q.Xb(0,"div",65),q.Xb(1,"table",66),q.Xb(2,"thead"),q.Xb(3,"tr"),q.Xb(4,"th",71),q.Lc(5,"No"),q.Wb(),q.Xb(6,"th",72),q.Lc(7,"Price"),q.Wb(),q.Xb(8,"th"),q.Lc(9,"Unit"),q.Wb(),q.Xb(10,"th"),q.Lc(11,"Volume"),q.Wb(),q.Xb(12,"th"),q.Lc(13,"Amount"),q.Wb(),q.Xb(14,"th"),q.Lc(15,"Tax(%)"),q.Wb(),q.Xb(16,"th"),q.Lc(17,"Currency"),q.Wb(),q.Xb(18,"th"),q.Lc(19,"Ex rate"),q.Wb(),q.Xb(20,"th"),q.Lc(21,"Payment_center"),q.Wb(),q.Xb(22,"th",69),q.Xb(23,"mat-icon",73),q.fc("click",(function(e){return q.Bc(o),q.jc().openModal()})),q.Lc(24,"add"),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Xb(25,"tbody"),q.Jc(26,Re,26,15,"tr",70),q.Wb(),q.Wb(),q.Wb()}if(2&e){var i=q.jc();q.Db(26),q.pc("ngForOf",i.booking.revenue.sell)}}function Ge(e,t){1&e&&q.Lc(0,"Save booking")}function Ue(e,t){if(1&e&&(q.Xb(0,"div",75),q.Xb(1,"h2"),q.Lc(2,"Book info"),q.Wb(),q.Xb(3,"div",76),q.Xb(4,"div",77),q.Xb(5,"div",78),q.Xb(6,"div",79),q.Lc(7,"Booking number"),q.Wb(),q.Xb(8,"div",80),q.Lc(9),q.Wb(),q.Wb(),q.Wb(),q.Xb(10,"div",77),q.Xb(11,"div",78),q.Xb(12,"div",79),q.Lc(13,"Status"),q.Wb(),q.Xb(14,"div",80),q.Lc(15),q.Wb(),q.Wb(),q.Wb(),q.Xb(16,"div",81),q.Xb(17,"div",78),q.Xb(18,"div",79),q.Lc(19,"Customer"),q.Wb(),q.Xb(20,"div",80),q.Lc(21),q.Wb(),q.Wb(),q.Wb(),q.Xb(22,"div",81),q.Xb(23,"div",78),q.Xb(24,"div",79),q.Lc(25,"Principal"),q.Wb(),q.Xb(26,"div",80),q.Lc(27),q.Wb(),q.Wb(),q.Wb(),q.Xb(28,"div",81),q.Xb(29,"div",78),q.Xb(30,"div",79),q.Lc(31,"Agent"),q.Wb(),q.Xb(32,"div",80),q.Lc(33),q.Wb(),q.Wb(),q.Wb(),q.Xb(34,"div",77),q.Xb(35,"div",78),q.Xb(36,"div",79),q.Lc(37,"Port of loading"),q.Wb(),q.Xb(38,"div",80),q.Lc(39),q.Wb(),q.Wb(),q.Wb(),q.Xb(40,"div",77),q.Xb(41,"div",78),q.Xb(42,"div",79),q.Lc(43,"Port of transit"),q.Wb(),q.Xb(44,"div",80),q.Lc(45),q.Wb(),q.Wb(),q.Wb(),q.Xb(46,"div",81),q.Xb(47,"div",78),q.Xb(48,"div",79),q.Lc(49,"Port of discharge"),q.Wb(),q.Xb(50,"div",80),q.Lc(51),q.Wb(),q.Wb(),q.Wb(),q.Xb(52,"div",81),q.Xb(53,"div",78),q.Xb(54,"div",79),q.Lc(55,"Owner"),q.Wb(),q.Xb(56,"div",80),q.Lc(57),q.Wb(),q.Wb(),q.Wb(),q.Xb(58,"div",81),q.Xb(59,"div",78),q.Xb(60,"div",79),q.Lc(61,"Create_by"),q.Wb(),q.Xb(62,"div",80),q.Lc(63),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&e){var o=q.jc();q.Db(9),q.Mc(o.booking.book.code),q.Db(6),q.Mc(0==o.booking.book.status?"Invalid":"Valid"),q.Db(6),q.Mc(o.booking.book.customer.full_name),q.Db(6),q.Mc(o.booking.book.principal.full_name),q.Db(6),q.Mc(o.booking.book.agent?o.booking.book.agent.full_name:""),q.Db(6),q.Mc(o.booking.book.pol.name),q.Db(6),q.Mc(o.booking.book.pot?o.booking.book.pot.name:""),q.Db(6),q.Mc(o.booking.book.pod.name),q.Db(6),q.Mc(o.booking.book.owner?o.booking.book.owner.name:""),q.Db(6),q.Mc(o.booking.book.create_by?o.booking.book.create_by.name:"")}}function Ye(e,t){if(1&e&&(q.Xb(0,"div",75),q.Xb(1,"h2"),q.Lc(2,"Voyage"),q.Wb(),q.Xb(3,"div",76),q.Xb(4,"div",82),q.Xb(5,"div",78),q.Xb(6,"div",79),q.Lc(7,"Partner"),q.Wb(),q.Xb(8,"div",80),q.Lc(9),q.Wb(),q.Wb(),q.Wb(),q.Xb(10,"div",83),q.Xb(11,"div",78),q.Xb(12,"div",79),q.Lc(13,"Vessel/Voyage"),q.Wb(),q.Xb(14,"div",80),q.Lc(15),q.Wb(),q.Wb(),q.Wb(),q.Xb(16,"div",83),q.Xb(17,"div",78),q.Xb(18,"div",79),q.Lc(19,"Load port"),q.Wb(),q.Xb(20,"div",80),q.Lc(21),q.Wb(),q.Wb(),q.Wb(),q.Xb(22,"div",83),q.Xb(23,"div",78),q.Xb(24,"div",79),q.Lc(25,"Load terminal"),q.Wb(),q.Xb(26,"div",80),q.Lc(27),q.Wb(),q.Wb(),q.Wb(),q.Xb(28,"div",83),q.Xb(29,"div",78),q.Xb(30,"div",79),q.Lc(31,"Depart time"),q.Wb(),q.Xb(32,"div",80),q.Lc(33),q.kc(34,"date"),q.Wb(),q.Wb(),q.Wb(),q.Xb(35,"div",83),q.Xb(36,"div",78),q.Xb(37,"div",79),q.Lc(38,"Arrive time"),q.Wb(),q.Xb(39,"div",80),q.Lc(40),q.kc(41,"date"),q.Wb(),q.Wb(),q.Wb(),q.Xb(42,"div",83),q.Xb(43,"div",78),q.Xb(44,"div",79),q.Lc(45,"Discharge port"),q.Wb(),q.Xb(46,"div",80),q.Lc(47),q.Wb(),q.Wb(),q.Wb(),q.Xb(48,"div",83),q.Xb(49,"div",78),q.Xb(50,"div",79),q.Lc(51,"Discharge terminal"),q.Wb(),q.Xb(52,"div",80),q.Lc(53),q.Wb(),q.Wb(),q.Wb(),q.Xb(54,"div",83),q.Xb(55,"div",78),q.Xb(56,"div",79),q.Lc(57,"Closing time"),q.Wb(),q.Xb(58,"div",80),q.Lc(59),q.kc(60,"date"),q.Wb(),q.Wb(),q.Wb(),q.Xb(61,"div",83),q.Xb(62,"div",78),q.Xb(63,"div",79),q.Lc(64,"Transit time"),q.Wb(),q.Xb(65,"div",80),q.Lc(66),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&e){var o=q.jc();q.Db(9),q.Mc(o.booking.voyage.partner_name),q.Db(6),q.Mc(o.booking.voyage.vessel_full_name),q.Db(6),q.Mc(o.booking.voyage.load_port_name),q.Db(6),q.Mc(o.booking.voyage.load_terminal_name),q.Db(6),q.Mc(q.mc(34,10,o.booking.voyage.depart_time,"EEE MMM/dd/yyyy HH:mm")),q.Db(7),q.Mc(q.mc(41,13,o.booking.voyage.arrive_time,"EEE MMM/dd/yyyy HH:mm")),q.Db(7),q.Mc(o.booking.voyage.discharge_port_name),q.Db(6),q.Mc(o.booking.voyage.discharge_terminal_name),q.Db(6),q.Mc(q.mc(60,16,o.booking.voyage.closing_time,"MMM/dd HH:mm")),q.Db(7),q.Nc("",o.booking.voyage.transit_time," days")}}function Qe(e,t){if(1&e&&(q.Xb(0,"tr"),q.Xb(1,"td"),q.Lc(2),q.Wb(),q.Xb(3,"td"),q.Lc(4),q.Wb(),q.Xb(5,"td"),q.Lc(6),q.Wb(),q.Xb(7,"td"),q.Lc(8),q.Wb(),q.Wb()),2&e){var o=t.$implicit,i=t.index;q.Db(2),q.Mc(i+1),q.Db(2),q.Mc(o.commodity.name),q.Db(2),q.Mc(o.quantity),q.Db(2),q.Mc(o.cont_type.code)}}function Ze(e,t){if(1&e&&(q.Xb(0,"div",75),q.Xb(1,"h2"),q.Lc(2,"Volume"),q.Wb(),q.Xb(3,"div",8),q.Xb(4,"table",66),q.Xb(5,"thead"),q.Xb(6,"tr"),q.Xb(7,"th"),q.Lc(8,"No"),q.Wb(),q.Xb(9,"th"),q.Lc(10,"Commodity"),q.Wb(),q.Xb(11,"th"),q.Lc(12,"Quantity"),q.Wb(),q.Xb(13,"th"),q.Lc(14,"Container type"),q.Wb(),q.Wb(),q.Wb(),q.Xb(15,"tbody"),q.Jc(16,Qe,9,4,"tr",70),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&e){var o=q.jc();q.Db(16),q.pc("ngForOf",o.booking.book.volume)}}function Ke(e,t){if(1&e&&(q.Xb(0,"tr"),q.Xb(1,"td",71),q.Lc(2),q.Wb(),q.Xb(3,"td",72),q.Lc(4),q.Wb(),q.Xb(5,"td"),q.Lc(6),q.Wb(),q.Xb(7,"td"),q.Lc(8),q.Wb(),q.Xb(9,"td",84),q.Lc(10),q.kc(11,"number"),q.Wb(),q.Xb(12,"td"),q.Lc(13),q.Wb(),q.Xb(14,"td"),q.Lc(15),q.Wb(),q.Xb(16,"td"),q.Lc(17),q.kc(18,"number"),q.Wb(),q.Xb(19,"td",84),q.Lc(20),q.kc(21,"number"),q.Wb(),q.Xb(22,"td"),q.Lc(23),q.Wb(),q.Wb()),2&e){var o=t.$implicit,i=t.index;q.Db(2),q.Mc(i+1),q.Db(2),q.Mc(o.price.name),q.Db(2),q.Mc(o.price.unit_code),q.Db(2),q.Mc(o.volume),q.Db(2),q.Mc(q.mc(11,10,o.amount,"VND"!=o.currency.code?"1.2-2":"1.0-0")),q.Db(3),q.Mc(o.tax),q.Db(2),q.Mc(o.currency.code),q.Db(2),q.Mc(o.ex_rate?q.mc(18,13,o.ex_rate,"1.2-2"):1),q.Db(3),q.Mc(q.mc(21,16,o.volume*(o.amount+o.amount*o.tax/100)*(o.ex_rate?o.ex_rate:1),"1.0-0")),q.Db(3),q.Mc(o.payment_center.name)}}function et(e,t){if(1&e&&(q.Xb(0,"div",75),q.Xb(1,"h2"),q.Lc(2,"Selling rate"),q.Wb(),q.Xb(3,"div",8),q.Xb(4,"table",66),q.Xb(5,"thead"),q.Xb(6,"tr"),q.Xb(7,"th",71),q.Lc(8,"No"),q.Wb(),q.Xb(9,"th",72),q.Lc(10,"Price"),q.Wb(),q.Xb(11,"th"),q.Lc(12,"Unit"),q.Wb(),q.Xb(13,"th"),q.Lc(14,"Volume"),q.Wb(),q.Xb(15,"th",84),q.Lc(16,"Amount"),q.Wb(),q.Xb(17,"th"),q.Lc(18,"Tax(%)"),q.Wb(),q.Xb(19,"th"),q.Lc(20,"Currency"),q.Wb(),q.Xb(21,"th"),q.Lc(22,"Ex rate"),q.Wb(),q.Xb(23,"th",84),q.Lc(24,"Total"),q.Wb(),q.Xb(25,"th"),q.Lc(26,"Payment center"),q.Wb(),q.Wb(),q.Wb(),q.Xb(27,"tbody"),q.Jc(28,Ke,24,19,"tr",70),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&e){var o=q.jc();q.Db(28),q.pc("ngForOf",o.booking.revenue.sell)}}var tt,ot=((tt=function(){function e(t,o,i,n,r,a,c,b){_classCallCheck(this,e),this.shipmentService=t,this.router=o,this.authService=i,this.route=n,this.datePipe=r,this._matDialog=a,this._formBuilder=c,this.commonService=b,this.modul="workflow",this.date=new Date,this.minDate=new Date((new Date).setMonth((new Date).getMonth()-1)),this.maxDate=new Date((new Date).setMonth((new Date).getMonth()+1)),this.filterVoyage=[],this.codeCompany=[],this.formBook=this._formBuilder.group({code:[null,ie.y.required],code_company:[""],owner:[null,ie.y.required],create_by:[null,ie.y.required],customer:[null,ie.y.required],principal:[null,ie.y.required],agent:[null,ie.y.required],pol:[null,ie.y.required],pot:[null],pod:[null,ie.y.required],from_date:[this.date,ie.y.required],to_date:[this.maxDate,ie.y.required],volume:this._formBuilder.array([this._formBuilder.group({commodity:[null,ie.y.required],quantity:[1,ie.y.required],cont_type:[null,ie.y.required]})])}),this.height=560,this.check=!1,this.filteredCommodity=[],this.filteredPrice=[],this.filteredCountry=[],this._unsubscribeAll=new M.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.modul=this.shipmentService.modul,this.shipmentService.onDataChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){e.codeCompany=e.shipmentService.codeCompany,e.partner=e.shipmentService.partner,e.seaport=e.shipmentService.seaport,e.user=e.shipmentService.user,e.commodity=e.shipmentService.commodity,e.packageType=e.shipmentService.packageType,e.price=e.shipmentService.price,e.currency=e.shipmentService.currency,e.country=e.shipmentService.country;var o=e.user.find((function(t){return t.id==e.authService.user}));o&&(e.formBook.controls.owner.setValue(o),e.formBook.controls.create_by.setValue(o))})),this.shipmentService.onVoyageChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){e.voyage=e.shipmentService.voyage})),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2]),this.authService.windowSizeChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-12-12-64-72})),this.authService.changeScreen.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-12-12-64-72:e.authService.screenHeight-64-12-12-64-72})),this.shipmentService.onShipmentChanged.pipe(Object(j.a)(this._unsubscribeAll)).subscribe((function(t){if(e.oldData=t,e.oldData){e.draftId=e.oldData.id;for(var o=e.oldData.book.volume.length,i=function(t){t>0&&e.addVolume(),e.oldData.book.volume[t].commodity=e.commodity.find((function(o){return o.id==e.oldData.book.volume[t].commodity.id})),e.oldData.book.volume[t].cont_type=e.packageType.find((function(o){return o.id==e.oldData.book.volume[t].cont_type.id}))},n=0;n<o;n++)i(n);e.formBook.patchValue(e.oldData.book),e.minDate=new Date(e.oldData.book.from_date)}else e.booking=null,e.draftId=null})),this.filteredPol=this.formBook.controls.pol.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredPot=this.formBook.controls.pot.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredPod=this.formBook.controls.pod.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredCustomer=this.formBook.controls.customer.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredAgent=this.formBook.controls.agent.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredPrincipal=this.formBook.controls.principal.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.partner):[]}))),this.filteredUser=this.formBook.controls.owner.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"name",e.user):[]}))),this.filteredUser2=this.formBook.controls.create_by.valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(V.a)((function(t){return t?e.commonService.filterData(t,"name",e.user):[]}))),this.commodityControl(0)}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"addVolume",value:function(){this.volumeAdd.push(this._formBuilder.group({commodity:[null,ie.y.required],quantity:[1,ie.y.required],cont_type:[null,ie.y.required]})),this.commodityControl(this.volumeAdd.length-1)}},{key:"removeVolume",value:function(e){this.volumeAdd.removeAt(e)}},{key:"commodityControl",value:function(e){var t=this;this.filteredCommodity[e]=this.volumeAdd.at(e).get("commodity").valueChanges.pipe(Object(se.a)(""),Object(V.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(V.a)((function(e){return e?t.commonService.filterData(e,"name",t.commodity):[]})))}},{key:"updateBook",value:function(e){this.shipmentService.updateDatabaseBookingById(this.draftId,e)}},{key:"onFormBookSubmit",value:function(e,t){var o=this;if(this.filterVoyage=[],e.valid){var i=JSON.parse(JSON.stringify(e.value));if("string"==typeof i.pol)return void this.formBook.controls.pol.setValue(null);if("string"==typeof i.pod)return void this.formBook.controls.pod.setValue(null);if(i.pot&&"string"==typeof i.pot)return void this.formBook.controls.pot.setValue(null);if("string"==typeof i.customer&&this.formBook.controls.customer.setValue(null),"string"==typeof i.principal&&this.formBook.controls.principal.setValue(null),"string"==typeof i.agent)return void this.formBook.controls.agent.setValue(null);if("string"==typeof i.owner)return void this.formBook.controls.owner.setValue(null);if("string"==typeof i.create_by)return void this.formBook.controls.create_by.setValue(null);i.volume.map((function(e,t){"string"!=typeof e.commodity||o.formBook.controls.volume.controls[t].controls.commodity.setValue(null)}));var n=new Date(i.from_date).getTime()-864e5,r=new Date(i.to_date).getTime(),a=i.pot?i.pot.id:i.pod.id;this.filterVoyage=this.voyage.filter((function(e){return e.load_port==i.pol.id&&e.discharge_port==a&&e.depart_time>=n&&e.depart_time<=r})),t.next()}}},{key:"getBook",value:function(e,t){t.partner_name=t.partner_name;for(var o=JSON.parse(JSON.stringify(this.formBook.value)),i=(new Date(t.depart_time).getTime(),new Date(t.arrive_time).getTime(),o.volume.length),n=[],r={},a=0;a<i;a++)o[o.volume[a].cont_type.code]?o[o.volume[a].cont_type.code]+=o.volume[a].quantity:o[o.volume[a].cont_type.code]=o.volume[a].quantity,n.includes(o.volume[a].commodity.name)||n.push(o.volume[a].commodity.name),r[o.volume[a].cont_type.code]||(r[o.volume[a].cont_type.code]=0),r.PCS||(r.PCS=0),r.SPT||(r.SPT=1),r[o.volume[a].cont_type.code]+=o.volume[a].quantity,r.PCS+=o.volume[a].quantity;if(o.commodity=n.join(", "),this.booking={user:o.owner.id,name:o.owner.name,book:o,voyage:t,vol:r},this.draftId){for(var c in this.oldData.book)this.booking.book[c]||(this.booking.book[c]=this.oldData.book[c]);this.booking.revenue=this.oldData.revenue,this.booking.party=this.oldData.party}else this.booking.revenue={sell:[]},this.booking.party=[];e.next()}},{key:"openModal",value:function(e){var t=this;this.dialogRef=this._matDialog.open(ue.a,{panelClass:"shipment-book-soa-modal-dialog",data:{label:e?"Edit selling rate":"Create selling rate",price:this.price,currency:this.currency,partner:this.partner,customer:this.formBook.value.customer,country:this.country,data:e?e[0]:null}}),this.dialogRef.afterClosed().subscribe((function(o){o&&(e?t.booking.revenue.sell[e[1]]=o:t.booking.revenue.sell.push(o))}))}},{key:"deleteRevenue",value:function(e){this.booking.revenue.sell.splice(e,1)}},{key:"saveBook",value:function(){var e,t=this;this.booking.book.code_company||(this.booking.book.code_company=""),this.updateBookingConfirm(this.booking.book,this.booking.voyage),this.draftId?this.shipmentService.updateDatabaseBookingById(this.draftId,this.booking):(e=Date.now().toString(),this.shipmentService.writeDatabaseBooking(e,this.booking)),setTimeout((function(){t.draftId=t.draftId?t.draftId:e,t.router.navigate(["/apps/pacific-logistics-network/shipment/book/table"])}),3e3)}},{key:"updateBookingConfirm",value:function(e,t){var o=this,i=e.volume.map((function(e){return e.commodity.name})),n=(i=i.filter((function(e,t,o){return o.indexOf(e)===t}))).join(","),r="";e.volume.map((function(t){r+=o.shipmentService.calculateTotal(t.cont_type.code,e.volume)+"x"+t.cont_type.code+" "})),t.closing_time||(t.closing_time=t.depart_time-864e5),this.booking.bookConfirm={book_number:e.code,shipper:e.customer,agent:e.agent,volume:e.volume,commodity:n,empty_pick_up_depot:this.oldData?this.oldData.bookConfirm.empty_pick_up_depot:null,place_of_stuffing:this.oldData?this.oldData.bookConfirm.place_of_stuffing:null,closing_time_vgm:this.oldData?this.oldData.bookConfirm.closing_time_vgm:null,return_laden_cont:t.load_terminal_name,clcv:this.oldData?this.oldData.bookConfirm.clcv:null,note:this.oldData?this.oldData.bookConfirm.note:"All containers in clean, sound and cargo worthy condition",contact_note:this.oldData?this.oldData.bookConfirm.contact_note:"Vui l\xf2ng li\xean h\u1ec7 c\u1ea5p cont r\u1ed7ng qua mail legend@pln.vn v\xe0 com@pln.vn, l\u1ea5y seal t\u1ea1i b\xe3i c\u1ea5p v\u1ecf container",pol:this.formBook.value.pol,pot:this.formBook.value.pot?this.formBook.value.pot.name:null,pod:this.formBook.value.pod,voyage:{pol:t.load_port_name,pod:t.discharge_port_name,load_terminal:t.load_terminal_name,discharge_terminal:t.discharge_terminal_name,vessel:t.vessel_name,voyage:t.name,closing_time:t.closing_time,etd:t.depart_time,eta:t.arrive_time},lcv_note:this.oldData?this.oldData.bookConfirm.lcv_note:null,lcv_volume:r,truck_name:this.oldData?this.oldData.bookConfirm.truck_name:null,truck_number:this.oldData?this.oldData.bookConfirm.truck_number:null,valid:this.oldData?this.oldData.bookConfirm.valid:null,valid_time:this.oldData?this.oldData.bookConfirm.valid_time:null,code_company:this.oldData?this.oldData.bookConfirm.code_company:""}}},{key:"goBookList",value:function(){}},{key:"volumeAdd",get:function(){return this.formBook.get("volume")}}]),e}()).\u0275fac=function(e){return new(e||tt)(q.Rb(z),q.Rb(n.g),q.Rb(J.a),q.Rb(n.a),q.Rb($.f),q.Rb(v.b),q.Rb(ie.d),q.Rb(de.a))},tt.\u0275cmp=q.Lb({type:tt,selectors:[["shipment-book-form-overview"]],viewQuery:function(e,t){var o;1&e&&q.Sc(pe,!0),2&e&&q.wc(o=q.gc())&&(t.bookNgForm=o.first)},decls:145,vars:75,consts:[["fxLayout","column"],["fxLayout","row wrap"],["fxFlex","100",3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[2,"overflow","auto"],["fxFlex","1 0 auto","fxLayout","row wrap"],["fxFlex","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","code","required",""],[4,"ngIf"],["inputCheck","","type","text","matInput","","formControlName","code_company",3,"matAutocomplete"],["autoCode","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","type","text","matInput","","formControlName","owner","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOwner","matAutocomplete"],["inputCheck","","type","text","matInput","","formControlName","create_by","required","",3,"matAutocomplete"],["autoCreateby","matAutocomplete"],["fxFlex","50",1,"pr-8"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer","required","",3,"matAutocomplete"],["autoCus","matAutocomplete"],["style","font-size: 12px",3,"value",4,"ngFor","ngForOf"],["inputCheck","","aria-label","principal","matInput","","formControlName","principal","required","",3,"matAutocomplete"],["autoPrincipal","matAutocomplete"],["fxFlex","40",1,"pr-8"],["inputCheck","","matInput","","formControlName","agent","required","",3,"matAutocomplete"],["autoAgent","matAutocomplete"],["fxFlex","20",1,"pr-8"],["inputCheck","","type","text","aria-label","Port of Loading","matInput","","formControlName","pol","required","",3,"matAutocomplete"],["autoPOL","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of Transit","matInput","","formControlName","pol",3,"matAutocomplete"],["autoPOT","matAutocomplete"],["inputCheck","","type","text","aria-label","Port of discharge","matInput","","formControlName","pod","required","",3,"matAutocomplete"],["autoPOD","matAutocomplete"],["inputCheck","","matInput","","name","date","formControlName","from_date","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["fromDatePicker",""],["fxFlex","80",1,"pr-8"],["inputCheck","","matInput","","name","date","formControlName","to_date","required","",3,"matDatepicker","change"],["toDatePicker",""],["formArrayName","volume","fxFlex","1 0 auto","fxLayout","column"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","type","ngSubmit","color","accent"],["fxFlex","100",4,"ngIf"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent"],["fxLayout","row"],["mat-raised-button","","matStepperPrevious","","type","button","color","accent",1,"mr-8"],["mat-raised-button","","matStepperNext","","type","button","color","accent",3,"disabled"],["class","group mb-12 mt-12",4,"ngIf"],["mat-raised-button","","type","button","color","accent",1,"mr-8",3,"click"],[3,"value"],[2,"font-size","12px",3,"value"],["fxFlex","1 0 auto","fxLayout","row wrap",3,"formGroupName"],["inputCheck","","aria-label","commodity","matInput","","formControlName","commodity","required","",3,"matAutocomplete"],["autoCommodity","matAutocomplete"],["inputCheck","","matInput","","type","number","formControlName","quantity"],["formControlName","cont_type","required",""],["fxFlex","10",1,"pr-8"],["mat-mini-fab","","color","warn","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn","type","button",3,"click"],["mat-mini-fab","","color","accent","type","button",3,"click"],["fxFlex","100"],[1,"simple","book-table"],[1,"sticky-left-col1",2,"z-index","30"],[1,"sticky-left-col2",2,"z-index","30"],[1,"sticky-right-col"],[4,"ngFor","ngForOf"],[1,"sticky-left-col1"],[1,"sticky-left-col2"],["color","accent",1,"cursor-pointer","mr-8",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"group","mb-12","mt-12"],["fxLayout","row wrap","fxLayoutAlign","start",1,"p-16"],["fxFlex","25",1,"pb-8"],["fxLayout","column","fxLayoutAlign","start"],[1,"text-bold"],[1,"mt-8"],["fxFlex","50",1,"pb-8"],["fxFlex","50","fxFlex.gt-xs","75",1,"pb-8"],["fxFlex","50","fxFlex.gt-xs","25",1,"pb-8"],[1,"text-right"]],template:function(e,t){if(1&e){var o=q.Yb();q.Xb(0,"div",0),q.Xb(1,"div",1),q.Xb(2,"mat-horizontal-stepper",2,3),q.Xb(4,"mat-step",4),q.Jc(5,fe,1,0,"ng-template",5),q.Xb(6,"form",6,7),q.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){q.Bc(o);var i=q.xc(3);return t.onFormBookSubmit(t.formBook,i)})),q.Xb(8,"div",8),q.Xb(9,"div",0),q.Xb(10,"div",9),q.Xb(11,"mat-form-field",10),q.Xb(12,"mat-label"),q.Lc(13,"Booking number"),q.Wb(),q.Sb(14,"input",11),q.Jc(15,he,2,0,"mat-error",12),q.Wb(),q.Xb(16,"mat-form-field",10),q.Xb(17,"mat-label"),q.Lc(18,"Code"),q.Wb(),q.Sb(19,"input",13),q.Xb(20,"mat-autocomplete",null,14),q.Jc(22,ge,2,2,"mat-option",15),q.Wb(),q.Wb(),q.Xb(23,"mat-form-field",10),q.Xb(24,"mat-label"),q.Lc(25,"Owner"),q.Wb(),q.Sb(26,"input",16),q.Xb(27,"mat-autocomplete",17,18),q.Jc(29,ve,2,2,"mat-option",15),q.kc(30,"async"),q.Wb(),q.Jc(31,ke,2,0,"mat-error",12),q.Wb(),q.Xb(32,"mat-form-field",10),q.Xb(33,"mat-label"),q.Lc(34,"Create by"),q.Wb(),q.Sb(35,"input",19),q.Xb(36,"mat-autocomplete",17,20),q.Jc(38,ye,2,2,"mat-option",15),q.kc(39,"async"),q.Wb(),q.Jc(40,We,2,0,"mat-error",12),q.Wb(),q.Xb(41,"mat-form-field",21),q.Xb(42,"mat-label"),q.Lc(43,"Customer"),q.Wb(),q.Sb(44,"input",22),q.Xb(45,"mat-autocomplete",17,23),q.Jc(47,Xe,2,2,"mat-option",24),q.kc(48,"async"),q.Wb(),q.Jc(49,xe,2,0,"mat-error",12),q.Wb(),q.Xb(50,"mat-form-field",21),q.Xb(51,"mat-label"),q.Lc(52,"Principal"),q.Wb(),q.Sb(53,"input",25),q.Xb(54,"mat-autocomplete",17,26),q.Jc(56,_e,2,2,"mat-option",24),q.kc(57,"async"),q.Wb(),q.Jc(58,De,2,0,"mat-error",12),q.Wb(),q.Xb(59,"mat-form-field",27),q.Xb(60,"mat-label"),q.Lc(61,"Agent"),q.Wb(),q.Sb(62,"input",28),q.Xb(63,"mat-autocomplete",17,29),q.Jc(65,Le,2,2,"mat-option",24),q.kc(66,"async"),q.Wb(),q.Jc(67,we,2,0,"mat-error",12),q.Wb(),q.Xb(68,"mat-form-field",30),q.Xb(69,"mat-label"),q.Lc(70,"Port of loading"),q.Wb(),q.Sb(71,"input",31),q.Xb(72,"mat-autocomplete",17,32),q.Jc(74,Se,2,2,"mat-option",15),q.kc(75,"async"),q.Wb(),q.Jc(76,Ce,2,0,"mat-error",12),q.Wb(),q.Xb(77,"mat-form-field",30),q.Xb(78,"mat-label"),q.Lc(79,"Port of transit"),q.Wb(),q.Sb(80,"input",33),q.Xb(81,"mat-autocomplete",17,34),q.Jc(83,Be,2,2,"mat-option",15),q.kc(84,"async"),q.Wb(),q.Wb(),q.Xb(85,"mat-form-field",30),q.Xb(86,"mat-label"),q.Lc(87,"Port of discharge"),q.Wb(),q.Sb(88,"input",35),q.Xb(89,"mat-autocomplete",17,36),q.Jc(91,Oe,2,2,"mat-option",15),q.kc(92,"async"),q.Wb(),q.Jc(93,Ae,2,0,"mat-error",12),q.Wb(),q.Xb(94,"mat-form-field",30),q.Xb(95,"mat-label"),q.Lc(96,"From Date"),q.Wb(),q.Xb(97,"input",37),q.fc("change",(function(e){return t.commonService.setDateStr(e)})),q.Wb(),q.Sb(98,"mat-datepicker-toggle",38),q.Sb(99,"mat-datepicker",null,39),q.Jc(101,Ie,2,0,"mat-error",12),q.Wb(),q.Xb(102,"mat-form-field",40),q.Xb(103,"mat-label"),q.Lc(104,"To Date"),q.Wb(),q.Xb(105,"input",41),q.fc("change",(function(e){return t.commonService.setDateStr(e)})),q.Wb(),q.Sb(106,"mat-datepicker-toggle",38),q.Sb(107,"mat-datepicker",null,42),q.Jc(109,Fe,2,0,"mat-error",12),q.Wb(),q.Xb(110,"div",43),q.Jc(111,Ve,23,11,"div",44),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Xb(112,"div"),q.Xb(113,"button",45),q.Lc(114," Next "),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Xb(115,"mat-step"),q.Jc(116,Te,1,0,"ng-template",5),q.Xb(117,"div",8),q.Xb(118,"div",1),q.Jc(119,He,29,1,"div",46),q.Wb(),q.Wb(),q.Xb(120,"div"),q.Xb(121,"button",47),q.Lc(122," Back "),q.Wb(),q.Wb(),q.Wb(),q.Xb(123,"mat-step"),q.Jc(124,ze,1,0,"ng-template",5),q.Xb(125,"div",8),q.Xb(126,"div",1),q.Jc(127,$e,27,1,"div",46),q.Wb(),q.Wb(),q.Xb(128,"div",48),q.Xb(129,"button",49),q.Lc(130," Back "),q.Wb(),q.Xb(131,"button",50),q.Lc(132," Next "),q.Wb(),q.Wb(),q.Wb(),q.Xb(133,"mat-step"),q.Jc(134,Ge,1,0,"ng-template",5),q.Xb(135,"div",8),q.Jc(136,Ue,64,10,"div",51),q.Jc(137,Ye,67,19,"div",51),q.Jc(138,Ze,17,1,"div",51),q.Jc(139,et,29,1,"div",51),q.Wb(),q.Xb(140,"div",48),q.Xb(141,"button",49),q.Lc(142," Previous "),q.Wb(),q.Xb(143,"button",52),q.fc("click",(function(e){return t.saveBook()})),q.Lc(144," Save "),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb()}if(2&e){var i=q.xc(21),n=q.xc(28),r=q.xc(37),a=q.xc(46),c=q.xc(55),b=q.xc(64),l=q.xc(73),m=q.xc(82),s=q.xc(90),u=q.xc(100),d=q.xc(108);q.Db(2),q.pc("linear",!0),q.Db(2),q.pc("stepControl",t.formBook),q.Db(2),q.pc("formGroup",t.formBook),q.Db(2),q.Ic("height",t.height-48,"px"),q.Db(7),q.pc("ngIf",t.formBook.get("code").hasError("required")),q.Db(4),q.pc("matAutocomplete",i),q.Db(3),q.pc("ngForOf",t.codeCompany),q.Db(4),q.pc("matAutocomplete",n),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),q.Db(2),q.pc("ngForOf",q.lc(30,59,t.filteredUser)),q.Db(2),q.pc("ngIf",t.formBook.get("owner").hasError("required")),q.Db(4),q.pc("matAutocomplete",r),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),q.Db(2),q.pc("ngForOf",q.lc(39,61,t.filteredUser2)),q.Db(2),q.pc("ngIf",t.formBook.get("create_by").hasError("required")),q.Db(4),q.pc("matAutocomplete",a),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),q.Db(2),q.pc("ngForOf",q.lc(48,63,t.filteredCustomer)),q.Db(2),q.pc("ngIf",t.formBook.get("customer").hasError("required")),q.Db(4),q.pc("matAutocomplete",c),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),q.Db(2),q.pc("ngForOf",q.lc(57,65,t.filteredPrincipal)),q.Db(2),q.pc("ngIf",t.formBook.get("principal").hasError("required")),q.Db(4),q.pc("matAutocomplete",b),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"full_name")),q.Db(2),q.pc("ngForOf",q.lc(66,67,t.filteredAgent)),q.Db(2),q.pc("ngIf",t.formBook.get("agent").hasError("required")),q.Db(4),q.pc("matAutocomplete",l),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),q.Db(2),q.pc("ngForOf",q.lc(75,69,t.filteredPol)),q.Db(2),q.pc("ngIf",t.formBook.get("pol").hasError("required")),q.Db(4),q.pc("matAutocomplete",m),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),q.Db(2),q.pc("ngForOf",q.lc(84,71,t.filteredPot)),q.Db(5),q.pc("matAutocomplete",s),q.Db(1),q.pc("displayWith",t.commonService.displayObjFn.bind(t,"name")),q.Db(2),q.pc("ngForOf",q.lc(92,73,t.filteredPod)),q.Db(2),q.pc("ngIf",t.formBook.get("pod").hasError("required")),q.Db(4),q.pc("matDatepicker",u),q.Db(1),q.pc("for",u),q.Db(3),q.pc("ngIf",t.formBook.get("from_date").hasError("required")),q.Db(4),q.pc("matDatepicker",d),q.Db(1),q.pc("for",d),q.Db(3),q.pc("ngIf",t.formBook.get("to_date").hasError("required")),q.Db(2),q.pc("ngForOf",t.volumeAdd.controls),q.Db(6),q.Ic("height",t.height-48,"px"),q.Db(2),q.pc("ngIf",t.formBook.valid),q.Db(6),q.Ic("height",t.height-48,"px"),q.Db(2),q.pc("ngIf",t.formBook.valid&&t.booking&&t.booking.revenue),q.Db(4),q.pc("disabled",!t.booking||!t.booking.revenue||0==t.booking.revenue.length),q.Db(4),q.Ic("height",t.height-48,"px"),q.Db(1),q.pc("ngIf",t.booking&&t.booking.book),q.Db(1),q.pc("ngIf",t.booking&&t.booking.voyage),q.Db(1),q.pc("ngIf",t.booking&&t.booking.book),q.Db(1),q.pc("ngIf",t.booking&&t.booking.revenue)}},directives:[Y.d,X.a,Y.b,X.b,X.c,ie.A,ie.q,ie.h,s.c,s.f,p.b,ie.b,ie.p,ie.g,ie.w,$.t,c.c,c.a,$.s,b.b,b.d,s.h,b.a,ie.c,l.b,X.f,X.e,s.b,L.n,ie.i,ie.u,h.a,u.a,Y.c],pipes:[$.b,$.f,$.g],styles:["shipment-book-form-overview .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:16px 0 8px}shipment-book-form-overview .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}shipment-book-form-overview .border-black{border:1px solid #000!important}shipment-book-form-overview .book-table{font-size:12px}shipment-book-form-overview .book-table td,shipment-book-form-overview .book-table th{padding:8px;font-size:12px;white-space:nowrap}shipment-book-form-overview .book-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}shipment-book-form-overview .book-table tfoot td{font-weight:600}shipment-book-form-overview .book-table .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}shipment-book-form-overview .book-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}shipment-book-form-overview .book-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background:#fff}shipment-book-form-overview .book-table tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}shipment-book-form-overview .book-table tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:P.a}}),tt),it=o("eZn4");o.d(t,"ShipmentBookFormModule",(function(){return at}));var nt,rt=[{path:"form/:bookId",component:me,resolve:{data:z},children:[{path:"overview",component:ot}]}],at=((nt=function e(){_classCallCheck(this,e)}).\u0275mod=q.Pb({type:nt}),nt.\u0275inj=q.Ob({factory:function(e){return new(e||nt)},providers:[z],imports:[[n.k.forChild(rt),a.b,r.a,c.b,b.c,l.c,m.b,s.e,u.b,d.b,p.c,f.c,h.b,g.c,v.e,k.b,y.b,W.b,X.d,x.e,_.b,D.b,w.b,S.k,C.c,L.t,B.a,O.a,F.f,A.g,I.b,it.a]]}),nt)}}]);