(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{BINB:function(t,e,n){"use strict";n.r(e);var i=n("tyNb"),r=n("5HBU"),o=n("STbY"),c=n("/1cH"),a=n("iadO"),s=n("bTqV"),l=n("7EHt"),b=n("kmnG"),p=n("NFeN"),d=n("Qu3c"),h=n("qFsG"),u=n("wZkO"),m=n("d3UM"),f=n("QibW"),g=n("0IaG"),v=n("/t3+"),y=n("bSwM"),x=n("M9IT"),D=n("xHqg"),w=n("A5z7"),S=n("bv9b"),k=n("XhcP"),W=n("FKr1"),C=n("1jcm"),X=n("+0xr"),_=n("Dh3D"),O=n("f0Cb"),N=n("LPYB"),L=n("zQsl"),I=n("IOBc"),T=n("212X"),V=n("LPQX"),A=n("XNiG"),M=n("1G5W"),j=n("PVWW"),R=n("fXoL"),F=n("HX77"),P=n("2Vo4"),J=n("jD4G"),B=n("tk/3"),z=n("UsMi"),E=n("6K47"),$=n("Iab2"),Y=n("0Zc1"),H=n("ofXK"),q=n("qXBG");let U=(()=>{class t{constructor(t,e,n,i,r){this._httpClient=t,this.commonService=e,this.datePipe=n,this.route=i,this.authService=r,this.defaultSearch={formSearch:{pay_party:null,issue_party:null,customer:null,load_agent:null,agent:null,voyage:null,payment_center:null,type:"ETA",date_from:null,date_to:null}},this.total={revenue:0,cost:0},this.total2={revenueVN:{ALL:0},revenueNN:{ALL:0},costVN:{ALL:0},costNN:{ALL:0},revenueBalance:{},costBalance:{},currency:[]},this.dataBill=[],this.onVoyageChanged=new A.a,this.onCustomerChanged=new A.a,this.onDataChanged=new P.a([]),this.onTypeChanged=new P.a("form"),this.onSoaChanged=new P.a([]),this.onDataItemChanged=new P.a([]),this.onVesselChanged=new P.a([]),this.onUpdateAddInfoChanged=new P.a([]),this.onSearchTextChanged=new A.a}resolve(t){if(this.authService.routerData=t,this.authService.back&&(this.authService.back=!1),!this.currenSearch||this.currenSearch&&!this.currenSearch.formSearch){let t=new Date,e=t.getMonth()-1,n=t.getFullYear();this.defaultSearch.formSearch.date_from=new Date(n,e-1,1),this.defaultSearch.formSearch.date_to=new Date(n,e+2,0),this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch))}return this.voyageId=this.currenSearch.formSearch.voyage=t.params.id?t.params.id:null,this.customerId=this.currenSearch.formSearch.customer=t.params.customer?t.params.customer:null,new Promise((t,e)=>{Promise.all([this.getSelShipmentFilterSoa(this.currenSearch.formSearch),this.getData(),this.getItemData()]).then(([e])=>{this.onSearchTextChanged.subscribe(t=>{this.searchText=t;let e=JSON.parse(JSON.stringify(this.shipment));this.searchText&&""!==this.searchText&&(e=J.a.filterArrayByString(e,this.searchText)),this.buildReport(e),this.buildVessel(e)}),t()},e)})}getSelShipmentFilterSoa(t){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/shipment/filter-soa2",t,e).subscribe(t=>{this.shipment=t.shipment,this.shipmentAddInfo=t.shipmentAddInfo,this.sptPrice=t.price,this.sptVoyage=t.voyage;let e=JSON.parse(JSON.stringify(this.shipment));this.searchText&&""!==this.searchText&&(e=J.a.filterArrayByString(e,this.searchText)),this.buildReport(e),this.buildVessel(e),n(t)},i)})}getData(){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/data",t).subscribe(t=>{this.dataCustomer=t[0],this.dataSupplier=t[1],this.users=t[3],this.onDataChanged.next(t),e(t)},n)})}getItemData(){let t={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel/book/book",t).subscribe(t=>{this.agent=t.agent,this.commodity=t.commodity,this.packageType=t.packageType,this.price=t.price,this.currency=t.currency,this.country=t.country,this.depot=t.depot,this.onDataItemChanged.next(t),e(t)},n)})}createSelRevenue(t){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/revenue",t,e).subscribe(t=>{n(t)},i)})}createSelCost(t){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/cost",t,e).subscribe(t=>{n(t)},i)})}buildReport(t){let e=[],n=[],i=[],r={},o={};function c(t,e,n){t[e][n]||(t[e][n]=0)}function a(t,a,s,l){var b;t[s]+=l.total_vnd,"revenue"==s?n.includes(l.partner)||(n.push((b=l).partner),r[b.partner]={id:b.partner,type:"revenue",full_name:b.partner_name,short_name:b.partner_short_name,revenue:{},last_paydate:null,last_pay:null,paydate_revenue:{},balance_paydate:{},data:{revenue:[]}}):i.includes(l.partner)||function(t){i.push(t.partner),o[t.partner]={id:t.partner,type:"cost",full_name:t.partner_name,short_name:t.partner_short_name,cost:{},last_paydate:null,last_pay:null,paydate_cost:{},balance_paydate:{},data:{cost:[]}}}(l);let p=l.volume*(l.amount+l.tax_amount),d="revenue"==s?r[l.partner]:o[l.partner],h=l.currency_code;if(e.includes(h)||e.push(h),c(d,s,h),d[s][h]+=p,l.pay_date){let t=new Date(l.pay_date).getTime(),e=(new Date).getTime();(!d.last_paydate||d.last_paydate&&d.last_paydate<t)&&(d.last_paydate=t,d.last_pay=Math.round((e-t)/864e5)),c(d,"paydate_"+s,h),d["paydate_"+s][h]+=p}d.data[s].push(l)}t.map(t=>{t.dataRevenue.map(t=>{a(this.total,0,"revenue",t)}),t.dataCost.map(t=>{a(this.total,0,"cost",t)})}),n.map((t,e)=>{n[e]=r[t]}),i.map((t,e)=>{i[e]=o[t]}),this.customer=n.sort((t,e)=>t.full_name>e.full_name?1:e.full_name>t.full_name?-1:0),this.supplier=i.sort((t,e)=>t.full_name>e.full_name?1:e.full_name>t.full_name?-1:0),this.currencies=e.sort(),this.filterShipmentBoard=t,this.filterShipmentBalance=[{name:"Credit",data:[],totalSoa:{}},{name:"Debit",data:[],totalSoa:{}},{name:"Balance",data:[],totalSoa:{}},{name:"Mix",data:[],totalSoa:{}}],this.customer.map(t=>{let e=[];this.currencies.map(n=>{c(t,"revenue",n),c(t,"paydate_revenue",n),c(t,"balance_paydate",n),t.balance_paydate[n]=t.revenue[n]-t.paydate_revenue[n],e.push(function(t){return t*t<.001?0:t>0?1:t<0?-1:void 0}(t.balance_paydate[n]))});let n=(i=Math.min.apply(null,e),r=Math.max.apply(null,e),i>=0&&1==r?0:-1==i&&r<=0?1:0==i&&0==r?2:-1==i&&1==r?3:void 0);var i,r;this.filterShipmentBalance[n].data.push(t),this.currencies.map(e=>{this.filterShipmentBalance[n].totalSoa[e]||(this.filterShipmentBalance[n].totalSoa[e]=0),this.filterShipmentBalance[n].totalSoa[e]+=t.balance_paydate[e]})}),this.supplier.map(t=>{let e=[];this.currencies.map(n=>{c(t,"cost",n),c(t,"paydate_cost",n),c(t,"balance_paydate",n),t.balance_paydate[n]=-t.cost[n]+t.paydate_cost[n],e.push(function(t){return t*t<.001?0:t>0?1:t<0?-1:void 0}(t.balance_paydate[n]))});let n=(i=Math.min.apply(null,e),r=Math.max.apply(null,e),i>=0&&1==r?0:-1==i&&r<=0?1:0==i&&0==r?2:-1==i&&1==r?3:void 0);var i,r;this.filterShipmentBalance[n].data.push(t),this.currencies.map(e=>{this.filterShipmentBalance[n].totalSoa[e]||(this.filterShipmentBalance[n].totalSoa[e]=0),this.filterShipmentBalance[n].totalSoa[e]+=t.balance_paydate[e]})}),this.onSoaChanged.next([this.filterShipmentBalance,this.customer,this.supplier])}buildVessel(t){function e(t,e,n,i){t.currency.includes(n)||t.currency.push(n),t[e][n]||(t[e][n]=0),t[e][n]+=i}this.arrType=[],this.voyage=[],this.shipmentVessel={},this.dataBill=[],this.total2={revenueVN:{ALL:0},revenueNN:{ALL:0},costVN:{ALL:0},costNN:{ALL:0},revenueBalance:{},costBalance:{},currency:[]},t.map(t=>{let n={};n.vessel_full_name=t.vessel_full_name,n.pol_name=t.pol_name,n.pod_name=t.pod_name,n.depart_time=t.depart_time,n.arrive_time=t.arrive_time,n.date=t.date,n.id=t.id,n.code=t.code,n.bill=t.bill,n.customer_name=t.customer_name,n.customer_short_name=t.customer_short_name,n.agent_name=t.agent_name,n.agent_short_name=t.agent_short_name,n.process=t.process,n.profit=t.profit,n.revenueVN=t.revenueVN,n.revenueNN=t.revenueNN,n.costVN=t.costVN,n.costNN=t.costNN,n.voyage=t.voyage,n.customer=t.customer;let i=t.date+"-"+t.vessel_name+"-"+t.voyage;n.key=i,this.shipmentVessel[i]||(this.shipmentVessel[i]={voyage_name:t.voyage_name,vessel_full_name:t.vessel_full_name,pol_name:t.pol_name,pod_name:t.pod_name,load_country:t.load_country,discharge_country:t.discharge_country,depart_time:t.depart_time,arrive_time:t.arrive_time,closing_time:t.closing_time,shipment:[]},this.voyage.push({key:i,vessel:t.vessel_name,voyage_id:t.voyage,voyage_name:t.voyage_name,depart_time:t.depart_time})),t.volume.map(e=>{t[e.cont_type_code]?(t[e.cont_type_code]+=e.volume,n[e.cont_type_code]+=e.volume):(t[e.cont_type_code]=e.volume,n[e.cont_type_code]=e.volume),this.shipmentVessel[i][e.cont_type_code]?this.shipmentVessel[i][e.cont_type_code]+=e.volume:this.shipmentVessel[i][e.cont_type_code]=e.volume,this.arrType.includes(e.cont_type_code)||this.arrType.push(e.cont_type_code),this.total2[e.cont_type_code]||(this.total2[e.cont_type_code]=0),this.total2[e.cont_type_code]+=e.volume}),t.dataRevenue.map(t=>{let n=t.volume*(t.amount+t.tax_amount);"VIETNAM"==t.country_name?(e(this.total2,"revenueVN",t.currency_code,n),this.total2.revenueVN.ALL+=t.volume*(t.amount+t.tax_amount)*t.ex_rate):(e(this.total2,"revenueNN",t.currency_code,n),this.total2.revenueNN.ALL+=t.volume*(t.amount+t.tax_amount)*t.ex_rate),e(this.total2,"revenueBalance",t.currency_code,n)}),t.dataCost.map(t=>{let n=t.volume*(t.amount+t.tax_amount);"VIETNAM"==t.country_name?(e(this.total2,"costVN",t.currency_code,n),this.total2.costVN.ALL+=t.volume*(t.amount+t.tax_amount)*t.ex_rate):(e(this.total2,"costNN",t.currency_code,n),this.total2.costNN.ALL+=t.volume*(t.amount+t.tax_amount)*t.ex_rate),e(this.total2,"costBalance",t.currency_code,n)}),this.shipmentVessel[i].shipment.push(t),this.dataBill.push(n)}),this.total2.currency.map(t=>{e(this.total2,"revenueBalance",t,0),e(this.total2,"costBalance",t,0)}),this.arrType.sort(),this.voyage.sort((t,e)=>t.key<e.key?1:e.key<t.key?-1:0),this.dataBill.sort((t,e)=>{var n=t.date,i=e.date,r=t.vessel_full_name,o=e.vessel_full_name,c=t.bill,a=e.bill;return n>i?-1:n<i?1:r>o?1:r<o?-1:c>a?1:c<a?-1:0}),this.onVesselChanged.next([this.shipmentVessel,this.voyage,this.arrType,this.total2])}updateMultiShipmentItem(t){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/shipment/multi-item",t,e).subscribe(t=>{n(t)},i)})}updateSelRevenue(t){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/revenue",t,e).subscribe(t=>{n(t)},i)})}updateSelCost(t){let e={headers:new B.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/cost",t,e).subscribe(t=>{n(t)},i)})}getCostExcel(t,e){let n=new E.Workbook,i=n.addWorksheet("COM");i.addRow([" "]),i.getRow(1).font={name:"Arial Narrow",size:10,bold:!1,italic:!1},i.addRow([null,null,null,"Address : Room 506B, V.E.T Building, 98 Hoang Quoc Viet Street, Nghia Do Ward, Cau Giay District, Ha Noi, Viet Nam"]),i.getRow(2).font={bold:!0,italic:!0},i.addRow([null,null,null,"Tel: (84-4) 32121246"]),i.getRow(3).font={bold:!0,italic:!0},i.addRow([]),i.addRow([]),i.addRow(["From","SE GLOBAL LINES",null,null,"Attn",e.short_name]),i.getRow(6).font={size:11,bold:!1,italic:!0},i.addRow([]),i.addRow(["RE: PAYMENT FOR CARGOES FROM HAIPHONG TO SINGAPORE"]),i.getRow(8).font={size:10,bold:!0,italic:!1},i.addRow([]),i.addRow(["We would like to thanks for your valued support so far. Please see the below credit note for your reference as follows:"]),i.getRow(10).font={size:12,bold:!1,italic:!1};let r=n.addImage({base64:z.a,extension:"png"});i.addImage(r,"A2:C3"),i.addRow([]);let o=i.addRow(["SQ","MONTH","B/L","VESSEL & VOYAGE","DATE","VOLUME",null,"INVOICE RATE","ACTUAL RATE","AMOUNT (USD)","PAYMENT DATE"]),c=i.addRow([null,null,null,null,null,"20'","40'",null,null,null,null]);o.eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.font={size:10,bold:!0},t.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),c.eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.font={size:10,bold:!0},t.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),i.mergeCells("A12:A13"),i.mergeCells("B12:B13"),i.mergeCells("C12:C13"),i.mergeCells("D12:D13"),i.mergeCells("E12:E13"),i.mergeCells("F12:G12"),i.mergeCells("H12:H13"),i.mergeCells("I12:I13"),i.mergeCells("J12:J13"),i.mergeCells("K12:K13"),t.map(t=>{t[1]&&(t[1]=(new Date(t[1]).getTime()+252e5)/864e5+25569),t[4]&&(t[4]=(new Date(t[4]).getTime()+252e5)/864e5+25569),t[10]&&(t[10]=(new Date(t[10]).getTime()+252e5)/864e5+25569);let e=i.addRow(t),n=t.length;for(let i=1;i<=n;i++)e.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.getCell(i).font={size:8,bold:!0},2==i&&(e.getCell(i).numFmt="mmm yyyy"),5!=i&&11!=i||(e.getCell(i).numFmt="dd mmm yyyy",e.getCell(i).alignment={horizontal:"right"}),6!=i&&7!=i&&9!=i&&10!=i&&11!=i||(e.getCell(i).alignment={horizontal:"center"}),8!=i&&9!=i&&10!=i||(e.getCell(i).numFmt="0.00")});let a=i.addRow([null,"TOTAL",null,null,null,this.calculateTotal(t,5),this.calculateTotal(t,6),null,null,this.calculateTotal(t,9),null]);a.getCell(1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(1).font={size:8,bold:!0},a.getCell(2).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(2).font={size:8,bold:!0},a.getCell(3).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(3).font={size:8,bold:!0},a.getCell(4).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(4).font={size:8,bold:!0},a.getCell(5).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(5).font={size:8,bold:!0},a.getCell(6).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(6).font={size:8,bold:!0},a.getCell(6).alignment={horizontal:"center"},a.getCell(7).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(7).font={size:8,bold:!0},a.getCell(7).alignment={horizontal:"center"},a.getCell(8).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(8).font={size:8,bold:!0},a.getCell(9).numFmt="0.00",a.getCell(9).alignment={horizontal:"center"},a.getCell(9).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(9).font={size:8,bold:!0},a.getCell(10).numFmt="0.00",a.getCell(10).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(10).font={size:8,bold:!0},a.getCell(10).alignment={horizontal:"center"},a.getCell(11).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(11).font={size:8,bold:!0},i.addRow([]),i.addRow([null,"USD",this.calculateTotal(t,9)]).eachCell((t,e)=>{t.font={size:8,bold:!0},t.numFmt="#,##0.00_);(#,##0.00)"}),i.addRow([null,"Ex-rate",21e3]).eachCell((t,e)=>{t.font={size:8,bold:!0},t.numFmt="#,##0_);(#,##0)"}),i.addRow([null,"VND",21e3*this.calculateTotal(t,9),"In word: "+this.commonService.inWords(23e3*this.calculateTotal(t,9))]).eachCell((t,e)=>{t.font={size:8,bold:!0},t.numFmt="#,##0_);(#,##0)"}),i.getColumn(1).width=5,i.getColumn(2).width=9,i.getColumn(3).width=17,i.getColumn(4).width=25,i.getColumn(5).width=11,i.getColumn(6).width=8,i.getColumn(7).width=8,i.getColumn(8).width=12,i.getColumn(9).width=12,i.getColumn(10).width=12,i.getColumn(11).width=11,n.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object($.saveAs)(e,"soa_"+this.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")})}getInvoiceRateExcel(t,e){let n=new E.Workbook,i=n.addWorksheet("INVOICE RATE");i.addRow([" "]),i.getRow(1).font={name:"Arial Narrow",size:10,bold:!1,italic:!1},i.addRow([null,null,null,"Address : Room 506B, V.E.T Building, 98 Hoang Quoc Viet Street, Nghia Do Ward, Cau Giay District, Ha Noi, Viet Nam"]),i.getRow(2).font={bold:!0,italic:!0},i.addRow([null,null,null,"Tel: (84-4) 32121246"]),i.getRow(3).font={bold:!0,italic:!0},i.addRow([]),i.addRow([]),i.addRow(["From","SE GLOBAL LINES",null,null,"Attn",e.short_name]),i.getRow(6).font={size:11,bold:!1,italic:!0},i.addRow([]),i.addRow(["RE: PAYMENT FOR CARGOES FROM HAIPHONG TO SINGAPORE"]),i.getRow(8).font={size:10,bold:!0,italic:!1},i.addRow([]),i.addRow(["We would like to thanks for your valued support so far. Please see the below credit note for your reference as follows:"]),i.getRow(10).font={size:12,bold:!1,italic:!1};let r=n.addImage({base64:z.a,extension:"png"});i.addImage(r,"A2:C3"),i.addRow([]);let o=i.addRow(["SQ","MONTH","B/L","VESSEL & VOYAGE","DATE","VOLUME",null,"OF","RR","ECRS","INVOICE RATE",null,"PAYMENT DATE"]),c=i.addRow([null,null,null,null,null,"20'","40'",null,null,null,"Total","COM",null]);o.eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.font={size:10,bold:!0},t.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),c.eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.font={size:10,bold:!0},t.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),i.mergeCells("A12:A13"),i.mergeCells("B12:B13"),i.mergeCells("C12:C13"),i.mergeCells("D12:D13"),i.mergeCells("E12:E13"),i.mergeCells("F12:G12"),i.mergeCells("H12:H13"),i.mergeCells("I12:I13"),i.mergeCells("J12:J13"),i.mergeCells("K12:L12"),i.mergeCells("M12:M13"),t.map(t=>{t[1]&&(t[1]=(new Date(t[1]).getTime()+252e5)/864e5+25569),t[4]&&(t[4]=(new Date(t[4]).getTime()+252e5)/864e5+25569);let e=i.addRow(t),n=t.length;for(let i=1;i<=n;i++)e.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.getCell(i).font={size:8,bold:!0},2==i&&(e.getCell(i).numFmt="mmm yyyy"),5==i&&(e.getCell(i).numFmt="dd mmm yyyy",e.getCell(i).alignment={horizontal:"right"}),6!=i&&7!=i&&8!=i&&9!=i&&10!=i&&11!=i&&12!=i||(e.getCell(i).alignment={horizontal:"center"}),8!=i&&9!=i&&10!=i&&11!=i&&12!=i||(e.getCell(i).numFmt="0.00")});let a=i.addRow([null,"TOTAL",null,null,null,this.calculateTotal(t,5),this.calculateTotal(t,6),this.calculateTotal(t,7),this.calculateTotal(t,8),this.calculateTotal(t,9),this.calculateTotal(t,10),this.calculateTotal(t,11)]);a.getCell(1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(1).font={size:8,bold:!0},a.getCell(2).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(2).font={size:8,bold:!0},a.getCell(3).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(3).font={size:8,bold:!0},a.getCell(4).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(4).font={size:8,bold:!0},a.getCell(5).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(5).font={size:8,bold:!0},a.getCell(6).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(6).font={size:8,bold:!0},a.getCell(6).alignment={horizontal:"center"},a.getCell(7).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(7).font={size:8,bold:!0},a.getCell(7).alignment={horizontal:"center"},a.getCell(8).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(8).font={size:8,bold:!0},a.getCell(8).numFmt="0.00",a.getCell(9).alignment={horizontal:"center"},a.getCell(9).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(9).font={size:8,bold:!0},a.getCell(9).numFmt="0.00",a.getCell(10).alignment={horizontal:"center"},a.getCell(10).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(10).font={size:8,bold:!0},a.getCell(10).numFmt="0.00",a.getCell(11).alignment={horizontal:"center"},a.getCell(11).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(11).font={size:8,bold:!0},a.getCell(11).numFmt="0.00",a.getCell(12).alignment={horizontal:"center"},a.getCell(12).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(12).font={size:8,bold:!0},a.getCell(12).numFmt="0.00",a.getCell(13).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.getCell(13).font={size:8,bold:!0},i.addRow([]),i.addRow([null,"USD",this.calculateTotal(t,11)]).eachCell((t,e)=>{t.font={size:8,bold:!0},t.numFmt="#,##0.00_);(#,##0.00)"}),i.addRow([null,"Ex-rate",21e3]).eachCell((t,e)=>{t.font={size:8,bold:!0},t.numFmt="#,##0_);(#,##0)"}),i.addRow([null,"VND",21e3*this.calculateTotal(t,9),"In word: "+this.commonService.inWords(23e3*this.calculateTotal(t,9))]).eachCell((t,e)=>{t.font={size:8,bold:!0},t.numFmt="#,##0_);(#,##0)"}),i.getColumn(1).width=5,i.getColumn(2).width=9,i.getColumn(3).width=17,i.getColumn(4).width=25,i.getColumn(5).width=11,i.getColumn(6).width=8,i.getColumn(7).width=8,i.getColumn(8).width=12,i.getColumn(9).width=12,i.getColumn(10).width=12,i.getColumn(11).width=12,i.getColumn(12).width=12,i.getColumn(13).width=11,n.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object($.saveAs)(e,"soa_"+this.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")})}calculateTotal(t,e){return t.map(t=>t[e]).reduce((t,e)=>t+(e||0),0)}buildExcelData(t){let e=[],n=[];t.map((t,i)=>{["20DC","40HC","Spt"].map(i=>{if(t[i]||"Spt"==i){let r=[],o=t.bill+(i.includes("20")?"-20'":i.includes("40")?"-40'":"Spt")+"-"+(t[i]?t[i]:"");r.push(o),0==e.length&&n.push({header:"KEY",width:24}),r.push(t.vessel_full_name),0==e.length&&n.push({header:"VOY NO.",width:24}),r.push(this.datePipe.transform(t.depart_time,"MM/dd/yyyy")),0==e.length&&n.push({header:"ETD",width:24}),r.push(t.bill),0==e.length&&n.push({header:"BILL",width:18}),this.arrType.map(o=>{r.push(i==o?t[o]:null),0==e.length&&n.push({header:o,width:6})});let c=0,a=i.includes("20")?"20":i.includes("40")?"40":i,s=t.revenueNN.find(t=>t.price_code=="OF"+a);s?(c+=s.amount*s.volume,r.push(s.amount*s.volume)):r.push(null),0==e.length&&n.push({header:"PP OF",width:12}),s=t.revenueVN.find(t=>t.price_code=="OF"+a),s?(c+=s.amount*s.volume,r.push(s.amount*s.volume)):r.push(null),0==e.length&&n.push({header:"CL OF",width:12}),s=t.revenueNN.find(t=>t.price_code=="LTHC"+a),s?(c+=s.amount*s.volume,r.push(s.amount*s.volume)):r.push(null),0==e.length&&n.push({header:"LTHC",width:12}),s=t.revenueNN.find(t=>t.price_code=="RRC"+a),s?(c+=s.amount*s.volume,r.push(s.amount*s.volume)):r.push(null),0==e.length&&n.push({header:"RRC",width:12}),s=t.revenueNN.find(t=>t.price_code=="ARC"+a),s?(c+=s.amount*s.volume,r.push(s.amount*s.volume)):r.push(null),0==e.length&&n.push({header:"ARC",width:12});let l=0;"Spt"==a?(t.revenueNN.map(t=>{t.unit_code.includes("20")||t.unit_code.includes("40")||(l+=t.amount*t.volume)}),r.push(l)):r.push(null),0==e.length&&n.push({header:"OTHER",width:12}),r.push(c+l),0==e.length&&n.push({header:"TOTAL REV",width:12}),e.push(r)}})}),this.exportExcel(e,n)}exportExcel(t,e){let n=new E.Workbook,i=n.addWorksheet("BILL");i.addRow([" "]),i.getRow(1).font={name:"Arial",size:10,bold:!1,italic:!1},i.addRow(["EXPORT "+this.datePipe.transform(new Date(this.currenSearch.formSearch.date_from),"MMM-yyyy")+" Update: "+this.datePipe.transform(new Date,"dd/MM/yyyy")]),i.getRow(2).font={size:18,bold:!0,italic:!1},i.addRow([]);let r=e.map(t=>t.header);i.addRow(r).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFF00"},bgColor:{argb:"FF0000FF"}},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.font={size:10,bold:!0},t.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),t.map(t=>{let e=i.addRow(t),n=t.length;for(let i=1;i<=n;i++)e.getCell(i).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.getCell(i).font={size:8,bold:!1},e.getCell(i).alignment={vertical:"middle",horizontal:"center",wrapText:!0}});let o=e.map(t=>t.width);for(var c=0;c<o.length;c++)i.getColumn(c+1).width=o[c];n.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object($.saveAs)(e,"soa_"+this.datePipe.transform(new Date,"dd-MM-yy")+".xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(R.bc(B.a),R.bc(Y.a),R.bc(H.f),R.bc(i.a),R.bc(q.a))},t.\u0275prov=R.Nb({token:t,factory:t.\u0275fac}),t})();var G=n("B9zo"),Q=n("fE3o"),K=n("3Pt+"),Z=n("XiUz"),tt=n("EwFO");let et=(()=>{class t{constructor(t,e){this.formBuilder=t,this.authService=e,this.height=560,this.changeSetting=new R.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new A.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-18}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-18:this.authService.screenHeight-64-64-18})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}initForm(){return this.formBuilder.group({column:this.formBuilder.array([])})}get columnAdd(){return this.form.get("column")}addColumn(t){let e={};e[t]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(t))&&(!["Price","Unit","Volume","Amount"].includes(t)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(e))}checkAll(){this.displayedColumns.map((t,e)=>{this.form.controls.column.controls[e].controls[t].setValue(!0)})}toggleCardCover(){}toggleSubscription(){}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(K.d),R.Rb(q.a))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Xb(1,"div",1),R.Xb(2,"div",2),R.Xb(3,"div"),R.Lc(4,"Settings"),R.Wb(),R.Wb(),R.Wb(),R.Xb(5,"div",3),R.Xb(6,"form",4),R.Xb(7,"div",5),R.Xb(8,"h2"),R.Lc(9,"Column"),R.Wb(),R.Xb(10,"div",6),R.Xb(11,"button",7),R.fc("click",(function(t){return e.checkAll()})),R.Lc(12,"All column"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Db(5),R.Ic("height",e.height,"px"),R.Db(1),R.pc("formGroup",e.form))},directives:[Z.d,Z.c,tt.a,K.A,K.q,K.h,s.b],styles:["report-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}report-setting .navbar-scroll-container{background:#fff!important}report-setting .navbar-scroll-container .navbar-content{padding-top:0}report-setting .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}report-setting .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}report-setting .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:j.a}}),t})();var nt=n("0JVi"),it=n("znSr"),rt=n("rPBI");function ot(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",12),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.changeScreen(!0)})),R.Xb(1,"mat-icon"),R.Lc(2,"flip_to_front"),R.Wb(),R.Wb()}}function ct(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",12),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.changeScreen(!1)})),R.Xb(1,"mat-icon"),R.Lc(2,"flip_to_back"),R.Wb(),R.Wb()}}let at=(()=>{class t{constructor(t,e){this.authService=t,this._fuseConfigService=e,this.fullScreen=!1,this.toggleSidebar=new R.o,this.showHideBar=new R.o,this.refreshPage=new R.o,this.searchFilter=new R.o,this._unsubscribeAll=new A.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(t){this.fullScreen=t,this.authService.changeScreen.next(t),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(q.a),R.Rb(nt.b))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-header"]],inputs:{voyageId:"voyageId",customerId:"customerId",sidebarName:"sidebarName",searchText:"searchText"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter"},decls:49,vars:8,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[3,"searchText","inputValue"],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(R.Xb(0,"mat-toolbar",0),R.Xb(1,"div",1),R.Xb(2,"div",2),R.Xb(3,"div",3),R.Xb(4,"button",4),R.fc("click",(function(t){return e.toggleSidebar.emit(e.sidebarName)})),R.Xb(5,"mat-icon"),R.Lc(6,"menu"),R.Wb(),R.Wb(),R.Xb(7,"button",5),R.fc("click",(function(t){return e.showHideBar.emit()})),R.Xb(8,"mat-icon"),R.Lc(9,"menu"),R.Wb(),R.Wb(),R.Wb(),R.Xb(10,"button",6),R.Xb(11,"span",7),R.Lc(12,"SOA"),R.Wb(),R.Xb(13,"mat-icon",8),R.Lc(14,"equalizer"),R.Wb(),R.Wb(),R.Xb(15,"button",6),R.Xb(16,"span",7),R.Lc(17,"Vessel"),R.Wb(),R.Xb(18,"mat-icon",8),R.Lc(19,"dashboard"),R.Wb(),R.Wb(),R.Xb(20,"button",6),R.Xb(21,"span",7),R.Lc(22,"Add info"),R.Wb(),R.Xb(23,"mat-icon",8),R.Lc(24,"equalizer"),R.Wb(),R.Wb(),R.Xb(25,"button",6),R.Xb(26,"span",7),R.Lc(27,"Bill"),R.Wb(),R.Xb(28,"mat-icon",8),R.Lc(29,"dashboard"),R.Wb(),R.Wb(),R.Xb(30,"button",6),R.Xb(31,"span",7),R.Lc(32,"Chart"),R.Wb(),R.Xb(33,"mat-icon",8),R.Lc(34,"equalizer"),R.Wb(),R.Wb(),R.Wb(),R.Xb(35,"div",9),R.Xb(36,"filter-search-bar",10),R.fc("inputValue",(function(t){return e.searchFilter.emit(t)})),R.Wb(),R.Sb(37,"div",11),R.Xb(38,"button",12),R.fc("click",(function(t){return t.stopPropagation(),e.refreshPage.emit()})),R.Xb(39,"mat-icon",13),R.Lc(40,"refresh"),R.Wb(),R.Wb(),R.Sb(41,"div",11),R.Jc(42,ot,3,0,"button",14),R.Jc(43,ct,3,0,"button",14),R.Sb(44,"div",11),R.Xb(45,"button",12),R.fc("click",(function(t){return e.toggleSidebar.emit("report-setting")})),R.Xb(46,"mat-icon"),R.Lc(47,"settings"),R.Wb(),R.Wb(),R.Sb(48,"div",11),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Db(10),R.pc("routerLink","/apps/workflow/report/soa/"+(e.voyageId?"voyage/"+e.voyageId+"/":"")+(e.customerId?"customer/"+e.customerId+"/":"")+"paydate"),R.Db(5),R.pc("routerLink","/apps/workflow/report/soa/"+(e.voyageId?"voyage/"+e.voyageId+"/":"")+(e.customerId?"customer/"+e.customerId+"/":"")+"vessel"),R.Db(5),R.pc("routerLink","/apps/workflow/report/soa/"+(e.voyageId?"voyage/"+e.voyageId+"/":"")+(e.customerId?"customer/"+e.customerId+"/":"")+"add-info"),R.Db(5),R.pc("routerLink","/apps/workflow/report/soa/"+(e.voyageId?"voyage/"+e.voyageId+"/":"")+(e.customerId?"customer/"+e.customerId+"/":"")+"bill"),R.Db(5),R.pc("routerLink","/apps/workflow/report/soa/"+(e.voyageId?"voyage/"+e.voyageId+"/":"")+(e.customerId?"customer/"+e.customerId+"/":"")+"chart"),R.Db(6),R.pc("searchText",e.searchText),R.Db(6),R.pc("ngIf",!e.fullScreen),R.Db(1),R.pc("ngIf",e.fullScreen))},directives:[v.a,Z.b,Z.e,Z.d,Z.c,s.b,it.b,p.a,i.i,i.h,rt.a,H.t],styles:["report-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}report-header.below{z-index:2}report-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}report-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}report-header .logo .logo-icon{width:38px}report-header .chat-panel-toggle-button,report-header .language-button,report-header .quick-panel-toggle-button,report-header .user-button,report-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){report-header .chat-panel-toggle-button,report-header .language-button,report-header .quick-panel-toggle-button,report-header .user-button,report-header fuse-search-bar{height:56px}}report-header .navbar-toggle-button{min-width:56px;height:56px}report-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){report-header .toolbar-separator{height:56px}}"],encapsulation:2}),t})();var st=n("JX91"),lt=n("lJxs");const bt=["formDirective"],pt=["allSelected"];function dt(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.short_name," ")}}function ht(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.short_name," ")}}function ut(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.short_name," ")}}function mt(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.short_name," ")}}function ft(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.short_name," ")}}function gt(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.name," ")}}function vt(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-option",31),R.fc("click",(function(e){R.Bc(t),R.jc();const n=R.xc(72);return R.jc().tosslePerOne(n.viewValue)})),R.Lc(1),R.Wb()}if(2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Mc(t.code)}}function yt(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.code," ")}}function xt(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t.id),R.Db(1),R.Nc(" ",t.name," ")}}function Dt(t,e){if(1&t&&(R.Xb(0,"mat-option",47),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.pc("value",t),R.Db(1),R.Mc(t)}}const wt=function(t){return{"accent-600-fg":t}},St=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};function kt(t,e){if(1&t){const t=R.Yb();R.Xb(0,"form",2,3),R.fc("keydown.enter",(function(e){return R.Bc(t),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){R.Bc(t);const n=R.jc();return n.onSearchFormSubmit(n.form)})),R.Xb(2,"div",4),R.Xb(3,"div",5),R.Xb(4,"button",6),R.Lc(5," Submit "),R.Wb(),R.Xb(6,"button",7),R.fc("click",(function(e){return R.Bc(t),R.jc().clearForm()})),R.Lc(7," Clear "),R.Wb(),R.Wb(),R.Wb(),R.Xb(8,"div",8),R.Xb(9,"div",9),R.Xb(10,"div",10),R.Xb(11,"div",11),R.Xb(12,"div",12),R.Xb(13,"mat-form-field",13),R.Xb(14,"mat-label"),R.Lc(15,"Pay party"),R.Wb(),R.Sb(16,"input",14),R.Xb(17,"mat-autocomplete",15,16),R.Jc(19,dt,2,2,"mat-option",17),R.kc(20,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(21,"div",18),R.Xb(22,"mat-form-field",13),R.Xb(23,"mat-label"),R.Lc(24,"Issue Party"),R.Wb(),R.Sb(25,"input",19),R.Xb(26,"mat-autocomplete",15,20),R.Jc(28,ht,2,2,"mat-option",17),R.kc(29,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(30,"div",18),R.Xb(31,"mat-form-field",13),R.Xb(32,"mat-label",21),R.Lc(33,"Customer"),R.Wb(),R.Sb(34,"input",22),R.Xb(35,"mat-autocomplete",15,23),R.Jc(37,ut,2,2,"mat-option",17),R.kc(38,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(39,"div",18),R.Xb(40,"mat-form-field",13),R.Xb(41,"mat-label"),R.Lc(42,"Load Agent"),R.Wb(),R.Sb(43,"input",24),R.Xb(44,"mat-autocomplete",15,25),R.Jc(46,mt,2,2,"mat-option",17),R.kc(47,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(48,"div",18),R.Xb(49,"mat-form-field",13),R.Xb(50,"mat-label"),R.Lc(51,"Dest Agent"),R.Wb(),R.Sb(52,"input",26),R.Xb(53,"mat-autocomplete",15,27),R.Jc(55,ft,2,2,"mat-option",17),R.kc(56,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(57,"div",18),R.Xb(58,"mat-form-field",13),R.Xb(59,"mat-label",21),R.Lc(60,"Voyage"),R.Wb(),R.Sb(61,"input",28),R.Xb(62,"mat-autocomplete",15,29),R.Jc(64,gt,2,2,"mat-option",17),R.kc(65,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(66,"div",18),R.Xb(67,"mat-form-field",13),R.Xb(68,"mat-label"),R.Lc(69,"Price"),R.Wb(),R.Xb(70,"mat-select",30),R.Xb(71,"mat-option",31,32),R.fc("click",(function(e){return R.Bc(t),R.jc().toggleAllSelection()})),R.Lc(73),R.Wb(),R.Jc(74,vt,2,2,"mat-option",33),R.Wb(),R.Wb(),R.Wb(),R.Xb(75,"div",18),R.Xb(76,"mat-form-field",13),R.Xb(77,"mat-label"),R.Lc(78,"Currency"),R.Wb(),R.Xb(79,"mat-select",34),R.Jc(80,yt,2,2,"mat-option",17),R.Wb(),R.Wb(),R.Wb(),R.Xb(81,"div",18),R.Xb(82,"mat-form-field",13),R.Xb(83,"mat-label"),R.Lc(84,"Payment center"),R.Wb(),R.Sb(85,"input",35),R.Xb(86,"mat-autocomplete",15,36),R.Jc(88,xt,2,2,"mat-option",17),R.kc(89,"async"),R.Wb(),R.Wb(),R.Wb(),R.Xb(90,"div",37),R.Xb(91,"h2"),R.Lc(92,"Time type"),R.Wb(),R.Xb(93,"mat-radio-group",38),R.Xb(94,"mat-radio-button",39),R.Lc(95,"ETD"),R.Wb(),R.Xb(96,"mat-radio-button",39),R.Lc(97,"ETA"),R.Wb(),R.Wb(),R.Wb(),R.Xb(98,"div",18),R.Xb(99,"mat-form-field",13),R.Xb(100,"mat-label"),R.Lc(101),R.Wb(),R.Xb(102,"input",40),R.fc("change",(function(e){return R.Bc(t),R.jc().commonService.setDateStr(e)})),R.Wb(),R.Sb(103,"mat-datepicker-toggle",41),R.Sb(104,"mat-datepicker",null,42),R.Wb(),R.Wb(),R.Xb(106,"div",18),R.Xb(107,"mat-form-field",13),R.Xb(108,"mat-label"),R.Lc(109),R.Wb(),R.Xb(110,"input",43),R.fc("change",(function(e){return R.Bc(t),R.jc().commonService.setDateStr(e)})),R.Wb(),R.Sb(111,"mat-datepicker-toggle",41),R.Sb(112,"mat-datepicker",null,44),R.Wb(),R.Wb(),R.Xb(114,"div",18),R.Xb(115,"mat-form-field",13),R.Xb(116,"mat-label"),R.Lc(117,"Month"),R.Wb(),R.Xb(118,"mat-select",45),R.fc("selectionChange",(function(e){return R.Bc(t),R.jc().getMonthTime("M")})),R.Jc(119,Dt,2,2,"mat-option",17),R.Wb(),R.Wb(),R.Wb(),R.Xb(120,"div",18),R.Xb(121,"mat-form-field",13),R.Xb(122,"mat-label"),R.Lc(123,"Year"),R.Wb(),R.Xb(124,"mat-select",46),R.fc("selectionChange",(function(e){return R.Bc(t),R.jc().getMonthTime("Y")})),R.Xb(125,"mat-option",47),R.Lc(126),R.Wb(),R.Xb(127,"mat-option",47),R.Lc(128),R.Wb(),R.Xb(129,"mat-option",47),R.Lc(130),R.Wb(),R.Xb(131,"mat-option",47),R.Lc(132),R.Wb(),R.Xb(133,"mat-option",47),R.Lc(134),R.Wb(),R.Xb(135,"mat-option",47),R.Lc(136),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb()}if(2&t){const t=R.xc(18),e=R.xc(27),n=R.xc(36),i=R.xc(45),r=R.xc(54),o=R.xc(63),c=R.xc(87),a=R.xc(105),s=R.xc(113),l=R.jc();R.pc("formGroup",l.form),R.Db(8),R.Ic("height",l.height,"px"),R.Db(8),R.pc("matAutocomplete",t),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"short_name",l.customer)),R.Db(2),R.pc("ngForOf",R.lc(20,53,l.filteredCustomer)),R.Db(6),R.pc("matAutocomplete",e),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"short_name",l.supplier)),R.Db(2),R.pc("ngForOf",R.lc(29,55,l.filteredSupplier)),R.Db(4),R.pc("ngClass",R.rc(67,wt,l.customerId)),R.Db(2),R.pc("matAutocomplete",n)("readonly",!!l.customerId),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"short_name",l.customer)),R.Db(2),R.pc("ngForOf",R.lc(38,57,l.filteredCustomer2)),R.Db(6),R.pc("matAutocomplete",i),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"short_name",l.agent)),R.Db(2),R.pc("ngForOf",R.lc(47,59,l.filteredAgent2)),R.Db(6),R.pc("matAutocomplete",r),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"short_name",l.agent)),R.Db(2),R.pc("ngForOf",R.lc(56,61,l.filteredAgent)),R.Db(4),R.pc("ngClass",R.rc(69,wt,l.voyageId)),R.Db(2),R.pc("matAutocomplete",o)("readonly",!!l.voyageId),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"name",l.voyage)),R.Db(2),R.pc("ngForOf",R.lc(65,63,l.filteredVoyage)),R.Db(7),R.pc("value",0),R.Db(2),R.Nc("All of ",l.price.length," price"),R.Db(1),R.pc("ngForOf",l.price),R.Db(6),R.pc("ngForOf",l.currency),R.Db(5),R.pc("matAutocomplete",c),R.Db(1),R.pc("displayWith",l.commonService.displayFn.bind(l,"name",l.country)),R.Db(2),R.pc("ngForOf",R.lc(89,65,l.filteredCountry)),R.Db(6),R.pc("value","ETD"),R.Db(2),R.pc("value","ETA"),R.Db(5),R.Nc("",l.form.value.type," from"),R.Db(1),R.pc("matDatepicker",a),R.Db(1),R.pc("for",a),R.Db(6),R.Nc("",l.form.value.type," to"),R.Db(1),R.pc("matDatepicker",s),R.Db(1),R.pc("for",s),R.Db(8),R.pc("ngForOf",R.qc(71,St)),R.Db(6),R.pc("value",l.year-4),R.Db(1),R.Mc(l.year-4),R.Db(1),R.pc("value",l.year-3),R.Db(1),R.Mc(l.year-3),R.Db(1),R.pc("value",l.year-2),R.Db(1),R.Mc(l.year-2),R.Db(1),R.pc("value",l.year-1),R.Db(1),R.Mc(l.year-1),R.Db(1),R.pc("value",l.year),R.Db(1),R.Mc(l.year),R.Db(1),R.pc("value",l.year+1),R.Db(1),R.Mc(l.year+1)}}const Wt=function(t){return{"mt-8":t}},Ct=function(t){return{"red-600-fg":t}};function Xt(t,e){if(1&t&&(R.Xb(0,"div",67),R.Xb(1,"div",55),R.Lc(2),R.kc(3,"number"),R.Wb(),R.Wb()),2&t){const t=e.$implicit,n=e.index,i=R.jc(2);R.pc("ngClass",R.rc(7,Wt,0==n)),R.Db(1),R.pc("ngClass",R.rc(9,Ct,i.total.revenue[t]-i.total.cost[t]<0)),R.Db(1),R.Oc(" ",R.mc(3,4,i.total.revenue[t]-i.total.cost[t],"VND"!=t?"1.2-2":"1.0-0")," ",t," ")}}function _t(t,e){1&t&&R.Sb(0,"div",68)}function Ot(t,e){if(1&t){const t=R.Yb();R.Xb(0,"form",48),R.fc("keydown.enter",(function(e){return R.Bc(t),"TEXTAREA"==e.target.tagName})),R.Xb(1,"div",4),R.Xb(2,"div",5),R.Xb(3,"button",49),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return n.updateSelectItem.emit(n.formEdit.value)})),R.Lc(4," Save "),R.Wb(),R.Xb(5,"button",7),R.fc("click",(function(e){return R.Bc(t),R.jc().typeChange.emit("form")})),R.Lc(6," Search "),R.Wb(),R.Wb(),R.Wb(),R.Xb(7,"div",8),R.Xb(8,"div",9),R.Xb(9,"div",50),R.Xb(10,"div",11),R.Xb(11,"div",51),R.Xb(12,"h2"),R.Lc(13,"Total"),R.Wb(),R.Jc(14,Xt,4,11,"div",52),R.Jc(15,_t,1,0,"div",53),R.Xb(16,"div",54),R.Xb(17,"div",55),R.Lc(18),R.kc(19,"number"),R.Wb(),R.Wb(),R.Wb(),R.Xb(20,"div",18),R.Xb(21,"mat-form-field",56),R.Xb(22,"mat-label"),R.Lc(23,"Debit"),R.Wb(),R.Sb(24,"input",57),R.Xb(25,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("debit")})),R.Wb(),R.Wb(),R.Wb(),R.Xb(26,"div",18),R.Xb(27,"mat-form-field",56),R.Xb(28,"mat-label"),R.Lc(29,"Invoice number"),R.Wb(),R.Sb(30,"input",59),R.Xb(31,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("inv_number")})),R.Wb(),R.Wb(),R.Wb(),R.Xb(32,"div",18),R.Xb(33,"mat-form-field",56),R.Xb(34,"mat-label"),R.Lc(35,"Bank ref"),R.Wb(),R.Sb(36,"input",60),R.Xb(37,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("bank_ref")})),R.Wb(),R.Wb(),R.Wb(),R.Xb(38,"div",18),R.Xb(39,"mat-form-field",56),R.Xb(40,"mat-label"),R.Lc(41,"Issue date"),R.Wb(),R.Xb(42,"input",61),R.fc("change",(function(e){return R.Bc(t),R.jc().commonService.setDateStr(e)})),R.Wb(),R.Sb(43,"mat-datepicker-toggle",41),R.Sb(44,"mat-datepicker",null,62),R.Xb(46,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("issue_date")})),R.Wb(),R.Wb(),R.Wb(),R.Xb(47,"div",18),R.Xb(48,"mat-form-field",56),R.Xb(49,"mat-label"),R.Lc(50,"Pay date"),R.Wb(),R.Xb(51,"input",63),R.fc("change",(function(e){return R.Bc(t),R.jc().commonService.setDateStr(e)})),R.Wb(),R.Sb(52,"mat-datepicker-toggle",41),R.Sb(53,"mat-datepicker",null,64),R.Xb(55,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("pay_date")})),R.Wb(),R.Wb(),R.Wb(),R.Xb(56,"div",18),R.Xb(57,"mat-form-field",56),R.Xb(58,"mat-label"),R.Lc(59,"Exrate"),R.Wb(),R.Sb(60,"input",65),R.Xb(61,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("ex_rate")})),R.Wb(),R.Wb(),R.Wb(),R.Xb(62,"div",18),R.Xb(63,"mat-form-field",56),R.Xb(64,"mat-label"),R.Lc(65,"Info"),R.Wb(),R.Sb(66,"input",66),R.Xb(67,"mat-checkbox",58),R.fc("change",(function(e){return R.Bc(t),R.jc().setDisabled("info")})),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb()}if(2&t){const t=R.xc(45),e=R.xc(54),n=R.jc();R.pc("formGroup",n.formEdit),R.Db(3),R.pc("disabled",0==n.selected.length),R.Db(4),R.Ic("height",n.height,"px"),R.Db(7),R.pc("ngForOf",n.total.currency),R.Db(1),R.pc("ngIf",n.total.currency.length>0),R.Db(1),R.pc("ngClass",R.rc(23,Wt,0==n.total.currency.length)),R.Db(1),R.pc("ngClass",R.rc(25,Ct,n.total.VND<0)),R.Db(1),R.Nc(" ",R.mc(19,20,n.total.VND,"1.0-0")," Ex VND "),R.Db(7),R.pc("checked",n.check.debit),R.Db(6),R.pc("checked",n.check.inv_number),R.Db(6),R.pc("checked",n.check.bank_ref),R.Db(5),R.pc("matDatepicker",t),R.Db(1),R.pc("for",t),R.Db(3),R.pc("checked",n.check.issue_date),R.Db(5),R.pc("matDatepicker",e),R.Db(1),R.pc("for",e),R.Db(3),R.pc("checked",n.check.pay_date),R.Db(6),R.pc("checked",n.check.ex_rate),R.Db(6),R.pc("checked",n.check.info)}}let Nt=(()=>{class t{constructor(t,e,n,i,r,o){this.formBuilder=t,this.authService=e,this.commonService=n,this.router=i,this.datePipe=r,this.route=o,this.fitlerShipment=new R.o,this.typeChange=new R.o,this.updateSelectItem=new R.o,this.year=(new Date).getFullYear(),this.form=this.formBuilder.group({pay_party:[null],issue_party:[null],customer:[null],load_agent:[null],agent:[null],voyage:[null],price:[null],currency:[null],payment_center:[null],date_from:[null],date_to:[null],month:[null],year:[null],type:["ETD"]}),this.formEdit=this.formBuilder.group({debit:[{value:null,disabled:!0}],inv_number:[{value:null,disabled:!0}],bank_ref:[{value:null,disabled:!0}],issue_date:[{value:null,disabled:!0}],pay_date:[{value:null,disabled:!0}],ex_rate:[{value:null,disabled:!0}],info:[{value:null,disabled:!0}]}),this.check={debit:!1,inv_number:!1,bank_ref:!1,issue_date:!1,pay_date:!1,ex_rate:!1,info:!1},this.now=new Date,this.height=560,this._unsubscribeAll=new A.a}ngOnInit(){this.formSearch.date_from&&(this.formSearch.date_from=new Date(this.formSearch.date_from)),this.formSearch.date_to&&(this.formSearch.date_to=new Date(this.formSearch.date_to)),this.form.patchValue(this.formSearch),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-12}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12}),this.filteredCustomer=this.form.controls.pay_party.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.partner_name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"partner_name",this.customer):[])),this.filteredSupplier=this.form.controls.issue_party.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.partner_name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"partner_name",this.supplier):[])),this.filteredCustomer2=this.form.controls.customer.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.partner_name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"partner_name",this.customer):[])),this.filteredAgent=this.form.controls.agent.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.short_name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"short_name",this.agent):[])),this.filteredAgent2=this.form.controls.load_agent.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.short_name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"short_name",this.agent):[])),this.filteredVoyage=this.form.controls.voyage.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"name",this.voyage):[])),this.filteredPrice=this.form.controls.price.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.code:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"code",this.price):[])),this.filteredCountry=this.form.controls.payment_center.valueChanges.pipe(Object(st.a)(""),Object(lt.a)(t=>t?"string"==typeof t?t:t.name:null),Object(lt.a)(t=>t?this.commonService.filterData(t,"name",this.country):[])),this.form.valueChanges.subscribe(t=>{})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleAllSelection(){this.form.controls.price.patchValue(this.allSelected.selected?[...this.price.map(t=>t.id),0]:[])}tosslePerOne(t){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.price.value&&this.form.controls.price.value.length==this.price.length&&this.allSelected.select()}getMonthTime(t){let e,n,i=this.form.controls.year.value,r=this.form.controls.month.value,o=new Date,c=o.getMonth(),a=o.getFullYear();t&&"M"!=t?"Y"==t?(e=new Date(i,r?r-1:0,1),n=new Date(i,r||12,0)):"TM"==t?(this.form.controls.month.setValue(null),e=new Date(a,c,1),n=new Date(a,c+1,0)):"TY"==t&&(this.form.controls.month.setValue(null),e=new Date(a,0,1),n=new Date(a,12,0)):i&&(e=new Date(i,r?r-1:0,1),n=new Date(i,r||12,0)),this.form.controls.date_from.setValue(e),this.form.controls.date_to.setValue(n)}clearForm(){this.searchNgForm.resetForm(),this.form.controls.type.setValue("ETD"),this.form.controls.customer.setValue(this.customerId),this.form.controls.voyage.setValue(this.voyageId)}onSearchFormSubmit(t){"string"==typeof t.value.pay_party&&this.form.controls.pay_party.setValue(null),"string"==typeof t.value.issue_party&&this.form.controls.issue_party.setValue(null),"string"==typeof t.value.customer&&this.form.controls.customer.setValue(null),"string"==typeof t.value.load_agent&&this.form.controls.load_agent.setValue(null),"string"==typeof t.value.agent&&this.form.controls.agent.setValue(null),"string"==typeof t.value.voyage&&this.form.controls.voyage.setValue(null),"string"==typeof t.value.payment_center&&this.form.controls.payment_center.setValue(null),"string"==typeof t.value.price&&this.form.controls.price.setValue(null);let e=JSON.parse(JSON.stringify(t.value));e.date_from&&(e.date_from=this.datePipe.transform(new Date(e.date_from),"MM/dd/yyyy")),e.date_to&&(e.date_to=this.datePipe.transform(new Date(e.date_to),"MM/dd/yyyy")),this.fitlerShipment.emit(e)}setCheck(t){t.check=!t.check}setDisabled(t){this.check[t]?this.formEdit.controls[t].disable():this.formEdit.controls[t].enable(),this.check[t]=!this.check[t]}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(K.d),R.Rb(q.a),R.Rb(Y.a),R.Rb(i.g),R.Rb(H.f),R.Rb(i.a))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-sidebar"]],viewQuery:function(t,e){var n;1&t&&(R.Sc(bt,!0),R.Sc(pt,!0)),2&t&&(R.wc(n=R.gc())&&(e.searchNgForm=n.first),R.wc(n=R.gc())&&(e.allSelected=n.first))},inputs:{formSearch:"formSearch",customer:"customer",supplier:"supplier",agent:"agent",voyage:"voyage",price:"price",currency:"currency",country:"country",type:"type",selected:"selected",total:"total",voyageId:"voyageId",customerId:"customerId"},outputs:{fitlerShipment:"fitlerShipment",typeChange:"typeChange",updateSelectItem:"updateSelectItem"},decls:2,vars:2,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit",4,"ngIf"],["name","form",3,"formGroup","keydown.enter",4,"ngIf"],["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","pay_party","matInput","","formControlName","pay_party",3,"matAutocomplete"],[3,"displayWith"],["autoCus1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","issue_party","matInput","","formControlName","issue_party",3,"matAutocomplete"],["autoSup1","matAutocomplete"],[3,"ngClass"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete","readonly"],["autoCus2","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","load_agent",3,"matAutocomplete"],["autoSup3","matAutocomplete"],["inputCheck","","aria-label","agent","matInput","","formControlName","agent",3,"matAutocomplete"],["autoSup2","matAutocomplete"],["inputCheck","","aria-label","voyage","matInput","","formControlName","voyage",3,"matAutocomplete","readonly"],["autoVoyage","matAutocomplete"],["formControlName","price","multiple",""],[3,"value","click"],["allSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","currency"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center",3,"matAutocomplete"],["autoCountry","matAutocomplete"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","type"],[1,"mb-12",3,"value"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],["name","form",3,"formGroup","keydown.enter"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"disabled","click"],[1,"nav","material2"],["fxFlex","100",1,"group","mt-24"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],["class","item-divider",4,"ngIf"],[1,"item","mb-8",3,"ngClass"],[1,"font-size-16","text-bold",3,"ngClass"],["appearance","outline",1,"padding-item","w-100-p","pr-sm-8"],["inputCheck","","matInput","","formControlName","debit"],["matPrefix","",3,"checked","change"],["inputCheck","","matInput","","formControlName","inv_number"],["inputCheck","","matInput","","formControlName","bank_ref"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date",3,"matDatepicker","change"],["issue_date",""],["inputCheck","","matInput","","name","pay_date","formControlName","pay_date",3,"matDatepicker","change"],["pay_date",""],["type","number","inputCheck","","matInput","","formControlName","ex_rate"],["inputCheck","","matInput","","formControlName","info"],[1,"item",3,"ngClass"],[1,"item-divider"]],template:function(t,e){1&t&&(R.Jc(0,kt,137,72,"form",0),R.Jc(1,Ot,68,27,"form",1)),2&t&&(R.pc("ngIf","form"==e.type),R.Db(1),R.pc("ngIf","edit"==e.type))},directives:[H.t,K.A,K.q,K.h,Z.d,Z.c,s.b,Z.b,tt.a,b.c,b.f,h.b,K.b,c.c,K.p,K.g,c.a,H.s,H.q,it.a,m.a,W.n,f.b,f.a,a.b,a.d,b.h,a.a,y.a,b.g,K.u],pipes:[H.b,H.g],styles:["report-sidebar{border-right:1px solid #a3a3a3}report-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}report-sidebar .navbar-scroll-container{background:#fff!important}report-sidebar .navbar-scroll-container .navbar-content{padding-top:0}report-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .padding-item .mat-form-field-wrapper{padding-bottom:8px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-form-field-prefix{top:-5px;margin-right:8px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}report-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),t})();function Lt(t,e){if(1&t){const t=R.Yb();R.Xb(0,"fuse-sidebar",10),R.Xb(1,"report-sidebar",11),R.fc("fitlerShipment",(function(e){return R.Bc(t),R.jc().fitlerShipment(e)}))("typeChange",(function(e){return R.Bc(t),R.jc().typeChange(e)}))("updateSelectItem",(function(e){return R.Bc(t),R.jc().updateSelectItem(e)})),R.Wb(),R.Wb()}if(2&t){const t=R.jc();R.Db(1),R.pc("voyageId",t.voyageId)("customerId",t.customerId)("type",t.type)("selected",t.selected)("total",t.total)("formSearch",t.formSearch)("customer",t.customer)("supplier",t.supplier)("agent",t.agent)("voyage",t.voyage)("price",t.price)("currency",t.currency)("country",t.country)}}function It(t,e){1&t&&R.Sb(0,"router-outlet")}let Tt=(()=>{class t{constructor(t,e,n,i,r){this._fuseSidebarService=t,this.reportService=e,this.router=n,this.authService=i,this.datePipe=r,this.sidebarPanel=!0,this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.type="form",this._unsubscribeAll=new A.a}ngOnInit(){this.searchText=this.reportService.searchText,this.formSearch=this.reportService.currenSearch.formSearch,this.voyageId=this.reportService.voyageId,this.customerId=this.reportService.customerId,this.reportService.onVoyageChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{t?(this.formSearch.voyage=t,this.router.navigate(["/apps/workflow/report/soa/voyage/"+t+"/bill"])):(this.formSearch.voyage=null,this.router.navigate(["/apps/workflow/report/soa/voyage/bill"]))}),this.reportService.onCustomerChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{t?(this.formSearch.customer=t,this.router.navigate(["/apps/workflow/report/soa/customer/"+t+"/bill"])):(this.formSearch.customer=null,this.router.navigate(["/apps/workflow/report/soa/customer/bill"]))}),this.reportService.onSoaChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.voyage=this.reportService.sptVoyage,this.price=this.reportService.sptPrice}),this.reportService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.customer=this.reportService.dataCustomer,this.supplier=this.reportService.dataSupplier}),this.reportService.onDataItemChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.agent=this.reportService.agent,this.commodity=this.reportService.commodity,this.packageType=this.reportService.packageType,this.currency=this.reportService.currency,this.country=this.reportService.country,this.depot=this.reportService.depot}),this.reportService.onTypeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{setTimeout(()=>{this.type=t},100)}),this.reportService.onUpdateAddInfoChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{t.length>0&&(this.selected=t[0],this.total=t[1])})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(t){this._fuseSidebarService.getSidebar(t).toggleOpen()}showHideBar(t){this.sidebarPanel=!this.sidebarPanel}refreshPage(t){this.authService.refreshData(this.reportService)}fitlerShipment(t){this.formSearch=t,this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(t).then(e=>{this.reportService.currenSearch.formSearch=t,this.authService.onRequestChanged.next(!1)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")})}getReportData(){this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.formSearch).then(t=>{console.log(t),this.authService.onRequestChanged.next(!1)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")})}searchFilter(t){this.reportService.onSearchTextChanged.next(t)}typeChange(t){this.type=t}updateSelectItem(t){let e=[];this.selected.map(t=>{e.push({id:t.id,type:t.type_name})}),t.issue_date&&(t.issue_date=this.datePipe.transform(t.issue_date,"yyyy-MM-dd")),t.pay_date&&(t.pay_date=this.datePipe.transform(t.pay_date,"yyyy-MM-dd")),t.update_by=this.authService.user,this.authService.onRequestChanged.next(!0),this.reportService.updateMultiShipmentItem([t,e]).then(t=>{console.log(t),this.getReportData()}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Error load data")})}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(F.a),R.Rb(U),R.Rb(i.g),R.Rb(q.a),R.Rb(H.f))},t.\u0275cmp=R.Lb({type:t,selectors:[["report"]],decls:10,vars:7,consts:[["id","shipment",1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","report-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","report-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"voyageId","customerId","searchText","sidebarName","showHideBar","refreshPage","toggleSidebar","searchFilter"],[1,"content-card",2,"border","none","border-radius","0"],[1,"content","m-8"],[4,"ngIf"],["name","report-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"voyageId","customerId","type","selected","total","formSearch","customer","supplier","agent","voyage","price","currency","country","fitlerShipment","typeChange","updateSelectItem"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Jc(1,Lt,2,13,"fuse-sidebar",1),R.Xb(2,"fuse-sidebar",2),R.Xb(3,"div",3),R.Sb(4,"report-setting",4),R.Wb(),R.Wb(),R.Xb(5,"div",5),R.Xb(6,"report-header",6),R.fc("showHideBar",(function(t){return e.showHideBar(t)}))("refreshPage",(function(t){return e.refreshPage(t)}))("toggleSidebar",(function(t){return e.toggleSidebar(t)}))("searchFilter",(function(t){return e.searchFilter(t)})),R.Wb(),R.Xb(7,"div",7),R.Xb(8,"div",8),R.Jc(9,It,1,0,"router-outlet",9),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Db(1),R.pc("ngIf",e.sidebarPanel),R.Db(3),R.pc("displayObject",e.displayObject),R.Db(2),R.pc("voyageId",e.voyageId)("customerId",e.customerId)("searchText",e.searchText)("sidebarName","report-sidebar"),R.Db(3),R.pc("ngIf",!0))},directives:[G.a,H.t,Q.a,et,at,Nt,i.l],styles:["report{width:100%}report .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){report .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}report .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){report .center .content-card report{border-right:0}report .center .content-card report,report .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}report .center .content-card shipment-details{display:none!important}report .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}report .center .content-card.current-shipment-selected .content report,report .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}report .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:j.a}}),t})();var Vt=n("vxfF"),At=n("cfqv");const Mt=function(t){return{hide:t}},jt=function(t,e){return{"total-eur":t,"total-usd":e}};function Rt(t,e){if(1&t&&(R.Xb(0,"div",10),R.Xb(1,"span",11),R.Lc(2),R.Wb(),R.Xb(3,"span"),R.Lc(4),R.kc(5,"number"),R.Wb(),R.Wb()),2&t){const t=e.$implicit,n=e.index,i=R.jc();R.pc("ngClass",R.rc(7,Mt,0==i.partner.balance_paydate[t])),R.Db(1),R.pc("ngClass",R.sc(9,jt,n%2==0,n%2==1)),R.Db(1),R.Mc(t),R.Db(2),R.Mc(R.mc(5,4,i.partner.balance_paydate[t]>=0?i.partner.balance_paydate[t]:0-i.partner.balance_paydate[t],"VND"==t?"1.0-0":"1.2-2"))}}function Ft(t,e){if(1&t&&(R.Xb(0,"span",12),R.kc(1,"date"),R.Lc(2),R.Wb()),2&t){const t=R.jc();R.pc("matTooltip",R.mc(1,4,t.partner.last_paydate,"MM/dd/yyyy"))("matTooltipPosition","right"),R.Db(2),R.Oc("Last paid : ",t.partner.last_pay," day",t.partner.last_pay>1?"s":"","")}}let Pt=(()=>{class t{constructor(t,e){this._activatedRoute=t,this.router=e,this.more=!1,this.checkCurrency=!1}ngOnInit(){}goReportDetails(t){this.router.navigate(["/apps/workflow/report/details/"+t.type+"/"+t.id])}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.a),R.Rb(i.g))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-paydate-card"]],inputs:{partner:"partner",currency:"currency"},decls:12,vars:3,consts:[[1,"list-card-details"],[1,"list-card-name",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"list-card-badges"],["fxLayout","row wrap",1,"list-card-members"],["fxFlex","50","class","pr-8 pb-4 font-size-12","fxLayout","row","fxLayoutAlign","space-between center",3,"ngClass",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"list-card-footer"],["fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row","fxLayoutAlign","start center",1,"list-card-footer-item"],[1,"s-18"],[3,"matTooltip","matTooltipPosition",4,"ngIf"],["fxFlex","50","fxLayout","row","fxLayoutAlign","space-between center",1,"pr-8","pb-4","font-size-12",3,"ngClass"],[3,"ngClass"],[3,"matTooltip","matTooltipPosition"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Xb(1,"div",1),R.fc("click",(function(t){return e.goReportDetails(e.partner)})),R.Lc(2),R.Wb(),R.Sb(3,"div",2),R.Xb(4,"div",3),R.Jc(5,Rt,6,12,"div",4),R.Wb(),R.Wb(),R.Xb(6,"div",5),R.Xb(7,"div",6),R.Xb(8,"span",7),R.Xb(9,"mat-icon",8),R.Lc(10,"comment"),R.Wb(),R.Wb(),R.Jc(11,Ft,3,7,"span",9),R.Wb(),R.Wb()),2&t&&(R.Db(2),R.Mc(e.partner.short_name),R.Db(3),R.pc("ngForOf",e.currency),R.Db(6),R.pc("ngIf",e.partner.last_pay))},directives:[Z.d,Z.c,H.s,p.a,H.t,Z.b,H.q,it.a,d.a],pipes:[H.g,H.f],styles:['report-paydate-card{position:relative;display:block;width:100%;margin:16px 0!important;border-radius:4px;border:1px solid;cursor:pointer}report-paydate-card .list-card-sort-handle{display:none;position:absolute;top:0;right:0;padding:4px;background:hsla(0,0%,100%,.8)}report-paydate-card .list-card-details{padding:16px 16px 0}report-paydate-card .list-card-details .list-card-labels{margin-bottom:6px}report-paydate-card .list-card-details .list-card-labels .list-card-label{width:32px;height:6px;border-radius:6px;margin:0 6px 6px 0}report-paydate-card .list-card-details .list-card-labels .label-chips{box-shadow:none;padding:0}report-paydate-card .list-card-details .list-card-labels .label-chips .label-chip{display:block}report-paydate-card .list-card-details .list-card-labels .label-chips .label-chip .chip-remove{cursor:pointer}report-paydate-card .list-card-details .list-card-labels .label-chips .label-chip.mat-standard-chip{border-radius:1px!important}report-paydate-card .list-card-details .list-card-name{font-size:14px;font-weight:600;margin-bottom:12px}report-paydate-card .list-card-details .list-card-badges{margin-bottom:12px}report-paydate-card .list-card-details .list-card-badges .badge{padding:4px;border-radius:2px}report-paydate-card .list-card-details .list-card-badges .badge mat-icon{margin-right:4px}report-paydate-card .list-card-details .list-card-members{margin-bottom:12px}report-paydate-card .list-card-details .list-card-members .total-eur{padding:0 8px;background:#4caf50;color:#fff}report-paydate-card .list-card-details .list-card-members .total-usd{padding:0 8px;background:#b3e5fc}report-paydate-card .list-card-details .list-card-members .total-vnd{padding:0 8px;background:#ffecb3}report-paydate-card .list-card-details .list-card-members .total-other{padding:0 8px;background:#ef5350;color:#fff}report-paydate-card .list-card-details .list-card-members .table-balance{font-size:12px!important}report-paydate-card .list-card-details .list-card-members .table-balance td,report-paydate-card .list-card-details .list-card-members .table-balance th{padding:4px!important}report-paydate-card .list-card-details .list-card-members .table-balance .sticky-col{width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#ffcf9c;z-index:20}report-paydate-card .list-card-details .list-card-members .list-card-member{margin-right:8px}report-paydate-card .list-card-details .list-card-members .list-card-member .list-card-member-avatar{border-radius:50%;width:32px;height:32px}report-paydate-card .list-card-footer{border-top:1px solid;padding:0 16px}report-paydate-card .list-card-footer .list-card-footer-item{height:48px;margin-right:12px}report-paydate-card .list-card-footer .list-card-footer-item .value{padding-left:8px}report-paydate-card .list-card-footer .list-card-footer-item:last-of-type{margin-right:0}report-paydate-card .ngx-dnd-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}report-paydate-card.gu-mirror{position:fixed!important;margin:0!important;z-index:9999!important;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80);box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}report-paydate-card.gu-hide{display:none!important}report-paydate-card.gu-unselectable{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}report-paydate-card.gu-transit{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}'],encapsulation:2}),t})();function Jt(t,e){if(1&t&&(R.Xb(0,"div"),R.Sb(1,"report-paydate-card",9),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("partner",t)("currency",n.currency)}}function Bt(t,e){if(1&t&&(R.Xb(0,"div",11),R.Xb(1,"span",12),R.Lc(2),R.Wb(),R.Xb(3,"span",13),R.Lc(4),R.kc(5,"number"),R.Wb(),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(2),R.Mc(t),R.Db(2),R.Mc(R.mc(5,2,e.list.totalSoa[t]>0?e.list.totalSoa[t]:0-e.list.totalSoa[t],"VND"!=t?"1.2-2":"1.0-0"))}}function zt(t,e){if(1&t&&(R.Xb(0,"div"),R.Jc(1,Bt,6,5,"div",10),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.list.totalSoa[t]&&0!=n.list.totalSoa[t])}}let Et=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Lb({type:t,selectors:[["report-paydate-list"]],inputs:{list:"list",type:"type",currency:"currency"},decls:10,vars:4,consts:[["fxLayout","column",1,"list"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center",1,"list-header"],["fxFlex","1 0 auto",1,"list-header-name"],["itemSize","202","fxLayout","column",1,"list-content"],[1,"list-cards"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"list-footer","pt-8","pb-8"],[1,"add-card-button"],[4,"ngFor","ngForOf"],[1,"report-paydate-card",3,"partner","currency"],["fxLayout","row","fxLayoutAlign","space-between start","class","mb-4",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start",1,"mb-4"],["fxFlex","25",1,"total-eur"],["fxFlex","75",1,"text-right"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Xb(1,"div",1),R.Xb(2,"div",2),R.Lc(3),R.Wb(),R.Wb(),R.Xb(4,"cdk-virtual-scroll-viewport",3),R.Xb(5,"div",4),R.Jc(6,Jt,2,2,"div",5),R.Wb(),R.Wb(),R.Xb(7,"div",6),R.Xb(8,"div",7),R.Jc(9,zt,2,1,"div",8),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Db(3),R.Oc(" ",e.list.name,"(",e.list.data.length,") "),R.Db(3),R.pc("cdkVirtualForOf",e.list.data),R.Db(3),R.pc("ngForOf",e.currency))},directives:[Z.d,Z.b,Z.c,Vt.e,Vt.a,Vt.d,H.s,Pt,H.t],pipes:[H.g],styles:[".report-paydate-list{width:344px;min-width:344px;max-width:344px;padding-right:24px!important;height:100%}.report-paydate-list .list{max-height:100%;border-radius:2px;-webkit-transition:box-shadow .15s ease;transition:box-shadow .15s ease}.report-paydate-list .list .list-header{height:64px;min-height:64px;padding:0 8px 0 16px;border-bottom:1px solid}.report-paydate-list .list .list-header .list-header-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;cursor:pointer}@media screen and (max-width:959px){.report-paydate-list .list .list-header{height:48px;min-height:48px}}.report-paydate-list .list .list-content{position:relative;height:1010px;overflow:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.report-paydate-list .list .list-content .list-cards{position:relative;min-height:32px}.report-paydate-list .list .list-footer{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 0 auto;border-top:1px solid}.report-paydate-list .list .list-footer .add-card-button{position:relative;height:80px;overflow:auto;padding:0 16px;text-align:left;text-transform:none;font-weight:600;font-size:14px;cursor:pointer;border-radius:2px}.report-paydate-list .list .list-footer .add-card-button .total-eur{padding:0 8px;background:#4caf50;color:#fff}.report-paydate-list .list .list-footer .add-card-button mat-icon{margin-right:8px}.report-paydate-list .list .list-footer .add-card-button .table-balance{font-size:12px!important}.report-paydate-list .list .list-footer .add-card-button .table-balance td,.report-paydate-list .list .list-footer .add-card-button .table-balance th{padding:4px!important}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-eur,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-eur{padding:0 8px;background:#4caf50;color:#fff}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-usd,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-usd{padding:0 8px;background:#b3e5fc}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-vnd,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-vnd{padding:0 8px;background:#ffecb3}.report-paydate-list .list .list-footer .add-card-button .table-balance td .total-other,.report-paydate-list .list .list-footer .add-card-button .table-balance th .total-other{padding:0 8px;background:#ef5350;color:#fff}.report-paydate-list .list .list-footer .add-card-button .table-balance .sticky-col{width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#ffcf9c;z-index:20}"],encapsulation:2}),t})();const $t=function(){return{duration:"350ms",x:"100%"}},Yt=function(t){return{value:"*",params:t}};function Ht(t,e){if(1&t&&R.Sb(0,"report-paydate-list",4),2&t){const t=e.$implicit,n=R.jc();R.pc("list",t)("type","Balance")("currency",n.currencies)("@animate",R.rc(5,Yt,R.qc(4,$t)))}}const qt=function(){return{value:"50"}};let Ut=(()=>{class t{constructor(t,e,n){this._activatedRoute=t,this.reportService=e,this.authService=n,this.height=560,this._unsubscribeAll=new A.a}ngOnInit(){this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.width<600?t.height-16:t.height-64-64-16}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{let e=t?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16+e:this.authService.screenHeight-64-64-16+e}),this.reportService.onSoaChanged.subscribe(t=>{this.total=this.reportService.total,this.filterShipmentBalance=this.reportService.filterShipmentBalance,this.currencies=this.reportService.currencies,this.customer=this.reportService.customer,this.supplier=this.reportService.supplier})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.a),R.Rb(U),R.Rb(q.a))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-paydate"]],viewQuery:function(t,e){var n;1&t&&R.Sc(tt.a,!0),2&t&&R.wc(n=R.gc())&&(e.listScroll=n.first)},decls:5,vars:5,consts:[["id","board"],["fxFlex","",1,"board-content-wrapper"],["fxLayout","row",1,"board-content","ngx-dnd-container"],["class","report-paydate-list list-wrapper",3,"list","type","currency",4,"ngFor","ngForOf"],[1,"report-paydate-list","list-wrapper",3,"list","type","currency"]],template:function(t,e){1&t&&(R.Xb(0,"mat-sidenav-container"),R.Xb(1,"div",0),R.Xb(2,"div",1),R.Xb(3,"div",2),R.Jc(4,Ht,1,7,"report-paydate-list",3),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Ic("height",e.height,"px"),R.Db(3),R.pc("@animateStagger",R.qc(4,qt)),R.Db(1),R.pc("ngForOf",e.filterShipmentBalance))},directives:[k.a,Z.b,Z.d,H.s,Et],styles:["report-paydate mat-sidenav-container{width:100%}report-paydate mat-sidenav-container #board{display:-webkit-box;display:flex;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;flex-direction:column!important;height:100%;background:#fff}report-paydate mat-sidenav-container #board .board-content-wrapper{position:relative;height:100%}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;overflow-y:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content .list-sortable-placeholder{background:rgba(0,0,0,.06);margin-right:24px}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content .list-wrapper{height:100%}report-paydate mat-sidenav-container #board .board-content-wrapper .board-content .new-list-wrapper{width:344px;min-width:344px;max-width:344px;padding-right:24px}"],encapsulation:2,data:{animation:j.a}}),t})();var Gt=n("Frtq");function Qt(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.vesselOpen=!n.vesselOpen})),R.Lc(1,"add"),R.Wb()}}function Kt(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.vesselOpen=!n.vesselOpen})),R.Lc(1,"removed"),R.Wb()}}function Zt(t,e){1&t&&(R.Xb(0,"th",23),R.Lc(1,"POL"),R.Wb())}function te(t,e){1&t&&(R.Xb(0,"th",23),R.Lc(1,"POD"),R.Wb())}function ee(t,e){if(1&t&&(R.Xb(0,"th",25),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.Db(1),R.Mc(t)}}function ne(t,e){if(1&t&&(R.Vb(0),R.Jc(1,ee,2,1,"th",24),R.Ub()),2&t){const t=R.jc();R.Db(1),R.pc("ngForOf",t.arrType)}}function ie(t,e){1&t&&(R.Xb(0,"th",26),R.Lc(1,"ETD"),R.Wb())}function re(t,e){1&t&&(R.Xb(0,"th",26),R.Lc(1,"ETA"),R.Wb())}function oe(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.shipmentOpen=!n.shipmentOpen})),R.Lc(1,"add"),R.Wb()}}function ce(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.shipmentOpen=!n.shipmentOpen})),R.Lc(1,"removed"),R.Wb()}}function ae(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Bill"),R.Wb())}function se(t,e){if(1&t&&(R.Xb(0,"th",25),R.Lc(1),R.Wb()),2&t){const t=e.$implicit;R.Db(1),R.Mc(t)}}function le(t,e){if(1&t&&(R.Vb(0),R.Jc(1,se,2,1,"th",24),R.Ub()),2&t){const t=R.jc();R.Db(1),R.pc("ngForOf",t.arrType)}}function be(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Customer"),R.Wb())}function pe(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Agent"),R.Wb())}function de(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Process"),R.Wb())}function he(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),R.Lc(1,"add"),R.Wb()}}function ue(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),R.Lc(1,"removed"),R.Wb()}}function me(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb())}function fe(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),R.Lc(1,"add"),R.Wb()}}function ge(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),R.Lc(1,"removed"),R.Wb()}}function ve(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb())}function ye(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costVNOpen=!n.costVNOpen})),R.Lc(1,"add"),R.Wb()}}function xe(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costVNOpen=!n.costVNOpen})),R.Lc(1,"removed"),R.Wb()}}function De(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb())}function we(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costNNOpen=!n.costNNOpen})),R.Lc(1,"add"),R.Wb()}}function Se(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costNNOpen=!n.costNNOpen})),R.Lc(1,"removed"),R.Wb()}}function ke(t,e){1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb())}function We(t,e){if(1&t&&(R.Xb(0,"td",23),R.Lc(1),R.Wb()),2&t){const t=R.jc(3);R.Eb("rowspan",t.shipments[t.key].shipment.length),R.Db(1),R.Mc(t.shipments[t.key].pol_name)}}function Ce(t,e){if(1&t&&(R.Xb(0,"td",23),R.Lc(1),R.Wb()),2&t){const t=R.jc(3);R.Eb("rowspan",t.shipments[t.key].shipment.length),R.Db(1),R.Mc(t.shipments[t.key].pod_name)}}function Xe(t,e){if(1&t&&(R.Xb(0,"td",25),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc(4);R.Eb("rowspan",n.shipments[n.key].shipment.length),R.Db(1),R.Mc(n.shipments[n.key][t])}}function _e(t,e){if(1&t&&(R.Vb(0),R.Jc(1,Xe,2,2,"td",24),R.Ub()),2&t){const t=R.jc(3);R.Db(1),R.pc("ngForOf",t.arrType)}}function Oe(t,e){if(1&t&&(R.Xb(0,"td",26),R.Lc(1),R.kc(2,"date"),R.Wb()),2&t){const t=R.jc(3);R.Eb("rowspan",t.shipments[t.key].shipment.length),R.Db(1),R.Mc(R.mc(2,2,t.shipments[t.key].depart_time,"MM/dd/yyyy HH:mm"))}}function Ne(t,e){if(1&t&&(R.Xb(0,"td",26),R.Lc(1),R.kc(2,"date"),R.Wb()),2&t){const t=R.jc(3);R.Eb("rowspan",t.shipments[t.key].shipment.length),R.Db(1),R.Mc(R.mc(2,2,t.shipments[t.key].arrive_time,"MM/dd/yyyy HH:mm"))}}function Le(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td"),R.Lc(2,"1"),R.Wb(),R.Xb(3,"td",32),R.Xb(4,"a"),R.Lc(5),R.Wb(),R.Wb(),R.Jc(6,We,2,2,"td",11),R.Jc(7,Ce,2,2,"td",11),R.Jc(8,_e,2,1,"ng-container",12),R.Jc(9,Oe,3,5,"td",13),R.Jc(10,Ne,3,5,"td",13),R.Ub()),2&t){const t=R.jc(2);R.Db(1),R.Eb("rowspan",t.shipments[t.key].shipment.length),R.Db(2),R.Eb("rowspan",t.shipments[t.key].shipment.length),R.Db(2),R.Mc(t.shipments[t.key].vessel_full_name),R.Db(1),R.pc("ngIf",t.vesselOpen),R.Db(1),R.pc("ngIf",t.vesselOpen),R.Db(1),R.pc("ngIf",t.vesselOpen),R.Db(1),R.pc("ngIf",t.vesselOpen),R.Db(1),R.pc("ngIf",t.vesselOpen)}}function Ie(t,e){if(1&t&&(R.Xb(0,"td"),R.Lc(1),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.Mc(t.bill)}}function Te(t,e){if(1&t&&(R.Xb(0,"td",34),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc(2).$implicit;R.Db(1),R.Mc(n[t])}}function Ve(t,e){if(1&t&&(R.Vb(0),R.Jc(1,Te,2,1,"td",33),R.Ub()),2&t){const t=R.jc(2);R.Db(1),R.pc("ngForOf",t.arrType)}}function Ae(t,e){if(1&t&&(R.Xb(0,"td",35),R.Lc(1),R.Wb()),2&t){const t=R.jc().$implicit;R.pc("matTooltip",t.customer_name),R.Db(1),R.Mc(t.customer_short_name)}}function Me(t,e){if(1&t&&(R.Xb(0,"td",35),R.Lc(1),R.Wb()),2&t){const t=R.jc().$implicit;R.pc("matTooltip",t.agent_name),R.Db(1),R.Mc(t.agent_short_name)}}function je(t,e){1&t&&(R.Xb(0,"mat-chip"),R.Lc(1,"Booking"),R.Wb())}function Re(t,e){1&t&&(R.Xb(0,"mat-chip",41),R.Lc(1,"Stuffing"),R.Wb())}function Fe(t,e){1&t&&(R.Xb(0,"mat-chip",42),R.Lc(1,"Ready to load"),R.Wb())}function Pe(t,e){1&t&&(R.Xb(0,"mat-chip",43),R.Lc(1,"Loaded"),R.Wb())}function Je(t,e){1&t&&(R.Xb(0,"mat-chip",41),R.Lc(1,"Discharge"),R.Wb())}function Be(t,e){1&t&&(R.Xb(0,"mat-chip",42),R.Lc(1,"Pick up"),R.Wb())}function ze(t,e){1&t&&(R.Xb(0,"mat-chip",43),R.Lc(1,"Complete"),R.Wb())}function Ee(t,e){if(1&t&&(R.Xb(0,"td"),R.Xb(1,"mat-chip-list",36),R.Jc(2,je,2,0,"mat-chip",37),R.Jc(3,Re,2,0,"mat-chip",38),R.Jc(4,Fe,2,0,"mat-chip",39),R.Jc(5,Pe,2,0,"mat-chip",40),R.Jc(6,Je,2,0,"mat-chip",38),R.Jc(7,Be,2,0,"mat-chip",39),R.Jc(8,ze,2,0,"mat-chip",40),R.Wb(),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngSwitch",t.process),R.Db(1),R.pc("ngSwitchCase",0),R.Db(1),R.pc("ngSwitchCase",1),R.Db(1),R.pc("ngSwitchCase",2),R.Db(1),R.pc("ngSwitchCase",3),R.Db(1),R.pc("ngSwitchCase",4),R.Db(1),R.pc("ngSwitchCase",5),R.Db(1),R.pc("ngSwitchCase",6)}}const $e=function(t,e){return{paid:t,"accent-100-bg":e}};function Ye(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",45),R.Xb(2,"div",46),R.Xb(3,"span",47),R.Lc(4),R.Wb(),R.Xb(5,"span",20),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,$e,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function He(t,e){if(1&t&&(R.Xb(0,"td",44),R.Jc(1,Ye,8,11,"ng-container",17),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.revenueVN)}}function qe(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",45),R.Xb(2,"div",46),R.Xb(3,"span",47),R.Lc(4),R.Wb(),R.Xb(5,"span",20),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,$e,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Ue(t,e){if(1&t&&(R.Xb(0,"td",44),R.Jc(1,qe,8,11,"ng-container",17),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.revenueNN)}}function Ge(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",45),R.Xb(2,"div",46),R.Xb(3,"span",47),R.Lc(4),R.Wb(),R.Xb(5,"span",20),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,$e,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Qe(t,e){if(1&t&&(R.Xb(0,"td",44),R.Jc(1,Ge,8,11,"ng-container",17),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.costVN)}}function Ke(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",45),R.Xb(2,"div",46),R.Xb(3,"span",47),R.Lc(4),R.Wb(),R.Xb(5,"span",20),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,$e,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Ze(t,e){if(1&t&&(R.Xb(0,"td",44),R.Jc(1,Ke,8,11,"ng-container",17),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.costNN)}}const tn=function(t,e){return{"red-600-fg":t,"teal-200-bg":e}};function en(t,e){if(1&t){const t=R.Yb();R.Vb(0),R.Xb(1,"tr"),R.Jc(2,Le,11,8,"ng-container",12),R.Xb(3,"td",19),R.Xb(4,"a",27),R.fc("click",(function(e){return R.Bc(t),R.jc().matDialogRef.close()})),R.Lc(5),R.Wb(),R.Wb(),R.Jc(6,Ie,2,1,"td",12),R.Jc(7,Ve,2,1,"ng-container",12),R.Jc(8,Ae,2,2,"td",28),R.Jc(9,Me,2,2,"td",28),R.Jc(10,Ee,9,8,"td",12),R.Xb(11,"td",29),R.Lc(12),R.kc(13,"number"),R.Wb(),R.Jc(14,He,2,1,"td",30),R.Xb(15,"td",29),R.Lc(16),R.kc(17,"number"),R.Wb(),R.Jc(18,Ue,2,1,"td",30),R.Xb(19,"td",29),R.Lc(20),R.kc(21,"number"),R.Wb(),R.Jc(22,Qe,2,1,"td",30),R.Xb(23,"td",29),R.Lc(24),R.kc(25,"number"),R.Wb(),R.Jc(26,Ze,2,1,"td",30),R.Xb(27,"td",31),R.Lc(28),R.kc(29,"number"),R.Wb(),R.Wb(),R.Ub()}if(2&t){const t=e.$implicit,n=e.index,i=R.jc();R.Db(2),R.pc("ngIf",0==n),R.Db(2),R.pc("routerLink","/apps/workflow/shipment/detail/"+t.id+"/soa"),R.Db(1),R.Mc(t.code),R.Db(1),R.pc("ngIf",i.shipmentOpen),R.Db(1),R.pc("ngIf",i.shipmentOpen),R.Db(1),R.pc("ngIf",i.shipmentOpen),R.Db(1),R.pc("ngIf",i.shipmentOpen),R.Db(1),R.pc("ngIf",i.shipmentOpen),R.Db(1),R.pc("ngClass",R.sc(37,tn,t.profit.revenueVN<0,t.profit.revenueVN>=0)),R.Db(1),R.Mc(R.mc(13,22,t.profit.revenueVN,"1.0-0")),R.Db(2),R.pc("ngIf",i.revenueVNOpen),R.Db(1),R.pc("ngClass",R.sc(40,tn,t.profit.revenueNN<0,t.profit.revenueNN>=0)),R.Db(1),R.Mc(R.mc(17,25,t.profit.revenueNN,"1.0-0")),R.Db(2),R.pc("ngIf",i.revenueNNOpen),R.Db(1),R.pc("ngClass",R.sc(43,tn,t.profit.costVN<0,t.profit.costVN>=0)),R.Db(1),R.Mc(R.mc(21,28,t.profit.costVN,"1.0-0")),R.Db(2),R.pc("ngIf",i.costVNOpen),R.Db(1),R.pc("ngClass",R.sc(46,tn,t.profit.costNN<0,t.profit.costNN>=0)),R.Db(1),R.Mc(R.mc(25,31,t.profit.costNN,"1.0-0")),R.Db(2),R.pc("ngIf",i.costNNOpen),R.Db(1),R.pc("ngClass",R.sc(49,tn,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN<0,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN>=0)),R.Db(1),R.Mc(R.mc(29,34,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN,"1.0-0"))}}function nn(t,e){1&t&&R.Sb(0,"td")}function rn(t,e){1&t&&R.Sb(0,"td")}function on(t,e){1&t&&R.Sb(0,"td",25)}function cn(t,e){if(1&t&&(R.Vb(0),R.Jc(1,on,1,0,"td",24),R.Ub()),2&t){const t=R.jc();R.Db(1),R.pc("ngForOf",t.arrType)}}function an(t,e){1&t&&R.Sb(0,"td")}function sn(t,e){1&t&&R.Sb(0,"td")}function ln(t,e){1&t&&R.Sb(0,"td")}function bn(t,e){1&t&&R.Sb(0,"td",49)}function pn(t,e){if(1&t&&(R.Vb(0),R.Jc(1,bn,1,0,"td",48),R.Ub()),2&t){const t=R.jc();R.Db(1),R.pc("ngForOf",t.arrType)}}function dn(t,e){1&t&&R.Sb(0,"td")}function hn(t,e){1&t&&R.Sb(0,"td")}function un(t,e){1&t&&R.Sb(0,"td")}function mn(t,e){1&t&&R.Sb(0,"td")}function fn(t,e){1&t&&R.Sb(0,"td")}function gn(t,e){1&t&&R.Sb(0,"td")}function vn(t,e){1&t&&R.Sb(0,"td")}let yn=(()=>{class t{constructor(t,e,n,i,r,o,c){this.router=t,this.matDialogRef=e,this._data=n,this.authService=i,this.commonService=r,this.datePipe=o,this._formBuilder=c,this.revenueVNOpen=!0,this.revenueNNOpen=!0,this.costVNOpen=!0,this.costNNOpen=!0,this.vesselOpen=!1,this.shipmentOpen=!1,this.label=n.label,this.shipments=n.shipments,this.key=n.key,this.arrType=n.arrType,this.price=n.price}ngOnInit(){if(this.total={revenueVN:0,revenueNN:0,costVN:0,costNN:0},this.shipments[this.key].shipment.map(t=>{this.total.revenueVN+=t.profit.revenueVN,this.total.revenueNN+=t.profit.revenueNN,this.total.costVN+=t.profit.costVN,this.total.costNN+=t.profit.costNN}),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.g),R.Rb(g.f),R.Rb(g.a),R.Rb(q.a),R.Rb(Y.a),R.Rb(H.f),R.Rb(K.d))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-bill-table-modal-dialog"]],decls:101,vars:62,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","id","report-bill-table-modal-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],[1,"viewer-panel"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["class","w-112",4,"ngIf"],[4,"ngIf"],["class","w-120",4,"ngIf"],[1,"sticky-col2",2,"z-index","30"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"sticky-right-col1",2,"z-index","30"],[4,"ngFor","ngForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],[1,"w-152","sticky-col2"],[1,"text-right","text-bold"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[1,"w-112"],["class","w-52 text-center",4,"ngFor","ngForOf"],[1,"w-52","text-center"],[1,"w-120"],[1,"cursor-pointer",3,"routerLink","click"],[3,"matTooltip",4,"ngIf"],[1,"text-right","text-bold",3,"ngClass"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col1","text-right","text-bold",3,"ngClass"],[1,"w-152","sticky-col"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[2,"padding","0"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],["class","text-center text-bold",4,"ngFor","ngForOf"],[1,"text-center","text-bold"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Xb(1,"mat-toolbar",1),R.Xb(2,"mat-toolbar-row",2),R.Xb(3,"span",3),R.Lc(4),R.Wb(),R.Xb(5,"button",4),R.fc("click",(function(t){return e.matDialogRef.close()})),R.Xb(6,"mat-icon"),R.Lc(7,"close"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(8,"div",5),R.Xb(9,"div",6),R.Xb(10,"table",7),R.Xb(11,"thead"),R.Xb(12,"tr"),R.Xb(13,"th"),R.Lc(14,"No"),R.Wb(),R.Xb(15,"th",8),R.Lc(16,"Voyage "),R.Jc(17,Qt,2,0,"mat-icon",9),R.Jc(18,Kt,2,0,"mat-icon",10),R.Wb(),R.Jc(19,Zt,2,0,"th",11),R.Jc(20,te,2,0,"th",11),R.Jc(21,ne,2,1,"ng-container",12),R.Jc(22,ie,2,0,"th",13),R.Jc(23,re,2,0,"th",13),R.Xb(24,"th",14),R.Lc(25,"Shipment "),R.Jc(26,oe,2,0,"mat-icon",9),R.Jc(27,ce,2,0,"mat-icon",10),R.Wb(),R.Jc(28,ae,2,0,"th",12),R.Jc(29,le,2,1,"ng-container",12),R.Jc(30,be,2,0,"th",12),R.Jc(31,pe,2,0,"th",12),R.Jc(32,de,2,0,"th",12),R.Xb(33,"th"),R.Xb(34,"div",15),R.Xb(35,"span"),R.Lc(36,"REVENUE VN"),R.Wb(),R.Jc(37,he,2,0,"mat-icon",9),R.Jc(38,ue,2,0,"mat-icon",10),R.Wb(),R.Wb(),R.Jc(39,me,2,0,"th",12),R.Xb(40,"th"),R.Xb(41,"div",15),R.Xb(42,"span"),R.Lc(43,"REVENUE NN"),R.Wb(),R.Jc(44,fe,2,0,"mat-icon",9),R.Jc(45,ge,2,0,"mat-icon",10),R.Wb(),R.Wb(),R.Jc(46,ve,2,0,"th",12),R.Xb(47,"th"),R.Xb(48,"div",15),R.Xb(49,"span"),R.Lc(50,"COST VN"),R.Wb(),R.Jc(51,ye,2,0,"mat-icon",9),R.Jc(52,xe,2,0,"mat-icon",10),R.Wb(),R.Wb(),R.Jc(53,De,2,0,"th",12),R.Xb(54,"th"),R.Xb(55,"div",15),R.Xb(56,"span"),R.Lc(57,"COST NN"),R.Wb(),R.Jc(58,we,2,0,"mat-icon",9),R.Jc(59,Se,2,0,"mat-icon",10),R.Wb(),R.Wb(),R.Jc(60,ke,2,0,"th",12),R.Xb(61,"th",16),R.Lc(62,"PROFIT"),R.Wb(),R.Wb(),R.Wb(),R.Xb(63,"tbody"),R.Jc(64,en,30,52,"ng-container",17),R.Wb(),R.Xb(65,"tfoot"),R.Xb(66,"tr"),R.Sb(67,"td"),R.Xb(68,"td",18),R.Lc(69,"Total"),R.Wb(),R.Jc(70,nn,1,0,"td",12),R.Jc(71,rn,1,0,"td",12),R.Jc(72,cn,2,1,"ng-container",12),R.Jc(73,an,1,0,"td",12),R.Jc(74,sn,1,0,"td",12),R.Sb(75,"td",19),R.Jc(76,ln,1,0,"td",12),R.Jc(77,pn,2,1,"ng-container",12),R.Jc(78,dn,1,0,"td",12),R.Jc(79,hn,1,0,"td",12),R.Jc(80,un,1,0,"td",12),R.Xb(81,"td",20),R.Lc(82),R.kc(83,"number"),R.Wb(),R.Jc(84,mn,1,0,"td",12),R.Xb(85,"td",20),R.Lc(86),R.kc(87,"number"),R.Wb(),R.Jc(88,fn,1,0,"td",12),R.Xb(89,"td",20),R.Lc(90),R.kc(91,"number"),R.Wb(),R.Jc(92,gn,1,0,"td",12),R.Xb(93,"td",20),R.Lc(94),R.kc(95,"number"),R.Wb(),R.Jc(96,vn,1,0,"td",12),R.Xb(97,"td",20),R.Lc(98),R.kc(99,"number"),R.Wb(),R.Sb(100,"td"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Db(4),R.Mc(e.shipments[e.key].vessel_full_name),R.Db(13),R.pc("ngIf",!e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(3),R.pc("ngIf",!e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(5),R.pc("ngIf",!e.revenueVNOpen),R.Db(1),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.pc("ngIf",e.revenueVNOpen),R.Db(5),R.pc("ngIf",!e.revenueNNOpen),R.Db(1),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.pc("ngIf",e.revenueNNOpen),R.Db(5),R.pc("ngIf",!e.costVNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(5),R.pc("ngIf",!e.costNNOpen),R.Db(1),R.pc("ngIf",e.costNNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(4),R.pc("ngForOf",e.shipments[e.key].shipment),R.Db(6),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(1),R.pc("ngIf",e.vesselOpen),R.Db(2),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(1),R.pc("ngIf",e.shipmentOpen),R.Db(2),R.Mc(R.mc(83,47,e.total.revenueVN,"1.0-0")),R.Db(2),R.pc("ngIf",e.revenueVNOpen),R.Db(2),R.Mc(R.mc(87,50,e.total.revenueNN,"1.0-0")),R.Db(2),R.pc("ngIf",e.revenueNNOpen),R.Db(2),R.Mc(R.mc(91,53,e.total.costVN,"1.0-0")),R.Db(2),R.pc("ngIf",e.costVNOpen),R.Db(2),R.Mc(R.mc(95,56,e.total.costNN,"1.0-0")),R.Db(2),R.pc("ngIf",e.costVNOpen),R.Db(2),R.Mc(R.mc(99,59,e.total.revenueVN+e.total.revenueNN-e.total.costVN-e.total.costNN,"1.0-0")))},directives:[v.a,v.c,Z.b,Z.d,Z.c,s.b,p.a,g.d,H.t,H.s,i.j,H.q,it.a,d.a,w.c,H.x,H.y,w.a],pipes:[H.g,H.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.report-bill-table-modal-dialog{width:100%}}@media screen and (min-width:960px){.report-bill-table-modal-dialog{width:1080px}}.report-bill-table-modal-dialog .mat-dialog-container{padding:0}.report-bill-table-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table{font-size:12px!important;margin-bottom:4px;border-collapse:collapse}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table td,.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table td .mat-standard-chip,.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .paid{background:#fff;color:#000}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .cost-paid{background:#ffe1c2;color:#000}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}.report-bill-table-modal-dialog #report-bill-table-modal-modal .viewer-panel .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}.report-bill-table-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.report-bill-table-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),t})();function xn(t,e){if(1&t&&(R.Xb(0,"th",19),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Ic("top",n.inverseOfTranslation),R.Db(1),R.Mc(t)}}function Dn(t,e){if(1&t&&(R.Xb(0,"th",19),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Ic("top",n.inverseOfTranslation),R.Db(1),R.Mc(t)}}function wn(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",20),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),R.Lc(1,"add"),R.Wb()}}function Sn(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),R.Lc(1,"removed"),R.Wb()}}function kn(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Wn(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",20),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),R.Lc(1,"add"),R.Wb()}}function Cn(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),R.Lc(1,"removed"),R.Wb()}}function Xn(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function _n(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",20),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costVNOpen=!n.costVNOpen})),R.Lc(1,"add"),R.Wb()}}function On(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costVNOpen=!n.costVNOpen})),R.Lc(1,"removed"),R.Wb()}}function Nn(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Ln(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",20),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costNNOpen=!n.costNNOpen})),R.Lc(1,"add"),R.Wb()}}function In(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",21),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costNNOpen=!n.costNNOpen})),R.Lc(1,"removed"),R.Wb()}}function Tn(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Vn(t,e){if(1&t&&(R.Xb(0,"td",19),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc(3).$implicit,i=R.jc();R.Eb("rowspan",i.shipments[n.key].shipment.length),R.Db(1),R.Mc(i.shipments[n.key][t])}}function An(t,e){if(1&t){const t=R.Yb();R.Vb(0),R.Xb(1,"td"),R.Lc(2),R.Wb(),R.Xb(3,"td",41),R.Xb(4,"a",42),R.fc("click",(function(e){R.Bc(t);const n=R.jc(2).$implicit;return R.jc().openVessel.emit(n.key)})),R.Lc(5),R.Wb(),R.Wb(),R.Xb(6,"td",3),R.Lc(7),R.Wb(),R.Xb(8,"td",3),R.Lc(9),R.Wb(),R.Jc(10,Vn,2,2,"td",43),R.Xb(11,"td",5),R.Lc(12),R.kc(13,"date"),R.Wb(),R.Xb(14,"td",5),R.Lc(15),R.kc(16,"date"),R.Wb(),R.Ub()}if(2&t){const t=R.jc(2),e=t.$implicit,n=t.index,i=R.jc();R.Db(1),R.Eb("rowspan",i.shipments[e.key].shipment.length),R.Db(1),R.Mc(n+1),R.Db(1),R.Eb("rowspan",i.shipments[e.key].shipment.length),R.Db(2),R.Mc(i.shipments[e.key].vessel_full_name),R.Db(1),R.Eb("rowspan",i.shipments[e.key].shipment.length),R.Db(1),R.Mc(i.shipments[e.key].pol_name),R.Db(1),R.Eb("rowspan",i.shipments[e.key].shipment.length),R.Db(1),R.Mc(i.shipments[e.key].pod_name),R.Db(1),R.pc("ngForOf",i.arrType),R.Db(1),R.Eb("rowspan",i.shipments[e.key].shipment.length),R.Db(1),R.Mc(R.mc(13,13,i.shipments[e.key].depart_time,"MM/dd/yyyy HH:mm")),R.Db(2),R.Eb("rowspan",i.shipments[e.key].shipment.length),R.Db(1),R.Mc(R.mc(16,16,i.shipments[e.key].arrive_time,"MM/dd/yyyy HH:mm"))}}function Mn(t,e){if(1&t&&(R.Xb(0,"td",44),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc().$implicit;R.Db(1),R.Mc(n[t])}}function jn(t,e){1&t&&(R.Xb(0,"mat-chip"),R.Lc(1,"Booking"),R.Wb())}function Rn(t,e){1&t&&(R.Xb(0,"mat-chip",45),R.Lc(1,"Stuffing"),R.Wb())}function Fn(t,e){1&t&&(R.Xb(0,"mat-chip",46),R.Lc(1,"Ready to load"),R.Wb())}function Pn(t,e){1&t&&(R.Xb(0,"mat-chip",47),R.Lc(1,"Loaded"),R.Wb())}function Jn(t,e){1&t&&(R.Xb(0,"mat-chip",45),R.Lc(1,"Discharge"),R.Wb())}function Bn(t,e){1&t&&(R.Xb(0,"mat-chip",46),R.Lc(1,"Pick up"),R.Wb())}function zn(t,e){1&t&&(R.Xb(0,"mat-chip",47),R.Lc(1,"Complete"),R.Wb())}const En=function(t,e){return{paid:t,"accent-100-bg":e}};function $n(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",49),R.Xb(2,"div",50),R.Xb(3,"span",51),R.Lc(4),R.Wb(),R.Xb(5,"span",52),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,En,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Yn(t,e){if(1&t&&(R.Xb(0,"td",48),R.Jc(1,$n,8,11,"ng-container",22),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.revenueVN)}}function Hn(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",49),R.Xb(2,"div",50),R.Xb(3,"span",51),R.Lc(4),R.Wb(),R.Xb(5,"span",52),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,En,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function qn(t,e){if(1&t&&(R.Xb(0,"td",48),R.Jc(1,Hn,8,11,"ng-container",22),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.revenueNN)}}function Un(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",49),R.Xb(2,"div",50),R.Xb(3,"span",51),R.Lc(4),R.Wb(),R.Xb(5,"span",52),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,En,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Gn(t,e){if(1&t&&(R.Xb(0,"td",48),R.Jc(1,Un,8,11,"ng-container",22),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.costVN)}}function Qn(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",49),R.Xb(2,"div",50),R.Xb(3,"span",51),R.Lc(4),R.Wb(),R.Xb(5,"span",52),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,En,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.amount,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Kn(t,e){if(1&t&&(R.Xb(0,"td",48),R.Jc(1,Qn,8,11,"ng-container",22),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.costNN)}}function Zn(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",53),R.fc("click",(function(e){R.Bc(t);const n=R.jc().$implicit;return R.jc(2).createItem.emit([n,"Revenue"])})),R.Xb(1,"mat-icon",54),R.Lc(2,"add"),R.Wb(),R.Xb(3,"span"),R.Lc(4,"Revenue"),R.Wb(),R.Wb()}}function ti(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",53),R.fc("click",(function(e){R.Bc(t);const n=R.jc().$implicit;return R.jc(2).createItem.emit([n,"Cost"])})),R.Xb(1,"mat-icon",54),R.Lc(2,"add"),R.Wb(),R.Xb(3,"span"),R.Lc(4,"Cost"),R.Wb(),R.Wb()}}function ei(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",53),R.fc("click",(function(e){R.Bc(t);const n=R.jc().$implicit,i=R.jc(2).$implicit;return R.jc(2).addPrice.emit([i,"Revenue",n,i[n],"DTHC"])})),R.Xb(1,"mat-icon",54),R.Lc(2,"add"),R.Wb(),R.Xb(3,"span"),R.Lc(4),R.Wb(),R.Wb()}if(2&t){const t=R.jc().$implicit;R.Db(4),R.Nc("Revenue DTHC ",t,"")}}function ni(t,e){if(1&t&&(R.Vb(0),R.Jc(1,ei,5,1,"button",40),R.Ub()),2&t){const t=e.$implicit,n=R.jc(2).$implicit,i=R.jc(2);R.Db(1),R.pc("ngIf",i.permission.create&&n[t])}}function ii(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",53),R.fc("click",(function(e){R.Bc(t);const n=R.jc().$implicit,i=R.jc(2).$implicit;return R.jc(2).addPrice.emit([i,"Cost",n,i[n],"ADF"])})),R.Xb(1,"mat-icon",54),R.Lc(2,"add"),R.Wb(),R.Xb(3,"span"),R.Lc(4),R.Wb(),R.Wb()}if(2&t){const t=R.jc().$implicit;R.Db(4),R.Nc("Cost ADF ",t,"")}}function ri(t,e){if(1&t&&(R.Vb(0),R.Jc(1,ii,5,1,"button",40),R.Ub()),2&t){const t=e.$implicit,n=R.jc(2).$implicit,i=R.jc(2);R.Db(1),R.pc("ngIf",i.permission.create&&n[t])}}function oi(t,e){if(1&t&&(R.Vb(0),R.Jc(1,ni,2,1,"ng-container",22),R.Jc(2,ri,2,1,"ng-container",22),R.Ub()),2&t){const t=R.jc(3);R.Db(1),R.pc("ngForOf",t.arrType),R.Db(1),R.pc("ngForOf",t.arrType)}}const ci=function(t,e){return{"grey-A200-bg":t,"grey-A100-bg":e}},ai=function(t,e){return{"red-600-fg":t,"teal-200-bg":e}};function si(t,e){if(1&t){const t=R.Yb();R.Vb(0),R.Xb(1,"tr",23),R.Jc(2,An,17,19,"ng-container",24),R.Xb(3,"td",25),R.Xb(4,"a",26),R.Lc(5),R.Wb(),R.Wb(),R.Xb(6,"td"),R.Lc(7),R.Wb(),R.Jc(8,Mn,2,1,"td",27),R.Xb(9,"td",28),R.Lc(10),R.Wb(),R.Xb(11,"td",28),R.Lc(12),R.Wb(),R.Xb(13,"td"),R.Xb(14,"mat-chip-list",29),R.Jc(15,jn,2,0,"mat-chip",30),R.Jc(16,Rn,2,0,"mat-chip",31),R.Jc(17,Fn,2,0,"mat-chip",32),R.Jc(18,Pn,2,0,"mat-chip",33),R.Jc(19,Jn,2,0,"mat-chip",31),R.Jc(20,Bn,2,0,"mat-chip",32),R.Jc(21,zn,2,0,"mat-chip",33),R.Wb(),R.Wb(),R.Xb(22,"td",34),R.Lc(23),R.kc(24,"number"),R.Wb(),R.Jc(25,Yn,2,1,"td",35),R.Xb(26,"td",34),R.Lc(27),R.kc(28,"number"),R.Wb(),R.Jc(29,qn,2,1,"td",35),R.Xb(30,"td",34),R.Lc(31),R.kc(32,"number"),R.Wb(),R.Jc(33,Gn,2,1,"td",35),R.Xb(34,"td",34),R.Lc(35),R.kc(36,"number"),R.Wb(),R.Jc(37,Kn,2,1,"td",35),R.Xb(38,"td",36),R.Lc(39),R.kc(40,"number"),R.Wb(),R.Xb(41,"td",37),R.Xb(42,"mat-icon",38),R.fc("click",(function(e){return R.Bc(t),e.stopPropagation()})),R.Lc(43,"more_vert"),R.Wb(),R.Xb(44,"mat-menu",null,39),R.Jc(46,Zn,5,0,"button",40),R.Jc(47,ti,5,0,"button",40),R.Jc(48,oi,3,2,"ng-container",24),R.Wb(),R.Wb(),R.Wb(),R.Ub()}if(2&t){const t=e.$implicit,n=e.index,i=R.xc(45),r=R.jc().index,o=R.jc();R.Db(1),R.pc("ngClass",R.sc(51,ci,r%2==1,r%2==0)),R.Db(1),R.pc("ngIf",0==n),R.Db(2),R.pc("routerLink","/apps/workflow/shipment/detail/"+t.id+"/soa"),R.Db(1),R.Mc(t.code),R.Db(2),R.Mc(t.bill),R.Db(1),R.pc("ngForOf",o.arrType),R.Db(1),R.pc("matTooltip",t.customer_name),R.Db(1),R.Mc(t.customer_short_name),R.Db(1),R.pc("matTooltip",t.agent_name),R.Db(1),R.Mc(t.agent_short_name),R.Db(2),R.pc("ngSwitch",t.process),R.Db(1),R.pc("ngSwitchCase",0),R.Db(1),R.pc("ngSwitchCase",1),R.Db(1),R.pc("ngSwitchCase",2),R.Db(1),R.pc("ngSwitchCase",3),R.Db(1),R.pc("ngSwitchCase",4),R.Db(1),R.pc("ngSwitchCase",5),R.Db(1),R.pc("ngSwitchCase",6),R.Db(1),R.pc("ngClass",R.sc(54,ai,t.profit.revenueVN<0,t.profit.revenueVN>=0)),R.Db(1),R.Mc(R.mc(24,36,t.profit.revenueVN,"1.0-0")),R.Db(2),R.pc("ngIf",o.revenueVNOpen),R.Db(1),R.pc("ngClass",R.sc(57,ai,t.profit.revenueNN<0,t.profit.revenueNN>=0)),R.Db(1),R.Mc(R.mc(28,39,t.profit.revenueNN,"1.0-0")),R.Db(2),R.pc("ngIf",o.revenueNNOpen),R.Db(1),R.pc("ngClass",R.sc(60,ai,t.profit.costVN<0,t.profit.costVN>=0)),R.Db(1),R.Mc(R.mc(32,42,t.profit.costVN,"1.0-0")),R.Db(2),R.pc("ngIf",o.costVNOpen),R.Db(1),R.pc("ngClass",R.sc(63,ai,t.profit.costNN<0,t.profit.costNN>=0)),R.Db(1),R.Mc(R.mc(36,45,t.profit.costNN,"1.0-0")),R.Db(2),R.pc("ngIf",o.costNNOpen),R.Db(1),R.pc("ngClass",R.sc(66,ai,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN<0,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN>=0)),R.Db(1),R.Mc(R.mc(40,48,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN,"1.0-0")),R.Db(3),R.pc("matMenuTriggerFor",i),R.Db(4),R.pc("ngIf",o.permission.create),R.Db(1),R.pc("ngIf",o.permission.create),R.Db(1),R.pc("ngIf",o.formSearch&&113==o.formSearch.agent)}}function li(t,e){if(1&t&&(R.Vb(0),R.Jc(1,si,49,69,"ng-container",22),R.Ub()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngForOf",n.shipments[t.key].shipment)}}function bi(t,e){if(1&t&&(R.Xb(0,"td",55),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Ic("bottom",n.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(2,3,n.total[t],"1.0-0"))}}function pi(t,e){if(1&t&&(R.Xb(0,"td",55),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Ic("bottom",n.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(2,3,n.total[t],"1.0-0"))}}function di(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}function hi(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}function ui(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}function mi(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}let fi=(()=>{class t{constructor(t,e){this.commonService=t,this.changeDetector=e,this.createItem=new R.o,this.addPrice=new R.o,this.openVessel=new R.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new A.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(Y.a),R.Rb(R.h))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-vessel-table"]],viewQuery:function(t,e){var n;1&t&&R.Sc(Vt.e,!0),2&t&&R.wc(n=R.gc())&&(e.viewPort=n.first)},inputs:{shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total",formSearch:"formSearch"},outputs:{createItem:"createItem",addPrice:"addPrice",openVessel:"openVessel"},decls:97,vars:109,consts:[["autosize","",1,"h-100-p"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],[1,"text-bold"],[3,"bottom",4,"ngIf"],[1,"text-bold","sticky-right-col",2,"z-index","30"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf"],[1,"w-152","sticky-col2"],[1,"cursor-pointer",3,"routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],[1,"text-right","text-bold",3,"ngClass"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],[1,"w-152","sticky-col"],[3,"click"],["class","w-52 text-center",4,"ngFor","ngForOf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[2,"padding","0"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],[1,"text-right","text-bold"],["mat-menu-item","","aria-label","remove",3,"click"],["color","accent"],[1,"text-center","text-bold"]],template:function(t,e){1&t&&(R.Xb(0,"cdk-virtual-scroll-viewport",0),R.Xb(1,"table",1),R.Xb(2,"thead"),R.Xb(3,"tr"),R.Xb(4,"th"),R.Lc(5,"No"),R.Wb(),R.Xb(6,"th",2),R.Lc(7,"Voyage"),R.Wb(),R.Xb(8,"th",3),R.Lc(9,"POL"),R.Wb(),R.Xb(10,"th",3),R.Lc(11,"POD"),R.Wb(),R.Jc(12,xn,2,3,"th",4),R.Xb(13,"th",5),R.Lc(14,"ETD"),R.Wb(),R.Xb(15,"th",5),R.Lc(16,"ETA"),R.Wb(),R.Xb(17,"th",6),R.Lc(18,"Shipment"),R.Wb(),R.Xb(19,"th"),R.Lc(20,"Bill"),R.Wb(),R.Jc(21,Dn,2,3,"th",4),R.Xb(22,"th"),R.Lc(23,"Customer"),R.Wb(),R.Xb(24,"th"),R.Lc(25,"Agent"),R.Wb(),R.Xb(26,"th"),R.Lc(27,"Process"),R.Wb(),R.Xb(28,"th"),R.Xb(29,"div",7),R.Xb(30,"span"),R.Lc(31,"REVENUE VN"),R.Wb(),R.Jc(32,wn,2,0,"mat-icon",8),R.Jc(33,Sn,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(34,kn,2,2,"th",10),R.Xb(35,"th"),R.Xb(36,"div",7),R.Xb(37,"span"),R.Lc(38,"REVENUE NN"),R.Wb(),R.Jc(39,Wn,2,0,"mat-icon",8),R.Jc(40,Cn,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(41,Xn,2,2,"th",10),R.Xb(42,"th"),R.Xb(43,"div",7),R.Xb(44,"span"),R.Lc(45,"COST VN"),R.Wb(),R.Jc(46,_n,2,0,"mat-icon",8),R.Jc(47,On,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(48,Nn,2,2,"th",10),R.Xb(49,"th"),R.Xb(50,"div",7),R.Xb(51,"span"),R.Lc(52,"COST NN"),R.Wb(),R.Jc(53,Ln,2,0,"mat-icon",8),R.Jc(54,In,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(55,Tn,2,2,"th",10),R.Xb(56,"th",11),R.Lc(57,"PROFIT"),R.Wb(),R.Sb(58,"th",12),R.Wb(),R.Wb(),R.Xb(59,"tbody"),R.Jc(60,li,2,1,"ng-container",13),R.Wb(),R.Xb(61,"tfoot"),R.Xb(62,"tr"),R.Sb(63,"td"),R.Xb(64,"td",14),R.Lc(65,"Total"),R.Wb(),R.Sb(66,"td"),R.Sb(67,"td"),R.Jc(68,bi,3,6,"td",15),R.Sb(69,"td"),R.Sb(70,"td"),R.Sb(71,"td"),R.Sb(72,"td"),R.Jc(73,pi,3,6,"td",15),R.Sb(74,"td"),R.Sb(75,"td"),R.Sb(76,"td"),R.Xb(77,"td",16),R.Lc(78),R.kc(79,"number"),R.Wb(),R.Jc(80,di,1,2,"td",17),R.Xb(81,"td",16),R.Lc(82),R.kc(83,"number"),R.Wb(),R.Jc(84,hi,1,2,"td",17),R.Xb(85,"td",16),R.Lc(86),R.kc(87,"number"),R.Wb(),R.Jc(88,ui,1,2,"td",17),R.Xb(89,"td",16),R.Lc(90),R.kc(91,"number"),R.Wb(),R.Jc(92,mi,1,2,"td",17),R.Xb(93,"td",18),R.Lc(94),R.kc(95,"number"),R.Wb(),R.Sb(96,"td",12),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Db(4),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.pc("ngForOf",e.arrType),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.pc("ngForOf",e.arrType),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.revenueVNOpen),R.Db(1),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.revenueNNOpen),R.Db(1),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.costVNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.costNNOpen),R.Db(1),R.pc("ngIf",e.costNNOpen),R.Db(1),R.pc("ngIf",e.costNNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.pc("cdkVirtualForOf",e.voyage),R.Db(3),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(2),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.pc("ngForOf",e.arrType),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.pc("ngForOf",e.arrType),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(79,94,e.total.revenueVN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(83,97,e.total.revenueNN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(87,100,e.total.costVN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.costVNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(91,103,e.total.costNN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.costNNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(95,106,e.total.revenueVN.ALL+e.total.revenueNN.ALL-e.total.costVN.ALL-e.total.costNN.ALL,"1.0-0")),R.Db(2),R.Ic("bottom",e.inverseOfTranslation2))},directives:[Vt.e,At.a,H.s,Z.d,Z.c,H.t,Vt.d,p.a,H.q,it.a,i.j,d.a,w.c,H.x,H.y,o.c,o.d,w.a,o.a],pipes:[H.g,H.f],styles:["report-vessel-table .report-table{font-size:12px!important;border:1px solid #e0e0e0;margin-bottom:4px;border-collapse:collapse}report-vessel-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10}report-vessel-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}report-vessel-table .report-table td,report-vessel-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}report-vessel-table .report-table td .mat-standard-chip,report-vessel-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}report-vessel-table .report-table .paid{background:#fff;color:#000}report-vessel-table .report-table .cost-paid{background:#ffe1c2;color:#000}report-vessel-table .report-table .sticky-col{width:152px;position:-webkit-sticky;position:sticky;background:inherit;left:0;z-index:20}report-vessel-table .report-table .sticky-col2{width:152px;position:-webkit-sticky;position:sticky;background:inherit;left:152px;z-index:20}report-vessel-table .report-table .sticky-right-col{position:-webkit-sticky;position:sticky;background:inherit;right:40px;z-index:20}report-vessel-table .report-table .sticky-right-col1{position:-webkit-sticky;position:sticky;background:inherit;right:0;z-index:20}"],encapsulation:2,data:{animation:j.a}}),t})();function gi(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,(e.total.revenueBalance[t]?e.total.revenueBalance[t]:0)-(e.total.costBalance[t]?e.total.costBalance[t]:0),"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function vi(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,gi,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.revenueBalance[t]>=0||n.total.costBalance[t]>=0)}}function yi(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.revenueVN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function xi(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,yi,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.revenueVN[t])}}function Di(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.revenueNN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function wi(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,Di,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.revenueNN[t])}}function Si(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.costVN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function ki(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,Si,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.costVN[t])}}function Wi(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.costNN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function Ci(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,Wi,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.costNN[t])}}let Xi=(()=>{class t{constructor(t,e,n,i,r,o,c,a){if(this.router=t,this.route=e,this._activatedRoute=n,this.authService=i,this.changeDetector=r,this.reportService=o,this._location=c,this._matDialog=a,this.voyage=[],this.arrType=[],this.height=560,this.selectItem=0,this.price=[],this.expand=!1,this.priceTarrif={DTHC20:{amount:225,currency:"SGD"},DTHC40:{amount:335,currency:"SGD"},ADF20:{amount:5,currency:"USD"},ADF40:{amount:7.5,currency:"USD"}},this._unsubscribeAll=new A.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.reportService.onVesselChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.shipments=this.reportService.shipmentVessel,this.voyage=this.reportService.voyage,this.arrType=this.reportService.arrType,this.price=this.reportService.sptPrice,this.total=t[3],this.formSearch=this.reportService.currenSearch.formSearch}),this.reportService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.customer=this.reportService.dataCustomer,this.supplier=this.reportService.dataSupplier,this.users=this.reportService.users}),this.reportService.onDataItemChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.prices=this.reportService.price,this.currency=this.reportService.currency,this.country=this.reportService.country,this.agent=this.reportService.agent})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}getShipment(){this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.reportService.currenSearch.formSearch).then(t=>{this.authService.onRequestChanged.next(!1)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")})}createItem(t){let e=t[0],n=t[1];"Revenue"==n&&(this.partner=this.customer),"Cost"==n&&(this.partner=this.supplier),this.dialogRef=this._matDialog.open(Gt.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+n,shipmentId:e.id,price:this.prices,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:e}}),this.dialogRef.componentInstance.createItem.subscribe(t=>{switch(this.authService.onRequestChanged.next(!0),n){case"Revenue":this.reportService.createSelRevenue(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error create "+n)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),this.dialogRef.componentInstance.errorMessage=t.error&&t.error.sqlMessage?t.error.sqlMessage:"Error create "+n});break;case"Cost":this.reportService.createSelCost(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error create "+n)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),this.dialogRef.componentInstance.errorMessage=t.error&&t.error.sqlMessage?t.error.sqlMessage:"Error create "+n})}}),this.dialogRef.afterClosed().subscribe(t=>{t&&this.getShipment()})}addPrice([t,e,n,i,r]){if("Revenue"==e){this.partner=this.customer;let o=this.agent.find(t=>t.id==this.formSearch.agent),c=this.partner.find(t=>t.short_name==o.short_name),a=r+n.substring(0,2);if(t.dataRevenue.map(t=>t.price_code).includes(a))alert("Price exist");else{let n=this.prices.find(t=>t.code==a),r=this.currency.find(t=>t.code==this.priceTarrif[n.code].currency);this.createData(e,{shipment:t.id,price:n,volume:i,amount:this.priceTarrif[n.code].amount,tax:0,tax_amount:0,currency:r.id,ex_rate:r.exrate,payment_center:c.country,pay_party:c.id,update_by:this.authService.user,create_by:this.authService.user})}}else{this.partner=this.supplier;let o=this.agent.find(t=>t.id==this.formSearch.agent),c=this.partner.find(t=>t.short_name==o.short_name),a=r+n.substring(0,2);if(t.dataCost.map(t=>t.price_code).includes(a))alert("Price exist");else{let n=this.prices.find(t=>t.code==a);console.log(n);let r=this.currency.find(t=>t.code==this.priceTarrif[n.code].currency);this.createData(e,{shipment:t.id,price:n,volume:i,amount:this.priceTarrif[n.code].amount,tax:0,tax_amount:0,currency:r.id,ex_rate:r.exrate,payment_center:c.country,issue_party:c.id,update_by:this.authService.user,create_by:this.authService.user})}}}createData(t,e){switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":this.reportService.createSelRevenue(e).then(t=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Create "+t+" error")});break;case"Cost":this.reportService.createSelCost(e).then(t=>{this.authService.onRequestChanged.next(!1),this.getShipment()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Create "+t+" error")})}}openVessel(t){this.dialogRef=this._matDialog.open(yn,{panelClass:"report-bill-table-modal-dialog",data:{label:"Vessel",shipments:this.shipments,key:t,arrType:this.arrType,price:this.price}}),this.dialogRef.afterClosed().subscribe(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.g),R.Rb(i.a),R.Rb(i.a),R.Rb(q.a),R.Rb(R.h),R.Rb(U),R.Rb(H.n),R.Rb(g.b))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-vessel"]],viewQuery:function(t,e){var n;1&t&&R.Sc(Vt.e,!0),2&t&&R.wc(n=R.gc())&&(e.viewPort=n.first)},decls:40,vars:15,consts:[["fxLayout","column",2,"overflow","auto"],[1,"group","mt-8"],[1,"cursor-pointer",3,"click"],[1,"viewer-content"],[1,"item",3,"expanded"],["itemPanel",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","20"],[1,"group","ml-12","mb-12","mt-16"],[1,"pt-8","pb-8","w-100-p"],["fxLayout","row","fxLayoutAlign","center center",4,"ngFor","ngForOf"],[1,"group","mb-12","mt-16"],[1,"accent-600-fg"],[1,"table-div","mt-8"],[3,"shipments","voyage","arrType","price","permission","total","formSearch","createItem","addPrice","openVessel"],["fxLayout","row","fxLayoutAlign","center center"],["class","font-size-14 text-bold",4,"ngIf"],[1,"font-size-14","text-bold"]],template:function(t,e){if(1&t){const t=R.Yb();R.Xb(0,"div",0),R.Xb(1,"div",1),R.Xb(2,"h2",2),R.fc("click",(function(e){return R.Bc(t),R.xc(6).toggle()})),R.Lc(3,"Total"),R.Wb(),R.Xb(4,"div",3),R.Xb(5,"mat-expansion-panel",4,5),R.Xb(7,"div",6),R.Xb(8,"div",7),R.Xb(9,"div",8),R.Xb(10,"h2"),R.Lc(11,"Balance"),R.Wb(),R.Xb(12,"div",9),R.Jc(13,vi,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(14,"div",7),R.Xb(15,"div",11),R.Xb(16,"h2",12),R.Lc(17,"RevenueVN"),R.Wb(),R.Xb(18,"div",9),R.Jc(19,xi,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(20,"div",7),R.Xb(21,"div",11),R.Xb(22,"h2",12),R.Lc(23,"RevenueNN"),R.Wb(),R.Xb(24,"div",9),R.Jc(25,wi,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(26,"div",7),R.Xb(27,"div",11),R.Xb(28,"h2",12),R.Lc(29,"CostVN"),R.Wb(),R.Xb(30,"div",9),R.Jc(31,ki,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(32,"div",7),R.Xb(33,"div",11),R.Xb(34,"h2",12),R.Lc(35,"CostNN"),R.Wb(),R.Xb(36,"div",9),R.Jc(37,Ci,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(38,"div",13),R.Xb(39,"report-vessel-table",14),R.fc("createItem",(function(t){return e.createItem(t)}))("addPrice",(function(t){return e.addPrice(t)}))("openVessel",(function(t){return e.openVessel(t)})),R.Wb(),R.Wb(),R.Wb()}2&t&&(R.Ic("height",e.height,"px"),R.Db(5),R.pc("expanded",e.expand),R.Db(8),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(2),R.pc("shipments",e.shipments)("voyage",e.voyage)("arrType",e.arrType)("price",e.price)("permission",e.permission)("total",e.total)("formSearch",e.formSearch))},directives:[Z.d,l.c,Z.b,H.s,fi,Z.c,H.t],pipes:[H.g],styles:["report-vessel .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:0}report-vessel .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-vessel .group .viewer-content{width:100%;overflow:auto}report-vessel .group .viewer-content .mat-expansion-panel-body{padding:0!important}report-vessel .table-div{height:100%;border:1px solid #000!important}@media screen and (max-width:599px){report-vessel .table-div{height:360px!important}}"],encapsulation:2,data:{animation:j.a}}),t})();function _i(t,e){if(1&t&&(R.Xb(0,"th",21),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Ic("top",n.inverseOfTranslation),R.Db(1),R.Mc(t)}}function Oi(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),R.Lc(1,"add"),R.Wb()}}function Ni(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",23),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueVNOpen=!n.revenueVNOpen})),R.Lc(1,"removed"),R.Wb()}}function Li(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Ii(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),R.Lc(1,"add"),R.Wb()}}function Ti(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",23),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.revenueNNOpen=!n.revenueNNOpen})),R.Lc(1,"removed"),R.Wb()}}function Vi(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Ai(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costVNOpen=!n.costVNOpen})),R.Lc(1,"add"),R.Wb()}}function Mi(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",23),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costVNOpen=!n.costVNOpen})),R.Lc(1,"removed"),R.Wb()}}function ji(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Ri(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",22),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costNNOpen=!n.costNNOpen})),R.Lc(1,"add"),R.Wb()}}function Fi(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",23),R.fc("click",(function(e){R.Bc(t);const n=R.jc();return e.stopPropagation(),n.costNNOpen=!n.costNNOpen})),R.Lc(1,"removed"),R.Wb()}}function Pi(t,e){if(1&t&&(R.Xb(0,"th"),R.Lc(1,"Price"),R.Wb()),2&t){const t=R.jc();R.Ic("top",t.inverseOfTranslation)}}function Ji(t,e){if(1&t&&(R.Xb(0,"td",42),R.Lc(1),R.Wb()),2&t){const t=e.$implicit,n=R.jc().$implicit;R.Db(1),R.Mc(n[t])}}function Bi(t,e){1&t&&(R.Xb(0,"mat-chip"),R.Lc(1,"Booking"),R.Wb())}function zi(t,e){1&t&&(R.Xb(0,"mat-chip",43),R.Lc(1,"Stuffing"),R.Wb())}function Ei(t,e){1&t&&(R.Xb(0,"mat-chip",44),R.Lc(1,"Ready to load"),R.Wb())}function $i(t,e){1&t&&(R.Xb(0,"mat-chip",45),R.Lc(1,"Loaded"),R.Wb())}function Yi(t,e){1&t&&(R.Xb(0,"mat-chip",43),R.Lc(1,"Discharge"),R.Wb())}function Hi(t,e){1&t&&(R.Xb(0,"mat-chip",44),R.Lc(1,"Pick up"),R.Wb())}function qi(t,e){1&t&&(R.Xb(0,"mat-chip",45),R.Lc(1,"Complete"),R.Wb())}const Ui=function(t,e){return{paid:t,"accent-100-bg":e}};function Gi(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",48),R.Xb(2,"div",49),R.Xb(3,"span",50),R.Lc(4),R.Wb(),R.Xb(5,"span",19),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,Ui,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.total_amount+t.total_tax,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Qi(t,e){if(1&t&&(R.Xb(0,"td",46),R.Jc(1,Gi,8,11,"ng-container",47),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.revenueVN)}}function Ki(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",48),R.Xb(2,"div",49),R.Xb(3,"span",50),R.Lc(4),R.Wb(),R.Xb(5,"span",19),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,Ui,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.total_amount+t.total_tax,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function Zi(t,e){if(1&t&&(R.Xb(0,"td",46),R.Jc(1,Ki,8,11,"ng-container",47),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.revenueNN)}}function tr(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",48),R.Xb(2,"div",49),R.Xb(3,"span",50),R.Lc(4),R.Wb(),R.Xb(5,"span",19),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,Ui,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.total_amount+t.total_tax,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function er(t,e){if(1&t&&(R.Xb(0,"td",46),R.Jc(1,tr,8,11,"ng-container",47),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.costVN)}}function nr(t,e){if(1&t&&(R.Vb(0),R.Xb(1,"td",48),R.Xb(2,"div",49),R.Xb(3,"span",50),R.Lc(4),R.Wb(),R.Xb(5,"span",19),R.Lc(6),R.kc(7,"number"),R.Wb(),R.Wb(),R.Wb(),R.Ub()),2&t){const t=e.$implicit;R.Db(1),R.pc("ngClass",R.sc(8,Ui,!!t.pay_date,!t.pay_date)),R.Db(1),R.pc("matTooltip",t.country_code),R.Db(2),R.Oc("",t.price_code," ",t.currency_code,""),R.Db(2),R.Mc(R.mc(7,5,t.total_amount+t.total_tax,"VND"==t.currency_code?"1.0-0":"1.2-2"))}}function ir(t,e){if(1&t&&(R.Xb(0,"td",46),R.Jc(1,nr,8,11,"ng-container",47),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.pc("ngForOf",t.costNN)}}function rr(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",15),R.fc("click",(function(e){R.Bc(t);const n=R.jc().$implicit;return R.jc().createItem.emit([n,"Revenue"])})),R.Xb(1,"mat-icon",51),R.Lc(2,"add"),R.Wb(),R.Xb(3,"span"),R.Lc(4,"Revenue"),R.Wb(),R.Wb()}}function or(t,e){if(1&t){const t=R.Yb();R.Xb(0,"button",15),R.fc("click",(function(e){R.Bc(t);const n=R.jc().$implicit;return R.jc().createItem.emit([n,"Cost"])})),R.Xb(1,"mat-icon",51),R.Lc(2,"add"),R.Wb(),R.Xb(3,"span"),R.Lc(4,"Cost"),R.Wb(),R.Wb()}}const cr=function(t,e){return{"border-bottom-vessel":t,"border-top-vessel":e}},ar=function(t,e){return{"red-600-fg":t,"teal-200-bg":e}};function sr(t,e){if(1&t){const t=R.Yb();R.Xb(0,"tr",24),R.Xb(1,"td"),R.Lc(2),R.Wb(),R.Xb(3,"td",25),R.Xb(4,"a",26),R.fc("click",(function(n){R.Bc(t);const i=e.$implicit;return R.jc().getVoyageSearch.emit(i.voyage)})),R.Lc(5),R.Wb(),R.Wb(),R.Xb(6,"td",3),R.Lc(7),R.Wb(),R.Xb(8,"td",3),R.Lc(9),R.Wb(),R.Xb(10,"td",4),R.Lc(11),R.kc(12,"date"),R.Wb(),R.Xb(13,"td",4),R.Lc(14),R.kc(15,"date"),R.Wb(),R.Xb(16,"td",27),R.Xb(17,"a",28),R.Lc(18),R.Wb(),R.Wb(),R.Xb(19,"td"),R.Lc(20),R.Wb(),R.Jc(21,Ji,2,1,"td",29),R.Xb(22,"td",30),R.Xb(23,"a",26),R.fc("click",(function(n){R.Bc(t);const i=e.$implicit;return R.jc().getCustomerSearch.emit(i.customer)})),R.Lc(24),R.Wb(),R.Wb(),R.Xb(25,"td",30),R.Lc(26),R.Wb(),R.Xb(27,"td"),R.Xb(28,"mat-chip-list",31),R.Jc(29,Bi,2,0,"mat-chip",32),R.Jc(30,zi,2,0,"mat-chip",33),R.Jc(31,Ei,2,0,"mat-chip",34),R.Jc(32,$i,2,0,"mat-chip",35),R.Jc(33,Yi,2,0,"mat-chip",33),R.Jc(34,Hi,2,0,"mat-chip",34),R.Jc(35,qi,2,0,"mat-chip",35),R.Wb(),R.Wb(),R.Xb(36,"td",36),R.Lc(37),R.kc(38,"number"),R.Wb(),R.Jc(39,Qi,2,1,"td",37),R.Xb(40,"td",36),R.Lc(41),R.kc(42,"number"),R.Wb(),R.Jc(43,Zi,2,1,"td",37),R.Xb(44,"td",36),R.Lc(45),R.kc(46,"number"),R.Wb(),R.Jc(47,er,2,1,"td",37),R.Xb(48,"td",36),R.Lc(49),R.kc(50,"number"),R.Wb(),R.Jc(51,ir,2,1,"td",37),R.Xb(52,"td",38),R.Lc(53),R.kc(54,"number"),R.Wb(),R.Xb(55,"td",39),R.Xb(56,"mat-icon",13),R.fc("click",(function(e){return R.Bc(t),e.stopPropagation()})),R.Lc(57,"more_vert"),R.Wb(),R.Xb(58,"mat-menu",null,40),R.Jc(60,rr,5,0,"button",41),R.Jc(61,or,5,0,"button",41),R.Wb(),R.Wb(),R.Wb()}if(2&t){const t=e.$implicit,n=e.index,i=R.xc(59),r=R.jc();R.pc("ngClass",R.sc(61,cr,n<r.data.length-2&&t.voyage!=r.data[n+1].voyage,n>0&&t.voyage!=r.data[n-1].voyage)),R.Db(2),R.Mc(n+1),R.Db(3),R.Mc(t.vessel_full_name),R.Db(2),R.Mc(t.pol_name),R.Db(2),R.Mc(t.pod_name),R.Db(2),R.Mc(R.mc(12,40,t.depart_time,"MM/dd/yyyy HH:mm")),R.Db(3),R.Mc(R.mc(15,43,t.arrive_time,"MM/dd/yyyy HH:mm")),R.Db(3),R.pc("routerLink","/apps/workflow/shipment/detail/"+t.id+"/soa"),R.Db(1),R.Mc(t.code),R.Db(2),R.Mc(t.bill),R.Db(1),R.pc("ngForOf",r.arrType),R.Db(1),R.pc("matTooltip",t.customer_name),R.Db(2),R.Mc(t.customer_short_name),R.Db(1),R.pc("matTooltip",t.agent_name),R.Db(1),R.Mc(t.agent_short_name),R.Db(2),R.pc("ngSwitch",t.process),R.Db(1),R.pc("ngSwitchCase",0),R.Db(1),R.pc("ngSwitchCase",1),R.Db(1),R.pc("ngSwitchCase",2),R.Db(1),R.pc("ngSwitchCase",3),R.Db(1),R.pc("ngSwitchCase",4),R.Db(1),R.pc("ngSwitchCase",5),R.Db(1),R.pc("ngSwitchCase",6),R.Db(1),R.pc("ngClass",R.sc(64,ar,t.profit.revenueVN<0,t.profit.revenueVN>=0)),R.Db(1),R.Mc(R.mc(38,46,t.profit.revenueVN,"1.0-0")),R.Db(2),R.pc("ngIf",r.revenueVNOpen),R.Db(1),R.pc("ngClass",R.sc(67,ar,t.profit.revenueNN<0,t.profit.revenueNN>=0)),R.Db(1),R.Mc(R.mc(42,49,t.profit.revenueNN,"1.0-0")),R.Db(2),R.pc("ngIf",r.revenueNNOpen),R.Db(1),R.pc("ngClass",R.sc(70,ar,t.profit.costVN<0,t.profit.costVN>=0)),R.Db(1),R.Mc(R.mc(46,52,t.profit.costVN,"1.0-0")),R.Db(2),R.pc("ngIf",r.costVNOpen),R.Db(1),R.pc("ngClass",R.sc(73,ar,t.profit.costNN<0,t.profit.costNN>=0)),R.Db(1),R.Mc(R.mc(50,55,t.profit.costNN,"1.0-0")),R.Db(2),R.pc("ngIf",r.costNNOpen),R.Db(1),R.pc("ngClass",R.sc(76,ar,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN<0,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN>=0)),R.Db(1),R.Mc(R.mc(54,58,t.profit.revenueVN+t.profit.revenueNN-t.profit.costVN-t.profit.costNN,"1.0-0")),R.Db(3),R.pc("matMenuTriggerFor",i),R.Db(4),R.pc("ngIf",r.permission.create),R.Db(1),R.pc("ngIf",r.permission.create)}}function lr(t,e){if(1&t&&(R.Xb(0,"td",52),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Ic("bottom",n.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(2,3,n.total[t],"1.0-0"))}}function br(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}function pr(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}function dr(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}function hr(t,e){if(1&t&&R.Sb(0,"td"),2&t){const t=R.jc();R.Ic("bottom",t.inverseOfTranslation2)}}let ur=(()=>{class t{constructor(t,e){this.commonService=t,this.changeDetector=e,this.createItem=new R.o,this.openVessel=new R.o,this.getVoyageSearch=new R.o,this.getCustomerSearch=new R.o,this.exportExcel=new R.o,this.exportInvoiceRateExcel=new R.o,this.exportSoaExcel=new R.o,this.revenueVNOpen=!1,this.revenueNNOpen=!0,this.costVNOpen=!1,this.costNNOpen=!0,this._unsubscribeAll=new A.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(Y.a),R.Rb(R.h))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-bill-table"]],viewQuery:function(t,e){var n;1&t&&R.Sc(Vt.e,!0),2&t&&R.wc(n=R.gc())&&(e.viewPort=n.first)},inputs:{data:"data",shipments:"shipments",voyage:"voyage",arrType:"arrType",price:"price",permission:"permission",total:"total"},outputs:{createItem:"createItem",openVessel:"openVessel",getVoyageSearch:"getVoyageSearch",getCustomerSearch:"getCustomerSearch",exportExcel:"exportExcel",exportInvoiceRateExcel:"exportInvoiceRateExcel",exportSoaExcel:"exportSoaExcel"},decls:108,vars:109,consts:[[1,"h-100-p",3,"itemSize"],[1,"report-table"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[1,"w-120"],[1,"sticky-col2",2,"z-index","30"],["class","w-52 text-center",3,"top",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"top",4,"ngIf"],[1,"sticky-right-col",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu2","matMenu"],["mat-menu-item","","aria-label","remove",3,"click"],[3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"w-152","sticky-col","text-bold",2,"z-index","30"],["class","text-center text-bold",3,"bottom",4,"ngFor","ngForOf"],[1,"text-right","text-bold"],[3,"bottom",4,"ngIf"],[1,"w-52","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass"],[1,"w-152","sticky-col"],[1,"cursor-pointer",3,"click"],[1,"w-152","sticky-col2"],[1,"cursor-pointer",3,"routerLink"],["class","text-center",4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],[1,"text-right","text-bold",3,"ngClass"],["style","padding: 0",4,"ngIf"],[1,"sticky-right-col","text-right","text-bold",3,"ngClass"],[1,"w-40","sticky-right-col1"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],[2,"padding","0"],[4,"ngFor","ngForOf"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],["color","accent"],[1,"text-center","text-bold"]],template:function(t,e){if(1&t&&(R.Xb(0,"cdk-virtual-scroll-viewport",0),R.Xb(1,"table",1),R.Xb(2,"thead"),R.Xb(3,"tr"),R.Xb(4,"th"),R.Lc(5,"No"),R.Wb(),R.Xb(6,"th",2),R.Lc(7,"Voyage"),R.Wb(),R.Xb(8,"th",3),R.Lc(9,"POL"),R.Wb(),R.Xb(10,"th",3),R.Lc(11,"POD"),R.Wb(),R.Xb(12,"th",4),R.Lc(13,"ETD"),R.Wb(),R.Xb(14,"th",4),R.Lc(15,"ETA"),R.Wb(),R.Xb(16,"th",5),R.Lc(17,"Shipment"),R.Wb(),R.Xb(18,"th"),R.Lc(19,"Bill"),R.Wb(),R.Jc(20,_i,2,3,"th",6),R.Xb(21,"th"),R.Lc(22,"Customer"),R.Wb(),R.Xb(23,"th"),R.Lc(24,"Agent"),R.Wb(),R.Xb(25,"th"),R.Lc(26,"Process"),R.Wb(),R.Xb(27,"th"),R.Xb(28,"div",7),R.Xb(29,"span"),R.Lc(30,"REVENUE VN"),R.Wb(),R.Jc(31,Oi,2,0,"mat-icon",8),R.Jc(32,Ni,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(33,Li,2,2,"th",10),R.Xb(34,"th"),R.Xb(35,"div",7),R.Xb(36,"span"),R.Lc(37,"REVENUE NN"),R.Wb(),R.Jc(38,Ii,2,0,"mat-icon",8),R.Jc(39,Ti,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(40,Vi,2,2,"th",10),R.Xb(41,"th"),R.Xb(42,"div",7),R.Xb(43,"span"),R.Lc(44,"COST VN"),R.Wb(),R.Jc(45,Ai,2,0,"mat-icon",8),R.Jc(46,Mi,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(47,ji,2,2,"th",10),R.Xb(48,"th"),R.Xb(49,"div",7),R.Xb(50,"span"),R.Lc(51,"COST NN"),R.Wb(),R.Jc(52,Ri,2,0,"mat-icon",8),R.Jc(53,Fi,2,0,"mat-icon",9),R.Wb(),R.Wb(),R.Jc(54,Pi,2,2,"th",10),R.Xb(55,"th",11),R.Lc(56,"PROFIT"),R.Wb(),R.Xb(57,"th",12),R.Xb(58,"mat-icon",13),R.fc("click",(function(t){return t.stopPropagation()})),R.Lc(59,"print"),R.Wb(),R.Xb(60,"mat-menu",null,14),R.Xb(62,"button",15),R.fc("click",(function(t){return e.exportExcel.emit()})),R.Xb(63,"span"),R.Lc(64,"COM"),R.Wb(),R.Wb(),R.Xb(65,"button",15),R.fc("click",(function(t){return e.exportInvoiceRateExcel.emit()})),R.Xb(66,"span"),R.Lc(67,"Invoice Rate"),R.Wb(),R.Wb(),R.Xb(68,"button",15),R.fc("click",(function(t){return e.exportSoaExcel.emit()})),R.Xb(69,"span"),R.Lc(70,"Soa"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(71,"tbody"),R.Jc(72,sr,62,79,"tr",16),R.Wb(),R.Xb(73,"tfoot"),R.Xb(74,"tr"),R.Sb(75,"td"),R.Xb(76,"td",17),R.Lc(77,"Total"),R.Wb(),R.Sb(78,"td"),R.Sb(79,"td"),R.Sb(80,"td"),R.Sb(81,"td"),R.Sb(82,"td"),R.Sb(83,"td"),R.Jc(84,lr,3,6,"td",18),R.Sb(85,"td"),R.Sb(86,"td"),R.Sb(87,"td"),R.Xb(88,"td",19),R.Lc(89),R.kc(90,"number"),R.Wb(),R.Jc(91,br,1,2,"td",20),R.Xb(92,"td",19),R.Lc(93),R.kc(94,"number"),R.Wb(),R.Jc(95,pr,1,2,"td",20),R.Xb(96,"td",19),R.Lc(97),R.kc(98,"number"),R.Wb(),R.Jc(99,dr,1,2,"td",20),R.Xb(100,"td",19),R.Lc(101),R.kc(102,"number"),R.Wb(),R.Jc(103,hr,1,2,"td",20),R.Xb(104,"td",19),R.Lc(105),R.kc(106,"number"),R.Wb(),R.Sb(107,"td"),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t){const t=R.xc(61);R.pc("itemSize",53),R.Db(4),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.pc("ngForOf",e.arrType),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.revenueVNOpen),R.Db(1),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.revenueNNOpen),R.Db(1),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.costVNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(1),R.pc("ngIf",e.costVNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(4),R.pc("ngIf",!e.costNNOpen),R.Db(1),R.pc("ngIf",e.costNNOpen),R.Db(1),R.pc("ngIf",e.costNNOpen),R.Db(1),R.Ic("top",e.inverseOfTranslation),R.Db(2),R.Ic("top",e.inverseOfTranslation),R.Db(1),R.pc("matMenuTriggerFor",t),R.Db(14),R.pc("cdkVirtualForOf",e.data),R.Db(3),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(2),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.pc("ngForOf",e.arrType),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(90,94,e.total.revenueVN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.revenueVNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(94,97,e.total.revenueNN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.revenueNNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(98,100,e.total.costVN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.costVNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(102,103,e.total.costNN.ALL,"1.0-0")),R.Db(2),R.pc("ngIf",e.costNNOpen),R.Db(1),R.Ic("bottom",e.inverseOfTranslation2),R.Db(1),R.Mc(R.mc(106,106,e.total.revenueVN.ALL+e.total.revenueNN.ALL-e.total.costVN.ALL-e.total.costNN.ALL,"1.0-0")),R.Db(2),R.Ic("bottom",e.inverseOfTranslation2)}},directives:[Vt.e,Vt.a,H.s,Z.d,Z.c,H.t,p.a,o.c,o.d,o.a,Vt.d,H.q,it.a,i.j,d.a,w.c,H.x,H.y,w.a],pipes:[H.g,H.f],styles:["report-bill-table .report-table{font-size:12px!important;margin-bottom:4px;border-collapse:collapse}report-bill-table .report-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff!important;z-index:10;border-bottom:1px solid #000!important}report-bill-table .report-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff!important;z-index:25}report-bill-table .report-table td,report-bill-table .report-table th{padding:8px;white-space:nowrap;border:1px solid #e0e0e0}report-bill-table .report-table td .mat-standard-chip,report-bill-table .report-table th .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}report-bill-table .report-table .paid{background:#fff;color:#000}report-bill-table .report-table .cost-paid{background:#ffe1c2;color:#000}report-bill-table .report-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:0;z-index:20}report-bill-table .report-table .sticky-col2{width:152px;position:sticky;position:-webkit-sticky;background:#fff;left:152px;z-index:20}report-bill-table .report-table .sticky-right-col{position:sticky;position:-webkit-sticky;background:#fff;right:40px;z-index:20}report-bill-table .report-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background:#fff;right:0;z-index:20}report-bill-table .report-table .border-bottom-vessel td{border-bottom:1px solid #000!important}report-bill-table .report-table .border-top-vessel td{border-top:1px solid #000!important}"],encapsulation:2,data:{animation:j.a}}),t})();function mr(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,(e.total.revenueBalance[t]?e.total.revenueBalance[t]:0)-(e.total.costBalance[t]?e.total.costBalance[t]:0),"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function fr(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,mr,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.revenueBalance[t]>=0||n.total.costBalance[t]>=0)}}function gr(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.revenueVN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function vr(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,gr,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.revenueVN[t])}}function yr(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.revenueNN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function xr(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,yr,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.revenueNN[t])}}function Dr(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.costVN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function wr(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,Dr,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.costVN[t])}}function Sr(t,e){if(1&t&&(R.Xb(0,"div",17),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit,e=R.jc();R.Db(1),R.Oc(" ",R.mc(2,2,e.total.costNN[t],"VND"==t?"1.0-0":"1.2-2")," ",t," ")}}function kr(t,e){if(1&t&&(R.Xb(0,"div",15),R.Jc(1,Sr,3,5,"div",16),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(1),R.pc("ngIf",n.total.costNN[t])}}let Wr=(()=>{class t{constructor(t,e,n,i,r,o,c,a){if(this.router=t,this.route=e,this._activatedRoute=n,this.authService=i,this.changeDetector=r,this.reportService=o,this._location=c,this._matDialog=a,this.voyage=[],this.arrType=[],this.height=560,this.selectItem=0,this.price=[],this.expand=!1,this._unsubscribeAll=new A.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.reportService.onVesselChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.dataBill=this.reportService.dataBill,this.shipments=this.reportService.shipmentVessel,this.voyage=this.reportService.voyage,this.arrType=this.reportService.arrType,this.price=this.reportService.sptPrice,this.total=t[3],this.formSearch=this.reportService.currenSearch.formSearch}),this.reportService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.customer=this.reportService.dataCustomer,this.supplier=this.reportService.dataSupplier,this.users=this.reportService.users}),this.reportService.onDataItemChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.prices=this.reportService.price,this.currency=this.reportService.currency,this.country=this.reportService.country})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}getShipment(){this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.reportService.currenSearch.formSearch).then(t=>{this.authService.onRequestChanged.next(!1)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")})}createItem(t){let e=t[0],n=t[1];"Revenue"==n&&(this.partner=this.customer),"Cost"==n&&(this.partner=this.supplier),this.dialogRef=this._matDialog.open(Gt.a,{panelClass:"shipment-detail-modal-dialog",data:{label:"Add "+n,shipmentId:e.id,price:this.prices,currency:this.currency,partner:this.partner,country:this.country,users:this.users,shipment:e}}),this.dialogRef.componentInstance.createItem.subscribe(t=>{switch(this.authService.onRequestChanged.next(!0),n){case"Revenue":this.reportService.createSelRevenue(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error create "+n)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),this.dialogRef.componentInstance.errorMessage=t.error&&t.error.sqlMessage?t.error.sqlMessage:"Error create "+n});break;case"Cost":this.reportService.createSelCost(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(t):(console.error(t),this.dialogRef.componentInstance.errorMessage="Error create "+n)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),this.dialogRef.componentInstance.errorMessage=t.error&&t.error.sqlMessage?t.error.sqlMessage:"Error create "+n})}}),this.dialogRef.afterClosed().subscribe(t=>{t&&this.getShipment()})}openVessel(t){this.dialogRef=this._matDialog.open(yn,{panelClass:"report-bill-table-modal-dialog",data:{label:"Vessel",shipments:this.shipments,key:t,arrType:this.arrType,price:this.price}}),this.dialogRef.afterClosed().subscribe(t=>{})}exportExcel(t){if(this.dataBill&&this.dataBill.length>0){let t=[];this.dataBill.map(e=>{e.costVN.map(n=>{t.push([null,null,e.bill,e.vessel_full_name,e.depart_time,e["20DC"],e["40HC"],null,null,n.amount*n.volume,n.pay_date])})});let e={};this.formSearch&&this.formSearch.date_from&&(t[0][1]=new Date(t[0][4]).setDate(1)),this.formSearch&&this.formSearch.issue_party&&(e=this.supplier.find(t=>t.id==this.formSearch.issue_party)),this.reportService.getCostExcel(t,e)}}exportInvoiceRateExcel(t){if(this.dataBill&&this.dataBill.length>0){let t=[];this.dataBill.map(e=>{let n={of:0,rr:0,ecrs:0,com:0};e.revenueVN.map(t=>{t.price_code.includes("OF")&&(n.of+=t.amount*t.volume),t.price_code.includes("RR")&&(n.rr+=t.amount*t.volume),t.price_code.includes("ECRS")&&(n.ecrs+=t.amount*t.volume)}),e.costVN.map(t=>{t.price_code.includes("COM")&&(n.com+=t.amount*t.volume)}),t.push([null,null,e.bill,e.vessel_full_name,e.depart_time,e["20DC"],e["40HC"],n.of?n.of:null,n.rr?n.rr:null,n.ecrs?n.ecrs:null,n.of+n.rr+n.ecrs,n.com,null])});let e={};this.formSearch&&this.formSearch.date_from&&(t[0][1]=new Date(t[0][4]).setDate(1)),this.formSearch&&this.formSearch.customer&&(e=this.customer.find(t=>t.id==this.formSearch.customer)),this.reportService.getInvoiceRateExcel(t,e)}}exportSoaExcel(t){this.dataBill&&this.dataBill.length>0&&this.reportService.buildExcelData(this.dataBill)}getVoyageSearch(t){this.reportService.onVoyageChanged.next(t)}getCustomerSearch(t){this.reportService.onCustomerChanged.next(t)}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.g),R.Rb(i.a),R.Rb(i.a),R.Rb(q.a),R.Rb(R.h),R.Rb(U),R.Rb(H.n),R.Rb(g.b))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-bill"]],viewQuery:function(t,e){var n;1&t&&R.Sc(Vt.e,!0),2&t&&R.wc(n=R.gc())&&(e.viewPort=n.first)},decls:40,vars:15,consts:[["fxLayout","column",2,"overflow","auto"],[1,"group","mt-8"],[1,"cursor-pointer",3,"click"],[1,"viewer-content"],[1,"item",3,"expanded"],["itemPanel",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","20"],[1,"group","ml-12","mb-12","mt-16"],[1,"pt-8","pb-8","w-100-p"],["fxLayout","row","fxLayoutAlign","center center",4,"ngFor","ngForOf"],[1,"group","mb-12","mt-16"],[1,"accent-600-fg"],[1,"table-div","mt-8"],[3,"data","arrType","shipments","voyage","price","permission","total","createItem","openVessel","exportExcel","exportInvoiceRateExcel","exportSoaExcel","getVoyageSearch","getCustomerSearch"],["fxLayout","row","fxLayoutAlign","center center"],["class","font-size-14 text-bold",4,"ngIf"],[1,"font-size-14","text-bold"]],template:function(t,e){if(1&t){const t=R.Yb();R.Xb(0,"div",0),R.Xb(1,"div",1),R.Xb(2,"h2",2),R.fc("click",(function(e){return R.Bc(t),R.xc(6).toggle()})),R.Lc(3,"Total"),R.Wb(),R.Xb(4,"div",3),R.Xb(5,"mat-expansion-panel",4,5),R.Xb(7,"div",6),R.Xb(8,"div",7),R.Xb(9,"div",8),R.Xb(10,"h2"),R.Lc(11,"Balance"),R.Wb(),R.Xb(12,"div",9),R.Jc(13,fr,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(14,"div",7),R.Xb(15,"div",11),R.Xb(16,"h2",12),R.Lc(17,"RevenueVN"),R.Wb(),R.Xb(18,"div",9),R.Jc(19,vr,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(20,"div",7),R.Xb(21,"div",11),R.Xb(22,"h2",12),R.Lc(23,"RevenueNN"),R.Wb(),R.Xb(24,"div",9),R.Jc(25,xr,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(26,"div",7),R.Xb(27,"div",11),R.Xb(28,"h2",12),R.Lc(29,"CostVN"),R.Wb(),R.Xb(30,"div",9),R.Jc(31,wr,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Xb(32,"div",7),R.Xb(33,"div",11),R.Xb(34,"h2",12),R.Lc(35,"CostNN"),R.Wb(),R.Xb(36,"div",9),R.Jc(37,kr,2,1,"div",10),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(38,"div",13),R.Xb(39,"report-bill-table",14),R.fc("createItem",(function(t){return e.createItem(t)}))("openVessel",(function(t){return e.openVessel(t)}))("exportExcel",(function(t){return e.exportExcel(t)}))("exportInvoiceRateExcel",(function(t){return e.exportInvoiceRateExcel(t)}))("exportSoaExcel",(function(t){return e.exportSoaExcel(t)}))("getVoyageSearch",(function(t){return e.getVoyageSearch(t)}))("getCustomerSearch",(function(t){return e.getCustomerSearch(t)})),R.Wb(),R.Wb(),R.Wb()}2&t&&(R.Ic("height",e.height,"px"),R.Db(5),R.pc("expanded",e.expand),R.Db(8),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(6),R.pc("ngForOf",e.total.currency),R.Db(2),R.pc("data",e.dataBill)("arrType",e.arrType)("shipments",e.shipments)("voyage",e.voyage)("price",e.price)("permission",e.permission)("total",e.total))},directives:[Z.d,l.c,Z.b,H.s,ur,Z.c,H.t],pipes:[H.g],styles:["report-bill .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:0}report-bill .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-bill .group .viewer-content{width:100%;overflow:auto}report-bill .group .viewer-content .mat-expansion-panel-body{padding:0!important}report-bill .table-div{height:100%;border:1px solid #000!important}@media screen and (max-width:599px){report-bill .table-div{height:360px!important}}"],encapsulation:2,data:{animation:j.a}}),t})();const Cr=["formDirective"];function Xr(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",73),R.fc("click",(function(e){R.Bc(t);const n=R.jc(),i=n.$implicit,r=n.index,o=R.jc();return o.copyItem([i,o.shipment[r-1],"debit",i.type_name])})),R.Lc(1,"file_copy"),R.Wb()}2&t&&R.pc("matTooltipPosition","right")}function _r(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",74),R.fc("click",(function(e){R.Bc(t);const n=R.jc(),i=n.$implicit,r=n.index,o=R.jc();return o.copyItem([i,o.shipment[r-1],"issue_date",i.type_name])})),R.Lc(1,"file_copy"),R.Wb()}2&t&&R.pc("matTooltipPosition","right")}function Or(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",75),R.fc("click",(function(e){R.Bc(t);const n=R.jc(),i=n.$implicit,r=n.index,o=R.jc();return o.copyItem([i,o.shipment[r-1],"pay_date",i.type_name])})),R.Lc(1,"file_copy"),R.Wb()}2&t&&R.pc("matTooltipPosition","right")}function Nr(t,e){if(1&t&&(R.Xb(0,"span"),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.Mc(R.mc(2,1,t.volume*(t.amount+t.tax_amount)*t.ex_rate,"1.0-0"))}}function Lr(t,e){if(1&t&&(R.Xb(0,"span"),R.Lc(1),R.kc(2,"number"),R.Wb()),2&t){const t=R.jc().$implicit;R.Db(1),R.Mc(R.mc(2,1,t.volume*(t.amount+t.tax_amount)*t.ex_rate,"1.0-0"))}}function Ir(t,e){if(1&t){const t=R.Yb();R.Xb(0,"mat-icon",76),R.fc("click",(function(e){R.Bc(t);const n=R.jc(),i=n.$implicit,r=n.index,o=R.jc();return o.copyItem([i,o.shipment[r-1],"info",i.type_name])})),R.Lc(1,"file_copy"),R.Wb()}2&t&&R.pc("matTooltipPosition","right")}const Tr=function(t){return{"red-A700-fg":t}},Vr=function(t,e){return{"red-A700-fg":t,"rev-color":e}},Ar=function(t,e){return{"red-A700-fg":t,"cost-color":e}},Mr=function(t,e){return{"rev-color":t,"cost-color":e}};function jr(t,e){if(1&t){const t=R.Yb();R.Vb(0),R.Xb(1,"tr"),R.Xb(2,"td",53),R.Xb(3,"mat-checkbox",54),R.fc("click",(function(e){return R.Bc(t),e.stopPropagation()}))("change",(function(n){R.Bc(t);const i=e.$implicit,r=R.jc();return n?r.getSelectItem(i):null})),R.Wb(),R.Wb(),R.Xb(4,"td",55),R.Xb(5,"a",56),R.Lc(6),R.Wb(),R.Wb(),R.Xb(7,"td",57),R.Lc(8),R.Wb(),R.Xb(9,"td",58),R.Lc(10),R.Wb(),R.Xb(11,"td",59),R.Lc(12),R.Wb(),R.Xb(13,"td",60),R.Lc(14),R.Wb(),R.Xb(15,"td",61),R.Lc(16),R.Jc(17,Xr,2,1,"mat-icon",62),R.Wb(),R.Xb(18,"td",61),R.Xb(19,"span"),R.Lc(20),R.kc(21,"date"),R.Wb(),R.Jc(22,_r,2,1,"mat-icon",63),R.Wb(),R.Xb(23,"td",61),R.Xb(24,"span"),R.Lc(25),R.kc(26,"date"),R.Wb(),R.Jc(27,Or,2,1,"mat-icon",64),R.Wb(),R.Xb(28,"td",61),R.Lc(29),R.Wb(),R.Xb(30,"td",61),R.Lc(31),R.Wb(),R.Xb(32,"td",60),R.Lc(33),R.Wb(),R.Xb(34,"td",65),R.Lc(35),R.kc(36,"number"),R.Wb(),R.Xb(37,"td",66),R.Lc(38),R.Wb(),R.Xb(39,"td",67),R.Lc(40),R.kc(41,"number"),R.Wb(),R.Xb(42,"td",60),R.Lc(43),R.Wb(),R.Xb(44,"td",60),R.Lc(45),R.kc(46,"number"),R.Wb(),R.Xb(47,"td",65),R.Jc(48,Nr,3,4,"span",68),R.Wb(),R.Xb(49,"td",65),R.Jc(50,Lr,3,4,"span",68),R.Wb(),R.Xb(51,"td",69),R.Lc(52),R.Wb(),R.Xb(53,"td",70),R.Lc(54),R.Jc(55,Ir,2,1,"mat-icon",71),R.Wb(),R.Xb(56,"td",72),R.Lc(57),R.Wb(),R.Wb(),R.Ub()}if(2&t){const t=e.$implicit,n=e.index,i=R.jc();R.Db(3),R.pc("checked",t.select),R.Db(2),R.pc("routerLink","/apps/workflow/shipment/detail/"+t.shipment+"/soa"),R.Db(1),R.Mc(t.code),R.Db(2),R.Mc(t.bill),R.Db(1),R.pc("matTooltip",t.partner_name)("matTooltipPosition","right"),R.Db(1),R.Mc(t.partner_short_name),R.Db(1),R.pc("matTooltip",t.price_name)("matTooltipPosition","right"),R.Db(1),R.Mc(t.price_code),R.Db(2),R.Mc(t.unit_code),R.Db(2),R.Nc("",t.debit," "),R.Db(1),R.pc("ngIf",n>0&&i.shipment[n-1]&&i.shipment[n-1].debit&&!t.debit&&i.shipment[n-1].partner==t.partner),R.Db(3),R.Mc(R.mc(21,35,t.issue_date,"MM/dd/yyyy")),R.Db(2),R.pc("ngIf",n>0&&i.shipment[n-1]&&i.shipment[n-1].issue_date&&!t.issue_date&&i.shipment[n-1].partner==t.partner),R.Db(3),R.Mc(t.pay_date?R.mc(26,38,t.pay_date,"MM/dd/yyyy HH:mm"):""),R.Db(2),R.pc("ngIf",n>0&&i.shipment[n-1]&&i.shipment[n-1].pay_date&&!t.pay_date&&i.shipment[n-1].partner==t.partner),R.Db(2),R.Mc(t.inv_number),R.Db(2),R.Mc(t.bank_ref),R.Db(2),R.Mc(t.volume),R.Db(1),R.pc("ngClass",R.rc(50,Tr,t.amount<0)),R.Db(1),R.Mc(R.mc(36,41,t.amount,"1.2-2")),R.Db(3),R.Mc(t.tax),R.Db(2),R.Mc(R.mc(41,44,t.tax_amount,"1.2-2")),R.Db(3),R.Mc(t.currency_code),R.Db(2),R.Mc(R.mc(46,47,t.ex_rate,"1.0-0")),R.Db(2),R.pc("ngClass",R.sc(52,Vr,t.amount<0,"Revenue"==t.type_name)),R.Db(1),R.pc("ngIf","Revenue"==t.type_name),R.Db(1),R.pc("ngClass",R.sc(55,Ar,t.amount<0,"Cost"==t.type_name)),R.Db(1),R.pc("ngIf","Cost"==t.type_name),R.Db(2),R.Mc(t.country_name),R.Db(2),R.Nc(" ",t.info," "),R.Db(1),R.pc("ngIf",n>0&&i.shipment[n-1]&&i.shipment[n-1].info&&!t.info&&i.shipment[n-1].partner==t.partner),R.Db(1),R.pc("ngClass",R.sc(58,Mr,"Revenue"==t.type_name,"Cost"==t.type_name)),R.Db(1),R.Mc(t.type_name)}}function Rr(t,e){if(1&t&&(R.Xb(0,"tr"),R.Sb(1,"td",53),R.Sb(2,"td",55),R.Sb(3,"td",57),R.Sb(4,"td",61),R.Sb(5,"td",69),R.Sb(6,"td",60),R.Sb(7,"td",61),R.Sb(8,"td",61),R.Sb(9,"td",61),R.Sb(10,"td",61),R.Sb(11,"td",61),R.Sb(12,"td",60),R.Sb(13,"td",77),R.Sb(14,"td",60),R.Sb(15,"td",61),R.Xb(16,"td",78),R.Lc(17,"Total"),R.Wb(),R.Xb(18,"td",78),R.Lc(19),R.Wb(),R.Xb(20,"td",79),R.Lc(21),R.kc(22,"number"),R.Wb(),R.Xb(23,"td",80),R.Lc(24),R.kc(25,"number"),R.Wb(),R.Sb(26,"td",69),R.Sb(27,"td",70),R.Sb(28,"td",61),R.Wb()),2&t){const t=e.$implicit,n=R.jc();R.Db(19),R.Mc(t),R.Db(2),R.Mc(R.mc(22,3,n.total.revenue[t],"VND"!=t?"1.2-2":"1.0-0")),R.Db(3),R.Mc(R.mc(25,6,n.total.cost[t],"VND"!=t?"1.2-2":"1.0-0"))}}let Fr=(()=>{class t{constructor(t,e,n,i,r,o,c){this._activatedRoute=t,this.reportService=e,this.authService=n,this.formBuilder=i,this.changeDetector=r,this.datePipe=o,this.commonService=c,this.total={VND:0,revenue:{},cost:{},currency:[]},this.selected=[],this.checkAll=!1,this.height=560,this.form=this.formBuilder.group({code:[null],bill:[null],party:[null],price:[null],unit:[null],debit:[null],issue_date:[null],pay_date:["All"],inv_number:[null],bank_ref:[null],amount:[null],tax:[null],tax_amount:[null],currency:[null],payment_center:[null],info:[null],type_name:["All"]}),this._unsubscribeAll=new A.a}ngOnInit(){this.reportService.onTypeChanged.next("edit"),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.width<600?t.height-16:t.height-64-64-16}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{let e=t?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16+e:this.authService.screenHeight-64-64-16+e}),this.reportService.onSoaChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.shipment=this.reportService.shipmentAddInfo,this.filterChange(),this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]}}),this.form.valueChanges.subscribe(t=>{this.shipment.length>0&&this.filterChange(t)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewChecked(){this.changeDetector.detectChanges()}get inverseOfTranslation1(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){if(!this.viewPort||!this.viewPort._renderedContentOffset)return"32px";let t=parseInt(this.viewPort._renderedContentOffset);return t-=32,`-${t}px`}getShipment(){this.authService.onRequestChanged.next(!0),this.reportService.getSelShipmentFilterSoa(this.reportService.currenSearch.formSearch).then(t=>{this.authService.onRequestChanged.next(!1)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")})}resetForm(){this.searchNgForm.reset()}getCheckAll(){this.checkAll=!0,this.selected.length==this.filterData.length&&(this.checkAll=!1),this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map(t=>{t.select=this.checkAll,t.select&&(this.total.currency.includes(t.currency_code)||(this.total.currency.push(t.currency_code),this.total.revenue[t.currency_code]=0,this.total.cost[t.currency_code]=0),this.selected.push(t),"Revenue"==t.type_name?(this.total.revenue[t.currency_code]+=t.volume*(t.amount+t.tax_amount),this.total.VND+=t.volume*(t.amount+t.tax_amount)*t.ex_rate):(this.total.cost[t.currency_code]+=t.volume*(t.amount+t.tax_amount),this.total.VND-=t.volume*(t.amount+t.tax_amount)*t.ex_rate))}),this.reportService.onUpdateAddInfoChanged.next([this.selected,this.total])}getSelectItem(t){t.select=!t.select,this.selected=[],this.total={VND:0,revenue:{},cost:{},currency:[]},this.filterData.map(t=>{t.select&&(this.total.currency.includes(t.currency_code)||(this.total.currency.push(t.currency_code),this.total.revenue[t.currency_code]=0,this.total.cost[t.currency_code]=0),this.selected.push(t),"Revenue"==t.type_name?(this.total.revenue[t.currency_code]+=t.volume*(t.amount+t.tax_amount),this.total.VND+=t.volume*(t.amount+t.tax_amount)*t.ex_rate):(this.total.cost[t.currency_code]+=t.volume*(t.amount+t.tax_amount),this.total.VND-=t.volume*(t.amount+t.tax_amount)*t.ex_rate))}),this.checkAll=!1,this.selected.length==this.filterData.length&&(this.checkAll=!0),this.reportService.onUpdateAddInfoChanged.next([this.selected,this.total])}copyItem(t){let e=t[1],n=t[2],i=t[3],r={};r.id=t[0].id,r[n]=["issue_date","pay_date"].includes(n)?this.datePipe.transform(e[n],"yyyy-MM-dd"):e[n],r.update_by=this.authService.user,this.updateServer(i,r,t)}filterChange(t){this.filterContent=t||this.form.value;let e=this.shipment.slice();e.map(t=>{t.issue_date&&(t.issue_date=new Date(t.issue_date).setDate(new Date(t.issue_date).getDate())),t.pay_date&&(t.pay_date=new Date(t.pay_date).setDate(new Date(t.pay_date).getDate()))}),this.filterContent&&(this.filterContent.code&&(e=e.filter(t=>t.code.toLowerCase().includes(this.filterContent.code.toLowerCase()))),this.filterContent.bill&&(e=e.filter(t=>t.bill&&t.bill.toLowerCase().includes(this.filterContent.bill.toLowerCase()))),this.filterContent.party&&(e=e.filter(t=>t.partner_short_name.toLowerCase().includes(this.filterContent.party.toLowerCase()))),this.filterContent.price&&(e=e.filter(t=>t.price_code.toLowerCase().includes(this.filterContent.price.toLowerCase()))),this.filterContent.unit&&(e=e.filter(t=>t.unit_code.toLowerCase().includes(this.filterContent.unit.toLowerCase()))),this.filterContent.debit&&(e=e.filter(t=>t.debit&&t.debit.toLowerCase().includes(this.filterContent.debit.toLowerCase()))),this.filterContent.issue_date&&(e=e.filter(t=>t.issue_date&&t.issue_date==new Date(this.filterContent.issue_date).getTime())),"All"!=this.filterContent.pay_date&&(1==this.filterContent.pay_date?e=e.filter(t=>t.pay_date):0==this.filterContent.pay_date&&(e=e.filter(t=>!t.pay_date))),this.filterContent.inv_number&&(e=e.filter(t=>t.inv_number&&t.inv_number.toLowerCase().includes(this.filterContent.inv_number.toLowerCase()))),this.filterContent.bank_ref&&(e=e.filter(t=>t.bank_ref&&t.bank_ref.toLowerCase().includes(this.filterContent.bank_ref.toLowerCase()))),this.filterContent.amount&&(e=e.filter(t=>t.amount==this.filterContent.amount)),this.filterContent.tax&&(e=e.filter(t=>t.tax==this.filterContent.tax)),this.filterContent.tax_amount&&(e=e.filter(t=>t.tax_amount==this.filterContent.tax_amount)),this.filterContent.currency&&(e=e.filter(t=>t.currency_code.toLowerCase().includes(this.filterContent.currency.toLowerCase()))),this.filterContent.payment_center&&(e=e.filter(t=>t.country_name.toLowerCase().includes(this.filterContent.payment_center.toLowerCase()))),this.filterContent.info&&(e=e.filter(t=>t.info.toLowerCase().includes(this.filterContent.info.toLowerCase()))),"All"!=this.filterContent.type_name&&(e=e.filter(t=>t.type_name==this.filterContent.type_name))),this.filterData=e,console.log(e)}updateServer(t,e,n){switch(this.authService.onRequestChanged.next(!0),t){case"Revenue":e.pay_party=parseInt(n[1].partner),delete e.partner,this.reportService.updateSelRevenue(e).then(t=>{this.authService.onRequestChanged.next(!1),t.affectedRows>0?this.getShipment():(console.error(t),alert("Error update item"),this.getShipment())}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("update item error")});break;case"Cost":e.issue_party=parseInt(n[1].partner),delete e.partner,this.reportService.updateSelCost(e).then(t=>{this.authService.onRequestChanged.next(!1),t.affectedRows>0?this.getShipment():(console.error(t),alert("Error update item"),this.getShipment())}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("update item error")})}}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.a),R.Rb(U),R.Rb(q.a),R.Rb(K.d),R.Rb(R.h),R.Rb(H.f),R.Rb(Y.a))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-add-info"]],viewQuery:function(t,e){var n;1&t&&(R.Sc(Vt.e,!0),R.Sc(Cr,!0)),2&t&&(R.wc(n=R.gc())&&(e.viewPort=n.first),R.wc(n=R.gc())&&(e.searchNgForm=n.first))},decls:129,vars:104,consts:[["name","form","fxLayout","column",1,"content-view",3,"formGroup","keydown.enter"],["formDirective","ngForm"],["itemSize","43",1,"h-100-p"],[1,"simple","report-list-table"],[1,"sticky-header-1","w-40","text-left","sticky-left-col1",2,"z-index","25"],[3,"checked","indeterminate","change"],[1,"sticky-header-1","w-160","sticky-left-col2",2,"z-index","25"],[1,"sticky-header-1","w-160"],[1,"sticky-header-1","w-100"],[1,"sticky-header-1","w-140"],[1,"sticky-header-1","w-60"],[1,"sticky-header-1","w-120","text-right"],[1,"sticky-header-1","w-120","text-right","rev-color"],[1,"sticky-header-1","w-120","text-right","cost-color"],[1,"sticky-header-1","w-260"],[1,"sticky-header-1","w-100","sticky-right-col"],[1,"sticky-header-2","w-40","text-left","sticky-left-col1",2,"z-index","25"],[1,"sticky-header-2","sticky-left-col2",2,"z-index","25"],[1,"my-form-field","w-160"],["matInput","","inputCheck","","type","text","formControlName","code",2,"font-size","12px"],[1,"sticky-header-2"],["matInput","","inputCheck","","type","text","formControlName","bill",2,"font-size","12px"],[1,"my-form-field","w-100"],["matInput","","inputCheck","","type","text","formControlName","party",2,"font-size","12px"],[1,"my-form-field","w-140"],["matInput","","inputCheck","","type","text","formControlName","price",2,"font-size","12px"],[1,"my-form-field","w-60"],["matInput","","inputCheck","","type","text","formControlName","unit",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","debit",2,"font-size","12px"],["inputCheck","","matInput","","name","issue_date","formControlName","issue_date","readonly","true",2,"font-size","12px",3,"matDatepicker","change"],["matSuffix","",3,"for"],["issueDate",""],[1,"sticky-header-2","w-100"],["formControlName","pay_date",2,"font-size","12px"],[2,"font-size","12px",3,"value"],["matInput","","inputCheck","","type","text","formControlName","inv_number",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","bank_ref",2,"font-size","12px"],[1,"sticky-header-2","w-60"],[1,"sticky-header-2","w-120"],["matInput","","inputCheck","","type","number","formControlName","amount",2,"font-size","12px"],["matInput","","inputCheck","","type","number","formControlName","tax",2,"font-size","12px"],["matInput","","inputCheck","","type","number","formControlName","tax_amount",2,"font-size","12px"],["matInput","","inputCheck","","type","text","formControlName","currency",2,"font-size","12px"],[1,"sticky-header-2","w-120","rev-color"],[1,"sticky-header-2","w-120","cost-color"],["matInput","","inputCheck","","type","text","formControlName","payment_center",2,"font-size","12px"],[1,"my-form-field","w-260"],["matInput","","inputCheck","","type","text","formControlName","info",2,"font-size","12px"],["fxLayout","row",1,"sticky-header-2","w-100","sticky-right-col"],["formControlName","type_name",2,"font-size","12px"],["color","warn",1,"cursor-pointer","ml-8",3,"click"],[4,"cdkVirtualFor","cdkVirtualForOf"],[4,"ngFor","ngForOf"],[1,"w-40","text-center","sticky-left-col1"],[3,"checked","click","change"],[1,"w-160","sticky-left-col2"],[1,"cursor-pointer",3,"routerLink"],[1,"w-160"],[1,"w-100",3,"matTooltip","matTooltipPosition"],[1,"w-140",3,"matTooltip","matTooltipPosition"],[1,"w-60"],[1,"w-100"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy debit",3,"matTooltipPosition","click",4,"ngIf"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy issue_date date",3,"matTooltipPosition","click",4,"ngIf"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy pay date",3,"matTooltipPosition","click",4,"ngIf"],[1,"w-120","text-right",3,"ngClass"],[1,"w-60","text-center"],[1,"w-100","text-right"],[4,"ngIf"],[1,"w-140"],[1,"w-260"],["class","cursor-pointer mr-8","color","accent","matTooltip","Copy info",3,"matTooltipPosition","click",4,"ngIf"],[1,"w-100","sticky-right-col",3,"ngClass"],["color","accent","matTooltip","Copy debit",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],["color","accent","matTooltip","Copy issue_date date",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],["color","accent","matTooltip","Copy pay date",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],["color","accent","matTooltip","Copy info",1,"cursor-pointer","mr-8",3,"matTooltipPosition","click"],[1,"w-120"],[1,"w-60","text-bold"],[1,"w-120","text-bold","text-right","rev-color"],[1,"w-120","text-bold","text-right","cost-color"]],template:function(t,e){if(1&t&&(R.Xb(0,"form",0,1),R.fc("keydown.enter",(function(t){return"TEXTAREA"==t.target.tagName})),R.Xb(2,"cdk-virtual-scroll-viewport",2),R.Xb(3,"table",3),R.Xb(4,"thead"),R.Xb(5,"tr"),R.Xb(6,"th",4),R.Xb(7,"mat-checkbox",5),R.fc("change",(function(t){return e.getCheckAll()})),R.Wb(),R.Lc(8),R.Wb(),R.Xb(9,"th",6),R.Lc(10,"Code"),R.Wb(),R.Xb(11,"th",7),R.Lc(12,"Bill"),R.Wb(),R.Xb(13,"th",8),R.Lc(14,"Party"),R.Wb(),R.Xb(15,"th",9),R.Lc(16,"Price"),R.Wb(),R.Xb(17,"th",10),R.Lc(18,"Unit"),R.Wb(),R.Xb(19,"th",8),R.Lc(20,"Debit"),R.Wb(),R.Xb(21,"th",8),R.Lc(22,"Issue date"),R.Wb(),R.Xb(23,"th",8),R.Lc(24,"Pay date"),R.Wb(),R.Xb(25,"th",8),R.Lc(26,"Invoice number"),R.Wb(),R.Xb(27,"th",8),R.Lc(28,"Bank ref"),R.Wb(),R.Xb(29,"th",10),R.Lc(30,"Volume"),R.Wb(),R.Xb(31,"th",11),R.Lc(32,"Amount"),R.Wb(),R.Xb(33,"th",10),R.Lc(34,"Tax"),R.Wb(),R.Xb(35,"th",8),R.Lc(36,"Tax Amount"),R.Wb(),R.Xb(37,"th",10),R.Lc(38,"Currency"),R.Wb(),R.Xb(39,"th",10),R.Lc(40,"Ex rate"),R.Wb(),R.Xb(41,"th",12),R.Lc(42,"Total Revenue"),R.Wb(),R.Xb(43,"th",13),R.Lc(44,"Total Cost"),R.Wb(),R.Xb(45,"th",9),R.Lc(46,"Payment center"),R.Wb(),R.Xb(47,"th",14),R.Lc(48,"Info"),R.Wb(),R.Xb(49,"th",15),R.Lc(50,"Type"),R.Wb(),R.Wb(),R.Xb(51,"tr"),R.Sb(52,"th",16),R.Xb(53,"th",17),R.Xb(54,"mat-form-field",18),R.Sb(55,"input",19),R.Wb(),R.Wb(),R.Xb(56,"th",20),R.Xb(57,"mat-form-field",18),R.Sb(58,"input",21),R.Wb(),R.Wb(),R.Xb(59,"th",20),R.Xb(60,"mat-form-field",22),R.Sb(61,"input",23),R.Wb(),R.Wb(),R.Xb(62,"th",20),R.Xb(63,"mat-form-field",24),R.Sb(64,"input",25),R.Wb(),R.Wb(),R.Xb(65,"th",20),R.Xb(66,"mat-form-field",26),R.Sb(67,"input",27),R.Wb(),R.Wb(),R.Xb(68,"th",20),R.Xb(69,"mat-form-field",22),R.Sb(70,"input",28),R.Wb(),R.Wb(),R.Xb(71,"th",20),R.Xb(72,"mat-form-field",22),R.Xb(73,"input",29),R.fc("change",(function(t){return e.commonService.setDateStr(t)})),R.Wb(),R.Sb(74,"mat-datepicker-toggle",30),R.Sb(75,"mat-datepicker",null,31),R.Wb(),R.Wb(),R.Xb(77,"th",32),R.Xb(78,"mat-form-field",22),R.Xb(79,"mat-select",33),R.Xb(80,"mat-option",34),R.Lc(81,"All"),R.Wb(),R.Xb(82,"mat-option",34),R.Lc(83,"Yes"),R.Wb(),R.Xb(84,"mat-option",34),R.Lc(85,"No"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(86,"th",20),R.Xb(87,"mat-form-field",22),R.Sb(88,"input",35),R.Wb(),R.Wb(),R.Xb(89,"th",20),R.Xb(90,"mat-form-field",22),R.Sb(91,"input",36),R.Wb(),R.Wb(),R.Sb(92,"th",37),R.Xb(93,"th",38),R.Xb(94,"mat-form-field",22),R.Sb(95,"input",39),R.Wb(),R.Wb(),R.Xb(96,"th",20),R.Xb(97,"mat-form-field",26),R.Sb(98,"input",40),R.Wb(),R.Wb(),R.Xb(99,"th",20),R.Xb(100,"mat-form-field",22),R.Sb(101,"input",41),R.Wb(),R.Wb(),R.Xb(102,"th",20),R.Xb(103,"mat-form-field",26),R.Sb(104,"input",42),R.Wb(),R.Wb(),R.Sb(105,"th",37),R.Sb(106,"th",43),R.Sb(107,"th",44),R.Xb(108,"th",20),R.Xb(109,"mat-form-field",24),R.Sb(110,"input",45),R.Wb(),R.Wb(),R.Xb(111,"th",20),R.Xb(112,"mat-form-field",46),R.Sb(113,"input",47),R.Wb(),R.Wb(),R.Xb(114,"th",48),R.Xb(115,"mat-form-field",26),R.Xb(116,"mat-select",49),R.Xb(117,"mat-option",34),R.Lc(118,"All"),R.Wb(),R.Xb(119,"mat-option",34),R.Lc(120,"Revenue"),R.Wb(),R.Xb(121,"mat-option",34),R.Lc(122,"Cost"),R.Wb(),R.Wb(),R.Wb(),R.Xb(123,"mat-icon",50),R.fc("click",(function(t){return t.stopPropagation(),e.resetForm()})),R.Lc(124,"delete"),R.Wb(),R.Wb(),R.Wb(),R.Wb(),R.Xb(125,"tbody"),R.Jc(126,jr,58,61,"ng-container",51),R.Wb(),R.Xb(127,"tfoot"),R.Jc(128,Rr,29,9,"tr",52),R.Wb(),R.Wb(),R.Wb(),R.Wb()),2&t){const t=R.xc(76);R.Ic("height",e.height,"px"),R.pc("formGroup",e.form),R.Db(6),R.Ic("top",e.inverseOfTranslation1),R.Db(1),R.pc("checked",e.checkAll)("indeterminate",e.selected.length>0&&!e.checkAll),R.Db(1),R.Nc(" ",e.selected.length," "),R.Db(1),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(2),R.Ic("top",e.inverseOfTranslation1),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(1),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(2),R.pc("matDatepicker",t),R.Db(1),R.pc("for",t),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.pc("value","All"),R.Db(2),R.pc("value",1),R.Db(2),R.pc("value",0),R.Db(2),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(1),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(1),R.Ic("top",e.inverseOfTranslation2),R.Db(1),R.Ic("top",e.inverseOfTranslation2),R.Db(1),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.Ic("top",e.inverseOfTranslation2),R.Db(3),R.pc("value","All"),R.Db(2),R.pc("value","Revenue"),R.Db(2),R.pc("value","Cost"),R.Db(5),R.pc("cdkVirtualForOf",e.filterData),R.Db(2),R.pc("ngForOf",e.total.currency)}},directives:[K.A,K.q,Z.d,K.h,Vt.e,Vt.a,y.a,b.c,h.b,K.b,K.p,K.g,a.b,a.d,b.h,a.a,m.a,W.n,K.u,p.a,Vt.d,H.s,i.j,d.a,H.t,H.q,it.a],pipes:[H.f,H.g],styles:["report-add-info .content-view{overflow:auto}report-add-info .content-view .width-form{width:1400px}@media screen and (min-width:960px)and (max-width:1279px){report-add-info .content-view .width-form{width:100%}}report-add-info .content-view .group{margin-right:8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:4px;border:1px solid rgba(0,0,0,.12);min-height:60px;height:60px}report-add-info .content-view .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-add-info .content-view .report-list-table{font-size:12px}report-add-info .content-view .report-list-table .border-right{border-right:1px solid rgba(0,0,0,.12)}report-add-info .content-view .report-list-table td,report-add-info .content-view .report-list-table th{padding:8px!important;white-space:nowrap}report-add-info .content-view .report-list-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}report-add-info .content-view .report-list-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}report-add-info .content-view .report-list-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}report-add-info .content-view .report-list-table .sticky-left-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}report-add-info .content-view .report-list-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:40px;background-color:#fff;z-index:20}report-add-info .content-view .report-list-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}report-add-info .content-view .report-list-table .rev-color{background-color:#b3e5fc}report-add-info .content-view .report-list-table .cost-color{background-color:#ffcf9c}report-add-info .content-view .report-list-table .my-form-field .mat-form-field-wrapper{margin-bottom:-1.25em}report-add-info .content-view .report-list-table .my-form-field .mat-form-field-infix{margin-top:-1.25em}"],encapsulation:2,data:{animation:j.a}}),t})();const Pr=function(t){return{"blue-700":t}};function Jr(t,e){if(1&t){const t=R.Yb();R.Xb(0,"div",4),R.fc("click",(function(n){R.Bc(t);const i=e.$implicit;return R.jc().selectedYear=i})),R.Lc(1),R.Wb()}if(2&t){const t=e.$implicit,n=R.jc();R.pc("ngClass",R.rc(2,Pr,n.selectedYear===t)),R.Db(1),R.Nc(" ",t," ")}}let Br=(()=>{class t{constructor(){this._registerCustomChartJSPlugin(),this.options={spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,tooltips:{position:"nearest",mode:"index",intersect:!1},layout:{padding:{left:8,right:8}},elements:{point:{radius:4,borderWidth:2,hoverRadius:4,hoverBorderWidth:2}},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"#000000",stepSize:400}}],yAxes:[{gridLines:{tickMarkLength:16},ticks:{stepSize:1e5}}]},plugins:{filler:{propagate:!1}}},this.colors=[{borderColor:"rgba(30, 136, 229, 0.87)",backgroundColor:"rgba(30, 136, 229, 0.87)",pointBackgroundColor:"rgba(30, 136, 229, 0.87)",pointHoverBackgroundColor:"rgba(30, 136, 229, 0.87)",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"},{borderColor:"#3949ab",backgroundColor:"#ffffff",pointBackgroundColor:"#3949ab",pointHoverBackgroundColor:"#3949ab",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"},{borderColor:"#5A00CC",backgroundColor:"#ffffff",pointBackgroundColor:"#5A00CC",pointHoverBackgroundColor:"#5A00CC",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"}]}ngOnInit(){this.selectedYear=(new Date).getFullYear();let t=0;this.arrYear.map((e,n)=>{n>0?t<this.labels[e].length&&(this.selectedYear=e,t=this.labels[e].length):t=this.labels[e].length})}_registerCustomChartJSPlugin(){window.Chart.plugins.register({afterDatasetsDraw:function(t,e){if(!t.options.plugins.xLabelsOnTop||t.options.plugins.xLabelsOnTop&&!1===t.options.plugins.xLabelsOnTop.active)return;const n=t.ctx;t.data.datasets.forEach((function(e,i){const r=t.getDatasetMeta(i);r.hidden||r.data.forEach((function(t,i){n.fillStyle="rgba(255, 255, 255, 0.7)",n.font=window.Chart.helpers.fontString(13,"normal","Roboto, Helvetica Neue, Arial");const r=Math.round(e.data[i]).toString();n.textAlign="center",n.textBaseline="middle";const o=t.tooltipPosition();n.fillText(r,o.x,24),n.save(),n.beginPath(),n.setLineDash([5,3]),n.moveTo(o.x,39),n.lineTo(o.x,o.y-15),n.strokeStyle="rgba(255,255,255,0.12)",n.stroke(),n.restore()}))}))}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Lb({type:t,selectors:[["report-chart-view"]],inputs:{height:"height",data:"data",label:"label",labels:"labels",arrYear:"arrYear"},decls:4,vars:7,consts:[["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center"],["class","py-8 px-12 border-radius-2 line-height-1 mr-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],["baseChart","","chartType","line",3,"datasets","labels","colors","options"],[1,"py-8","px-12","border-radius-2","line-height-1","mr-8","cursor-pointer",3,"ngClass","click"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Xb(1,"div",1),R.Jc(2,Jr,2,4,"div",2),R.Wb(),R.Sb(3,"canvas",3),R.Wb()),2&t&&(R.Ic("height",e.height-40,"px"),R.Db(2),R.pc("ngForOf",e.arrYear),R.Db(1),R.pc("datasets",e.data[e.selectedYear])("labels",e.labels[e.selectedYear])("colors",e.colors)("options",e.options))},directives:[Z.d,Z.c,H.s,N.a,H.q,it.a],styles:[""],encapsulation:2}),t})(),zr=(()=>{class t{constructor(t,e,n,i,r,o){if(this.router=t,this.route=e,this._activatedRoute=n,this.authService=i,this.changeDetector=r,this.reportService=o,this.height=560,this._unsubscribeAll=new A.a,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.reportService.onTypeChanged.next("form"),this.authService.windowSizeChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.reportService.onVesselChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.dataBill=this.reportService.dataBill,this.shipments=this.reportService.shipmentVessel,this.voyage=this.reportService.voyage,this.arrType=this.reportService.arrType,this.price=this.reportService.sptPrice,this.total=t[3],this.formSearch=this.reportService.currenSearch.formSearch,this.dataBill&&this.dataBill.length>0&&this.buildChart()}),this.reportService.onDataChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.customer=this.reportService.dataCustomer,this.supplier=this.reportService.dataSupplier,this.users=this.reportService.users}),this.reportService.onDataItemChanged.pipe(Object(M.a)(this._unsubscribeAll)).subscribe(t=>{this.prices=this.reportService.price,this.currency=this.reportService.currency,this.country=this.reportService.country})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}buildChart(){let t={},e={},n=[];this.dataBill.map(i=>{let r=new Date(i.depart_time).getFullYear();n.includes(r)||(n.push(r),t[r]=[],e[r]=[{label:"profit",data:[],fill:"start"},{label:"Revenue",data:[],fill:"start"},{label:"Cost",data:[],fill:"start"}]),t[r].push(i.code),e[r][0].data.push(Math.round(100*(i.profit.revenueVN+i.profit.revenueNN-i.profit.costVN-i.profit.costNN))/100),e[r][1].data.push(Math.round(100*(i.profit.revenueVN+i.profit.revenueNN))/100),e[r][2].data.push(Math.round(100*(i.profit.costVN+i.profit.costNN))/100)}),this.arrYear=n,this.labels=t,this.data=e,console.log(this.data)}}return t.\u0275fac=function(e){return new(e||t)(R.Rb(i.g),R.Rb(i.a),R.Rb(i.a),R.Rb(q.a),R.Rb(R.h),R.Rb(U))},t.\u0275cmp=R.Lb({type:t,selectors:[["report-chart"]],decls:6,vars:7,consts:[["fxLayout","column",2,"overflow","auto"],[1,"group","mt-8"],[1,"cursor-pointer"],[1,"viewer-content","pt-16"],[3,"arrYear","labels","data","label","height"]],template:function(t,e){1&t&&(R.Xb(0,"div",0),R.Xb(1,"div",1),R.Xb(2,"h2",2),R.Lc(3,"Profit Chart"),R.Wb(),R.Xb(4,"div",3),R.Sb(5,"report-chart-view",4),R.Wb(),R.Wb(),R.Wb()),2&t&&(R.Ic("height",e.height,"px"),R.Db(5),R.pc("arrYear",e.arrYear)("labels",e.labels)("data",e.data)("label","Profit chart")("height",e.height))},directives:[Z.d,Br],styles:["report-chart .group{margin-left:0;margin-right:16px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12);padding:0}report-chart .group h2{position:absolute;top:-11px;left:8px;margin:0;padding:0 8px;font-size:16px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54);z-index:20}report-chart .group .viewer-content{width:100%;overflow:auto}report-chart .group .viewer-content .mat-expansion-panel-body{padding:0!important}report-chart .table-div{height:100%;border:1px solid #000!important}@media screen and (max-width:599px){report-chart .table-div{height:360px!important}}"],encapsulation:2,data:{animation:j.a}}),t})();var Er=n("m4Vh");n.d(e,"ReportSoaModule",(function(){return Yr}));const $r=[{path:"",component:Tt,resolve:{data:U},children:[{path:"paydate",component:Ut},{path:"vessel",component:Xi},{path:"add-info",component:Fr},{path:"bill",component:Wr},{path:"chart",component:zr}]},{path:"voyage/:id",component:Tt,resolve:{data:U},children:[{path:"paydate",component:Ut},{path:"vessel",component:Xi},{path:"add-info",component:Fr},{path:"bill",component:Wr},{path:"chart",component:zr}]},{path:"customer/:customer",component:Tt,resolve:{data:U},children:[{path:"paydate",component:Ut},{path:"vessel",component:Xi},{path:"add-info",component:Fr},{path:"bill",component:Wr},{path:"chart",component:zr}]}];let Yr=(()=>{class t{}return t.\u0275mod=R.Pb({type:t}),t.\u0275inj=R.Ob({factory:function(e){return new(e||t)},providers:[U],imports:[[i.k.forChild($r),o.b,r.a,c.b,a.c,s.c,l.b,b.e,p.b,d.b,h.c,u.c,m.b,f.c,g.e,v.b,y.b,x.b,D.d,w.e,S.b,k.b,C.b,X.k,_.c,O.b,N.b,L.b,W.t,I.a,T.a,V.f,Vt.g,At.b,Er.a]]}),t})()},jD4G:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{static filterArrayByString(t,e){return""===e?t:(e=e.toLowerCase(),t.filter(t=>this.searchInObj(t,e)))}static searchInObj(t,e){for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];if("string"==typeof i){if(this.searchInString(i,e))return!0}else if(Array.isArray(i)&&this.searchInArray(i,e))return!0;if("object"==typeof i&&this.searchInObj(i,e))return!0}}static searchInArray(t,e){for(const n of t){if("string"==typeof n&&this.searchInString(n,e))return!0;if("object"==typeof n&&this.searchInObj(n,e))return!0}}static searchInString(t,e){return t.toLowerCase().includes(e)}static generateGUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()}static toggleInArray(t,e){-1===e.indexOf(t)?e.push(t):e.splice(e.indexOf(t),1)}static handleize(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}},rPBI:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("fXoL"),r=n("XNiG"),o=n("1G5W"),c=n("3Pt+"),a=n("Kj3r"),s=n("/uUt"),l=n("0JVi"),b=n("ofXK"),p=n("znSr"),d=n("XiUz"),h=n("bTqV"),u=n("NFeN");function m(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",7),i.fc("click",(function(e){return i.Bc(t),i.jc().expand()})),i.Xb(1,"mat-icon",8),i.Lc(2,"search"),i.Wb(),i.Wb()}if(2&t){const t=i.jc();i.Db(1),i.pc("color",t.searchText&&""!==t.searchText?"accent":"")}}const f=function(t){return{expanded:t}};let g=(()=>{class t{constructor(t){this._fuseConfigService=t,this.inputValue=new i.o,this.collapsed=!0,this.searchInput=new c.e(""),this._unsubscribeAll=new r.a}ngOnInit(){this._fuseConfigService.config.pipe(Object(o.a)(this._unsubscribeAll)).subscribe(t=>{this.fuseConfig=t}),this.searchInput.valueChanges.pipe(Object(o.a)(this._unsubscribeAll),Object(a.a)(300),Object(s.a)()).subscribe(t=>{this.searchText=t,this.inputValue.emit(t)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(t){t.searchText&&(t.searchText.currentValue||null==t.searchText.currentValue)&&(this.searchText=t.searchText.currentValue,this.searchInput.setValue(this.searchText))}collapse(){this.collapsed=!0}expand(){this.collapsed=!1}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(l.b))},t.\u0275cmp=i.Lb({type:t,selectors:[["filter-search-bar"]],inputs:{searchText:"searchText"},outputs:{inputValue:"inputValue"},features:[i.Bb()],decls:8,vars:5,consts:[[1,"filter-search-bar",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",1,"filter-search-bar-content"],["for","filter-search-bar-input"],["mat-icon-button","","class","filter-search-bar-expander","aria-label","Expand Search Bar",3,"click",4,"ngIf"],["id","filter-search-bar-input","type","text","placeholder","Search","fxFlex","",1,"ml-24",3,"formControl"],["mat-icon-button","","aria-label","Collapse Search Bar",1,"filter-search-bar-collapser",3,"click"],[1,"s-24","secondary-text"],["mat-icon-button","","aria-label","Expand Search Bar",1,"filter-search-bar-expander",3,"click"],[1,"s-24","secondary-text",3,"color"]],template:function(t,e){1&t&&(i.Xb(0,"div",0),i.Xb(1,"div",1),i.Xb(2,"label",2),i.Jc(3,m,3,1,"button",3),i.Wb(),i.Sb(4,"input",4),i.Xb(5,"button",5),i.fc("click",(function(t){return e.collapse()})),i.Xb(6,"mat-icon",6),i.Lc(7,"close"),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.pc("ngClass",i.rc(3,f,!e.collapsed)),i.Db(3),i.pc("ngIf",e.collapsed),i.Db(1),i.pc("formControl",e.searchInput))},directives:[b.q,p.a,d.d,d.c,b.t,c.b,d.b,c.p,c.f,h.b,u.a],styles:["[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{height:56px}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:block}"]}),t})()}}]);