(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{"4Bo+":function(e,t,i){"use strict";i.r(t);var r=i("tyNb"),a=i("5HBU"),o=i("STbY"),n=i("/1cH"),s=i("iadO"),c=i("bTqV"),l=i("7EHt"),p=i("kmnG"),b=i("NFeN"),u=i("Qu3c"),d=i("qFsG"),h=i("wZkO"),m=i("d3UM"),f=i("QibW"),g=i("0IaG"),v=i("/t3+"),x=i("bSwM"),S=i("M9IT"),y=i("xHqg"),W=i("A5z7"),X=i("bv9b"),D=i("XhcP"),C=i("FKr1"),w=i("1jcm"),k=i("+0xr"),L=i("Dh3D"),_=i("IOBc"),R=i("212X"),A=i("LPQX"),q=i("XNiG"),I=i("1G5W"),O=i("PVWW"),M=i("fXoL"),F=i("HX77"),j=i("2Vo4"),P=i("tk/3"),T=i("qXBG");let z=(()=>{class e{constructor(e,t){this._httpClient=e,this.authService=t,this.scopes={A:"AGENT",C:"CARRIER",T:"TRUCK",L:"LESSOR",D:"DEPOT",P:"PORT"},this.arrScope=[{type:"A",name:"AGENT"},{type:"C",name:"CARRIER"},{type:"T",name:"TRUCK"},{type:"L",name:"LESSOR"},{type:"D",name:"DEPOT"},{type:"P",name:"PORT"}],this.onDataChanged=new j.a([]),this.onContractDataChanged=new j.a([]),this.onSupplierChanged=new j.a([]),this.onSupplierScopeChanged=new j.a([]),this.onResetForm=new j.a(!1)}resolve(e){this.authService.routerData=e;let t=e.params.id;return new Promise((e,i)=>{Promise.all([this.getSupplierById(t),this.getSupplierScope(t),this.getData(),this.getDataContract()]).then(([t])=>{e()},i)})}getData(){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel/supplier/data",e).subscribe(e=>{this.country=e[0],this.users=e[1],this.suppliers=e[2],this.onDataChanged.next(e),t(e)},i)})}getDataContract(){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,i)=>{this._httpClient.get(this.authService.apiUrl+"/sel/supplier/contract-data",e).subscribe(e=>{this.suppliers=e[0],this.seaTerminal=e[1],this.users=e[2],this.unit=e[3],this.price=e[4],this.currency=e[5],this.country=e[6],this.onContractDataChanged.next(e),t(e)},i)})}getSupplierById(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.get(this.authService.apiUrl+"/sel/supplier/id/"+e,t).subscribe(e=>{this.supplier=e[0][0],this.supplierReport=e[1],this.supplierContract=e[2],this.supplierVendor=e[3],this.onSupplierChanged.next(e),i(e)},r)})}updateSupplier(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/supplier",e,t).subscribe(e=>{i(e)},r)})}createSupplierReport(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/supplier/report",e,t).subscribe(e=>{i(e)},r)})}updateSupplierReport(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/supplier/report",e,t).subscribe(e=>{i(e)},r)})}deleteSupplierReport(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/supplier/report/"+e,t).subscribe(e=>{i(e)},r)})}createSupplierReportTag(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/supplier/supplier-report/tag",e,t).subscribe(e=>{i(e)},r)})}deleteSupplierReportTag(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.delete(this.authService.apiUrl+"/supplier/supplier-report/tag/"+e,t).subscribe(e=>{i(e)},r)})}createContract(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/supplier/contract",e,t).subscribe(e=>{i(e)},r)})}updateContract(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/supplier/contract",e,t).subscribe(e=>{i(e)},r)})}deleteContract(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/supplier/contract/"+e,t).subscribe(e=>{i(e)},r)})}createVendor(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/supplier/vendor",e,t).subscribe(e=>{i(e)},r)})}updateVendor(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/supplier/vendor",e,t).subscribe(e=>{i(e)},r)})}deleteVendor(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/supplier/vendor/"+e,t).subscribe(e=>{i(e)},r)})}createScope(e,t){let i={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((r,a)=>{this._httpClient.post(this.authService.apiUrl+"/supplier-scope/single/"+e,t,i).subscribe(e=>{this.supplierScopes=e.scope,this.onSupplierScopeChanged.next(e.scope),r(e)},a)})}deleteScope(e,t){let i={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((r,a)=>{this._httpClient.delete(this.authService.apiUrl+"/supplier-scope/id/"+e+"/"+t,i).subscribe(e=>{this.supplierScopes=e.scope,this.onSupplierScopeChanged.next(e.scope),r(e)},a)})}getSupplierScope(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.get(this.authService.apiUrl+"/supplier-scope/"+e,t).subscribe(e=>{this.supplierScopes=e.scope,this.onSupplierScopeChanged.next(e.scope),i(e)},r)})}createContractDetails(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.post(this.authService.apiUrl+"/sel/supplier/contract-details",e,t).subscribe(e=>{i(e)},r)})}updateContractDetails(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.put(this.authService.apiUrl+"/sel/supplier/contract-details",e,t).subscribe(e=>{i(e)},r)})}deleteContractDetails(e){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,r)=>{this._httpClient.delete(this.authService.apiUrl+"/sel/supplier/contract-details/"+e,t).subscribe(e=>{i(e)},r)})}}return e.\u0275fac=function(t){return new(t||e)(M.bc(P.a),M.bc(T.a))},e.\u0275prov=M.Nb({token:e,factory:e.\u0275fac}),e})();var B=i("ofXK"),E=i("B9zo"),V=i("fE3o"),J=i("3Pt+"),N=i("XiUz"),U=i("EwFO");let H=(()=>{class e{constructor(e,t){this.formBuilder=e,this.authService=t,this.height=560,this.changeSetting=new M.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new q.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-18}),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-18:this.authService.screenHeight-64-64-18})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}initForm(){return this.formBuilder.group({column:this.formBuilder.array([])})}get columnAdd(){return this.form.get("column")}addColumn(e){let t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}checkAll(){this.displayedColumns.map((e,t)=>{this.form.controls.column.controls[t].controls[e].setValue(!0)})}toggleCardCover(){}toggleSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(J.d),M.Rb(T.a))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-supplier"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"div",2),M.Xb(3,"div"),M.Lc(4,"Settings"),M.Wb(),M.Wb(),M.Wb(),M.Xb(5,"div",3),M.Xb(6,"form",4),M.Xb(7,"div",5),M.Xb(8,"h2"),M.Lc(9,"Column"),M.Wb(),M.Xb(10,"div",6),M.Xb(11,"button",7),M.fc("click",(function(e){return t.checkAll()})),M.Lc(12,"All column"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(5),M.Ic("height",t.height,"px"),M.Db(1),M.pc("formGroup",t.form))},directives:[N.d,N.c,U.a,J.A,J.q,J.h,c.b],styles:["supplier-details-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}supplier-details-setting .navbar-scroll-supplier{background:#fff!important}supplier-details-setting .navbar-scroll-supplier .navbar-content{padding-top:0}supplier-details-setting .navbar-scroll-supplier .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}supplier-details-setting .navbar-scroll-supplier .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}supplier-details-setting .navbar-scroll-supplier .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-supplier{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-supplier .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:O.a}}),e})();var $=i("pLZG"),G=i("0JVi"),Y=i("znSr");function K(e,t){if(1&e){const e=M.Yb();M.Xb(0,"button",11),M.fc("click",(function(t){M.Bc(e);const i=M.jc();return t.stopPropagation(),i.changeScreen(!0)})),M.Xb(1,"mat-icon"),M.Lc(2,"flip_to_front"),M.Wb(),M.Wb()}}function Q(e,t){if(1&e){const e=M.Yb();M.Xb(0,"button",11),M.fc("click",(function(t){M.Bc(e);const i=M.jc();return t.stopPropagation(),i.changeScreen(!1)})),M.Xb(1,"mat-icon"),M.Lc(2,"flip_to_back"),M.Wb(),M.Wb()}}const Z=function(e){return{"accent-600-fg":e}};let ee=(()=>{class e{constructor(e,t,i,r){this.authService=e,this._fuseConfigService=t,this.router=i,this.route=r,this.url="about",this.fullScreen=!1,this.toggleSidebar=new M.o,this.showHideBar=new M.o,this.refreshPage=new M.o,this._unsubscribeAll=new q.a}ngOnInit(){this.router.events.pipe(Object($.a)(e=>e instanceof r.c)).subscribe(e=>{let t=e.url.split("/");this.url=t[5]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(T.a),M.Rb(G.b),M.Rb(r.g),M.Rb(r.a))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-header"]],inputs:{id:"id",sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:43,vars:30,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm","",3,"ngClass"],["fxShow","","fxHide.gt-sm","",3,"ngClass"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(M.Xb(0,"mat-toolbar",0),M.Xb(1,"div",1),M.Xb(2,"div",2),M.Xb(3,"div",3),M.Xb(4,"button",4),M.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),M.Xb(5,"mat-icon"),M.Lc(6,"menu"),M.Wb(),M.Wb(),M.Xb(7,"button",5),M.fc("click",(function(e){return t.showHideBar.emit()})),M.Xb(8,"mat-icon"),M.Lc(9,"menu"),M.Wb(),M.Wb(),M.Wb(),M.Xb(10,"button",6),M.Xb(11,"span",7),M.Lc(12,"About"),M.Wb(),M.Xb(13,"mat-icon",8),M.Lc(14,"equalizer"),M.Wb(),M.Wb(),M.Xb(15,"button",6),M.Xb(16,"span",7),M.Lc(17,"Report"),M.Wb(),M.Xb(18,"mat-icon",8),M.Lc(19,"view_carousel"),M.Wb(),M.Wb(),M.Xb(20,"button",6),M.Xb(21,"span",7),M.Lc(22,"Contract"),M.Wb(),M.Xb(23,"mat-icon",8),M.Lc(24,"equalizer"),M.Wb(),M.Wb(),M.Xb(25,"button",6),M.Xb(26,"span",7),M.Lc(27,"Vendor"),M.Wb(),M.Xb(28,"mat-icon",8),M.Lc(29,"view_carousel"),M.Wb(),M.Wb(),M.Wb(),M.Xb(30,"div",9),M.Sb(31,"div",10),M.Xb(32,"button",11),M.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),M.Xb(33,"mat-icon",12),M.Lc(34,"refresh"),M.Wb(),M.Wb(),M.Sb(35,"div",10),M.Jc(36,K,3,0,"button",13),M.Jc(37,Q,3,0,"button",13),M.Sb(38,"div",10),M.Xb(39,"button",11),M.fc("click",(function(e){return t.toggleSidebar.emit("supplier-details-setting")})),M.Xb(40,"mat-icon"),M.Lc(41,"settings"),M.Wb(),M.Wb(),M.Sb(42,"div",10),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(10),M.pc("routerLink","/apps/supplier/supplier-details/"+t.id+"/about"),M.Db(1),M.pc("ngClass",M.rc(14,Z,"about"==t.url)),M.Db(2),M.pc("ngClass",M.rc(16,Z,"about"==t.url)),M.Db(2),M.pc("routerLink","/apps/supplier/supplier-details/"+t.id+"/report"),M.Db(1),M.pc("ngClass",M.rc(18,Z,"report"==t.url)),M.Db(2),M.pc("ngClass",M.rc(20,Z,"report"==t.url)),M.Db(2),M.pc("routerLink","/apps/supplier/supplier-details/"+t.id+"/contract"),M.Db(1),M.pc("ngClass",M.rc(22,Z,"contract"==t.url)),M.Db(2),M.pc("ngClass",M.rc(24,Z,"contract"==t.url)),M.Db(2),M.pc("routerLink","/apps/supplier/supplier-details/"+t.id+"/vendor"),M.Db(1),M.pc("ngClass",M.rc(26,Z,"vendor"==t.url)),M.Db(2),M.pc("ngClass",M.rc(28,Z,"vendor"==t.url)),M.Db(8),M.pc("ngIf",!t.fullScreen),M.Db(1),M.pc("ngIf",t.fullScreen))},directives:[v.a,N.b,N.e,N.d,N.c,c.b,Y.b,b.a,r.h,B.q,Y.a,B.t],styles:["supplier-details-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}supplier-details-header.below{z-index:2}supplier-details-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}supplier-details-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}supplier-details-header .logo .logo-icon{width:38px}supplier-details-header .chat-panel-toggle-button,supplier-details-header .language-button,supplier-details-header .quick-panel-toggle-button,supplier-details-header .user-button,supplier-details-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){supplier-details-header .chat-panel-toggle-button,supplier-details-header .language-button,supplier-details-header .quick-panel-toggle-button,supplier-details-header .user-button,supplier-details-header fuse-search-bar{height:56px}}supplier-details-header .navbar-toggle-button{min-width:56px;height:56px}supplier-details-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){supplier-details-header .toolbar-separator{height:56px}}"],encapsulation:2}),e})();var te=i("0Zc1");const ie=["formDirective"];let re=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.authService=t,this.commonService=i,this.form=this.formBuilder.group({valid:[null]}),this.now=new Date,this.height=560,this._unsubscribeAll=new q.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}resetForm(){this.searchNgForm.resetForm()}onSearchFormSubmit(e){}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(J.d),M.Rb(T.a),M.Rb(te.a))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-sidebar"]],viewQuery:function(e,t){var i;1&e&&M.Sc(ie,!0),2&e&&M.wc(i=M.gc())&&(t.searchNgForm=i.first)},decls:17,vars:5,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24","hide"],["appearance","outline",1,"w-100-p","pr-sm-8"],["formControlName","valid"],[3,"value"]],template:function(e,t){1&e&&(M.Xb(0,"form",0,1),M.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onSearchFormSubmit(t.form.value)})),M.Xb(2,"div",2),M.Sb(3,"div",3),M.Wb(),M.Xb(4,"div",4),M.Xb(5,"div",5),M.Xb(6,"div",6),M.Xb(7,"div",7),M.Xb(8,"div",8),M.Xb(9,"mat-form-field",9),M.Xb(10,"mat-label"),M.Lc(11,"Valid"),M.Wb(),M.Xb(12,"mat-select",10),M.Xb(13,"mat-option",11),M.Lc(14,"Invalid"),M.Wb(),M.Xb(15,"mat-option",11),M.Lc(16,"Valid"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.pc("formGroup",t.form),M.Db(4),M.Ic("height",t.height,"px"),M.Db(9),M.pc("value",0),M.Db(2),M.pc("value",0))},directives:[J.A,J.q,J.h,N.d,N.c,U.a,N.b,p.c,p.f,m.a,J.p,J.g,C.n],styles:["supplier-details-sidebar{border-right:1px solid #a3a3a3}supplier-details-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}supplier-details-sidebar .navbar-scroll-container{background:#fff!important}supplier-details-sidebar .navbar-scroll-container .navbar-content{padding-top:0}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}supplier-details-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-partner .search-partner-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function ae(e,t){1&e&&(M.Xb(0,"fuse-sidebar",10),M.Sb(1,"supplier-details-sidebar"),M.Wb())}function oe(e,t){1&e&&M.Sb(0,"router-outlet")}let ne=(()=>{class e{constructor(e,t,i,r,a,o){this._fuseSidebarService=e,this.supplierDetailsService=t,this.router=i,this.route=r,this.authService=a,this.datePipe=o,this.sidebarPanel=!0,this.type="view",this._unsubscribeAll=new q.a}ngOnInit(){this.id=this.route.snapshot.params.id,this.supplierDetailsService.onSupplierChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.supplier=this.supplierDetailsService.supplier,this.supplierReport=this.supplierDetailsService.supplierReport}),this.supplierDetailsService.onDataChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.country=this.supplierDetailsService.country,this.suppliers=this.supplierDetailsService.suppliers,this.users=this.supplierDetailsService.users}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.supplierDetailsService)}newSupplier(e){this.router.navigate(["/apps/supplier/supplier-details/form/0"])}getTypeSidebar(e){this.type=e}getSupplier(){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.getSupplierById(this.id).then(e=>{this.authService.onRequestChanged.next(!1),this.type="view"}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}editSupplier(e){e.update_by=this.authService.email,e.update_at=this.datePipe.transform(new Date,"yyyy/MM/dd HH:mm:ss")+".0",this.authService.onRequestChanged.next(!0),this.supplierDetailsService.updateSupplier(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows&&this.getSupplier()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error edit")})}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(F.a),M.Rb(z),M.Rb(r.g),M.Rb(r.a),M.Rb(T.a),M.Rb(B.f))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details"]],decls:10,vars:5,consts:[[1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","supplier-details-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","supplier-details-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"id","sidebarName","showHideBar","refreshPage","toggleSidebar","newSupplier"],[1,"content-card",2,"border","none","border-radius","0"],[1,"content","m-8"],[4,"ngIf"],["name","supplier-details-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Jc(1,ae,2,0,"fuse-sidebar",1),M.Xb(2,"fuse-sidebar",2),M.Xb(3,"div",3),M.Sb(4,"supplier-details-setting",4),M.Wb(),M.Wb(),M.Xb(5,"div",5),M.Xb(6,"supplier-details-header",6),M.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newSupplier",(function(e){return t.newSupplier(e)})),M.Wb(),M.Xb(7,"div",7),M.Xb(8,"div",8),M.Jc(9,oe,1,0,"router-outlet",9),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(1),M.pc("ngIf",t.sidebarPanel),M.Db(3),M.pc("displayObject",t.displayObject),M.Db(2),M.pc("id",t.id)("sidebarName","supplier-details-sidebar"),M.Db(3),M.pc("ngIf",!0))},directives:[E.a,B.t,V.a,H,ee,re,r.l],styles:["supplier-details{width:100%}supplier-details .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){supplier-details .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}supplier-details .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){supplier-details .center .content-card supplier-details{border-right:0}supplier-details .center .content-card shipment-details,supplier-details .center .content-card supplier-details{-webkit-box-flex:1;flex:1 0 100%}supplier-details .center .content-card shipment-details{display:none!important}supplier-details .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}supplier-details .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}}"],encapsulation:2,data:{animation:O.a}}),e})();function se(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"AGENT"),M.Wb())}function ce(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"CARRIER"),M.Wb())}function le(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"TRUCK"),M.Wb())}function pe(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"LESSOR"),M.Wb())}function be(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"DEPOT"),M.Wb())}function ue(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"PORT"),M.Wb())}function de(e,t){if(1&e){const e=M.Yb();M.Xb(0,"div",8),M.Xb(1,"div",9),M.Xb(2,"mat-checkbox",10),M.fc("click",(function(t){return M.Bc(e),t.stopPropagation()}))("change",(function(i){M.Bc(e);const r=t.$implicit,a=M.jc();return i?a.getCheck(r):null})),M.Jc(3,se,2,0,"span",11),M.Jc(4,ce,2,0,"span",11),M.Jc(5,le,2,0,"span",11),M.Jc(6,pe,2,0,"span",11),M.Jc(7,be,2,0,"span",11),M.Jc(8,ue,2,0,"span",11),M.Wb(),M.Xb(9,"span",12),M.fc("click",(function(i){M.Bc(e);const r=t.$implicit,a=M.jc();return i.stopPropagation(),a.getCheck(r)})),M.Lc(10),M.Wb(),M.Wb(),M.Wb()}if(2&e){const e=t.$implicit;M.Db(2),M.pc("checked",1==e.scope_check),M.Db(1),M.pc("ngIf","A"==e.type),M.Db(1),M.pc("ngIf","C"==e.type),M.Db(1),M.pc("ngIf","T"==e.type),M.Db(1),M.pc("ngIf","L"==e.type),M.Db(1),M.pc("ngIf","D"==e.type),M.Db(1),M.pc("ngIf","P"==e.type),M.Db(2),M.Mc(e.tag)}}let he=(()=>{class e{constructor(e,t,i,r,a){this.matDialogRef=e,this._data=t,this.authService=i,this.commonService=r,this.supplierDetailsService=a,this.label=t.label,this.data=t.data,console.log(this.data),this.supplierId=t.id}ngOnInit(){}getCheck(e){let t=JSON.parse(JSON.stringify(e));t.update_by=this.authService.user,delete t.scope_check,t.id>0?(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.deleteScope(t.id,t.supplier).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{alert("ERROR"),console.error(e),this.authService.onRequestChanged.next(!1)})):(delete t.id,this.authService.onRequestChanged.next(!0),this.supplierDetailsService.createScope(this.supplierId,t).then(e=>{console.log(e),this.authService.onRequestChanged.next(!1)}).catch(e=>{alert("ERROR"),console.error(e),this.authService.onRequestChanged.next(!1)}))}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(g.f),M.Rb(g.a),M.Rb(T.a),M.Rb(te.a),M.Rb(z))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-scope-modal-dialog"]],decls:12,vars:2,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","supplier-details-scope-modal","fxLayout","column",1,"p-16","pb-0","m-0"],["fxLayout","row wrap","fxLayoutAlign","center center"],["fxFlex","50","fxFlex.gt-xs","10","class","p-8",4,"ngFor","ngForOf"],["fxFlex","50","fxFlex.gt-xs","10",1,"p-8"],["fxLayout","row","fxLayoutAlign","star center"],[3,"checked","click","change"],[4,"ngIf"],[1,"pl-4","cursor-pointer",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"mat-toolbar",1),M.Xb(2,"mat-toolbar-row",2),M.Xb(3,"span",3),M.Lc(4),M.Wb(),M.Xb(5,"button",4),M.fc("click",(function(e){return t.matDialogRef.close()})),M.Xb(6,"mat-icon"),M.Lc(7,"close"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(8,"div",5),M.Xb(9,"div"),M.Xb(10,"div",6),M.Jc(11,de,11,8,"div",7),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Db(4),M.Mc(t.label),M.Db(7),M.pc("ngForOf",t.data))},directives:[v.a,v.c,N.b,N.d,N.c,c.b,b.a,g.d,U.a,B.s,x.a,B.t],styles:["@media screen and (min-width:600px)and (max-width:959px){.supplier-details-scope-modal-dialog{width:100%}}@media screen and (min-width:960px){.supplier-details-scope-modal-dialog{width:1080px}}.supplier-details-scope-modal-dialog .mat-dialog-container{padding:0}.supplier-details-scope-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.supplier-details-scope-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.supplier-details-scope-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();function me(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-chip",15),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit;return M.jc().deleteScope(i)})),M.Lc(1),M.Wb()}if(2&e){const e=M.jc().$implicit,t=M.jc();M.Db(1),M.Mc(t.scopes[e.type])}}function fe(e,t){if(1&e&&(M.Vb(0),M.Jc(1,me,2,1,"mat-chip",14),M.Ub()),2&e){const e=t.$implicit;M.Db(1),M.pc("ngIf",e.id>0)}}function ge(e,t){1&e&&(M.Xb(0,"mat-icon"),M.Lc(1,"arrow_drop_down"),M.Wb())}function ve(e,t){1&e&&(M.Xb(0,"mat-icon"),M.Lc(1,"arrow_drop_up"),M.Wb())}let xe=(()=>{class e{constructor(e,t,i,r,a,o){this.route=e,this.router=t,this._activatedRoute=i,this.authService=r,this.supplierDetailsService=a,this._matDialog=o,this.moreInfo=!1,this.height=560,this._unsubscribeAll=new q.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.supplierDetailsService.onSupplierChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.supplier=this.supplierDetailsService.supplier,this.id=this.supplier.id}),this.supplierDetailsService.onSupplierScopeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.supplierScopes=e}),this.supplierDetailsService.onDataChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.country=this.supplierDetailsService.country,this.suppliers=this.supplierDetailsService.suppliers,this.users=this.supplierDetailsService.users,this.scopes=this.supplierDetailsService.scopes,this.arrScope=this.supplierDetailsService.arrScope}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}openFormScope(){this.dialogRef=this._matDialog.open(he,{panelClass:"supplier-details-scope-modal-dialog",data:{label:"Edit scopes",id:this.id,data:this.supplierScopes,supplier:this.supplier}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}deleteScope(e){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.deleteScope(e.id,e.supplier).then(e=>{this.authService.onRequestChanged.next(!1),this.getSupplier()}).catch(e=>{alert("ERROR"),console.error(e),this.authService.onRequestChanged.next(!1)})}getSupplier(){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.getSupplierById(this.id).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(r.a),M.Rb(r.g),M.Rb(r.a),M.Rb(T.a),M.Rb(z),M.Rb(g.b))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-about"]],decls:131,vars:29,consts:[["id","supplier-details-about","fxLayout","column",2,"overflow","auto"],["fxLayout","row wrap","fxLayoutAlign","start center"],["fxFlex","100","fxFlex.gt-sm","80",1,"info-line"],[1,"title"],[1,"info"],["fxFlex","100","fxFlex.gt-sm","20",1,"info-line"],["fxFlex","100","fxFlex.gt-sm","60",1,"info-line"],["fxFlex","50","fxFlex.gt-sm","20",1,"info-line"],["fxFlex","100",1,"info-line"],["color","accent",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["fxFlex","100",1,"cursor-pointer",3,"click"],[4,"ngIf"],["fxFlex","100",3,"expanded","expandedChange"],["class","cursor-pointer","color","accent","selected","",3,"click",4,"ngIf"],["color","accent","selected","",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"div",2),M.Xb(3,"div",3),M.Lc(4,"Full name"),M.Wb(),M.Xb(5,"div",4),M.Lc(6),M.Wb(),M.Wb(),M.Xb(7,"div",5),M.Xb(8,"div",3),M.Lc(9,"Short name"),M.Wb(),M.Xb(10,"div",4),M.Lc(11),M.Wb(),M.Wb(),M.Xb(12,"div",2),M.Xb(13,"div",3),M.Lc(14,"E name"),M.Wb(),M.Xb(15,"div",4),M.Lc(16),M.Wb(),M.Wb(),M.Xb(17,"div",5),M.Xb(18,"div",3),M.Lc(19,"Taxcode:"),M.Wb(),M.Xb(20,"div",4),M.Lc(21),M.Wb(),M.Wb(),M.Xb(22,"div",6),M.Xb(23,"div",3),M.Lc(24,"Office Address"),M.Wb(),M.Xb(25,"div",4),M.Lc(26),M.Wb(),M.Wb(),M.Xb(27,"div",7),M.Xb(28,"div",3),M.Lc(29,"City"),M.Wb(),M.Xb(30,"div",4),M.Lc(31),M.Wb(),M.Wb(),M.Xb(32,"div",7),M.Xb(33,"div",3),M.Lc(34,"Country"),M.Wb(),M.Xb(35,"div",4),M.Lc(36),M.Wb(),M.Wb(),M.Xb(37,"div",7),M.Xb(38,"div",3),M.Lc(39,"Tel"),M.Wb(),M.Xb(40,"div",4),M.Lc(41),M.Wb(),M.Wb(),M.Xb(42,"div",7),M.Xb(43,"div",3),M.Lc(44,"Fax"),M.Wb(),M.Xb(45,"div",4),M.Lc(46),M.Wb(),M.Wb(),M.Xb(47,"div",7),M.Xb(48,"div",3),M.Lc(49,"Status"),M.Wb(),M.Xb(50,"div",4),M.Lc(51),M.Wb(),M.Wb(),M.Xb(52,"div",7),M.Xb(53,"div",3),M.Lc(54,"Owner"),M.Wb(),M.Xb(55,"div",4),M.Lc(56),M.Wb(),M.Wb(),M.Xb(57,"div",7),M.Xb(58,"div",3),M.Lc(59,"Update by"),M.Wb(),M.Xb(60,"div",4),M.Lc(61),M.Wb(),M.Wb(),M.Xb(62,"div",8),M.Xb(63,"div",3),M.Lc(64," Scope "),M.Xb(65,"mat-icon",9),M.fc("click",(function(e){return e.stopPropagation(),t.openFormScope()})),M.Lc(66,"add"),M.Wb(),M.Wb(),M.Xb(67,"div",4),M.Xb(68,"mat-chip-list"),M.Jc(69,fe,2,1,"ng-container",10),M.Wb(),M.Wb(),M.Wb(),M.Xb(70,"a",11),M.fc("click",(function(e){return t.moreInfo=!t.moreInfo})),M.Lc(71," More infomartion "),M.Jc(72,ge,2,0,"mat-icon",12),M.Jc(73,ve,2,0,"mat-icon",12),M.Wb(),M.Xb(74,"mat-expansion-panel",13),M.fc("expandedChange",(function(e){return t.moreInfo=e})),M.Xb(75,"div",1),M.Xb(76,"div",7),M.Xb(77,"div",3),M.Lc(78,"Postcode"),M.Wb(),M.Xb(79,"div",4),M.Lc(80),M.Wb(),M.Wb(),M.Xb(81,"div",7),M.Xb(82,"div",3),M.Lc(83,"Person"),M.Wb(),M.Xb(84,"div",4),M.Lc(85),M.Wb(),M.Wb(),M.Xb(86,"div",7),M.Xb(87,"div",3),M.Lc(88,"Email"),M.Wb(),M.Xb(89,"div",4),M.Lc(90),M.Wb(),M.Wb(),M.Xb(91,"div",7),M.Xb(92,"div",3),M.Lc(93,"Skype"),M.Wb(),M.Xb(94,"div",4),M.Lc(95),M.Wb(),M.Wb(),M.Xb(96,"div",7),M.Xb(97,"div",3),M.Lc(98,"Web"),M.Wb(),M.Xb(99,"div",4),M.Lc(100),M.Wb(),M.Wb(),M.Xb(101,"div",7),M.Xb(102,"div",3),M.Lc(103,"Mob"),M.Wb(),M.Xb(104,"div",4),M.Lc(105),M.Wb(),M.Wb(),M.Xb(106,"div",7),M.Xb(107,"div",3),M.Lc(108,"Registered"),M.Wb(),M.Xb(109,"div",4),M.Lc(110),M.Wb(),M.Wb(),M.Xb(111,"div",7),M.Xb(112,"div",3),M.Lc(113,"Credit"),M.Wb(),M.Xb(114,"div",4),M.Lc(115),M.Wb(),M.Wb(),M.Xb(116,"div",7),M.Xb(117,"div",3),M.Lc(118,"Service"),M.Wb(),M.Xb(119,"div",4),M.Lc(120),M.Wb(),M.Wb(),M.Xb(121,"div",7),M.Xb(122,"div",3),M.Lc(123,"Create by"),M.Wb(),M.Xb(124,"div",4),M.Lc(125),M.Wb(),M.Wb(),M.Xb(126,"div",8),M.Xb(127,"div",3),M.Lc(128,"Logo"),M.Wb(),M.Xb(129,"div",4),M.Lc(130),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Ic("height",t.height,"px"),M.Db(6),M.Mc(t.supplier.full_name),M.Db(5),M.Mc(t.supplier.short_name),M.Db(5),M.Mc(t.supplier.e_name),M.Db(5),M.Nc("",t.supplier.taxcode," "),M.Db(5),M.Mc(t.supplier.office_address),M.Db(5),M.Mc(t.supplier.city),M.Db(5),M.Mc(t.supplier.country_name),M.Db(5),M.Mc(t.supplier.tel),M.Db(5),M.Mc(t.supplier.fax),M.Db(5),M.Mc(1==t.supplier.status?"Active":"Inactive"),M.Db(5),M.Mc(t.supplier.owner_name),M.Db(5),M.Mc(t.supplier.update_by),M.Db(8),M.pc("ngForOf",t.supplierScopes),M.Db(3),M.pc("ngIf",!t.moreInfo),M.Db(1),M.pc("ngIf",t.moreInfo),M.Db(1),M.pc("expanded",t.moreInfo),M.Db(6),M.Mc(t.supplier.postcode),M.Db(5),M.Mc(t.supplier.person),M.Db(5),M.Mc(t.supplier.email),M.Db(5),M.Mc(t.supplier.skypee),M.Db(5),M.Mc(t.supplier.web),M.Db(5),M.Mc(t.supplier.mob),M.Db(5),M.Mc(t.supplier.registered),M.Db(5),M.Mc(t.supplier.credit),M.Db(5),M.Mc(t.supplier.service),M.Db(5),M.Mc(t.supplier.create_by),M.Db(5),M.Mc(t.supplier.logo))},directives:[N.d,N.c,N.b,b.a,W.c,B.s,B.t,l.c,W.a],styles:["supplier-details-about #supplier-details-about .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 8px 8px;border:1px solid #000}supplier-details-about #supplier-details-about .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}supplier-details-about #supplier-details-about .group .info-line{margin-bottom:24px}supplier-details-about #supplier-details-about .group .info-line .title{font-size:13px;font-weight:600;padding-bottom:4px}supplier-details-about #supplier-details-about .group .info-line .info{font-size:12px}supplier-details-about #supplier-details-about .group .info-line .info .mat-standard-chip{font-size:12px!important;padding:4px;border-radius:6px;min-height:20px}supplier-details-about #supplier-details-about .group .info-line:last-child{margin-bottom:0}supplier-details-about #supplier-details-about .group .mat-expansion-panel{box-shadow:none!important}supplier-details-about #supplier-details-about .group .mat-expansion-panel-body{padding:0!important}"],encapsulation:2,data:{animation:O.a}}),e})();var Se=i("JX91"),ye=i("lJxs"),We=i("ihCf");function Xe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Title is required "),M.Wb())}function De(e,t){if(1&e){const e=M.Yb();M.Xb(0,"div"),M.Xb(1,"form",7),M.fc("keydown.enter",(function(t){return M.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){M.Bc(e);const i=M.jc();return i.onReportFormSubmit(i.form)})),M.Xb(2,"div",8),M.Sb(3,"input",9),M.Sb(4,"input",10),M.Wb(),M.Xb(5,"div",11),M.Xb(6,"mat-form-field",12),M.Xb(7,"mat-label"),M.Lc(8,"Title"),M.Wb(),M.Sb(9,"input",13),M.Jc(10,Xe,2,0,"mat-error",6),M.Wb(),M.Xb(11,"mat-form-field",14),M.Xb(12,"mat-label"),M.Lc(13,"Status"),M.Wb(),M.Xb(14,"mat-select",15),M.Xb(15,"mat-option",16),M.Lc(16,"Memo"),M.Wb(),M.Xb(17,"mat-option",16),M.Lc(18,"Request"),M.Wb(),M.Xb(19,"mat-option",16),M.Lc(20,"Success"),M.Wb(),M.Xb(21,"mat-option",16),M.Lc(22,"Close"),M.Wb(),M.Wb(),M.Wb(),M.Xb(23,"mat-form-field",17),M.Xb(24,"mat-label"),M.Lc(25,"Update by"),M.Wb(),M.Sb(26,"input",18),M.Sb(27,"input",19),M.Wb(),M.Xb(28,"mat-form-field",20),M.Xb(29,"mat-label"),M.Lc(30,"Content"),M.Wb(),M.Sb(31,"textarea",21),M.Wb(),M.Wb(),M.Xb(32,"div",22),M.Xb(33,"div",23),M.Lc(34),M.Wb(),M.Wb(),M.Xb(35,"div",24),M.Xb(36,"button",25),M.Lc(37,"Submit"),M.Wb(),M.Xb(38,"button",26),M.fc("click",(function(t){return M.Bc(e),M.jc().matDialogRef.close()})),M.Lc(39,"Cancel"),M.Wb(),M.Wb(),M.Wb(),M.Wb()}if(2&e){const e=M.jc();M.Db(1),M.pc("formGroup",e.form),M.Db(9),M.pc("ngIf",e.form.get("title").hasError("required")),M.Db(5),M.pc("value","0"),M.Db(2),M.pc("value","1"),M.Db(2),M.pc("value","2"),M.Db(2),M.pc("value","3"),M.Db(5),M.pc("readonly",!0),M.Db(1),M.pc("value",e.name)("readonly",!0),M.Db(7),M.Mc(e.errorMessage)}}function Ce(e,t){if(1&e){const e=M.Yb();M.Xb(0,"div",29),M.Xb(1,"div",30),M.Xb(2,"mat-checkbox",31),M.fc("click",(function(t){return M.Bc(e),t.stopPropagation()}))("change",(function(i){M.Bc(e);const r=t.$implicit,a=M.jc(2);return i?a.getCheck(r):null})),M.Wb(),M.Xb(3,"span",32),M.fc("click",(function(i){M.Bc(e);const r=t.$implicit,a=M.jc(2);return i.stopPropagation(),a.getCheck(r)})),M.Lc(4),M.Wb(),M.Wb(),M.Wb()}if(2&e){const e=t.$implicit;M.Db(2),M.pc("checked",1==e.check),M.Db(2),M.Mc(e.tag)}}function we(e,t){if(1&e&&(M.Xb(0,"div"),M.Xb(1,"div",27),M.Jc(2,Ce,5,2,"div",28),M.Wb(),M.Wb()),2&e){const e=M.jc();M.Db(2),M.pc("ngForOf",e.tags)}}function ke(e,t){if(1&e){const e=M.Yb();M.Xb(0,"button",60),M.fc("click",(function(t){return M.Bc(e),M.jc(2).createCode()})),M.Xb(1,"mat-icon",61),M.Lc(2,"refresh"),M.Wb(),M.Wb()}2&e&&M.pc("matTooltip","Change to standard code")}function Le(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1,"Code is required!"),M.Wb())}function _e(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.full_name," ")}}function Re(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Supplier is required "),M.Wb())}function Ae(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.name," ")}}function qe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Load terminal is required "),M.Wb())}function Ie(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.name," ")}}function Oe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Discharge terminal is required "),M.Wb())}function Me(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Contract from is required "),M.Wb())}function Fe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Contract to is required "),M.Wb())}function je(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Date is too early! "),M.Wb())}function Pe(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.name," ")}}function Te(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Owner is required "),M.Wb())}function ze(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Validity is required "),M.Wb())}function Be(e,t){if(1&e){const e=M.Yb();M.Xb(0,"div"),M.Xb(1,"form",33),M.fc("keydown.enter",(function(t){return M.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){M.Bc(e);const i=M.jc();return i.onContractFormSubmit(i.formContract)})),M.Xb(2,"div",8),M.Sb(3,"input",9),M.Wb(),M.Xb(4,"div",11),M.Xb(5,"mat-form-field",34),M.Xb(6,"mat-label"),M.Lc(7,"Code"),M.Wb(),M.Sb(8,"input",35),M.Jc(9,ke,3,1,"button",36),M.Jc(10,Le,2,0,"mat-error",6),M.Wb(),M.Xb(11,"mat-form-field",37),M.Xb(12,"mat-label"),M.Lc(13,"Supplier"),M.Wb(),M.Sb(14,"input",38),M.Xb(15,"mat-autocomplete",39,40),M.Jc(17,_e,2,2,"mat-option",41),M.kc(18,"async"),M.Wb(),M.Jc(19,Re,2,0,"mat-error",6),M.Wb(),M.Xb(20,"mat-form-field",42),M.Xb(21,"mat-label"),M.Lc(22,"Load terminal"),M.Wb(),M.Sb(23,"input",43),M.Xb(24,"mat-autocomplete",39,44),M.Jc(26,Ae,2,2,"mat-option",41),M.kc(27,"async"),M.Wb(),M.Jc(28,qe,2,0,"mat-error",6),M.Wb(),M.Xb(29,"mat-form-field",42),M.Xb(30,"mat-label"),M.Lc(31,"Discharge terminal"),M.Wb(),M.Sb(32,"input",45),M.Xb(33,"mat-autocomplete",39,46),M.Jc(35,Ie,2,2,"mat-option",41),M.kc(36,"async"),M.Wb(),M.Jc(37,Oe,2,0,"mat-error",6),M.Wb(),M.Xb(38,"mat-form-field",42),M.Xb(39,"mat-label"),M.Lc(40,"Contract from"),M.Wb(),M.Xb(41,"input",47),M.fc("change",(function(t){return M.Bc(e),M.jc().commonService.setDateStr(t)})),M.Wb(),M.Sb(42,"mat-datepicker-toggle",48),M.Sb(43,"mat-datepicker",null,49),M.Jc(45,Me,2,0,"mat-error",6),M.Wb(),M.Xb(46,"mat-form-field",42),M.Xb(47,"mat-label"),M.Lc(48,"Contract to"),M.Wb(),M.Xb(49,"input",50),M.fc("change",(function(t){return M.Bc(e),M.jc().commonService.setDateStr(t)})),M.Wb(),M.Sb(50,"mat-datepicker-toggle",48),M.Sb(51,"mat-datepicker",null,51),M.Jc(53,Fe,2,0,"mat-error",6),M.Jc(54,je,2,0,"mat-error",6),M.Wb(),M.Xb(55,"mat-form-field",52),M.Xb(56,"mat-label"),M.Lc(57,"Owner"),M.Wb(),M.Sb(58,"input",53),M.Xb(59,"mat-autocomplete",39,54),M.Jc(61,Pe,2,2,"mat-option",41),M.kc(62,"async"),M.Wb(),M.Jc(63,Te,2,0,"mat-error",6),M.Wb(),M.Xb(64,"mat-form-field",42),M.Xb(65,"mat-label"),M.Lc(66,"Validity"),M.Wb(),M.Xb(67,"mat-select",55),M.Xb(68,"mat-option",16),M.Lc(69,"Invalid"),M.Wb(),M.Xb(70,"mat-option",16),M.Lc(71,"Valid"),M.Wb(),M.Wb(),M.Jc(72,ze,2,0,"mat-error",6),M.Wb(),M.Xb(73,"mat-form-field",34),M.Xb(74,"mat-label"),M.Lc(75,"Create by"),M.Wb(),M.Sb(76,"input",56),M.Sb(77,"input",57),M.Wb(),M.Xb(78,"mat-form-field",58),M.Xb(79,"mat-label"),M.Lc(80,"Info"),M.Wb(),M.Sb(81,"textarea",59),M.Wb(),M.Wb(),M.Xb(82,"div",22),M.Xb(83,"div",23),M.Lc(84),M.Wb(),M.Wb(),M.Xb(85,"div",24),M.Xb(86,"button",25),M.Lc(87,"Submit"),M.Wb(),M.Xb(88,"button",26),M.fc("click",(function(t){return M.Bc(e),M.jc().matDialogRef.close()})),M.Lc(89,"Cancel"),M.Wb(),M.Wb(),M.Wb(),M.Wb()}if(2&e){const e=M.xc(16),t=M.xc(25),i=M.xc(34),r=M.xc(44),a=M.xc(52),o=M.xc(60),n=M.jc();M.Db(1),M.pc("formGroup",n.formContract),M.Db(8),M.pc("ngIf","Edit contract"==n.label),M.Db(1),M.pc("ngIf",n.formContract.get("code").hasError("required")),M.Db(4),M.pc("matAutocomplete",e),M.Db(1),M.pc("displayWith",n.commonService.displayFn.bind(n,"full_name",n.suppliers)),M.Db(2),M.pc("ngForOf",M.lc(18,32,n.filteredSupplier)),M.Db(2),M.pc("ngIf",n.formContract.get("supplier").hasError("required")),M.Db(4),M.pc("matAutocomplete",t),M.Db(1),M.pc("displayWith",n.commonService.displayFn.bind(n,"name",n.seaTerminal)),M.Db(2),M.pc("ngForOf",M.lc(27,34,n.filteredSeaterminal1)),M.Db(2),M.pc("ngIf",n.formContract.get("load_terminal").hasError("required")),M.Db(4),M.pc("matAutocomplete",i),M.Db(1),M.pc("displayWith",n.commonService.displayFn.bind(n,"name",n.seaTerminal)),M.Db(2),M.pc("ngForOf",M.lc(36,36,n.filteredSeaterminal2)),M.Db(2),M.pc("ngIf",n.formContract.get("discharge_terminal").hasError("required")),M.Db(4),M.pc("matDatepicker",r),M.Db(1),M.pc("for",r),M.Db(3),M.pc("ngIf",n.formContract.get("contract_from").hasError("required")),M.Db(4),M.pc("matDatepicker",a),M.Db(1),M.pc("for",a),M.Db(3),M.pc("ngIf",n.formContract.get("contract_to").hasError("required")),M.Db(1),M.pc("ngIf",!n.formContract.get("contract_to").hasError("required")&&"INVALID"==n.formContract.get("contract_to").status),M.Db(4),M.pc("matAutocomplete",o),M.Db(1),M.pc("displayWith",n.commonService.displayFn.bind(n,"name",n.users)),M.Db(2),M.pc("ngForOf",M.lc(62,38,n.filteredUser)),M.Db(2),M.pc("ngIf",n.formContract.get("owner").hasError("required")),M.Db(5),M.pc("value",0),M.Db(2),M.pc("value",1),M.Db(2),M.pc("ngIf",n.formContract.get("validity").hasError("required")),M.Db(4),M.pc("readonly",!0)("value",n.name),M.Db(8),M.Mc(n.errorMessage)}}function Ee(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1,"Code is required!"),M.Wb())}function Ve(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.full_name," ")}}function Je(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Supplier is required "),M.Wb())}function Ne(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1,"Type is required!"),M.Wb())}function Ue(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Vendor from is required "),M.Wb())}function He(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Vendor to is required "),M.Wb())}function $e(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Date is too early! "),M.Wb())}function Ge(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Validity is required "),M.Wb())}function Ye(e,t){if(1&e){const e=M.Yb();M.Xb(0,"div"),M.Xb(1,"form",62),M.fc("keydown.enter",(function(t){return M.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){M.Bc(e);const i=M.jc();return i.onVendorFormSubmit(i.formVendor)})),M.Xb(2,"div",8),M.Sb(3,"input",9),M.Wb(),M.Xb(4,"div",11),M.Xb(5,"mat-form-field",63),M.Xb(6,"mat-label"),M.Lc(7,"Code"),M.Wb(),M.Sb(8,"input",35),M.Jc(9,Ee,2,0,"mat-error",6),M.Wb(),M.Xb(10,"mat-form-field",12),M.Xb(11,"mat-label"),M.Lc(12,"Supplier"),M.Wb(),M.Sb(13,"input",38),M.Xb(14,"mat-autocomplete",39,64),M.Jc(16,Ve,2,2,"mat-option",41),M.kc(17,"async"),M.Wb(),M.Jc(18,Je,2,0,"mat-error",6),M.Wb(),M.Xb(19,"mat-form-field",65),M.Xb(20,"mat-label"),M.Lc(21,"Type"),M.Wb(),M.Xb(22,"mat-select",66),M.Xb(23,"mat-option",16),M.Lc(24,"Port-depo"),M.Wb(),M.Xb(25,"mat-option",16),M.Lc(26,"Trucking"),M.Wb(),M.Xb(27,"mat-option",16),M.Lc(28,"Other"),M.Wb(),M.Wb(),M.Jc(29,Ne,2,0,"mat-error",6),M.Wb(),M.Xb(30,"mat-form-field",17),M.Xb(31,"mat-label"),M.Lc(32,"Vendor from"),M.Wb(),M.Xb(33,"input",67),M.fc("change",(function(t){return M.Bc(e),M.jc().commonService.setDateStr(t)})),M.Wb(),M.Sb(34,"mat-datepicker-toggle",48),M.Sb(35,"mat-datepicker",null,49),M.Jc(37,Ue,2,0,"mat-error",6),M.Wb(),M.Xb(38,"mat-form-field",17),M.Xb(39,"mat-label"),M.Lc(40,"Vendor to"),M.Wb(),M.Xb(41,"input",68),M.fc("change",(function(t){return M.Bc(e),M.jc().commonService.setDateStr(t)})),M.Wb(),M.Sb(42,"mat-datepicker-toggle",48),M.Sb(43,"mat-datepicker",null,51),M.Jc(45,He,2,0,"mat-error",6),M.Jc(46,$e,2,0,"mat-error",6),M.Wb(),M.Xb(47,"mat-form-field",17),M.Xb(48,"mat-label"),M.Lc(49,"Validity"),M.Wb(),M.Xb(50,"mat-select",55),M.Xb(51,"mat-option",16),M.Lc(52,"Invalid"),M.Wb(),M.Xb(53,"mat-option",16),M.Lc(54,"Valid"),M.Wb(),M.Wb(),M.Jc(55,Ge,2,0,"mat-error",6),M.Wb(),M.Xb(56,"mat-form-field",17),M.Xb(57,"mat-label"),M.Lc(58,"Create by"),M.Wb(),M.Sb(59,"input",56),M.Sb(60,"input",57),M.Wb(),M.Xb(61,"mat-form-field",58),M.Xb(62,"mat-label"),M.Lc(63,"Info"),M.Wb(),M.Sb(64,"textarea",59),M.Wb(),M.Wb(),M.Xb(65,"div",22),M.Xb(66,"div",23),M.Lc(67),M.Wb(),M.Wb(),M.Xb(68,"div",24),M.Xb(69,"button",25),M.Lc(70,"Submit"),M.Wb(),M.Xb(71,"button",26),M.fc("click",(function(t){return M.Bc(e),M.jc().matDialogRef.close()})),M.Lc(72,"Cancel"),M.Wb(),M.Wb(),M.Wb(),M.Wb()}if(2&e){const e=M.xc(15),t=M.xc(36),i=M.xc(44),r=M.jc();M.Db(1),M.pc("formGroup",r.formVendor),M.Db(8),M.pc("ngIf",r.formVendor.get("code").hasError("required")),M.Db(4),M.pc("matAutocomplete",e),M.Db(1),M.pc("displayWith",r.commonService.displayFn.bind(r,"full_name",r.suppliers)),M.Db(2),M.pc("ngForOf",M.lc(17,23,r.filteredSupplier2)),M.Db(2),M.pc("ngIf",r.formVendor.get("supplier").hasError("required")),M.Db(5),M.pc("value","0"),M.Db(2),M.pc("value","1"),M.Db(2),M.pc("value","2"),M.Db(2),M.pc("ngIf",r.formVendor.get("type").hasError("required")),M.Db(4),M.pc("matDatepicker",t),M.Db(1),M.pc("for",t),M.Db(3),M.pc("ngIf",r.formVendor.get("vendor_from").hasError("required")),M.Db(4),M.pc("matDatepicker",i),M.Db(1),M.pc("for",i),M.Db(3),M.pc("ngIf",r.formVendor.get("vendor_to").hasError("required")),M.Db(1),M.pc("ngIf",!r.formVendor.get("vendor_to").hasError("required")&&"INVALID"==r.formVendor.get("vendor_to").status),M.Db(5),M.pc("value",0),M.Db(2),M.pc("value",1),M.Db(2),M.pc("ngIf",r.formVendor.get("validity").hasError("required")),M.Db(4),M.pc("readonly",!0)("value",r.name),M.Db(8),M.Mc(r.errorMessage)}}function Ke(e,t){if(1&e&&(M.Xb(0,"mat-option",86),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e),M.Db(1),M.Nc(" ",e.name," ")}}function Qe(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Price is required "),M.Wb())}function Ze(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Volume is required "),M.Wb())}function et(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Min Volume is 1 "),M.Wb())}function tt(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Amount is required "),M.Wb())}function it(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.code," ")}}function rt(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Currency is required "),M.Wb())}function at(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.full_name," ")}}function ot(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Pay party is required "),M.Wb())}function nt(e,t){if(1&e&&(M.Xb(0,"mat-option",16),M.Lc(1),M.Wb()),2&e){const e=t.$implicit;M.pc("value",e.id),M.Db(1),M.Nc(" ",e.name," ")}}function st(e,t){1&e&&(M.Xb(0,"mat-error"),M.Lc(1," Payment center is required "),M.Wb())}function ct(e,t){if(1&e){const e=M.Yb();M.Xb(0,"div"),M.Xb(1,"form",69),M.fc("keydown.enter",(function(t){return M.Bc(e),"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){M.Bc(e);const i=M.jc();return i.onContractDetailsFormSubmit(i.formContractDetail)})),M.Xb(2,"div",8),M.Sb(3,"input",70),M.Sb(4,"input",71),M.Wb(),M.Xb(5,"div",11),M.Xb(6,"mat-form-field",72),M.Xb(7,"mat-label"),M.Lc(8,"Price"),M.Wb(),M.Sb(9,"input",73),M.Xb(10,"mat-autocomplete",39,74),M.Jc(12,Ke,2,2,"mat-option",75),M.kc(13,"async"),M.Wb(),M.Jc(14,Qe,2,0,"mat-error",6),M.Wb(),M.Xb(15,"mat-form-field",17),M.Xb(16,"mat-label"),M.Lc(17,"Unit"),M.Wb(),M.Sb(18,"input",19),M.Wb(),M.Xb(19,"mat-form-field",42),M.Xb(20,"mat-label"),M.Lc(21,"Volume"),M.Wb(),M.Sb(22,"input",76),M.Jc(23,Ze,2,0,"mat-error",6),M.Jc(24,et,2,0,"mat-error",6),M.Wb(),M.Xb(25,"mat-form-field",42),M.Xb(26,"mat-label"),M.Lc(27,"Amount"),M.Wb(),M.Sb(28,"input",77),M.Jc(29,tt,2,0,"mat-error",6),M.Wb(),M.Xb(30,"mat-form-field",42),M.Xb(31,"mat-label"),M.Lc(32,"Tax(%)"),M.Wb(),M.Xb(33,"mat-select",78),M.Xb(34,"mat-option",16),M.Lc(35,"0"),M.Wb(),M.Xb(36,"mat-option",16),M.Lc(37,"5"),M.Wb(),M.Xb(38,"mat-option",16),M.Lc(39,"5.26"),M.Wb(),M.Xb(40,"mat-option",16),M.Lc(41,"7"),M.Wb(),M.Xb(42,"mat-option",16),M.Lc(43,"8"),M.Wb(),M.Xb(44,"mat-option",16),M.Lc(45,"10"),M.Wb(),M.Wb(),M.Wb(),M.Xb(46,"mat-form-field",42),M.Xb(47,"mat-label"),M.Lc(48,"Currency"),M.Wb(),M.Xb(49,"mat-select",79),M.Jc(50,it,2,2,"mat-option",41),M.Wb(),M.Jc(51,rt,2,0,"mat-error",6),M.Wb(),M.Xb(52,"mat-form-field",72),M.Xb(53,"mat-label"),M.Lc(54,"Pay party"),M.Wb(),M.Sb(55,"input",80),M.Xb(56,"mat-autocomplete",39,81),M.Jc(58,at,2,2,"mat-option",41),M.kc(59,"async"),M.Wb(),M.Jc(60,ot,2,0,"mat-error",6),M.Wb(),M.Xb(61,"mat-form-field",17),M.Xb(62,"mat-label"),M.Lc(63,"Payment center"),M.Wb(),M.Sb(64,"input",82),M.Xb(65,"mat-autocomplete",39,83),M.Jc(67,nt,2,2,"mat-option",41),M.kc(68,"async"),M.Wb(),M.Jc(69,st,2,0,"mat-error",6),M.Wb(),M.Xb(70,"mat-form-field",72),M.Xb(71,"mat-label"),M.Lc(72,"Info"),M.Wb(),M.Sb(73,"input",84),M.Wb(),M.Xb(74,"mat-form-field",65),M.Xb(75,"mat-label"),M.Lc(76,"Update by"),M.Wb(),M.Sb(77,"input",56),M.Sb(78,"input",85),M.Wb(),M.Wb(),M.Xb(79,"div",22),M.Xb(80,"div",23),M.Lc(81),M.Wb(),M.Wb(),M.Xb(82,"div",24),M.Xb(83,"button",25),M.Lc(84,"Submit"),M.Wb(),M.Xb(85,"button",26),M.fc("click",(function(t){return M.Bc(e),M.jc().matDialogRef.close()})),M.Lc(86,"Cancel"),M.Wb(),M.Wb(),M.Wb(),M.Wb()}if(2&e){const e=M.xc(11),t=M.xc(57),i=M.xc(66),r=M.jc();M.Db(1),M.pc("formGroup",r.formContractDetail),M.Db(8),M.pc("matAutocomplete",e),M.Db(1),M.pc("displayWith",r.commonService.displayObjFn.bind(r,"name")),M.Db(2),M.pc("ngForOf",M.lc(13,29,r.filteredPrice)),M.Db(2),M.pc("ngIf",r.formContractDetail.get("price").hasError("required")),M.Db(4),M.pc("value",null==r.formContractDetail.value.price?null:r.formContractDetail.value.price.unit_code)("readonly",!0),M.Db(5),M.pc("ngIf",r.formContractDetail.get("volume").hasError("required")),M.Db(1),M.pc("ngIf",r.formContractDetail.get("volume").hasError("min")),M.Db(5),M.pc("ngIf",r.formContractDetail.get("amount").hasError("required")),M.Db(5),M.pc("value",0),M.Db(2),M.pc("value",5),M.Db(2),M.pc("value",5.26),M.Db(2),M.pc("value",7),M.Db(2),M.pc("value",8),M.Db(2),M.pc("value",10),M.Db(6),M.pc("ngForOf",r.currency),M.Db(1),M.pc("ngIf",r.formContractDetail.get("currency").hasError("required")),M.Db(4),M.pc("matAutocomplete",t),M.Db(1),M.pc("displayWith",r.commonService.displayFn.bind(r,"full_name",r.suppliers)),M.Db(2),M.pc("ngForOf",M.lc(59,31,r.filteredSupContractDetail)),M.Db(2),M.pc("ngIf",r.formContractDetail.get("pay_party").hasError("required")),M.Db(4),M.pc("matAutocomplete",i),M.Db(1),M.pc("displayWith",r.commonService.displayFn.bind(r,"name",r.country)),M.Db(2),M.pc("ngForOf",M.lc(68,33,r.filteredCountry)),M.Db(2),M.pc("ngIf",r.formContractDetail.get("payment_center").hasError("required")),M.Db(8),M.pc("readonly",!0)("value",r.name),M.Db(4),M.Mc(r.errorMessage)}}let lt=(()=>{class e{constructor(e,t,i,r,a,o,n){this.matDialogRef=e,this._data=t,this.authService=i,this._formBuilder=r,this.commonService=a,this.supplierDetailsService=o,this.datePipe=n,this.form=this._formBuilder.group({id:[null],supplier_id:[null,J.y.required],title:[null,J.y.required],content:[null],status:["0",J.y.required],update_by:[this.authService.user,J.y.required]}),this.formContract=this._formBuilder.group({id:[null],code:[null,J.y.required],supplier:[null,J.y.required],load_terminal:[null,J.y.required],discharge_terminal:[null,J.y.required],contract_from:[null,J.y.required],contract_to:[null,J.y.required],owner:[null,J.y.required],validity:[1,J.y.required],info:[null],create_by:[this.authService.user,J.y.required]}),this.formVendor=this._formBuilder.group({id:[null],code:[null,J.y.required],supplier:[null,J.y.required],type:[null,J.y.required],vendor_from:[null,J.y.required],vendor_to:[null,J.y.required],validity:[1,J.y.required],info:[null],create_by:[this.authService.user,J.y.required]}),this.formContractDetail=this._formBuilder.group({id:[null,J.y.required],contract:[null,J.y.required],price:[null,J.y.required],amount:[0,J.y.required],tax:[0,J.y.required],volume:[1,[J.y.required,J.y.min(1)]],currency:[null,J.y.required],payment_center:[null,J.y.required],pay_party:[null,J.y.required],info:[null],update_by:[this.authService.user,J.y.required]}),this.tagsArr=[{id:1,tag:"20DC",color:"#388E3C"},{id:2,tag:"40HC",color:"#F44336"},{id:3,tag:"Import",color:"#FF9800"},{id:4,tag:"Export",color:"#0091EA"},{id:5,tag:"Asia",color:"#9C27B0"},{id:6,tag:"Europe",color:"#9C27B0"},{id:7,tag:"America",color:"#9C27B0"},{id:8,tag:"Domestics",color:"#9C27B0"},{id:9,tag:"SEL",color:"#DE147B"}],this.label=t.label,this.id=t.id,"Add report"==this.label&&(this.form.controls.id.disable(),this.form.controls.supplier_id.setValue(t.id)),"Edit report"==this.label&&(this.report=JSON.parse(JSON.stringify(t.report)),this.form.patchValue(this.report)),this.name=this.authService.name,this.form.controls.update_by.setValue(this.authService.user),this.permission=t.permission,"Add/Removed tag"==this.label&&(this.tags=JSON.parse(JSON.stringify(this.tagsArr)),this.report=t.report,this.tags.map((e,t)=>{this.report.tag_data.find(t=>t.tag==e.tag)&&(e.check=1)})),"Add contract"==this.label&&(this.suppliers=t.suppliers,this.seaTerminal=t.seaTerminal,this.users=t.users,this.formContract.controls.id.disable(),this.id&&this.formContract.controls.supplier.setValue(t.id),this.formContract.controls.create_by.setValue(this.authService.user),this.name=this.authService.name),"Edit contract"==this.label&&(this.suppliers=t.suppliers,this.seaTerminal=t.seaTerminal,this.users=t.users,this.contract=JSON.parse(JSON.stringify(t.data)),this.contract.contract_from=new Date(this.contract.contract_from),this.contract.contract_to=new Date(this.contract.contract_to),this.formContract.controls.create_by.disable(),this.formContract.patchValue(this.contract),this.name=this.contract.create_by_name),"Add vendor"==this.label&&(this.suppliers=t.suppliers,this.users=t.users,this.formVendor.controls.id.disable(),this.id&&this.formVendor.controls.supplier.setValue(t.id),this.formVendor.controls.create_by.setValue(this.authService.user),this.name=this.authService.name),"Edit vendor"==this.label&&(this.suppliers=t.suppliers,this.users=t.users,this.vendor=JSON.parse(JSON.stringify(t.data)),this.vendor.vendor_from=new Date(this.vendor.vendor_from),this.vendor.vendor_to=new Date(this.vendor.vendor_to),this.formVendor.patchValue(this.vendor),this.name=this.vendor.create_by_name),"Add contract details"==this.label&&(this.suppliers=t.suppliers,this.price=t.price,this.currency=t.currency,this.country=t.country,this.formContractDetail.controls.id.disable(),this.formContractDetail.controls.contract.setValue(t.id)),"Edit contract details"==this.label&&(this.suppliers=t.suppliers,this.price=t.price,this.currency=t.currency,this.country=t.country,this.contractDetails=JSON.parse(JSON.stringify(t.data)),this.contractDetails.price=this.price.find(e=>e.id==this.contractDetails.price),this.formContractDetail.patchValue(this.contractDetails)),console.log(this.suppliers)}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.errorMessage=""}),this.filteredSupplier=this.formContract.controls.supplier.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"partner_name",this.suppliers):[])),this.filteredSeaterminal1=this.formContract.controls.load_terminal.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"name",this.seaTerminal):[])),this.filteredSeaterminal2=this.formContract.controls.discharge_terminal.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"name",this.seaTerminal):[])),this.filteredUser=this.formContract.controls.owner.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"name",this.users):[])),this.formContract.controls.info.valueChanges.subscribe(e=>{if(e)for(let t=0;t<e.length;t++)if(!new RegExp("[^'\"]").test(e.charAt(t))||"\t"==e.charAt(t)||"\r"==e.charAt(t)){this.formContract.get("info").setValue(e.replace(/["']/g,"").replace(/\t/g,"").replace(/\r/g,""));break}}),this.formContract.valueChanges.subscribe(e=>{this.errorMessage=""}),this.filteredSupplier2=this.formVendor.controls.supplier.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"partner_name",this.suppliers):[])),this.formVendor.controls.info.valueChanges.subscribe(e=>{if(e)for(let t=0;t<e.length;t++)if(!new RegExp("[^'\"]").test(e.charAt(t))||"\t"==e.charAt(t)||"\r"==e.charAt(t)){this.formVendor.get("info").setValue(e.replace(/["']/g,"").replace(/\t/g,"").replace(/\r/g,""));break}}),this.formVendor.valueChanges.subscribe(e=>{this.errorMessage=""}),this.filteredPrice=this.formContractDetail.controls.price.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.price_name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"price_name",this.price):[])),this.filteredCountry=this.formContractDetail.controls.payment_center.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"name",this.country):[])),this.filteredSupContractDetail=this.formContractDetail.controls.pay_party.valueChanges.pipe(Object(Se.a)(""),Object(ye.a)(e=>e?"string"==typeof e?e:e.partner_name:null),Object(ye.a)(e=>e?this.commonService.filterData(e,"partner_name",this.suppliers):[])),this.formContractDetail.controls.pay_party.valueChanges.subscribe(e=>{let t=this.suppliers.find(t=>t.id==e);t&&this.formContractDetail.controls.payment_center.setValue(t.country)}),this.formContractDetail.valueChanges.subscribe(e=>{this.errorMessage=""})}onReportFormSubmit(e){if(e.valid){let t=e.value;"Add report"==this.label?(t.create_by=this.authService.user,this.authService.onRequestChanged.next(!0),this.supplierDetailsService.createSupplierReport(t).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error create")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage="Error create"})):(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.updateSupplierReport(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error edit")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage="Error edit"}))}}onContractFormSubmit(e){if(e.valid){if("string"==typeof e.value.supplier)return void this.formContract.controls.supplier.setValue(null);if("string"==typeof e.value.load_terminal)return void this.formContract.controls.load_terminal.setValue(null);if("string"==typeof e.value.discharge_terminal)return void this.formContract.controls.discharge_terminal.setValue(null);let t=JSON.parse(JSON.stringify(e.value));t.contract_from=this.datePipe.transform(new Date(t.contract_from),"yyyy-MM-dd"),t.contract_to=this.datePipe.transform(new Date(t.contract_to),"yyyy-MM-dd"),"Add contract"==this.label?(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.createContract(t).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.matDialogRef.close(e):(console.log(e),this.errorMessage="Error create")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create"})):(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.updateContract(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?this.matDialogRef.close(e):(console.log(e),this.errorMessage="Error edit")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error edit"}))}}onVendorFormSubmit(e){if(e.valid){if("string"==typeof e.value.supplier)return void this.formVendor.controls.supplier.setValue(null);let t=JSON.parse(JSON.stringify(e.value));t.vendor_from=this.datePipe.transform(new Date(t.vendor_from),"yyyy-MM-dd"),t.vendor_to=this.datePipe.transform(new Date(t.vendor_to),"yyyy-MM-dd"),"Add vendor"==this.label?(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.createVendor(t).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.matDialogRef.close(e):(console.log(e),this.errorMessage="Error create")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error create"})):(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.updateVendor(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?this.matDialogRef.close(e):(console.log(e),this.errorMessage="Error edit")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage=e.error&&e.error.sqlMessage?e.error.sqlMessage:"Error edit"}))}}onContractDetailsFormSubmit(e){if(e.valid){if("string"==typeof e.value.price)return void this.form.controls.price.setValue(null);if("string"==typeof e.value.payment_center)return void this.form.controls.payment_center.setValue(null);if("string"==typeof e.value.pay_party)return void this.form.controls.pay_party.setValue(null);let t=JSON.parse(JSON.stringify(e.value));t.unit=t.price.unit,t.price=t.price.id,"Add contract details"==this.label?(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.createContractDetails(t).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error create")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage="Error create"})):(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.updateContractDetails(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(console.log(e),this.matDialogRef.close(e)):(console.error(e),this.errorMessage="Error edit contractDetail")}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),this.errorMessage="Error edit contractDetail"}))}}createCode(){let e=this.formContract.value,t=[],i="",r=this.seaTerminal.find(t=>t.id==e.load_terminal);r&&(i+=r.sea_code);let a=this.seaTerminal.find(t=>t.id==e.discharge_terminal);a&&(i+=a.sea_code),t.push(i);let o=this.datePipe.transform(e.contract_from,"ddMM"),n=this.datePipe.transform(e.contract_to,"ddMM"),s=this.datePipe.transform(e.contract_to,"yy");t.push(o+"-"+n+"-"+s);let c=this.suppliers.find(t=>t.id==e.supplier);t.push(c.short_name.replace(/\s/g,""));let l="";r&&(l+=r.code),a&&(l+="-"+a.code),t.push(l),this.formContract.controls.code.setValue(t.join(">"))}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(g.f),M.Rb(g.a),M.Rb(T.a),M.Rb(J.d),M.Rb(te.a),M.Rb(z),M.Rb(B.f))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-modal-dialog"]],decls:14,vars:6,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","supplier-details-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","supplier_id","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","60",1,"pr-8"],["inputCheck","","matInput","","formControlName","title","required",""],["appearance","outline","fxFlex","5","fxFlex.gt-xs","20",1,"pr-8"],["formControlName","status","required",""],[3,"value"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none",3,"readonly"],["inputCheck","","matInput","",3,"value","readonly"],["appearance","outline","fxFlex","100"],["textareaCheck","","matInput","","formControlName","content","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","10"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],["fxLayout","row wrap","fxLayoutAlign","center center"],["fxFlex","25","fxFlex.gt-xs","20","class","p-8",4,"ngFor","ngForOf"],["fxFlex","25","fxFlex.gt-xs","20",1,"p-8"],["fxLayout","row","fxLayoutAlign","star center"],[3,"checked","click","change"],[1,"pl-4","cursor-pointer",3,"click"],["fxLayout","column","fxLayoutAlign","start","name","formContract",3,"formGroup","keydown.enter","ngSubmit"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","code","required",""],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"matTooltip","click",4,"ngIf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","75",1,"pr-8"],["inputCheck","","matInput","","formControlName","supplier","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnCus","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","25",1,"pr-8"],["inputCheck","","matInput","","formControlName","load_terminal","required","",3,"matAutocomplete"],["autoOnPol","matAutocomplete"],["inputCheck","","matInput","","formControlName","discharge_terminal","required","",3,"matAutocomplete"],["autoOnPod","matAutocomplete"],["inputCheck","","matInput","","name","contract_from","formControlName","contract_from","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["fromDayPicker",""],["inputCheck","","matInput","","name","contract_to","formControlName","contract_to","required","",3,"matDatepicker","change"],["toDayPicker",""],["appearance","outline","fxFlex","50",1,"pr-8"],["inputCheck","","matInput","","formControlName","owner","required","",3,"matAutocomplete"],["autoOwner","matAutocomplete"],["formControlName","validity","required",""],["inputCheck","","matInput","",3,"readonly","value"],["inputCheck","","matInput","","formControlName","create_by",2,"display","none"],["appearance","outline","fxFlex","100",1,"pr-8"],["textareaCheck","","matInput","","formControlName","info","cdkTextareaAutosize","","cdkAutosizeMinRows","4","cdkAutosizeMaxRows","10"],["type","button","matSuffix","","mat-icon-button","","color","accent",3,"matTooltip","click"],["color","accent"],["fxLayout","column","fxLayoutAlign","start","name","formVendor",3,"formGroup","keydown.enter","ngSubmit"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","40",1,"pr-8"],["autoOnSup","matAutocomplete"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["formControlName","type","required",""],["inputCheck","","matInput","","name","vendor_from","formControlName","vendor_from","required","",3,"matDatepicker","change"],["inputCheck","","matInput","","name","vendor_to","formControlName","vendor_to","required","",3,"matDatepicker","change"],["fxLayout","column","fxLayoutAlign","start","name","formContractDetail",3,"formGroup","keydown.enter","ngSubmit"],["inputCheck","","formControlName","id","required",""],["inputCheck","","formControlName","contract","required",""],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","aria-label","price","matInput","","formControlName","price","required","",3,"matAutocomplete"],["autoPrice","matAutocomplete"],["style","font-size: 12px; overflow: visible; display: block;",3,"value",4,"ngFor","ngForOf"],["inputCheck","","matInput","","formControlName","volume","min","1","type","number","required",""],["inputCheck","","matInput","","formControlName","amount","type","number"],["formControlName","tax"],["formControlName","currency","required",""],["inputCheck","","aria-label","pay_party","matInput","","formControlName","pay_party","required","",3,"matAutocomplete"],["autoSupplier","matAutocomplete"],["inputCheck","","aria-label","price","matInput","","formControlName","payment_center","required","",3,"matAutocomplete"],["autoCountry","matAutocomplete"],["inputCheck","","matInput","","formControlName","info"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],[2,"font-size","12px","overflow","visible","display","block",3,"value"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"mat-toolbar",1),M.Xb(2,"mat-toolbar-row",2),M.Xb(3,"span",3),M.Lc(4),M.Wb(),M.Xb(5,"button",4),M.fc("click",(function(e){return t.matDialogRef.close()})),M.Xb(6,"mat-icon"),M.Lc(7,"close"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(8,"div",5),M.Jc(9,De,40,10,"div",6),M.Jc(10,we,3,1,"div",6),M.Jc(11,Be,90,40,"div",6),M.Jc(12,Ye,73,25,"div",6),M.Jc(13,ct,87,35,"div",6),M.Wb(),M.Wb()),2&e&&(M.Db(4),M.Mc(t.label),M.Db(5),M.pc("ngIf",t.label.includes("report")),M.Db(1),M.pc("ngIf",t.label.includes("tag")),M.Db(1),M.pc("ngIf","Add contract"==t.label||"Edit contract"==t.label),M.Db(1),M.pc("ngIf","Add vendor"==t.label||"Edit vendor"==t.label),M.Db(1),M.pc("ngIf","Add contract details"==t.label||"Edit contract details"==t.label))},directives:[v.a,v.c,N.b,N.d,N.c,c.b,b.a,g.d,U.a,B.t,J.A,J.q,J.h,J.b,J.p,J.g,J.w,p.c,p.f,d.b,m.a,C.n,We.b,p.b,B.s,x.a,n.c,n.a,s.b,s.d,p.h,s.a,u.a,J.u],pipes:[B.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.supplier-details-modal-dialog{width:100%}}@media screen and (min-width:960px){.supplier-details-modal-dialog{width:1080px}}.supplier-details-modal-dialog .mat-dialog-container{padding:0}.supplier-details-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.supplier-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.supplier-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();function pt(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"Memo"),M.Wb())}function bt(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"Request"),M.Wb())}function ut(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"Success"),M.Wb())}function dt(e,t){1&e&&(M.Xb(0,"span"),M.Lc(1,"Close"),M.Wb())}const ht=function(e){return{"background-color":e}};function mt(e,t){if(1&e&&(M.Xb(0,"div",20),M.Sb(1,"div",21),M.Xb(2,"div",22),M.Lc(3),M.Wb(),M.Wb()),2&e){const e=t.$implicit,i=t.index,r=M.jc(2);M.Db(1),M.pc("ngStyle",M.rc(2,ht,r.color[i%6])),M.Db(2),M.Mc(e)}}function ft(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",23),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.editReport(i)})),M.Lc(1,"edit"),M.Wb()}}function gt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",24),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.deleteReport(i)})),M.Lc(1,"delete"),M.Wb()}}function vt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"tr"),M.Xb(1,"td",8),M.Lc(2),M.Wb(),M.Xb(3,"td",9),M.Lc(4),M.Wb(),M.Xb(5,"td",10),M.Lc(6),M.Wb(),M.Xb(7,"td",11),M.Xb(8,"pre",12),M.Lc(9),M.Wb(),M.Wb(),M.Xb(10,"td",8),M.Xb(11,"span",13),M.Jc(12,pt,2,0,"span",14),M.Jc(13,bt,2,0,"span",14),M.Jc(14,ut,2,0,"span",14),M.Jc(15,dt,2,0,"span",14),M.Wb(),M.Wb(),M.Xb(16,"td",15),M.Lc(17),M.kc(18,"date"),M.Wb(),M.Xb(19,"td",15),M.Lc(20),M.kc(21,"date"),M.Wb(),M.Xb(22,"td"),M.Xb(23,"div",16),M.Jc(24,mt,4,4,"div",17),M.Wb(),M.Xb(25,"mat-icon",6),M.fc("click",(function(i){M.Bc(e);const r=t.$implicit;return M.jc().addTag(r)})),M.Lc(26,"add"),M.Wb(),M.Wb(),M.Xb(27,"td",5),M.Jc(28,ft,2,0,"mat-icon",18),M.Jc(29,gt,2,0,"mat-icon",19),M.Wb(),M.Wb()}if(2&e){const e=t.$implicit,i=t.index,r=M.jc();M.Db(2),M.Mc(i+1),M.Db(2),M.Mc(e.supplier_short_name),M.Db(2),M.Mc(e.title),M.Db(3),M.Mc(e.content),M.Db(2),M.pc("ngSwitch",e.status),M.Db(1),M.pc("ngSwitchCase","0"),M.Db(1),M.pc("ngSwitchCase","1"),M.Db(1),M.pc("ngSwitchCase","2"),M.Db(1),M.pc("ngSwitchCase","3"),M.Db(2),M.Mc(M.mc(18,14,e.update_at,"MM/dd/yyyy HH:mm")),M.Db(3),M.Mc(M.mc(21,17,e.create_at,"MM/dd/yyyy HH:mm")),M.Db(4),M.pc("ngForOf",e.tag),M.Db(4),M.pc("ngIf",r.permission.edit),M.Db(1),M.pc("ngIf",r.permission.delete)}}let xt=(()=>{class e{constructor(e,t,i,r,a,o){this.route=e,this.router=t,this._activatedRoute=i,this.authService=r,this.supplierDetailsService=a,this._matDialog=o,this.height=560,this.color=["#388E3C","#F44336","#FF9800","#0091EA","#9C27B0","#DE147B"],this._unsubscribeAll=new q.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.id=this.route.snapshot.params.id,this.supplierDetailsService.onSupplierChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.supplier=this.supplierDetailsService.supplier,this.report=this.supplierDetailsService.supplierReport}),this.supplierDetailsService.onDataChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.country=this.supplierDetailsService.country,this.suppliers=this.supplierDetailsService.suppliers,this.users=this.supplierDetailsService.users}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getSupplier(){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.getSupplierById(this.id).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}addTag(e){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Add/Removed tag",id:this.id,report:e}})}createReport(){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Add report",id:this.id}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}editReport(e){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Edit report",report:e,id:this.id}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}deleteReport(e){confirm("Do you want to delete this supplier report?")&&(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.deleteSupplierReport(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getSupplier(),alert("delete success")):(console.error(e),alert("delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")}))}createSupplierReport(e){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.createSupplierReport(e).then(e=>{this.authService.onRequestChanged.next(!1),this.getSupplier(),this.supplierDetailsService.onResetForm.next(!0)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("error")})}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(r.a),M.Rb(r.g),M.Rb(r.a),M.Rb(T.a),M.Rb(z),M.Rb(g.b))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-report"]],decls:30,vars:5,consts:[["fxLayout","column"],[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto"],[1,"simple","table-report"],[1,"sticky-right-col"],["color","accent",1,"cursor-pointer","pt-8",3,"click"],[4,"ngFor","ngForOf"],[1,"w-40"],[1,"w-100"],[1,"w-200"],[1,"w-260"],[2,"margin","0","font-family","arial","font-size","12px"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"w-120"],["fxFlexFill","","fxLayout","row wrap",1,"tags"],["class","tag","fxLayout","row","fxLayoutAlign","center center",4,"ngFor","ngForOf"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"tag"],[1,"tag-color",3,"ngStyle"],[1,"tag-label"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"h2",2),M.Xb(3,"span"),M.Lc(4,"Report"),M.Wb(),M.Wb(),M.Xb(5,"div",3),M.Xb(6,"table",4),M.Xb(7,"thead"),M.Xb(8,"tr"),M.Xb(9,"th"),M.Lc(10,"No"),M.Wb(),M.Xb(11,"th"),M.Lc(12,"Supplier"),M.Wb(),M.Xb(13,"th"),M.Lc(14,"Title"),M.Wb(),M.Xb(15,"th"),M.Lc(16,"Content"),M.Wb(),M.Xb(17,"th"),M.Lc(18,"Status"),M.Wb(),M.Xb(19,"th"),M.Lc(20,"Update at"),M.Wb(),M.Xb(21,"th"),M.Lc(22,"Create at"),M.Wb(),M.Xb(23,"th"),M.Lc(24,"Tags"),M.Wb(),M.Xb(25,"th",5),M.Xb(26,"mat-icon",6),M.fc("click",(function(e){return e.stopPropagation(),t.createReport()})),M.Lc(27,"add"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(28,"tbody"),M.Jc(29,vt,30,20,"tr",7),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Ic("height",t.height,"px"),M.Db(5),M.Ic("height",t.height-50,"px"),M.Db(24),M.pc("ngForOf",t.report))},directives:[N.d,N.c,b.a,B.s,B.x,B.y,N.e,B.t,B.w,Y.c],pipes:[B.f],styles:["supplier-details-report .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}supplier-details-report .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}supplier-details-report .group .table-report{font-size:12px}supplier-details-report .group .table-report td,supplier-details-report .group .table-report th{padding:8px;font-size:12px}supplier-details-report .group .table-report td .tags .tag,supplier-details-report .group .table-report th .tags .tag{cursor:pointer;background-color:rgba(0,0,0,.08);font-size:11px;border-radius:2px;margin:4px;padding:3px 8px}supplier-details-report .group .table-report td .tags .tag-color,supplier-details-report .group .table-report th .tags .tag-color{width:8px;height:8px;margin-right:8px;border-radius:50%}supplier-details-report .group .table-report thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}supplier-details-report .group .table-report tfoot td{font-weight:600}supplier-details-report .group .table-report .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}supplier-details-report .group .table-report .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}supplier-details-report .group .table-report .sticky-right-col{min-width:60px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}supplier-details-report .group .table-report tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}supplier-details-report .group .table-report tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:O.a}}),e})();function St(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",19),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.editContract(i)})),M.Lc(1,"edit"),M.Wb()}}function yt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",20),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.deleteContract(i)})),M.Lc(1,"delete"),M.Wb()}}function Wt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",19),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.createItem(i)})),M.Lc(1,"add"),M.Wb()}}function Xt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",19),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc(2);return t.stopPropagation(),r.updateItem(i)})),M.Lc(1,"edit"),M.Wb()}}function Dt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",20),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc(2);return t.stopPropagation(),r.deleteItem(i)})),M.Lc(1,"delete"),M.Wb()}}function Ct(e,t){if(1&e&&(M.Xb(0,"tr"),M.Xb(1,"td"),M.Lc(2),M.Wb(),M.Xb(3,"td"),M.Lc(4),M.Wb(),M.Xb(5,"td"),M.Lc(6),M.Wb(),M.Xb(7,"td"),M.Lc(8),M.Wb(),M.Xb(9,"td"),M.Lc(10),M.kc(11,"number"),M.Wb(),M.Xb(12,"td"),M.Lc(13),M.kc(14,"number"),M.Wb(),M.Xb(15,"td"),M.Lc(16),M.Wb(),M.Xb(17,"td"),M.Lc(18),M.Wb(),M.Xb(19,"td"),M.Lc(20),M.Wb(),M.Xb(21,"td"),M.Lc(22),M.Wb(),M.Xb(23,"td",5),M.Jc(24,Xt,2,0,"mat-icon",13),M.Jc(25,Dt,2,0,"mat-icon",14),M.Wb(),M.Wb()),2&e){const e=t.$implicit,i=t.index,r=M.jc(2);M.Db(2),M.Mc(i+1),M.Db(2),M.Mc(e.price_code),M.Db(2),M.Mc(e.unit_code),M.Db(2),M.Mc(e.volume),M.Db(2),M.Mc(M.mc(11,12,e.amount,"VND"==e.currency_code?"1.0-0":"1.2-2")),M.Db(3),M.Mc(M.mc(14,15,e.tax,"1.2-2")),M.Db(3),M.Mc(e.currency_code),M.Db(2),M.Mc(e.country_name),M.Db(2),M.Mc(e.partner_short_name),M.Db(2),M.Mc(e.info),M.Db(2),M.pc("ngIf",r.permission.edit),M.Db(1),M.pc("ngIf",r.permission.edit)}}function wt(e,t){if(1&e){const e=M.Yb();M.Vb(0),M.Xb(1,"tr",8),M.fc("click",(function(i){M.Bc(e);const r=t.index,a=M.xc(32),o=M.jc();return a.toggle(),o.selectItem=r})),M.Xb(2,"td",9),M.Lc(3),M.Wb(),M.Xb(4,"td"),M.Xb(5,"a",10),M.Lc(6),M.Wb(),M.Wb(),M.Xb(7,"td",11),M.Lc(8),M.Wb(),M.Xb(9,"td"),M.Lc(10),M.Wb(),M.Xb(11,"td"),M.Lc(12),M.Wb(),M.Xb(13,"td",12),M.Lc(14),M.Wb(),M.Xb(15,"td"),M.Lc(16),M.kc(17,"date"),M.Wb(),M.Xb(18,"td"),M.Lc(19),M.kc(20,"date"),M.Wb(),M.Xb(21,"td"),M.Lc(22),M.Wb(),M.Xb(23,"td"),M.Lc(24),M.Wb(),M.Xb(25,"td",5),M.Jc(26,St,2,0,"mat-icon",13),M.Jc(27,yt,2,0,"mat-icon",14),M.Wb(),M.Wb(),M.Xb(28,"tr"),M.Sb(29,"td",15),M.Xb(30,"td",15),M.Xb(31,"mat-expansion-panel",16,17),M.Xb(33,"table",18),M.Xb(34,"thead"),M.Xb(35,"tr"),M.Xb(36,"th"),M.Lc(37,"No"),M.Wb(),M.Xb(38,"th"),M.Lc(39,"Price"),M.Wb(),M.Xb(40,"th"),M.Lc(41,"Unit"),M.Wb(),M.Xb(42,"th"),M.Lc(43,"Volume"),M.Wb(),M.Xb(44,"th"),M.Lc(45,"Amount"),M.Wb(),M.Xb(46,"th"),M.Lc(47,"Tax(%)"),M.Wb(),M.Xb(48,"th"),M.Lc(49,"Currency"),M.Wb(),M.Xb(50,"th"),M.Lc(51,"Payment_center"),M.Wb(),M.Xb(52,"th"),M.Lc(53,"Pay party"),M.Wb(),M.Xb(54,"th"),M.Lc(55,"Info"),M.Wb(),M.Xb(56,"th",5),M.Jc(57,Wt,2,0,"mat-icon",13),M.Wb(),M.Wb(),M.Wb(),M.Xb(58,"tbody"),M.Jc(59,Ct,26,18,"tr",7),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Ub()}if(2&e){const e=t.$implicit,i=t.index,r=M.jc();M.Db(3),M.Mc(i+1),M.Db(2),M.pc("routerLink","/apps/supplier/supplier-contract/supplier-contract-details/"+e.id),M.Db(1),M.Mc(e.code),M.Db(1),M.pc("matTooltip",e.supplier_full_name)("matTooltipPosition","left"),M.Db(1),M.Mc(e.supplier_short_name),M.Db(2),M.Mc(e.load_terminal_name),M.Db(2),M.Mc(e.discharge_terminal_name),M.Db(2),M.Mc(e.info),M.Db(2),M.Mc(M.mc(17,19,e.contract_from,"MM/dd/yyyy")),M.Db(3),M.Mc(M.mc(20,22,e.contract_to,"MM/dd/yyyy")),M.Db(3),M.Mc(1==e.validity?"Valid":"Invalid"),M.Db(2),M.Mc(e.owner_name),M.Db(2),M.pc("ngIf",r.permission.edit),M.Db(1),M.pc("ngIf",r.permission.delete),M.Db(3),M.Eb("colspan",10),M.Db(1),M.pc("expanded",r.selectItem==i),M.Db(26),M.pc("ngIf",r.permission.create),M.Db(2),M.pc("ngForOf",e.detail)}}let kt=(()=>{class e{constructor(e,t,i,r,a,o){this.route=e,this.router=t,this._activatedRoute=i,this.authService=r,this.supplierDetailsService=a,this._matDialog=o,this.height=560,this._unsubscribeAll=new q.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.supplierDetailsService.onSupplierChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.supplier=this.supplierDetailsService.supplier,this.contract=this.supplierDetailsService.supplierContract,this.id=this.supplier.id}),this.supplierDetailsService.onContractDataChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.suppliers=this.supplierDetailsService.suppliers,this.seaTerminal=this.supplierDetailsService.seaTerminal,this.users=this.supplierDetailsService.users,this.unit=this.supplierDetailsService.unit,this.price=this.supplierDetailsService.price,this.currency=this.supplierDetailsService.currency,this.country=this.supplierDetailsService.country}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getSupplier(){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.getSupplierById(this.id).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}createContract(){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Add contract",id:this.id,suppliers:this.suppliers,seaTerminal:this.seaTerminal,users:this.users}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.router.navigate(["/apps/supplier/supplier-contract/supplier-contract-details/"+e.insertId])})}editContract(e){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Edit contract",data:e,id:this.id,suppliers:this.suppliers,seaTerminal:this.seaTerminal,users:this.users}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}deleteContract(e){confirm("Do you want to delete this supplier contract?")&&(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.deleteContract(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getSupplier(),alert("delete success")):(console.error(e),alert("delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")}))}updateItem(e){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Edit contract details",data:e,contract:this.contract,id:this.id,suppliers:this.suppliers,users:this.users,price:this.price,currency:this.currency,country:this.country}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}deleteItem(e){confirm("Do you want to delete this contractDetails?")&&(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.deleteContractDetails(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getSupplier(),alert("delete success")):(console.error(e),alert("delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")}))}createItem(e){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Add contract details",contract:this.contract,id:this.id,suppliers:this.suppliers,users:this.users,price:this.price,currency:this.currency,country:this.country}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(r.a),M.Rb(r.g),M.Rb(r.a),M.Rb(T.a),M.Rb(z),M.Rb(g.b))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-contract"]],decls:35,vars:5,consts:[["fxLayout","column"],[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto"],[1,"simple","table-contract"],[1,"sticky-right-col"],["color","accent",1,"cursor-pointer","pt-8",3,"click"],[4,"ngFor","ngForOf"],[3,"click"],[1,"text-center"],[3,"routerLink"],[3,"matTooltip","matTooltipPosition"],[1,"w-260"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[2,"padding","0"],[1,"item",3,"expanded"],["itemPanel",""],[1,"table-contract-detail","simple"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"h2",2),M.Xb(3,"span"),M.Lc(4,"Contract"),M.Wb(),M.Wb(),M.Xb(5,"div",3),M.Xb(6,"mat-accordion"),M.Xb(7,"table",4),M.Xb(8,"thead"),M.Xb(9,"tr"),M.Xb(10,"th"),M.Lc(11,"No"),M.Wb(),M.Xb(12,"th"),M.Lc(13,"Code"),M.Wb(),M.Xb(14,"th"),M.Lc(15,"Supplier"),M.Wb(),M.Xb(16,"th"),M.Lc(17,"Load Terminal"),M.Wb(),M.Xb(18,"th"),M.Lc(19,"Discharge Terminal"),M.Wb(),M.Xb(20,"th"),M.Lc(21,"Info"),M.Wb(),M.Xb(22,"th"),M.Lc(23,"Contract from"),M.Wb(),M.Xb(24,"th"),M.Lc(25,"Contract to"),M.Wb(),M.Xb(26,"th"),M.Lc(27,"Validity"),M.Wb(),M.Xb(28,"th"),M.Lc(29,"Owner"),M.Wb(),M.Xb(30,"th",5),M.Xb(31,"mat-icon",6),M.fc("click",(function(e){return e.stopPropagation(),t.createContract()})),M.Lc(32,"add"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(33,"tbody"),M.Jc(34,wt,60,25,"ng-container",7),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Ic("height",t.height,"px"),M.Db(5),M.Ic("height",t.height-50,"px"),M.Db(29),M.pc("ngForOf",t.contract))},directives:[N.d,N.c,l.a,b.a,B.s,r.j,u.a,B.t,l.c],pipes:[B.f,B.g],styles:["supplier-details-contract .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}supplier-details-contract .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}supplier-details-contract .group .table-contract{font-size:12px}supplier-details-contract .group .table-contract td,supplier-details-contract .group .table-contract th{padding:8px;font-size:12px}supplier-details-contract .group .table-contract td .tags .tag,supplier-details-contract .group .table-contract th .tags .tag{cursor:pointer;background-color:rgba(0,0,0,.08);font-size:11px;border-radius:2px;margin:4px;padding:3px 8px}supplier-details-contract .group .table-contract td .tags .tag-color,supplier-details-contract .group .table-contract th .tags .tag-color{width:8px;height:8px;margin-right:8px;border-radius:50%}supplier-details-contract .group .table-contract thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}supplier-details-contract .group .table-contract tfoot td{font-weight:600}supplier-details-contract .group .table-contract .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}supplier-details-contract .group .table-contract .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}supplier-details-contract .group .table-contract .sticky-right-col{min-width:60px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}supplier-details-contract .group .table-contract tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}supplier-details-contract .group .table-contract tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}supplier-details-contract .group .mat-expansion-panel-body{padding:0!important}supplier-details-contract .group .table-contract-detail{font-size:12px!important}supplier-details-contract .group .table-contract-detail td,supplier-details-contract .group .table-contract-detail th{padding:8px!important;background:#b3e5fc;white-space:nowrap;z-index:0}"],encapsulation:2,data:{animation:O.a}}),e})();function Lt(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",16),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.editVendor(i)})),M.Lc(1,"edit"),M.Wb()}}function _t(e,t){if(1&e){const e=M.Yb();M.Xb(0,"mat-icon",17),M.fc("click",(function(t){M.Bc(e);const i=M.jc().$implicit,r=M.jc();return t.stopPropagation(),r.deleteVendor(i)})),M.Lc(1,"delete"),M.Wb()}}function Rt(e,t){if(1&e&&(M.Xb(0,"tr"),M.Xb(1,"td",8),M.Lc(2),M.Wb(),M.Xb(3,"td"),M.Xb(4,"a",9),M.Lc(5),M.Wb(),M.Wb(),M.Xb(6,"td",10),M.Lc(7),M.Wb(),M.Xb(8,"td",11),M.Lc(9),M.kc(10,"date"),M.Wb(),M.Xb(11,"td",11),M.Lc(12),M.kc(13,"date"),M.Wb(),M.Xb(14,"td",12),M.Lc(15),M.Wb(),M.Xb(16,"td",13),M.Lc(17),M.Wb(),M.Xb(18,"td"),M.Lc(19),M.Wb(),M.Xb(20,"td",5),M.Jc(21,Lt,2,0,"mat-icon",14),M.Jc(22,_t,2,0,"mat-icon",15),M.Wb(),M.Wb()),2&e){const e=t.$implicit,i=t.index,r=M.jc();M.Db(2),M.Mc(i+1),M.Db(2),M.pc("routerLink","/apps/supplier/supplier-vendor/supplier-vendor-details/"+e.id),M.Db(1),M.Mc(e.code),M.Db(1),M.pc("matTooltip",e.supplier_full_name)("matTooltipPosition","left"),M.Db(1),M.Mc(e.supplier_short_name),M.Db(2),M.Mc(M.mc(10,14,e.vendor_from,"MM/dd/yyyy")),M.Db(3),M.Mc(M.mc(13,17,e.vendor_to,"MM/dd/yyyy")),M.Db(3),M.Oc("",1==e.validity?"Valid":"Invalid","1",e.validity,""),M.Db(2),M.Mc(e.info),M.Db(2),M.Mc(e.update_by_name),M.Db(2),M.pc("ngIf",r.permission.edit),M.Db(1),M.pc("ngIf",r.permission.delete)}}let At=(()=>{class e{constructor(e,t,i,r,a,o){this.route=e,this.router=t,this._activatedRoute=i,this.authService=r,this.supplierDetailsService=a,this._matDialog=o,this.height=560,this._unsubscribeAll=new q.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.supplierDetailsService.onSupplierChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.supplier=this.supplierDetailsService.supplier,this.vendor=this.supplierDetailsService.supplierVendor,this.id=this.supplier.id}),this.supplierDetailsService.onContractDataChanged.pipe(Object(I.a)(this._unsubscribeAll)).subscribe(e=>{this.suppliers=this.supplierDetailsService.suppliers,this.users=this.supplierDetailsService.users}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getSupplier(){this.authService.onRequestChanged.next(!0),this.supplierDetailsService.getSupplierById(this.id).then(e=>{this.authService.onRequestChanged.next(!1)}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}createVendor(){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Add vendor",id:this.id,suppliers:this.suppliers,users:this.users}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.router.navigate(["/apps/supplier/supplier-vendor/supplier-vendor-details/"+e.insertId])})}editVendor(e){this.dialogRef=this._matDialog.open(lt,{panelClass:"supplier-details-modal-dialog",data:{label:"Edit vendor",data:e,id:this.id,suppliers:this.suppliers,users:this.users}}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getSupplier()})}deleteVendor(e){confirm("Do you want to delete this supplier vendor?")&&(this.authService.onRequestChanged.next(!0),this.supplierDetailsService.deleteVendor(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getSupplier(),alert("delete success")):(console.error(e),alert("delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")}))}}return e.\u0275fac=function(t){return new(t||e)(M.Rb(r.a),M.Rb(r.g),M.Rb(r.a),M.Rb(T.a),M.Rb(z),M.Rb(g.b))},e.\u0275cmp=M.Lb({type:e,selectors:[["supplier-details-vendor"]],decls:30,vars:5,consts:[["fxLayout","column"],[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto"],[1,"simple","table-vendor"],[1,"sticky-right-col"],["color","accent",1,"cursor-pointer","pt-8",3,"click"],[4,"ngFor","ngForOf"],[1,"w-40"],[3,"routerLink"],[3,"matTooltip","matTooltipPosition"],[1,"w-80"],[1,"w-60"],[1,"w-400"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(M.Xb(0,"div",0),M.Xb(1,"div",1),M.Xb(2,"h2",2),M.Xb(3,"span"),M.Lc(4,"Vendor"),M.Wb(),M.Wb(),M.Xb(5,"div",3),M.Xb(6,"table",4),M.Xb(7,"thead"),M.Xb(8,"tr"),M.Xb(9,"th"),M.Lc(10,"No"),M.Wb(),M.Xb(11,"th"),M.Lc(12,"Code"),M.Wb(),M.Xb(13,"th"),M.Lc(14,"Supplier"),M.Wb(),M.Xb(15,"th"),M.Lc(16,"Time from"),M.Wb(),M.Xb(17,"th"),M.Lc(18,"Time to"),M.Wb(),M.Xb(19,"th"),M.Lc(20,"Valididty"),M.Wb(),M.Xb(21,"th"),M.Lc(22,"Info"),M.Wb(),M.Xb(23,"th"),M.Lc(24,"Update by"),M.Wb(),M.Xb(25,"th",5),M.Xb(26,"mat-icon",6),M.fc("click",(function(e){return e.stopPropagation(),t.createVendor()})),M.Lc(27,"add"),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Xb(28,"tbody"),M.Jc(29,Rt,23,20,"tr",7),M.Wb(),M.Wb(),M.Wb(),M.Wb(),M.Wb()),2&e&&(M.Ic("height",t.height,"px"),M.Db(5),M.Ic("height",t.height-50,"px"),M.Db(24),M.pc("ngForOf",t.vendor))},directives:[N.d,N.c,b.a,B.s,r.j,u.a,B.t],pipes:[B.f],styles:["supplier-details-vendor .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}supplier-details-vendor .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}supplier-details-vendor .group .table-vendor{font-size:12px}supplier-details-vendor .group .table-vendor td,supplier-details-vendor .group .table-vendor th{padding:8px;font-size:12px}supplier-details-vendor .group .table-vendor td .tags .tag,supplier-details-vendor .group .table-vendor th .tags .tag{cursor:pointer;background-color:rgba(0,0,0,.08);font-size:11px;border-radius:2px;margin:4px;padding:3px 8px}supplier-details-vendor .group .table-vendor td .tags .tag-color,supplier-details-vendor .group .table-vendor th .tags .tag-color{width:8px;height:8px;margin-right:8px;border-radius:50%}supplier-details-vendor .group .table-vendor thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}supplier-details-vendor .group .table-vendor tfoot td{font-weight:600}supplier-details-vendor .group .table-vendor .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}supplier-details-vendor .group .table-vendor .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}supplier-details-vendor .group .table-vendor .sticky-right-col{min-width:60px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}supplier-details-vendor .group .table-vendor tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}supplier-details-vendor .group .table-vendor tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:O.a}}),e})();var qt=i("vxfF"),It=i("cfqv");i.d(t,"SupplierDetailsModule",(function(){return Mt}));const Ot=[{path:":id",component:ne,resolve:{data:z},children:[{path:"about",component:xe},{path:"report",component:xt},{path:"contract",component:kt},{path:"vendor",component:At}]}];let Mt=(()=>{class e{}return e.\u0275mod=M.Pb({type:e}),e.\u0275inj=M.Ob({factory:function(t){return new(t||e)},providers:[z],imports:[[r.k.forChild(Ot),o.b,a.a,n.b,s.c,c.c,l.b,p.e,b.b,u.b,d.c,h.c,m.b,f.c,g.e,v.b,x.b,S.b,y.d,W.e,X.b,D.b,w.b,k.k,L.c,C.t,_.a,R.a,A.f,qt.g,It.b]]}),e})()},IOBc:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var r=i("5HBU"),a=i("bTqV"),o=i("kmnG"),n=i("NFeN"),s=i("qFsG"),c=i("wZkO"),l=i("/t3+"),p=i("bSwM"),b=i("+0xr"),u=i("FKr1"),d=i("MutI"),h=i("fXoL");let m=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},imports:[[r.a,a.c,o.e,n.b,s.c,c.c,l.b,p.b,u.t,d.c,b.k]]}),e})()},cfqv:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return b}));var r=i("8LU1"),a=i("vxfF"),o=i("fXoL"),n=i("HDdC");class s{constructor(e=50){this._totalWeight=0,this._defaultItemSize=e,this._averageItemSize=e}getAverageItemSize(){return this._averageItemSize}addSample(e,t){const i=this._totalWeight+e.end-e.start;if(i){const e=(t+this._averageItemSize*this._totalWeight)/i;e&&(this._averageItemSize=e,this._totalWeight=i)}}reset(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}class c{constructor(e,t,i=new s){this.scrolledIndexChange=new n.a(()=>{throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")}),this._viewport=null,this._removalFailures=0,this._minBufferPx=e,this._maxBufferPx=t,this._averager=i}attach(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}detach(){this._viewport=null}onContentScrolled(){this._viewport&&this._updateRenderedContentAfterScroll()}onDataLengthChanged(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}onContentRendered(){this._viewport&&this._checkRenderedContentSize()}onRenderedOffsetChanged(){this._viewport&&this._checkRenderedContentOffset()}scrollToIndex(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}updateBufferSize(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}_updateRenderedContentAfterScroll(){const e=this._viewport,t=e.measureScrollOffset();let i=t-this._lastScrollOffset,r=Math.abs(i);const a=e.getRenderedRange();let o=0;if(i<0){const e=a.start*this._averager.getAverageItemSize();o=Math.round((e-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,r/(t+r)))),i-=o,r=Math.abs(i)}const n=this._lastScrollOffset-this._lastRenderedContentOffset,s=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),c=r+this._minBufferPx-(i<0?n:s);if(c>0)if(r>=e.getViewportSize())this._renderContentForCurrentOffset();else{const t=Math.max(0,Math.ceil((c-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),l=(i<0?s:n)-this._minBufferPx+r,p=Math.floor(l/this._averager.getAverageItemSize()/(this._removalFailures+1)),b=Math.min(a.end-a.start,Math.max(0,p)),u=this._expandRange(a,i<0?t:0,i>0?t:0);let d,h;if(i<0?u.end=Math.max(u.start+1,u.end-b):u.start=Math.min(u.end-1,u.start+b),i<0){let t=e.measureRangeSize({start:u.end,end:a.end});t<=l?(d=this._lastRenderedContentOffset+this._lastRenderedContentSize-t,this._removalFailures=0):(u.end=a.end,d=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),h="to-end"}else{const t=e.measureRangeSize({start:a.start,end:u.start});t<=l?(d=this._lastRenderedContentOffset+t,this._removalFailures=0):(u.start=a.start,d=this._lastRenderedContentOffset,this._removalFailures++),h="to-start"}e.setRenderedRange(u),e.setRenderedContentOffset(d+o,h)}else o&&e.setRenderedContentOffset(this._lastRenderedContentOffset+o);this._lastScrollOffset=t}_checkRenderedContentSize(){const e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}_checkRenderedContentOffset(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}_renderContentForCurrentOffset(){const e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;const i=this._averager.getAverageItemSize(),r=Math.min(e.getDataLength()-1,Math.floor(t/i)),a=Math.ceil(this._maxBufferPx/i),o=this._expandRange(this._getVisibleRangeForIndex(r),a,a);e.setRenderedRange(o),e.setRenderedContentOffset(i*o.start)}_getVisibleRangeForIndex(e){const t=this._viewport,i={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},r=i.end-t.getDataLength();return r>0&&(i.start=Math.max(0,i.start-r)),i}_expandRange(e,t,i){const r=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(r.getDataLength(),e.end+i)}}_updateTotalContentSize(e){const t=this._viewport,i=t.getRenderedRange(),r=e+(t.getDataLength()-(i.end-i.start))*this._averager.getAverageItemSize();t.setTotalContentSize(r)}}function l(e){return e._scrollStrategy}let p=(()=>{class e{constructor(){this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new c(this.minBufferPx,this.maxBufferPx)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Object(r.f)(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Object(r.f)(e)}ngOnChanges(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[o.Cb([{provide:a.h,useFactory:l,deps:[Object(o.V)(()=>e)]}]),o.Bb()]}),e})(),b=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)}}),e})()}}]);