function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],r=!0,a=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(l){a=!0,n=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw n}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{HP7x:function(e,t,i){"use strict";i.r(t);var r,a=i("tyNb"),n=i("5HBU"),o=i("STbY"),s=i("/1cH"),l=i("iadO"),c=i("bTqV"),u=i("7EHt"),b=i("kmnG"),d=i("NFeN"),p=i("Qu3c"),f=i("qFsG"),m=i("wZkO"),h=i("d3UM"),v=i("QibW"),g=i("0IaG"),y=i("/t3+"),x=i("bSwM"),k=i("M9IT"),w=i("xHqg"),_=i("A5z7"),S=i("bv9b"),C=i("XhcP"),W=i("FKr1"),X=i("1jcm"),D=i("+0xr"),I=i("Dh3D"),L=i("IOBc"),O=i("212X"),A=i("LPQX"),R=i("XNiG"),P=i("1G5W"),V=i("PVWW"),q=i("3Pt+"),F=i("JX91"),j=i("lJxs"),z=i("fXoL"),B=i("qXBG"),M=i("0Zc1"),T=i("2Vo4"),N=i("tk/3"),E=((r=function(){function e(t,i){_classCallCheck(this,e),this._httpClient=t,this.authService=i,this.onDataChanged=new T.a([]),this.onVesselChanged=new T.a([]),this.onResetForm=new T.a(!1)}return _createClass(e,[{key:"resolve",value:function(e){var t=this;this.authService.routerData=e;var i=e.params.id;return new Promise((function(e,r){Promise.all([t.getVesselById(i),t.getData()]).then((function(t){_slicedToArray(t,1)[0],e()}),r)}))}},{key:"getData",value:function(){var e=this,t={headers:new N.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(i,r){e._httpClient.get(e.authService.apiUrl+"/sel/vessel/data",t).subscribe((function(t){e.supplier=t[0],e.users=t[1],e.country=t[2],e.seaport=t[3],e.seaTerminal=t[4],e.onDataChanged.next(t),i(t)}),r)}))}},{key:"getVesselById",value:function(e){var t=this,i={headers:new N.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.get(t.authService.apiUrl+"/sel/vessel/id/"+e,i).subscribe((function(e){t.vessel=e[0][0],t.voyage=e[1],t.onVesselChanged.next(e),r(e)}),a)}))}},{key:"updateVessel",value:function(e){var t=this,i={headers:new N.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.put(t.authService.apiUrl+"/sel/vessel",e,i).subscribe((function(e){r(e)}),a)}))}},{key:"createVoyage",value:function(e){var t=this,i={headers:new N.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.post(t.authService.apiUrl+"/sel/vessel/voyage",e,i).subscribe((function(e){r(e)}),a)}))}},{key:"updateVoyage",value:function(e){var t=this,i={headers:new N.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.put(t.authService.apiUrl+"/sel/vessel/voyage",e,i).subscribe((function(e){r(e)}),a)}))}},{key:"deleteVoyage",value:function(e){var t=this,i={headers:new N.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((function(r,a){t._httpClient.delete(t.authService.apiUrl+"/sel/vessel/voyage/"+e,i).subscribe((function(e){r(e)}),a)}))}}]),e}()).\u0275fac=function(e){return new(e||r)(z.bc(N.a),z.bc(B.a))},r.\u0275prov=z.Nb({token:r,factory:r.\u0275fac}),r),H=i("ofXK"),J=i("XiUz"),G=i("EwFO");function U(e,t){if(1&e&&(z.Xb(0,"mat-option",45),z.Lc(1),z.Wb()),2&e){var i=t.$implicit;z.pc("value",i.id),z.Db(1),z.Nc(" ",i.full_name," ")}}function Y(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Supplier is required "),z.Wb())}function $(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Name is required "),z.Wb())}function Q(e,t){if(1&e&&(z.Xb(0,"mat-option",45),z.Lc(1),z.Wb()),2&e){var i=t.$implicit;z.pc("value",i.id),z.Db(1),z.Nc(" ",i.name," ")}}function K(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Load port is required "),z.Wb())}function Z(e,t){if(1&e&&(z.Xb(0,"mat-option",45),z.Lc(1),z.Wb()),2&e){var i=t.$implicit;z.pc("value",i.id),z.Db(1),z.Nc(" ",i.name," ")}}function ee(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Load terminal is required "),z.Wb())}function te(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Depart day is required "),z.Wb())}function ie(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Date is too early! "),z.Wb())}function re(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Depart time is required "),z.Wb())}function ae(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Closing time is required "),z.Wb())}function ne(e,t){if(1&e&&(z.Xb(0,"mat-option",45),z.Lc(1),z.Wb()),2&e){var i=t.$implicit;z.pc("value",i.id),z.Db(1),z.Nc(" ",i.name," ")}}function oe(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Discharge port is required "),z.Wb())}function se(e,t){if(1&e&&(z.Xb(0,"mat-option",45),z.Lc(1),z.Wb()),2&e){var i=t.$implicit;z.pc("value",i.id),z.Db(1),z.Nc(" ",i.name," ")}}function le(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Discharge terminal is required "),z.Wb())}function ce(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Arrive day is required "),z.Wb())}function ue(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Date is too early! "),z.Wb())}function be(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Arrive time is required "),z.Wb())}function de(e,t){if(1&e){var i=z.Yb();z.Xb(0,"div"),z.Xb(1,"form",7),z.fc("keydown.enter",(function(e){return z.Bc(i),"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){z.Bc(i);var t=z.jc();return t.onVoyageFormSubmit(t.formVoyage)})),z.Xb(2,"div",8),z.Sb(3,"input",9),z.Sb(4,"input",10),z.Wb(),z.Xb(5,"div",11),z.Xb(6,"mat-form-field",12),z.Xb(7,"mat-label"),z.Lc(8,"Supplier"),z.Wb(),z.Sb(9,"input",13),z.Xb(10,"mat-autocomplete",14,15),z.Jc(12,U,2,2,"mat-option",16),z.kc(13,"async"),z.Wb(),z.Jc(14,Y,2,0,"mat-error",6),z.Wb(),z.Xb(15,"mat-form-field",17),z.Xb(16,"mat-label"),z.Lc(17,"Voyage"),z.Wb(),z.Sb(18,"input",18),z.Jc(19,$,2,0,"mat-error",6),z.Wb(),z.Xb(20,"mat-form-field",19),z.Xb(21,"mat-label"),z.Lc(22,"Load port"),z.Wb(),z.Sb(23,"input",20),z.Xb(24,"mat-autocomplete",14,21),z.Jc(26,Q,2,2,"mat-option",16),z.kc(27,"async"),z.Wb(),z.Jc(28,K,2,0,"mat-error",6),z.Wb(),z.Xb(29,"mat-form-field",19),z.Xb(30,"mat-label"),z.Lc(31,"Load terminal"),z.Wb(),z.Xb(32,"mat-select",22),z.Jc(33,Z,2,2,"mat-option",16),z.Wb(),z.Jc(34,ee,2,0,"mat-error",6),z.Wb(),z.Xb(35,"mat-form-field",23),z.Xb(36,"mat-label"),z.Lc(37,"Depart day"),z.Wb(),z.Xb(38,"input",24),z.fc("change",(function(e){return z.Bc(i),z.jc().commonService.setDateStr(e)})),z.Wb(),z.Sb(39,"mat-datepicker-toggle",25),z.Sb(40,"mat-datepicker",null,26),z.Jc(42,te,2,0,"mat-error",6),z.Jc(43,ie,2,0,"mat-error",6),z.Wb(),z.Xb(44,"mat-form-field",23),z.Xb(45,"mat-label"),z.Lc(46,"Depart time"),z.Wb(),z.Sb(47,"input",27),z.Jc(48,re,2,0,"mat-error",6),z.Wb(),z.Xb(49,"mat-form-field",28),z.Xb(50,"mat-label"),z.Lc(51,"Closing time(hours)"),z.Wb(),z.Sb(52,"input",29),z.Xb(53,"span",30),z.Lc(54),z.kc(55,"date"),z.Wb(),z.Jc(56,ae,2,0,"mat-error",6),z.Wb(),z.Xb(57,"mat-form-field",19),z.Xb(58,"mat-label"),z.Lc(59,"Discharge port"),z.Wb(),z.Sb(60,"input",31),z.Xb(61,"mat-autocomplete",14,32),z.Jc(63,ne,2,2,"mat-option",16),z.kc(64,"async"),z.Wb(),z.Jc(65,oe,2,0,"mat-error",6),z.Wb(),z.Xb(66,"mat-form-field",19),z.Xb(67,"mat-label"),z.Lc(68,"Discharge terminal"),z.Wb(),z.Xb(69,"mat-select",33),z.Jc(70,se,2,2,"mat-option",16),z.Wb(),z.Jc(71,le,2,0,"mat-error",6),z.Wb(),z.Xb(72,"mat-form-field",23),z.Xb(73,"mat-label"),z.Lc(74,"Arrive day"),z.Wb(),z.Xb(75,"input",34),z.fc("change",(function(e){return z.Bc(i),z.jc().commonService.setDateStr(e)})),z.Wb(),z.Sb(76,"mat-datepicker-toggle",25),z.Sb(77,"mat-datepicker",null,35),z.Jc(79,ce,2,0,"mat-error",6),z.Jc(80,ue,2,0,"mat-error",6),z.Wb(),z.Xb(81,"mat-form-field",23),z.Xb(82,"mat-label"),z.Lc(83,"Arrive time"),z.Wb(),z.Sb(84,"input",36),z.Jc(85,be,2,0,"mat-error",6),z.Wb(),z.Xb(86,"mat-form-field",28),z.Xb(87,"mat-label"),z.Lc(88,"Update by"),z.Wb(),z.Sb(89,"input",37),z.Wb(),z.Xb(90,"mat-form-field",38),z.Xb(91,"mat-label"),z.Lc(92,"Info"),z.Wb(),z.Sb(93,"input",39),z.Wb(),z.Wb(),z.Xb(94,"div",40),z.Xb(95,"div",41),z.Lc(96),z.Wb(),z.Wb(),z.Xb(97,"div",42),z.Xb(98,"button",43),z.Lc(99,"Submit"),z.Wb(),z.Xb(100,"button",44),z.fc("click",(function(e){return z.Bc(i),z.jc().matDialogRef.close()})),z.Lc(101,"Cancel"),z.Wb(),z.Wb(),z.Wb(),z.Wb()}if(2&e){var r=z.xc(11),a=z.xc(25),n=z.xc(41),o=z.xc(62),s=z.xc(78),l=z.jc();z.Db(1),z.pc("formGroup",l.formVoyage),z.Db(8),z.pc("matAutocomplete",r),z.Db(1),z.pc("displayWith",l.commonService.displayFn.bind(l,"full_name",l.supplier)),z.Db(2),z.pc("ngForOf",z.lc(13,35,l.filteredSupplier)),z.Db(2),z.pc("ngIf",l.formVoyage.get("supplier_id").hasError("required")),z.Db(5),z.pc("ngIf",l.formVoyage.get("name").hasError("required")),z.Db(4),z.pc("matAutocomplete",a),z.Db(1),z.pc("displayWith",l.commonService.displayFn.bind(l,"name",l.seaport)),z.Db(2),z.pc("ngForOf",z.lc(27,37,l.filteredSeaport1)),z.Db(2),z.pc("ngIf",l.formVoyage.get("load_port").hasError("required")),z.Db(4),z.pc("disabled",null==l.formVoyage.controls.load_port.value),z.Db(1),z.pc("ngForOf",l.filterLoadTerminal),z.Db(1),z.pc("ngIf",l.formVoyage.get("load_terminal").hasError("required")),z.Db(4),z.pc("matDatepicker",n),z.Db(1),z.pc("for",n),z.Db(3),z.pc("ngIf",l.formVoyage.get("depart_day").hasError("required")),z.Db(1),z.pc("ngIf",!l.formVoyage.get("depart_day").hasError("required")&&"INVALID"==l.formVoyage.get("depart_day").status),z.Db(5),z.pc("ngIf",l.formVoyage.get("depart_time").hasError("required")),z.Db(6),z.Nc("\xa0\xa0",z.mc(55,39,l.time,"MM/dd/yyyy HH:mm"),""),z.Db(2),z.pc("ngIf",l.formVoyage.get("closing_time").hasError("required")),z.Db(4),z.pc("matAutocomplete",o),z.Db(1),z.pc("displayWith",l.commonService.displayFn.bind(l,"name",l.seaport)),z.Db(2),z.pc("ngForOf",z.lc(64,42,l.filteredSeaport2)),z.Db(2),z.pc("ngIf",l.formVoyage.get("discharge_port").hasError("required")),z.Db(4),z.pc("disabled",null==l.formVoyage.controls.discharge_port.value),z.Db(1),z.pc("ngForOf",l.filterDischargeTerminal),z.Db(1),z.pc("ngIf",l.formVoyage.get("discharge_terminal").hasError("required")),z.Db(4),z.pc("matDatepicker",s)("min",l.minArriveDate),z.Db(1),z.pc("for",s),z.Db(3),z.pc("ngIf",l.formVoyage.get("arrive_day").hasError("required")),z.Db(1),z.pc("ngIf",!l.formVoyage.get("arrive_day").hasError("required")&&"INVALID"==l.formVoyage.get("arrive_day").status),z.Db(5),z.pc("ngIf",l.formVoyage.get("arrive_time").hasError("required")),z.Db(4),z.pc("readonly",!0),z.Db(7),z.Mc(l.errorMessage)}}var pe,fe,me=((pe=function(){function e(t,i,r,a,n,o,s){var l=this;if(_classCallCheck(this,e),this.matDialogRef=t,this._data=i,this.authService=r,this._formBuilder=a,this.commonService=n,this.vesselDetailsService=o,this.datePipe=s,this.filterLoadTerminal=[],this.filterDischargeTerminal=[],this.formVoyage=this._formBuilder.group({id:[null],vessel_id:[null,q.y.required],supplier_id:[null,q.y.required],name:[null,q.y.required],load_port:[null,q.y.required],load_terminal:[null,q.y.required],depart_day:[null,q.y.required],depart_time:[null,q.y.required],closing_time:[null,q.y.required],discharge_port:[null,q.y.required],discharge_terminal:[null,q.y.required],arrive_day:[null,q.y.required],arrive_time:[null,q.y.required],info:[null],update_by:[this.authService.email,q.y.required]}),this.label=i.label,this.id=i.id,this.vessel=i.vessel,this.supplier=i.supplier,this.seaport=i.seaport,this.seaTerminal=i.seaTerminal,"Add voyage"==this.label&&(this.seaTerminal=i.seaTerminal,this.formVoyage.controls.id.disable(),this.formVoyage.controls.vessel_id.setValue(i.id),this.formVoyage.controls.supplier_id.setValue(this.vessel.operator)),"Edit voyage"==this.label){this.voyage=JSON.parse(JSON.stringify(i.data)),this.filterLoadTerminal=this.seaTerminal.filter((function(e){return e.seaport_id==l.voyage.load_port})),this.filterDischargeTerminal=this.seaTerminal.filter((function(e){return e.seaport_id==l.voyage.discharge_port}));var c=this.datePipe.transform(new Date(this.voyage.depart_time),"yyyy/MM/dd");this.voyage.depart_day=new Date(c),this.voyage.depart_time=this.datePipe.transform(new Date(this.voyage.depart_time),"HH:mm");var u=this.datePipe.transform(new Date(this.voyage.arrive_time),"yyyy/MM/dd");this.voyage.arrive_day=new Date(u),this.voyage.arrive_time=this.datePipe.transform(new Date(this.voyage.arrive_time),"HH:mm"),this.formVoyage.patchValue(this.voyage)}this.formVoyage.controls.update_by.setValue(this.authService.email),this.permission=i.permission}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.filteredSupplier=this.formVoyage.controls.supplier_id.valueChanges.pipe(Object(F.a)(""),Object(j.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(j.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.supplier):[]}))),this.filteredSeaport1=this.formVoyage.controls.load_port.valueChanges.pipe(Object(F.a)(""),Object(j.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(j.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.filteredSeaport2=this.formVoyage.controls.discharge_port.valueChanges.pipe(Object(F.a)(""),Object(j.a)((function(e){return e?"string"==typeof e?e:e.name:null})),Object(j.a)((function(t){return t?e.commonService.filterData(t,"name",e.seaport):[]}))),this.formVoyage.controls.load_port.valueChanges.subscribe((function(t){e.filterLoadTerminal="number"==typeof t?e.seaTerminal.filter((function(e){return e.seaport_id==t})):[]})),this.formVoyage.controls.discharge_port.valueChanges.subscribe((function(t){e.filterDischargeTerminal="number"==typeof t?e.seaTerminal.filter((function(e){return e.seaport_id==t})):[]})),this.formVoyage.controls.depart_day.valueChanges.subscribe((function(t){e.minArriveDate=t})),this.formVoyage.valueChanges.subscribe((function(t){if(e.errorMessage="",t.depart_day&&t.depart_time&&t.closing_time>=0){var i=t.depart_time.toString().split(":"),r=new Date(t.depart_day),a=r.getFullYear(),n=r.getMonth(),o=r.getDate();e.time=new Date(a,n,o,parseInt(i[0])-t.closing_time,i[1])}}))}},{key:"onVoyageFormSubmit",value:function(e){var t=this;if(e.valid){if("string"==typeof e.value.supplier_id)return void this.formVoyage.controls.supplier_id.setValue(null);if("string"==typeof e.value.load_port)return void this.formVoyage.controls.load_port.setValue(null);if("string"==typeof e.value.discharge_port)return void this.formVoyage.controls.discharge_port.setValue(null);var i=JSON.parse(JSON.stringify(e.value)),r=this.datePipe.transform(new Date(i.depart_day),"yyyy/MM/dd");r+=" "+i.depart_time+":00.0",delete i.depart_day,i.depart_time=r;var a=this.datePipe.transform(new Date(i.arrive_day),"yyyy/MM/dd");a+=" "+i.arrive_time+":00.0",delete i.arrive_day,i.arrive_time=a,"Add voyage"==this.label?(this.authService.onRequestChanged.next(!0),this.vesselDetailsService.createVoyage(i).then((function(e){t.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error create")})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.errorMessage="Error create"}))):(this.authService.onRequestChanged.next(!0),this.vesselDetailsService.updateVoyage(i).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?(console.log(e),t.matDialogRef.close(e)):(console.error(e),t.errorMessage="Error edit vesselDetail")})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),t.errorMessage="Error edit vesselDetail"})))}}}]),e}()).\u0275fac=function(e){return new(e||pe)(z.Rb(g.f),z.Rb(g.a),z.Rb(B.a),z.Rb(q.d),z.Rb(M.a),z.Rb(E),z.Rb(H.f))},pe.\u0275cmp=z.Lb({type:pe,selectors:[["vessel-details-modal-dialog"]],decls:10,vars:3,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","vessel-details-modal","fxLayout","column",1,"p-16","pb-0","m-0"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["inputCheck","","formControlName","vessel_id","required",""],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","80",1,"pr-8"],["inputCheck","","matInput","","formControlName","supplier_id","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnSup","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","fxFlex","100","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","","formControlName","name","required",""],["appearance","outline","fxFlex","50","fxFlex.gt-xs","20",1,"pr-8"],["inputCheck","","matInput","","formControlName","load_port","required","",3,"matAutocomplete"],["autoOnPol","matAutocomplete"],["formControlName","load_terminal","required","",3,"disabled"],["appearance","outline","fxFlex","50","fxFlex.gt-xs","15",1,"pr-8"],["inputCheck","","matInput","","name","depart_day","formControlName","depart_day","required","",3,"matDatepicker","change"],["matSuffix","",3,"for"],["departDayPicker",""],["inputCheck","","matInput","","type","time","formControlName","depart_time","required",""],["appearance","outline","fxFlex","100","fxFlex.gt-xs","30",1,"pr-8"],["inputCheck","","type","number","min","0","matInput","","formControlName","closing_time","required",""],["matSuffix",""],["inputCheck","","matInput","","formControlName","discharge_port","required","",3,"matAutocomplete"],["autoOnPod","matAutocomplete"],["formControlName","discharge_terminal","required","",3,"disabled"],["inputCheck","","matInput","","name","arrive_day","formControlName","arrive_day","required","",3,"matDatepicker","min","change"],["arriveDayPicker",""],["inputCheck","","matInput","","type","time","formControlName","arrive_time","required",""],["inputCheck","","matInput","","formControlName","update_by",3,"readonly"],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","info"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[3,"value"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Xb(1,"mat-toolbar",1),z.Xb(2,"mat-toolbar-row",2),z.Xb(3,"span",3),z.Lc(4),z.Wb(),z.Xb(5,"button",4),z.fc("click",(function(e){return t.matDialogRef.close()})),z.Xb(6,"mat-icon"),z.Lc(7,"close"),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Xb(8,"div",5),z.Jc(9,de,102,44,"div",6),z.Wb(),z.Wb()),2&e&&(z.Db(4),z.Oc("",t.label," ",t.vessel.name,""),z.Db(5),z.pc("ngIf","Add voyage"==t.label||"Edit voyage"==t.label))},directives:[y.a,y.c,J.b,J.d,J.c,c.b,d.a,g.d,G.a,H.t,q.A,q.q,q.h,q.b,q.p,q.g,q.w,b.c,b.f,f.b,s.c,s.a,H.s,h.a,l.b,l.d,b.h,l.a,q.u,W.n,b.b],pipes:[H.b,H.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.vessel-details-modal-dialog{width:100%}}@media screen and (min-width:960px){.vessel-details-modal-dialog{width:1080px}}.vessel-details-modal-dialog .mat-dialog-container{padding:0}.vessel-details-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.vessel-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.vessel-details-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),pe),he=i("HX77"),ve=i("B9zo"),ge=i("fE3o"),ye=((fe=function(){function e(t,i){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this.height=560,this.changeSetting=new z.o,this.form=this.formBuilder.group({valid:[null]}),this.displayedColumns=[],this.view="main",this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"initForm",value:function(){return this.formBuilder.group({column:this.formBuilder.array([])})}},{key:"addColumn",value:function(e){var t={};t[e]=!!(this.authService.screenWidth>600||this.authService.screenWidth<600&&["Price","Unit","Volume","Amount"].includes(e))&&(!["Price","Unit","Volume","Amount"].includes(e)||{value:!0,disabled:!0}),this.columnAdd.push(this.formBuilder.group(t))}},{key:"checkAll",value:function(){var e=this;this.displayedColumns.map((function(t,i){e.form.controls.column.controls[i].controls[t].setValue(!0)}))}},{key:"toggleCardCover",value:function(){}},{key:"toggleSubscription",value:function(){}},{key:"columnAdd",get:function(){return this.form.get("column")}}]),e}()).\u0275fac=function(e){return new(e||fe)(z.Rb(q.d),z.Rb(B.a))},fe.\u0275cmp=z.Lb({type:fe,selectors:[["vessel-details-setting"]],inputs:{displayObject:"displayObject"},outputs:{changeSetting:"changeSetting"},decls:13,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","center center",1,"h-100-p"],["fusePerfectScrollbar","",1,"navbar-scroll-vessel"],[1,"navbar-content",3,"formGroup"],[1,"group","mt-32"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","","type","button",1,"ml-4","mr-4","mb-12",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Xb(1,"div",1),z.Xb(2,"div",2),z.Xb(3,"div"),z.Lc(4,"Settings"),z.Wb(),z.Wb(),z.Wb(),z.Xb(5,"div",3),z.Xb(6,"form",4),z.Xb(7,"div",5),z.Xb(8,"h2"),z.Lc(9,"Column"),z.Wb(),z.Xb(10,"div",6),z.Xb(11,"button",7),z.fc("click",(function(e){return t.checkAll()})),z.Lc(12,"All column"),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Wb()),2&e&&(z.Db(5),z.Ic("height",t.height,"px"),z.Db(1),z.pc("formGroup",t.form))},directives:[J.d,J.c,G.a,q.A,q.q,q.h,c.b],styles:["vessel-details-setting .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}vessel-details-setting .navbar-scroll-vessel{background:#fff!important}vessel-details-setting .navbar-scroll-vessel .navbar-content{padding-top:0}vessel-details-setting .navbar-scroll-vessel .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}vessel-details-setting .navbar-scroll-vessel .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}vessel-details-setting .navbar-scroll-vessel .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-vessel{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-vessel .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2,data:{animation:V.a}}),fe),xe=i("0JVi"),ke=i("znSr");function we(e,t){if(1&e){var i=z.Yb();z.Xb(0,"button",8),z.fc("click",(function(e){z.Bc(i);var t=z.jc();return e.stopPropagation(),t.changeScreen(!0)})),z.Xb(1,"mat-icon"),z.Lc(2,"flip_to_front"),z.Wb(),z.Wb()}}function _e(e,t){if(1&e){var i=z.Yb();z.Xb(0,"button",8),z.fc("click",(function(e){z.Bc(i);var t=z.jc();return e.stopPropagation(),t.changeScreen(!1)})),z.Xb(1,"mat-icon"),z.Lc(2,"flip_to_back"),z.Wb(),z.Wb()}}var Se,Ce=((Se=function(){function e(t,i){_classCallCheck(this,e),this.authService=t,this._fuseConfigService=i,this.fullScreen=!1,this.toggleSidebar=new z.o,this.showHideBar=new z.o,this.refreshPage=new z.o,this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"changeScreen",value:function(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}]),e}()).\u0275fac=function(e){return new(e||Se)(z.Rb(B.a),z.Rb(xe.b))},Se.\u0275cmp=z.Lb({type:Se,selectors:[["vessel-details-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(z.Xb(0,"mat-toolbar",0),z.Xb(1,"div",1),z.Xb(2,"div",2),z.Xb(3,"div",3),z.Xb(4,"button",4),z.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),z.Xb(5,"mat-icon"),z.Lc(6,"menu"),z.Wb(),z.Wb(),z.Xb(7,"button",5),z.fc("click",(function(e){return t.showHideBar.emit()})),z.Xb(8,"mat-icon"),z.Lc(9,"menu"),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Xb(10,"div",6),z.Sb(11,"div",7),z.Xb(12,"button",8),z.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),z.Xb(13,"mat-icon",9),z.Lc(14,"refresh"),z.Wb(),z.Wb(),z.Sb(15,"div",7),z.Jc(16,we,3,0,"button",10),z.Jc(17,_e,3,0,"button",10),z.Sb(18,"div",7),z.Xb(19,"button",8),z.fc("click",(function(e){return t.toggleSidebar.emit("vessel-details-setting")})),z.Xb(20,"mat-icon"),z.Lc(21,"settings"),z.Wb(),z.Wb(),z.Sb(22,"div",7),z.Wb(),z.Wb(),z.Wb()),2&e&&(z.Db(16),z.pc("ngIf",!t.fullScreen),z.Db(1),z.pc("ngIf",t.fullScreen))},directives:[y.a,J.b,J.e,J.d,J.c,c.b,ke.b,d.a,H.t],styles:["vessel-details-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}vessel-details-header.below{z-index:2}vessel-details-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}vessel-details-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}vessel-details-header .logo .logo-icon{width:38px}vessel-details-header .chat-panel-toggle-button,vessel-details-header .language-button,vessel-details-header .quick-panel-toggle-button,vessel-details-header .user-button,vessel-details-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){vessel-details-header .chat-panel-toggle-button,vessel-details-header .language-button,vessel-details-header .quick-panel-toggle-button,vessel-details-header .user-button,vessel-details-header fuse-search-bar{height:56px}}vessel-details-header .navbar-toggle-button{min-width:56px;height:56px}vessel-details-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){vessel-details-header .toolbar-separator{height:56px}}"],encapsulation:2}),Se);function We(e,t){if(1&e){var i=z.Yb();z.Xb(0,"mat-icon",7),z.fc("click",(function(e){z.Bc(i);var t=z.jc();return e.stopPropagation(),t.createItem.emit()})),z.Lc(1,"add"),z.Wb()}}function Xe(e,t){if(1&e){var i=z.Yb();z.Xb(0,"mat-icon",7),z.fc("click",(function(e){z.Bc(i);var t=z.jc().$implicit,r=z.jc();return e.stopPropagation(),r.updateItem.emit(t)})),z.Lc(1,"edit"),z.Wb()}}function De(e,t){if(1&e){var i=z.Yb();z.Xb(0,"mat-icon",9),z.fc("click",(function(e){z.Bc(i);var t=z.jc().$implicit,r=z.jc();return e.stopPropagation(),r.deleteItem.emit(t)})),z.Lc(1,"delete"),z.Wb()}}function Ie(e,t){if(1&e&&(z.Xb(0,"tr"),z.Xb(1,"td"),z.Lc(2),z.Wb(),z.Xb(3,"td"),z.Lc(4),z.Wb(),z.Xb(5,"td"),z.Lc(6),z.Wb(),z.Xb(7,"td"),z.Lc(8),z.Wb(),z.Xb(9,"td"),z.Lc(10),z.Wb(),z.Xb(11,"td"),z.Lc(12),z.kc(13,"date"),z.Wb(),z.Xb(14,"td"),z.Lc(15),z.kc(16,"date"),z.Wb(),z.Xb(17,"td"),z.Lc(18),z.Wb(),z.Xb(19,"td"),z.Lc(20),z.Wb(),z.Xb(21,"td"),z.Lc(22),z.kc(23,"date"),z.Wb(),z.Xb(24,"td",4),z.Jc(25,Xe,2,0,"mat-icon",5),z.Jc(26,De,2,0,"mat-icon",8),z.Wb(),z.Wb()),2&e){var i=t.$implicit,r=t.index,a=z.jc();z.Db(2),z.Mc(r+1),z.Db(2),z.Mc(i.vessel_full_name),z.Db(2),z.Mc(i.short_name),z.Db(2),z.Mc(i.load_port_name),z.Db(2),z.Mc(i.load_terminal_name),z.Db(2),z.Mc(z.mc(13,12,i.depart_time,"MM/dd/yyyy HH:mm")),z.Db(3),z.Mc(z.mc(16,15,i.close_time,"MM/dd/yyyy HH:mm")),z.Db(3),z.Mc(i.discharge_port_name),z.Db(2),z.Mc(i.discharge_terminal_name),z.Db(2),z.Mc(z.mc(23,18,i.arrive_time,"MM/dd/yyyy HH:mm")),z.Db(3),z.pc("ngIf",a.permission.edit),z.Db(1),z.pc("ngIf",a.permission.delete)}}var Le,Oe,Ae=((Oe=function(){function e(t){_classCallCheck(this,e),this.authService=t,this.updateItem=new z.o,this.deleteItem=new z.o,this.createItem=new z.o,this.height=560,this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4-50})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4-50:e.authService.screenHeight-64-64-16-4-50}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"getShipment",value:function(e){}},{key:"addVoyage",value:function(e){}},{key:"createNote",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||Oe)(z.Rb(B.a))},Oe.\u0275cmp=z.Lb({type:Oe,selectors:[["vessel-details-content-voyage"]],inputs:{vessel:"vessel",voyage:"voyage",supplier:"supplier",permission:"permission"},outputs:{updateItem:"updateItem",deleteItem:"deleteItem",createItem:"createItem"},decls:32,vars:4,consts:[[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto"],[1,"simple","table-voyage"],[1,"sticky-right-col"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["color","accent",1,"cursor-pointer",3,"click"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Xb(1,"h2",1),z.Xb(2,"span"),z.Lc(3,"Voyage"),z.Wb(),z.Wb(),z.Xb(4,"div",2),z.Xb(5,"table",3),z.Xb(6,"thead"),z.Xb(7,"tr"),z.Xb(8,"th"),z.Lc(9,"No"),z.Wb(),z.Xb(10,"th"),z.Lc(11,"Voyage"),z.Wb(),z.Xb(12,"th"),z.Lc(13,"Supplier"),z.Wb(),z.Xb(14,"th"),z.Lc(15,"Load port"),z.Wb(),z.Xb(16,"th"),z.Lc(17,"Load terminal"),z.Wb(),z.Xb(18,"th"),z.Lc(19,"Depart time"),z.Wb(),z.Xb(20,"th"),z.Lc(21,"Closing time"),z.Wb(),z.Xb(22,"th"),z.Lc(23,"Discharge port"),z.Wb(),z.Xb(24,"th"),z.Lc(25,"Discharge terminal"),z.Wb(),z.Xb(26,"th"),z.Lc(27,"Arrive time"),z.Wb(),z.Xb(28,"th",4),z.Jc(29,We,2,0,"mat-icon",5),z.Wb(),z.Wb(),z.Wb(),z.Xb(30,"tbody"),z.Jc(31,Ie,27,21,"tr",6),z.Wb(),z.Wb(),z.Wb(),z.Wb()),2&e&&(z.Db(4),z.Ic("height",t.height,"px"),z.Db(25),z.pc("ngIf",t.permission.create),z.Db(2),z.pc("ngForOf",t.voyage))},directives:[J.d,J.c,H.t,H.s,d.a],pipes:[H.f],styles:["vessel-details-content-voyage .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}vessel-details-content-voyage .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}vessel-details-content-voyage .group .table-voyage{font-size:12px}vessel-details-content-voyage .group .table-voyage td,vessel-details-content-voyage .group .table-voyage th{padding:8px;font-size:12px;white-space:nowrap}vessel-details-content-voyage .group .table-voyage thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}vessel-details-content-voyage .group .table-voyage tfoot td{font-weight:600}vessel-details-content-voyage .group .table-voyage .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}vessel-details-content-voyage .group .table-voyage .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}vessel-details-content-voyage .group .table-voyage .sticky-right-col{min-width:60px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}vessel-details-content-voyage .group .table-voyage tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}vessel-details-content-voyage .group .table-voyage tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:V.a}}),Oe),Re=((Le=function(){function e(t,i){_classCallCheck(this,e),this._activatedRoute=t,this.authService=i,this.updateItem=new z.o,this.deleteItem=new z.o,this.createItem=new z.o,this.height=560,this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-16-4})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-16-4:e.authService.screenHeight-64-64-16-4}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||Le)(z.Rb(a.a),z.Rb(B.a))},Le.\u0275cmp=z.Lb({type:Le,selectors:[["vessel-details-content"]],inputs:{vessel:"vessel",voyage:"voyage",supplier:"supplier",seaport:"seaport",seaTerminal:"seaTerminal",permission:"permission"},outputs:{updateItem:"updateItem",deleteItem:"deleteItem",createItem:"createItem"},decls:2,vars:6,consts:[["fxLayout","column"],[3,"vessel","voyage","supplier","permission","createItem","updateItem","deleteItem"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Xb(1,"vessel-details-content-voyage",1),z.fc("createItem",(function(e){return t.createItem.emit(e)}))("updateItem",(function(e){return t.updateItem.emit(e)}))("deleteItem",(function(e){return t.deleteItem.emit(e)})),z.Wb(),z.Wb()),2&e&&(z.Ic("height",t.height,"px"),z.Db(1),z.pc("vessel",t.vessel)("voyage",t.voyage)("supplier",t.supplier)("permission",t.permission))},directives:[J.d,Ae],styles:[""],encapsulation:2,data:{animation:V.a}}),Le),Pe=["formDirective"],Ve=["sidebarPerfectScroll"],qe=function(e){return{"mt-32":e}};function Fe(e,t){if(1&e&&(z.Xb(0,"div"),z.Xb(1,"div",9),z.Xb(2,"h2"),z.Lc(3),z.Wb(),z.Xb(4,"div",10),z.Lc(5),z.Wb(),z.Wb(),z.Wb()),2&e){var i=t.$implicit,r=t.index;z.Db(1),z.pc("ngClass",z.rc(3,qe,0==r)),z.Db(2),z.Mc(i.name),z.Db(2),z.Mc(i.value)}}var je,ze=((je=function(){function e(t,i,r,a,n){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this._fuseSidebarService=r,this.commonService=a,this.datePipe=n,this.sidebarPage=new z.o,this.height=560,this.form=[{name:"Imo",value:null},{name:"Mmsi",value:null},{name:"Name",value:null},{name:"Type",value:null},{name:"Operator",value:null},{name:"Info",value:null}],this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form=[{name:"Imo",value:this.vessel.imo},{name:"Mmsi",value:this.vessel.mmsi},{name:"Name",value:this.vessel.name},{name:"Type",value:1==this.vessel.type?"Active":"Inactive"},{name:"Operator",value:this.vessel.short_name},{name:"Info",value:this.vessel.info}],console.log(this.form),this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewInit",value:function(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}}]),e}()).\u0275fac=function(e){return new(e||je)(z.Rb(q.d),z.Rb(B.a),z.Rb(he.a),z.Rb(M.a),z.Rb(H.f))},je.\u0275cmp=z.Lb({type:je,selectors:[["vessel-details-sidebar-view"]],viewQuery:function(e,t){var i;1&e&&(z.Sc(Pe,!0),z.Sc(Ve,!0)),2&e&&(z.wc(i=z.gc())&&(t.searchNgForm=i.first),z.wc(i=z.gc())&&(t.sidebarPerfectScroll=i.first))},inputs:{vessel:"vessel"},outputs:{sidebarPage:"sidebarPage"},decls:10,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","45",1,"ml-8","mr-8"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-vessel"],["sidebarPerfectScroll",""],[1,"navbar-content"],[4,"ngFor","ngForOf"],[1,"group",3,"ngClass"],[1,"item"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Xb(1,"div",1),z.Xb(2,"div",2),z.Sb(3,"div",3),z.Xb(4,"button",4),z.fc("click",(function(e){return t.sidebarPage.emit("form")})),z.Lc(5," Edit "),z.Wb(),z.Wb(),z.Wb(),z.Xb(6,"div",5,6),z.Xb(8,"div",7),z.Jc(9,Fe,6,5,"div",8),z.Wb(),z.Wb(),z.Wb()),2&e&&(z.Db(6),z.Ic("height",t.height,"px"),z.Db(3),z.pc("ngForOf",t.form))},directives:[J.d,J.c,J.b,c.b,G.a,H.s,H.q,ke.a],styles:["vessel-details-sidebar-view{-webkit-user-drag:auto}vessel-details-sidebar-view .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}vessel-details-sidebar-view .navbar-scroll-vessel{background:#fff!important}vessel-details-sidebar-view .navbar-scroll-vessel .navbar-content{padding-top:0}vessel-details-sidebar-view .navbar-scroll-vessel .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12)}vessel-details-sidebar-view .navbar-scroll-vessel .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}vessel-details-sidebar-view .navbar-scroll-vessel .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-vessel{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-vessel .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),je),Be=["formDirective"],Me=["sidebarPerfectScroll"];function Te(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," IMO is required "),z.Wb())}function Ne(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Name is required "),z.Wb())}function Ee(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Type is required "),z.Wb())}function He(e,t){if(1&e&&(z.Xb(0,"mat-option",21),z.Lc(1),z.Wb()),2&e){var i=t.$implicit;z.pc("value",i.id),z.Db(1),z.Nc(" ",i.short_name," ")}}function Je(e,t){1&e&&(z.Xb(0,"mat-error"),z.Lc(1," Operator is required "),z.Wb())}var Ge,Ue=((Ge=function(){function e(t,i,r,a){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this._fuseSidebarService=r,this.commonService=a,this.sidebarPage=new z.o,this.editVessel=new z.o,this.filteredContType=[],this.form=this.formBuilder.group({id:[null],imo:[null,q.y.required],mmsi:[null],name:[null,q.y.required],type:[1,q.y.required],operator:[null,q.y.required],info:[null]}),this.now=new Date,this.height=560,this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.patchValue(this.vessel),this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-18})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-18:e.authService.screenHeight-64-64-18})),this.filteredSupplier=this.form.controls.operator.valueChanges.pipe(Object(F.a)(""),Object(j.a)((function(e){return e?"string"==typeof e?e:e.partner_name:null})),Object(j.a)((function(t){return t?e.commonService.filterData(t,"partner_name",e.supplier):[]})))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"ngAfterViewInit",value:function(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}},{key:"setCheck",value:function(e){e.check=!e.check}},{key:"resetForm",value:function(){this.searchNgForm.resetForm()}},{key:"onFormSubmit",value:function(e){if(console.log(e),e.valid){if("string"==typeof e.value.operator)return void this.form.controls.operator.setValue(null);this.editVessel.emit(e.value)}}}]),e}()).\u0275fac=function(e){return new(e||Ge)(z.Rb(q.d),z.Rb(B.a),z.Rb(he.a),z.Rb(M.a))},Ge.\u0275cmp=z.Lb({type:Ge,selectors:[["vessel-details-sidebar-form"]],viewQuery:function(e,t){var i;1&e&&(z.Sc(Be,!0),z.Sc(Me,!0)),2&e&&(z.wc(i=z.gc())&&(t.searchNgForm=i.first),z.wc(i=z.gc())&&(t.sidebarPerfectScroll=i.first))},inputs:{vessel:"vessel",supplier:"supplier"},outputs:{sidebarPage:"sidebarPage",editVessel:"editVessel"},decls:57,vars:14,consts:[["name","form",2,"border-right","1px solid #E6E6E6",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-vessel"],["sidebarPerfectScroll",""],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],[2,"display","none"],["inputCheck","","type","number","formControlName","id"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","type","number","matInput","","formControlName","imo","required",""],[4,"ngIf"],["fxFlex","100",1,"info-line"],["inputCheck","","type","number","matInput","","formControlName","mmsi"],["inputCheck","","matInput","","formControlName","name","required",""],["formControlName","type","required",""],[3,"value"],["inputCheck","","matInput","","formControlName","operator","required","",3,"matAutocomplete"],[3,"displayWith"],["autoSupplier","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","matInput","","formControlName","info"]],template:function(e,t){if(1&e&&(z.Xb(0,"form",0,1),z.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),z.Xb(2,"div",2),z.Xb(3,"div",3),z.Xb(4,"button",4),z.Lc(5," Submit "),z.Wb(),z.Xb(6,"button",5),z.fc("click",(function(e){return t.sidebarPage.emit("view")})),z.Lc(7," Cancel "),z.Wb(),z.Wb(),z.Wb(),z.Xb(8,"div",6,7),z.Xb(10,"div",8),z.Xb(11,"div",9),z.Xb(12,"div",10),z.Xb(13,"div",11),z.Sb(14,"input",12),z.Wb(),z.Xb(15,"div",13),z.Xb(16,"mat-form-field",14),z.Xb(17,"mat-label"),z.Lc(18,"IMO"),z.Wb(),z.Sb(19,"input",15),z.Jc(20,Te,2,0,"mat-error",16),z.Wb(),z.Wb(),z.Xb(21,"div",17),z.Xb(22,"mat-form-field",14),z.Xb(23,"mat-label"),z.Lc(24,"MMSI"),z.Wb(),z.Sb(25,"input",18),z.Wb(),z.Wb(),z.Xb(26,"div",17),z.Xb(27,"mat-form-field",14),z.Xb(28,"mat-label"),z.Lc(29,"Name"),z.Wb(),z.Sb(30,"input",19),z.Jc(31,Ne,2,0,"mat-error",16),z.Wb(),z.Wb(),z.Xb(32,"div",17),z.Xb(33,"mat-form-field",14),z.Xb(34,"mat-label"),z.Lc(35,"Type"),z.Wb(),z.Xb(36,"mat-select",20),z.Xb(37,"mat-option",21),z.Lc(38," Inactive "),z.Wb(),z.Xb(39,"mat-option",21),z.Lc(40," Active "),z.Wb(),z.Wb(),z.Jc(41,Ee,2,0,"mat-error",16),z.Wb(),z.Wb(),z.Xb(42,"div",17),z.Xb(43,"mat-form-field",14),z.Xb(44,"mat-label"),z.Lc(45,"Operator"),z.Wb(),z.Sb(46,"input",22),z.Xb(47,"mat-autocomplete",23,24),z.Jc(49,He,2,2,"mat-option",25),z.kc(50,"async"),z.Wb(),z.Jc(51,Je,2,0,"mat-error",16),z.Wb(),z.Wb(),z.Xb(52,"div",17),z.Xb(53,"mat-form-field",14),z.Xb(54,"mat-label"),z.Lc(55,"Info"),z.Wb(),z.Sb(56,"input",26),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Wb()),2&e){var i=z.xc(48);z.pc("formGroup",t.form),z.Db(8),z.Ic("height",t.height,"px"),z.Db(12),z.pc("ngIf",t.form.get("imo").hasError("required")),z.Db(11),z.pc("ngIf",t.form.get("name").hasError("required")),z.Db(6),z.pc("value","0"),z.Db(2),z.pc("value","1"),z.Db(2),z.pc("ngIf",t.form.get("type").hasError("required")),z.Db(5),z.pc("matAutocomplete",i),z.Db(1),z.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.supplier)),z.Db(2),z.pc("ngForOf",z.lc(50,12,t.filteredSupplier)),z.Db(2),z.pc("ngIf",t.form.get("operator").hasError("required"))}},directives:[q.A,q.q,q.h,J.d,J.c,c.b,J.b,G.a,q.u,q.b,q.p,q.g,b.c,b.f,f.b,q.w,H.t,h.a,W.n,s.c,s.a,H.s,b.b],pipes:[H.b],styles:["vessel-details-sidebar-form{-webkit-user-drag:auto}vessel-details-sidebar-form .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}vessel-details-sidebar-form .navbar-scroll-vessel{background:#fff!important}vessel-details-sidebar-form .navbar-scroll-vessel .navbar-content{padding-top:0}vessel-details-sidebar-form .navbar-scroll-vessel .navbar-content .nav.material2{overflow:hidden}vessel-details-sidebar-form .navbar-scroll-vessel .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}vessel-details-sidebar-form .navbar-scroll-vessel .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}vessel-details-sidebar-form .navbar-scroll-vessel .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}vessel-details-sidebar-form .navbar-scroll-vessel .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-vessel{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-vessel .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),Ge);function Ye(e,t){if(1&e){var i=z.Yb();z.Xb(0,"vessel-details-sidebar-view",3),z.fc("sidebarPage",(function(e){return z.Bc(i),z.jc().sidebarPage.emit(e)})),z.Wb()}if(2&e){var r=z.jc();z.pc("vessel",r.vessel)}}function $e(e,t){if(1&e){var i=z.Yb();z.Xb(0,"vessel-details-sidebar-form",4),z.fc("sidebarPage",(function(e){return z.Bc(i),z.jc().sidebarPage.emit(e)}))("editVessel",(function(e){return z.Bc(i),z.jc().editVessel.emit(e)})),z.Wb()}if(2&e){var r=z.jc();z.pc("vessel",r.vessel)("supplier",r.supplier)}}var Qe,Ke=((Qe=function(){function e(t,i,r){_classCallCheck(this,e),this.formBuilder=t,this.authService=i,this.commonService=r,this.sidebarPage=new z.o,this.editVessel=new z.o,this.height=560,this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.windowSizeChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t.height-64-64-12})),this.authService.changeScreen.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.height=t?e.authService.screenHeight-64-12:e.authService.screenHeight-64-64-12}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||Qe)(z.Rb(q.d),z.Rb(B.a),z.Rb(M.a))},Qe.\u0275cmp=z.Lb({type:Qe,selectors:[["vessel-details-sidebar"]],inputs:{type:"type",vessel:"vessel",supplier:"supplier"},outputs:{sidebarPage:"sidebarPage",editVessel:"editVessel"},decls:3,vars:3,consts:[[1,"sidebar-content",3,"ngSwitch"],[3,"vessel","sidebarPage",4,"ngSwitchCase"],[3,"vessel","supplier","sidebarPage","editVessel",4,"ngSwitchCase"],[3,"vessel","sidebarPage"],[3,"vessel","supplier","sidebarPage","editVessel"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Jc(1,Ye,1,1,"vessel-details-sidebar-view",1),z.Jc(2,$e,1,2,"vessel-details-sidebar-form",2),z.Wb()),2&e&&(z.pc("ngSwitch",!0),z.Db(1),z.pc("ngSwitchCase","view"==t.type),z.Db(1),z.pc("ngSwitchCase","form"==t.type))},directives:[H.x,H.y,ze,Ue],styles:[""],encapsulation:2}),Qe);function Ze(e,t){if(1&e){var i=z.Yb();z.Xb(0,"fuse-sidebar",10),z.Xb(1,"vessel-details-sidebar",11),z.fc("sidebarPage",(function(e){return z.Bc(i),z.jc().getTypeSidebar(e)}))("editVessel",(function(e){return z.Bc(i),z.jc().editVessel(e)})),z.Wb(),z.Wb()}if(2&e){var r=z.jc();z.Db(1),z.pc("type",r.type)("vessel",r.vessel)("supplier",r.supplier)}}var et,tt=((et=function(){function e(t,i,r,a,n,o,s){_classCallCheck(this,e),this._fuseSidebarService=t,this.vesselDetailsService=i,this._matDialog=r,this.router=a,this.route=n,this.authService=o,this.datePipe=s,this.sidebarPanel=!0,this.type="view",this._unsubscribeAll=new R.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.params.id,this.vesselDetailsService.onVesselChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.vessel=e.vesselDetailsService.vessel,e.voyage=e.vesselDetailsService.voyage})),this.vesselDetailsService.onDataChanged.pipe(Object(P.a)(this._unsubscribeAll)).subscribe((function(t){e.supplier=e.vesselDetailsService.supplier,e.seaport=e.vesselDetailsService.seaport,e.seaTerminal=e.vesselDetailsService.seaTerminal})),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSidebar",value:function(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}},{key:"showHideBar",value:function(e){this.sidebarPanel=!this.sidebarPanel}},{key:"refreshPage",value:function(e){this.authService.refreshData(this.vesselDetailsService)}},{key:"newVessel",value:function(e){this.router.navigate(["/apps/vessel/vessel-details/form/0"])}},{key:"getTypeSidebar",value:function(e){this.type=e}},{key:"getVessel",value:function(){var e=this;this.authService.onRequestChanged.next(!0),this.vesselDetailsService.getVesselById(this.id).then((function(t){e.authService.onRequestChanged.next(!1),e.type="view"})).catch((function(t){e.authService.onRequestChanged.next(!1),console.error(t),alert("Error: Server error")}))}},{key:"editVessel",value:function(e){var t=this;this.authService.onRequestChanged.next(!0),e.depart_time&&(e.depart_time=this.datePipe.transform(e.depart_time,"yyyy-MM-dd")),e.arrive_time&&(e.arrive_time=this.datePipe.transform(e.arrive_time,"yyyy-MM-dd")),e.update_by=this.authService.user,this.vesselDetailsService.updateVessel(e).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows&&t.getVessel()})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("Error edit")}))}},{key:"createItem",value:function(e){var t=this;this.dialogRef=this._matDialog.open(me,{panelClass:"vessel-details-modal-dialog",data:{label:"Add voyage",vessel:this.vessel,id:this.id,supplier:this.supplier,seaport:this.seaport,seaTerminal:this.seaTerminal}}),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getVessel()}))}},{key:"updateItem",value:function(e){var t=this;this.dialogRef=this._matDialog.open(me,{panelClass:"vessel-details-modal-dialog",data:{label:"Edit voyage",data:e,vessel:this.vessel,id:this.id,supplier:this.supplier,seaport:this.seaport,seaTerminal:this.seaTerminal}}),this.dialogRef.afterClosed().subscribe((function(e){e&&t.getVessel()}))}},{key:"deleteItem",value:function(e){var t=this;confirm("Do you want to delete this voyage?")&&(this.authService.onRequestChanged.next(!0),this.vesselDetailsService.deleteVoyage(e.id).then((function(e){t.authService.onRequestChanged.next(!1),1==e.affectedRows?(t.getVessel(),alert("delete success")):(console.error(e),alert("delete error"))})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")})))}},{key:"createVoyage",value:function(e){var t=this;this.authService.onRequestChanged.next(!0),this.vesselDetailsService.createVoyage(e).then((function(e){t.authService.onRequestChanged.next(!1),t.getVessel(),t.vesselDetailsService.onResetForm.next(!0)})).catch((function(e){t.authService.onRequestChanged.next(!1),console.error(e),alert("error")}))}}]),e}()).\u0275fac=function(e){return new(e||et)(z.Rb(he.a),z.Rb(E),z.Rb(g.b),z.Rb(a.g),z.Rb(a.a),z.Rb(B.a),z.Rb(H.f))},et.\u0275cmp=z.Lb({type:et,selectors:[["vessel-details"]],decls:10,vars:9,consts:[[1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","vessel-details-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","vessel-details-setting","position","right",1,"sidebar"],[1,"content"],[3,"displayObject"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar","newVessel"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[3,"vessel","voyage","supplier","seaport","seaTerminal","permission","createItem","updateItem","deleteItem"],["name","vessel-details-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"type","vessel","supplier","sidebarPage","editVessel"]],template:function(e,t){1&e&&(z.Xb(0,"div",0),z.Jc(1,Ze,2,3,"fuse-sidebar",1),z.Xb(2,"fuse-sidebar",2),z.Xb(3,"div",3),z.Sb(4,"vessel-details-setting",4),z.Wb(),z.Wb(),z.Xb(5,"div",5),z.Xb(6,"vessel-details-header",6),z.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)}))("newVessel",(function(e){return t.newVessel(e)})),z.Wb(),z.Xb(7,"div",7),z.Xb(8,"div",8),z.Xb(9,"vessel-details-content",9),z.fc("createItem",(function(e){return t.createItem(e)}))("updateItem",(function(e){return t.updateItem(e)}))("deleteItem",(function(e){return t.deleteItem(e)})),z.Wb(),z.Wb(),z.Wb(),z.Wb(),z.Wb()),2&e&&(z.Db(1),z.pc("ngIf",t.sidebarPanel),z.Db(3),z.pc("displayObject",t.displayObject),z.Db(2),z.pc("sidebarName","vessel-details-sidebar"),z.Db(3),z.pc("vessel",t.vessel)("voyage",t.voyage)("supplier",t.supplier)("seaport",t.seaport)("seaTerminal",t.seaTerminal)("permission",t.permission))},directives:[ve.a,H.t,ge.a,ye,Ce,J.a,Re,Ke],styles:["vessel-details{width:100%}vessel-details .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){vessel-details .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}vessel-details .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){vessel-details .center .content-card vessel-details{border-right:0}vessel-details .center .content-card shipment-details,vessel-details .center .content-card vessel-details{-webkit-box-flex:1;flex:1 0 100%}vessel-details .center .content-card shipment-details{display:none!important}vessel-details .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}vessel-details .center .content-card.current-shipment-selected .content vessel-details,vessel-details .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}vessel-details .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:V.a}}),et),it=i("vxfF"),rt=i("cfqv");i.d(t,"VesselDetailsModule",(function(){return ot}));var at,nt=[{path:":id",component:tt,resolve:{data:E}}],ot=((at=function e(){_classCallCheck(this,e)}).\u0275mod=z.Pb({type:at}),at.\u0275inj=z.Ob({factory:function(e){return new(e||at)},providers:[E],imports:[[a.k.forChild(nt),o.b,n.a,s.b,l.c,c.c,u.b,b.e,d.b,p.b,f.c,m.c,h.b,v.c,g.e,y.b,x.b,k.b,w.d,_.e,S.b,C.b,X.b,D.k,I.c,W.t,L.a,O.a,A.f,it.g,rt.b]]}),at)},IOBc:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var r=i("5HBU"),a=i("bTqV"),n=i("kmnG"),o=i("NFeN"),s=i("qFsG"),l=i("wZkO"),c=i("/t3+"),u=i("bSwM"),b=i("+0xr"),d=i("FKr1"),p=i("MutI"),f=i("fXoL"),m=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=f.Pb({type:e}),e.\u0275inj=f.Ob({factory:function(t){return new(t||e)},imports:[[r.a,a.c,n.e,o.b,s.c,l.c,c.b,u.b,d.t,p.c,b.k]]}),e}()},cfqv:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return b}));var r=i("8LU1"),a=i("vxfF"),n=i("fXoL"),o=i("HDdC"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;_classCallCheck(this,e),this._totalWeight=0,this._defaultItemSize=t,this._averageItemSize=t}return _createClass(e,[{key:"getAverageItemSize",value:function(){return this._averageItemSize}},{key:"addSample",value:function(e,t){var i=this._totalWeight+e.end-e.start;if(i){var r=(t+this._averageItemSize*this._totalWeight)/i;r&&(this._averageItemSize=r,this._totalWeight=i)}}},{key:"reset",value:function(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}]),e}(),l=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s;_classCallCheck(this,e),this.scrolledIndexChange=new o.a((function(){throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")})),this._viewport=null,this._removalFailures=0,this._minBufferPx=t,this._maxBufferPx=i,this._averager=r}return _createClass(e,[{key:"attach",value:function(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}},{key:"detach",value:function(){this._viewport=null}},{key:"onContentScrolled",value:function(){this._viewport&&this._updateRenderedContentAfterScroll()}},{key:"onDataLengthChanged",value:function(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}},{key:"onContentRendered",value:function(){this._viewport&&this._checkRenderedContentSize()}},{key:"onRenderedOffsetChanged",value:function(){this._viewport&&this._checkRenderedContentOffset()}},{key:"scrollToIndex",value:function(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}},{key:"updateBufferSize",value:function(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}},{key:"_updateRenderedContentAfterScroll",value:function(){var e=this._viewport,t=e.measureScrollOffset(),i=t-this._lastScrollOffset,r=Math.abs(i),a=e.getRenderedRange(),n=0;if(i<0){var o=a.start*this._averager.getAverageItemSize();i-=n=Math.round((o-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,r/(t+r)))),r=Math.abs(i)}var s=this._lastScrollOffset-this._lastRenderedContentOffset,l=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),c=r+this._minBufferPx-(i<0?s:l);if(c>0)if(r>=e.getViewportSize())this._renderContentForCurrentOffset();else{var u,b,d=Math.max(0,Math.ceil((c-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),p=(i<0?l:s)-this._minBufferPx+r,f=Math.floor(p/this._averager.getAverageItemSize()/(this._removalFailures+1)),m=Math.min(a.end-a.start,Math.max(0,f)),h=this._expandRange(a,i<0?d:0,i>0?d:0);if(i<0?h.end=Math.max(h.start+1,h.end-m):h.start=Math.min(h.end-1,h.start+m),i<0){var v=e.measureRangeSize({start:h.end,end:a.end});v<=p?(u=this._lastRenderedContentOffset+this._lastRenderedContentSize-v,this._removalFailures=0):(h.end=a.end,u=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),b="to-end"}else{var g=e.measureRangeSize({start:a.start,end:h.start});g<=p?(u=this._lastRenderedContentOffset+g,this._removalFailures=0):(h.start=a.start,u=this._lastRenderedContentOffset,this._removalFailures++),b="to-start"}e.setRenderedRange(h),e.setRenderedContentOffset(u+n,b)}else n&&e.setRenderedContentOffset(this._lastRenderedContentOffset+n);this._lastScrollOffset=t}},{key:"_checkRenderedContentSize",value:function(){var e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}},{key:"_checkRenderedContentOffset",value:function(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}},{key:"_renderContentForCurrentOffset",value:function(){var e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;var i=this._averager.getAverageItemSize(),r=Math.min(e.getDataLength()-1,Math.floor(t/i)),a=Math.ceil(this._maxBufferPx/i),n=this._expandRange(this._getVisibleRangeForIndex(r),a,a);e.setRenderedRange(n),e.setRenderedContentOffset(i*n.start)}},{key:"_getVisibleRangeForIndex",value:function(e){var t=this._viewport,i={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},r=i.end-t.getDataLength();return r>0&&(i.start=Math.max(0,i.start-r)),i}},{key:"_expandRange",value:function(e,t,i){var r=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(r.getDataLength(),e.end+i)}}},{key:"_updateTotalContentSize",value:function(e){var t=this._viewport,i=t.getRenderedRange(),r=e+(t.getDataLength()-(i.end-i.start))*this._averager.getAverageItemSize();t.setTotalContentSize(r)}}]),e}();function c(e){return e._scrollStrategy}var u=function(){var e=function(){function e(){_classCallCheck(this,e),this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new l(this.minBufferPx,this.maxBufferPx)}return _createClass(e,[{key:"ngOnChanges",value:function(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=Object(r.f)(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=Object(r.f)(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[n.Cb([{provide:a.h,useFactory:c,deps:[Object(n.V)((function(){return e}))]}]),n.Bb()]}),e}(),b=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e}()}}]);