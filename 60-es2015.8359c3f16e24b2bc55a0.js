(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{IOBc:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("5HBU"),o=n("bTqV"),r=n("kmnG"),a=n("NFeN"),c=n("qFsG"),s=n("wZkO"),l=n("/t3+"),d=n("bSwM"),b=n("+0xr"),u=n("FKr1"),p=n("MutI"),m=n("fXoL");let h=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},imports:[[i.a,o.c,r.e,a.b,c.c,s.c,l.b,d.b,u.t,p.c,b.k]]}),e})()},Ivtv:function(e,t,n){"use strict";function i(e){if(e.value){if(11!=e.value.length)return{validConNum:!0};{let n,i,o=e.value,r=0;for(var t=0;t<o.length;t++){if(n=o.charAt(t),t<4){if(!isNaN(n))return{validConNum:!0};switch(n){case"A":n=10;break;case"B":n=12;break;case"C":n=13;break;case"D":n=14;break;case"E":n=15;break;case"F":n=16;break;case"G":n=17;break;case"H":n=18;break;case"I":n=19;break;case"J":n=20;break;case"K":n=21;break;case"L":n=23;break;case"M":n=24;break;case"N":n=25;break;case"O":n=26;break;case"P":n=27;break;case"Q":n=28;break;case"R":n=29;break;case"S":n=30;break;case"T":n=31;break;case"U":n=32;break;case"V":n=34;break;case"W":n=35;break;case"X":n=36;break;case"Y":n=37;break;case"Z":n=38}}else{if(isNaN(n))return{validConNum:!0};n=Number(n)}t==o.length-1?i=n:r+=n*Math.pow(2,t)}if((r%11==10?0:r%11)!=i)return{validConNum:!0}}}return null}n.d(t,"a",(function(){return i}))},XT37:function(e,t,n){"use strict";n.r(t);var i=n("tyNb"),o=n("5HBU"),r=n("STbY"),a=n("/1cH"),c=n("iadO"),s=n("bTqV"),l=n("7EHt"),d=n("kmnG"),b=n("NFeN"),u=n("Qu3c"),p=n("qFsG"),m=n("wZkO"),h=n("d3UM"),f=n("QibW"),v=n("0IaG"),g=n("/t3+"),x=n("bSwM"),w=n("M9IT"),y=n("xHqg"),S=n("A5z7"),k=n("bv9b"),X=n("XhcP"),C=n("FKr1"),W=n("1jcm"),M=n("+0xr"),_=n("Dh3D"),D=n("IOBc"),R=n("212X"),L=n("LPQX"),P=n("XNiG"),A=n("1G5W"),I=n("PVWW"),N=n("fXoL"),T=n("3Pt+"),q=n("JX91"),O=n("lJxs"),F=n("qXBG"),B=n("0Zc1"),z=n("ofXK"),j=n("XiUz"),E=n("EwFO");const J=["formDirective"];function V(e,t){if(1&e&&(N.Xb(0,"mat-option",32),N.Lc(1),N.Wb()),2&e){const e=t.$implicit,n=N.jc();N.pc("value",e.id)("disabled",!n.filterStep.includes(e)),N.Db(1),N.Nc(" ",e.code," ")}}function H(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Move Type is required "),N.Wb())}function U(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Date is required "),N.Wb())}function G(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Time is required "),N.Wb())}function $(e,t){if(1&e&&(N.Xb(0,"mat-option",33),N.Lc(1),N.Wb()),2&e){const e=t.$implicit;N.pc("value",e.id),N.Db(1),N.Nc(" ",e.full_name," ")}}function Y(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Place is required "),N.Wb())}let Q=(()=>{class e{constructor(e,t,n,i,o,r){if(this.matDialogRef=e,this._data=t,this.authService=n,this.commonService=i,this.datePipe=o,this._formBuilder=r,this.timeMin=null,this.timeMax=new Date,this.filterStep=[],this.errorMessage="",this.formMovement=this._formBuilder.group({id:[null,T.y.required],container:[null,T.y.required],move:[null,T.y.required],document:[null],date:[null,T.y.required],time:["00:00",T.y.required],place:[null,T.y.required],info:[null],update_by:[this.authService.user,T.y.required]}),this.updateMovement=new N.o,this.addMovement=new N.o,this.label=t.label,this.container=t.container,this.movement=t.movement,this.moveType=t.moveType,this.place=t.place,t.data){let e;t.data.date=new Date(t.data.date),this.formMovement.patchValue(t.data),this.movement.map((n,i)=>{n.id==t.data.id&&(e=i,this.movement[e-1]&&(this.timeMax=new Date(this.movement[e-1].date)),this.movement[e+1]&&(this.timeMin=new Date(this.movement[e+1].date)))}),this.formMovement.controls.move.disable()}else t.currenMovement&&(this.currenMovement=t.currenMovement),this.getStep(),this.formMovement.controls.id.disable(),this.formMovement.controls.time.setValue("00:00"),this.formMovement.controls.container.setValue(this.container.id),this.formMovement.controls.update_by.setValue(this.authService.user)}ngOnInit(){this.name=this.authService.name,this.filteredPlace=this.formMovement.controls.place.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.full_name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"full_name",this.place):[]))}onFormSubmit(e){if(e.valid){let t=JSON.parse(JSON.stringify(e.value));if("string"==typeof t.place)return void this.formMovement.controls.place.setValue(null);let n=this.datePipe.transform(new Date(t.date),"yyyy/MM/dd");switch(n+=" "+t.time+":00.0",delete t.time,t.date=n,this.label){case"Edit movement":this.updateMovement.emit(t);break;default:this.addMovement.emit(t)}}}getStep(){if(this.filterStep=[],0==this.movement.length)this.stepId=this.moveType.filter(e=>2==e.step||7==e.step||10==e.step),this.timeMin=null;else{let e;e=this.currenMovement?this.currenMovement.move:this.movement[0].move,this.timeMin=new Date(this.movement[0].date);let t=this.moveType.find(t=>t.id==e);if(t){let e=t.step;switch(e){case 1:this.stepId=this.moveType.filter(e=>2==e.step||7==e.step||10==e.step);break;case 2:case 3:case 4:case 5:this.stepId=this.moveType.filter(t=>t.step==e+1);break;case 6:case 7:this.stepId=this.moveType.filter(e=>1==e.step||8==e.step);break;case 10:this.stepId=this.moveType.filter(e=>1==e.step)}}}this.moveType.map(e=>{this.stepId.map(t=>{e.id==t.id&&this.filterStep.push(e)})})}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(v.f),N.Rb(v.a),N.Rb(F.a),N.Rb(B.a),N.Rb(z.f),N.Rb(T.d))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-content-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&N.Sc(J,!0),2&e&&N.wc(n=N.gc())&&(t.containerNgForm=n.first)},decls:63,vars:19,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-cost-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],[2,"display","none"],["inputCheck","","formControlName","id"],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","50",1,"pr-8"],["formControlName","move","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline","fxFlex","25",1,"pr-8"],["inputCheck","","matInput","","name","date","formControlName","date","required","",3,"matDatepicker","min","max","change"],["matSuffix","",3,"for"],["moveDatePicker",""],["inputCheck","","matInput","","type","time","formControlName","time","required",""],["inputCheck","","matInput","","formControlName","place","required","",3,"matAutocomplete"],[3,"displayWith"],["autoOnPlace","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","matInput","","formControlName","document"],["inputCheck","","matInput","","formControlName","info"],["inputCheck","","matInput","",3,"readonly","value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"],[3,"value","disabled"],[3,"value"]],template:function(e,t){if(1&e&&(N.Xb(0,"div",0),N.Xb(1,"mat-toolbar",1),N.Xb(2,"mat-toolbar-row",2),N.Xb(3,"span",3),N.Lc(4),N.Wb(),N.Xb(5,"button",4),N.fc("click",(function(e){return t.matDialogRef.close()})),N.Xb(6,"mat-icon"),N.Lc(7,"close"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Xb(8,"div",5),N.Xb(9,"div"),N.Xb(10,"form",6),N.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.formMovement)})),N.Xb(11,"div",7),N.Sb(12,"input",8),N.Wb(),N.Xb(13,"div",9),N.Xb(14,"mat-form-field",10),N.Xb(15,"mat-label"),N.Lc(16,"Move"),N.Wb(),N.Xb(17,"mat-select",11),N.Jc(18,V,2,3,"mat-option",12),N.Wb(),N.Jc(19,H,2,0,"mat-error",13),N.Wb(),N.Xb(20,"mat-form-field",14),N.Xb(21,"mat-label"),N.Lc(22,"Date"),N.Wb(),N.Xb(23,"input",15),N.fc("change",(function(e){return t.commonService.setDateStr(e)})),N.Wb(),N.Sb(24,"mat-datepicker-toggle",16),N.Sb(25,"mat-datepicker",null,17),N.Jc(27,U,2,0,"mat-error",13),N.Wb(),N.Xb(28,"mat-form-field",14),N.Xb(29,"mat-label"),N.Lc(30,"Time"),N.Wb(),N.Sb(31,"input",18),N.Jc(32,G,2,0,"mat-error",13),N.Wb(),N.Xb(33,"mat-form-field",10),N.Xb(34,"mat-label"),N.Lc(35,"Place"),N.Wb(),N.Sb(36,"input",19),N.Xb(37,"mat-autocomplete",20,21),N.Jc(39,$,2,2,"mat-option",22),N.kc(40,"async"),N.Wb(),N.Jc(41,Y,2,0,"mat-error",13),N.Wb(),N.Xb(42,"mat-form-field",10),N.Xb(43,"mat-label"),N.Lc(44,"Document"),N.Wb(),N.Sb(45,"input",23),N.Wb(),N.Xb(46,"mat-form-field",10),N.Xb(47,"mat-label"),N.Lc(48,"Info"),N.Wb(),N.Sb(49,"input",24),N.Wb(),N.Xb(50,"mat-form-field",10),N.Xb(51,"mat-label"),N.Lc(52,"Update by"),N.Wb(),N.Sb(53,"input",25),N.Sb(54,"input",26),N.Wb(),N.Wb(),N.Xb(55,"div",27),N.Xb(56,"div",28),N.Lc(57),N.Wb(),N.Wb(),N.Xb(58,"div",29),N.Xb(59,"button",30),N.Lc(60,"Submit"),N.Wb(),N.Xb(61,"button",31),N.fc("click",(function(e){return t.matDialogRef.close()})),N.Lc(62,"Cancel"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e){const e=N.xc(26),n=N.xc(38);N.Db(4),N.Mc(t.label),N.Db(6),N.pc("formGroup",t.formMovement),N.Db(8),N.pc("ngForOf",t.moveType),N.Db(1),N.pc("ngIf",t.formMovement.get("move").hasError("required")),N.Db(4),N.pc("matDatepicker",e)("min",t.timeMin)("max",t.timeMax),N.Db(1),N.pc("for",e),N.Db(3),N.pc("ngIf",t.formMovement.get("date").hasError("required")),N.Db(5),N.pc("ngIf",t.formMovement.get("time").hasError("required")),N.Db(4),N.pc("matAutocomplete",n),N.Db(1),N.pc("displayWith",t.commonService.displayFn.bind(t,"full_name",t.place)),N.Db(2),N.pc("ngForOf",N.lc(40,17,t.filteredPlace)),N.Db(2),N.pc("ngIf",t.formMovement.get("place").hasError("required")),N.Db(12),N.pc("readonly",!0)("value",t.name),N.Db(4),N.Mc(t.errorMessage)}},directives:[g.a,g.c,j.b,j.d,j.c,s.b,b.a,v.d,E.a,T.A,T.q,T.h,T.b,T.p,T.g,d.c,d.f,h.a,T.w,z.s,z.t,p.b,c.b,c.d,d.h,c.a,a.c,a.a,C.n,d.b],pipes:[z.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-content-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-content-modal-dialog{width:1080px}}.container-details-content-modal-dialog .mat-dialog-container{padding:0}.container-details-content-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-content-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-content-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();const K=["formDirective"];function Z(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Type is required "),N.Wb())}let ee=(()=>{class e{constructor(e,t,n,i,o,r){this.matDialogRef=e,this._data=t,this.authService=n,this.commonService=i,this.datePipe=o,this._formBuilder=r,this.errorMessage="",this.formNote=this._formBuilder.group({type:["",T.y.required],content:["",T.y.required],info:[""],photo:[""],update_by:[this.authService.user,T.y.required]}),this.addNote=new N.o,this.label=t.label,this.id=t.id}ngOnInit(){this.name=this.authService.name}onFormSubmit(e){if(e.valid){let t=e.value;t.cont_move=this.id,this.addNote.emit(t)}}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(v.f),N.Rb(v.a),N.Rb(F.a),N.Rb(B.a),N.Rb(z.f),N.Rb(T.d))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-content-note-modal-dialog"]],viewQuery:function(e,t){var n;1&e&&N.Sc(K,!0),2&e&&N.wc(n=N.gc())&&(t.containerNgForm=n.first)},decls:42,vars:6,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","","id","shipment-cost-modal","fxLayout","column",1,"p-16","pb-0","m-0",2,"overflow","auto"],["fxLayout","column","fxLayoutAlign","start","name","form",3,"formGroup","keydown.enter","ngSubmit"],["fxLayout","row wrap","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","25",1,"pr-8"],["formControlName","type","required",""],["value","repair"],["value","clean"],[4,"ngIf"],["appearance","outline","fxFlex","75",1,"pr-8"],["inputCheck","","matInput","","formControlName","content"],["appearance","outline","fxFlex","100",1,"pr-8"],["inputCheck","","matInput","","formControlName","photo"],["appearance","outline","fxFlex","50",1,"pr-8"],["inputCheck","","matInput","",3,"readonly","value"],["inputCheck","","matInput","","formControlName","update_by",2,"display","none"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],[1,"mat-error"],["fxLayout","row","fxLayoutAlign","center","fxFlex","1 0 auto",1,"p-16"],["type","submit","mat-raised-button","","color","accent",1,"mr-8"],["type","button","mat-raised-button","","color","warn",1,"mr-8",3,"click"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"mat-toolbar",1),N.Xb(2,"mat-toolbar-row",2),N.Xb(3,"span",3),N.Lc(4),N.Wb(),N.Xb(5,"button",4),N.fc("click",(function(e){return t.matDialogRef.close()})),N.Xb(6,"mat-icon"),N.Lc(7,"close"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Xb(8,"div",5),N.Xb(9,"div"),N.Xb(10,"form",6),N.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.formNote)})),N.Xb(11,"div",7),N.Xb(12,"mat-form-field",8),N.Xb(13,"mat-label"),N.Lc(14,"Type"),N.Wb(),N.Xb(15,"mat-select",9),N.Xb(16,"mat-option",10),N.Lc(17,"repair"),N.Wb(),N.Xb(18,"mat-option",11),N.Lc(19,"clean"),N.Wb(),N.Wb(),N.Jc(20,Z,2,0,"mat-error",12),N.Wb(),N.Xb(21,"mat-form-field",13),N.Xb(22,"mat-label"),N.Lc(23,"Content"),N.Wb(),N.Sb(24,"input",14),N.Wb(),N.Xb(25,"mat-form-field",15),N.Xb(26,"mat-label"),N.Lc(27,"Photo"),N.Wb(),N.Sb(28,"input",16),N.Wb(),N.Xb(29,"mat-form-field",17),N.Xb(30,"mat-label"),N.Lc(31,"Update by"),N.Wb(),N.Sb(32,"input",18),N.Sb(33,"input",19),N.Wb(),N.Wb(),N.Xb(34,"div",20),N.Xb(35,"div",21),N.Lc(36),N.Wb(),N.Wb(),N.Xb(37,"div",22),N.Xb(38,"button",23),N.Lc(39,"Submit"),N.Wb(),N.Xb(40,"button",24),N.fc("click",(function(e){return t.matDialogRef.close()})),N.Lc(41,"Cancel"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(4),N.Mc(t.label),N.Db(6),N.pc("formGroup",t.formNote),N.Db(10),N.pc("ngIf",t.formNote.get("type").hasError("required")),N.Db(12),N.pc("readonly",!0)("value",t.name),N.Db(4),N.Mc(t.errorMessage))},directives:[g.a,g.c,j.b,j.d,j.c,s.b,b.a,v.d,E.a,T.A,T.q,T.h,d.c,d.f,h.a,T.p,T.g,T.w,C.n,z.t,p.b,T.b,d.b],styles:["@media screen and (min-width:600px)and (max-width:959px){.container-details-content-note-modal-dialog{width:100%}}@media screen and (min-width:960px){.container-details-content-note-modal-dialog{width:1080px}}.container-details-content-note-modal-dialog .mat-dialog-container{padding:0}.container-details-content-note-modal-dialog .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.container-details-content-note-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.container-details-content-note-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}"],encapsulation:2}),e})();var te=n("HX77"),ne=n("2Vo4"),ie=n("tk/3");let oe=(()=>{class e{constructor(e,t){this._httpClient=e,this.authService=t,this.onDataChanged=new ne.a([]),this.onContainerChanged=new ne.a([])}resolve(e){this.authService.routerData=e;let t=e.params.id;return new Promise((e,n)=>{Promise.all([this.getContainerById(t),this.getData()]).then(([t])=>{e()},n)})}getData(){let e={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((t,n)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/data",e).subscribe(e=>{this.seaport=e[1],this.contType=e[2],this.moveType=e[3],this.partner=e[7],this.onDataChanged.next(e),t(e)},n)})}getContainerById(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/id/"+e,t).subscribe(e=>{this.container=e[0][0],this.movement=e[1],this.moveNote=e[2],this.onContainerChanged.next(e),n(e)},i)})}updateContainer(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/pln/container",e,t).subscribe(e=>{n(e)},i)})}createMovement(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/pln/container/movement",e,t).subscribe(e=>{n(e)},i)})}updateMovement(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.put(this.authService.apiUrl+"/pln/container/movement",e,t).subscribe(e=>{n(e)},i)})}deleteMovement(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.delete(this.authService.apiUrl+"/pln/container/movement/"+e,t).subscribe(e=>{n(e)},i)})}createMoveNote(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/pln/container/movement-note/",e,t).subscribe(e=>{n(e)},i)})}deleteMoveNote(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.delete(this.authService.apiUrl+"/pln/container/movement-note/"+e,t).subscribe(e=>{n(e)},i)})}getShipmentByDocument(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.get(this.authService.apiUrl+"/pln/container/shipment/"+e,t).subscribe(e=>{n(e)},i)})}createPlnMove(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.post(this.authService.apiUrl+"/pln/pln-move/",e,t).subscribe(e=>{n(e)},i)})}deletePlnMove(e){let t={headers:new ie.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((n,i)=>{this._httpClient.delete(this.authService.apiUrl+"/pln/pln-move/"+e,t).subscribe(e=>{n(e)},i)})}}return e.\u0275fac=function(t){return new(t||e)(N.bc(ie.a),N.bc(F.a))},e.\u0275prov=N.Nb({token:e,factory:e.\u0275fac}),e})();var re=n("B9zo"),ae=n("fE3o"),ce=n("0JVi"),se=n("znSr");function le(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",8),N.fc("click",(function(t){N.Bc(e);const n=N.jc();return t.stopPropagation(),n.changeScreen(!0)})),N.Xb(1,"mat-icon"),N.Lc(2,"flip_to_front"),N.Wb(),N.Wb()}}function de(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",8),N.fc("click",(function(t){N.Bc(e);const n=N.jc();return t.stopPropagation(),n.changeScreen(!1)})),N.Xb(1,"mat-icon"),N.Lc(2,"flip_to_back"),N.Wb(),N.Wb()}}let be=(()=>{class e{constructor(e,t){this.authService=e,this._fuseConfigService=t,this.fullScreen=!1,this.toggleSidebar=new N.o,this.showHideBar=new N.o,this.refreshPage=new N.o,this._unsubscribeAll=new P.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(e){this.fullScreen=e,this.authService.changeScreen.next(e),this._fuseConfigService.config=this.fullScreen?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(F.a),N.Rb(ce.b))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-header"]],inputs:{sidebarName:"sidebarName"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage"},decls:23,vars:2,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-12","mr-12",3,"click"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8 mr-8",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(N.Xb(0,"mat-toolbar",0),N.Xb(1,"div",1),N.Xb(2,"div",2),N.Xb(3,"div",3),N.Xb(4,"button",4),N.fc("click",(function(e){return t.toggleSidebar.emit(t.sidebarName)})),N.Xb(5,"mat-icon"),N.Lc(6,"menu"),N.Wb(),N.Wb(),N.Xb(7,"button",5),N.fc("click",(function(e){return t.showHideBar.emit()})),N.Xb(8,"mat-icon"),N.Lc(9,"menu"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Xb(10,"div",6),N.Sb(11,"div",7),N.Xb(12,"button",8),N.fc("click",(function(e){return e.stopPropagation(),t.refreshPage.emit()})),N.Xb(13,"mat-icon",9),N.Lc(14,"refresh"),N.Wb(),N.Wb(),N.Sb(15,"div",7),N.Jc(16,le,3,0,"button",10),N.Jc(17,de,3,0,"button",10),N.Sb(18,"div",7),N.Xb(19,"button",8),N.fc("click",(function(e){return t.toggleSidebar.emit("container-details-setting")})),N.Xb(20,"mat-icon"),N.Lc(21,"settings"),N.Wb(),N.Wb(),N.Sb(22,"div",7),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(16),N.pc("ngIf",!t.fullScreen),N.Db(1),N.pc("ngIf",t.fullScreen))},directives:[g.a,j.b,j.e,j.d,j.c,s.b,se.b,b.a,z.t],styles:["container-details-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}container-details-header.below{z-index:2}container-details-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}container-details-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}container-details-header .logo .logo-icon{width:38px}container-details-header .chat-panel-toggle-button,container-details-header .language-button,container-details-header .quick-panel-toggle-button,container-details-header .user-button,container-details-header fuse-search-bar{min-width:64px;height:64px}@media screen and (max-width:599px){container-details-header .chat-panel-toggle-button,container-details-header .language-button,container-details-header .quick-panel-toggle-button,container-details-header .user-button,container-details-header fuse-search-bar{height:56px}}container-details-header .navbar-toggle-button{min-width:56px;height:56px}container-details-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){container-details-header .toolbar-separator{height:56px}}"],encapsulation:2}),e})();function ue(e,t){if(1&e){const e=N.Yb();N.Xb(0,"mat-icon",7),N.fc("click",(function(t){return N.Bc(e),N.jc().openAddMoveModal.emit()})),N.Lc(1,"add"),N.Wb()}}function pe(e,t){if(1&e){const e=N.Yb();N.Xb(0,"mat-icon",17),N.fc("click",(function(t){N.Bc(e);const n=N.jc(2).index,i=N.jc();return t.stopPropagation(),i.copyShipment.emit(n)})),N.Lc(1,"file_copy"),N.Wb()}}function me(e,t){if(1&e){const e=N.Yb();N.Vb(0),N.Xb(1,"td"),N.Xb(2,"a",15),N.fc("click",(function(t){N.Bc(e);const n=N.jc().$implicit,i=N.jc();return t.stopPropagation(),i.getShipment.emit(n)})),N.Lc(3),N.Wb(),N.Wb(),N.Xb(4,"td"),N.Jc(5,pe,2,0,"mat-icon",16),N.Wb(),N.Ub()}if(2&e){const e=N.jc(),t=e.$implicit,n=e.index,i=N.jc();N.Db(3),N.Mc(t.document),N.Db(2),N.pc("ngIf",i.act.copy&&"TREXP"!=t.move_code&&!t.shipment_code&&i.movement[n+1]&&i.movement[n+1].shipment_code)}}function he(e,t){if(1&e){const e=N.Yb();N.Vb(0),N.Xb(1,"td"),N.Lc(2),N.Wb(),N.Xb(3,"td"),N.Xb(4,"a",18),N.fc("click",(function(t){return N.Bc(e),t.stopPropagation()})),N.Lc(5),N.Wb(),N.Wb(),N.Ub()}if(2&e){const e=N.jc().$implicit;N.Db(2),N.Mc(e.document),N.Db(2),N.pc("routerLink","/apps/pacific-logistics-network/shipment/detail/"+e.shipment_id+"/overview"),N.Db(1),N.Mc(e.shipment_code)}}function fe(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",19),N.fc("click",(function(t){N.Bc(e);const n=N.jc().$implicit;return N.jc().openAddMoveModal.emit(n)})),N.Xb(1,"mat-icon"),N.Lc(2,"add"),N.Wb(),N.Xb(3,"span"),N.Lc(4,"Add Movement"),N.Wb(),N.Wb()}}function ve(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",19),N.fc("click",(function(t){N.Bc(e);const n=N.jc().$implicit;return N.jc().openEditMoveModal.emit(n)})),N.Xb(1,"mat-icon"),N.Lc(2,"edit"),N.Wb(),N.Xb(3,"span"),N.Lc(4,"Edit Movement"),N.Wb(),N.Wb()}}function ge(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",14),N.fc("click",(function(t){N.Bc(e);const n=N.jc().$implicit;return N.jc().deleteMovement.emit(n)})),N.Xb(1,"mat-icon"),N.Lc(2,"delete"),N.Wb(),N.Xb(3,"span"),N.Lc(4,"Remove Movement"),N.Wb(),N.Wb()}}function xe(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",14),N.fc("click",(function(t){N.Bc(e);const n=N.jc().$implicit;return N.jc().deletePlnMove.emit(n.pln_move_id)})),N.Xb(1,"mat-icon"),N.Lc(2,"delete"),N.Wb(),N.Xb(3,"span"),N.Lc(4,"Remove Shipment"),N.Wb(),N.Wb()}}function we(e,t){if(1&e){const e=N.Yb();N.Xb(0,"button",14),N.fc("click",(function(t){N.Bc(e);const n=N.jc().$implicit;return N.jc().savePlnMove.emit(n)})),N.Xb(1,"mat-icon"),N.Lc(2,"save"),N.Wb(),N.Xb(3,"span"),N.Lc(4,"Save Shipment"),N.Wb(),N.Wb()}}function ye(e,t){if(1&e){const e=N.Yb();N.Xb(0,"tr"),N.Xb(1,"td"),N.Lc(2),N.Wb(),N.Xb(3,"td"),N.Lc(4),N.Wb(),N.Xb(5,"td"),N.Lc(6),N.kc(7,"date"),N.Wb(),N.Xb(8,"td",8),N.Lc(9),N.Wb(),N.Jc(10,me,6,2,"ng-container",9),N.Jc(11,he,6,3,"ng-container",9),N.Xb(12,"td"),N.Lc(13),N.kc(14,"date"),N.Wb(),N.Xb(15,"td"),N.Lc(16),N.Wb(),N.Xb(17,"td",4),N.Xb(18,"mat-icon",10),N.fc("click",(function(t){return N.Bc(e),t.stopPropagation()})),N.Lc(19,"more_vert"),N.Wb(),N.Xb(20,"mat-menu",null,11),N.Jc(22,fe,5,0,"button",12),N.Jc(23,ve,5,0,"button",12),N.Jc(24,ge,5,0,"button",13),N.Jc(25,xe,5,0,"button",13),N.Jc(26,we,5,0,"button",13),N.Xb(27,"button",14),N.fc("click",(function(n){N.Bc(e);const i=t.$implicit;return N.jc().openAddNoteModal.emit(i)})),N.Xb(28,"mat-icon"),N.Lc(29,"note"),N.Wb(),N.Xb(30,"span"),N.Lc(31,"Note"),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()}if(2&e){const e=t.$implicit,n=t.index,i=N.xc(21),o=N.jc();N.Db(2),N.Mc(n+1),N.Db(2),N.Mc(e.move_code),N.Db(2),N.Mc(N.mc(7,15,e.date,"MM/dd/yyyy HH:mm")),N.Db(2),N.pc("matTooltip",e.place_full_name),N.Db(1),N.Mc(e.place_short_name),N.Db(1),N.pc("ngIf",!e.shipment_code),N.Db(1),N.pc("ngIf",e.shipment_code),N.Db(2),N.Mc(N.mc(14,18,e.update_at,"MM/dd/yyyy HH:mm")),N.Db(3),N.Mc(e.update_by_name),N.Db(2),N.pc("matMenuTriggerFor",i),N.Db(4),N.pc("ngIf",o.permission.create),N.Db(1),N.pc("ngIf",o.permission.edit&&e.id),N.Db(1),N.pc("ngIf",o.permission.delete),N.Db(1),N.pc("ngIf",o.permission.delete&&e.pln_move_id),N.Db(1),N.pc("ngIf",o.permission.create&&!e.pln_move_id&&e.document)}}let Se=(()=>{class e{constructor(){this.deleteMovement=new N.o,this.openAddMoveModal=new N.o,this.openEditMoveModal=new N.o,this.openAddNoteModal=new N.o,this.getShipment=new N.o,this.savePlnMove=new N.o,this.deletePlnMove=new N.o,this.copyShipment=new N.o,this._unsubscribeAll=new P.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-content-movement"]],inputs:{act:"act",container:"container",movement:"movement",permission:"permission"},outputs:{deleteMovement:"deleteMovement",openAddMoveModal:"openAddMoveModal",openEditMoveModal:"openEditMoveModal",openAddNoteModal:"openAddNoteModal",getShipment:"getShipment",savePlnMove:"savePlnMove",deletePlnMove:"deletePlnMove",copyShipment:"copyShipment"},decls:28,vars:2,consts:[[1,"group","mb-12","mt-12"],["fxLayout","row","fxLayoutAlign","start center"],[2,"overflow","auto","height","350px"],[1,"simple","table-movement"],[1,"w-40","sticky-right-col"],["class","cursor-pointer mr-8","color","accent",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["color","accent",1,"cursor-pointer","mr-8",3,"click"],[3,"matTooltip"],[4,"ngIf"],["aria-label","More",1,"cursor-pointer",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","edit",3,"click",4,"ngIf"],["mat-menu-item","","aria-label","remove",3,"click",4,"ngIf"],["mat-menu-item","","aria-label","remove",3,"click"],[1,"cursor-pointer",3,"click"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"click"],[1,"cursor-pointer",3,"routerLink","click"],["mat-menu-item","","aria-label","edit",3,"click"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"h2",1),N.Xb(2,"span"),N.Lc(3,"Container movement"),N.Wb(),N.Wb(),N.Xb(4,"div",2),N.Xb(5,"table",3),N.Xb(6,"thead"),N.Xb(7,"tr"),N.Xb(8,"th"),N.Lc(9,"No"),N.Wb(),N.Xb(10,"th"),N.Lc(11,"Type"),N.Wb(),N.Xb(12,"th"),N.Lc(13,"Date"),N.Wb(),N.Xb(14,"th"),N.Lc(15,"Place"),N.Wb(),N.Xb(16,"th"),N.Lc(17,"Document"),N.Wb(),N.Xb(18,"th"),N.Lc(19,"Shipment"),N.Wb(),N.Xb(20,"th"),N.Lc(21,"Update at"),N.Wb(),N.Xb(22,"th"),N.Lc(23,"Update by"),N.Wb(),N.Xb(24,"th",4),N.Jc(25,ue,2,0,"mat-icon",5),N.Wb(),N.Wb(),N.Wb(),N.Xb(26,"tbody"),N.Jc(27,ye,32,21,"tr",6),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(25),N.pc("ngIf",t.permission.create),N.Db(2),N.pc("ngForOf",t.movement))},directives:[j.d,j.c,z.t,z.s,b.a,u.a,r.c,r.d,r.a,i.j],pipes:[z.f],styles:["container-details-content-movement .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-movement .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-movement .group .table-movement{font-size:12px}container-details-content-movement .group .table-movement td,container-details-content-movement .group .table-movement th{padding:8px;font-size:12px;white-space:nowrap}container-details-content-movement .group .table-movement thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}container-details-content-movement .group .table-movement tfoot td{font-weight:600}container-details-content-movement .group .table-movement .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-movement .group .table-movement .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-movement .group .table-movement .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#fff}container-details-content-movement .group .table-movement tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-movement .group .table-movement tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:I.a}}),e})();function ke(e,t){if(1&e){const e=N.Yb();N.Xb(0,"tr"),N.Xb(1,"td",3),N.Lc(2),N.Wb(),N.Xb(3,"td"),N.Lc(4),N.Wb(),N.Xb(5,"td"),N.Lc(6),N.kc(7,"date"),N.Wb(),N.Xb(8,"td"),N.Lc(9),N.Wb(),N.Xb(10,"td",4),N.Lc(11),N.Wb(),N.Xb(12,"td",5),N.Xb(13,"a",7),N.fc("click",(function(n){N.Bc(e);const i=t.$implicit;return N.jc().viewLink(i.photo)})),N.Lc(14),N.Wb(),N.Wb(),N.Xb(15,"td"),N.Lc(16),N.Wb(),N.Xb(17,"td",8),N.Xb(18,"mat-icon",9),N.fc("click",(function(n){N.Bc(e);const i=t.$implicit,o=N.jc();return n.stopPropagation(),o.deleteNote.emit(i)})),N.Lc(19,"delete"),N.Wb(),N.Wb(),N.Wb()}if(2&e){const e=t.$implicit,n=t.index;N.Db(2),N.Mc(n+1),N.Db(2),N.Mc(e.move_code),N.Db(2),N.Mc(N.mc(7,7,e.date,"MM/dd/yyyy HH:mm")),N.Db(3),N.Mc(e.type),N.Db(2),N.Mc(e.content),N.Db(3),N.Mc(e.photo),N.Db(2),N.Mc(e.info)}}let Xe=(()=>{class e{constructor(){this.deleteNote=new N.o,this._unsubscribeAll=new P.a}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}viewLink(e){/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)&&window.open(e,"_blank")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-content-note"]],inputs:{container:"container",moveNote:"moveNote",permission:"permission"},outputs:{deleteNote:"deleteNote"},decls:24,vars:2,consts:[[1,"group","mb-12","mt-12"],[2,"overflow","auto"],[1,"simple","table-note"],[1,"text-center"],[1,"w-200"],[1,"w-160"],[4,"ngFor","ngForOf"],[3,"click"],[1,"w-60"],["color","warn",1,"cursor-pointer",3,"click"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"h2"),N.Lc(2),N.Wb(),N.Xb(3,"div",1),N.Xb(4,"table",2),N.Xb(5,"thead"),N.Xb(6,"tr"),N.Xb(7,"th",3),N.Lc(8,"No"),N.Wb(),N.Xb(9,"th"),N.Lc(10,"Move"),N.Wb(),N.Xb(11,"th"),N.Lc(12,"Date"),N.Wb(),N.Xb(13,"th"),N.Lc(14,"Type"),N.Wb(),N.Xb(15,"th",4),N.Lc(16,"Content"),N.Wb(),N.Xb(17,"th",5),N.Lc(18,"Photo"),N.Wb(),N.Xb(19,"th"),N.Lc(20,"Info"),N.Wb(),N.Sb(21,"th"),N.Wb(),N.Wb(),N.Xb(22,"tbody"),N.Jc(23,ke,20,10,"tr",6),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(2),N.Nc("Note(",t.moveNote.length,")"),N.Db(21),N.pc("ngForOf",t.moveNote))},directives:[z.s,b.a],pipes:[z.f],styles:["container-details-content-note .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}container-details-content-note .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}container-details-content-note .group .table-note{font-size:12px}container-details-content-note .group .table-note td,container-details-content-note .group .table-note th{padding:8px;font-size:12px;word-break:break-all}container-details-content-note .group .table-note thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}container-details-content-note .group .table-note tfoot td{font-weight:600}container-details-content-note .group .table-note .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}container-details-content-note .group .table-note .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}container-details-content-note .group .table-note .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#b3e5fc}container-details-content-note .group .table-note tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}container-details-content-note .group .table-note tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:I.a}}),e})(),Ce=(()=>{class e{constructor(e,t){this._activatedRoute=e,this.authService=t,this.deleteMovement=new N.o,this.openAddMoveModal=new N.o,this.openEditMoveModal=new N.o,this.openAddNoteModal=new N.o,this.deleteNote=new N.o,this.savePlnMove=new N.o,this.deletePlnMove=new N.o,this.getShipment=new N.o,this.copyShipment=new N.o,this.height=560,this._unsubscribeAll=new P.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(i.a),N.Rb(F.a))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-content"]],inputs:{act:"act",container:"container",movement:"movement",moveType:"moveType",partner:"partner",moveNote:"moveNote",permission:"permission"},outputs:{deleteMovement:"deleteMovement",openAddMoveModal:"openAddMoveModal",openEditMoveModal:"openEditMoveModal",openAddNoteModal:"openAddNoteModal",deleteNote:"deleteNote",savePlnMove:"savePlnMove",deletePlnMove:"deletePlnMove",getShipment:"getShipment",copyShipment:"copyShipment"},decls:3,vars:9,consts:[["fxLayout","column"],[3,"act","container","movement","permission","deleteMovement","openAddMoveModal","savePlnMove","deletePlnMove","getShipment","copyShipment","openEditMoveModal","openAddNoteModal"],[3,"container","moveNote","permission","deleteNote"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"container-details-content-movement",1),N.fc("deleteMovement",(function(e){return t.deleteMovement.emit(e)}))("openAddMoveModal",(function(e){return t.openAddMoveModal.emit(e)}))("savePlnMove",(function(e){return t.savePlnMove.emit(e)}))("deletePlnMove",(function(e){return t.deletePlnMove.emit(e)}))("getShipment",(function(e){return t.getShipment.emit(e)}))("copyShipment",(function(e){return t.copyShipment.emit(e)}))("openEditMoveModal",(function(e){return t.openEditMoveModal.emit(e)}))("openAddNoteModal",(function(e){return t.openAddNoteModal.emit(e)})),N.Wb(),N.Xb(2,"container-details-content-note",2),N.fc("deleteNote",(function(e){return t.deleteNote.emit(e)})),N.Wb(),N.Wb()),2&e&&(N.Ic("height",t.height,"px"),N.Db(1),N.pc("act",t.act)("container",t.container)("movement",t.movement)("permission",t.permission),N.Db(1),N.pc("container",t.container)("moveNote",t.moveNote)("permission",t.permission))},directives:[j.d,Se,Xe],styles:[""],encapsulation:2,data:{animation:I.a}}),e})();const We=["formDirective"],Me=["sidebarPerfectScroll"],_e=function(e){return{"mt-32":e}};function De(e,t){if(1&e&&(N.Xb(0,"div",10),N.Xb(1,"h2"),N.Lc(2),N.Wb(),N.Xb(3,"div",11),N.Lc(4),N.Wb(),N.Wb()),2&e){const e=N.jc(),t=e.$implicit;N.pc("ngClass",N.rc(3,_e,0==e.index)),N.Db(2),N.Mc(t.name),N.Db(2),N.Mc(t.value)}}function Re(e,t){if(1&e&&(N.Xb(0,"div"),N.Jc(1,De,5,5,"div",9),N.Wb()),2&e){const e=t.$implicit;N.Db(1),N.pc("ngIf",e.value)}}let Le=(()=>{class e{constructor(e,t,n,i,o){this.formBuilder=e,this.authService=t,this._fuseSidebarService=n,this.commonService=i,this.datePipe=o,this.sidebarPage=new N.o,this.height=560,this.form=[{name:"Container number",value:null},{name:"Type",value:null},{name:"Principal",value:null},{name:"Status",value:null},{name:"Grade",value:null},{name:"Info",value:null}],this._unsubscribeAll=new P.a}ngOnInit(){this.form=[{name:"Container number",value:this.container.cont_number},{name:"Type",value:this.container.cont_type_code},{name:"Code",value:this.container.cont_code},{name:"Principal",value:this.container.partner_short_name},{name:"Status",value:this.container.status?"Valid":"Invalid"},{name:"Grade",value:this.container.grade},{name:"Info",value:this.container.info}],this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-18}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-18:this.authService.screenHeight-64-64-18})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngAfterViewInit(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(T.d),N.Rb(F.a),N.Rb(te.a),N.Rb(B.a),N.Rb(z.f))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-sidebar-view"]],viewQuery:function(e,t){var n;1&e&&(N.Sc(We,!0),N.Sc(Me,!0)),2&e&&(N.wc(n=N.gc())&&(t.searchNgForm=n.first),N.wc(n=N.gc())&&(t.sidebarPerfectScroll=n.first))},inputs:{container:"container"},outputs:{sidebarPage:"sidebarPage"},decls:10,vars:3,consts:[["fxLayout","column",2,"border-right","1px solid #E0E0E0"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","45",1,"ml-8","mr-8"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],["sidebarPerfectScroll",""],[1,"navbar-content"],[4,"ngFor","ngForOf"],["class","group",3,"ngClass",4,"ngIf"],[1,"group",3,"ngClass"],[1,"item"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Xb(1,"div",1),N.Xb(2,"div",2),N.Sb(3,"div",3),N.Xb(4,"button",4),N.fc("click",(function(e){return t.sidebarPage.emit("form")})),N.Lc(5," Edit "),N.Wb(),N.Wb(),N.Wb(),N.Xb(6,"div",5,6),N.Xb(8,"div",7),N.Jc(9,Re,2,1,"div",8),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(6),N.Ic("height",t.height,"px"),N.Db(3),N.pc("ngForOf",t.form))},directives:[j.d,j.c,j.b,s.b,E.a,z.s,z.t,z.q,se.a],styles:["container-details-sidebar-view{-webkit-user-drag:auto}container-details-sidebar-view .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-sidebar-view .navbar-scroll-container{background:#fff!important}container-details-sidebar-view .navbar-scroll-container .navbar-content{padding-top:0}container-details-sidebar-view .navbar-scroll-container .navbar-content .group{margin:0 16px 28px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;border:1px solid rgba(0,0,0,.12)}container-details-sidebar-view .navbar-scroll-container .navbar-content .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}container-details-sidebar-view .navbar-scroll-container .navbar-content .group .item{padding:1.2em 0 .8em 1em;font-size:16px}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();var Pe=n("Ivtv");const Ae=["formDirective"],Ie=["sidebarPerfectScroll"];function Ne(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Cont number is required "),N.Wb())}function Te(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Invalid container number "),N.Wb())}function qe(e,t){if(1&e&&(N.Xb(0,"mat-option",25),N.Lc(1),N.Wb()),2&e){const e=t.$implicit;N.pc("value",e.id),N.Db(1),N.Mc(e.code)}}function Oe(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Cont type is required "),N.Wb())}function Fe(e,t){if(1&e&&(N.Xb(0,"mat-option",28),N.Lc(1),N.Wb()),2&e){const e=t.$implicit;N.pc("value",e.id)("matTooltip",e.full_name),N.Db(1),N.Nc(" ",e.short_name," ")}}function Be(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Principal is required "),N.Wb())}function ze(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Status is required "),N.Wb())}function je(e,t){1&e&&(N.Xb(0,"mat-error"),N.Lc(1," Grade is required "),N.Wb())}let Ee=(()=>{class e{constructor(e,t,n,i){this.formBuilder=e,this.authService=t,this._fuseSidebarService=n,this.commonService=i,this.sidebarPage=new N.o,this.editContainer=new N.o,this.filteredContType=[],this.form=this.formBuilder.group({id:[""],cont_number:["",[T.y.required,Pe.a]],cont_type:["",T.y.required],principal:["",T.y.required],status:[0,T.y.required],grade:["U",T.y.required],info:[""]}),this.now=new Date,this.height=560,this._unsubscribeAll=new P.a}ngOnInit(){this.form.patchValue(this.container),this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-18}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-18:this.authService.screenHeight-64-64-18}),this.filteredPartner=this.form.controls.principal.valueChanges.pipe(Object(q.a)(""),Object(O.a)(e=>e?"string"==typeof e?e:e.short_name:null),Object(O.a)(e=>e?this.commonService.filterData(e,"short_name",this.partner):[]))}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.partner&&(e.partner.currentValue||null==e.partner.currentValue)&&(this.partner=e.partner.currentValue),e.contType&&(e.contType.currentValue||null==e.contType.currentValue)&&(this.contType=e.contType.currentValue)}ngAfterViewInit(){this._fuseSidebarService.onSidebarChanged.next(this.sidebarPerfectScroll.nativeElement)}setCheck(e){e.check=!e.check}resetForm(){this.searchNgForm.resetForm()}onFormSubmit(e){e.valid&&this.editContainer.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(T.d),N.Rb(F.a),N.Rb(te.a),N.Rb(B.a))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-sidebar-form"]],viewQuery:function(e,t){var n;1&e&&(N.Sc(Ae,!0),N.Sc(Ie,!0)),2&e&&(N.wc(n=N.gc())&&(t.searchNgForm=n.first),N.wc(n=N.gc())&&(t.sidebarPerfectScroll=n.first))},inputs:{container:"container",partner:"partner",contType:"contType"},outputs:{sidebarPage:"sidebarPage",editContainer:"editContainer"},features:[N.Bb()],decls:70,vars:22,consts:[["name","form",2,"border-right","1px solid #E6E6E6",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],["sidebarPerfectScroll",""],[1,"navbar-content"],[1,"nav","material2"],["fxLayout","row wrap"],[2,"display","none"],["inputCheck","","type","number","formControlName","id"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","matInput","","maxlength","11","formControlName","cont_number","required",""],[4,"ngIf"],["fxFlex","100",1,"info-line"],["formControlName","cont_type","required",""],[3,"value",4,"ngFor","ngForOf"],["inputCheck","","aria-label","principal","matInput","","formControlName","principal",3,"matAutocomplete"],[3,"displayWith"],["autoCus","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],["formControlName","status","required",""],[3,"value"],["formControlName","grade","required",""],["inputCheck","","matInput","","formControlName","info"],[3,"value","matTooltip"]],template:function(e,t){if(1&e&&(N.Xb(0,"form",0,1),N.fc("keydown.enter",(function(e){return"TEXTAREA"==e.target.tagName}))("ngSubmit",(function(e){return t.onFormSubmit(t.form)})),N.Xb(2,"div",2),N.Xb(3,"div",3),N.Xb(4,"button",4),N.Lc(5," Submit "),N.Wb(),N.Xb(6,"button",5),N.fc("click",(function(e){return t.sidebarPage.emit("view")})),N.Lc(7," Cancel "),N.Wb(),N.Wb(),N.Wb(),N.Xb(8,"div",6,7),N.Xb(10,"div",8),N.Xb(11,"div",9),N.Xb(12,"div",10),N.Xb(13,"div",11),N.Sb(14,"input",12),N.Wb(),N.Xb(15,"div",13),N.Xb(16,"mat-form-field",14),N.Xb(17,"mat-label"),N.Lc(18,"Cont number"),N.Wb(),N.Sb(19,"input",15),N.Jc(20,Ne,2,0,"mat-error",16),N.Jc(21,Te,2,0,"mat-error",16),N.Wb(),N.Wb(),N.Xb(22,"div",17),N.Xb(23,"mat-form-field",14),N.Xb(24,"mat-label"),N.Lc(25,"Cont type"),N.Wb(),N.Xb(26,"mat-select",18),N.Jc(27,qe,2,2,"mat-option",19),N.Wb(),N.Jc(28,Oe,2,0,"mat-error",16),N.Wb(),N.Wb(),N.Xb(29,"div",17),N.Xb(30,"mat-form-field",14),N.Xb(31,"mat-label"),N.Lc(32,"Principal"),N.Wb(),N.Sb(33,"input",20),N.Xb(34,"mat-autocomplete",21,22),N.Jc(36,Fe,2,3,"mat-option",23),N.kc(37,"async"),N.Wb(),N.Jc(38,Be,2,0,"mat-error",16),N.Wb(),N.Wb(),N.Xb(39,"div",17),N.Xb(40,"mat-form-field",14),N.Xb(41,"mat-label"),N.Lc(42,"Status"),N.Wb(),N.Xb(43,"mat-select",24),N.Xb(44,"mat-option",25),N.Lc(45,"Invalid"),N.Wb(),N.Xb(46,"mat-option",25),N.Lc(47,"Valid"),N.Wb(),N.Wb(),N.Jc(48,ze,2,0,"mat-error",16),N.Wb(),N.Wb(),N.Xb(49,"div",17),N.Xb(50,"mat-form-field",14),N.Xb(51,"mat-label"),N.Lc(52,"Grade"),N.Wb(),N.Xb(53,"mat-select",26),N.Xb(54,"mat-option",25),N.Lc(55,"A"),N.Wb(),N.Xb(56,"mat-option",25),N.Lc(57,"B"),N.Wb(),N.Xb(58,"mat-option",25),N.Lc(59,"C"),N.Wb(),N.Xb(60,"mat-option",25),N.Lc(61,"D"),N.Wb(),N.Xb(62,"mat-option",25),N.Lc(63,"U"),N.Wb(),N.Wb(),N.Jc(64,je,2,0,"mat-error",16),N.Wb(),N.Wb(),N.Xb(65,"div",17),N.Xb(66,"mat-form-field",14),N.Xb(67,"mat-label"),N.Lc(68,"Info"),N.Wb(),N.Sb(69,"input",27),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e){const e=N.xc(35);N.pc("formGroup",t.form),N.Db(8),N.Ic("height",t.height,"px"),N.Db(12),N.pc("ngIf",t.form.get("cont_number").hasError("required")),N.Db(1),N.pc("ngIf",t.form.get("cont_number").errors&&t.form.get("cont_number").dirty&&t.form.get("cont_number").errors.validConNum),N.Db(6),N.pc("ngForOf",t.contType),N.Db(1),N.pc("ngIf",t.form.get("cont_type").hasError("required")),N.Db(5),N.pc("matAutocomplete",e),N.Db(1),N.pc("displayWith",t.commonService.displayFn.bind(t,"short_name",t.partner)),N.Db(2),N.pc("ngForOf",N.lc(37,20,t.filteredPartner)),N.Db(2),N.pc("ngIf",t.form.get("principal").hasError("required")),N.Db(6),N.pc("value",0),N.Db(2),N.pc("value",1),N.Db(2),N.pc("ngIf",t.form.get("status").hasError("required")),N.Db(6),N.pc("value","A"),N.Db(2),N.pc("value","B"),N.Db(2),N.pc("value","C"),N.Db(2),N.pc("value","D"),N.Db(2),N.pc("value","U"),N.Db(2),N.pc("ngIf",t.form.get("grade").hasError("required"))}},directives:[T.A,T.q,T.h,j.d,j.c,s.b,j.b,E.a,T.u,T.b,T.p,T.g,d.c,d.f,p.b,T.k,T.w,z.t,h.a,z.s,a.c,a.a,C.n,d.b,u.a],pipes:[z.b],styles:["container-details-sidebar-form{-webkit-user-drag:auto}container-details-sidebar-form .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}container-details-sidebar-form .navbar-scroll-container{background:#fff!important}container-details-sidebar-form .navbar-scroll-container .navbar-content{padding-top:0}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}container-details-sidebar-form .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),e})();function Je(e,t){if(1&e){const e=N.Yb();N.Xb(0,"container-details-sidebar-view",3),N.fc("sidebarPage",(function(t){return N.Bc(e),N.jc().sidebarPage.emit(t)})),N.Wb()}if(2&e){const e=N.jc();N.pc("container",e.container)}}function Ve(e,t){if(1&e){const e=N.Yb();N.Xb(0,"container-details-sidebar-form",4),N.fc("sidebarPage",(function(t){return N.Bc(e),N.jc().sidebarPage.emit(t)}))("editContainer",(function(t){return N.Bc(e),N.jc().editContainer.emit(t)})),N.Wb()}if(2&e){const e=N.jc();N.pc("container",e.container)("partner",e.partner)("contType",e.contType)}}let He=(()=>{class e{constructor(e,t,n){this.formBuilder=e,this.authService=t,this.commonService=n,this.sidebarPage=new N.o,this.editContainer=new N.o,this.height=560,this._unsubscribeAll=new P.a}ngOnInit(){this.authService.windowSizeChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e.height-64-64-12}),this.authService.changeScreen.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.height=e?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(e){e.partner&&(e.partner.currentValue||null==e.partner.currentValue)&&(this.partner=e.partner.currentValue),e.contType&&(e.contType.currentValue||null==e.contType.currentValue)&&(this.contType=e.contType.currentValue),e.container&&(e.container.currentValue||null==e.container.currentValue)&&(this.container=e.container.currentValue)}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(T.d),N.Rb(F.a),N.Rb(B.a))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details-sidebar"]],inputs:{type:"type",container:"container",partner:"partner",contType:"contType"},outputs:{sidebarPage:"sidebarPage",editContainer:"editContainer"},features:[N.Bb()],decls:3,vars:3,consts:[[1,"sidebar-content",3,"ngSwitch"],[3,"container","sidebarPage",4,"ngSwitchCase"],[3,"container","partner","contType","sidebarPage","editContainer",4,"ngSwitchCase"],[3,"container","sidebarPage"],[3,"container","partner","contType","sidebarPage","editContainer"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Jc(1,Je,1,1,"container-details-sidebar-view",1),N.Jc(2,Ve,1,3,"container-details-sidebar-form",2),N.Wb()),2&e&&(N.pc("ngSwitch",!0),N.Db(1),N.pc("ngSwitchCase","view"==t.type),N.Db(1),N.pc("ngSwitchCase","form"==t.type))},directives:[z.x,z.y,Le,Ee],styles:[""],encapsulation:2}),e})();function Ue(e,t){if(1&e){const e=N.Yb();N.Xb(0,"fuse-sidebar",9),N.Xb(1,"container-details-sidebar",10),N.fc("sidebarPage",(function(t){return N.Bc(e),N.jc().sidebarPage(t)}))("editContainer",(function(t){return N.Bc(e),N.jc().editContainer(t)})),N.Wb(),N.Wb()}if(2&e){const e=N.jc();N.Db(1),N.pc("type",e.type)("container",e.container)("contType",e.contType)("partner",e.partner)}}let Ge=(()=>{class e{constructor(e,t,n,i,o,r,a){this._fuseSidebarService=e,this.containerDetailsService=t,this._matDialog=n,this.router=i,this.route=o,this.authService=r,this.datePipe=a,this.sidebarPanel=!0,this.type="view",this._unsubscribeAll=new P.a}ngOnInit(){this.id=this.route.snapshot.params.id,this.act=this.authService.act,this.containerDetailsService.onContainerChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.container=this.containerDetailsService.container,this.movement=this.containerDetailsService.movement,this.moveNote=this.containerDetailsService.moveNote}),this.containerDetailsService.onDataChanged.pipe(Object(A.a)(this._unsubscribeAll)).subscribe(e=>{this.partner=this.containerDetailsService.partner,this.seaport=this.containerDetailsService.seaport,this.contType=this.containerDetailsService.contType,this.moveType=this.containerDetailsService.moveType}),this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(e){this._fuseSidebarService.getSidebar(e).toggleOpen()}showHideBar(e){this.sidebarPanel=!this.sidebarPanel}refreshPage(e){this.authService.refreshData(this.containerDetailsService)}sidebarPage(e){this.type=e}getContainer(){this.authService.onRequestChanged.next(!0),this.containerDetailsService.getContainerById(this.id).then(e=>{this.authService.onRequestChanged.next(!1),this.type="view"}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error: Server error")})}editContainer(e){this.authService.onRequestChanged.next(!0),e.update_by=this.authService.user,this.containerDetailsService.updateContainer(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows&&this.getContainer()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Error edit")})}createMovement(e){this.containerDetailsService.createMovement(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(this.getContainer(),alert("create success")):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("create error")})}deleteMovement(e){confirm("Do you want to delete this movement?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteMovement(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getContainer(),alert("delete success")):(console.error(e),alert("delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("delete error")}))}createNote(e){this.authService.onRequestChanged.next(!0),this.containerDetailsService.createMoveNote(e).then(e=>{this.authService.onRequestChanged.next(!1),this.getContainer()}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("error")})}deleteNote(e){confirm("Do you want to delete this container note?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deleteMoveNote(e.id).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(alert("Delete success"),this.getContainer()):(console.error(e),alert("Error: No container exist."))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete error")}))}openAddMoveModal(e){e?(this.dialogRef=this._matDialog.open(Q,{panelClass:"container-details-content-modal-dialog",data:{label:"Add movement",currenMovement:e,container:this.container,movement:this.movement,moveType:this.moveType,place:this.partner}}),this.dialogRef.componentInstance.addMovement.subscribe(e=>{this.authService.onRequestChanged.next(!0),this.containerDetailsService.createMovement(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("create error")})}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})):(this.dialogRef=this._matDialog.open(Q,{panelClass:"container-details-content-modal-dialog",data:{label:"Add movement",container:this.container,movement:this.movement,moveType:this.moveType,place:this.partner}}),this.dialogRef.componentInstance.addMovement.subscribe(e=>{this.authService.onRequestChanged.next(!0),this.containerDetailsService.createMovement(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("create error")})}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()}))}openEditMoveModal(e){this.dialogRef=this._matDialog.open(Q,{panelClass:"container-details-content-modal-dialog",data:{label:"Edit movement",container:this.container,movement:this.movement,moveType:this.moveType,place:this.partner,data:e}}),this.dialogRef.componentInstance.updateMovement.subscribe(e=>{this.authService.onRequestChanged.next(!0),this.containerDetailsService.updateMovement(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?this.dialogRef.componentInstance.matDialogRef.close(e):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("create error")})}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})}openAddNoteModal(e){this.dialogRef=this._matDialog.open(ee,{panelClass:"container-details-content-note-modal-dialog",data:{label:"Add note",id:e.id}}),this.dialogRef.componentInstance.addNote.subscribe(e=>{this.authService.onRequestChanged.next(!0),this.containerDetailsService.createMoveNote(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?this.dialogRef.componentInstance.matDialogRef.close(e):e.error?(alert(e.error),console.error(e)):(alert("create.error"),console.error(e))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("create error")})}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.getContainer()})}getShipment(e){let t=e.document.trim();/\s/.test(t)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument(t).then(e=>{this.authService.onRequestChanged.next(!1),1==e.length?this.router.navigate(["/apps/pacific-logistics-network/shipment/detail/"+e[0].id+"/overview"]):alert("no shipment")}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}copyShipment(e){let t=this.movement[e],n=this.movement[e+1].document.trim();/\s/.test(n)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument(n).then(e=>{this.authService.onRequestChanged.next(!1),1==e.length?this.containerDetailsService.createPlnMove({shipment:e[0].id,move:t.id,update_by:this.authService.user}).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),this.getContainer()):(console.error(e),alert(e.error?e.error:"ERROR"))}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}):alert("shipment document not exact")}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}savePlnMove(e){let t=e.document.trim();console.log(t),/\s/.test(t)||(this.authService.onRequestChanged.next(!0),this.containerDetailsService.getShipmentByDocument(t).then(t=>{this.authService.onRequestChanged.next(!1),1==t.length?this.containerDetailsService.createPlnMove({shipment:t[0].id,move:e.id,update_by:this.authService.user}).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(console.log(e),this.getContainer()):(console.error(e),alert(e.error?e.error:"ERROR"))}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}):alert("shipment document not exact")}).catch(e=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(e)}))}deletePlnMove(e){confirm("Do you want to delete this shipment move?")&&(this.authService.onRequestChanged.next(!0),this.containerDetailsService.deletePlnMove(e).then(e=>{this.authService.onRequestChanged.next(!1),1==e.affectedRows?(this.getContainer(),alert("Delete success")):(console.error(e),alert("Delete error"))}).catch(e=>{this.authService.onRequestChanged.next(!1),console.error(e),alert("Delete error")}))}}return e.\u0275fac=function(t){return new(t||e)(N.Rb(te.a),N.Rb(oe),N.Rb(v.b),N.Rb(i.g),N.Rb(i.a),N.Rb(F.a),N.Rb(z.f))},e.\u0275cmp=N.Lb({type:e,selectors:[["container-details"]],decls:9,vars:9,consts:[[1,"page-layout","carded","left-sidebar","inner-scroll"],["class","sidebar","name","container-details-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["name","container-details-setting","position","right",1,"sidebar"],[1,"content"],[1,"center","mr-0","ml-0"],[3,"sidebarName","showHideBar","refreshPage","toggleSidebar"],[1,"content-card",2,"border","none","border-radius","0"],["fxFlexAlign","row",1,"content","m-8"],[3,"act","container","movement","moveType","partner","moveNote","permission","deleteMovement","openAddMoveModal","openEditMoveModal","openAddNoteModal","savePlnMove","deletePlnMove","getShipment","copyShipment","deleteNote"],["name","container-details-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[3,"type","container","contType","partner","sidebarPage","editContainer"]],template:function(e,t){1&e&&(N.Xb(0,"div",0),N.Jc(1,Ue,2,4,"fuse-sidebar",1),N.Xb(2,"fuse-sidebar",2),N.Sb(3,"div",3),N.Wb(),N.Xb(4,"div",4),N.Xb(5,"container-details-header",5),N.fc("showHideBar",(function(e){return t.showHideBar(e)}))("refreshPage",(function(e){return t.refreshPage(e)}))("toggleSidebar",(function(e){return t.toggleSidebar(e)})),N.Wb(),N.Xb(6,"div",6),N.Xb(7,"div",7),N.Xb(8,"container-details-content",8),N.fc("deleteMovement",(function(e){return t.deleteMovement(e)}))("openAddMoveModal",(function(e){return t.openAddMoveModal(e)}))("openEditMoveModal",(function(e){return t.openEditMoveModal(e)}))("openAddNoteModal",(function(e){return t.openAddNoteModal(e)}))("savePlnMove",(function(e){return t.savePlnMove(e)}))("deletePlnMove",(function(e){return t.deletePlnMove(e)}))("getShipment",(function(e){return t.getShipment(e)}))("copyShipment",(function(e){return t.copyShipment(e)}))("deleteNote",(function(e){return t.deleteNote(e)})),N.Wb(),N.Wb(),N.Wb(),N.Wb(),N.Wb()),2&e&&(N.Db(1),N.pc("ngIf",t.sidebarPanel),N.Db(4),N.pc("sidebarName","container-details-sidebar"),N.Db(3),N.pc("act",t.act)("container",t.container)("movement",t.movement)("moveType",t.moveType)("partner",t.partner)("moveNote",t.moveNote)("permission",t.permission))},directives:[re.a,z.t,ae.a,be,j.a,Ce,He],styles:["container-details{width:100%}container-details .center .header{height:64px!important;min-height:64px!important;max-height:64px!important}@media screen and (max-width:599px){container-details .center .header{height:56px!important;min-height:56px!important;max-height:56px!important}}container-details .center .content-card .toolbar .toolbar-separator{height:32px;width:1px;margin:0 12px}@media screen and (max-width:1919px){container-details .center .content-card container-details{border-right:0}container-details .center .content-card container-details,container-details .center .content-card shipment-details{-webkit-box-flex:1;flex:1 0 100%}container-details .center .content-card shipment-details{display:none!important}container-details .center .content-card.current-shipment-selected .toolbar{padding-left:16px!important}container-details .center .content-card.current-shipment-selected .content container-details,container-details .center .content-card.current-shipment-selected .toolbar .shipment-selection{display:none!important}container-details .center .content-card.current-shipment-selected .content shipment-details{display:-webkit-box!important;display:flex!important}}"],encapsulation:2,data:{animation:I.a}}),e})();var $e=n("vxfF"),Ye=n("cfqv");n.d(t,"ContainerDetailsModule",(function(){return Ke}));const Qe=[{path:":id",component:Ge,resolve:{data:oe}}];let Ke=(()=>{class e{}return e.\u0275mod=N.Pb({type:e}),e.\u0275inj=N.Ob({factory:function(t){return new(t||e)},providers:[oe],imports:[[i.k.forChild(Qe),r.b,o.a,a.b,c.c,s.c,l.b,d.e,b.b,u.b,p.c,m.c,h.b,f.c,v.e,g.b,x.b,w.b,y.d,S.e,k.b,X.b,W.b,M.k,_.c,C.t,D.a,R.a,L.f,$e.g,Ye.b]]}),e})()},cfqv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var i=n("8LU1"),o=n("vxfF"),r=n("fXoL"),a=n("HDdC");class c{constructor(e=50){this._totalWeight=0,this._defaultItemSize=e,this._averageItemSize=e}getAverageItemSize(){return this._averageItemSize}addSample(e,t){const n=this._totalWeight+e.end-e.start;if(n){const e=(t+this._averageItemSize*this._totalWeight)/n;e&&(this._averageItemSize=e,this._totalWeight=n)}}reset(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0}}class s{constructor(e,t,n=new c){this.scrolledIndexChange=new a.a(()=>{throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")}),this._viewport=null,this._removalFailures=0,this._minBufferPx=e,this._maxBufferPx=t,this._averager=n}attach(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()}detach(){this._viewport=null}onContentScrolled(){this._viewport&&this._updateRenderedContentAfterScroll()}onDataLengthChanged(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())}onContentRendered(){this._viewport&&this._checkRenderedContentSize()}onRenderedOffsetChanged(){this._viewport&&this._checkRenderedContentOffset()}scrollToIndex(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")}updateBufferSize(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t}_updateRenderedContentAfterScroll(){const e=this._viewport,t=e.measureScrollOffset();let n=t-this._lastScrollOffset,i=Math.abs(n);const o=e.getRenderedRange();let r=0;if(n<0){const e=o.start*this._averager.getAverageItemSize();r=Math.round((e-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,i/(t+i)))),n-=r,i=Math.abs(n)}const a=this._lastScrollOffset-this._lastRenderedContentOffset,c=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),s=i+this._minBufferPx-(n<0?a:c);if(s>0)if(i>=e.getViewportSize())this._renderContentForCurrentOffset();else{const t=Math.max(0,Math.ceil((s-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),l=(n<0?c:a)-this._minBufferPx+i,d=Math.floor(l/this._averager.getAverageItemSize()/(this._removalFailures+1)),b=Math.min(o.end-o.start,Math.max(0,d)),u=this._expandRange(o,n<0?t:0,n>0?t:0);let p,m;if(n<0?u.end=Math.max(u.start+1,u.end-b):u.start=Math.min(u.end-1,u.start+b),n<0){let t=e.measureRangeSize({start:u.end,end:o.end});t<=l?(p=this._lastRenderedContentOffset+this._lastRenderedContentSize-t,this._removalFailures=0):(u.end=o.end,p=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),m="to-end"}else{const t=e.measureRangeSize({start:o.start,end:u.start});t<=l?(p=this._lastRenderedContentOffset+t,this._removalFailures=0):(u.start=o.start,p=this._lastRenderedContentOffset,this._removalFailures++),m="to-start"}e.setRenderedRange(u),e.setRenderedContentOffset(p+r,m)}else r&&e.setRenderedContentOffset(this._lastRenderedContentOffset+r);this._lastScrollOffset=t}_checkRenderedContentSize(){const e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)}_checkRenderedContentOffset(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()}_renderContentForCurrentOffset(){const e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;const n=this._averager.getAverageItemSize(),i=Math.min(e.getDataLength()-1,Math.floor(t/n)),o=Math.ceil(this._maxBufferPx/n),r=this._expandRange(this._getVisibleRangeForIndex(i),o,o);e.setRenderedRange(r),e.setRenderedContentOffset(n*r.start)}_getVisibleRangeForIndex(e){const t=this._viewport,n={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},i=n.end-t.getDataLength();return i>0&&(n.start=Math.max(0,n.start-i)),n}_expandRange(e,t,n){const i=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(i.getDataLength(),e.end+n)}}_updateTotalContentSize(e){const t=this._viewport,n=t.getRenderedRange(),i=e+(t.getDataLength()-(n.end-n.start))*this._averager.getAverageItemSize();t.setTotalContentSize(i)}}function l(e){return e._scrollStrategy}let d=(()=>{class e{constructor(){this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new s(this.minBufferPx,this.maxBufferPx)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Object(i.f)(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Object(i.f)(e)}ngOnChanges(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Mb({type:e,selectors:[["cdk-virtual-scroll-viewport","autosize",""]],inputs:{minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.Cb([{provide:o.h,useFactory:l,deps:[Object(r.V)(()=>e)]}]),r.Bb()]}),e})(),b=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)}}),e})()}}]);