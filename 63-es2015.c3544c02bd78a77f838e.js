(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{jD4G:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));class i{static filterArrayByString(t,e){return""===e?t:(e=e.toLowerCase(),t.filter(t=>this.searchInObj(t,e)))}static searchInObj(t,e){for(const o in t){if(!t.hasOwnProperty(o))continue;const i=t[o];if("string"==typeof i){if(this.searchInString(i,e))return!0}else if(Array.isArray(i)&&this.searchInArray(i,e))return!0;if("object"==typeof i&&this.searchInObj(i,e))return!0}}static searchInArray(t,e){for(const o of t){if("string"==typeof o&&this.searchInString(o,e))return!0;if("object"==typeof o&&this.searchInObj(o,e))return!0}}static searchInString(t,e){return t.toLowerCase().includes(e)}static generateGUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()}static toggleInArray(t,e){-1===e.indexOf(t)?e.push(t):e.splice(e.indexOf(t),1)}static handleize(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}},rPBI:function(t,e,o){"use strict";o.d(e,"a",(function(){return g}));var i=o("fXoL"),n=o("XNiG"),a=o("1G5W"),c=o("3Pt+"),r=o("Kj3r"),s=o("/uUt"),b=o("0JVi"),l=o("ofXK"),d=o("znSr"),h=o("XiUz"),p=o("bTqV"),u=o("NFeN");function m(t,e){if(1&t){const t=i.Yb();i.Xb(0,"button",7),i.fc("click",(function(e){return i.Bc(t),i.jc().expand()})),i.Xb(1,"mat-icon",8),i.Lc(2,"search"),i.Wb(),i.Wb()}if(2&t){const t=i.jc();i.Db(1),i.pc("color",t.searchText&&""!==t.searchText?"accent":"")}}const f=function(t){return{expanded:t}};let g=(()=>{class t{constructor(t){this._fuseConfigService=t,this.inputValue=new i.o,this.collapsed=!0,this.searchInput=new c.e(""),this._unsubscribeAll=new n.a}ngOnInit(){this._fuseConfigService.config.pipe(Object(a.a)(this._unsubscribeAll)).subscribe(t=>{this.fuseConfig=t}),this.searchInput.valueChanges.pipe(Object(a.a)(this._unsubscribeAll),Object(r.a)(300),Object(s.a)()).subscribe(t=>{this.searchText=t,this.inputValue.emit(t)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(t){t.searchText&&(t.searchText.currentValue||null==t.searchText.currentValue)&&(this.searchText=t.searchText.currentValue,this.searchInput.setValue(this.searchText))}collapse(){this.collapsed=!0}expand(){this.collapsed=!1}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(b.b))},t.\u0275cmp=i.Lb({type:t,selectors:[["filter-search-bar"]],inputs:{searchText:"searchText"},outputs:{inputValue:"inputValue"},features:[i.Bb()],decls:8,vars:5,consts:[[1,"filter-search-bar",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",1,"filter-search-bar-content"],["for","filter-search-bar-input"],["mat-icon-button","","class","filter-search-bar-expander","aria-label","Expand Search Bar",3,"click",4,"ngIf"],["id","filter-search-bar-input","type","text","placeholder","Search","fxFlex","",1,"ml-24",3,"formControl"],["mat-icon-button","","aria-label","Collapse Search Bar",1,"filter-search-bar-collapser",3,"click"],[1,"s-24","secondary-text"],["mat-icon-button","","aria-label","Expand Search Bar",1,"filter-search-bar-expander",3,"click"],[1,"s-24","secondary-text",3,"color"]],template:function(t,e){1&t&&(i.Xb(0,"div",0),i.Xb(1,"div",1),i.Xb(2,"label",2),i.Jc(3,m,3,1,"button",3),i.Wb(),i.Sb(4,"input",4),i.Xb(5,"button",5),i.fc("click",(function(t){return e.collapse()})),i.Xb(6,"mat-icon",6),i.Lc(7,"close"),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.pc("ngClass",i.rc(3,f,!e.collapsed)),i.Db(3),i.pc("ngIf",e.collapsed),i.Db(1),i.pc("formControl",e.searchInput))},directives:[l.q,d.a,h.d,h.c,l.t,c.b,h.b,c.p,c.f,p.b,u.a],styles:["[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 1 auto;min-width:64px;height:64px;font-size:13px}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]{height:56px}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{cursor:pointer;padding:0 20px;margin:0;width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%], [_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-expander[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{width:64px!important;height:64px!important;line-height:64px!important}@media screen and (max-width:599px){[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-loader[_ngcontent-%COMP%]{height:56px!important;line-height:56px!important}}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .filter-search-bar[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:none;-webkit-box-flex:1;flex:1 0 auto;min-height:64px;font-size:16px;background-color:transparent;color:currentColor}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;background:#f5f5f5}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   #filter-search-bar-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   .filter-search-bar.expanded[_ngcontent-%COMP%]   .filter-search-bar-content[_ngcontent-%COMP%]   .filter-search-bar-collapser[_ngcontent-%COMP%]{display:block}"]}),t})()},vckx:function(t,e,o){"use strict";o.r(e);var i=o("tyNb"),n=o("STbY"),a=o("/1cH"),c=o("iadO"),r=o("bTqV"),s=o("7EHt"),b=o("kmnG"),l=o("NFeN"),d=o("Qu3c"),h=o("qFsG"),p=o("wZkO"),u=o("d3UM"),m=o("QibW"),f=o("0IaG"),g=o("/t3+"),v=o("bSwM"),y=o("M9IT"),k=o("xHqg"),x=o("A5z7"),D=o("vxfF"),w=o("cfqv"),W=o("LPQX"),X=o("FKr1"),S=o("MutI"),_=o("bv9b"),L=o("XhcP"),O=o("212X"),M=o("5HBU"),C=o("0Zc1"),T=o("2Vo4"),j=o("XNiG"),I=o("jD4G"),P=o("tk/3"),V=o("fXoL"),F=o("qXBG"),J=o("0JVi");let A=(()=>{class t{constructor(t,e,o,i){this.router=t,this._httpClient=e,this.authService=o,this._fuseConfigService=i,this.dashboard=[],this.searchText=null,this.fullScreen=!1,this.arrType=[],this.portPair=[],this.priceHeader=[],this.priceObj={},this.defaultSearch={formFilter:{code:null,customer:null,owner:null,pay_customer:null},formSearch:{customer:null,supplier:null,owner:null,pol:null,pod:null,date_from:((new Date).getFullYear()-1).toString()+"-"+((new Date).getMonth()+1<10?"0":"")+((new Date).getMonth()+1).toString()+"-01",date_to:null}},this.total={shipment:0,load_shipment:0,revenue:0,cost:0,revenuePaydate:0,revenueBank:0,costPaydate:0,costBank:0,revenueComplete:0,costComplete:0,teu:0,load_teu:0},this.totalMonth={},this.arrMonth=[],this.arrYear=[],this.headerType=[],this.containerMovement={LOAD:[],FULIM:[],TRIM:[],EMPTY:[],TREXP:[],FULEX:[]},this.onDashboardChanged=new T.a([]),this.onDataChanged=new T.a({}),this.onDataItemChanged=new T.a({}),this.onOverviewChanged=new T.a([]),this.onBookOverviewChanged=new T.a([]),this.onShipmentChanged=new T.a([]),this.onVesselChanged=new T.a([]),this.onContainersMovementChanged=new T.a([]),this.onSearchTextChanged=new j.a,this.onFilterChanged=new j.a,this.onMonthChanged=new j.a}resolve(t){return this.modul=t.params.modul,this.authService.routerData=t,this.authService.back&&(this.authService.back=!1),(!this.currenSearch||this.currenSearch&&!this.currenSearch.formSearch)&&(this.currenSearch=JSON.parse(JSON.stringify(this.defaultSearch)),(this.modul.includes("hochiminh")||this.modul.includes("haiphong"))&&(this.currenSearch.formSearch.date_from=null,this.currenSearch.formSearch.date_to=null),this.currenSearch.formSearch.pol=this.checkModule(this.modul).pol,this.currenSearch.formSearch.pod=this.checkModule(this.modul).pod),new Promise((t,e)=>{Promise.all([this.getFilterShipment(this.currenSearch.formSearch),this.getContainerMovement(),this.getData(),this.getItemData()]).then(()=>{this.onSearchTextChanged.subscribe(t=>{this.searchText=t;let e=JSON.parse(JSON.stringify(this.shipment));this.searchText&&""!==this.searchText&&(e=I.a.filterArrayByString(e,this.searchText)),this.buildDataBoardOverview(e),this.buildVesselOverview(e)}),t()},e)})}getFilterShipment(t){this.currenSearch.formSearch=t;let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/shipment/filter-module/"+this.modul,t,e).subscribe(t=>{this.shipment=t.shipment,this.price=t.price;let e=JSON.parse(JSON.stringify(this.shipment));this.searchText&&""!==this.searchText&&(e=I.a.filterArrayByString(e,this.searchText)),this.buildDataBoardOverview(e),this.buildVesselOverview(e),this.book&&this.buildBookOverview(),o(t)},i)})}getContainerMovement(){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/container-movement/"+this.modul,t).subscribe(t=>{this.headerType=t[0],this.containerMovement=t[1],this.onContainersMovementChanged.next(t),e(t)},o)})}getData(){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/data",t).subscribe(t=>{this.customer=t[0],this.supplier=t[1],this.seaport=t[2],this.user=t[3],this.onDataChanged.next(t),e(t)},o)})}getItemData(){let t={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((e,o)=>{this._httpClient.get(this.authService.apiUrl+"/sel/shipment/item-data",t).subscribe(t=>{this.commodity=t[5],this.packageType=t[6],this.onDataItemChanged.next(t),e(t)},o)})}buildDataBoardOverview(t){this.total={shipment:0,load_shipment:0,revenue:0,cost:0,revenuePaydate:0,revenueBank:0,costPaydate:0,costBank:0,revenueComplete:0,costComplete:0,teu:0,load_teu:0},this.totalMonth={},this.arrMonth=[],this.arrYear=[],this.portPair=[],this.typeColumnView={},this.routeData={total:{}};let e=[];t.map(t=>{let o={pol:t.pol,pol_lat:t.pol_info&&t.pol_info.coords&&t.pol_info.coords.lat?t.pol_info.coords.lat:null,pol_lng:t.pol_info&&t.pol_info.coords&&t.pol_info.coords.lng?t.pol_info.coords.lng:null,pol_name:t.pol_name,pod:t.pod,pod_lat:t.pod_info&&t.pod_info.coords&&t.pod_info.coords.lat?t.pod_info.coords.lat:null,pod_lng:t.pod_info&&t.pod_info.coords&&t.pod_info.coords.lng?t.pod_info.coords.lng:null,pod_name:t.pod_name,type:"VIETNAM"==t.load_country_name?"import":"export",name:t.pol_name+" - "+t.pod_name};e.includes(o.name)||(this.portPair.push(o),e.push(o.name),this.routeData[o.name]={}),this.arrType=t.package,t.profit={revenue:0,cost:0};let i=new Date(t.depart_time).getMonth().toString();parseInt(i)<10&&(i="0"+i);let n=(new Date(t.depart_time).getMonth()+1).toString();parseInt(n)<10&&(n="0"+n);let a=new Date(t.depart_time).getFullYear();this.totalMonth[a+"-"+i]||(this.totalMonth[a+"-"+i]=function(t,e){return{month:parseInt(t)+1,year:e,teu:0,count_shipment:0,revenueComplete:0,costComplete:0,load_teu:0,count_load_shipment:0,revenue:0,cost:0,revenuePaydate:0,revenueBank:0,costPaydate:0,costBank:0}}(i,a),this.arrMonth.push({name:a+"-"+i,year:a,month:i,monthValue:n}),this.typeColumnView[a+"-"+i]=0),this.arrYear.includes(a)||this.arrYear.push(a),this.totalMonth[a+"-"+i].count_shipment++,this.total.shipment++,"Yes"==t.cont_move&&(this.totalMonth[a+"-"+i].count_load_shipment++,this.total.load_shipment++);let c=!0;t.revenue.map(e=>{t.profit.revenue+=e.total_vnd,this.totalMonth[a+"-"+i].revenue+=e.total_vnd,this.total.revenue+=e.total_vnd,e.pay_date&&(this.totalMonth[a+"-"+i].revenuePaydate+=e.total_vnd,this.total.revenuePaydate+=e.total_vnd,t.profit.revenuePaydate+=e.total_vnd),e.bank?(this.totalMonth[a+"-"+i].revenueBank+=e.total_vnd,this.total.revenueBank+=e.total_vnd,t.profit.revenueBank+=e.total_vnd):c=!1}),c&&(this.totalMonth[a+"-"+i].revenueComplete++,this.total.revenueComplete++);let r=!0;t.cost.map(e=>{t.profit.cost+=e.total_vnd,this.totalMonth[a+"-"+i].cost+=e.total_vnd,this.total.cost+=e.total_vnd,e.pay_date&&(this.totalMonth[a+"-"+i].costPaydate+=e.total_vnd,this.total.costPaydate+=e.total_vnd,t.profit.costPaydate+=e.total_vnd),e.bank?(this.totalMonth[a+"-"+i].costBank+=e.total_vnd,this.total.costBank+=e.total_vnd,t.profit.costBank+=e.total_vnd):r=!1}),r&&(this.totalMonth[a+"-"+i].costComplete++,this.total.costComplete++),this.arrType.map(t=>{this.totalMonth[a+"-"+i][t]||(this.totalMonth[a+"-"+i][t]=0),this.totalMonth[a+"-"+i]["load_"+t]||(this.totalMonth[a+"-"+i]["load_"+t]=0)}),t.volume.map(t=>{this.totalMonth[a+"-"+i][t.cont_type_code]+=t.volume,this.total[t.cont_type_code]||(this.total[t.cont_type_code]=0),this.total[t.cont_type_code]+=t.volume,this.routeData[o.name]||(this.routeData[o.name]={}),this.routeData[o.name][a+"-"+i]||(this.routeData[o.name][a+"-"+i]={}),this.routeData[o.name][a+"-"+i][t.cont_type_code]||(this.routeData[o.name][a+"-"+i][t.cont_type_code]=0),this.routeData[o.name][a+"-"+i].teu||(this.routeData[o.name][a+"-"+i].teu=0),this.routeData.total[a+"-"+i]||(this.routeData.total[a+"-"+i]={}),this.routeData.total[a+"-"+i][t.cont_type_code]||(this.routeData.total[a+"-"+i][t.cont_type_code]=0),this.routeData.total[a+"-"+i].teu||(this.routeData.total[a+"-"+i].teu=0),this.routeData[o.name][a+"-"+i][t.cont_type_code]+=t.volume,this.routeData.total[a+"-"+i][t.cont_type_code]+=t.volume,t.cont_type_code.includes("20")&&(this.totalMonth[a+"-"+i].teu+=t.volume,this.total.teu+=t.volume,this.routeData[o.name][a+"-"+i].teu+=t.volume,this.routeData.total[a+"-"+i].teu+=t.volume),t.cont_type_code.includes("40")&&(this.totalMonth[a+"-"+i].teu+=2*t.volume,this.total.teu+=2*t.volume,this.routeData[o.name][a+"-"+i].teu+=2*t.volume,this.routeData.total[a+"-"+i].teu+=2*t.volume)}),t.container.map(t=>{t.cont_type&&(this.totalMonth[a+"-"+i]["load_"+t.cont_type]++,this.total["load_"+t.cont_type]||(this.total["load_"+t.cont_type]=0),this.total["load_"+t.cont_type]++,t.cont_type.includes("20")&&(this.totalMonth[a+"-"+i].load_teu+=1,this.total.load_teu+=1),t.cont_type.includes("40")&&(this.totalMonth[a+"-"+i].load_teu+=2,this.total.load_teu+=2))})}),this.arrMonth.sort((t,e)=>{var o=t.year,i=e.year,n=t.month,a=e.month;return o>i?-1:o<i?1:n>a?-1:n<a?1:0}),this.portPair.sort((t,e)=>{var o=t.name,i=e.name;return o<i?-1:o>i?1:0}),this.arrYear.sort();let o={},i={},n={};this.arrYear.map(t=>{i[t]||(i[t]=[0,0,0,0,0,0,0,0,0,0,0,0]),n[t]||(n[t]=[0,0,0,0,0,0,0,0,0,0,0,0]);for(var e=0;e<12;++e){let o=t.toString()+"-"+(e<10?"0":"")+e.toString();i[t][e]=this.totalMonth[o]&&this.totalMonth[o].teu?this.totalMonth[o].teu:0,n[t][e]=this.totalMonth[o]&&this.totalMonth[o].count_shipment?this.totalMonth[o].count_shipment:0}o[t]=[{label:"Shipment",data:n[t],fill:"start"},{label:"Teu",data:i[t],fill:"start"}]}),this.arrMonth.map(t=>{this.arrType.map(e=>{this.portPair.map(o=>{this.routeData[o.name]||(this.routeData[o.name]={}),this.routeData[o.name][t.name]||(this.routeData[o.name][t.name]={}),this.routeData[o.name][t.name][e]||(this.routeData[o.name][t.name][e]=0),this.routeData[o.name][t.name].teu||(this.routeData[o.name][t.name].teu=0),this.routeData.total[t.name]||(this.routeData.total[t.name]={}),this.routeData.total[t.name][e]||(this.routeData.total[t.name][e]=0),this.routeData.total[t.name].teu||(this.routeData.total[t.name].teu=0)}),this.routeData.total[t.name][e]||this.typeColumnView[t.name]++})}),this.report=o,this.onShipmentChanged.next({shipment:t,total:this.total}),this.onOverviewChanged.next([this.totalMonth,this.arrMonth,this.arrType])}changeScreen(t){this.fullScreen=t,this._fuseConfigService.config=t?{layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}}:{layout:{navbar:{hidden:!1},toolbar:{hidden:!1},footer:{hidden:!0},sidepanel:{hidden:!0}}}}buildBookOverview(){let t=(new Date).getTime()-432e5,e=[],o=[],i={},n={book:0,teu:0,revenue:0,cost:0},a=this.book.slice(),c=JSON.parse(JSON.stringify(this.currenSearch.formSearch));if(c.customer&&(a=a.filter(t=>t.book.customer.id==c.customer)),c.supplier&&(a=a.filter(t=>t.book.agent.id==c.supplier)),c.owner&&(a=a.filter(t=>t.user==c.owner)),c.pol&&(a=a.filter(t=>t.voyage.load_port==c.pol)),c.pod&&(a=a.filter(t=>t.voyage.discharge_port==c.pod)),c.date_from){let t=c.date_from.split("-");t[1]=parseInt(t[1])-1;let e=new Date(t[0],t[1],t[2]).getTime();a=a.filter(t=>t.voyage.depart_time>=e)}if(c.date_to){let t=c.date_to.split("-");t[1]=parseInt(t[1])-1;let e=new Date(t[0],t[1],t[2]).getTime();a=a.filter(t=>t.voyage.depart_time<=e)}this.filterBook=a;let r=[],s=[];this.priceObj={},this.filterBook.map(a=>{if(this.priceObj[a.id]={},t<a.voyage.depart_time){let t=this.getWeek(new Date(a.voyage.depart_time)),c=new Date(a.voyage.depart_time).getFullYear(),r=c.toString()+"-"+(t<10?"0":"")+t.toString();e.includes(r)||(e.push(r),i[r]={week:r,year:c,teu:0,revenue:0,cost:0,count_book:0,data:[],type:!0}),a.book.volume.map(t=>{o.includes(t.cont_type.code)||o.push(t.cont_type.code),i[r][t.cont_type.code]||(i[r][t.cont_type.code]=0),i[r][t.cont_type.code]+=t.quantity,i[r].teu+=t.quantity*(t.cont_type.code.includes("20")?1:2),a[t.cont_type.code]||(a[t.cont_type.code]=0),a[t.cont_type.code]+=t.quantity,n[t.cont_type.code]||(n[t.cont_type.code]=0),n[t.cont_type.code]+=t.quantity,n.teu+=t.quantity*(t.cont_type.code.includes("20")?1:2)}),a.revenue.sell.map(t=>{let e=5.26==t.tax?.05/.95*100:t.tax/100;i[r].revenue+=t.volume*t.amount*t.ex_rate+t.volume*t.amount*e*t.ex_rate,n.revenue+=t.volume*t.amount*t.ex_rate+t.volume*t.amount*e*t.ex_rate}),i[r].count_book++,n.book++,a.type=!0,i[r].data.push(a)}else a.type=!1;this.priceObj[a.id].revenueVNPrice||(this.priceObj[a.id].revenueVNPrice={}),this.priceObj[a.id].revenueNNPrice||(this.priceObj[a.id].revenueNNPrice={}),a.revenue.sell.map(t=>{r.includes(t.price.code+t.currency.code+t.payment_center.name)||(r.push(t.price.code+t.currency.code+t.payment_center.name),s.push({id:t.price.id,code:t.price.code,name:t.price.name,unit_code:t.price.unit_code,currency:t.currency.code,payment_center:t.payment_center.name})),"VIETNAM"==t.payment_center.name?this.priceObj[a.id].revenueVNPrice[t.price.code+t.currency.code+t.payment_center.name]=t.amount:this.priceObj[a.id].revenueNNPrice[t.price.code+t.currency.code+t.payment_center.name]=t.amount})}),this.buildPrice(s),e.reverse(),o.sort(),this.onBookOverviewChanged.next([i,e,o,n])}getWeek(t){t.getDay();let e=t.valueOf();t.setMonth(0,1);let o=2;return 1!=t.getDay()&&(o=1,t.setMonth(0,1+(1-t.getDay()+7)%7)),o+=1+Math.floor((e-t)/6048e5),o}buildVesselOverview(t){this.arrType=[],this.voyage=[],this.shipmentVessel={},this.shipmentError=[],t.map(t=>{let e=t.depart_time+"-"+t.vessel_name+"-"+t.voyage;this.shipmentVessel[e]||(this.shipmentVessel[e]={voyage_name:t.voyage_name,vessel_id:t.vessel_id,vessel_full_name:t.vessel_full_name,pol:t.pol,pod:t.pod,pol_name:t.pol_name,pod_name:t.pod_name,load_country:t.load_country,discharge_country:t.discharge_country,depart_time:t.depart_time,arrive_time:t.arrive_time,closing_time:t.closing_time,shipment:[],container:0},this.voyage.push({key:e,vessel:t.vessel_name,voyage_id:t.voyage,voyage_name:t.voyage_name,depart_time:t.depart_time})),this.shipmentVessel[e].shipment.push(t),t.volume.map(t=>{this.shipmentVessel[e][t.cont_type_code]?this.shipmentVessel[e][t.cont_type_code]+=t.volume:this.shipmentVessel[e][t.cont_type_code]=t.volume,this.arrType.includes(t.cont_type_code)||this.arrType.push(t.cont_type_code)}),this.shipmentVessel[e].container+=t.container.length,this.shipmentVessel[e].revenue={},this.shipmentVessel[e].cost={},this.price.map(t=>{this.shipmentVessel[e].revenue[t.code+t.currency+t.payment_center]=0,this.shipmentVessel[e].cost[t.code+t.currency+t.payment_center]=0}),this.shipmentVessel[e].shipment.map(t=>{t.revenue.map(t=>{this.shipmentVessel[e].revenue[t.price_code+t.currency_code+t.country_name]=t.amount}),t.cost.map(t=>{this.shipmentVessel[e].cost[t.price_code+t.currency_code+t.country_name]=t.amount})})}),this.voyage.sort((t,e)=>t.key<e.key?1:e.key<t.key?-1:0),this.arrType.sort(),this.shipmentError=t.filter(t=>t.error),this.onVesselChanged.next([this.shipmentVessel,this.voyage,this.arrType,this.shipmentError])}buildPrice(t){let e=t.filter(t=>"VIETNAM"==t.payment_center),o=t.filter(t=>"VIETNAM"!=t.payment_center),i=["OF","EBS","EFF","RR","BILL","LTHC","SEAL","DO","DTHC","DCIC","VS","AMS","ENS"];e.sort((t,e)=>{var o=t.unit_code,i=e.unit_code,n=t.currency,a=e.currency,c=t.code,r=e.code;return o>i?1:o<i?-1:n>a?1:n<a?-1:c>r?1:c<r?-1:0});let n,a,c=e.filter(t=>t.unit_code.includes("20")),r=e.filter(t=>t.unit_code.includes("40")),s=e.filter(t=>!t.unit_code.includes("20")&&!t.unit_code.includes("40")),b=[],l=[],d=[],h=[],p=[],u=[];i.map((t,e)=>{h[e]=c.filter(e=>e.code.includes(t)),h[e].length>0&&h[e].map(t=>{a=c.indexOf(t),a>=0&&(n=c.splice(a,1),b.push(n[0]))}),p[e]=r.filter(e=>e.code.includes(t)),p[e].length>0&&p[e].map(t=>{a=r.indexOf(t),a>=0&&(n=r.splice(a,1),l.push(n[0]))}),u[e]=s.filter(e=>e.code.includes(t)),u[e].length>0&&u[e].map(t=>{a=s.indexOf(t),a>=0&&(n=s.splice(a,1),d.push(n[0]))})}),o.sort((t,e)=>{var o=t.unit_code,i=e.unit_code,n=t.currency,a=e.currency,c=t.code,r=e.code;return o>i?1:o<i?-1:n>a?1:n<a?-1:c>r?1:c<r?-1:0});let m,f,g=o.filter(t=>t.unit_code.includes("20")),v=o.filter(t=>t.unit_code.includes("40")),y=o.filter(t=>!t.unit_code.includes("20")&&!t.unit_code.includes("40")),k=[],x=[],D=[],w=[],W=[],X=[];i.map((t,e)=>{w[e]=g.filter(e=>e.code.includes(t)),w[e].length>0&&w[e].map(t=>{f=g.indexOf(t),f>=0&&(m=g.splice(f,1),k.push(m[0]))}),W[e]=v.filter(e=>e.code.includes(t)),W[e].length>0&&W[e].map(t=>{f=v.indexOf(t),f>=0&&(m=v.splice(f,1),x.push(m[0]))}),X[e]=y.filter(e=>e.code.includes(t)),X[e].length>0&&X[e].map(t=>{f=y.indexOf(t),f>=0&&(m=y.splice(f,1),D.push(m[0]))})}),this.priceHeader=[...b,...c,...l,...r,...d,...s,...k,...g,...x,...v,...D,...y]}checkModule(t){let e=t.split("-"),o={haiphong:3,hochiminh:4,singapore:12},i={pol:null,pod:null};return"import"==e[0]&&(i.pod=o[e[1]]),"export"==e[0]&&(i.pol=o[e[1]]),i}getPermissionById(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.get(this.authService.apiUrl+"/permission/id/"+t,e).subscribe(t=>{o(t)},i)})}createSelParty(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/sel-party",t,e).subscribe(t=>{o(t)},i)})}updateSelShipment(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.put(this.authService.apiUrl+"/sel/shipment",t,e).subscribe(t=>{o(t)},i)})}createSelBill(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/bill",t,e).subscribe(t=>{o(t)},i)})}createBillContainer(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel/bill-container",t,e).subscribe(t=>{o(t)},i)})}getMovementByContNumber(t,e){let o={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((i,n)=>{this._httpClient.get(this.authService.apiUrl+"/sel-move/cont-num/"+t+"/"+e,o).subscribe(t=>{i(t)},n)})}createSelMove(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel-move/",t,e).subscribe(t=>{o(t)},i)})}createSelVolume(t){let e={headers:new P.c({"Content-Type":"application/json",Authorization:this.authService.accessToken})};return new Promise((o,i)=>{this._httpClient.post(this.authService.apiUrl+"/sel-volume",t,e).subscribe(t=>{o(t)},i)})}}return t.\u0275fac=function(e){return new(e||t)(V.bc(i.g),V.bc(P.a),V.bc(F.a),V.bc(J.b))},t.\u0275prov=V.Nb({token:t,factory:t.\u0275fac}),t})();var R=o("lJxs"),N=o("I/3d");let $=(()=>{class t{constructor(t,e,o){if(this.router=t,this.db=e,this.authService=o,this.codeCompany=["DCL","SEG","SEL","SIN","SLO","TWN","REF: "],this.onPermissionChanged=new T.a([]),this.onSelDocumentChanged=new T.a([]),this.onDataChanged=new T.a([]),this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}writeDatabaseBooking(t,e){this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(t).set(e)}readDatabaseBooking(){return this.bookingCollection=this.db.collection("booking-draft"),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(R.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)}))),this.booking}readDatabaseBookingByUser(t){return this.bookingCollection=this.db.collection("booking-draft",e=>e.where("user","==",t)),this.booking=this.bookingCollection.snapshotChanges().pipe(Object(R.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)}))),this.booking}getDatabaseBookingById(t){return this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(t).valueChanges()}updateDatabaseBookingById(t,e){this.bookingCollection=this.db.collection("booking-draft"),this.bookingCollection.doc(t).set(e)}deleteDatabaseBookingById(t){this.bookingDoc=this.db.doc("booking-draft/"+t),this.bookingDoc.delete()}}return t.\u0275fac=function(e){return new(e||t)(V.bc(i.g),V.bc(N.a),V.bc(F.a))},t.\u0275prov=V.Nb({token:t,factory:t.\u0275fac}),t})();var B=o("yrbL"),z=o("JX91"),E=o("3Pt+"),H=o("ofXK"),U=o("XiUz"),Y=o("EwFO"),q=o("znSr");const G=["formDirective"];function Q(t,e){if(1&t&&(V.Xb(0,"mat-option",41),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t.id)("matTooltip",t.full_name),V.Db(1),V.Nc(" ",t.short_name," ")}}function K(t,e){if(1&t&&(V.Xb(0,"mat-option",41),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t.id)("matTooltip",t.full_name),V.Db(1),V.Nc(" ",t.short_name," ")}}function Z(t,e){if(1&t&&(V.Xb(0,"mat-option",36),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t.id),V.Db(1),V.Mc(t.name)}}function tt(t,e){if(1&t&&(V.Xb(0,"mat-icon",42),V.Lc(1,"import_export"),V.Wb()),2&t){V.jc();const t=V.xc(47);V.pc("matMenuTriggerFor",t)}}function et(t,e){if(1&t&&(V.Xb(0,"mat-option",36),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t.id),V.Db(1),V.Nc(" ",t.name," ")}}function ot(t,e){if(1&t){const t=V.Yb();V.Xb(0,"button",43),V.fc("click",(function(o){V.Bc(t);const i=e.$implicit;return V.jc().getPort(i)})),V.Lc(1),V.Wb()}if(2&t){const t=e.$implicit;V.Db(1),V.Nc(" ",t.name," ")}}function it(t,e){if(1&t&&(V.Xb(0,"mat-option",36),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t.id),V.Db(1),V.Nc(" ",t.name," ")}}function nt(t,e){if(1&t&&(V.Xb(0,"mat-option",36),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t),V.Db(1),V.Mc(t)}}const at=function(t){return{hide:t}},ct=function(){return[null,1,2,3,4,5,6,7,8,9,10,11,12]};let rt=(()=>{class t{constructor(t,e,o,i){this.formBuilder=t,this.authService=e,this.commonService=o,this.datePipe=i,this.fitlerShipment=new V.o,this.year=(new Date).getFullYear(),this.monthList=[],this.monthView={},this.form=this.formBuilder.group({customer:[null],supplier:[null],owner:[null],pol:[null],pod:[null],month:[null],year:[null],date_from:[null],date_to:[null],button:[null]}),this.searchChange=!0,this._unsubscribeAll=new j.a}ngOnChanges(t){if(t.modul&&t.modul.currentValue&&(this.modul=t.modul.currentValue),t.formSearch&&t.formSearch.currentValue){if(this.form.patchValue(this.formSearch),this.formSearch=t.formSearch.currentValue,this.formSearch&&this.formSearch.date_from&&"string"==typeof this.formSearch.date_from){let t=this.formSearch.date_from.split("-"),e=new Date(t[0],parseInt(t[1])-1,t[2]);this.form.controls.date_from.setValue(e)}if(this.formSearch&&this.formSearch.date_to&&"string"==typeof this.formSearch.date_to){let t=this.formSearch.date_to.split("-"),e=new Date(t[0],parseInt(t[1])-1,t[2]);this.form.controls.date_to.setValue(e)}}}ngOnInit(){this.filteredCustomer=this.form.controls.customer.valueChanges.pipe(Object(z.a)(""),Object(R.a)(t=>t?"string"==typeof t?t:t.partner_name:null),Object(R.a)(t=>t?this.commonService.filterData(t,"partner_name",this.customer):[])),this.filteredSupplier=this.form.controls.supplier.valueChanges.pipe(Object(z.a)(""),Object(R.a)(t=>t?"string"==typeof t?t:t.partner_name:null),Object(R.a)(t=>t?this.commonService.filterData(t,"partner_name",this.supplier):[])),this.filteredSeaport1=this.form.controls.pol.valueChanges.pipe(Object(z.a)(""),Object(R.a)(t=>t?"string"==typeof t?t:t.name:null),Object(R.a)(t=>t?this.commonService.filterData(t,"name",this.seaport):[])),this.filteredSeaport2=this.form.controls.pod.valueChanges.pipe(Object(z.a)(""),Object(R.a)(t=>t?"string"==typeof t?t:t.name:null),Object(R.a)(t=>t?this.commonService.filterData(t,"name",this.seaport):[])),this.form.controls.button.valueChanges.subscribe(t=>{t&&this.getMonthTime(t)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getMonthTime(t){let e,o,i=this.form.controls.year.value,n=this.form.controls.month.value,a=new Date,c=a.getMonth(),r=a.getFullYear();t&&"M"!=t?"Y"==t?(e=new Date(i,n?n-1:0,1),o=new Date(i,n||12,0)):"TM"==t?(this.form.controls.month.setValue(null),e=new Date(r,c,1),o=new Date(r,c+1,0)):"TY"==t&&(this.form.controls.month.setValue(null),e=new Date(r,0,1),o=new Date(r,12,0)):i&&(e=new Date(i,n?n-1:0,1),o=new Date(i,n||12,0)),this.form.controls.date_from.setValue(e),this.form.controls.date_to.setValue(o)}clearForm(){if(this.searchNgForm.resetForm(),this.modul.includes("hochiminh"))this.form.controls.pol.setValue(4);else if(this.modul.includes("haiphong"))this.form.controls.pol.setValue(3);else{let t=new Date;t.setFullYear(t.getFullYear()-1,t.getMonth(),1),this.form.controls.date_from.setValue(t)}}onSearchFormSubmit(t){let e=JSON.parse(JSON.stringify(t.value));"string"==typeof t.customer&&(this.form.controls.customer.setValue(null),e.customer=null),"string"==typeof t.supplier&&(this.form.controls.supplier.setValue(null),e.supplier=null),"string"==typeof t.owner&&(this.form.controls.owner.setValue(null),e.owner=null),"string"==typeof t.pol&&(this.form.controls.pol.setValue(null),e.pol=null),"string"==typeof t.pod&&(this.form.controls.pod.setValue(null),e.pod=null),e.date_from=e.date_from?this.datePipe.transform(e.date_from,"yyyy-MM-dd"):null,e.date_to=e.date_to?this.datePipe.transform(e.date_to,"yyyy-MM-dd"):null,this.fitlerShipment.emit(e)}getPort(t){this.form.controls.pol.setValue(t.pol),this.form.controls.pod.setValue(t.pod)}setData(t){this.form.patchValue(t)}setMonth(t){this.form.controls.month.setValue(parseInt(t.month)+1),this.form.controls.year.setValue(t.year),this.getMonthTime("M"),setTimeout(()=>{this.onSearchFormSubmit(this.form)},100)}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(E.d),V.Rb(F.a),V.Rb(C.a),V.Rb(H.f))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-sidebar"]],viewQuery:function(t,e){var o;1&t&&V.Sc(G,!0),2&t&&V.wc(o=V.gc())&&(e.searchNgForm=o.first)},inputs:{modul:"modul",height:"height",customer:"customer",supplier:"supplier",seaport:"seaport",user:"user",portPair:"portPair",formSearch:"formSearch"},outputs:{fitlerShipment:"fitlerShipment"},features:[V.Bb()],decls:105,vars:47,consts:[["name","form",3,"formGroup","keydown.enter","ngSubmit"],["formDirective","ngForm"],[1,"navbar-top"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","type","submit","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #039BE5","border-radius","8px","color","#696969"],["mat-raised-button","","type","button","fxFlex","45",1,"ml-8","mr-8",2,"border","1px solid #F44336","border-radius","8px","color","#696969",3,"click"],["fusePerfectScrollbar","",1,"navbar-scroll-container"],[1,"navbar-content"],[1,"nav","material2","pb-4"],["fxLayout","row wrap"],["fxFlex","100",1,"info-line","mt-24"],["appearance","outline",1,"w-100-p","pr-sm-8"],["inputCheck","","aria-label","customer","matInput","","formControlName","customer",3,"matAutocomplete"],[3,"displayWith"],["autoCus","matAutocomplete"],[3,"value","matTooltip",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line"],["inputCheck","","aria-label","agent","matInput","","formControlName","supplier",3,"matAutocomplete"],["autoAgent","matAutocomplete"],["formControlName","owner"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"info-line",3,"ngClass"],["inputCheck","","aria-label","pol","matInput","","formControlName","pol",3,"matAutocomplete"],["matSuffix","","class","cursor-pointer",3,"matMenuTriggerFor",4,"ngIf"],["autoSeaport1","matAutocomplete"],["moreMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["inputCheck","","aria-label","pod","matInput","","formControlName","pod",3,"matAutocomplete"],["autoSeaport2","matAutocomplete"],["inputCheck","","matInput","","name","date_from","formControlName","date_from",3,"matDatepicker","change"],["matSuffix","",3,"for"],["dateFrom",""],["inputCheck","","matInput","","name","date_to","formControlName","date_to",3,"matDatepicker","change"],["dateTo",""],["formControlName","month",3,"selectionChange"],["formControlName","year",3,"selectionChange"],[3,"value"],[1,"group"],["fxLayout","column","fxLayoutAlign","start start","formControlName","button"],["value","TM",1,"mb-12"],["value","TY",1,"mb-12"],[3,"value","matTooltip"],["matSuffix","",1,"cursor-pointer",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(V.Xb(0,"form",0,1),V.fc("keydown.enter",(function(t){return"TEXTAREA"==t.target.tagName}))("ngSubmit",(function(t){return e.onSearchFormSubmit(e.form)})),V.Xb(2,"div",2),V.Xb(3,"div",3),V.Xb(4,"button",4),V.Lc(5," Submit "),V.Wb(),V.Xb(6,"button",5),V.fc("click",(function(t){return e.clearForm()})),V.Lc(7," Clear "),V.Wb(),V.Wb(),V.Wb(),V.Xb(8,"div",6),V.Xb(9,"div",7),V.Xb(10,"div",8),V.Xb(11,"div",9),V.Xb(12,"div",10),V.Xb(13,"mat-form-field",11),V.Xb(14,"mat-label"),V.Lc(15,"Customer"),V.Wb(),V.Sb(16,"input",12),V.Xb(17,"mat-autocomplete",13,14),V.Jc(19,Q,2,3,"mat-option",15),V.kc(20,"async"),V.Wb(),V.Wb(),V.Wb(),V.Xb(21,"div",16),V.Xb(22,"mat-form-field",11),V.Xb(23,"mat-label"),V.Lc(24,"Agent"),V.Wb(),V.Sb(25,"input",17),V.Xb(26,"mat-autocomplete",13,18),V.Jc(28,K,2,3,"mat-option",15),V.kc(29,"async"),V.Wb(),V.Wb(),V.Wb(),V.Xb(30,"div",16),V.Xb(31,"mat-form-field",11),V.Xb(32,"mat-label"),V.Lc(33,"Owner"),V.Wb(),V.Xb(34,"mat-select",19),V.Jc(35,Z,2,2,"mat-option",20),V.Wb(),V.Wb(),V.Wb(),V.Xb(36,"div",21),V.Xb(37,"mat-form-field",11),V.Xb(38,"mat-label"),V.Lc(39,"POL"),V.Wb(),V.Sb(40,"input",22),V.Jc(41,tt,2,1,"mat-icon",23),V.Xb(42,"mat-autocomplete",13,24),V.Jc(44,et,2,2,"mat-option",20),V.kc(45,"async"),V.Wb(),V.Wb(),V.Xb(46,"mat-menu",null,25),V.Jc(48,ot,2,1,"button",26),V.Wb(),V.Wb(),V.Xb(49,"div",16),V.Xb(50,"mat-form-field",11),V.Xb(51,"mat-label"),V.Lc(52,"POD"),V.Wb(),V.Sb(53,"input",27),V.Xb(54,"mat-autocomplete",13,28),V.Jc(56,it,2,2,"mat-option",20),V.kc(57,"async"),V.Wb(),V.Wb(),V.Wb(),V.Xb(58,"div",16),V.Xb(59,"mat-form-field",11),V.Xb(60,"mat-label"),V.Lc(61,"ETD from"),V.Wb(),V.Xb(62,"input",29),V.fc("change",(function(t){return e.commonService.setDateStr(t)})),V.Wb(),V.Sb(63,"mat-datepicker-toggle",30),V.Sb(64,"mat-datepicker",null,31),V.Wb(),V.Wb(),V.Xb(66,"div",16),V.Xb(67,"mat-form-field",11),V.Xb(68,"mat-label"),V.Lc(69,"ETD to"),V.Wb(),V.Xb(70,"input",32),V.fc("change",(function(t){return e.commonService.setDateStr(t)})),V.Wb(),V.Sb(71,"mat-datepicker-toggle",30),V.Sb(72,"mat-datepicker",null,33),V.Wb(),V.Wb(),V.Xb(74,"div",16),V.Xb(75,"mat-form-field",11),V.Xb(76,"mat-label"),V.Lc(77,"Month"),V.Wb(),V.Xb(78,"mat-select",34),V.fc("selectionChange",(function(t){return e.getMonthTime("M")})),V.Jc(79,nt,2,2,"mat-option",20),V.Wb(),V.Wb(),V.Wb(),V.Xb(80,"div",16),V.Xb(81,"mat-form-field",11),V.Xb(82,"mat-label"),V.Lc(83,"Year"),V.Wb(),V.Xb(84,"mat-select",35),V.fc("selectionChange",(function(t){return e.getMonthTime("Y")})),V.Xb(85,"mat-option",36),V.Lc(86),V.Wb(),V.Xb(87,"mat-option",36),V.Lc(88),V.Wb(),V.Xb(89,"mat-option",36),V.Lc(90),V.Wb(),V.Xb(91,"mat-option",36),V.Lc(92),V.Wb(),V.Xb(93,"mat-option",36),V.Lc(94),V.Wb(),V.Xb(95,"mat-option",36),V.Lc(96),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Xb(97,"div",37),V.Xb(98,"h2"),V.Lc(99,"Time option"),V.Wb(),V.Xb(100,"mat-radio-group",38),V.Xb(101,"mat-radio-button",39),V.Lc(102,"This month"),V.Wb(),V.Xb(103,"mat-radio-button",40),V.Lc(104,"This year"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.xc(18),o=V.xc(27),i=V.xc(43),n=V.xc(55),a=V.xc(65),c=V.xc(73);V.pc("formGroup",e.form),V.Db(8),V.Ic("height",e.height,"px"),V.Db(8),V.pc("matAutocomplete",t),V.Db(1),V.pc("displayWith",e.commonService.displayFn.bind(e,"short_name",e.customer)),V.Db(2),V.pc("ngForOf",V.lc(20,36,e.filteredCustomer)),V.Db(6),V.pc("matAutocomplete",o),V.Db(1),V.pc("displayWith",e.commonService.displayFn.bind(e,"short_name",e.supplier)),V.Db(2),V.pc("ngForOf",V.lc(29,38,e.filteredSupplier)),V.Db(7),V.pc("ngForOf",e.user),V.Db(1),V.pc("ngClass",V.rc(44,at,!e.modul.includes("workflow"))),V.Db(4),V.pc("matAutocomplete",i),V.Db(1),V.pc("ngIf",!e.modul.includes("hochiminh")&&!e.modul.includes("haiphong")),V.Db(1),V.pc("displayWith",e.commonService.displayFn.bind(e,"name",e.seaport)),V.Db(2),V.pc("ngForOf",V.lc(45,40,e.filteredSeaport1)),V.Db(4),V.pc("ngForOf",e.portPair),V.Db(5),V.pc("matAutocomplete",n),V.Db(1),V.pc("displayWith",e.commonService.displayFn.bind(e,"name",e.seaport)),V.Db(2),V.pc("ngForOf",V.lc(57,42,e.filteredSeaport2)),V.Db(6),V.pc("matDatepicker",a),V.Db(1),V.pc("for",a),V.Db(7),V.pc("matDatepicker",c),V.Db(1),V.pc("for",c),V.Db(8),V.pc("ngForOf",V.qc(46,ct)),V.Db(6),V.pc("value",e.year-4),V.Db(1),V.Mc(e.year-4),V.Db(1),V.pc("value",e.year-3),V.Db(1),V.Mc(e.year-3),V.Db(1),V.pc("value",e.year-2),V.Db(1),V.Mc(e.year-2),V.Db(1),V.pc("value",e.year-1),V.Db(1),V.Mc(e.year-1),V.Db(1),V.pc("value",e.year),V.Db(1),V.Mc(e.year),V.Db(1),V.pc("value",e.year+1),V.Db(1),V.Mc(e.year+1)}},directives:[E.A,E.q,E.h,U.d,U.c,r.b,U.b,Y.a,b.c,b.f,h.b,E.b,a.c,E.p,E.g,a.a,H.s,u.a,H.q,q.a,H.t,n.d,c.b,c.d,b.h,c.a,X.n,m.b,m.a,d.a,l.a,n.c,n.a],pipes:[H.b],styles:["dashboard-sidebar .navbar-top{background:#fff!important;padding:13px 0;-webkit-box-pack:center;justify-content:center;height:65px;border-bottom:1px solid #a3a3a3}dashboard-sidebar .navbar-scroll-container{background:#fff!important}dashboard-sidebar .navbar-scroll-container .navbar-content{padding-top:0}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2{overflow:hidden}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line{padding-left:8px;padding-right:8px;margin-bottom:-4px}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .search-shortcut{font-size:12px;padding:4px;border:1px solid #039be5;border-radius:4px;margin-right:4px;margin-bottom:4px;cursor:pointer}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mySelectedPanel .mat-option{font-size:12px}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-container{-webkit-transform:scale(.6);transform:scale(.6)}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .info-line .mat-radio-label-content{font-size:12px}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group{margin:16px 16px 16px 8px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:28px 16px 8px;border:1px solid rgba(0,0,0,.12)}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa;color:rgba(0,0,0,.54)}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .nav-link{border-radius:20px;margin:0 12px;padding:0 12px}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-customer{height:54px;min-height:54px;padding:0 8px!important;border-bottom:1px solid #e9e9e9}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-customer .search-customer-name{text-overflow:ellipsis;overflow:hidden;font-size:15px;font-weight:600;padding:4px}dashboard-sidebar .navbar-scroll-container .navbar-content .nav.material2 .nav-item .search-customer .search-customer-name .search-item{border:1px solid #e0e0e0;padding:8px;border-radius:20px;background:#fff}navbar .navbar-top{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;min-height:64px;max-height:64px;height:64px;padding:12px 12px 12px 20px}@media screen and (max-width:599px){navbar .navbar-top{min-height:56px;max-height:56px;height:56px}}navbar .navbar-scroll-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;overflow-y:auto;-webkit-overflow-scrolling:touch;background:-webkit-gradient(linear,left top,left bottom,color-stop(30%,transparent),color-stop(30%,transparent)),-webkit-gradient(linear,left top,left bottom,color-stop(0,rgba(0,0,0,.25)),color-stop(40%,transparent));background:linear-gradient(transparent 30%,transparent 0),linear-gradient(rgba(0,0,0,.25),transparent 40%);background-repeat:no-repeat;background-size:100% 40px,100% 10px;background-attachment:local,scroll}navbar .navbar-scroll-container .user{position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start;width:100%;height:136px;min-height:136px;max-height:136px;padding:24px 0 64px}navbar .navbar-scroll-container .user .avatar-container{position:absolute;top:92px;border-radius:50%;padding:8px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%}navbar .navbar-scroll-container .user .avatar-container .avatar{width:72px;height:72px;margin:0}navbar .navbar-scroll-container .navbar-content{-webkit-box-flex:1;flex:1 1 auto;padding-top:32px}"],encapsulation:2}),t})();var st=o("HX77"),bt=o("B9zo"),lt=o("rPBI");function dt(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"button",15),V.Xb(2,"span",16),V.Lc(3),V.Wb(),V.Xb(4,"mat-icon",17),V.Lc(5),V.Wb(),V.Wb(),V.Ub()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.pc("routerLink",e.link[t].route),V.Db(2),V.Mc(e.link[t].name),V.Db(2),V.Mc(e.link[t].icon)}}function ht(t,e){if(1&t&&(V.Vb(0),V.Jc(1,dt,6,3,"ng-container",14),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.pc("ngIf","workflow"==o.modul||"workflow"!=o.modul&&"stock"!=t)}}function pt(t,e){if(1&t){const t=V.Yb();V.Xb(0,"button",18),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.changeScreen.emit(!0)})),V.Xb(1,"mat-icon"),V.Lc(2,"flip_to_front"),V.Wb(),V.Wb()}}function ut(t,e){if(1&t){const t=V.Yb();V.Xb(0,"button",18),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.changeScreen.emit(!1)})),V.Xb(1,"mat-icon"),V.Lc(2,"flip_to_back"),V.Wb(),V.Wb()}}let mt=(()=>{class t{constructor(){this.toggleSidebar=new V.o,this.showHideBar=new V.o,this.refreshPage=new V.o,this.searchFilter=new V.o,this.changeScreen=new V.o,this.link={overview:{name:"Overview",route:"",icon:"equalizer"},stock:{name:"Stock",route:"",icon:"view_carousel"},shipment:{name:"Shipment",route:"",icon:"equalizer"},book:{name:"Book",route:"",icon:"view_carousel"},vessel:{name:"Vessel",route:"",icon:"view_carousel"},container:{name:"Container",route:"",icon:"equalizer"},check:{name:"Checking",route:"",icon:"view_carousel"}},this.arrLink=["overview","stock","shipment","book","vessel","container","check"]}ngOnChanges(t){t.modul&&t.modul.currentValue&&(this.modul=t.modul.currentValue,this.arrLink.map(t=>{this.link[t].route="/apps/"+this.modul+"/dashboard/board/"+t}))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-header"]],inputs:{modul:"modul",searchText:"searchText",sidebarName:"sidebarName",fullScreen:"fullScreen"},outputs:{toggleSidebar:"toggleSidebar",showHideBar:"showHideBar",refreshPage:"refreshPage",searchFilter:"searchFilter",changeScreen:"changeScreen"},features:[V.Bb()],decls:23,vars:4,consts:[[1,"p-0","mat-elevation-z1"],["fxFlex","","fxFill","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 auto","fxLayout","row","fxLayoutAlign","start center"],[1,"px-8","px-md-16"],["mat-icon-button","","fxHide.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","mr-12",3,"click"],["mat-icon-button","","fxHide","","fxShow.gt-sm","","fxFlex","10","fxFlex.gt-sm","0",1,"sidebar-toggle","ml-8",3,"click"],[4,"ngFor","ngForOf"],["fxFlex","0 1 auto","fxLayout","row","fxLayoutAlign","start center",1,""],[1,"toolbar-separator"],[3,"searchText","inputValue"],["mat-icon-button","",1,"ml-8","mr-8",3,"click"],["color","accent"],["mat-icon-button","","class","ml-8",3,"click",4,"ngIf"],["fxHide","","fxShow.gt-xs","",1,"toolbar-separator"],[4,"ngIf"],["mat-icon-button","","routerLinkActive","accent-600-fg",1,"quick-panel-toggle-button",3,"routerLink"],["fxHide","","fxShow.gt-sm",""],["fxShow","","fxHide.gt-sm",""],["mat-icon-button","",1,"ml-8",3,"click"]],template:function(t,e){1&t&&(V.Xb(0,"mat-toolbar",0),V.Xb(1,"div",1),V.Xb(2,"div",2),V.Xb(3,"div",3),V.Xb(4,"button",4),V.fc("click",(function(t){return e.toggleSidebar.emit(e.sidebarName)})),V.Xb(5,"mat-icon"),V.Lc(6,"menu"),V.Wb(),V.Wb(),V.Xb(7,"button",5),V.fc("click",(function(t){return e.showHideBar.emit()})),V.Xb(8,"mat-icon"),V.Lc(9,"menu"),V.Wb(),V.Wb(),V.Wb(),V.Jc(10,ht,2,1,"ng-container",6),V.Wb(),V.Xb(11,"div",7),V.Sb(12,"div",8),V.Xb(13,"filter-search-bar",9),V.fc("inputValue",(function(t){return e.searchFilter.emit(t)})),V.Wb(),V.Sb(14,"div",8),V.Xb(15,"button",10),V.fc("click",(function(t){return t.stopPropagation(),e.refreshPage.emit()})),V.Xb(16,"mat-icon",11),V.Lc(17,"refresh"),V.Wb(),V.Wb(),V.Sb(18,"div",8),V.Jc(19,pt,3,0,"button",12),V.Jc(20,ut,3,0,"button",12),V.Sb(21,"div",13),V.Sb(22,"div",13),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Db(10),V.pc("ngForOf",e.arrLink),V.Db(3),V.pc("searchText",e.searchText),V.Db(6),V.pc("ngIf",!e.fullScreen),V.Db(1),V.pc("ngIf",e.fullScreen))},directives:[g.a,U.b,U.e,U.d,U.c,r.b,q.b,l.a,H.s,lt.a,H.t,i.i,i.h],styles:["dashboard-header{position:relative;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;z-index:4}dashboard-header.below{z-index:2}dashboard-header .mat-toolbar{position:relative;background:#fff!important;color:inherit!important}dashboard-header .logo{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}dashboard-header .logo .logo-icon{width:38px}dashboard-header .chat-panel-toggle-button,dashboard-header .language-button,dashboard-header .quick-panel-toggle-button,dashboard-header .user-button,dashboard-header fuse-search-bar{width:80px;height:64px}@media screen and (max-width:599px){dashboard-header .chat-panel-toggle-button,dashboard-header .language-button,dashboard-header .quick-panel-toggle-button,dashboard-header .user-button,dashboard-header fuse-search-bar{width:40px;height:56px}}dashboard-header .navbar-toggle-button{min-width:56px;height:56px}dashboard-header .toolbar-separator{height:64px;width:1px;background:#e6e6e6}@media screen and (max-width:599px){dashboard-header .toolbar-separator{height:56px}}"],encapsulation:2}),t})();var ft=o("fE3o");function gt(t,e){if(1&t){const t=V.Yb();V.Xb(0,"fuse-sidebar",6),V.Xb(1,"div",7),V.Xb(2,"dashboard-sidebar",8),V.fc("fitlerShipment",(function(e){return V.Bc(t),V.jc().getFilterShipment(e)})),V.Wb(),V.Wb(),V.Wb()}if(2&t){const t=V.jc();V.Db(2),V.pc("modul",t.modul)("height",t.height)("customer",t.customer)("supplier",t.supplier)("seaport",t.seaport)("user",t.user)("portPair",t.portPair)("formSearch",t.formSearch)}}function vt(t,e){1&t&&V.Sb(0,"router-outlet")}let yt=(()=>{class t{constructor(t,e,o){this._fuseSidebarService=t,this.dashboardService=e,this.authService=o,this.sidebarPanel=!0,this.fullScreen=!1,this.height=560,this.modul=this.authService.modul,this._unsubscribeAll=new j.a}ngOnInit(){this.authService.urlChanged.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe(t=>{this.modul=this.authService.modul}),this.authService.windowSizeChanged.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-12}),this.authService.changeScreen.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-12:this.authService.screenHeight-64-64-12}),this.dashboardService.onOverviewChanged.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe(t=>{this.portPair=this.dashboardService.portPair,this.searchText=this.dashboardService.searchText,this.formSearch=this.dashboardService.currenSearch.formSearch}),this.dashboardService.onDataChanged.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe(t=>{this.customer=this.dashboardService.customer,this.supplier=this.dashboardService.supplier,this.seaport=this.dashboardService.seaport,this.user=this.dashboardService.user}),this.dashboardService.onMonthChanged.pipe(Object(B.takeUntil)(this._unsubscribeAll)).subscribe(t=>{this.dashboardSidebarComponent.setMonth(t)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeScreen(t){this.fullScreen=t,this.authService.changeScreen.next(t),this.dashboardService.changeScreen(t)}toggleSidebar(t){this._fuseSidebarService.getSidebar(t).toggleOpen()}showHideBar(t){this.sidebarPanel=!this.sidebarPanel}refreshPage(t){this.authService.refreshData(this.dashboardService)}getFilterShipment(t){console.log(t),this.authService.onRequestChanged.next(!0),this.dashboardService.getFilterShipment(t).then(e=>{this.dashboardService.currenSearch.formSearch=t,this.authService.onRequestChanged.next(!1)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Submit fail")})}searchFilter(t){this.dashboardService.onSearchTextChanged.next(t)}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(st.a),V.Rb(A),V.Rb(F.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard"]],viewQuery:function(t,e){var o;1&t&&V.Sc(rt,!0),2&t&&V.wc(o=V.gc())&&(e.dashboardSidebarComponent=o.first)},decls:6,vars:6,consts:[[1,"page-layout","simple","left-sidebar","inner-scroll"],["class","sidebar","name","dashboard-sidebar","position","left","lockedOpen","gt-md",4,"ngIf"],["fusePerfectScrollbar","",1,"center"],[3,"modul","searchText","fullScreen","sidebarName","showHideBar","refreshPage","toggleSidebar","changeScreen","searchFilter"],[1,"content","pl-8","pt-8","pb-8"],[4,"ngIf"],["name","dashboard-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"content"],[3,"modul","height","customer","supplier","seaport","user","portPair","formSearch","fitlerShipment"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Jc(1,gt,3,8,"fuse-sidebar",1),V.Xb(2,"div",2),V.Xb(3,"dashboard-header",3),V.fc("showHideBar",(function(t){return e.showHideBar(t)}))("refreshPage",(function(t){return e.refreshPage(t)}))("toggleSidebar",(function(t){return e.toggleSidebar(t)}))("changeScreen",(function(t){return e.changeScreen(t)}))("toggleSidebar",(function(t){return e.toggleSidebar(t)}))("searchFilter",(function(t){return e.searchFilter(t)})),V.Wb(),V.Xb(4,"div",4),V.Jc(5,vt,1,0,"router-outlet",5),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Db(1),V.pc("ngIf",e.sidebarPanel),V.Db(2),V.pc("modul",e.modul)("searchText",e.searchText)("fullScreen",e.fullScreen)("sidebarName","dashboard-sidebar"),V.Db(2),V.pc("ngIf",!0))},directives:[bt.a,H.t,Y.a,mt,ft.a,rt,i.l],styles:[""]}),t})();var kt=o("PVWW"),xt=o("1G5W");function Dt(t,e){if(1&t&&(V.Xb(0,"th",10),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Ic("top",e.inverseOfTranslation),V.Db(1),V.Mc(t)}}function wt(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Dt,2,3,"th",9),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.pc("ngIf",o.total[t]>0)}}const Wt=function(t){return{"red-400-bg":t}};function Xt(t,e){if(1&t&&(V.Xb(0,"td",20),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc().$implicit;V.pc("ngClass",V.rc(2,Wt,e.process>0&&e[t]!=e["move"+t])),V.Db(1),V.Mc(e[t])}}function St(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Xt,2,4,"td",19),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2);V.Db(1),V.pc("ngIf",o.total[t]>0)}}function _t(t,e){1&t&&(V.Xb(0,"mat-chip"),V.Lc(1,"Booking"),V.Wb())}function Lt(t,e){1&t&&(V.Xb(0,"mat-chip",21),V.Lc(1,"Stuffing"),V.Wb())}function Ot(t,e){1&t&&(V.Xb(0,"mat-chip",22),V.Lc(1,"Ready to load"),V.Wb())}function Mt(t,e){1&t&&(V.Xb(0,"mat-chip",23),V.Lc(1,"Loaded"),V.Wb())}function Ct(t,e){1&t&&(V.Xb(0,"mat-chip",21),V.Lc(1,"Discharge"),V.Wb())}function Tt(t,e){1&t&&(V.Xb(0,"mat-chip",22),V.Lc(1,"Pick up"),V.Wb())}function jt(t,e){1&t&&(V.Xb(0,"mat-chip",23),V.Lc(1,"Complete"),V.Wb())}const It=function(t){return{"error-cell":t}};function Pt(t,e){if(1&t&&(V.Xb(0,"tr"),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td",11),V.Xb(4,"a",12),V.Lc(5),V.Wb(),V.Wb(),V.Xb(6,"td"),V.Lc(7),V.Wb(),V.Xb(8,"td"),V.Lc(9),V.Wb(),V.Jc(10,St,2,1,"ng-container",3),V.Xb(11,"td",13),V.Lc(12),V.Wb(),V.Xb(13,"td",13),V.Lc(14),V.Wb(),V.Xb(15,"td"),V.Xb(16,"mat-chip-list",14),V.Jc(17,_t,2,0,"mat-chip",15),V.Jc(18,Lt,2,0,"mat-chip",16),V.Jc(19,Ot,2,0,"mat-chip",17),V.Jc(20,Mt,2,0,"mat-chip",18),V.Jc(21,Ct,2,0,"mat-chip",16),V.Jc(22,Tt,2,0,"mat-chip",17),V.Jc(23,jt,2,0,"mat-chip",18),V.Wb(),V.Wb(),V.Xb(24,"td"),V.Lc(25),V.Wb(),V.Xb(26,"td"),V.Lc(27),V.Wb(),V.Xb(28,"td"),V.Lc(29),V.Wb(),V.Xb(30,"td"),V.Lc(31),V.Wb(),V.Xb(32,"td"),V.Lc(33),V.kc(34,"date"),V.Wb(),V.Xb(35,"td",4),V.Lc(36),V.kc(37,"number"),V.Wb(),V.Xb(38,"td",4),V.Lc(39),V.kc(40,"number"),V.Wb(),V.Xb(41,"td"),V.Lc(42),V.Wb(),V.Xb(43,"td"),V.Lc(44),V.Wb(),V.Xb(45,"td"),V.Lc(46),V.Wb(),V.Wb()),2&t){const t=e.$implicit,o=e.index,i=V.jc();V.Db(2),V.Mc(o+1),V.Db(1),V.pc("matTooltip",t.volume_check?"":"Thi\u1ebfu container so v\u1edbi volume")("ngClass",V.rc(39,It,!t.volume_check)),V.Db(1),V.pc("routerLink","/apps/"+i.modul+"/shipment/detail/"+t.id+"/soa"),V.Db(1),V.Mc(t.code),V.Db(2),V.Mc(t.bill),V.Db(2),V.Mc(t.vessel_full_name),V.Db(1),V.pc("ngForOf",i.package),V.Db(1),V.pc("matTooltip",t.customer_name),V.Db(1),V.Mc(t.customer_short_name),V.Db(1),V.pc("matTooltip",t.agent_name),V.Db(1),V.Mc(t.agent_short_name),V.Db(2),V.pc("ngSwitch",t.process),V.Db(1),V.pc("ngSwitchCase",0),V.Db(1),V.pc("ngSwitchCase",1),V.Db(1),V.pc("ngSwitchCase",2),V.Db(1),V.pc("ngSwitchCase",3),V.Db(1),V.pc("ngSwitchCase",4),V.Db(1),V.pc("ngSwitchCase",5),V.Db(1),V.pc("ngSwitchCase",6),V.Db(2),V.Mc(t.pol_name),V.Db(2),V.Mc(t.load_terminal_name),V.Db(2),V.Mc(t.pod_name),V.Db(2),V.Mc(t.discharge_terminal_name),V.Db(2),V.Mc(V.mc(34,30,t.depart_time,"MM/dd/yyyy HH:mm")),V.Db(3),V.Mc(V.mc(37,33,t.revenueTotal,"1.0-0")),V.Db(3),V.Mc(V.mc(40,36,t.costTotal,"1.0-0")),V.Db(3),V.Mc(t.cont_move),V.Db(2),V.Mc(t.owner_last_name),V.Db(2),V.Mc(t.create_by_last_name)}}function Vt(t,e){if(1&t&&(V.Xb(0,"td",25),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Mc(e.total[t])}}function Ft(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Vt,2,3,"td",24),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.pc("ngIf",o.total[t]>0)}}let Jt=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}ngOnChanges(t){t.shipment&&(t.shipment.currentValue||null==t.shipment.currentValue)&&(this.shipment=t.shipment.currentValue)}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-shipment-list"]],viewQuery:function(t,e){var o;1&t&&V.Sc(D.e,!0),2&t&&V.wc(o=V.gc())&&(e.viewPort=o.first)},inputs:{shipment:"shipment",total:"total",package:"package",permission:"permission",height:"height",modul:"modul"},features:[V.Bb()],decls:67,vars:82,consts:[["fxLayout","column"],["itemSize","43",1,"h-100-p"],[1,"simple","dashboard-table"],[4,"ngFor","ngForOf"],[1,"text-right"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"text-bold"],["colspan","2",1,"text-bold"],[1,"text-right","text-bold"],["class","text-center",3,"top",4,"ngIf"],[1,"text-center"],[3,"matTooltip","ngClass"],[1,"cursor-pointer",3,"routerLink"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["class","text-center",3,"ngClass",4,"ngIf"],[1,"text-center",3,"ngClass"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""],["class","text-bold text-center",3,"bottom",4,"ngIf"],[1,"text-bold","text-center"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"cdk-virtual-scroll-viewport",1),V.Xb(2,"table",2),V.Xb(3,"thead"),V.Xb(4,"tr"),V.Xb(5,"th"),V.Lc(6,"No"),V.Wb(),V.Xb(7,"th"),V.Lc(8,"Code"),V.Wb(),V.Xb(9,"th"),V.Lc(10,"Bill"),V.Wb(),V.Xb(11,"th"),V.Lc(12,"Voyage"),V.Wb(),V.Jc(13,wt,2,1,"ng-container",3),V.Xb(14,"th"),V.Lc(15,"Customer"),V.Wb(),V.Xb(16,"th"),V.Lc(17,"Agent"),V.Wb(),V.Xb(18,"th"),V.Lc(19,"Process"),V.Wb(),V.Xb(20,"th"),V.Lc(21,"POL"),V.Wb(),V.Xb(22,"th"),V.Lc(23,"Load terminal"),V.Wb(),V.Xb(24,"th"),V.Lc(25,"POD"),V.Wb(),V.Xb(26,"th"),V.Lc(27,"Discharge terminal"),V.Wb(),V.Xb(28,"th"),V.Lc(29,"ETD"),V.Wb(),V.Xb(30,"th",4),V.Lc(31,"Revenue"),V.Wb(),V.Xb(32,"th",4),V.Lc(33,"Cost"),V.Wb(),V.Xb(34,"th"),V.Lc(35,"Cont/Move"),V.Wb(),V.Xb(36,"th"),V.Lc(37,"Owner"),V.Wb(),V.Xb(38,"th"),V.Lc(39,"Create by"),V.Wb(),V.Wb(),V.Wb(),V.Xb(40,"tbody"),V.Jc(41,Pt,47,41,"tr",5),V.Wb(),V.Xb(42,"tfoot"),V.Xb(43,"tr"),V.Xb(44,"td",6),V.Lc(45,"Total"),V.Wb(),V.Xb(46,"td",7),V.Lc(47),V.Wb(),V.Sb(48,"td"),V.Jc(49,Ft,2,1,"ng-container",3),V.Sb(50,"td"),V.Sb(51,"td"),V.Sb(52,"td"),V.Sb(53,"td"),V.Sb(54,"td"),V.Sb(55,"td"),V.Sb(56,"td"),V.Sb(57,"td"),V.Xb(58,"td",8),V.Lc(59),V.kc(60,"number"),V.Wb(),V.Xb(61,"td",8),V.Lc(62),V.kc(63,"number"),V.Wb(),V.Sb(64,"td"),V.Sb(65,"td"),V.Sb(66,"td"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Ic("height",e.height,"px"),V.Db(5),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.pc("ngForOf",e.package),V.Db(1),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(3),V.pc("cdkVirtualForOf",e.shipment),V.Db(3),V.Ic("bottom",e.inverseOfTranslation2),V.Db(2),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Pc("",e.total.teu," Teus of ",e.shipment.length," Shipment",e.shipment.length>0?"s":"",""),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.pc("ngForOf",e.package),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Mc(V.mc(60,76,e.total.revenue,"1.0-0")),V.Db(2),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Mc(V.mc(63,79,e.total.cost,"1.0-0")),V.Db(2),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2),V.Db(1),V.Ic("bottom",e.inverseOfTranslation2))},directives:[U.d,D.e,D.a,H.s,D.d,H.t,d.a,H.q,q.a,i.j,x.c,H.x,H.y,x.a],pipes:[H.g,H.f],styles:["dashboard-shipment-list .dashboard-table{font-size:12px}dashboard-shipment-list .dashboard-table td,dashboard-shipment-list .dashboard-table th{padding:8px!important;white-space:nowrap}dashboard-shipment-list .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-shipment-list .dashboard-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-shipment-list .dashboard-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-shipment-list .dashboard-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-shipment-list .dashboard-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}dashboard-shipment-list .dashboard-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:kt.a}}),t})(),At=(()=>{class t{constructor(t,e,o,i,n){if(this.router=t,this.route=e,this._activatedRoute=o,this.authService=i,this.dashboardService=n,this.package=[],this.height=560,this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.dashboardService.onShipmentChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.shipment=t.shipment,this.total=t.total,this.package=this.shipment.length>0?this.shipment[0].package:[]})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(i.a),V.Rb(i.a),V.Rb(F.a),V.Rb(A))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-list"]],decls:1,vars:6,consts:[[3,"modul","shipment","total","package","permission","height"]],template:function(t,e){1&t&&V.Sb(0,"dashboard-shipment-list",0),2&t&&V.pc("modul",e.modul)("shipment",e.shipment)("total",e.total)("package",e.package)("permission",e.permission)("height",e.height)},directives:[Jt],styles:[""],encapsulation:2,data:{animation:kt.a}}),t})();function Rt(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",9),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(2),V.Mc(t)}}function Nt(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",10),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueVNOpen=!o.revenueVNOpen})),V.Lc(1,"add"),V.Wb()}}function $t(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",11),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueVNOpen=!o.revenueVNOpen})),V.Lc(1,"removed"),V.Wb()}}function Bt(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",10),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueNNOpen=!o.revenueNNOpen})),V.Lc(1,"add"),V.Wb()}}function zt(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",11),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueNNOpen=!o.revenueNNOpen})),V.Lc(1,"removed"),V.Wb()}}function Et(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",9),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit;V.Db(2),V.Mc(o[t])}}function Ht(t,e){if(1&t&&(V.Xb(0,"td",18),V.Xb(1,"div",19),V.Xb(2,"span",20),V.Lc(3),V.Wb(),V.Xb(4,"span",21),V.Lc(5),V.kc(6,"number"),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(2).$implicit,o=V.jc();V.Db(1),V.pc("matTooltip",t.payment_center),V.Db(2),V.Oc("",t.code," ",t.currency,""),V.Db(2),V.Mc(V.mc(6,4,o.priceObj[e.id].revenueVNPrice[t.code+t.currency+t.payment_center],"VND"==t.currency?"1.0-0":"1.2-2"))}}function Ut(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Ht,7,7,"td",17),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2).$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.priceObj[o.id].revenueVNPrice[t.code+t.currency+t.payment_center])}}function Yt(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Ut,2,1,"ng-container",3),V.Ub()),2&t){const t=V.jc(2);V.Db(1),V.pc("ngForOf",t.priceHeader)}}function qt(t,e){if(1&t&&(V.Xb(0,"td",18),V.Xb(1,"div",19),V.Xb(2,"span",20),V.Lc(3),V.Wb(),V.Xb(4,"span",21),V.Lc(5),V.kc(6,"number"),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(2).$implicit,o=V.jc();V.Db(1),V.pc("matTooltip",t.payment_center),V.Db(2),V.Oc("",t.code," ",t.currency,""),V.Db(2),V.Mc(V.mc(6,4,o.priceObj[e.id].revenueNNPrice[t.code+t.currency+t.payment_center],"VND"==t.currency?"1.0-0":"1.2-2"))}}function Gt(t,e){if(1&t&&(V.Vb(0),V.Jc(1,qt,7,7,"td",17),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2).$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.priceObj[o.id].revenueNNPrice[t.code+t.currency+t.payment_center])}}function Qt(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Gt,2,1,"ng-container",3),V.Ub()),2&t){const t=V.jc(2);V.Db(1),V.pc("ngForOf",t.priceHeader)}}const Kt=function(t){return{"text-strike red-A700-fg":t}};function Zt(t,e){if(1&t){const t=V.Yb();V.Xb(0,"tr",12),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td",13),V.Xb(4,"a",14),V.fc("click",(function(e){return V.Bc(t),V.jc().matDialogRef.close()})),V.Lc(5),V.Wb(),V.Wb(),V.Xb(6,"td"),V.Lc(7),V.Wb(),V.Xb(8,"td"),V.Lc(9),V.Wb(),V.Xb(10,"td"),V.Lc(11),V.Wb(),V.Xb(12,"td"),V.Lc(13),V.Wb(),V.Xb(14,"td"),V.Lc(15),V.Wb(),V.Xb(16,"td"),V.Lc(17),V.Wb(),V.Xb(18,"td"),V.Lc(19),V.kc(20,"date"),V.Wb(),V.Xb(21,"td"),V.Lc(22),V.kc(23,"date"),V.Wb(),V.Jc(24,Et,3,1,"ng-container",3),V.Xb(25,"td"),V.Lc(26),V.Wb(),V.Xb(27,"td"),V.Lc(28),V.Wb(),V.Xb(29,"td"),V.Lc(30),V.Wb(),V.Xb(31,"td",15),V.Jc(32,Yt,2,1,"ng-container",16),V.Wb(),V.Xb(33,"td",15),V.Jc(34,Qt,2,1,"ng-container",16),V.Wb(),V.Wb()}if(2&t){const t=e.$implicit,o=e.index,i=V.jc();V.pc("ngClass",V.rc(25,Kt,!t.type)),V.Db(2),V.Mc(o+1),V.Db(2),V.pc("routerLink","/apps/"+i.modul+"/shipment/book-detail/id/"+t.id+"/overview"),V.Db(1),V.Mc(t.book.code),V.Db(2),V.Mc(t.book.customer.short_name),V.Db(2),V.Oc("",t.voyage.vessel_name," ",t.voyage.name,""),V.Db(2),V.Mc(t.voyage.load_port_name),V.Db(2),V.Mc(t.voyage.load_terminal_name),V.Db(2),V.Mc(t.voyage.discharge_port_name),V.Db(2),V.Mc(t.voyage.discharge_terminal_name),V.Db(2),V.Mc(V.mc(20,19,t.voyage.depart_time,"MM/dd/yyyy HH:mm")),V.Db(3),V.Mc(V.mc(23,22,t.voyage.arrive_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngForOf",i.bookType),V.Db(2),V.Mc(t.book.commodity),V.Db(2),V.Mc(t.name?t.name:t.user),V.Db(2),V.Mc(t.book.create_by?t.book.create_by.name:t.user),V.Db(2),V.pc("ngIf",i.revenueVNOpen),V.Db(2),V.pc("ngIf",i.revenueNNOpen)}}function te(t,e){if(1&t&&(V.Xb(0,"td",23),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(e.total[t])}}function ee(t,e){if(1&t&&(V.Vb(0),V.Jc(1,te,2,1,"td",22),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.pc("ngIf",o.total[t]>0)}}let oe=(()=>{class t{constructor(t){this.authService=t,this.revenueVNOpen=!0,this.revenueNNOpen=!0}ngOnInit(){}ngOnChanges(t){t.filterBook&&(t.filterBook.currentValue||null==t.filterBook.currentValue)&&(this.filterBook=t.filterBook.currentValue)}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-book-list"]],viewQuery:function(t,e){var o;1&t&&V.Sc(D.e,!0),2&t&&V.wc(o=V.gc())&&(e.viewPort=o.first)},inputs:{filterBook:"filterBook",bookWeek:"bookWeek",bookType:"bookType",package:"package",price:"price",priceHeader:"priceHeader",priceObj:"priceObj",permission:"permission",height:"height",contType:"contType",total:"total",modul:"modul"},features:[V.Bb()],decls:64,vars:9,consts:[[2,"overflow","auto"],[1,"simple","dashboard-table"],[1,"sticky-col1",2,"z-index","25"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"sticky-col1","text-bold"],[1,"text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],[3,"ngClass"],[1,"sticky-col1"],[1,"cursor-pointer",3,"routerLink","click"],[2,"padding","0"],[4,"ngIf"],["style","padding: 4px","class"," border-right w-80 accent-100-bg",4,"ngIf"],[1,"border-right","w-80","accent-100-bg",2,"padding","4px"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],[1,"text-bold"],["class","text-center text-bold",4,"ngIf"],[1,"text-center","text-bold"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"table",1),V.Xb(2,"thead"),V.Xb(3,"tr"),V.Xb(4,"th"),V.Lc(5,"No"),V.Wb(),V.Xb(6,"th",2),V.Lc(7,"Code"),V.Wb(),V.Xb(8,"th"),V.Lc(9,"Customer"),V.Wb(),V.Xb(10,"th"),V.Lc(11,"Voyage"),V.Wb(),V.Xb(12,"th"),V.Lc(13,"Load port"),V.Wb(),V.Xb(14,"th"),V.Lc(15,"Load terminal"),V.Wb(),V.Xb(16,"th"),V.Lc(17,"Discharge port"),V.Wb(),V.Xb(18,"th"),V.Lc(19,"Discharge terminal"),V.Wb(),V.Xb(20,"th"),V.Lc(21,"ETD"),V.Wb(),V.Xb(22,"th"),V.Lc(23,"ETA"),V.Wb(),V.Jc(24,Rt,3,1,"ng-container",3),V.Xb(25,"th"),V.Lc(26,"Commodity"),V.Wb(),V.Xb(27,"th"),V.Lc(28,"Owner"),V.Wb(),V.Xb(29,"th"),V.Lc(30,"Create by"),V.Wb(),V.Xb(31,"th"),V.Xb(32,"div",4),V.Xb(33,"span"),V.Lc(34,"REV VN"),V.Wb(),V.Jc(35,Nt,2,0,"mat-icon",5),V.Jc(36,$t,2,0,"mat-icon",6),V.Wb(),V.Wb(),V.Xb(37,"th"),V.Xb(38,"div",4),V.Xb(39,"span"),V.Lc(40,"REV NN"),V.Wb(),V.Jc(41,Bt,2,0,"mat-icon",5),V.Jc(42,zt,2,0,"mat-icon",6),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Xb(43,"tbody"),V.Jc(44,Zt,35,27,"tr",7),V.Wb(),V.Xb(45,"tfoot"),V.Xb(46,"tr"),V.Sb(47,"td"),V.Xb(48,"td",8),V.Lc(49,"Total"),V.Wb(),V.Sb(50,"td"),V.Sb(51,"td"),V.Sb(52,"td"),V.Sb(53,"td"),V.Sb(54,"td"),V.Sb(55,"td"),V.Sb(56,"td"),V.Sb(57,"td"),V.Jc(58,ee,2,1,"ng-container",3),V.Sb(59,"td"),V.Sb(60,"td"),V.Sb(61,"td"),V.Sb(62,"td"),V.Sb(63,"td"),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Ic("height",e.height,"px"),V.Db(24),V.pc("ngForOf",e.bookType),V.Db(11),V.pc("ngIf",!e.revenueVNOpen),V.Db(1),V.pc("ngIf",e.revenueVNOpen),V.Db(5),V.pc("ngIf",!e.revenueNNOpen),V.Db(1),V.pc("ngIf",e.revenueNNOpen),V.Db(2),V.pc("ngForOf",e.filterBook),V.Db(14),V.pc("ngForOf",e.bookType))},directives:[H.s,U.d,U.c,H.t,l.a,H.q,q.a,i.j,d.a],pipes:[H.f,H.g],styles:["dashboard-book-list .dashboard-table{font-size:12px}dashboard-book-list .dashboard-table td,dashboard-book-list .dashboard-table th{padding:8px!important;white-space:nowrap}dashboard-book-list .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-book-list .dashboard-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-book-list .dashboard-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-book-list .dashboard-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-book-list .dashboard-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}dashboard-book-list .dashboard-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:kt.a}}),t})(),ie=(()=>{class t{constructor(t,e,o,i,n){if(this.router=t,this.route=e,this._activatedRoute=o,this.authService=i,this.dashboardService=n,this.package=[],this.price=[],this.priceHeader=[],this.priceObj={},this.height=560,this.contType=[],this.total={},this.revenueVNOpen=!0,this.revenueNNOpen=!0,this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.dashboardService.onBookOverviewChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{t.length>0&&(this.filterBook=this.dashboardService.filterBook,this.priceHeader=this.dashboardService.priceHeader,this.priceObj=this.dashboardService.priceObj,this.bookWeek=t[1],this.bookType=t[2],this.contType=[],this.total={},this.filterBook.map(t=>{t.book.volume&&t.book.volume.map(t=>{this.contType.includes(t.cont_type.code)||(this.contType.push(t.cont_type.code),this.total[t.cont_type.code]=0),this.total[t.cont_type.code]+=t.quantity})}),this.contType.sort())})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(i.a),V.Rb(i.a),V.Rb(F.a),V.Rb(A))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-book"]],decls:1,vars:12,consts:[[3,"modul","filterBook","bookWeek","bookType","package","price","priceHeader","priceObj","contType","total","permission","height"]],template:function(t,e){1&t&&V.Sb(0,"dashboard-book-list",0),2&t&&V.pc("modul",e.modul)("filterBook",e.filterBook)("bookWeek",e.bookWeek)("bookType",e.bookType)("package",e.package)("price",e.price)("priceHeader",e.priceHeader)("priceObj",e.priceObj)("contType",e.contType)("total",e.total)("permission",e.permission)("height",e.height)},directives:[oe],styles:["dashboard-book .dashboard-table{font-size:12px}dashboard-book .dashboard-table td,dashboard-book .dashboard-table th{padding:8px;white-space:nowrap}dashboard-book .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-book .dashboard-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-book .dashboard-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-book .dashboard-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-book .dashboard-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}dashboard-book .dashboard-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:kt.a}}),t})();var ne=o("zK0N");function ae(t,e){if(1&t&&(V.Xb(0,"mat-option",7),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("value",t),V.Db(1),V.Mc(t)}}function ce(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(2),V.Mc(t)}}function re(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(2),V.Mc(t)}}function se(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc(3).$implicit,i=V.jc(2);V.Db(1),V.Eb("rowspan",i.dataVessel[o].shipment.length),V.Db(1),V.Mc(i.dataVessel[o][t])}}function be(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td"),V.Lc(4),V.Wb(),V.Xb(5,"td"),V.Lc(6),V.kc(7,"date"),V.Wb(),V.Xb(8,"td"),V.Lc(9),V.kc(10,"date"),V.Wb(),V.Jc(11,se,3,2,"ng-container",15),V.Ub()),2&t){const t=V.jc().$implicit,e=V.jc(),o=e.$implicit,i=e.index,n=V.jc(2);V.Db(1),V.Eb("rowspan",n.dataVessel[o].shipment.length),V.Db(1),V.Mc(i+1),V.Db(1),V.Eb("rowspan",n.dataVessel[o].shipment.length),V.Db(1),V.Oc("",t.voyage.vessel_name," ",t.voyage.name,""),V.Db(1),V.Eb("rowspan",n.dataVessel[o].shipment.length),V.Db(1),V.Mc(V.mc(7,10,t.voyage.depart_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.Eb("rowspan",n.dataVessel[o].shipment.length),V.Db(1),V.Mc(V.mc(10,13,t.voyage.arrive_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngForOf",n.contType)}}function le(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit;V.Db(2),V.Mc(o[t])}}function de(t,e){if(1&t){const t=V.Yb();V.Xb(0,"tr"),V.Jc(1,be,12,16,"ng-container",26),V.Xb(2,"td",27),V.Xb(3,"a",28),V.fc("click",(function(e){return V.Bc(t),V.jc(3).matDialogRef.close()})),V.Lc(4),V.Wb(),V.Wb(),V.Xb(5,"td"),V.Lc(6),V.Wb(),V.Jc(7,le,3,1,"ng-container",15),V.Xb(8,"td"),V.Lc(9),V.Wb(),V.Xb(10,"td"),V.Lc(11),V.Wb(),V.Xb(12,"td"),V.Lc(13),V.Wb(),V.Xb(14,"td"),V.Lc(15),V.Wb(),V.Xb(16,"td"),V.Lc(17),V.Wb(),V.Wb()}if(2&t){const t=e.$implicit,o=e.index,i=V.jc(3);V.Db(1),V.pc("ngIf",0==o),V.Db(2),V.pc("routerLink","/apps/"+i.modul+"/shipment/book-detail/id/"+t.id+"/overview"),V.Db(1),V.Mc(t.book.code),V.Db(2),V.Mc(t.book.customer.short_name),V.Db(1),V.pc("ngForOf",i.contType),V.Db(2),V.Mc(t.voyage.load_terminal_name),V.Db(2),V.Mc(t.voyage.discharge_terminal_name),V.Db(2),V.Mc(t.book.commodity),V.Db(2),V.Mc(t.name?t.name:t.user),V.Db(2),V.Mc(t.book.create_by?t.book.create_by.name:t.user)}}function he(t,e){if(1&t&&(V.Vb(0),V.Jc(1,de,18,10,"tr",15),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2);V.Db(1),V.pc("ngForOf",o.dataVessel[t].shipment)}}function pe(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"tr"),V.Xb(2,"td",25),V.Lc(3),V.Wb(),V.Wb(),V.Jc(4,he,2,1,"ng-container",15),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.Eb("colspan",12+o.contType.length),V.Db(1),V.Mc(t),V.Db(1),V.pc("ngForOf",o.voyage[t])}}function ue(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",29),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.Mc(o.total[t])}}function me(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(2),V.Mc(t)}}function fe(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(2),V.Mc(t)}}function ge(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",30),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueVNOpen=!o.revenueVNOpen})),V.Lc(1,"add"),V.Wb()}}function ve(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",31),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueVNOpen=!o.revenueVNOpen})),V.Lc(1,"removed"),V.Wb()}}function ye(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",30),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueNNOpen=!o.revenueNNOpen})),V.Lc(1,"add"),V.Wb()}}function ke(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",31),V.fc("click",(function(e){V.Bc(t);const o=V.jc();return e.stopPropagation(),o.revenueNNOpen=!o.revenueNNOpen})),V.Lc(1,"removed"),V.Wb()}}function xe(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc(4).$implicit,i=V.jc(2);V.Db(1),V.Eb("rowspan",i.dataVessel[o].shipment.length+i.dataVessel[o].container),V.Db(1),V.Mc(i.dataVessel[o][t])}}function De(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td"),V.Lc(4),V.Wb(),V.Xb(5,"td"),V.Lc(6),V.kc(7,"date"),V.Wb(),V.Xb(8,"td"),V.Lc(9),V.kc(10,"date"),V.Wb(),V.Jc(11,xe,3,2,"ng-container",15),V.Ub()),2&t){const t=V.jc(2).$implicit,e=V.jc(),o=e.$implicit,i=e.index,n=V.jc(2);V.Db(1),V.Eb("rowspan",n.dataVessel[o].shipment.length+n.dataVessel[o].container),V.Db(1),V.Mc(i+1),V.Db(1),V.Eb("rowspan",n.dataVessel[o].shipment.length+n.dataVessel[o].container),V.Db(1),V.Oc("",t.voyage.vessel_name," ",t.voyage.name,""),V.Db(1),V.Eb("rowspan",n.dataVessel[o].shipment.length+n.dataVessel[o].container),V.Db(1),V.Mc(V.mc(7,10,t.voyage.depart_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.Eb("rowspan",n.dataVessel[o].shipment.length+n.dataVessel[o].container),V.Db(1),V.Mc(V.mc(10,13,t.voyage.arrive_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngForOf",n.contType)}}function we(t,e){if(1&t){const t=V.Yb();V.Xb(0,"mat-icon",35),V.fc("click",(function(e){V.Bc(t);const o=V.jc(3).$implicit;return V.jc(3).openModal(o)})),V.Lc(1,"add"),V.Wb()}2&t&&V.pc("matTooltip","Add container")}function We(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc(3).$implicit;V.Db(1),V.Eb("rowspan",o.bookConfirm.contArr.length),V.Db(1),V.Mc(o[t])}}function Xe(t,e){if(1&t&&(V.Xb(0,"td",37),V.Xb(1,"div",38),V.Xb(2,"span",39),V.Lc(3),V.Wb(),V.Xb(4,"span",40),V.Lc(5),V.kc(6,"number"),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(4).$implicit,o=V.jc(3);V.Db(1),V.pc("matTooltip",t.payment_center),V.Db(2),V.Oc("",t.code," ",t.currency,""),V.Db(2),V.Mc(V.mc(6,4,o.priceObj[e.id].revenueVNPrice[t.code+t.currency+t.payment_center],"VND"==t.currency?"1.0-0":"1.2-2"))}}function Se(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Xe,7,7,"td",36),V.Ub()),2&t){const t=e.$implicit,o=V.jc(4).$implicit,i=V.jc(3);V.Db(1),V.pc("ngIf",i.priceObj[o.id].revenueVNPrice[t.code+t.currency+t.payment_center])}}function _e(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Se,2,1,"ng-container",15),V.Ub()),2&t){const t=V.jc(6);V.Db(1),V.pc("ngForOf",t.priceHeader)}}function Le(t,e){if(1&t&&(V.Xb(0,"td",37),V.Xb(1,"div",38),V.Xb(2,"span",39),V.Lc(3),V.Wb(),V.Xb(4,"span",40),V.Lc(5),V.kc(6,"number"),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(5).$implicit,o=V.jc(3);V.Db(1),V.pc("matTooltip",t.payment_center),V.Db(2),V.Oc("",t.code," ",t.currency,""),V.Db(2),V.Mc(V.mc(6,4,o.priceObj[e.id].revenueNNPrice[t.code+t.currency+t.payment_center],"VND"==t.currency?"1.0-0":"1.2-2"))}}function Oe(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Le,7,7,"td",36),V.Ub()),2&t){const t=e.$implicit,o=V.jc(5).$implicit,i=V.jc(3);V.Db(1),V.pc("ngIf",i.priceObj[o.id].revenueNNPrice[t.code+t.currency+t.payment_center])}}function Me(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Oe,2,1,"ng-container",15),V.Ub()),2&t){const t=V.jc(7);V.Db(1),V.pc("ngForOf",t.priceHeader)}}function Ce(t,e){if(1&t&&(V.Xb(0,"td",33),V.Jc(1,Me,2,1,"ng-container",26),V.Wb()),2&t){const t=V.jc(3).$implicit,e=V.jc(3);V.Eb("rowspan",t.bookConfirm.contArr.length),V.Db(1),V.pc("ngIf",e.revenueNNOpen)}}function Te(t,e){if(1&t){const t=V.Yb();V.Vb(0),V.Xb(1,"td",27),V.Xb(2,"div",20),V.Xb(3,"a",28),V.fc("click",(function(e){return V.Bc(t),V.jc(5).matDialogRef.close()})),V.Lc(4),V.Wb(),V.Jc(5,we,2,1,"mat-icon",32),V.Wb(),V.Wb(),V.Xb(6,"td"),V.Lc(7),V.Wb(),V.Jc(8,We,3,2,"ng-container",15),V.Xb(9,"td"),V.Lc(10),V.Wb(),V.Xb(11,"td"),V.Lc(12),V.Wb(),V.Xb(13,"td"),V.Lc(14),V.Wb(),V.Xb(15,"td"),V.Lc(16),V.Wb(),V.Xb(17,"td"),V.Lc(18),V.Wb(),V.Xb(19,"td",33),V.Jc(20,_e,2,1,"ng-container",26),V.Wb(),V.Jc(21,Ce,2,2,"td",34),V.Ub()}if(2&t){const t=V.jc().index,e=V.jc().$implicit,o=V.jc(3);V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(2),V.pc("routerLink","/apps/"+o.modul+"/shipment/book-detail/id/"+e.id+"/overview"),V.Db(1),V.Mc(e.book.code),V.Db(1),V.pc("ngIf",0==t),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.Mc(e.book.customer.short_name),V.Db(1),V.pc("ngForOf",o.contType),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.Mc(e.voyage.load_terminal_name),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.Mc(e.voyage.discharge_terminal_name),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.Mc(e.book.commodity),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.Mc(e.name?e.name:e.user),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.Mc(e.book.create_by?e.book.create_by.name:e.user),V.Db(1),V.Eb("rowspan",e.bookConfirm.contArr.length),V.Db(1),V.pc("ngIf",o.revenueVNOpen),V.Db(1),V.pc("ngIf",o.revenueNNOpen)}}function je(t,e){if(1&t&&(V.Xb(0,"tr"),V.Jc(1,De,12,16,"ng-container",26),V.Jc(2,Te,22,20,"ng-container",26),V.Xb(3,"td",23),V.Lc(4),V.Wb(),V.Xb(5,"td"),V.Lc(6),V.Wb(),V.Wb()),2&t){const t=e.$implicit,o=e.index,i=V.jc().index;V.Db(1),V.pc("ngIf",0==i&&0==o),V.Db(1),V.pc("ngIf",0==o),V.Db(2),V.Mc(t.container),V.Db(2),V.Mc(t.type)}}function Ie(t,e){if(1&t&&(V.Vb(0),V.Jc(1,je,7,4,"tr",15),V.Ub()),2&t){const t=e.$implicit;V.Db(1),V.pc("ngForOf",t.bookConfirm.contArr)}}function Pe(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Ie,2,1,"ng-container",15),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2);V.Db(1),V.pc("ngForOf",o.dataVessel[t].shipment)}}function Ve(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"tr"),V.Xb(2,"td",25),V.Lc(3),V.Wb(),V.Wb(),V.Jc(4,Pe,2,1,"ng-container",15),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.Eb("colspan",15+o.contType.length),V.Db(1),V.Mc(t),V.Db(1),V.pc("ngForOf",o.voyage[t])}}function Fe(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",29),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.Mc(o.total[t])}}function Je(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(2),V.Mc(t)}}function Ae(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",24),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit;V.Db(2),V.Mc(o[t])}}function Re(t,e){if(1&t){const t=V.Yb();V.Xb(0,"tr"),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td",27),V.Xb(4,"a",28),V.fc("click",(function(e){return V.Bc(t),V.jc(2).matDialogRef.close()})),V.Lc(5),V.Wb(),V.Wb(),V.Xb(6,"td"),V.Lc(7),V.Wb(),V.Xb(8,"td"),V.Lc(9),V.Wb(),V.Jc(10,Ae,3,1,"ng-container",15),V.Xb(11,"td"),V.Lc(12),V.Wb(),V.Xb(13,"td"),V.Lc(14),V.kc(15,"date"),V.Wb(),V.Xb(16,"td"),V.Lc(17),V.Wb(),V.Xb(18,"td"),V.Lc(19),V.kc(20,"date"),V.Wb(),V.Xb(21,"td"),V.Lc(22),V.Wb(),V.Xb(23,"td"),V.Lc(24),V.Wb(),V.Xb(25,"td"),V.Lc(26),V.Wb(),V.Wb()}if(2&t){const t=e.$implicit,o=e.index,i=V.jc(2);V.Db(2),V.Mc(o+1),V.Db(2),V.pc("routerLink","/apps/"+i.modul+"/shipment/book-detail/id/"+t.id+"/overview"),V.Db(1),V.Mc(t.book.code),V.Db(2),V.Mc(t.book.customer.short_name),V.Db(2),V.Oc("",t.voyage.vessel_name," ",t.voyage.name,""),V.Db(1),V.pc("ngForOf",i.contType),V.Db(2),V.Mc(t.voyage.load_terminal_name),V.Db(2),V.Mc(V.mc(15,14,t.voyage.depart_time,"MM/dd/yyyy HH:mm")),V.Db(3),V.Mc(t.voyage.discharge_terminal_name),V.Db(2),V.Mc(V.mc(20,17,t.voyage.arrive_time,"MM/dd/yyyy HH:mm")),V.Db(3),V.Mc(t.book.commodity),V.Db(2),V.Mc(t.name?t.name:t.user),V.Db(2),V.Mc(t.book.create_by?t.book.create_by.name:t.user)}}function Ne(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"tr"),V.Xb(2,"td",25),V.Lc(3),V.Wb(),V.Wb(),V.Jc(4,Re,27,20,"tr",15),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.Eb("colspan",12+o.contType.length),V.Db(1),V.Mc(t),V.Db(1),V.pc("ngForOf",o.data[t])}}function $e(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",41),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.Mc(o.total[t])}}let Be=(()=>{class t{constructor(t,e,o,i,n,a,c){this.router=t,this.matDialogRef=e,this._data=o,this.authService=i,this.commonService=n,this._matDialog=a,this.datePipe=c,this.vessel=[],this.data={},this.dataVessel={},this.voyage={},this.sptRouter=[],this.book=[],this.filterBook=[],this.selected=0,this.total={},this.priceHeader=[],this.priceObj={},this.selectedVessel="all",this.revenueVNOpen=!0,this.revenueNNOpen=!0,this.height=500,this.label=o.label,this.book=o.data,this.contType=o.contType,this.priceHeader=o.priceHeader,this.priceObj=o.priceObj,this.height=o.height,this.modul=o.modul,this.bookFirebaseService=o.bookFirebaseService,this.vessel=[],this.book.map(t=>{this.vessel.includes(t.voyage.vessel_name+" "+t.voyage.name)||this.vessel.push(t.voyage.vessel_name+" "+t.voyage.name)}),this.filterBook=this.book.slice(),this.buildReport()}ngOnInit(){this.permission=this.authService.getAction(this.router.routerState.snapshot.url.split("/")[2])}selectedChanged(t){this.filterBook="all"!=t.value?this.book.filter(e=>e.voyage.vessel_name+" "+e.voyage.name==t.value):this.book.slice(),this.buildReport()}buildReport(){this.sptRouter=[],this.data={},this.voyage={},this.dataVessel={},this.total={},this.filterBook.map(t=>{t.bookConfirm.contArr&&0!=t.bookConfirm.contArr.length||(t.bookConfirm.contArr=[{container:null,type:null}]);let e=t.voyage.load_port_name+"-"+t.voyage.discharge_port_name;this.sptRouter.includes(e)?this.data[e].push(t):(this.sptRouter.push(e),this.data[e]=[t])}),this.sptRouter.map(t=>{this.voyage[t]=[],this.data[t].map(e=>{let o=e.voyage,i=o.depart_time+"-"+o.vessel_name+"-"+o.name;this.dataVessel[i]||(this.dataVessel[i]={voyage_name:o.name,vessel_name:o.vessel_name,pol_name:o.load_port_name,pod_name:o.discharge_port_name,depart_time:o.depart_time,arrive_time:o.arrive_time,closing_time:o.closing_time,shipment:[],container:0},this.voyage[t].push(i)),this.dataVessel[i].shipment.push(e),this.dataVessel[i].container+=e.bookConfirm.contArr.length-1,e.book.volume.map(t=>{this.dataVessel[i][t.cont_type.code]?this.dataVessel[i][t.cont_type.code]+=t.quantity:this.dataVessel[i][t.cont_type.code]=t.quantity,this.total[t.cont_type.code]?this.total[t.cont_type.code]+=t.quantity:this.total[t.cont_type.code]=t.quantity})})}),console.log(this.dataVessel)}openModal(t){this.dialogRef=this._matDialog.open(ne.a,{panelClass:"bookings-details-container-modal-dialog",data:{label:"Add/Remove container",data:t.bookConfirm}}),this.dialogRef.afterClosed().subscribe(e=>{e&&(t.bookConfirm.contArr=e.contArr?e.contArr:[],this.bookFirebaseService.updateDatabaseBookingById(t.id,t),this.filterBook=this.book.slice(),this.buildReport())})}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(f.f),V.Rb(f.a),V.Rb(F.a),V.Rb(C.a),V.Rb(f.b),V.Rb(H.f))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-modal-dialog"]],decls:183,vars:25,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-button","",3,"color","click"],["mat-button","",1,"ml-8",3,"color","click"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matPrefix",""],["mat-icon-button","","aria-label","Close dialog",3,"click"],[1,"p-16","pb-0","m-0",2,"overflow","auto"],[1,"header-less-tabs",3,"selectedIndex"],[1,"viewer-panel"],[1,"simple","dashboard-table"],[4,"ngFor","ngForOf"],[1,"sticky-col1",2,"z-index","25"],[1,"sticky-col1","text-bold"],[1,"w-40","p-0","sticky-right-col"],[1,"simple","dashboard-table2"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",3,"click",4,"ngIf"],["class","cursor-pointer","color","warn",3,"click",4,"ngIf"],[1,"sticky-right-col"],[1,"text-center"],[1,"text-bold","row-router"],[4,"ngIf"],[1,"sticky-col1"],[1,"cursor-pointer",3,"routerLink","click"],[1,"text-bold","text-center"],["color","accent",1,"cursor-pointer",3,"click"],["color","warn",1,"cursor-pointer",3,"click"],["class","cursor-pointer","color","accent",3,"matTooltip","click",4,"ngIf"],[2,"padding","0"],["style","padding: 0",4,"ngIf"],["color","accent",1,"cursor-pointer",3,"matTooltip","click"],["style","padding: 4px","class"," border-right w-80 accent-100-bg",4,"ngIf"],[1,"border-right","w-80","accent-100-bg",2,"padding","4px"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4","font-size-10"],[1,"text-bold"],[1,"text-center","text-bold"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"mat-toolbar",1),V.Xb(2,"mat-toolbar-row",2),V.Xb(3,"div"),V.Xb(4,"span",3),V.Lc(5),V.Wb(),V.Xb(6,"button",4),V.fc("click",(function(t){return e.selected=0})),V.Lc(7,"Vessel"),V.Wb(),V.Xb(8,"button",4),V.fc("click",(function(t){return e.selected=1})),V.Lc(9,"Container"),V.Wb(),V.Xb(10,"button",5),V.fc("click",(function(t){return e.selected=2})),V.Lc(11,"Router"),V.Wb(),V.Wb(),V.Xb(12,"div"),V.Xb(13,"mat-form-field"),V.Xb(14,"mat-select",6),V.fc("ngModelChange",(function(t){return e.selectedVessel=t}))("selectionChange",(function(t){return e.selectedChanged(t)})),V.Xb(15,"mat-option",7),V.Lc(16,"All"),V.Wb(),V.Jc(17,ae,2,2,"mat-option",8),V.Wb(),V.Xb(18,"span",9),V.Lc(19,"Vessel:\xa0"),V.Wb(),V.Wb(),V.Xb(20,"button",10),V.fc("click",(function(t){return e.matDialogRef.close()})),V.Xb(21,"mat-icon"),V.Lc(22,"close"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Xb(23,"div",11),V.Xb(24,"mat-tab-group",12),V.Xb(25,"mat-tab"),V.Xb(26,"div",13),V.Xb(27,"table",14),V.Xb(28,"thead"),V.Xb(29,"tr"),V.Xb(30,"th"),V.Lc(31,"No"),V.Wb(),V.Xb(32,"th"),V.Lc(33,"Voyage"),V.Wb(),V.Xb(34,"th"),V.Lc(35,"ETD"),V.Wb(),V.Xb(36,"th"),V.Lc(37,"ETA"),V.Wb(),V.Jc(38,ce,3,1,"ng-container",15),V.Xb(39,"th",16),V.Lc(40,"Code"),V.Wb(),V.Xb(41,"th"),V.Lc(42,"Customer"),V.Wb(),V.Jc(43,re,3,1,"ng-container",15),V.Xb(44,"th"),V.Lc(45,"Load terminal"),V.Wb(),V.Xb(46,"th"),V.Lc(47,"Discharge terminal"),V.Wb(),V.Xb(48,"th"),V.Lc(49,"Commodity"),V.Wb(),V.Xb(50,"th"),V.Lc(51,"Owner"),V.Wb(),V.Xb(52,"th"),V.Lc(53,"Create by"),V.Wb(),V.Wb(),V.Wb(),V.Xb(54,"tbody"),V.Jc(55,pe,5,3,"ng-container",15),V.Wb(),V.Xb(56,"tfoot"),V.Xb(57,"tr"),V.Sb(58,"td"),V.Xb(59,"td",17),V.Lc(60,"Total"),V.Wb(),V.Sb(61,"td"),V.Sb(62,"td"),V.Jc(63,ue,3,1,"ng-container",15),V.Sb(64,"td"),V.Sb(65,"td"),V.Sb(66,"td"),V.Sb(67,"td"),V.Sb(68,"td"),V.Sb(69,"td"),V.Sb(70,"td"),V.Sb(71,"td",18),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Xb(72,"mat-tab"),V.Xb(73,"div",13),V.Xb(74,"table",19),V.Xb(75,"thead"),V.Xb(76,"tr"),V.Xb(77,"th"),V.Lc(78,"No"),V.Wb(),V.Xb(79,"th"),V.Lc(80,"Voyage"),V.Wb(),V.Xb(81,"th"),V.Lc(82,"ETD"),V.Wb(),V.Xb(83,"th"),V.Lc(84,"ETA"),V.Wb(),V.Jc(85,me,3,1,"ng-container",15),V.Xb(86,"th",16),V.Lc(87,"Code"),V.Wb(),V.Xb(88,"th"),V.Lc(89,"Customer"),V.Wb(),V.Jc(90,fe,3,1,"ng-container",15),V.Xb(91,"th"),V.Lc(92,"Load terminal"),V.Wb(),V.Xb(93,"th"),V.Lc(94,"Discharge terminal"),V.Wb(),V.Xb(95,"th"),V.Lc(96,"Commodity"),V.Wb(),V.Xb(97,"th"),V.Lc(98,"Owner"),V.Wb(),V.Xb(99,"th"),V.Lc(100,"Create by"),V.Wb(),V.Xb(101,"th"),V.Xb(102,"div",20),V.Xb(103,"span"),V.Lc(104,"REV VN"),V.Wb(),V.Jc(105,ge,2,0,"mat-icon",21),V.Jc(106,ve,2,0,"mat-icon",22),V.Wb(),V.Wb(),V.Xb(107,"th"),V.Xb(108,"div",20),V.Xb(109,"span"),V.Lc(110,"REV NN"),V.Wb(),V.Jc(111,ye,2,0,"mat-icon",21),V.Jc(112,ke,2,0,"mat-icon",22),V.Wb(),V.Wb(),V.Xb(113,"th",23),V.Lc(114,"Container"),V.Wb(),V.Xb(115,"th"),V.Lc(116,"Type"),V.Wb(),V.Wb(),V.Wb(),V.Xb(117,"tbody"),V.Jc(118,Ve,5,3,"ng-container",15),V.Wb(),V.Xb(119,"tfoot"),V.Xb(120,"tr"),V.Sb(121,"td"),V.Xb(122,"td",17),V.Lc(123,"Total"),V.Wb(),V.Sb(124,"td"),V.Sb(125,"td"),V.Jc(126,Fe,3,1,"ng-container",15),V.Sb(127,"td"),V.Sb(128,"td"),V.Sb(129,"td"),V.Sb(130,"td"),V.Sb(131,"td"),V.Sb(132,"td"),V.Sb(133,"td"),V.Sb(134,"td"),V.Sb(135,"td"),V.Sb(136,"td"),V.Sb(137,"td"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Xb(138,"mat-tab"),V.Xb(139,"div",13),V.Xb(140,"table",14),V.Xb(141,"thead"),V.Xb(142,"tr"),V.Xb(143,"th"),V.Lc(144,"No"),V.Wb(),V.Xb(145,"th",16),V.Lc(146,"Code"),V.Wb(),V.Xb(147,"th"),V.Lc(148,"Customer"),V.Wb(),V.Xb(149,"th"),V.Lc(150,"Voyage"),V.Wb(),V.Jc(151,Je,3,1,"ng-container",15),V.Xb(152,"th"),V.Lc(153,"Load terminal"),V.Wb(),V.Xb(154,"th"),V.Lc(155,"ETD"),V.Wb(),V.Xb(156,"th"),V.Lc(157,"Discharge terminal"),V.Wb(),V.Xb(158,"th"),V.Lc(159,"ETA"),V.Wb(),V.Xb(160,"th"),V.Lc(161,"Commodity"),V.Wb(),V.Xb(162,"th"),V.Lc(163,"Owner"),V.Wb(),V.Xb(164,"th"),V.Lc(165,"Create by"),V.Wb(),V.Wb(),V.Wb(),V.Xb(166,"tbody"),V.Jc(167,Ne,5,3,"ng-container",15),V.Wb(),V.Xb(168,"tfoot"),V.Xb(169,"tr"),V.Sb(170,"td"),V.Xb(171,"td",17),V.Lc(172,"Total"),V.Wb(),V.Sb(173,"td"),V.Sb(174,"td"),V.Jc(175,$e,3,1,"ng-container",15),V.Sb(176,"td"),V.Sb(177,"td"),V.Sb(178,"td"),V.Sb(179,"td"),V.Sb(180,"td"),V.Sb(181,"td"),V.Sb(182,"td"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Db(5),V.Mc(e.label),V.Db(1),V.pc("color",0==e.selected?"primary":""),V.Db(2),V.pc("color",1==e.selected?"primary":""),V.Db(2),V.pc("color",2==e.selected?"primary":""),V.Db(4),V.pc("ngModel",e.selectedVessel),V.Db(1),V.pc("value","all"),V.Db(2),V.pc("ngForOf",e.vessel),V.Db(6),V.Ic("height",e.height,"px"),V.Db(1),V.pc("selectedIndex",e.selected),V.Db(14),V.pc("ngForOf",e.contType),V.Db(5),V.pc("ngForOf",e.contType),V.Db(12),V.pc("ngForOf",e.sptRouter),V.Db(8),V.pc("ngForOf",e.contType),V.Db(22),V.pc("ngForOf",e.contType),V.Db(5),V.pc("ngForOf",e.contType),V.Db(15),V.pc("ngIf",!e.revenueVNOpen),V.Db(1),V.pc("ngIf",e.revenueVNOpen),V.Db(5),V.pc("ngIf",!e.revenueNNOpen),V.Db(1),V.pc("ngIf",e.revenueNNOpen),V.Db(6),V.pc("ngForOf",e.sptRouter),V.Db(8),V.pc("ngForOf",e.contType),V.Db(25),V.pc("ngForOf",e.contType),V.Db(16),V.pc("ngForOf",e.sptRouter),V.Db(8),V.pc("ngForOf",e.contType))},directives:[g.a,g.c,U.b,U.d,U.c,r.b,b.c,u.a,E.p,E.s,X.n,H.s,b.g,l.a,p.b,p.a,H.t,i.j,d.a],pipes:[H.f,H.g],styles:["@media screen and (min-width:600px)and (max-width:959px){.dashboard-modal-dialog{width:100%}}@media screen and (min-width:960px){.dashboard-modal-dialog{width:1080px}}.dashboard-modal-dialog .mat-dialog-container{padding:0}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel{height:100%}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table{overflow:auto}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table td,.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table th{padding:8px;font-size:12px!important;white-space:nowrap}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table .row-router{background-color:#e0e0e0}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table .sticky-right-col{min-width:100px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2{overflow:auto}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2 td,.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2 th{padding:8px;font-size:12px!important;white-space:nowrap}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2 td{border-bottom:1px solid #000!important}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2 thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2 .row-router{background-color:#e0e0e0}.dashboard-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table2 .sticky-right-col{min-width:100px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.dashboard-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.dashboard-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}.dashboard-modal-dialog .header-less-tabs.mat-tab-group .mat-tab-header{display:none}"],encapsulation:2}),t})();var ze=o("LPYB");const Ee=function(t){return{"blue-700":t}};function He(t,e){if(1&t){const t=V.Yb();V.Xb(0,"div",15),V.fc("click",(function(o){V.Bc(t);const i=e.$implicit;return V.jc().selectedYear=i})),V.Lc(1),V.Wb()}if(2&t){const t=e.$implicit,o=V.jc();V.pc("ngClass",V.rc(2,Ee,o.selectedYear===t)),V.Db(1),V.Nc(" ",t," ")}}const Ue=function(t){return{"p-0 ":t}};let Ye=(()=>{class t{constructor(){this.selectedYear=(new Date).getFullYear(),this._registerCustomChartJSPlugin(),this.labels=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],this.options={spanGaps:!1,legend:{display:!1},maintainAspectRatio:!1,tooltips:{position:"nearest",mode:"index",intersect:!1},layout:{padding:{left:8,right:8}},elements:{point:{radius:4,borderWidth:2,hoverRadius:4,hoverBorderWidth:2}},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"rgba(0,0,0,0.54)"}}],yAxes:[{gridLines:{tickMarkLength:16},ticks:{stepSize:100}}]},plugins:{filler:{propagate:!1}}},this.colors=[{borderColor:"#3949ab",backgroundColor:"#3949ab",pointBackgroundColor:"#3949ab",pointHoverBackgroundColor:"#3949ab",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"},{borderColor:"rgba(30, 136, 229, 0.87)",backgroundColor:"rgba(30, 136, 229, 0.87)",pointBackgroundColor:"rgba(30, 136, 229, 0.87)",pointHoverBackgroundColor:"rgba(30, 136, 229, 0.87)",pointBorderColor:"#ffffff",pointHoverBorderColor:"#ffffff"}]}ngOnInit(){}_registerCustomChartJSPlugin(){window.Chart.plugins.register({afterDatasetsDraw:function(t,e){if(!t.options.plugins.xLabelsOnTop||t.options.plugins.xLabelsOnTop&&!1===t.options.plugins.xLabelsOnTop.active)return;const o=t.ctx;t.data.datasets.forEach((function(e,i){const n=t.getDatasetMeta(i);n.hidden||n.data.forEach((function(t,i){o.fillStyle="rgba(255, 255, 255, 0.7)",o.font=window.Chart.helpers.fontString(13,"normal","Roboto, Helvetica Neue, Arial");const n=Math.round(e.data[i]).toString();o.textAlign="center",o.textBaseline="middle";const a=t.tooltipPosition();o.fillText(n,a.x,24),o.save(),o.beginPath(),o.setLineDash([5,3]),o.moveTo(a.x,39),o.lineTo(a.x,a.y-15),o.strokeStyle="rgba(255,255,255,0.12)",o.stroke(),o.restore()}))}))}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-chart"]],inputs:{data:"data",label:"label",arrYear:"arrYear"},decls:18,vars:10,consts:[[1,"group","mb-12","mt-12","mr-16",3,"ngClass"],[1,"cursor-pointer",3,"click"],[1,"viewer-content"],[1,"item",3,"expanded"],["itemPanel",""],[1,"content"],["id","dashboard-analytics",1,"page-layout","blank"],[1,"main-widget"],["fxLayout","row","fxLayoutAlign","space-between center",1,"position-relative","p-8"],["fxLayout","column","fxLayoutAlign","start start"],[1,"h2"],["fxLayout","row","fxLayoutAlign","start center"],["class","py-8 px-12 border-radius-2 line-height-1 mr-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"position-relative","h-256","pb-8"],["baseChart","","chartType","line",3,"datasets","labels","colors","options"],[1,"py-8","px-12","border-radius-2","line-height-1","mr-8","cursor-pointer",3,"ngClass","click"]],template:function(t,e){if(1&t){const t=V.Yb();V.Xb(0,"div",0),V.Xb(1,"h2",1),V.fc("click",(function(e){return V.Bc(t),V.xc(6).toggle()})),V.Xb(2,"span"),V.Lc(3,"Chart"),V.Wb(),V.Wb(),V.Xb(4,"div",2),V.Xb(5,"mat-expansion-panel",3,4),V.Xb(7,"div",5),V.Xb(8,"div",6),V.Xb(9,"div",7),V.Xb(10,"div",8),V.Xb(11,"div",9),V.Xb(12,"span",10),V.Lc(13),V.Wb(),V.Wb(),V.Xb(14,"div",11),V.Jc(15,He,2,4,"div",12),V.Wb(),V.Wb(),V.Xb(16,"div",13),V.Sb(17,"canvas",14),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()}if(2&t){const t=V.xc(6);V.pc("ngClass",V.rc(8,Ue,!t.expanded)),V.Db(5),V.pc("expanded",!1),V.Db(8),V.Mc(e.label?e.label:"Shipment & Teu"),V.Db(2),V.pc("ngForOf",e.arrYear),V.Db(2),V.pc("datasets",e.data[e.selectedYear])("labels",e.labels)("colors",e.colors)("options",e.options)}},directives:[H.q,q.a,s.c,U.d,U.c,H.s,ze.a],styles:["dashboard-chart .group{margin-left:0;margin-right:4px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000;z-index:100}dashboard-chart .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa}dashboard-chart .group .viewer-content{overflow:auto;width:100%}dashboard-chart .group .viewer-content .mat-expansion-panel-header{height:48px!important}dashboard-chart .group .viewer-content .mat-expansion-panel-body{padding:0!important}dashboard-chart .group .viewer-content #dashboard-analytics .main-widget{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}dashboard-chart .group .viewer-content #dashboard-analytics .content{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;padding:32px;min-width:0}@media screen and (max-width:1279px){dashboard-chart .group .viewer-content #dashboard-analytics .content{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}}dashboard-chart .group .viewer-content #dashboard-analytics .content .left{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;min-width:0}dashboard-chart .group .viewer-content #dashboard-analytics .content .left .widget{-webkit-box-flex:1;flex:1 1 auto;min-width:0}dashboard-chart .group .viewer-content #dashboard-analytics .content .right{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 auto;width:320px;min-width:320px;max-width:320px}@media screen and (max-width:1279px){dashboard-chart .group .viewer-content #dashboard-analytics .content .right{-webkit-box-flex:1;flex:1 0 100%;margin-top:32px;width:100%;min-width:0;max-width:none}}@media screen and (max-width:1279px){dashboard-chart .group .viewer-content #dashboard-analytics .content .right .fuse-card{width:100%;min-width:0;max-width:none}}"],encapsulation:2}),t})();function qe(t,e){if(1&t&&(V.Xb(0,"th",15),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Eb("colspan",1+e.arrType.length-e.typeColumnView[t.name]),V.Db(1),V.Oc("",t.monthValue,"/",t.year,"")}}function Ge(t,e){if(1&t&&(V.Vb(0),V.Jc(1,qe,2,3,"th",14),V.Ub()),2&t){const t=e.index,o=V.jc();V.Db(1),V.pc("ngIf",t<6||o.routeOpen)}}function Qe(t,e){1&t&&(V.Xb(0,"mat-icon",16),V.Lc(1,"add"),V.Wb())}function Ke(t,e){1&t&&(V.Xb(0,"mat-icon",17),V.Lc(1,"removed"),V.Wb())}const Ze=function(t){return{"text-bold":t}};function to(t,e){if(1&t&&(V.Xb(0,"th",20),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit;V.pc("ngClass",V.rc(2,Ze,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(t)}}function eo(t,e){if(1&t&&(V.Vb(0),V.Jc(1,to,2,4,"th",19),V.Ub()),2&t){const t=e.$implicit,o=V.jc(),i=o.$implicit,n=o.index,a=V.jc();V.Db(1),V.pc("ngIf",a.routeData.total[i.name][t]&&(n<6||a.routeOpen))}}function oo(t,e){1&t&&(V.Xb(0,"th",21),V.Lc(1,"Teu"),V.Wb())}function io(t,e){if(1&t&&(V.Vb(0),V.Jc(1,eo,2,1,"ng-container",7),V.Jc(2,oo,2,0,"th",18),V.Ub()),2&t){const t=e.index,o=V.jc();V.Db(1),V.pc("ngForOf",o.arrType),V.Db(1),V.pc("ngIf",t<6||o.routeOpen)}}function no(t,e){if(1&t&&(V.Xb(0,"td",27),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc().$implicit,o=V.jc().$implicit,i=V.jc();V.Db(1),V.Mc(i.routeData[o.name][e.name][t]?i.routeData[o.name][e.name][t]:"")}}function ao(t,e){if(1&t&&(V.Vb(0),V.Jc(1,no,2,1,"td",26),V.Ub()),2&t){const t=e.$implicit,o=V.jc(),i=o.$implicit,n=o.index,a=V.jc(2);V.Db(1),V.pc("ngIf",a.routeData.total[i.name][t]&&(n<6||a.routeOpen))}}function co(t,e){if(1&t&&(V.Xb(0,"td",28),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc().$implicit,o=V.jc();V.Db(1),V.Mc(o.routeData[e.name][t.name].teu?o.routeData[e.name][t.name].teu:"")}}function ro(t,e){if(1&t&&(V.Vb(0),V.Jc(1,ao,2,1,"ng-container",7),V.Jc(2,co,2,1,"td",25),V.Ub()),2&t){const t=e.index,o=V.jc(2);V.Db(1),V.pc("ngForOf",o.arrType),V.Db(1),V.pc("ngIf",t<6||o.routeOpen)}}const so=function(t,e){return{"grey-100-bg":t,"white-100-bg":e}};function bo(t,e){if(1&t&&(V.Xb(0,"tr",22),V.Xb(1,"td",23),V.Lc(2),V.Wb(),V.Jc(3,ro,3,2,"ng-container",7),V.Sb(4,"td",24),V.Wb()),2&t){const t=e.$implicit,o=e.index,i=V.jc();V.pc("ngClass",V.sc(3,so,o%2==1,o%2==0)),V.Db(2),V.Mc(t.name),V.Db(1),V.pc("ngForOf",i.arrMonth)}}const lo=function(t){return{"p-0 ":t}};let ho=(()=>{class t{constructor(t){this.changeDetector=t,this.routeOpen=!1}ngOnInit(){}ngAfterViewChecked(){this.changeDetector.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(V.h))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-route"]],inputs:{routeData:"routeData",portPair:"portPair",arrMonth:"arrMonth",arrType:"arrType",typeColumnView:"typeColumnView"},decls:23,vars:9,consts:[[1,"group","mb-12","mt-12","mr-16",3,"ngClass"],[1,"cursor-pointer",3,"click"],[1,"viewer-content"],[1,"item",2,"overflow","auto",3,"expanded"],["itemPanel",""],[1,"simple","total-table","mr-8"],[1,"sticky-col1","sticky-header-1","text-center",2,"z-index","25px"],[4,"ngFor","ngForOf"],[1,"sticky-header-1","sticky-right-col",2,"z-index","25px",3,"click"],["class","cursor-pointer","color","accent",4,"ngIf"],["class","cursor-pointer","color","warn",4,"ngIf"],[1,"sticky-col1","sticky-header-2","text-center",2,"z-index","25px"],[1,"sticky-header-2","sticky-right-col",2,"z-index","25px"],[3,"ngClass",4,"ngFor","ngForOf"],["class","sticky-header-1",4,"ngIf"],[1,"sticky-header-1"],["color","accent",1,"cursor-pointer"],["color","warn",1,"cursor-pointer"],["class","sticky-header-2 text-center text-bold accent-100-bg",4,"ngIf"],["class","sticky-header-2 text-right",3,"ngClass",4,"ngIf"],[1,"sticky-header-2","text-right",3,"ngClass"],[1,"sticky-header-2","text-center","text-bold","accent-100-bg"],[3,"ngClass"],[1,"sticky-col1"],[1,"sticky-right-col"],["class","text-center text-bold accent-100-bg",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right"],[1,"text-center","text-bold","accent-100-bg"]],template:function(t,e){if(1&t){const t=V.Yb();V.Xb(0,"div",0),V.Xb(1,"h2",1),V.fc("click",(function(e){return V.Bc(t),V.xc(6).toggle()})),V.Xb(2,"span"),V.Lc(3,"Route"),V.Wb(),V.Wb(),V.Xb(4,"div",2),V.Xb(5,"mat-expansion-panel",3,4),V.Xb(7,"table",5),V.Xb(8,"thead"),V.Xb(9,"tr"),V.Xb(10,"th",6),V.Lc(11,"Month"),V.Wb(),V.Jc(12,Ge,2,1,"ng-container",7),V.Xb(13,"th",8),V.fc("click",(function(t){return t.stopPropagation(),e.routeOpen=!e.routeOpen})),V.Jc(14,Qe,2,0,"mat-icon",9),V.Jc(15,Ke,2,0,"mat-icon",10),V.Wb(),V.Wb(),V.Xb(16,"tr"),V.Xb(17,"th",11),V.Lc(18,"Type"),V.Wb(),V.Jc(19,io,3,2,"ng-container",7),V.Sb(20,"th",12),V.Wb(),V.Wb(),V.Xb(21,"tbody"),V.Jc(22,bo,5,6,"tr",13),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()}if(2&t){const t=V.xc(6);V.pc("ngClass",V.rc(7,lo,!t.expanded)),V.Db(5),V.pc("expanded",!0),V.Db(7),V.pc("ngForOf",e.arrMonth),V.Db(2),V.pc("ngIf",!e.routeOpen),V.Db(1),V.pc("ngIf",e.routeOpen),V.Db(4),V.pc("ngForOf",e.arrMonth),V.Db(3),V.pc("ngForOf",e.portPair)}},directives:[H.q,q.a,s.c,H.s,H.t,l.a],styles:["dashboard-route .group{margin-left:0;margin-right:4px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000;z-index:100}dashboard-route .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa}dashboard-route .group .viewer-content{overflow:auto;width:100%}dashboard-route .group .viewer-content .mat-expansion-panel-header{height:48px!important}dashboard-route .group .viewer-content .mat-expansion-panel-body{padding:0!important;overflow:auto;width:100%}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table{font-size:12px}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table .border-right{border-right:1px solid rgba(0,0,0,.12)}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table td,dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table th{padding:8px!important;white-space:nowrap}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;z-index:20}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-route .group .viewer-content .mat-expansion-panel-body .total-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2}),t})();const po=function(t){return{"text-bold":t}};function uo(t,e){if(1&t&&(V.Xb(0,"th",19),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("ngClass",V.rc(2,po,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(t)}}function mo(t,e){if(1&t&&(V.Xb(0,"td",22),V.Lc(1),V.Wb()),2&t){const t=e.$implicit,o=V.jc().$implicit,i=V.jc(2);V.pc("ngClass",V.rc(2,po,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(i.bookData[o][t])}}function fo(t,e){if(1&t){const t=V.Yb();V.Xb(0,"tr"),V.Xb(1,"td"),V.Xb(2,"span",20),V.fc("click",(function(o){V.Bc(t);const i=e.$implicit,n=V.jc(2);return n.openModal.emit(n.bookData[i].data)})),V.Lc(3),V.Wb(),V.Wb(),V.Xb(4,"td",15),V.Lc(5),V.Wb(),V.Jc(6,mo,2,4,"td",21),V.Xb(7,"td",16),V.Lc(8),V.Wb(),V.Xb(9,"td",17),V.Lc(10),V.kc(11,"number"),V.Wb(),V.Xb(12,"td",17),V.Lc(13),V.kc(14,"number"),V.Wb(),V.Xb(15,"td",18),V.Lc(16),V.kc(17,"number"),V.Wb(),V.Wb()}if(2&t){const t=e.$implicit,o=V.jc(2);V.Db(3),V.Mc(t),V.Db(2),V.Mc(o.bookData[t].count_book),V.Db(1),V.pc("ngForOf",o.bookType),V.Db(2),V.Mc(o.bookData[t].teu),V.Db(2),V.Mc(V.mc(11,7,o.bookData[t].revenue,"1.0-0")),V.Db(3),V.Mc(V.mc(14,10,o.bookData[t].cost,"1.0-0")),V.Db(3),V.Mc(V.mc(17,13,o.bookData[t].revenue-o.bookData[t].cost,"1.0-0"))}}function go(t,e){if(1&t&&(V.Xb(0,"td",22),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(2);V.pc("ngClass",V.rc(2,po,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(e.bookTotal[t])}}function vo(t,e){if(1&t&&(V.Xb(0,"mat-icon",25),V.Lc(1,"error"),V.Wb()),2&t){const t=V.jc(2).$implicit;V.pc("matTooltip",t+" r\xf4\u0303ng kh\xf4ng \u0111u\u0309 d\xea\u0309 c\xe2\u0301p")}}const yo=function(t,e){return{"text-bold":t,"red-700-fg text-bold":e}};function ko(t,e){if(1&t&&(V.Xb(0,"td",22),V.Jc(1,vo,2,1,"mat-icon",24),V.Lc(2),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(2);V.pc("ngClass",V.sc(3,yo,"20DC"==t||"40HC"==t,e.bookTotal[t]>e.total[t])),V.Db(1),V.pc("ngIf",e.bookTotal[t]>e.total[t]),V.Db(1),V.Nc(" ",e.bookTotal[t]," ")}}function xo(t,e){if(1&t&&(V.Vb(0),V.Jc(1,go,2,4,"td",23),V.Jc(2,ko,3,6,"td",23),V.Ub()),2&t){const t=V.jc(2);V.Db(1),V.pc("ngIf","workflow"==t.modul),V.Db(1),V.pc("ngIf","workflow"!=t.modul)}}function Do(t,e){if(1&t&&(V.Xb(0,"table",3),V.Xb(1,"thead"),V.Xb(2,"tr"),V.Xb(3,"th",4),V.Lc(4,"Week"),V.Wb(),V.Xb(5,"th",5),V.Lc(6,"Book"),V.Wb(),V.Xb(7,"th",6),V.Lc(8,"Container"),V.Wb(),V.Xb(9,"th",5),V.Lc(10,"Teu"),V.Wb(),V.Xb(11,"th",7),V.Lc(12,"Revenue"),V.Wb(),V.Xb(13,"th",7),V.Lc(14,"Cost"),V.Wb(),V.Xb(15,"th",8),V.Lc(16,"Net Revenue"),V.Wb(),V.Wb(),V.Xb(17,"tr"),V.Sb(18,"th",9),V.Sb(19,"th",9),V.Jc(20,uo,2,4,"th",10),V.Sb(21,"th",11),V.Sb(22,"th",12),V.Sb(23,"th",12),V.Sb(24,"th",13),V.Wb(),V.Wb(),V.Xb(25,"tbody"),V.Jc(26,fo,18,16,"tr",14),V.Wb(),V.Xb(27,"tfoot"),V.Xb(28,"tr"),V.Xb(29,"td"),V.Lc(30,"Total"),V.Wb(),V.Xb(31,"td",15),V.Lc(32),V.Wb(),V.Jc(33,xo,3,2,"ng-container",14),V.Xb(34,"td",16),V.Lc(35),V.Wb(),V.Xb(36,"td",17),V.Lc(37),V.kc(38,"number"),V.Wb(),V.Xb(39,"td",17),V.Lc(40),V.kc(41,"number"),V.Wb(),V.Xb(42,"td",18),V.Lc(43),V.kc(44,"number"),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc();V.Db(7),V.Eb("colspan",t.bookType.length),V.Db(13),V.pc("ngForOf",t.bookType),V.Db(6),V.pc("ngForOf",t.bookWeek),V.Db(6),V.Mc(t.bookTotal.book),V.Db(1),V.pc("ngForOf",t.bookType),V.Db(2),V.Mc(t.bookTotal.teu),V.Db(2),V.Mc(V.mc(38,9,t.bookTotal.revenue,"1.0-0")),V.Db(3),V.Mc(V.mc(41,12,t.bookTotal.cost,"1.0-0")),V.Db(3),V.Mc(V.mc(44,15,t.bookTotal.revenue-t.bookTotal.cost,"1.0-0"))}}let wo=(()=>{class t{constructor(){this.openModal=new V.o,this.total={}}ngOnInit(){}ngOnChanges(t){t.bookWeek&&t.bookWeek.currentValue&&(this.bookWeek=t.bookWeek.currentValue,this.bookWeek&&(this.total={},this.empty&&this.empty.map(t=>{this.bookType.map(e=>{this.total[e]||(this.total[e]=0),t[e]&&(this.total[e]+=t[e].length)})})))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-bookings"]],inputs:{bookWeek:"bookWeek",bookType:"bookType",bookData:"bookData",bookTotal:"bookTotal",empty:"empty",modul:"modul"},outputs:{openModal:"openModal"},features:[V.Bb()],decls:6,vars:1,consts:[[1,"group","mb-12","mt-12","mr-16"],[1,"viewer-content"],["class","simple total-table mr-8",4,"ngIf"],[1,"simple","total-table","mr-8"],[1,"sticky-header-1"],[1,"sticky-header-1","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-1","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-1","text-right"],[1,"sticky-header-1","text-right"],[1,"sticky-header-2"],["class","sticky-header-2 text-right","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],[1,"sticky-header-2","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right"],[1,"sticky-header-2","text-right"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"text-center","text-bold"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8"],[1,"text-right","mr-8"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right",3,"ngClass"],[1,"accent","p-4","cursor-pointer",3,"click"],["class","text-right mr-8","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8",3,"ngClass"],["class","text-right mr-8","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngIf"],["class","cursor-pointer","color","warn",3,"matTooltip",4,"ngIf"],["color","warn",1,"cursor-pointer",3,"matTooltip"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"h2"),V.Xb(2,"span"),V.Lc(3,"Booking"),V.Wb(),V.Wb(),V.Xb(4,"div",1),V.Jc(5,Do,45,18,"table",2),V.Wb(),V.Wb()),2&t&&(V.Db(5),V.pc("ngIf",e.bookWeek))},directives:[H.t,q.b,H.s,H.q,q.a,l.a,d.a],pipes:[H.g],styles:["dashboard-bookings .group{margin-left:0;margin-right:4px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000;z-index:100}dashboard-bookings .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa}dashboard-bookings .group .viewer-content{overflow:auto;width:100%}dashboard-bookings .group .viewer-content .total-table{font-size:12px}dashboard-bookings .group .viewer-content .total-table .border-right{border-right:1px solid rgba(0,0,0,.12)}dashboard-bookings .group .viewer-content .total-table td,dashboard-bookings .group .viewer-content .total-table th{padding:8px!important;white-space:nowrap}dashboard-bookings .group .viewer-content .total-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-bookings .group .viewer-content .total-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}dashboard-bookings .group .viewer-content .total-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-bookings .group .viewer-content .total-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}dashboard-bookings .group .viewer-content .total-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-bookings .group .viewer-content .total-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-bookings .group .viewer-content .total-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2}),t})();function Wo(t,e){1&t&&(V.Xb(0,"mat-icon",27),V.Lc(1,"add"),V.Wb())}function Xo(t,e){1&t&&(V.Xb(0,"mat-icon",28),V.Lc(1,"removed"),V.Wb())}function So(t,e){1&t&&(V.Xb(0,"th",29),V.Lc(1,"SPT complete"),V.Wb())}function _o(t,e){1&t&&(V.Xb(0,"th",30),V.Lc(1,"Complete %"),V.Wb())}function Lo(t,e){1&t&&(V.Xb(0,"th",29),V.Lc(1,"Pay Date"),V.Wb())}function Oo(t,e){1&t&&(V.Xb(0,"th",30),V.Lc(1,"Pay Date %"),V.Wb())}function Mo(t,e){1&t&&(V.Xb(0,"th",29),V.Lc(1,"Bank"),V.Wb())}function Co(t,e){1&t&&(V.Xb(0,"th",30),V.Lc(1,"Bank %"),V.Wb())}function To(t,e){1&t&&(V.Xb(0,"mat-icon",27),V.Lc(1,"add"),V.Wb())}function jo(t,e){1&t&&(V.Xb(0,"mat-icon",28),V.Lc(1,"removed"),V.Wb())}function Io(t,e){1&t&&(V.Xb(0,"th",29),V.Lc(1,"SPT complete"),V.Wb())}function Po(t,e){1&t&&(V.Xb(0,"th",30),V.Lc(1,"Complete %"),V.Wb())}function Vo(t,e){1&t&&(V.Xb(0,"th",29),V.Lc(1,"Pay Date"),V.Wb())}function Fo(t,e){1&t&&(V.Xb(0,"th",30),V.Lc(1,"Pay Date %"),V.Wb())}function Jo(t,e){1&t&&(V.Xb(0,"th",29),V.Lc(1,"Bank"),V.Wb())}function Ao(t,e){1&t&&(V.Xb(0,"th",30),V.Lc(1,"Bank %"),V.Wb())}const Ro=function(t){return{"text-bold":t}};function No(t,e){if(1&t&&(V.Xb(0,"th",31),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("ngClass",V.rc(2,Ro,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(t)}}function $o(t,e){if(1&t&&(V.Xb(0,"th",31),V.Lc(1),V.Wb()),2&t){const t=e.$implicit;V.pc("ngClass",V.rc(2,Ro,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(t)}}function Bo(t,e){if(1&t&&(V.Xb(0,"td",35),V.Lc(1),V.Wb()),2&t){const t=e.$implicit,o=V.jc().$implicit,i=V.jc();V.pc("ngClass",V.rc(2,Ro,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(i.totalMonth[o.name][t])}}function zo(t,e){if(1&t&&(V.Xb(0,"td",36),V.Lc(1),V.Wb()),2&t){const t=e.$implicit,o=V.jc().$implicit,i=V.jc();V.Db(1),V.Mc(i.totalMonth[o.name]["load_"+t])}}function Eo(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].revenueComplete,"1.0-0"))}}function Ho(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].revenueComplete/e.totalMonth[t.name].count_shipment,"1.0-2"))}}function Uo(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].revenuePaydate,"1.2-2"))}}function Yo(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].revenuePaydate/e.totalMonth[t.name].revenue,"1.0-2"))}}function qo(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].revenueBank,"1.2-2"))}}function Go(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].revenueBank/e.totalMonth[t.name].revenue,"1.0-2"))}}function Qo(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].costComplete,"1.0-0"))}}function Ko(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].costComplete/e.totalMonth[t.name].count_shipment,"1.0-2"))}}function Zo(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].costPaydate,"1.2-2"))}}function ti(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].costPaydate/e.totalMonth[t.name].cost,"1.0-2"))}}function ei(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].costBank,"1.2-2"))}}function oi(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc();V.Db(1),V.Mc(V.mc(2,1,e.totalMonth[t.name].costBank/e.totalMonth[t.name].cost,"1.0-2"))}}const ii=function(t,e){return{accent:t,"red-400-bg fuse-white-fg":e}};function ni(t,e){if(1&t){const t=V.Yb();V.Xb(0,"tr"),V.Xb(1,"td",32),V.fc("click",(function(o){V.Bc(t);const i=e.$implicit,n=V.jc();return o.stopPropagation(),n.filterMonth.emit(i)})),V.Xb(2,"span",33),V.Lc(3),V.Wb(),V.Wb(),V.Xb(4,"td",18),V.Lc(5),V.Wb(),V.Jc(6,Bo,2,4,"td",19),V.Xb(7,"td",20),V.Lc(8),V.Wb(),V.Xb(9,"td",21),V.Lc(10),V.Wb(),V.Jc(11,zo,2,1,"td",22),V.Xb(12,"td",34),V.Lc(13),V.Wb(),V.Xb(14,"td",23),V.Lc(15),V.kc(16,"number"),V.Wb(),V.Jc(17,Eo,3,4,"td",24),V.Jc(18,Ho,3,4,"td",25),V.Jc(19,Uo,3,4,"td",24),V.Jc(20,Yo,3,4,"td",25),V.Jc(21,qo,3,4,"td",24),V.Jc(22,Go,3,4,"td",25),V.Xb(23,"td",23),V.Lc(24),V.kc(25,"number"),V.Wb(),V.Jc(26,Qo,3,4,"td",24),V.Jc(27,Ko,3,4,"td",25),V.Jc(28,Zo,3,4,"td",24),V.Jc(29,ti,3,4,"td",25),V.Jc(30,ei,3,4,"td",24),V.Jc(31,oi,3,4,"td",25),V.Xb(32,"td",26),V.Lc(33),V.kc(34,"number"),V.Wb(),V.Wb()}if(2&t){const t=e.$implicit,o=V.jc();V.Db(2),V.pc("ngClass",V.sc(33,ii,o.totalMonth[t.name].teu==o.totalMonth[t.name].load_teu,o.totalMonth[t.name].teu!=o.totalMonth[t.name].load_teu)),V.Db(1),V.Oc("",o.totalMonth[t.name].month,"/",o.totalMonth[t.name].year,""),V.Db(2),V.Mc(o.totalMonth[t.name].count_shipment),V.Db(1),V.pc("ngForOf",o.arrType),V.Db(2),V.Mc(o.totalMonth[t.name].teu),V.Db(2),V.Mc(o.totalMonth[t.name].count_load_shipment),V.Db(1),V.pc("ngForOf",o.arrType),V.Db(2),V.Mc(o.totalMonth[t.name].load_teu),V.Db(2),V.Mc(V.mc(16,24,o.totalMonth[t.name].revenue,"1.0-0")),V.Db(2),V.pc("ngIf",o.revenueOpen),V.Db(1),V.pc("ngIf",o.revenueOpen),V.Db(1),V.pc("ngIf",o.revenueOpen),V.Db(1),V.pc("ngIf",o.revenueOpen),V.Db(1),V.pc("ngIf",o.revenueOpen),V.Db(1),V.pc("ngIf",o.revenueOpen),V.Db(2),V.Mc(V.mc(25,27,o.totalMonth[t.name].cost,"1.0-0")),V.Db(2),V.pc("ngIf",o.costOpen),V.Db(1),V.pc("ngIf",o.costOpen),V.Db(1),V.pc("ngIf",o.costOpen),V.Db(1),V.pc("ngIf",o.costOpen),V.Db(1),V.pc("ngIf",o.costOpen),V.Db(1),V.pc("ngIf",o.costOpen),V.Db(2),V.Nc(" ",V.mc(34,30,o.totalMonth[t.name].revenue-o.totalMonth[t.name].cost,"1.0-0")," ")}}function ai(t,e){if(1&t&&(V.Xb(0,"td",35),V.Lc(1),V.Wb()),2&t){const t=e.$implicit,o=V.jc();V.pc("ngClass",V.rc(2,Ro,"20DC"==t||"40HC"==t)),V.Db(1),V.Mc(o.shipmentTotal[t])}}function ci(t,e){if(1&t&&(V.Xb(0,"td",36),V.Lc(1),V.Wb()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.Mc(o.shipmentTotal["load_"+t])}}function ri(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.revenueComplete,"1.0-0"))}}function si(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.revenueComplete/t.shipmentTotal.shipment,"0.3-5"))}}function bi(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.revenuePaydate,"1.2-2"))}}function li(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.revenuePaydate/t.shipmentTotal.revenue,"0.3-5"))}}function di(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.revenueBank,"1.2-2"))}}function hi(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.revenueBank/t.shipmentTotal.revenue,"0.3-5"))}}function pi(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.costComplete,"1.0-0"))}}function ui(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.costComplete/t.shipmentTotal.shipment,"0.3-5"))}}function mi(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.costPaydate,"1.2-2"))}}function fi(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.costPaydate/t.shipmentTotal.cost,"0.3-5"))}}function gi(t,e){if(1&t&&(V.Xb(0,"td",37),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.costBank,"1.2-2"))}}function vi(t,e){if(1&t&&(V.Xb(0,"td",38),V.Lc(1),V.kc(2,"percent"),V.Wb()),2&t){const t=V.jc();V.Db(1),V.Mc(V.mc(2,1,t.shipmentTotal.costBank/t.shipmentTotal.cost,"4.3-5"))}}let yi=(()=>{class t{constructor(t){this.authService=t,this.filterMonth=new V.o,this.revenueOpen=!1,this.costOpen=!1}ngOnInit(){this.viewProfit=[1,15].includes(this.authService.user)}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-shipment"]],inputs:{modul:"modul",arrType:"arrType",arrMonth:"arrMonth",totalMonth:"totalMonth",shipmentTotal:"shipmentTotal"},outputs:{filterMonth:"filterMonth"},decls:92,vars:51,consts:[[1,"group","mb-12","mt-12","mr-16"],[1,"viewer-content"],[1,"simple","total-table","mr-8"],[1,"sticky-header-1"],[1,"sticky-header-1","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-1","text-right","cursor-pointer",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","cursor-pointer","color","accent",4,"ngIf"],["class","cursor-pointer","color","warn",4,"ngIf"],["class","sticky-header-1 text-right accent-200-bg",4,"ngIf"],["class","sticky-header-1 text-center accent-200-bg",4,"ngIf"],[1,"sticky-header-1","text-right"],[1,"sticky-header-2"],["class","sticky-header-2 text-right","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],[1,"sticky-header-2","text-center"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right"],[1,"sticky-header-2","text-right"],[4,"ngFor","ngForOf"],[1,"text-center"],["class","text-right mr-8","fxHide","","fxShow.gt-sm","",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-center","text-bold"],[1,"text-center","accent-400-fg","text-bold"],["class","text-right mr-8 accent-400-fg text-bold","fxHide","","fxShow.gt-sm","",4,"ngFor","ngForOf"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8"],["class","text-right accent-200-bg",4,"ngIf"],["class","text-center accent-200-bg",4,"ngIf"],[1,"text-right","mr-8"],["color","accent",1,"cursor-pointer"],["color","warn",1,"cursor-pointer"],[1,"sticky-header-1","text-right","accent-200-bg"],[1,"sticky-header-1","text-center","accent-200-bg"],["fxHide","","fxShow.gt-sm","",1,"sticky-header-2","text-right",3,"ngClass"],[1,"cursor-pointer",3,"click"],[1,"p-4",3,"ngClass"],[1,"text-center","text-bold","accent-400-fg"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8",3,"ngClass"],["fxHide","","fxShow.gt-sm","",1,"text-right","mr-8","accent-400-fg","text-bold"],[1,"text-right","accent-200-bg"],[1,"text-center","accent-200-bg"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"h2"),V.Xb(2,"span"),V.Lc(3,"Shipment"),V.Wb(),V.Wb(),V.Xb(4,"div",1),V.Xb(5,"table",2),V.Xb(6,"thead"),V.Xb(7,"tr"),V.Xb(8,"th",3),V.Lc(9,"Time"),V.Wb(),V.Xb(10,"th",4),V.Lc(11,"Booking Shipment"),V.Wb(),V.Xb(12,"th",4),V.Lc(13,"Shipment Load Container"),V.Wb(),V.Xb(14,"th",5),V.fc("click",(function(t){return t.stopPropagation(),e.revenueOpen=!e.revenueOpen})),V.Xb(15,"div",6),V.Xb(16,"span"),V.Lc(17,"Revenue"),V.Wb(),V.Jc(18,Wo,2,0,"mat-icon",7),V.Jc(19,Xo,2,0,"mat-icon",8),V.Wb(),V.Wb(),V.Jc(20,So,2,0,"th",9),V.Jc(21,_o,2,0,"th",10),V.Jc(22,Lo,2,0,"th",9),V.Jc(23,Oo,2,0,"th",10),V.Jc(24,Mo,2,0,"th",9),V.Jc(25,Co,2,0,"th",10),V.Xb(26,"th",5),V.fc("click",(function(t){return t.stopPropagation(),e.costOpen=!e.costOpen})),V.Xb(27,"div",6),V.Xb(28,"span"),V.Lc(29,"Cost"),V.Wb(),V.Jc(30,To,2,0,"mat-icon",7),V.Jc(31,jo,2,0,"mat-icon",8),V.Wb(),V.Wb(),V.Jc(32,Io,2,0,"th",9),V.Jc(33,Po,2,0,"th",10),V.Jc(34,Vo,2,0,"th",9),V.Jc(35,Fo,2,0,"th",10),V.Jc(36,Jo,2,0,"th",9),V.Jc(37,Ao,2,0,"th",10),V.Xb(38,"th",11),V.Lc(39,"Net revenue"),V.Wb(),V.Wb(),V.Xb(40,"tr"),V.Sb(41,"th",12),V.Xb(42,"th",12),V.Lc(43,"Total"),V.Wb(),V.Jc(44,No,2,4,"th",13),V.Xb(45,"th",14),V.Lc(46,"Teu"),V.Wb(),V.Xb(47,"th",14),V.Lc(48,"Total"),V.Wb(),V.Jc(49,$o,2,4,"th",13),V.Xb(50,"th",4),V.Lc(51,"Teu"),V.Wb(),V.Sb(52,"th",15),V.Sb(53,"th",15),V.Sb(54,"th",16),V.Wb(),V.Wb(),V.Xb(55,"tbody"),V.Jc(56,ni,35,36,"tr",17),V.Wb(),V.Xb(57,"tfoot"),V.Xb(58,"tr"),V.Xb(59,"td"),V.Lc(60,"Total"),V.Wb(),V.Xb(61,"td",18),V.Lc(62),V.Wb(),V.Jc(63,ai,2,4,"td",19),V.Xb(64,"td",20),V.Lc(65),V.Wb(),V.Xb(66,"td",21),V.Lc(67),V.Wb(),V.Jc(68,ci,2,1,"td",22),V.Xb(69,"td",21),V.Lc(70),V.Wb(),V.Xb(71,"td",23),V.Lc(72),V.kc(73,"number"),V.Wb(),V.Jc(74,ri,3,4,"td",24),V.Jc(75,si,3,4,"td",25),V.Jc(76,bi,3,4,"td",24),V.Jc(77,li,3,4,"td",25),V.Jc(78,di,3,4,"td",24),V.Jc(79,hi,3,4,"td",25),V.Xb(80,"td",23),V.Lc(81),V.kc(82,"number"),V.Wb(),V.Jc(83,pi,3,4,"td",24),V.Jc(84,ui,3,4,"td",25),V.Jc(85,mi,3,4,"td",24),V.Jc(86,fi,3,4,"td",25),V.Jc(87,gi,3,4,"td",24),V.Jc(88,vi,3,4,"td",25),V.Xb(89,"td",26),V.Lc(90),V.kc(91,"number"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Db(10),V.Eb("colspan",2+e.arrType.length),V.Db(2),V.Eb("colspan",2+e.arrType.length),V.Db(6),V.pc("ngIf",!e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(5),V.pc("ngIf",!e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(7),V.pc("ngForOf",e.arrType),V.Db(5),V.pc("ngForOf",e.arrType),V.Db(7),V.pc("ngForOf",e.arrMonth),V.Db(6),V.Mc(e.shipmentTotal.shipment),V.Db(1),V.pc("ngForOf",e.arrType),V.Db(2),V.Mc(e.shipmentTotal.teu),V.Db(2),V.Mc(e.shipmentTotal.load_shipment),V.Db(1),V.pc("ngForOf",e.arrType),V.Db(2),V.Mc(e.shipmentTotal.load_teu),V.Db(2),V.Mc(V.mc(73,42,e.shipmentTotal.revenue,"1.0-0")),V.Db(2),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(1),V.pc("ngIf",e.revenueOpen),V.Db(2),V.Mc(V.mc(82,45,e.shipmentTotal.cost,"1.0-0")),V.Db(2),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(1),V.pc("ngIf",e.costOpen),V.Db(2),V.Mc(V.mc(91,48,e.shipmentTotal.revenue-e.shipmentTotal.cost,"1.0-0")))},directives:[q.b,U.d,U.c,H.t,H.s,l.a,H.q,q.a],pipes:[H.g,H.C],styles:["dashboard-shipment .group{margin-left:0;margin-right:4px;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000;z-index:100}dashboard-shipment .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:600;background:#fafafa}dashboard-shipment .group .viewer-content{overflow:auto;width:100%}dashboard-shipment .group .viewer-content .total-table{font-size:12px}dashboard-shipment .group .viewer-content .total-table .border-right{border-right:1px solid rgba(0,0,0,.12)}dashboard-shipment .group .viewer-content .total-table td,dashboard-shipment .group .viewer-content .total-table th{padding:8px!important;white-space:nowrap}dashboard-shipment .group .viewer-content .total-table thead th.sticky-header-1{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-shipment .group .viewer-content .total-table thead th.sticky-header-2{position:sticky;position:-webkit-sticky;top:32px;background:#fff;z-index:10}dashboard-shipment .group .viewer-content .total-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-shipment .group .viewer-content .total-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}dashboard-shipment .group .viewer-content .total-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-shipment .group .viewer-content .total-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-shipment .group .viewer-content .total-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}"],encapsulation:2}),t})();var ki=o("pxUr");const xi=["AgmMap"];function Di(t,e){if(1&t&&(V.Xb(0,"agm-marker",6),V.Xb(1,"agm-info-window"),V.Xb(2,"strong"),V.Lc(3),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc();V.pc("latitude",t.pol.pol_lat)("longitude",t.pol.pol_lng),V.Db(3),V.Mc(t.pol.name)}}function wi(t,e){if(1&t&&(V.Xb(0,"agm-marker",6),V.Xb(1,"agm-info-window"),V.Xb(2,"strong"),V.Lc(3),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc();V.pc("latitude",t.pod.pod_lat)("longitude",t.pod.pod_lng),V.Db(3),V.Mc(t.pod.name)}}function Wi(t,e){if(1&t&&(V.Xb(0,"agm-polyline",8),V.Sb(1,"agm-icon-sequence",9),V.Sb(2,"agm-polyline-point",6),V.Sb(3,"agm-polyline-point",6),V.Wb()),2&t){const t=V.jc().$implicit;V.pc("strokeColor","import"==t.type?"red":"#2196f3")("editable",!0),V.Db(1),V.pc("fixedRotation",!1)("offset",1)("path","FORWARD_CLOSED_ARROW"),V.Db(1),V.pc("latitude",t.pol_lat)("longitude",t.pol_lng),V.Db(1),V.pc("latitude",t.pod_lat)("longitude",t.pod_lng)}}function Xi(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Wi,4,9,"agm-polyline",7),V.Ub()),2&t){const t=e.$implicit;V.Db(1),V.pc("ngIf",t.pol_lat&&t.pod_lat&&t.pol_lng&&t.pod_lng)}}let Si=(()=>{class t{constructor(t,e,o,i,n){this.router=t,this.authService=e,this.route=o,this.datePipe=i,this._matDialog=n,this.x=16.12116922405386,this.y=108.21703878264134,this._unsubscribeAll=new j.a}ngOnInit(){this.filterData&&this.filterData.pod&&this.filterData.pol?(this.pol=this.portPair.find(t=>t.pol==this.filterData.pol),this.pod=this.portPair.find(t=>t.pod==this.filterData.pod),this.x=(this.pol.pol_lat+this.pod.pod_lat)/2,this.y=(this.pod.pol_lng+this.pod.pod_lng)/2):(this.pol=null,this.pod=null),this.line=this.portPair[0]}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}ngOnChanges(t){t.filterData&&(t.filterData.currentValue||null==t.filterData.currentValue)&&(this.filterData=t.filterData.currentValue,this.filterData&&this.filterData.pod&&this.filterData.pol?(this.pol=this.portPair.find(t=>t.pol==this.filterData.pol),this.pod=this.portPair.find(t=>t.pod==this.filterData.pod),this.x=(this.pol.pol_lat+this.pod.pod_lat)/2,this.y=(this.pod.pol_lng+this.pod.pod_lng)/2):(this.pol=null,this.pod=null))}ngAfterViewInit(){this.agmMap.mapReady.subscribe(t=>{this.map=t})}rad(t){return t*Math.PI/180}getDistance(t,e){var o=this.rad(e.lat-t.lat),i=this.rad(e.lng-t.lng),n=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.rad(t.lat))*Math.cos(this.rad(e.lat))*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6378137}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(F.a),V.Rb(i.a),V.Rb(H.f),V.Rb(f.b))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-map"]],viewQuery:function(t,e){var o;1&t&&V.Sc(xi,!0),2&t&&V.wc(o=V.gc())&&(e.agmMap=o.first)},inputs:{filterData:"filterData",portPair:"portPair"},features:[V.Bb()],decls:9,vars:15,consts:[[1,"group","mb-12","mt-12","mr-16"],[2,"height","420px"],[1,"h-100-p","w-100-p",3,"minZoom","maxZoom","fullscreenControl","rotateControl","zoomControl","scaleControl","streetViewControl","scrollwheel","zoom","usePanning","latitude","longitude"],["AgmMap",""],[3,"latitude","longitude",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"latitude","longitude"],[3,"strokeColor","editable",4,"ngIf"],[3,"strokeColor","editable"],[3,"fixedRotation","offset","path"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"h2"),V.Lc(2,"Map"),V.Wb(),V.Xb(3,"div",1),V.Xb(4,"agm-map",2,3),V.Jc(6,Di,4,3,"agm-marker",4),V.Jc(7,wi,4,3,"agm-marker",4),V.Jc(8,Xi,2,1,"ng-container",5),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Db(4),V.pc("minZoom",1)("maxZoom",20)("fullscreenControl",!1)("rotateControl",!1)("zoomControl",!0)("scaleControl",!0)("streetViewControl",!1)("scrollwheel",!1)("zoom",5)("usePanning",!0)("latitude",e.x)("longitude",e.y),V.Db(2),V.pc("ngIf",e.pol),V.Db(1),V.pc("ngIf",e.pod),V.Db(1),V.pc("ngForOf",e.portPair))},directives:[ki.d,H.t,H.s,ki.e,ki.c,ki.f,ki.g,ki.h],styles:["shipment-detail-map .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}shipment-detail-map .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}shipment-detail-map .group .shipment-detail-party-table{font-size:12px}shipment-detail-map .group .shipment-detail-party-table td,shipment-detail-map .group .shipment-detail-party-table th{padding:8px;font-size:12px}shipment-detail-map .group .shipment-detail-party-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:20}shipment-detail-map .group .shipment-detail-party-table tfoot td{font-weight:600}shipment-detail-map .group .shipment-detail-party-table .sticky-left-col1{position:sticky;min-width:36px;position:-webkit-sticky;left:0;background-color:#fff;z-index:10}shipment-detail-map .group .shipment-detail-party-table .sticky-left-col2{position:sticky;position:-webkit-sticky;left:36px;background-color:#fff;z-index:20}shipment-detail-map .group .shipment-detail-party-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;padding:0;text-align:center;background-color:#b3e5fc}shipment-detail-map .group .shipment-detail-party-table tfoot td.sticky-row2{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:25;font-weight:bolder}shipment-detail-map .group .shipment-detail-party-table tfoot td.sticky-row1{position:sticky;position:-webkit-sticky;bottom:32px;background:#fff;z-index:25}"],encapsulation:2,data:{animation:kt.a}}),t})();const _i=function(t){return{"red-600-fg":t}};function Li(t,e){if(1&t&&(V.Xb(0,"tr"),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td"),V.Lc(4),V.Wb(),V.Xb(5,"td"),V.Lc(6),V.Wb(),V.Xb(7,"td"),V.Lc(8),V.Wb(),V.Xb(9,"td"),V.Lc(10),V.Wb(),V.Xb(11,"td"),V.Lc(12),V.kc(13,"date"),V.Wb(),V.Xb(14,"td",9),V.Lc(15),V.Wb(),V.Xb(16,"td",9),V.Lc(17),V.Wb(),V.Wb()),2&t){const t=e.$implicit,o=e.index;V.Db(2),V.Mc(o+1),V.Db(2),V.Mc(t.place_name),V.Db(2),V.Mc(t.container_info.cont_number),V.Db(2),V.Mc(t.container_info.lease_code),V.Db(2),V.Mc(t.move_code),V.Db(2),V.Mc(V.mc(13,10,t.date,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngClass",V.rc(13,_i,t.over>0)),V.Db(1),V.Mc(t.over),V.Db(1),V.pc("ngClass",V.rc(15,_i,t.day>30)),V.Db(1),V.Mc(t.day)}}let Oi=(()=>{class t{constructor(t,e){this.matDialogRef=t,this._data=e,this.data=e.data}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(f.f),V.Rb(f.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-movement-empty-modal-dialog"]],decls:31,vars:1,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","",1,"p-0","m-0",2,"overflow","auto"],[1,"viewer-panel"],[1,"dashboard-table","simple"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"mat-toolbar",1),V.Xb(2,"mat-toolbar-row",2),V.Xb(3,"span",3),V.Lc(4,"Container List"),V.Wb(),V.Xb(5,"button",4),V.fc("click",(function(t){return e.matDialogRef.close()})),V.Xb(6,"mat-icon"),V.Lc(7,"close"),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Xb(8,"div",5),V.Xb(9,"div",6),V.Xb(10,"table",7),V.Xb(11,"thead"),V.Xb(12,"tr"),V.Xb(13,"th"),V.Lc(14,"No"),V.Wb(),V.Xb(15,"th"),V.Lc(16,"Place"),V.Wb(),V.Xb(17,"th"),V.Lc(18,"Container"),V.Wb(),V.Xb(19,"th"),V.Lc(20,"Lease"),V.Wb(),V.Xb(21,"th"),V.Lc(22,"Move"),V.Wb(),V.Xb(23,"th"),V.Lc(24,"Date"),V.Wb(),V.Xb(25,"th"),V.Lc(26,"Over"),V.Wb(),V.Xb(27,"th"),V.Lc(28,"Unuse"),V.Wb(),V.Wb(),V.Wb(),V.Xb(29,"tbody"),V.Jc(30,Li,18,17,"tr",8),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.Db(30),V.pc("ngForOf",e.data))},directives:[g.a,g.c,U.b,U.d,U.c,r.b,l.a,f.d,H.s,H.q,q.a],pipes:[H.f],styles:["@media screen and (min-width:600px)and (max-width:959px){.dashboard-movement-empty-modal-dialog{width:100%}}@media screen and (min-width:960px){.dashboard-movement-empty-modal-dialog{width:1080px}}.dashboard-movement-empty-modal-dialog .mat-dialog-container{padding:0}.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel{height:100%}.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table{overflow:auto}.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table td,.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table th{padding:8px;font-size:12px!important;white-space:nowrap}.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table .row-router{background-color:#e0e0e0}.dashboard-movement-empty-modal-dialog .dialog-content-wrapper .viewer-panel .dashboard-table .sticky-right-col{min-width:100px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}.dashboard-movement-empty-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active{background:#0ff!important}.dashboard-movement-empty-modal-dialog .cdk-overlay-connected-position-bounding-box .mat-autocomplete-panel .mat-option .mat-active .mat-option-text{color:red!important}.dashboard-movement-empty-modal-dialog .header-less-tabs.mat-tab-group .mat-tab-header{display:none}"],encapsulation:2}),t})();function Mi(t,e){if(1&t){const t=V.Yb();V.Xb(0,"tr"),V.Xb(1,"td",10),V.Lc(2),V.Wb(),V.Xb(3,"td",7),V.Lc(4),V.Wb(),V.Xb(5,"td",7),V.Lc(6),V.Wb(),V.Xb(7,"td",7),V.Lc(8),V.Wb(),V.Xb(9,"td",7),V.Xb(10,"a",11),V.fc("click",(function(e){V.Bc(t);const o=V.jc().$implicit,i=V.jc().$implicit;return V.jc(3).openModal(i[o])})),V.Lc(11),V.Wb(),V.Wb(),V.Wb()}if(2&t){const t=V.jc().$implicit,e=V.jc().$implicit;V.Db(1),V.pc("matTooltip",e.place_name)("matTooltipPosition","left"),V.Db(1),V.Mc(e.place_short_name),V.Db(2),V.Mc(e.pol_name),V.Db(2),V.Mc(e.pod_name),V.Db(2),V.Mc(t),V.Db(3),V.Mc(0==e[t].length?"":e[t].length)}}function Ci(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Mi,12,7,"tr",8),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit;V.Db(1),V.pc("ngIf",o[t])}}function Ti(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Ci,2,1,"ng-container",9),V.Ub()),2&t){const t=V.jc(3);V.Db(1),V.pc("ngForOf",t.headerType)}}function ji(t,e){if(1&t&&(V.Xb(0,"tbody"),V.Jc(1,Ti,2,1,"ng-container",9),V.Wb()),2&t){const t=V.jc(2);V.Db(1),V.pc("ngForOf",t.data)}}function Ii(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"div",3),V.Xb(2,"h2"),V.Xb(3,"span",4),V.Lc(4),V.Wb(),V.Wb(),V.Xb(5,"div",5),V.Xb(6,"table",6),V.Xb(7,"thead"),V.Xb(8,"tr"),V.Xb(9,"th"),V.Lc(10,"Place"),V.Wb(),V.Xb(11,"th",7),V.Lc(12,"Pol"),V.Wb(),V.Xb(13,"th",7),V.Lc(14,"Pod"),V.Wb(),V.Xb(15,"th",7),V.Lc(16,"Type"),V.Wb(),V.Xb(17,"th",7),V.Lc(18,"LOAD"),V.Wb(),V.Wb(),V.Wb(),V.Jc(19,ji,2,1,"tbody",8),V.Wb(),V.Wb(),V.Wb(),V.Ub()),2&t){const t=V.jc();V.Db(4),V.Mc(t.label),V.Db(15),V.pc("ngIf",t.data.length>0)}}function Pi(t,e){if(1&t&&(V.Xb(0,"th"),V.Lc(1,"PORT"),V.Wb()),2&t){const t=V.jc(3);V.Eb("colspan",t.col.p)}}function Vi(t,e){if(1&t&&(V.Xb(0,"th"),V.Lc(1,"DEPOT"),V.Wb()),2&t){const t=V.jc(3);V.Eb("colspan",t.col.d)}}function Fi(t,e){if(1&t&&(V.Xb(0,"th"),V.Lc(1,"NOSCOPE"),V.Wb()),2&t){const t=V.jc(3);V.Eb("colspan",t.col.a)}}function Ji(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",16),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit;V.Db(1),V.pc("matTooltip",t.place_name),V.Db(1),V.Mc(t.place_short_name)}}function Ai(t,e){if(1&t){const t=V.Yb();V.Vb(0),V.Xb(1,"td"),V.Xb(2,"a",11),V.fc("click",(function(o){V.Bc(t);const i=e.$implicit,n=V.jc(2).$implicit;return V.jc(3).openModal(i[n])})),V.Lc(3),V.Wb(),V.Wb(),V.Ub()}if(2&t){const t=e.$implicit,o=V.jc(2).$implicit;V.Db(3),V.Mc(null==t[o]?null:t[o].length)}}function Ri(t,e){if(1&t&&(V.Xb(0,"tr"),V.Xb(1,"td",17),V.Lc(2),V.Wb(),V.Xb(3,"td",18),V.Lc(4),V.Wb(),V.Jc(5,Ai,4,1,"ng-container",9),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc(3);V.Db(2),V.Mc(t),V.Db(2),V.Mc(e.total[t]),V.Db(1),V.pc("ngForOf",e.data)}}function Ni(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Ri,6,3,"tr",8),V.Ub()),2&t){const t=e.$implicit,o=V.jc(3);V.Db(1),V.pc("ngIf",o.total[t])}}function $i(t,e){if(1&t&&(V.Xb(0,"table",13),V.Xb(1,"thead"),V.Xb(2,"tr"),V.Sb(3,"th",14),V.Sb(4,"th",14),V.Jc(5,Pi,2,1,"th",8),V.Jc(6,Vi,2,1,"th",8),V.Jc(7,Fi,2,1,"th",8),V.Wb(),V.Xb(8,"tr"),V.Xb(9,"th",15),V.Lc(10,"Type"),V.Wb(),V.Xb(11,"th",14),V.Lc(12,"Total"),V.Wb(),V.Jc(13,Ji,3,2,"ng-container",9),V.Wb(),V.Wb(),V.Xb(14,"tbody"),V.Jc(15,Ni,2,1,"ng-container",9),V.Wb(),V.Wb()),2&t){const t=V.jc(2);V.Db(5),V.pc("ngIf",t.col.p>0),V.Db(1),V.pc("ngIf",t.col.d>0),V.Db(1),V.pc("ngIf",t.col.a>0),V.Db(6),V.pc("ngForOf",t.data),V.Db(2),V.pc("ngForOf",t.headerType)}}function Bi(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"div",3),V.Xb(2,"h2"),V.Xb(3,"span",4),V.Lc(4),V.Wb(),V.Wb(),V.Xb(5,"div",5),V.Jc(6,$i,16,5,"table",12),V.Wb(),V.Wb(),V.Ub()),2&t){const t=V.jc();V.Db(4),V.Mc(t.label),V.Db(2),V.pc("ngIf",t.data.length>0)}}let zi=(()=>{class t{constructor(t){this._matDialog=t,this.dataFulim={},this.arrRoute=[],this.col={p:0,d:0,a:0}}ngOnInit(){this.getData()}ngOnChanges(t){t.data&&(t.data.currentValue||null==t.data.currentValue)&&this.getData()}getData(){this.col={p:0,d:0,a:0},this.total={},this.data?(this.dataFulim={},this.arrRoute=[],this.data.map(t=>{switch(!0){case t.scope.includes("P"):this.col.p++;break;case t.scope.includes("D"):this.col.d++;break;default:this.col.a++}this.headerType.map(e=>{if(this.total[e]||(this.total[e]=0),t[e]&&(this.total[e]+=t[e].length),"FULIM"==this.label){let o=t.pol_name+"-"+t.pod_name;this.arrRoute.includes(o)||this.arrRoute.push(o),this.dataFulim[e]||(this.dataFulim[e]={}),this.dataFulim[e][o]||(this.dataFulim[e][o]={cont:[]}),this.dataFulim[e][o].pol_name=t.pol_name,this.dataFulim[e][o].pod_name=t.pod_name,t[e]&&t[e].map(t=>{this.dataFulim[e][o].cont.push(t)})}})})):this.data=[]}openModal(t){this.dialogRef=this._matDialog.open(Oi,{panelClass:"dashboard-movement-empty-modal-dialog",data:{data:t,label:this.label}})}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(f.b))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-stock-movement"]],inputs:{label:"label",headerType:"headerType",data:"data"},features:[V.Bb()],decls:3,vars:2,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"group","mb-12","mt-12"],[1,"text-bold"],[2,"overflow","auto"],[1,"simple","report-table"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"matTooltip","matTooltipPosition"],[1,"cursor-pointer",3,"click"],["class","simple report-table mr-8",4,"ngIf"],[1,"simple","report-table","mr-8"],[1,"w-40"],[1,"sticky-col1","w-40"],[3,"matTooltip"],[1,"sticky-col1"],[1,"sticky-col1","text-bold"]],template:function(t,e){1&t&&(V.Vb(0,0),V.Jc(1,Ii,20,2,"ng-container",1),V.Jc(2,Bi,7,2,"ng-container",2),V.Ub()),2&t&&(V.pc("ngSwitch",!0),V.Db(1),V.pc("ngSwitchCase","INBOUND ONBOARD"==e.label))},directives:[H.x,H.y,H.z,H.t,H.s,d.a],styles:["dashboard-stock-movement .group{margin-left:0;margin-right:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-radius:2px;padding:16px 0 8px;border:1px solid #000}dashboard-stock-movement .group h2{position:absolute;top:-8px;left:8px;margin:0;padding:0 8px;font-size:12px;font-weight:700;background:#fafafa}dashboard-stock-movement .group .report-table{font-size:12px}dashboard-stock-movement .group .report-table td,dashboard-stock-movement .group .report-table th{white-space:nowrap}@media screen and (max-width:599px){dashboard-stock-movement .group .report-table td,dashboard-stock-movement .group .report-table th{padding:8px 4px!important}}@media screen and (min-width:600px){dashboard-stock-movement .group .report-table td,dashboard-stock-movement .group .report-table th{padding:8px!important}}"],encapsulation:2}),t})();function Ei(t,e){if(1&t&&V.Sb(0,"dashboard-stock-movement",8),2&t){const t=V.jc();V.pc("label","EMPTY")("headerType",t.headerType)("data",t.containerMovement.EMPTY)}}let Hi=(()=>{class t{constructor(t,e,o,i,n,a){if(this.authService=t,this.dashboardService=e,this._matDialog=o,this.commonService=i,this.bookFirebaseService=n,this.router=a,this.firstLoad=!0,this.height=560,this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}this.permission&&!this.permission.data?this.dashboardService.getPermissionById(this.permission.id).then(t=>{this.permission=t,this.bookFirebaseService.readDatabaseBooking().subscribe(t=>{t.map(t=>{t.voyage.depart_time=new Date(t.voyage.depart_time).getTime()}),t.sort((t,e)=>t.voyage.depart_time<e.voyage.depart_time?1:e.voyage.depart_time<t.voyage.depart_time?-1:0),this.dashboardService.book=t.filter(t=>this.permission.owner.includes(t.user)||(t.book.create_by?this.permission.owner.includes(t.book.create_by.id):null)||!!t.share&&t.share.map(t=>t.id).includes(this.authService.user)),this.dashboardService.buildBookOverview()})}):this.bookFirebaseService.readDatabaseBooking().subscribe(t=>{t.map(t=>{t.voyage.depart_time=new Date(t.voyage.depart_time).getTime()}),t.sort((t,e)=>t.voyage.depart_time<e.voyage.depart_time?1:e.voyage.depart_time<t.voyage.depart_time?-1:0),this.dashboardService.book=t,this.dashboardService.buildBookOverview()})}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.dashboardService.changeScreen(this.dashboardService.fullScreen),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.width<600?t.height-16:t.height-64-64-16}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{let e=t?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16+e:this.authService.screenHeight-64-64-16+e}),this.dashboardService.onOverviewChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.totalMonth=this.dashboardService.totalMonth,this.arrMonth=this.dashboardService.arrMonth,this.arrType=this.dashboardService.arrType,this.shipmentTotal=this.dashboardService.total,this.filterData=this.dashboardService.currenSearch.formSearch,this.portPair=this.dashboardService.portPair,this.routeData=this.dashboardService.routeData,this.typeColumnView=this.dashboardService.typeColumnView}),this.dashboardService.onBookOverviewChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{t.length>0&&(this.bookData=t[0],this.bookWeek=t[1],this.bookType=t[2],this.bookTotal=t[3],this.priceHeader=this.dashboardService.priceHeader,this.priceObj=this.dashboardService.priceObj),this.data=this.dashboardService.report,this.arrYear=this.dashboardService.arrYear}),this.dashboardService.onContainersMovementChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.headerType=this.dashboardService.headerType,this.containerMovement=this.dashboardService.containerMovement})}ngOnChanges(t){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}openModal(t){this.dialogRef=this._matDialog.open(Be,{panelClass:"dashboard-modal-dialog",data:{label:"Book list",data:t,contType:this.bookType,priceHeader:this.priceHeader,priceObj:this.priceObj,height:this.height,modul:this.modul,bookFirebaseService:this.bookFirebaseService}}),this.dialogRef.afterClosed().subscribe(t=>{})}filterMonth(t){this.dashboardService.onMonthChanged.next(t)}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a),V.Rb(A),V.Rb(f.b),V.Rb(C.a),V.Rb($),V.Rb(i.g))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-overview"]],features:[V.Bb()],decls:8,vars:20,consts:[["fxLayout","column",1,"w-100-p"],["fusePerfectScrollbar","",2,"overflow","auto"],[3,"data","arrYear"],[3,"routeData","portPair","arrMonth","arrType","typeColumnView"],[3,"label","headerType","data",4,"ngIf"],[3,"bookWeek","bookType","bookData","bookTotal","openModal"],[3,"arrType","arrMonth","totalMonth","shipmentTotal","filterMonth"],[3,"filterData","portPair"],[3,"label","headerType","data"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"div",1),V.Sb(2,"dashboard-chart",2),V.Sb(3,"dashboard-route",3),V.Jc(4,Ei,1,3,"dashboard-stock-movement",4),V.Xb(5,"dashboard-bookings",5),V.fc("openModal",(function(t){return e.openModal(t)})),V.Wb(),V.Xb(6,"dashboard-shipment",6),V.fc("filterMonth",(function(t){return e.filterMonth(t)})),V.Wb(),V.Sb(7,"dashboard-map",7),V.Wb(),V.Wb()),2&t&&(V.Db(1),V.Ic("height",e.height,"px"),V.Db(1),V.pc("data",e.data)("arrYear",e.arrYear),V.Db(1),V.pc("routeData",e.routeData)("portPair",e.portPair)("arrMonth",e.arrMonth)("arrType",e.arrType)("typeColumnView",e.typeColumnView),V.Db(1),V.pc("ngIf",e.modul.includes("export")),V.Db(1),V.pc("bookWeek",e.bookWeek)("bookType",e.bookType)("bookData",e.bookData)("bookTotal",e.bookTotal),V.Db(1),V.pc("arrType",e.arrType)("arrMonth",e.arrMonth)("totalMonth",e.totalMonth)("shipmentTotal",e.shipmentTotal),V.Db(1),V.pc("filterData",e.filterData)("portPair",e.portPair))},directives:[U.d,Y.a,Ye,ho,H.t,wo,yi,Si,zi],styles:[""],encapsulation:2}),t})(),Ui=(()=>{class t{constructor(t,e,o){this.authService=t,this.commonService=e,this.dashboardService=o,this.height=560,this.total={},this._unsubscribeAll=new j.a,this.modul=this.authService.modul}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.modul=this.authService.modul}),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.width<600?t.height-16:t.height-64-64-16}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{let e=t?64:0;this.height=this.authService.screenWidth<600?this.authService.screenHeight-16+e:this.authService.screenHeight-64-64-16+e}),this.dashboardService.onContainersMovementChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.headerType=this.dashboardService.headerType,this.containerMovement=this.dashboardService.containerMovement})}ngOnChanges(t){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setFilter(t){}getData(){}openModal(t){}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a),V.Rb(C.a),V.Rb(A))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-stock"]],features:[V.Bb()],decls:8,vars:20,consts:[["fxLayout","column",1,"w-100-p"],["fusePerfectScrollbar","",2,"overflow","auto"],[3,"label","headerType","data"]],template:function(t,e){1&t&&(V.Xb(0,"div",0),V.Xb(1,"div",1),V.Sb(2,"dashboard-stock-movement",2),V.Sb(3,"dashboard-stock-movement",2),V.Sb(4,"dashboard-stock-movement",2),V.Sb(5,"dashboard-stock-movement",2),V.Sb(6,"dashboard-stock-movement",2),V.Sb(7,"dashboard-stock-movement",2),V.Wb(),V.Wb()),2&t&&(V.Db(1),V.Ic("height",e.height,"px"),V.Db(1),V.pc("label","INBOUND ONBOARD")("headerType",e.headerType)("data",e.containerMovement.LOAD),V.Db(1),V.pc("label","FULIM")("headerType",e.headerType)("data",e.containerMovement.FULIM),V.Db(1),V.pc("label","TRIM")("headerType",e.headerType)("data",e.containerMovement.TRIMP),V.Db(1),V.pc("label","EMPTY")("headerType",e.headerType)("data",e.containerMovement.EMPTY),V.Db(1),V.pc("label","TREXP")("headerType",e.headerType)("data",e.containerMovement.TREXP),V.Db(1),V.pc("label","FULEX")("headerType",e.headerType)("data",e.containerMovement.FULEX))},directives:[U.d,Y.a,zi],styles:[""],encapsulation:2}),t})();function Yi(t,e){1&t&&(V.Xb(0,"div",10),V.Xb(1,"span",11),V.Lc(2),V.Wb(),V.Wb()),2&t&&(V.Db(2),V.Mc("No Shipment"))}function qi(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",12),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.Ic("top",o.inverseOfTranslation),V.Db(1),V.Mc(t)}}const Gi=function(t,e){return{item:t,"active-item":e}};function Qi(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",32),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc(),i=o.index,n=o.$implicit,a=V.jc();V.Db(1),V.pc("ngClass",V.sc(2,Gi,a.selectItem!=i,a.selectItem==i)),V.Db(1),V.Mc(a.shipments[n.key][t])}}function Ki(t,e){if(1&t&&(V.Xb(0,"th",34),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit;V.Db(1),V.Mc(t)}}function Zi(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Ki,2,1,"th",33),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.shipments[o.key][t]&&i.shipments[o.key][t]>0)}}const tn=function(t,e){return{"accent-200-bg":t,"accent-100-bg":e}};function en(t,e){if(1&t&&(V.Xb(0,"th",36),V.Xb(1,"div",37),V.Xb(2,"span",38),V.Lc(3),V.Wb(),V.Xb(4,"span"),V.Lc(5),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc().$implicit;V.pc("ngClass",V.sc(4,tn,"VIETNAM"==t.payment_center,"VIETNAM"!=t.payment_center)),V.Db(1),V.pc("matTooltip",t.payment_center),V.Db(2),V.Mc(t.code),V.Db(2),V.Mc(t.currency)}}function on(t,e){if(1&t&&(V.Vb(0),V.Jc(1,en,6,7,"th",35),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.shipments[o.key].revenue[t.code+t.currency+t.payment_center]>0)}}const nn=function(t,e){return{"teal-400-bg":t,"teal-300-bg":e}};function an(t,e){if(1&t&&(V.Xb(0,"th",36),V.Xb(1,"div",37),V.Xb(2,"span",38),V.Lc(3),V.Wb(),V.Xb(4,"span"),V.Lc(5),V.Wb(),V.Wb(),V.Wb()),2&t){const t=V.jc().$implicit;V.pc("ngClass",V.sc(4,nn,"VIETNAM"==t.payment_center,"VIETNAM"!=t.payment_center)),V.Db(1),V.pc("matTooltip",t.payment_center),V.Db(2),V.Mc(t.code),V.Db(2),V.Mc(t.currency)}}function cn(t,e){if(1&t&&(V.Vb(0),V.Jc(1,an,6,7,"th",35),V.Ub()),2&t){const t=e.$implicit,o=V.jc().$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.shipments[o.key].cost[t.code+t.currency+t.payment_center]>0)}}function rn(t,e){if(1&t&&(V.Xb(0,"td",49),V.Lc(1),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc().$implicit;V.Db(1),V.Mc(e[t])}}function sn(t,e){if(1&t&&(V.Vb(0),V.Jc(1,rn,2,1,"td",48),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2).$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.shipments[o.key][t]&&i.shipments[o.key][t]>0)}}function bn(t,e){1&t&&(V.Xb(0,"mat-chip"),V.Lc(1,"Booking"),V.Wb())}function ln(t,e){1&t&&(V.Xb(0,"mat-chip",50),V.Lc(1,"Stuffing"),V.Wb())}function dn(t,e){1&t&&(V.Xb(0,"mat-chip",51),V.Lc(1,"Ready to load"),V.Wb())}function hn(t,e){1&t&&(V.Xb(0,"mat-chip",52),V.Lc(1,"Loaded"),V.Wb())}function pn(t,e){1&t&&(V.Xb(0,"mat-chip",50),V.Lc(1,"Discharge"),V.Wb())}function un(t,e){1&t&&(V.Xb(0,"mat-chip",51),V.Lc(1,"Pick up"),V.Wb())}function mn(t,e){1&t&&(V.Xb(0,"mat-chip",52),V.Lc(1,"Complete"),V.Wb())}const fn=function(t,e,o){return{paid:t,"accent-200-bg":e,"accent-100-bg":o}};function gn(t,e){if(1&t&&(V.Xb(0,"td",36),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc().$implicit;V.pc("ngClass",V.tc(5,fn,e.price.revenue[t.code+t.currency+t.payment_center+"paid"],"VIETNAM"==t.payment_center&&!e.price.revenue[t.code+t.currency+t.payment_center+"paid"],"VIETNAM"!=t.payment_center&&!e.price.revenue[t.code+t.currency+t.payment_center+"paid"])),V.Db(1),V.Nc(" ",V.mc(2,2,e.price.revenue[t.code+t.currency+t.payment_center],"VND"==t.currency?"1.0-0":"1.2-2"),"")}}function vn(t,e){if(1&t&&(V.Vb(0),V.Jc(1,gn,3,9,"td",35),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2).$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.shipments[o.key].revenue[t.code+t.currency+t.payment_center]>0)}}const yn=function(t,e,o){return{paid:t,"teal-400-bg":e,"teal-300-bg":o}};function kn(t,e){if(1&t&&(V.Xb(0,"td",36),V.Lc(1),V.kc(2,"number"),V.Wb()),2&t){const t=V.jc().$implicit,e=V.jc().$implicit;V.pc("ngClass",V.tc(5,yn,e.price.cost[t.code+t.currency+t.payment_center+"paid"],"VIETNAM"==t.payment_center&&!e.price.cost[t.code+t.currency+t.payment_center+"paid"],"VIETNAM"!=t.payment_center&&!e.price.cost[t.code+t.currency+t.payment_center+"paid"])),V.Db(1),V.Mc(V.mc(2,2,e.price.cost[t.code+t.currency+t.payment_center],"VND"==t.currency?"1.0-0":"1.2-2"))}}function xn(t,e){if(1&t&&(V.Vb(0),V.Jc(1,kn,3,9,"td",35),V.Ub()),2&t){const t=e.$implicit,o=V.jc(2).$implicit,i=V.jc();V.Db(1),V.pc("ngIf",i.shipments[o.key].cost[t.code+t.currency+t.payment_center]>0)}}const Dn=function(t){return{"error-cell":t}};function wn(t,e){if(1&t&&(V.Xb(0,"tr"),V.Xb(1,"td"),V.Lc(2),V.Wb(),V.Xb(3,"td",39),V.Xb(4,"a",40),V.Lc(5),V.Wb(),V.Wb(),V.Xb(6,"td"),V.Lc(7),V.Wb(),V.Jc(8,sn,2,1,"ng-container",7),V.Xb(9,"td",41),V.Lc(10),V.Wb(),V.Xb(11,"td",41),V.Lc(12),V.Wb(),V.Xb(13,"td"),V.Xb(14,"mat-chip-list",42),V.Jc(15,bn,2,0,"mat-chip",43),V.Jc(16,ln,2,0,"mat-chip",44),V.Jc(17,dn,2,0,"mat-chip",45),V.Jc(18,hn,2,0,"mat-chip",46),V.Jc(19,pn,2,0,"mat-chip",44),V.Jc(20,un,2,0,"mat-chip",45),V.Jc(21,mn,2,0,"mat-chip",46),V.Wb(),V.Wb(),V.Xb(22,"td",47),V.Lc(23),V.kc(24,"number"),V.Wb(),V.Xb(25,"td",47),V.Lc(26),V.kc(27,"number"),V.Wb(),V.Xb(28,"td"),V.Lc(29),V.Wb(),V.Xb(30,"td"),V.Lc(31),V.Wb(),V.Xb(32,"td"),V.Lc(33),V.Wb(),V.Jc(34,vn,2,1,"ng-container",7),V.Jc(35,xn,2,1,"ng-container",7),V.Sb(36,"td",31),V.Wb()),2&t){const t=e.$implicit,o=e.index,i=V.jc(2);V.Db(2),V.Mc(o+1),V.Db(1),V.pc("ngClass",V.rc(31,Dn,!t.volume_check)),V.Db(1),V.pc("routerLink","/apps/"+i.modul+"/shipment/detail/"+t.id+"/soa"),V.Db(1),V.Mc(t.code),V.Db(2),V.Mc(t.bill),V.Db(1),V.pc("ngForOf",i.arrType),V.Db(1),V.pc("matTooltip",t.customer_name),V.Db(1),V.Mc(t.customer_short_name),V.Db(1),V.pc("matTooltip",t.agent_name),V.Db(1),V.Mc(t.agent_short_name),V.Db(2),V.pc("ngSwitch",t.process),V.Db(1),V.pc("ngSwitchCase",0),V.Db(1),V.pc("ngSwitchCase",1),V.Db(1),V.pc("ngSwitchCase",2),V.Db(1),V.pc("ngSwitchCase",3),V.Db(1),V.pc("ngSwitchCase",4),V.Db(1),V.pc("ngSwitchCase",5),V.Db(1),V.pc("ngSwitchCase",6),V.Db(2),V.Mc(V.mc(24,25,t.revenueTotal,"1.0-0")),V.Db(3),V.Mc(V.mc(27,28,t.costTotal,"1.0-0")),V.Db(3),V.Mc(t.cont_move),V.Db(2),V.Mc(t.owner_last_name),V.Db(2),V.Mc(t.create_by_last_name),V.Db(1),V.pc("ngForOf",i.price),V.Db(1),V.pc("ngForOf",i.price)}}function Wn(t,e){if(1&t){const t=V.Yb();V.Vb(0),V.Xb(1,"tr"),V.Xb(2,"td",13),V.Lc(3),V.Wb(),V.Xb(4,"td",14),V.Xb(5,"a",15),V.fc("click",(function(o){V.Bc(t);const i=e.index,n=V.xc(27),a=V.jc();return n.toggle(),a.selectItem=i})),V.Lc(6),V.Wb(),V.Wb(),V.Xb(7,"td",16),V.Lc(8),V.Wb(),V.Xb(9,"td",16),V.Lc(10),V.Wb(),V.Jc(11,Qi,3,5,"ng-container",7),V.Xb(12,"td",17),V.Lc(13),V.kc(14,"date"),V.Wb(),V.Xb(15,"td",17),V.Lc(16),V.kc(17,"date"),V.Wb(),V.Xb(18,"td",17),V.Lc(19),V.kc(20,"date"),V.Wb(),V.Xb(21,"td",18),V.Xb(22,"mat-icon",19),V.Lc(23,"print"),V.Wb(),V.Wb(),V.Wb(),V.Xb(24,"tr"),V.Xb(25,"td",20),V.Xb(26,"mat-expansion-panel",21,22),V.Xb(28,"div",23),V.Xb(29,"table",24),V.Xb(30,"thead"),V.Xb(31,"tr"),V.Xb(32,"th",25),V.Lc(33,"No"),V.Wb(),V.Xb(34,"th",26),V.Lc(35,"Code"),V.Wb(),V.Xb(36,"th",26),V.Lc(37,"Bill"),V.Wb(),V.Jc(38,Zi,2,1,"ng-container",7),V.Xb(39,"th",27),V.Lc(40,"Customer"),V.Wb(),V.Xb(41,"th",27),V.Lc(42,"Agent"),V.Wb(),V.Xb(43,"th",28),V.Lc(44,"Process"),V.Wb(),V.Xb(45,"th",29),V.Lc(46,"Revenue"),V.Wb(),V.Xb(47,"th",29),V.Lc(48,"Cost"),V.Wb(),V.Xb(49,"th",30),V.Lc(50,"Cont/Move"),V.Wb(),V.Xb(51,"th",27),V.Lc(52,"Owner"),V.Wb(),V.Xb(53,"th",27),V.Lc(54,"Create by"),V.Wb(),V.Jc(55,on,2,1,"ng-container",7),V.Jc(56,cn,2,1,"ng-container",7),V.Sb(57,"th",31),V.Wb(),V.Wb(),V.Xb(58,"tbody"),V.Jc(59,wn,37,33,"tr",7),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Ub()}if(2&t){const t=e.$implicit,o=e.index,i=V.jc();V.Db(2),V.pc("ngClass",V.sc(32,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.Mc(o+1),V.Db(1),V.pc("ngClass",V.sc(35,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(2),V.Mc(i.shipments[t.key].vessel_full_name),V.Db(1),V.pc("ngClass",V.sc(38,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.Mc(i.shipments[t.key].pol_name),V.Db(1),V.pc("ngClass",V.sc(41,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.Mc(i.shipments[t.key].pod_name),V.Db(1),V.pc("ngForOf",i.arrType),V.Db(1),V.pc("ngClass",V.sc(44,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.Mc(V.mc(14,23,i.shipments[t.key].depart_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngClass",V.sc(47,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.Mc(V.mc(17,26,i.shipments[t.key].arrive_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngClass",V.sc(50,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.Mc(V.mc(20,29,i.shipments[t.key].depart_time+60*i.shipments[t.key].closing_time*60*1e3,"HH:mm a MMM dd yyyy")),V.Db(2),V.pc("ngClass",V.sc(53,Gi,i.selectItem!=o,i.selectItem==o)),V.Db(1),V.pc("routerLink","/apps/"+i.modul+"/report/voyage/"+i.modul+"/"+i.shipments[t.key].vessel_id+"/"+i.shipments[t.key].voyage_name+"/"+i.shipments[t.key].pol+"/"+i.shipments[t.key].pod),V.Db(3),V.Eb("colspan",8+i.arrType.length),V.Db(1),V.pc("expanded",i.selectItem==o),V.Db(12),V.pc("ngForOf",i.arrType),V.Db(17),V.pc("ngForOf",i.price),V.Db(1),V.pc("ngForOf",i.price),V.Db(3),V.pc("ngForOf",i.shipments[t.key].shipment)}}let Xn=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}ngOnChanges(t){t.shipments&&(t.shipments.currentValue||null==t.shipments.currentValue)&&(this.shipments=t.shipments.currentValue)}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-vessel-list"]],viewQuery:function(t,e){var o;1&t&&V.Sc(D.e,!0),2&t&&V.wc(o=V.gc())&&(e.viewPort=o.first)},inputs:{shipments:"shipments",voyage:"voyage",arrType:"arrType",height:"height",permission:"permission",selectItem:"selectItem",price:"price",modul:"modul"},features:[V.Bb()],decls:25,vars:23,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],[2,"overflow","auto"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-table"],[1,"w-60"],[1,"w-152","sticky-col",2,"z-index","30"],[1,"w-112"],[4,"ngFor","ngForOf"],[1,"w-120"],[4,"cdkVirtualFor","cdkVirtualForOf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],[1,"w-52","text-center"],[1,"w-60",3,"ngClass"],[1,"w-152","sticky-col",3,"ngClass"],[1,"cursor-pointer",3,"click"],[1,"w-112",3,"ngClass"],[1,"w-120",3,"ngClass"],[3,"ngClass"],["color","accent",1,"cursor-pointer",3,"routerLink"],[2,"padding","0"],[1,"item",3,"expanded"],["itemPanel",""],[1,"content"],[1,"simple","dashboard-table"],[1,"accent-100-bg","w-52"],[1,"accent-100-bg","w-152"],[1,"accent-100-bg","w-120"],[1,"accent-100-bg","w-100"],[1,"accent-100-bg","w-100","text-right"],[1,"accent-100-bg","w-40"],[1,"accent-100-bg"],[1,"w-52","text-center",3,"ngClass"],["class","accent-100-bg text-center w-40",4,"ngIf"],[1,"accent-100-bg","text-center","w-40"],["class","text-right border-right w-80",3,"ngClass",4,"ngIf"],[1,"text-right","border-right","w-80",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center center",1,"notes",3,"matTooltip"],[1,"mb-4"],[1,"w-152",3,"ngClass"],[1,"cursor-pointer",3,"routerLink"],[3,"matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],[1,"text-right"],["class","text-center",4,"ngIf"],[1,"text-center"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""]],template:function(t,e){1&t&&(V.Jc(0,Yi,3,1,"div",0),V.Xb(1,"div",1),V.Xb(2,"cdk-virtual-scroll-viewport",2),V.Xb(3,"mat-accordion"),V.Xb(4,"table",3),V.Xb(5,"thead"),V.Xb(6,"tr"),V.Xb(7,"th",4),V.Lc(8,"No"),V.Wb(),V.Xb(9,"th",5),V.Lc(10,"Voyage"),V.Wb(),V.Xb(11,"th",6),V.Lc(12,"POL"),V.Wb(),V.Xb(13,"th",6),V.Lc(14,"POD"),V.Wb(),V.Jc(15,qi,3,3,"ng-container",7),V.Xb(16,"th",8),V.Lc(17,"ETD"),V.Wb(),V.Xb(18,"th",8),V.Lc(19,"ETA"),V.Wb(),V.Xb(20,"th",8),V.Lc(21,"Closing time"),V.Wb(),V.Sb(22,"th"),V.Wb(),V.Wb(),V.Xb(23,"tbody"),V.Jc(24,Wn,60,56,"ng-container",9),V.Wb(),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.pc("ngIf",0===e.voyage.length),V.Db(1),V.Ic("height",e.height,"px"),V.Db(1),V.Ic("height",e.height,"px"),V.Db(5),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.pc("ngForOf",e.arrType),V.Db(1),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.pc("cdkVirtualForOf",e.voyage))},directives:[H.t,D.e,w.a,U.d,s.a,H.s,D.d,U.c,U.e,H.q,q.a,l.a,i.h,s.c,d.a,i.j,x.c,H.x,H.y,x.a],pipes:[H.f,H.g],styles:["dashboard-vessel-list .dashboard-table{font-size:12px}dashboard-vessel-list .dashboard-table td,dashboard-vessel-list .dashboard-table th{padding:8px}dashboard-vessel-list .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-vessel-list .dashboard-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-vessel-list .dashboard-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-vessel-list .dashboard-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-vessel-list .dashboard-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}dashboard-vessel-list .dashboard-table .mat-standard-chip{font-size:12px;border-radius:10px;min-height:24px}dashboard-vessel-list .mat-expansion-panel-body{padding:0!important}dashboard-vessel-list .dashboard-table{font-size:12px!important}dashboard-vessel-list .dashboard-table td,dashboard-vessel-list .dashboard-table th{padding:8px!important;background:#b3e5fc;white-space:nowrap;z-index:0}dashboard-vessel-list .dashboard-table .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}"],encapsulation:2,data:{animation:kt.a}}),t})(),Sn=(()=>{class t{constructor(t,e,o,i,n){if(this.router=t,this.route=e,this._activatedRoute=o,this.authService=i,this.dashboardService=n,this.voyage=[],this.arrType=[],this.height=560,this.selectItem=0,this.price=[],this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.dashboardService.onVesselChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.shipments=this.dashboardService.shipmentVessel,this.voyage=this.dashboardService.voyage,this.arrType=this.dashboardService.arrType,this.price=this.dashboardService.price})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(i.a),V.Rb(i.a),V.Rb(F.a),V.Rb(A))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-vessel"]],decls:1,vars:8,consts:[[3,"modul","shipments","voyage","arrType","height","permission","selectItem","price"]],template:function(t,e){1&t&&V.Sb(0,"dashboard-vessel-list",0),2&t&&V.pc("modul",e.modul)("shipments",e.shipments)("voyage",e.voyage)("arrType",e.arrType)("height",e.height)("permission",e.permission)("selectItem",e.selectItem)("price",e.price)},directives:[Xn],styles:[""],encapsulation:2,data:{animation:kt.a}}),t})();function _n(t,e){1&t&&(V.Xb(0,"div",9),V.Xb(1,"span",10),V.Lc(2),V.Wb(),V.Wb()),2&t&&(V.Db(2),V.Mc("No Shipment"))}function Ln(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"th",11),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.Ic("top",o.inverseOfTranslation),V.Db(1),V.Mc(t)}}const On=function(t){return{"row-even":t}};function Mn(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",17),V.Lc(2),V.Wb(),V.Ub()),2&t){const t=e.$implicit,o=V.jc(4),i=o.index,n=o.$implicit,a=V.jc();V.Db(1),V.pc("ngClass",V.rc(3,On,i%2==1)),V.Eb("rowspan",a.shipments[n.key].container),V.Db(1),V.Mc(a.shipments[n.key][t])}}function Cn(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",15),V.Lc(2),V.Wb(),V.Xb(3,"td",16),V.Xb(4,"a"),V.Lc(5),V.Wb(),V.Wb(),V.Xb(6,"td",15),V.Lc(7),V.Wb(),V.Xb(8,"td",15),V.Lc(9),V.Wb(),V.Xb(10,"td",15),V.Lc(11),V.kc(12,"date"),V.Wb(),V.Xb(13,"td",15),V.Lc(14),V.kc(15,"date"),V.Wb(),V.Jc(16,Mn,3,5,"ng-container",5),V.Ub()),2&t){const t=V.jc(3),e=t.index,o=t.$implicit,i=V.jc();V.Db(1),V.pc("ngClass",V.rc(25,On,e%2==1)),V.Eb("rowspan",i.shipments[o.key].container),V.Db(1),V.Mc(e+1),V.Db(1),V.pc("ngClass",V.rc(27,On,e%2==1)),V.Eb("rowspan",i.shipments[o.key].container),V.Db(2),V.Mc(i.shipments[o.key].vessel_full_name),V.Db(1),V.pc("ngClass",V.rc(29,On,e%2==1)),V.Eb("rowspan",i.shipments[o.key].container),V.Db(1),V.Mc(i.shipments[o.key].pol_name),V.Db(1),V.pc("ngClass",V.rc(31,On,e%2==1)),V.Eb("rowspan",i.shipments[o.key].container),V.Db(1),V.Mc(i.shipments[o.key].pod_name),V.Db(1),V.pc("ngClass",V.rc(33,On,e%2==1)),V.Eb("rowspan",i.shipments[o.key].container),V.Db(1),V.Mc(V.mc(12,19,i.shipments[o.key].depart_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngClass",V.rc(35,On,e%2==1)),V.Eb("rowspan",i.shipments[o.key].container),V.Db(1),V.Mc(V.mc(15,22,i.shipments[o.key].arrive_time,"MM/dd/yyyy HH:mm")),V.Db(2),V.pc("ngForOf",i.arrType)}}function Tn(t,e){1&t&&(V.Xb(0,"mat-chip"),V.Lc(1,"Booking"),V.Wb())}function jn(t,e){1&t&&(V.Xb(0,"mat-chip",26),V.Lc(1,"Stuffing"),V.Wb())}function In(t,e){1&t&&(V.Xb(0,"mat-chip",27),V.Lc(1,"Ready to load"),V.Wb())}function Pn(t,e){1&t&&(V.Xb(0,"mat-chip",28),V.Lc(1,"Loaded"),V.Wb())}function Vn(t,e){1&t&&(V.Xb(0,"mat-chip",26),V.Lc(1,"Discharge"),V.Wb())}function Fn(t,e){1&t&&(V.Xb(0,"mat-chip",27),V.Lc(1,"Pick up"),V.Wb())}function Jn(t,e){1&t&&(V.Xb(0,"mat-chip",28),V.Lc(1,"Complete"),V.Wb())}const An=function(t,e){return{"row-even":t,"error-cell":e}};function Rn(t,e){if(1&t&&(V.Vb(0),V.Xb(1,"td",18),V.Xb(2,"a",19),V.Lc(3),V.Wb(),V.Wb(),V.Xb(4,"td",15),V.Lc(5),V.Wb(),V.Xb(6,"td",20),V.Lc(7),V.Wb(),V.Xb(8,"td",20),V.Lc(9),V.Wb(),V.Xb(10,"td",15),V.Xb(11,"mat-chip-list",21),V.Jc(12,Tn,2,0,"mat-chip",22),V.Jc(13,jn,2,0,"mat-chip",23),V.Jc(14,In,2,0,"mat-chip",24),V.Jc(15,Pn,2,0,"mat-chip",25),V.Jc(16,Vn,2,0,"mat-chip",23),V.Jc(17,Fn,2,0,"mat-chip",24),V.Jc(18,Jn,2,0,"mat-chip",25),V.Wb(),V.Wb(),V.Ub()),2&t){const t=V.jc(2).$implicit,e=V.jc().index,o=V.jc();V.Db(1),V.pc("ngClass",V.sc(26,An,e%2==1,!t.volume_check))("matTooltip",t.volume_check?"":"Thi\u1ebfu container so v\u1edbi volume"),V.Eb("rowspan",t.container.length),V.Db(1),V.pc("routerLink","/apps/"+o.modul+"/shipment/detail/"+t.id+"/soa"),V.Db(1),V.Mc(t.code),V.Db(1),V.pc("ngClass",V.rc(29,On,e%2==1)),V.Eb("rowspan",t.container.length),V.Db(1),V.Mc(t.bill),V.Db(1),V.pc("ngClass",V.rc(31,On,e%2==1))("matTooltip",t.customer_name),V.Eb("rowspan",t.container.length),V.Db(1),V.Mc(t.customer_short_name),V.Db(1),V.pc("ngClass",V.rc(33,On,e%2==1))("matTooltip",t.agent_name),V.Eb("rowspan",t.container.length),V.Db(1),V.Mc(t.agent_short_name),V.Db(1),V.pc("ngClass",V.rc(35,On,e%2==1)),V.Eb("rowspan",t.container.length),V.Db(1),V.pc("ngSwitch",t.process),V.Db(1),V.pc("ngSwitchCase",0),V.Db(1),V.pc("ngSwitchCase",1),V.Db(1),V.pc("ngSwitchCase",2),V.Db(1),V.pc("ngSwitchCase",3),V.Db(1),V.pc("ngSwitchCase",4),V.Db(1),V.pc("ngSwitchCase",5),V.Db(1),V.pc("ngSwitchCase",6)}}function Nn(t,e){if(1&t&&(V.Xb(0,"tr"),V.Jc(1,Cn,17,37,"ng-container",12),V.Jc(2,Rn,19,37,"ng-container",12),V.Xb(3,"td",13),V.Lc(4),V.Wb(),V.Xb(5,"td",14),V.Lc(6),V.Wb(),V.Wb()),2&t){const t=e.$implicit,o=e.index,i=V.jc().index,n=V.jc().index;V.Db(1),V.pc("ngIf",0==i&&0==o),V.Db(1),V.pc("ngIf",0==o),V.Db(1),V.pc("ngClass",V.rc(6,On,n%2==1)),V.Db(1),V.Mc(t.cont_number),V.Db(1),V.pc("ngClass",V.rc(8,On,n%2==1)),V.Db(1),V.Mc(t.cont_type)}}function $n(t,e){if(1&t&&(V.Vb(0),V.Jc(1,Nn,7,10,"tr",5),V.Ub()),2&t){const t=e.$implicit;V.Db(1),V.pc("ngForOf",t.container)}}function Bn(t,e){if(1&t&&(V.Vb(0),V.Jc(1,$n,2,1,"ng-container",5),V.Ub()),2&t){const t=e.$implicit,o=V.jc();V.Db(1),V.pc("ngForOf",o.shipments[t.key].shipment)}}let zn=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}ngOnChanges(t){t.shipments&&(t.shipments.currentValue||null==t.shipments.currentValue)&&(this.shipments=t.shipments.currentValue)}get inverseOfTranslation(){return this.viewPort&&this.viewPort._renderedContentOffset?`-${this.viewPort._renderedContentOffset}px`:"-0px"}get inverseOfTranslation2(){return this.viewPort&&this.viewPort._renderedContentOffset?`${this.viewPort._renderedContentOffset}px`:"0px"}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(F.a))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-container-list"]],viewQuery:function(t,e){var o;1&t&&V.Sc(D.e,!0),2&t&&V.wc(o=V.gc())&&(e.viewPort=o.first)},inputs:{shipments:"shipments",voyage:"voyage",arrType:"arrType",permission:"permission",height:"height",modul:"modul"},features:[V.Bb()],decls:35,vars:33,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],[2,"overflow","auto"],["autosize","","fxLayout","column",1,"content"],[1,"simple","shipment-table"],[1,"sticky-col",2,"z-index","30"],[4,"ngFor","ngForOf"],[1,"sticky-right-col2",2,"z-index","30"],[1,"sticky-right-col1",2,"z-index","30"],[4,"cdkVirtualFor","cdkVirtualForOf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],[1,"text-center"],[4,"ngIf"],[1,"sticky-right-col2",3,"ngClass"],[1,"sticky-right-col1",3,"ngClass"],[3,"ngClass"],[1,"w-152","sticky-col",3,"ngClass"],[1,"text-center",3,"ngClass"],[1,"w-152",3,"ngClass","matTooltip"],[1,"cursor-pointer",3,"routerLink"],[3,"ngClass","matTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","primary","selected","",4,"ngSwitchCase"],["color","warn","selected","",4,"ngSwitchCase"],["color","accent","selected","",4,"ngSwitchCase"],["color","primary","selected",""],["color","warn","selected",""],["color","accent","selected",""]],template:function(t,e){1&t&&(V.Jc(0,_n,3,1,"div",0),V.Xb(1,"div",1),V.Xb(2,"cdk-virtual-scroll-viewport",2),V.Xb(3,"table",3),V.Xb(4,"thead"),V.Xb(5,"tr"),V.Xb(6,"th"),V.Lc(7,"No"),V.Wb(),V.Xb(8,"th",4),V.Lc(9,"Vessel voy"),V.Wb(),V.Xb(10,"th"),V.Lc(11,"POL"),V.Wb(),V.Xb(12,"th"),V.Lc(13,"POD"),V.Wb(),V.Xb(14,"th"),V.Lc(15,"ETD"),V.Wb(),V.Xb(16,"th"),V.Lc(17,"ETA"),V.Wb(),V.Jc(18,Ln,3,3,"ng-container",5),V.Xb(19,"th"),V.Lc(20,"Shipment"),V.Wb(),V.Xb(21,"th"),V.Lc(22,"BL"),V.Wb(),V.Xb(23,"th"),V.Lc(24,"Customer"),V.Wb(),V.Xb(25,"th"),V.Lc(26,"Agent"),V.Wb(),V.Xb(27,"th"),V.Lc(28,"Process"),V.Wb(),V.Xb(29,"th",6),V.Lc(30,"Container"),V.Wb(),V.Xb(31,"th",7),V.Lc(32,"Type"),V.Wb(),V.Wb(),V.Wb(),V.Xb(33,"tbody"),V.Jc(34,Bn,2,1,"ng-container",8),V.Wb(),V.Wb(),V.Wb(),V.Wb()),2&t&&(V.pc("ngIf",0===e.voyage.length),V.Db(1),V.Ic("height",e.height,"px"),V.Db(1),V.Ic("height",e.height,"px"),V.Db(4),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.pc("ngForOf",e.arrType),V.Db(1),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(2),V.Ic("top",e.inverseOfTranslation),V.Db(3),V.pc("cdkVirtualForOf",e.voyage))},directives:[H.t,D.e,w.a,U.d,H.s,D.d,U.c,U.e,H.q,q.a,d.a,i.j,x.c,H.x,H.y,x.a],pipes:[H.f],styles:["dashboard-container-list .dashboard-table{font-size:12px}dashboard-container-list .dashboard-table td,dashboard-container-list .dashboard-table th{padding:8px!important;white-space:nowrap}dashboard-container-list .dashboard-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-container-list .dashboard-table tfoot td{position:sticky;position:-webkit-sticky;bottom:0;background:#fff;z-index:10}dashboard-container-list .dashboard-table .sticky-col1{position:sticky;position:-webkit-sticky;left:0;background-color:#fff;z-index:20}dashboard-container-list .dashboard-table .sticky-col2{position:sticky;position:-webkit-sticky;left:96px;background-color:#fff;z-index:20}dashboard-container-list .dashboard-table .sticky-right-col{min-width:40px;position:sticky;position:-webkit-sticky;right:0;background-color:#fff}dashboard-container-list .dashboard-table .mat-standard-chip{font-size:12px;padding:4px;border-radius:10px;min-height:24px}"],encapsulation:2,data:{animation:kt.a}}),t})(),En=(()=>{class t{constructor(t,e,o,i,n){if(this.router=t,this.route=e,this._activatedRoute=o,this.authService=i,this.dashboardService=n,this.voyage=[],this.arrType=[],this.height=560,this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.dashboardService.onVesselChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.shipments=this.dashboardService.shipmentVessel,this.voyage=this.dashboardService.voyage,this.arrType=this.dashboardService.arrType})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(i.a),V.Rb(i.a),V.Rb(F.a),V.Rb(A))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-container"]],decls:1,vars:6,consts:[[3,"modul","shipments","voyage","arrType","permission","height"]],template:function(t,e){1&t&&V.Sb(0,"dashboard-container-list",0),2&t&&V.pc("modul",e.modul)("shipments",e.shipments)("voyage",e.voyage)("arrType",e.arrType)("permission",e.permission)("height",e.height)},directives:[zn],styles:["dashboard-container .no-shipments-text{font-size:24px;font-weight:300}dashboard-container cdk-virtual-scroll-viewport{width:100%}dashboard-container .dashboard-table{font-size:12px!important;border:1px solid #b3e5fc;margin-bottom:4px;background:#b3e5fc}dashboard-container .dashboard-table td,dashboard-container .dashboard-table th{padding:8px!important;white-space:nowrap}dashboard-container .mat-expansion-panel-body{padding:0!important}dashboard-container .shipment-table{font-size:12px!important}dashboard-container .shipment-table td,dashboard-container .shipment-table th{padding:8px!important;white-space:nowrap}dashboard-container .shipment-table thead th{position:sticky;position:-webkit-sticky;top:0;background:#fff;z-index:10}dashboard-container .shipment-table .sticky-col{width:152px;position:sticky;position:-webkit-sticky;background-color:#fff;left:0;z-index:20}dashboard-container .shipment-table .sticky-right-col1{position:sticky;position:-webkit-sticky;background-color:#fff;right:0;z-index:20}dashboard-container .shipment-table .sticky-right-col2{position:sticky;position:-webkit-sticky;background-color:#fff;right:47px;z-index:20}dashboard-container .shipment-table .row-even{background-color:#e0e0e0!important}dashboard-container .shipment-table .mat-standard-chip{font-size:10px!important;padding:4px;border-radius:6px;min-height:20px}"],encapsulation:2,data:{animation:kt.a}}),t})();var Hn=o("FSWq"),Un=o("XL1V"),Yn=o("g4yx"),qn=o("3DVi"),Gn=o("hrka"),Qn=o("Uhud");let Kn=(()=>{class t{constructor(t,e,o,i,n,a){if(this.router=t,this.route=e,this._activatedRoute=o,this.authService=i,this.dashboardService=n,this._matDialog=a,this.height=560,this._unsubscribeAll=new j.a,this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}ngOnInit(){this.authService.urlChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{if(this.modul=this.authService.modul,this.authService.permissionModul)this.permission=this.authService.permissionModul;else{let t=this.router.routerState.snapshot.url.split("/")[2];this.permission=this.authService.getAction(t)}}),this.authService.windowSizeChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t.height-64-64-16-4}),this.authService.changeScreen.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.height=t?this.authService.screenHeight-64-16-4:this.authService.screenHeight-64-64-16-4}),this.dashboardService.onVesselChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.data=this.dashboardService.shipmentError}),this.dashboardService.onDataChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.customer=this.dashboardService.customer,this.supplier=this.dashboardService.supplier,this.seaport=this.dashboardService.seaport,this.user=this.dashboardService.user}),this.dashboardService.onDataItemChanged.pipe(Object(xt.a)(this._unsubscribeAll)).subscribe(t=>{this.package=this.dashboardService.packageType,this.commodity=this.dashboardService.commodity})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getShipment(t){this.authService.onRequestChanged.next(!0),this.dashboardService.getFilterShipment(this.dashboardService.currenSearch.formSearch).then(e=>{if(this.authService.onRequestChanged.next(!1),t){let e=this.dashboardService.shipment.find(t=>t.id==this.oldError.id);e.error?this.authService.action[t]&&this.authService.action[t].code&&(e.error[this.authService.action[t].code]||this.authService.addAction(e.id,t)):this.authService.addAction(e.id,"E99")}}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("add error")})}openModal([t,e]){switch(this.oldError=JSON.parse(JSON.stringify(t)),e){case"E01":this.addAgent(t,e,"load");break;case"E02":this.addParty(t,e,"S");break;case"E03":this.addParty(t,e,"C");break;case"E04":this.addParty(t,e,"N");break;case"E05":this.addSellBill(t,e);break;case"E06":this.addBillContainer(t,e);break;case"E07":this.addAgent(t,e,"discharge");break;case"E08":this.searchMovement(t,e);break;case"E09":this.openVolumeModal(t,e);break;default:alert("error")}}addParty(t,e,o){this.dialogRef=this._matDialog.open(Hn.a,{panelClass:"shipment-details-party-modal-dialog",data:{label:"Add party",shipmentId:t.id,customer:this.customer,party:[],data:null,type:o}}),this.dialogRef.afterClosed().subscribe(t=>{t&&(this.authService.onRequestChanged.next(!0),this.dashboardService.createSelParty(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.getShipment(e):(console.error(t),alert("add error"))}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("add error")}))})}addAgent(t,e,o){this.dialogRef=this._matDialog.open(Un.a,{panelClass:"load-agent-modal-dialog",data:{agent:this.supplier,shipment:t,type:o}}),this.dialogRef.afterClosed().subscribe(t=>{t&&(this.authService.onRequestChanged.next(!0),this.dashboardService.updateSelShipment(t).then(t=>{this.authService.onRequestChanged.next(!1),1==t.affectedRows?this.getShipment(e):(console.error(t),alert("Error add "+o+" agent"))}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("Error add "+o+" agent")}))})}addSellBill(t,e){this.dialogRef=this._matDialog.open(Yn.a,{panelClass:"shipment-details-bill-modal-dialog",data:{label:"Add bill information",shipment:t,selVolume:t.volume?t.volume:[],customer:null,data:null}}),this.dialogRef.afterClosed().subscribe(t=>{t&&(this.authService.onRequestChanged.next(!0),this.dashboardService.createSelBill(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0&&this.getShipment(e)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("ERROR")}))})}addBillContainer(t,e){let o=[];t.container.map(e=>{t.bill_particular.container[e.cont_number]||o.push(e)}),this.dialogRef=this._matDialog.open(Yn.a,{panelClass:"shipment-details-bill-modal-dialog",data:{label:"Add bill container information",shipment:t,bill:t.bill_particular,package:this.package,selMove:null,customer:null,container:o,data:null}}),this.dialogRef.afterClosed().subscribe(t=>{t&&(this.authService.onRequestChanged.next(!0),this.dashboardService.createBillContainer(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0&&this.getShipment(e)}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("ERROR")}))})}searchMovement(t,e){if(t.process<6){let o=!1;this.dialogRef=this._matDialog.open(qn.a,{panelClass:"shipment-details-container-modal-dialog",data:{label:"Container move",shipmentId:t.id,selMove:[],data:null}}),this.dialogRef.componentInstance.getMovement.subscribe(t=>{this.authService.onRequestChanged.next(!0),this.dashboardService.getMovementByContNumber(t[0],t[1]).then(t=>{this.dialogRef.componentInstance.movement2=t,this.dialogRef.componentInstance.movementFilter2[5]=t.filter(t=>"TREXP"==t.move_type),this.dialogRef.componentInstance.movementFilter2[6]=t.filter(t=>"FULEX"==t.move_type),this.dialogRef.componentInstance.movementFilter2[9]=t.filter(t=>"LOAD"==t.move_type),this.dialogRef.componentInstance.movementFilter2[3]=t.filter(t=>"FULIM"==t.move_type),this.dialogRef.componentInstance.movementFilter2[4]=t.filter(t=>"TRIMP"==t.move_type),this.dialogRef.componentInstance.movementFilter2[2]=t.filter(t=>"EMPTY"==t.move_type),this.authService.onRequestChanged.next(!1)}).catch(t=>{console.error(t),alert("ERROR load movement"),this.authService.onRequestChanged.next(!1)})}),this.dialogRef.componentInstance.createSelMoveParent.subscribe(e=>{let i=null;e.move_type&&(i=e.move_type,delete e.move_type),this.dashboardService.createSelMove(e).then(e=>{this.authService.onRequestChanged.next(!1),e.insertId>0?(this.dialogRef.componentInstance.onMovementFormSubmit(this.dialogRef.componentInstance.formMovement),i&&this.authService.addAction(t.id,this.authService.actionCode[i]),o=!0):(alert("ERROR"),console.error(e))}).catch(t=>{this.authService.onRequestChanged.next(!1),alert("ERROR"),console.error(t)})}),this.dialogRef.afterClosed().subscribe(t=>{o&&this.getShipment(e)})}}openVolumeModal(t,e){this.dialogRef=this._matDialog.open(Gn.a,{panelClass:"shipment-details-volume-modal-dialog",data:{label:"Add volume",shipmentId:t.id,commodity:this.commodity,packageType:this.package,data:null}}),this.dialogRef.afterClosed().subscribe(t=>{t&&(this.authService.onRequestChanged.next(!0),this.dashboardService.createSelVolume(t).then(t=>{this.authService.onRequestChanged.next(!1),t.insertId>0?this.getShipment(e):(console.error(t),alert("add volume error"))}).catch(t=>{this.authService.onRequestChanged.next(!1),console.error(t),alert("add volume error")}))})}}return t.\u0275fac=function(e){return new(e||t)(V.Rb(i.g),V.Rb(i.a),V.Rb(i.a),V.Rb(F.a),V.Rb(A),V.Rb(f.b))},t.\u0275cmp=V.Lb({type:t,selectors:[["dashboard-check"]],decls:1,vars:4,consts:[[3,"modul","data","permission","height","openModal"]],template:function(t,e){1&t&&(V.Xb(0,"dashboard-check-list",0),V.fc("openModal",(function(t){return e.openModal(t)})),V.Wb()),2&t&&V.pc("modul",e.modul)("data",e.data)("permission",e.permission)("height",e.height)},directives:[Qn.a],styles:[""],encapsulation:2,data:{animation:kt.a}}),t})();var Zn=o("1jcm"),ta=o("+0xr"),ea=o("f0Cb"),oa=o("IOBc");let ia=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,oa.a]]}),t})(),na=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t]]}),t})();var aa=o("zQsl");let ca=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,ze.b,aa.b]]}),t})(),ra=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,X.t]]}),t})(),sa=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t]]}),t})();var ba=o("AjAt");let la=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,ba.a]]}),t})(),da=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t]]}),t})(),ha=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},providers:[ki.i],imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,ki.a.forRoot({apiKey:"AIzaSyDdcbQ4_zzLPPn2y0-HI_5po88wv6_AHxM",language:"en"})]]}),t})(),pa=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,D.g,w.b]]}),t})(),ua=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,D.g,w.b]]}),t})(),ma=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,D.g,w.b]]}),t})(),fa=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t,D.g,w.b]]}),t})(),ga=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,X.t]]}),t})(),va=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},imports:[[i.k,n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,_.b,L.b,Zn.b,ta.k,S.c,ea.b,D.g,w.b,X.t,ga]]}),t})();var ya=o("QN6G"),ka=o("sVAI"),xa=o("TzrD"),Da=o("jUCA"),wa=o("xcW2"),Wa=o("y1Uv");o.d(e,"DashboardModule",(function(){return Sa}));const Xa=[{path:"board",component:yt,resolve:{data:A},children:[{path:"overview",component:Hi},{path:"shipment",component:At},{path:"book",component:ie},{path:"vessel",component:Sn},{path:"container",component:En},{path:"stock",component:Ui},{path:"check",component:Kn}]}];let Sa=(()=>{class t{}return t.\u0275mod=V.Pb({type:t}),t.\u0275inj=V.Ob({factory:function(e){return new(e||t)},providers:[C.a,A,$],imports:[[i.k.forChild(Xa),n.b,M.a,a.b,c.c,r.c,s.b,b.e,l.b,d.b,h.c,p.c,u.b,m.c,f.e,g.b,v.b,y.b,k.d,x.e,D.g,w.b,X.t,S.c,_.b,L.b,O.a,W.f,ia,na,ca,ra,sa,la,da,ha,pa,ua,ma,fa,va,ya.a,ka.a,xa.a,Da.a,wa.a,Wa.a]]}),t})()}}]);